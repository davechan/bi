// vqlcore.js
(function(){function r(a,c,d){if(a===c)return 0!==a||1/a==1/c;if(null==a||null==c)return a===c;a._chain&&(a=a._wrapped);c._chain&&(c=c._wrapped);if(a.isEqual&&b.isFunction(a.isEqual))return a.isEqual(c);if(c.isEqual&&b.isFunction(c.isEqual))return c.isEqual(a);var e=l.call(a);if(e!=l.call(c))return!1;switch(e){case"[object String]":return a==""+c;case"[object Number]":return a!=+a?c!=+c:0==a?1/a==1/c:a==+c;case"[object Date]":case"[object Boolean]":return+a==+c;case"[object RegExp]":return a.source==c.source&&a.global==c.global&&a.multiline==c.multiline&&a.ignoreCase==c.ignoreCase}if("object"!=typeof a||"object"!=typeof c)return!1;for(var f=d.length;f--;)if(d[f]==a)return!0;d.push(a);var f=0,g=!0;if("[object Array]"==e){if(f=a.length,g=f==c.length)for(;f--&&(g=f in a==f in c&&r(a[f],c[f],d)););}else{if("constructor"in a!="constructor"in c||a.constructor!=c.constructor)return!1;for(var h in a)if(b.has(a,h)&&(f++,!(g=b.has(c,h)&&r(a[h],c[h],d))))break;if(g){for(h in c)if(b.has(c,h)&&!f--)break;g=!f}}d.pop();return g}var s=this,I=s._,o={},k=Array.prototype,p=Object.prototype,i=k.slice,J=k.unshift,l=p.toString,K=p.hasOwnProperty,y=k.forEach,z=k.map,A=k.reduce,B=k.reduceRight,C=k.filter,D=k.every,E=k.some,q=k.indexOf,F=k.lastIndexOf,p=Array.isArray,L=Object.keys,t=Function.prototype.bind,b=function(a){return new m(a)};"undefined"!==typeof exports?("undefined"!==typeof module&&module.exports&&(exports=module.exports=b),exports._=b):s._=b;b.VERSION="1.3.3";var j=b.each=b.forEach=function(a,c,d){if(a!=null)if(y&&a.forEach===y)a.forEach(c,d);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(e in a&&c.call(d,a[e],e,a)===o)break}else for(e in a)if(b.has(a,e)&&c.call(d,a[e],e,a)===o)break};b.map=b.collect=function(a,c,b){var e=[];if(a==null)return e;if(z&&a.map===z)return a.map(c,b);j(a,function(a,g,h){e[e.length]=c.call(b,a,g,h)});if(a.length===+a.length)e.length=a.length;return e};b.reduce=b.foldl=b.inject=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(A&&a.reduce===A){e&&(c=b.bind(c,e));return f?a.reduce(c,d):a.reduce(c)}j(a,function(a,b,i){if(f)d=c.call(e,d,a,b,i);else{d=a;f=true}});if(!f)throw new TypeError("Reduce of empty array with no initial value");return d};b.reduceRight=b.foldr=function(a,c,d,e){var f=arguments.length>2;a==null&&(a=[]);if(B&&a.reduceRight===B){e&&(c=b.bind(c,e));return f?a.reduceRight(c,d):a.reduceRight(c)}var g=b.toArray(a).reverse();e&&!f&&(c=b.bind(c,e));return f?b.reduce(g,c,d,e):b.reduce(g,c)};b.find=b.detect=function(a,c,b){var e;G(a,function(a,g,h){if(c.call(b,a,g,h)){e=a;return true}});return e};b.filter=b.select=function(a,c,b){var e=[];if(a==null)return e;if(C&&a.filter===C)return a.filter(c,b);j(a,function(a,g,h){c.call(b,a,g,h)&&(e[e.length]=a)});return e};b.reject=function(a,c,b){var e=[];if(a==null)return e;j(a,function(a,g,h){c.call(b,a,g,h)||(e[e.length]=a)});return e};b.every=b.all=function(a,c,b){var e=true;if(a==null)return e;if(D&&a.every===D)return a.every(c,b);j(a,function(a,g,h){if(!(e=e&&c.call(b,a,g,h)))return o});return!!e};var G=b.some=b.any=function(a,c,d){c||(c=b.identity);var e=false;if(a==null)return e;if(E&&a.some===E)return a.some(c,d);j(a,function(a,b,h){if(e||(e=c.call(d,a,b,h)))return o});return!!e};b.include=b.contains=function(a,c){var b=false;if(a==null)return b;if(q&&a.indexOf===q)return a.indexOf(c)!=-1;return b=G(a,function(a){return a===c})};b.invoke=function(a,c){var d=i.call(arguments,2);return b.map(a,function(a){return(b.isFunction(c)?c||a:a[c]).apply(a,d)})};b.pluck=function(a,c){return b.map(a,function(a){return a[c]})};b.max=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0])return Math.max.apply(Math,a);if(!c&&b.isEmpty(a))return-Infinity;var e={computed:-Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b>=e.computed&&(e={value:a,computed:b})});return e.value};b.min=function(a,c,d){if(!c&&b.isArray(a)&&a[0]===+a[0])return Math.min.apply(Math,a);if(!c&&b.isEmpty(a))return Infinity;var e={computed:Infinity};j(a,function(a,b,h){b=c?c.call(d,a,b,h):a;b<e.computed&&(e={value:a,computed:b})});return e.value};b.shuffle=function(a){var b=[],d;j(a,function(a,f){d=Math.floor(Math.random()*(f+1));b[f]=b[d];b[d]=a});return b};b.sortBy=function(a,c,d){var e=b.isFunction(c)?c:function(a){return a[c]};return b.pluck(b.map(a,function(a,b,c){return{value:a,criteria:e.call(d,a,b,c)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;return c===void 0?1:d===void 0?-1:c<d?-1:c>d?1:0}),"value")};b.groupBy=function(a,c){var d={},e=b.isFunction(c)?c:function(a){return a[c]};j(a,function(a,b){var c=e(a,b);(d[c]||(d[c]=[])).push(a)});return d};b.sortedIndex=function(a,c,d){d||(d=b.identity);for(var e=0,f=a.length;e<f;){var g=e+f>>1;d(a[g])<d(c)?e=g+1:f=g}return e};b.toArray=function(a){return!a?[]:b.isArray(a)||b.isArguments(a)?i.call(a):a.toArray&&b.isFunction(a.toArray)?a.toArray():b.values(a)};b.size=function(a){return b.isArray(a)?a.length:b.keys(a).length};b.first=b.head=b.take=function(a,b,d){return b!=null&&!d?i.call(a,0,b):a[0]};b.initial=function(a,b,d){return i.call(a,0,a.length-(b==null||d?1:b))};b.last=function(a,b,d){return b!=null&&!d?i.call(a,Math.max(a.length-b,0)):a[a.length-1]};b.rest=b.tail=function(a,b,d){return i.call(a,b==null||d?1:b)};b.compact=function(a){return b.filter(a,function(a){return!!a})};b.flatten=function(a,c){return b.reduce(a,function(a,e){if(b.isArray(e))return a.concat(c?e:b.flatten(e));a[a.length]=e;return a},[])};b.without=function(a){return b.difference(a,i.call(arguments,1))};b.uniq=b.unique=function(a,c,d){var d=d?b.map(a,d):a,e=[];a.length<3&&(c=true);b.reduce(d,function(d,g,h){if(c?b.last(d)!==g||!d.length:!b.include(d,g)){d.push(g);e.push(a[h])}return d},[]);return e};b.union=function(){return b.uniq(b.flatten(arguments,true))};b.intersection=b.intersect=function(a){var c=i.call(arguments,1);return b.filter(b.uniq(a),function(a){return b.every(c,function(c){return b.indexOf(c,a)>=0})})};b.difference=function(a){var c=b.flatten(i.call(arguments,1),true);return b.filter(a,function(a){return!b.include(c,a)})};b.zip=function(){for(var a=i.call(arguments),c=b.max(b.pluck(a,"length")),d=Array(c),e=0;e<c;e++)d[e]=b.pluck(a,""+e);return d};b.indexOf=function(a,c,d){if(a==null)return-1;var e;if(d){d=b.sortedIndex(a,c);return a[d]===c?d:-1}if(q&&a.indexOf===q)return a.indexOf(c);d=0;for(e=a.length;d<e;d++)if(d in a&&a[d]===c)return d;return-1};b.lastIndexOf=function(a,b){if(a==null)return-1;if(F&&a.lastIndexOf===F)return a.lastIndexOf(b);for(var d=a.length;d--;)if(d in a&&a[d]===b)return d;return-1};b.range=function(a,b,d){if(arguments.length<=1){b=a||0;a=0}for(var d=arguments[2]||1,e=Math.max(Math.ceil((b-a)/d),0),f=0,g=Array(e);f<e;){g[f++]=a;a=a+d}return g};var H=function(){};b.bind=function(a,c){var d,e;if(a.bind===t&&t)return t.apply(a,i.call(arguments,1));if(!b.isFunction(a))throw new TypeError;e=i.call(arguments,2);return d=function(){if(!(this instanceof d))return a.apply(c,e.concat(i.call(arguments)));H.prototype=a.prototype;var b=new H,g=a.apply(b,e.concat(i.call(arguments)));return Object(g)===g?g:b}};b.bindAll=function(a){var c=i.call(arguments,1);c.length==0&&(c=b.functions(a));j(c,function(c){a[c]=b.bind(a[c],a)});return a};b.memoize=function(a,c){var d={};c||(c=b.identity);return function(){var e=c.apply(this,arguments);return b.has(d,e)?d[e]:d[e]=a.apply(this,arguments)}};b.delay=function(a,b){var d=i.call(arguments,2);return setTimeout(function(){return a.apply(null,d)},b)};b.defer=function(a){return b.delay.apply(b,[a,1].concat(i.call(arguments,1)))};b.throttle=function(a,c){var d,e,f,g,h,i,j=b.debounce(function(){h=g=false},c);return function(){d=this;e=arguments;f||(f=setTimeout(function(){f=null;h&&a.apply(d,e);j()},c));g?h=true:i=a.apply(d,e);j();g=true;return i}};b.debounce=function(a,b,d){var e;return function(){var f=this,g=arguments;d&&!e&&a.apply(f,g);clearTimeout(e);e=setTimeout(function(){e=null;d||a.apply(f,g)},b)}};b.once=function(a){var b=false,d;return function(){if(b)return d;b=true;return d=a.apply(this,arguments)}};b.wrap=function(a,b){return function(){var d=[a].concat(i.call(arguments,0));return b.apply(this,d)}};b.compose=function(){var a=arguments;return function(){for(var b=arguments,d=a.length-1;d>=0;d--)b=[a[d].apply(this,b)];return b[0]}};b.after=function(a,b){return a<=0?b():function(){if(--a<1)return b.apply(this,arguments)}};b.keys=L||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var c=[],d;for(d in a)b.has(a,d)&&(c[c.length]=d);return c};b.values=function(a){return b.map(a,b.identity)};b.functions=b.methods=function(a){var c=[],d;for(d in a)b.isFunction(a[d])&&c.push(d);return c.sort()};b.extend=function(a){j(i.call(arguments,1),function(b){for(var d in b)a[d]=b[d]});return a};b.pick=function(a){var c={};j(b.flatten(i.call(arguments,1)),function(b){b in a&&(c[b]=a[b])});return c};b.defaults=function(a){j(i.call(arguments,1),function(b){for(var d in b)a[d]==null&&(a[d]=b[d])});return a};b.clone=function(a){return!b.isObject(a)?a:b.isArray(a)?a.slice():b.extend({},a)};b.tap=function(a,b){b(a);return a};b.isEqual=function(a,b){return r(a,b,[])};b.isEmpty=function(a){if(a==null)return true;if(b.isArray(a)||b.isString(a))return a.length===0;for(var c in a)if(b.has(a,c))return false;return true};b.isElement=function(a){return!!(a&&a.nodeType==1)};b.isArray=p||function(a){return l.call(a)=="[object Array]"};b.isObject=function(a){return a===Object(a)};b.isArguments=function(a){return l.call(a)=="[object Arguments]"};b.isArguments(arguments)||(b.isArguments=function(a){return!(!a||!b.has(a,"callee"))});b.isFunction=function(a){return l.call(a)=="[object Function]"};b.isString=function(a){return l.call(a)=="[object String]"};b.isNumber=function(a){return l.call(a)=="[object Number]"};b.isFinite=function(a){return b.isNumber(a)&&isFinite(a)};b.isNaN=function(a){return a!==a};b.isBoolean=function(a){return a===true||a===false||l.call(a)=="[object Boolean]"};b.isDate=function(a){return l.call(a)=="[object Date]"};b.isRegExp=function(a){return l.call(a)=="[object RegExp]"};b.isNull=function(a){return a===null};b.isUndefined=function(a){return a===void 0};b.has=function(a,b){return K.call(a,b)};b.noConflict=function(){s._=I;return this};b.identity=function(a){return a};b.times=function(a,b,d){for(var e=0;e<a;e++)b.call(d,e)};b.escape=function(a){return(""+a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")};b.result=function(a,c){if(a==null)return null;var d=a[c];return b.isFunction(d)?d.call(a):d};b.mixin=function(a){j(b.functions(a),function(c){M(c,b[c]=a[c])})};var N=0;b.uniqueId=function(a){var b=N++;return a?a+b:b};b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var u=/.^/,n={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"},v;for(v in n)n[n[v]]=v;var O=/\\|'|\r|\n|\t|\u2028|\u2029/g,P=/\\(\\|'|r|n|t|u2028|u2029)/g,w=function(a){return a.replace(P,function(a,b){return n[b]})};b.template=function(a,c,d){d=b.defaults(d||{},b.templateSettings);a="__p+='"+a.replace(O,function(a){return"\\"+n[a]}).replace(d.escape||u,function(a,b){return"'+\n_.escape("+w(b)+")+\n'"}).replace(d.interpolate||u,function(a,b){return"'+\n("+w(b)+")+\n'"}).replace(d.evaluate||u,function(a,b){return"';\n"+w(b)+"\n;__p+='"})+"';\n";d.variable||(a="with(obj||{}){\n"+a+"}\n");var a="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+a+"return __p;\n",e=new Function(d.variable||"obj","_",a);if(c)return e(c,b);c=function(a){return e.call(this,a,b)};c.source="function("+(d.variable||"obj")+"){\n"+a+"}";return c};b.chain=function(a){return b(a).chain()};var m=function(a){this._wrapped=a};b.prototype=m.prototype;var x=function(a,c){return c?b(a).chain():a},M=function(a,c){m.prototype[a]=function(){var a=i.call(arguments);J.call(a,this._wrapped);return x(c.apply(b,a),this._chain)}};b.mixin(b);j("pop,push,reverse,shift,sort,splice,unshift".split(","),function(a){var b=k[a];m.prototype[a]=function(){var d=this._wrapped;b.apply(d,arguments);var e=d.length;(a=="shift"||a=="splice")&&e===0&&delete d[0];return x(d,this._chain)}});j(["concat","join","slice"],function(a){var b=k[a];m.prototype[a]=function(){return x(b.apply(this._wrapped,arguments),this._chain)}});m.prototype.chain=function(){this._chain=true;return this};m.prototype.value=function(){return this._wrapped}}).call(this);(function(){Type.registerNamespace('tab');tab.EscapingUtil=function(){}
tab.EscapingUtil.escapeHtml=function(html){var $0=(html||'');$0=$0.replace(new RegExp('&','g'),'&amp;');$0=$0.replace(new RegExp('<','g'),'&lt;');$0=$0.replace(new RegExp('>','g'),'&gt;');$0=$0.replace(new RegExp('"','g'),'&quot;');$0=$0.replace(new RegExp("'",'g'),'&#39;');$0=$0.replace(new RegExp('/','g'),'&#47;');return $0;}
tab.WindowHelper=function(window){this.$6=window;}
tab.WindowHelper.close=function(window){window.close();}
tab.WindowHelper.getOpener=function(window){return window.opener;}
tab.WindowHelper.getLocation=function(window){return window.location;}
tab.WindowHelper.setLocationHref=function(window,href){window.location.href=href;}
tab.WindowHelper.locationReplace=function(window,url){window.location.replace(url);}
tab.WindowHelper.clearLocationHash=function(loc){return loc.href.replaceAll(loc.hash,'');}
tab.WindowHelper.open=function(href,target){window.open(href,target);}
tab.WindowHelper.reload=function(w,foreGet){w.location.reload(foreGet);}
tab.WindowHelper.requestAnimationFrame=function(action){return tab.WindowHelper.$4(action);}
tab.WindowHelper.cancelAnimationFrame=function(animationId){tab.WindowHelper.$5(animationId);}
tab.WindowHelper.reloadLocation=function(){window.location.replace(tab.WindowHelper.clearLocationHash(window.location));}
tab.WindowHelper.$7=function(){var $0=0;tab.WindowHelper.$4=function($p1_0){var $1_0=new Date().getTime();var $1_1=Math.max(0,16-($1_0-$0));$0=$1_0+$1_1;var $1_2=window.setTimeout(function(){$p1_0();},$1_1);return $1_2;};}
tab.WindowHelper.prototype={$6:null,get_pageXOffset:function(){return tab.WindowHelper.$2(this.$6);},get_pageYOffset:function(){return tab.WindowHelper.$3(this.$6);},get_innerWidth:function(){return tab.WindowHelper.$0(this.$6);},get_innerHeight:function(){return tab.WindowHelper.$1(this.$6);}}
tab.EscapingUtil.registerClass('tab.EscapingUtil');tab.WindowHelper.registerClass('tab.WindowHelper');tab.WindowHelper.$0=null;tab.WindowHelper.$1=null;tab.WindowHelper.$2=null;tab.WindowHelper.$3=null;tab.WindowHelper.$4=null;tab.WindowHelper.$5=null;(function(){if(('innerWidth'in window)){tab.WindowHelper.$0=function($p1_0){return $p1_0.innerWidth;};}else{tab.WindowHelper.$0=function($p1_0){return $p1_0.document.documentElement.offsetWidth;};}if(('innerHeight'in window)){tab.WindowHelper.$1=function($p1_0){return $p1_0.innerHeight;};}else{tab.WindowHelper.$1=function($p1_0){return $p1_0.document.documentElement.offsetHeight;};}if(ss.isValue(window.self.pageXOffset)){tab.WindowHelper.$2=function($p1_0){return $p1_0.pageXOffset;};}else{tab.WindowHelper.$2=function($p1_0){return $p1_0.document.documentElement.scrollLeft;};}if(ss.isValue(window.self.pageYOffset)){tab.WindowHelper.$3=function($p1_0){return $p1_0.pageYOffset;};}else{tab.WindowHelper.$3=function($p1_0){return $p1_0.document.documentElement.scrollTop;};}var $0=['ms','moz','webkit','o'];var $1=null;var $2=null;for(var $3=0;$3<$0.length&&$1==null;++$3){var $4=$0[$3];var $5=$4+'RequestAnimationFrame';if(($5 in window)){$1=$5;}$5=$4+'CancelAnimationFrame';if(($5 in window)){$2=$5;}$5=$4+'CancelRequestAnimationFrame';if(($5 in window)){$2=$5;}}if($1!=null){tab.WindowHelper.$4=function($p1_0){return window[$1]($p1_0);};}else{tab.WindowHelper.$7();}if($2!=null){tab.WindowHelper.$5=function($p1_0){window[$2]($p1_0);};}else{tab.WindowHelper.$5=function($p1_0){window.clearTimeout($p1_0);};}})();
Type.registerNamespace('tableau.types');tableau.types.FloatingToolbarVisibility=function(){};tableau.types.FloatingToolbarVisibility.prototype = {auto:'auto',show:'show',hide:'hide'}
tableau.types.FloatingToolbarVisibility.registerEnum('tableau.types.FloatingToolbarVisibility',false);tableau.types.MouseMode=function(){};tableau.types.MouseMode.prototype = {silent:'silent',select:'select',zoom:'zoom',pan:'pan'}
tableau.types.MouseMode.registerEnum('tableau.types.MouseMode',false);tableau.types.SelectAction=function(){};tableau.types.SelectAction.prototype = {simple:'simple',toggle:'toggle',range:'range',menu:'menu'}
tableau.types.SelectAction.registerEnum('tableau.types.SelectAction',false);Type.registerNamespace('tab');tab.ILogAppender=function(){};tab.ILogAppender.registerInterface('tab.ILogAppender');tab.LoggerLevel=function(){};tab.LoggerLevel.prototype = {all:0,debug:1,info:2,warn:3,error:4,off:5}
tab.LoggerLevel.registerEnum('tab.LoggerLevel',false);tab.FeatureParam=function(){};tab.FeatureParam.prototype = {unknown:0,transparentBackground:3,newFilter:4,fieldTypeConversion:5,quickFilterFormatting:6}
tab.FeatureParam.registerEnum('tab.FeatureParam',false);tab.$create_DataValueStruct=function(type,value){var $o={};$o.t=type;$o.v=value;return $o;}
tab.$create_Delta=function(x,y,s){var $o={};$o.x=x;$o.y=y;$o.scale=s;$o.w=0;$o.h=0;return $o;}
tab.$create_DojoCoords=function(){return {};}
Type.registerNamespace('tableau');tab.$create_FormattingInfo=function(){return {};}
tab.$create_LocaleFormattingStrings=function(){return {};}
tab.$create_Point=function(x,y){var $o={};$o.x=x;$o.y=y;return $o;}
tab.$create_PointF=function(x,y){var $o={};$o.x=x;$o.y=y;return $o;}
tab.$create_Rect=function(l,t,w,h){var $o={};$o.l=l;$o.t=t;$o.w=w;$o.h=h;return $o;}
tab.$create_RectXY=function(x,y,w,h){var $o={};$o.x=x;$o.y=y;$o.w=w;$o.h=h;return $o;}
tab.$create_BBoxRectF=function(minX,minY,maxX,maxY){var $o={};$o.minX=minX;$o.minY=minY;$o.maxX=maxX;$o.maxY=maxY;return $o;}
tab.$create_RegionRect=function(l,t,w,h,region){var $o={};$o.x=l;$o.y=t;$o.w=w;$o.h=h;$o.r=region;return $o;}
tab.$create_Size=function(w,h){var $o={};$o.w=w;$o.h=h;return $o;}
tab.$create_TupleStruct=function(display,selected,dataValues){var $o={};$o.d=display;$o.s=selected;$o.t=dataValues;return $o;}
tableau.types.ColumnClass=function(){};tableau.types.ColumnClass.prototype = {CLASS_METADATA:0,CLASS_DATABASE:1,CLASS_NUMERICBIN:2,CLASS_CATEGORICALBIN:3,CLASS_INSTANCE:4,CLASS_MDXCALC:5,CLASS_USERCALC:6,CLASS_DANGLING:7,CLASS_LOCALDATA:8}
tableau.types.ColumnClass.registerEnum('tableau.types.ColumnClass',false);tableau.types.DrillState=function(){};tableau.types.DrillState.prototype = {DRILLNONE:0,DRILLDOWN:1,DRILLUP:2,DRILLBOTH:3}
tableau.types.DrillState.registerEnum('tableau.types.DrillState',false);tableau.types.DataSpecial=function(){}
tableau.types.DataType=function(){}
tableau.types.TableauTypesFieldRole=function(){}
tab.BaseLogAppender=function(){this.$0=[];}
tab.BaseLogAppender.prototype={$0:null,clearFilters:function(){this.$0.clear();},addFilter:function(f){this.$0.add(f);},removeFilter:function(f){this.$0.remove(f);},log:function(source,level,message,args){},formatMessage:function(message,args){if(ss.isNullOrUndefined(args)||!args.length){return message;}var $0=new ss.StringBuilder();var $1=0;var $2=false;for(var $3=0;$3<message.length;$3++){var $4=message.charAt($3);if($4==='%'){if($2){$0.append('%');$2=false;}else{$2=true;}}else{if($2){switch($4){case 'b':case 's':case 'd':case 'n':case 'o':$0.append((args.length>$1)?args[$1]:'');$1++;break;}}else{$0.append($4);}$2=false;}}return $0.toString();}}
tab.ConsoleLogAppender=function(){tab.ConsoleLogAppender.initializeBase(this);}
tab.ConsoleLogAppender.enableLogging=function(filter){if(ss.isNullOrUndefined(tab.ConsoleLogAppender.$1)){tab.ConsoleLogAppender.$1=new tab.ConsoleLogAppender();tab.Logger.addAppender(tab.ConsoleLogAppender.$1);}tab.ConsoleLogAppender.$1.addFilter((filter||function(){
return true;}));}
tab.ConsoleLogAppender.disableLogging=function(){if(ss.isNullOrUndefined(tab.ConsoleLogAppender.$1)){return;}tab.Logger.removeAppender(tab.ConsoleLogAppender.$1);tab.ConsoleLogAppender.$1=null;}
tab.ConsoleLogAppender.prototype={$2:null,logInternal:function(source,level,message,args){if(!(typeof console === 'object')){return;}message=source.get_name()+': '+message;var $0=[];if(tab.BrowserSupport.get_consoleLogFormating()){$0=$0.concat(message).concat(args);}else{$0=$0.concat(this.formatMessage(message,args));}try{Function.prototype.apply.call(this.$3(level), console, $0);}catch($1){}},$3:function($p0){if(ss.isNullOrUndefined(this.$2)){this.$2={};this.$2[(1).toString()]=console.log;this.$2[(4).toString()]=console.error;this.$2[(2).toString()]=console.info;this.$2[(3).toString()]=console.warn;}return this.$2[$p0.toString()]||console.log;}}
tab.Logger=function(name){tab.Logger.initializeBase(this);this.$1_1=name;}
tab.Logger.get_globalLog=function(){return tab.Logger.global;}
tab.Logger.get_$1_2=function(){return tab.MiscUtil.lazyInitStaticField(tab.Logger,'appenders',function(){
return [];});}
tab.Logger.get_$1_3=function(){return tab.MiscUtil.lazyInitStaticField(tab.Logger,'filters',function(){
return [];});}
tab.Logger.get_$1_4=function(){return tab.MiscUtil.lazyInitStaticField(tab.Logger,'nullLog',function(){
return new tab.Logger('');});}
tab.Logger.clearFilters=function(){var $enum1=ss.IEnumerator.getEnumerator(tab.Logger.get_$1_2());while($enum1.moveNext()){var $0=$enum1.current;$0.clearFilters();}tab.Logger.get_$1_3().clear();}
tab.Logger.filterByLogger=function(validLogger,minLogLevel){minLogLevel=(minLogLevel||0);tab.Logger.$1_6(function($p1_0,$p1_1){
return $p1_0===validLogger&&$p1_1>=minLogLevel;});}
tab.Logger.filterByType=function(t,minLogLevel){minLogLevel=(minLogLevel||0);tab.Logger.$1_6(function($p1_0,$p1_1){
return $p1_1>=minLogLevel&&$p1_0.get_name()===t.get_name();});}
tab.Logger.filterByName=function(namePattern,minLogLevel){minLogLevel=(minLogLevel||0);var $0=new RegExp(namePattern,'i');tab.Logger.$1_6(function($p1_0,$p1_1){
return $p1_1>=minLogLevel&&ss.isValue($p1_0.get_name().match($0));});}
tab.Logger.clearAppenders=function(){tab.Logger.get_$1_2().clear();}
tab.Logger.addAppender=function(appender){var $enum1=ss.IEnumerator.getEnumerator(tab.Logger.get_$1_3());while($enum1.moveNext()){var $0=$enum1.current;appender.addFilter($0);}tab.Logger.get_$1_2().add(appender);}
tab.Logger.removeAppender=function(appender){tab.Logger.get_$1_2().remove(appender);}
tab.Logger.lazyGetLogger=function(t){return tab.MiscUtil.lazyInitStaticField(t,'_logger',function(){
return tab.Logger.getLogger(t);});}
tab.Logger.getLogger=function(t,ll){var $0=tab.Logger.getLoggerWithName(t.get_name());if(ss.isValue(ll)){}return $0;}
tab.Logger.getLoggerWithName=function(name){return tab.Logger.get_$1_4();}
tab.Logger.$1_5=function(){var $0=tab.MiscUtil.getUriQueryParameters(window.self.location.search);if(!Object.keyExists($0,':log')){return;}var $1=$0[':log'];if(!$1.length){}var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;var $3=$2.split(':');var $4=1;if($3.length>0&&ss.isValue($3[1])){switch($3[1].toLowerCase()){case 'all':$4=0;break;case 'debug':$4=1;break;case 'info':$4=2;break;case 'warn':$4=3;break;case 'error':$4=4;break;case 'off':$4=5;break;}}}}
tab.Logger.$1_6=function($p0){tab.Logger.get_$1_3().add($p0);var $enum1=ss.IEnumerator.getEnumerator(tab.Logger.get_$1_2());while($enum1.moveNext()){var $0=$enum1.current;$0.addFilter($p0);}}
tab.Logger.prototype={$1_1:null,get_name:function(){return this.$1_1;},debug:function(message){},info:function(message){},warn:function(message){},error:function(message){},log:function(level,message){},$1_7:function($p0,$p1,$p2){try{var $enum1=ss.IEnumerator.getEnumerator(tab.Logger.get_$1_2());while($enum1.moveNext()){var $0=$enum1.current;$0.log(this,$p0,$p1,$p2);}}catch($1){}}}
tab.Log=function(){}
tab.Log.get=function(o){return tab.Logger.lazyGetLogger(Type.getInstanceType(o));}
tab.MetricsLogger=function(){this.$2=[];}
tab.MetricsLogger.get_instance=function(){if(ss.isNullOrUndefined(tab.MetricsLogger.$0)){tab.MetricsLogger.$0=new tab.MetricsLogger();}return tab.MetricsLogger.$0;}
tab.MetricsLogger.prototype={$1:0,$2:null,createContext:function(description){var $0=new tab.MetricsContext(this.$3(),description);this.$2.add($0);this.$4($0);return $0;},closeContext:function(context){this.$5(context);var $0=context.get_id();var $1=-1;for(var $2=(this.$2.length-1);$2>=0;$2--){if(this.$2[$2].get_id()===$0){$1=$2;break;}}if($1!==-1){this.$2.removeRange($1,this.$2.length-$1);}},$3:function(){var $0=this.$1;++this.$1;return $0;},$4:function($p0){},$5:function($p0){}}
tab.MetricsContext=function(contextID,desc){this.id=contextID;this.$0=desc;this.$1=new Date();}
tab.MetricsContext.prototype={id:0,$0:null,$1:null,$2:null,get_description:function(){return this.$0;},get_id:function(){return this.id;},close:function(){this.$2=new Date();tab.MetricsLogger.get_instance().closeContext(this);},elapsedMS:function(){if(ss.isValue(this.$2)){return this.$2.getTime()-this.$1.getTime();}var $0=new Date();return $0.getTime()-this.$1.getTime();}}
tab.WindowAppender=function(){tab.WindowAppender.initializeBase(this);}
tab.WindowAppender.enableLogging=function(filter){if(ss.isNullOrUndefined(tab.WindowAppender.$1)){tab.WindowAppender.$1=new tab.WindowAppender();tab.Logger.addAppender(tab.WindowAppender.$1);}tab.WindowAppender.$1.addFilter((filter||function(){
return true;}));}
tab.WindowAppender.disableLogging=function(){if(ss.isNullOrUndefined(tab.WindowAppender.$1)){return;}tab.Logger.removeAppender(tab.WindowAppender.$1);tab.WindowAppender.$1=null;}
tab.WindowAppender.prototype={$2:null,logInternal:function(source,level,message,args){if(ss.isNullOrUndefined(this.$2)){this.$3();}message=this.formatMessage(message.replaceAll('\\n','<br />'),args);this.$2.html(message);},$3:function(){this.$2=$("<div class='log-window-appender'>Debug mode ON</div>");this.$2.css({position:'absolute',bottom:'0px',right:'0px',backgroundColor:'white',opacity:'.8',border:'1px solid black',minWidth:'5px',minHeight:'5px','z-index':'100'});$('body').append(this.$2);}}
tab.BaseView=function(viewModel,template){this.disposables=new tab.DisposableHolder();tab.BaseView.initializeBase(this,[template.domRoot]);tab.Param.verifyValue(viewModel,'viewModel');tab.Param.verifyValue(template,'t');this.$7=template;this.$8=viewModel;this.$8.add_disposed(ss.Delegate.create(this,this.$9));this.$8.add_propertyChanged(ss.Delegate.create(this,this.onViewModelPropertyChanged));}
tab.BaseView.prototype={addedToDom:false,$7:null,$8:null,get_template:function(){return this.$7;},get_viewModel:function(){return this.$8;},dispose:function(){this.$8.remove_propertyChanged(ss.Delegate.create(this,this.onViewModelPropertyChanged));this.$8.remove_disposed(ss.Delegate.create(this,this.$9));this.disposables.dispose();this.get_element().remove();tab.BaseView.callBaseMethod(this, 'dispose');},addToDom:function(parent){parent.append(this.get_template().domRoot);this.onAddedToDom();},onAddedToDom:function(){this.addedToDom=true;},onViewModelPropertyChanged:function(sender,e){},$9:function($p0){this.dispose();}}
tab.BaseViewModel=function(){this.disposables=new tab.DisposableHolder();}
tab.BaseViewModel.prototype={add_disposed:function(value){this.$0=ss.Delegate.combine(this.$0,value);},remove_disposed:function(value){this.$0=ss.Delegate.remove(this.$0,value);},$0:null,add_propertyChanged:function(value){this.$1=ss.Delegate.combine(this.$1,value);},remove_propertyChanged:function(value){this.$1=ss.Delegate.remove(this.$1,value);},$1:null,dispose:function(){if(ss.isValue(this.$0)){this.$0(this);this.$0=null;}this.$1=null;this.disposables.dispose();},notifyPropertyChanged:function(propertyName){if(this.$1!=null){this.$1(this,new tab.PropertyChangedEventArgs(propertyName));}},raiseEvent:function(handler,e){if(ss.isValue(handler)){handler(this,(e||ss.EventArgs.Empty));}},raiseActionEvent:function(handler){if(ss.isValue(handler)){handler();}}}
tab.PropertyChangedEventArgs=function(propertyName){tab.PropertyChangedEventArgs.initializeBase(this);this.$1_0=propertyName;}
tab.PropertyChangedEventArgs.prototype={$1_0:null,get_propertyName:function(){return this.$1_0;}}
tab.Template=function(root){this.domRoot=root;}
tab.Template.fromHtml=function(html){return new tab.Template($(html));}
tab.Template.prototype={domRoot:null,getElementsBySelector:function(selector){return this.domRoot.find(selector);},getElementBySelector:function(selector){var $0=this.getElementsBySelector(selector);return $0;}}
tab.Widget=function(element){tab.Param.verifyValue(element,'element');this.$4=element;element.addClass('tab-widget');element.data('widgetInstance',this);tab.Widget.$3++;this.$5=tab.Widget.$3;}
tab.Widget.enableTextSelectionOnElement=function(element){element.removeClass('tab-unselectable');element.addClass('tab-selectable');element.unbind('.tab-disableSelection');}
tab.Widget.disableTextSelectionOnElement=function(element){element.removeClass('tab-selectable');element.addClass('tab-unselectable');if(tab.BrowserSupport.get_selectStart()){var $0='selectstart'+'.tab-disableSelection';element.bind($0,function($p1_0){
$p1_0.preventDefault();});}}
tab.Widget.findWidget=function(element,widgetType){tab.Param.verifyValue(element,'element');var $0=element;var $1;widgetType=(widgetType||tab.Widget);do{$1=$0.data('widgetInstance');if(ss.isValue($1)&&!widgetType.isAssignableFrom(Type.getInstanceType($1))){$1=null;}$0=$0.parent('.'+'tab-widget');}while(ss.isNullOrUndefined($1)&&!$0.is('body')&&$0.length>0);return (ss.isNullOrUndefined($1))?null:$1;}
tab.Widget.getWidgets=function(elements,widgetType){var $0=[];widgetType=(widgetType||tab.Widget);var $1;elements.each(function($p1_0,$p1_1){
$1=$($p1_1).data('widgetInstance');if(ss.isValue($1)&&widgetType.isAssignableFrom(Type.getInstanceType($1))){$0.add($1);}});return $0;}
tab.Widget.prototype={$4:null,$5:0,add_disposed:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_disposed:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_element:function(){return this.$4;},get_name:function(){return Type.getInstanceType(this).get_fullName();},get_instanceId:function(){return this.$5;},get_eventNamespace:function(){return String.format('.{0}_{1}',this.$5,Type.getInstanceType(this).get_fullName().replaceAll('.','_'));},enableTextSelection:function(){tab.Widget.enableTextSelectionOnElement(this.$4);return this;},disableTextSelection:function(){tab.Widget.disableTextSelectionOnElement(this.$4);return this;},dispose:function(){this.$4.removeData('widgetInstance');this.$4.remove();this.onDisposed(ss.EventArgs.Empty);},toString:function(){return this.get_name();},createNamespacedEventName:function(eventName){return eventName+this.get_eventNamespace();},onDisposed:function(args){if(ss.isValue(this.$6)){this.$6(this,ss.EventArgs.Empty);}}}
tab.BrowserSupport=function(){}
tab.BrowserSupport.get_getComputedStyle=function(){return ('getComputedStyle' in window);}
tab.BrowserSupport.get_addEventListener=function(){return ('addEventListener' in document);}
tab.BrowserSupport.get_selectStart=function(){return tab.BrowserSupport.$0;}
tab.BrowserSupport.get_touch=function(){return tab.BrowserSupport.$1;}
tab.BrowserSupport.get_dataUri=function(){return tab.BrowserSupport.$2;}
tab.BrowserSupport.get_postMessage=function(){return tab.BrowserSupport.$3;}
tab.BrowserSupport.get_historyApi=function(){return tab.BrowserSupport.$4;}
tab.BrowserSupport.get_consoleLogFormating=function(){return tab.BrowserSupport.$5;}
tab.BrowserSupport.get_isMobile=function(){return tab.BrowserSupport.$15||tab.BrowserSupport.$14;}
tab.BrowserSupport.get_isAndroid=function(){return tab.BrowserSupport.$15;}
tab.BrowserSupport.get_isMac=function(){return tab.BrowserSupport.$16;}
tab.BrowserSupport.get_isIE=function(){return tab.BrowserSupport.$E;}
tab.BrowserSupport.get_isFF=function(){return tab.BrowserSupport.$F;}
tab.BrowserSupport.get_isOpera=function(){return tab.BrowserSupport.$10;}
tab.BrowserSupport.get_isSafari=function(){return tab.BrowserSupport.$C;}
tab.BrowserSupport.get_browserVersion=function(){return parseFloat($.browser.version);}
tab.BrowserSupport.get_raisesEventOnImageReassignment=function(){return !tab.BrowserSupport.$C;}
tab.BrowserSupport.get_imageLoadIsSynchronous=function(){return tab.BrowserSupport.$E;}
tab.BrowserSupport.get_useAlternateHitStrategy=function(){return tab.BrowserSupport.$A;}
tab.BrowserSupport.get_pointerEvents=function(){return tab.BrowserSupport.$12||tab.BrowserSupport.get_isFF();}
tab.BrowserSupport.get_displayInlineBlock=function(){return !tab.BrowserSupport.$E||tab.BrowserSupport.get_browserVersion()>=8;}
tab.BrowserSupport.get_cssTransform=function(){return ss.isValue(tab.BrowserSupport.$6);}
tab.BrowserSupport.get_cssTransformName=function(){return tab.BrowserSupport.$6;}
tab.BrowserSupport.get_cssTransitionName=function(){return tab.BrowserSupport.$7;}
tab.BrowserSupport.get_cssTranslate2D=function(){return tab.BrowserSupport.$8;}
tab.BrowserSupport.get_cssTranslate3D=function(){return tab.BrowserSupport.$9;}
tab.BrowserSupport.get_nativeJSONSupport=function(){return (typeof JSON !== 'undefined')&&('parse' in JSON);}
tab.BrowserSupport.get_backingStoragePixelRatio=function(){return tab.BrowserSupport.$18;}
tab.BrowserSupport.get_devicePixelRatio=function(){return tab.BrowserSupport.$17;}
tab.BrowserSupport.get_canvasLinePattern=function(){return tab.BrowserSupport.$B;}
tab.BrowserSupport.get_dateInput=function(){return tab.BrowserSupport.$19;}
tab.BrowserSupport.get_dateTimeInput=function(){return tab.BrowserSupport.$1A;}
tab.BrowserSupport.get_dateTimeLocalInput=function(){return tab.BrowserSupport.$1B;}
tab.BrowserSupport.doPostMessage=function(message){if(!tab.BrowserSupport.get_postMessage()){return;}var $0=window.parent;try{$0.postMessage(message,'*');}catch($1){}}
tab.BrowserSupport.$1C=function(){var $0=$('<img />');var $1=$0[0];$0.bind('load error',function(){
tab.BrowserSupport.$2=$1.width===1&&$1.height===1;});$1.src='data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==';}
tab.BrowserSupport.$1D=function(){var $0=window.document.body;if(tab.BrowserSupport.$12&&tab.BrowserSupport.get_isMobile()){var $1=$('<div></div>');$1.css({position:'absolute',top:'300px',left:'300px',width:'25px',height:'25px'});var $2=$1.get(0);try{$0.appendChild($2);tab.BrowserSupport.$A=document.elementFromPoint(310,310)!==$2;}catch($3){}finally{$1.remove();}}}
tab.BrowserSupport.$1E=function(){try{if(ss.isValue(console)&&ss.isValue(console.log)){tab.BrowserSupport.$5=window.navigator.userAgent.indexOf('iPad')<0;}else{tab.BrowserSupport.$5=false;}}catch($0){tab.BrowserSupport.$5=false;}}
tab.BrowserSupport.$1F=function(){var $0=window.navigator.userAgent;tab.BrowserSupport.$11=$0.indexOf('Konqueror')>=0;tab.BrowserSupport.$12=$0.indexOf('WebKit')>=0;tab.BrowserSupport.$D=$0.indexOf('Chrome')>=0;tab.BrowserSupport.$C=$0.indexOf('Safari')>=0||(tab.BrowserSupport.$12&&!tab.BrowserSupport.$D);tab.BrowserSupport.$10=$0.indexOf('Opera')>=0;tab.BrowserSupport.$13=!tab.BrowserSupport.$11&&!tab.BrowserSupport.$12&&$0.indexOf('Gecko')>=0;tab.BrowserSupport.$F=tab.BrowserSupport.$13||$0.indexOf('Firefox')>=0||$0.indexOf('Minefield')>=0;tab.BrowserSupport.$E=$0.indexOf('MSIE')>=0;var $1=new RegExp('iPhone|iPod|iPad');tab.BrowserSupport.$14=$1.test($0);tab.BrowserSupport.$15=$0.indexOf('Android')>=0;tab.BrowserSupport.$16=$0.indexOf('Mac')>=0;}
tab.BrowserSupport.$20=function($p0,$p1,$p2){var $0=document.createElement('div');try{document.body.insertBefore($0,null);if(!($p0 in $0.style)){return false;}$0.style[$p0]=$p2;var $1=tab.DomUtil.getComputedStyle($0);var $2=$1[$p1];return !tab.MiscUtil.isNullOrEmpty($2)&&$2!=='none';}finally{document.body.removeChild($0).style.display='none';}}
tab.BrowserSupport.$21=function(){var $0={transition:'transition',webkitTransition:'-webkit-transition',msTransition:'-ms-transition',mozTransition:'-moz-transition',oTransition:'-o-transition'};var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};if(!($1.key in document.body.style)){continue;}tab.BrowserSupport.$7=$1.value;break;}}
tab.BrowserSupport.$22=function(){var $0={transform:'transform',webkitTransform:'-webkit-transform',msTransform:'-ms-transform',mozTransform:'-moz-transform',oTransform:'-o-transform'};var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};if(!($1.key in document.body.style)){continue;}tab.BrowserSupport.$6=$1.value;tab.BrowserSupport.$8=tab.BrowserSupport.$20($1.key,$1.value,'translate(1px,1px)');tab.BrowserSupport.$9=tab.BrowserSupport.$20($1.key,$1.value,'translate3d(1px,1px,1px)');break;}}
tab.BrowserSupport.$23=function(){tab.BrowserSupport.$17=(window.self.devicePixelRatio||1);}
tab.BrowserSupport.$24=function(){var $0=document.createElement('canvas');if(ss.isNullOrUndefined($0)){tab.BrowserSupport.$18=1;return;}var $1=null;if((typeof(Type.getInstanceType($0).getContext)==='function')){$1=$0.getContext('2d');}if(ss.isNullOrUndefined($1)){tab.BrowserSupport.$18=1;return;}tab.BrowserSupport.$18=($1.webkitBackingStorePixelRatio||$1.mozBackingStorePixelRatio||$1.msBackingStorePixelRatio||$1.oBackingStorePixelRatio||1);}
tab.BrowserSupport.$25=function(){var $0=document.createElement('canvas');if(ss.isNullOrUndefined($0)){return;}var $1=null;if((typeof(Type.getInstanceType($0).getContext)==='function')){$1=$0.getContext('2d');}if(ss.isNullOrUndefined($1)){return;}tab.BrowserSupport.$B=(typeof($1.setLineDash)==='function')||('mozDash' in $1)||('webkitLineDash' in $1);}
tab.BrowserSupport.$26=function(){tab.BrowserSupport.$19=tab.BrowserSupport.$27('date');tab.BrowserSupport.$1A=tab.BrowserSupport.$27('datetime');tab.BrowserSupport.$1B=tab.BrowserSupport.$27('datetime-local');}
tab.BrowserSupport.$27=function($p0){var $0=$("<input type='"+$p0+"'>").css({position:'absolute',visibility:'hidden'}).appendTo($(document.body));var $1=$0.get(0);var $2=$1.getAttribute('type');var $3='@inva/1d:)';$1.value=$3;var $4=($2===$p0&&$1.value!==$3);$0.remove();return $4;}
tab.CallOnDispose=function(callOnDispose){this.$0=callOnDispose;}
tab.CallOnDispose.prototype={$0:null,dispose:function(){if(ss.isNullOrUndefined(this.$0)){return;}this.$0();this.$0=null;}}
tab.FeatureParamsLookup=function(){}
tab.FeatureParamsLookup.getBool=function(param){return tab.FeatureParamsLookup.getBoolWithDefault(param,null);}
tab.FeatureParamsLookup.getBoolDefaultTrue=function(param){return tab.FeatureParamsLookup.getBoolWithDefault(param,true);}
tab.FeatureParamsLookup.getBoolDefaultFalse=function(param){return tab.FeatureParamsLookup.getBoolWithDefault(param,false);}
tab.FeatureParamsLookup.getBoolWithDefault=function(param,defaultValue){var $0=defaultValue;if(Object.keyExists(tab.FeatureParamsLookup.$6,param)){if(tab.FeatureParamsLookup.$6[param]!=null){$0=tab.FeatureParamsLookup.$6[param];}return $0;}return null;}
tab.FeatureParamsLookup.getFloat=function(param){if(Object.keyExists(tab.FeatureParamsLookup.$7,param)){return tab.FeatureParamsLookup.$7[param];}return null;}
tab.FeatureParamsLookup.getInt=function(param){if(Object.keyExists(tab.FeatureParamsLookup.$8,param)){return tab.FeatureParamsLookup.$8[param];}return null;}
tab.FeatureParamsLookup.getString=function(param){if(Object.keyExists(tab.FeatureParamsLookup.$9,param)){return tab.FeatureParamsLookup.$9[param];}return null;}
tab.FeatureParamsLookup.$A=function($p0,$p1){tab.FeatureParamsLookup.$1.add($p1);tab.FeatureParamsLookup.$5[$p0]=$p1;tab.FeatureParamsLookup.$6[$p1]=null;}
tab.FeatureParamsLookup.$B=function($p0,$p1){tab.FeatureParamsLookup.$2.add($p1);tab.FeatureParamsLookup.$5[$p0]=$p1;tab.FeatureParamsLookup.$7[$p1]=null;}
tab.FeatureParamsLookup.$C=function($p0,$p1){tab.FeatureParamsLookup.$3.add($p1);tab.FeatureParamsLookup.$5[$p0]=$p1;tab.FeatureParamsLookup.$8[$p1]=null;}
tab.FeatureParamsLookup.$D=function($p0,$p1){tab.FeatureParamsLookup.$4.add($p1);tab.FeatureParamsLookup.$5[$p0]=$p1;tab.FeatureParamsLookup.$9[$p1]=null;}
tab.FeatureParamsLookup.$E=function(){var $0=tab.MiscUtil.getUriQueryParameters(window.self.location.search);var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $2=$1.key.toLowerCase();var $3=0;if(Object.keyExists(tab.FeatureParamsLookup.$5,$2)){$3=tab.FeatureParamsLookup.$5[$2];}else{continue;}if($1.value.length>0){var $4=$1.value[0];if(tab.FeatureParamsLookup.$1.contains($3)){var $5=Boolean.parse($4);tab.FeatureParamsLookup.$6[$3]=$5;}else if(tab.FeatureParamsLookup.$2.contains($3)){var $6=parseFloat($4);tab.FeatureParamsLookup.$7[$3]=$6;}else if(tab.FeatureParamsLookup.$3.contains($3)){var $7=parseInt($4);tab.FeatureParamsLookup.$8[$3]=$7;}else if(tab.FeatureParamsLookup.$4.contains($3)){tab.FeatureParamsLookup.$9[$3]=$4;}else{continue;}}else{continue;}}}
tab.DateUtil=function(){}
tab.DateUtil.get_$1=function(){return tab.Logger.lazyGetLogger(tab.DateUtil);}
tab.DateUtil.adjustDateByPeriod=function(date,periodType,numPeriods){var $0=new Date();switch(periodType){case 'year':$0=new Date(date.getFullYear()+numPeriods,date.getMonth(),date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds());break;case 'quarter':$0=tab.DateUtil.adjustByMonths(date,numPeriods*3);break;case 'month':$0=tab.DateUtil.adjustByMonths(date,numPeriods);break;case 'week':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneWeek));break;case 'day':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneDay));break;case 'hour':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneHour));break;case 'minute':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneMinute));break;case 'second':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneSecond));break;}return $0;}
tab.DateUtil.adjustByMonths=function(date,n){var $0=date.getMonth();var $1;var $2;if(n<0){$1=parseInt((-(((12-($0-1))-1-n)/12)));}else{$1=parseInt((($0-1+n)/12));}$2=$0+(n-($1*12));return new Date(date.getFullYear()+$1,$2,date.getDate(),date.getHours(),date.getMinutes(),date.getSeconds());}
tab.DateUtil.adjustDateByPeriodInUTC=function(date,periodType,numPeriods){var $0=new Date();switch(periodType){case 'year':$0=new Date(date.getUTCFullYear()+numPeriods,date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds());break;case 'quarter':$0=tab.DateUtil.adjustByMonthsInUTC(date,numPeriods*3);break;case 'month':$0=tab.DateUtil.adjustByMonthsInUTC(date,numPeriods);break;case 'week':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneWeek));break;case 'day':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneDay));break;case 'hour':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneHour));break;case 'minute':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneMinute));break;case 'second':$0=new Date(date.getTime()+(numPeriods*tab.DateUtil.oneSecond));break;}return $0;}
tab.DateUtil.adjustByMonthsInUTC=function(date,n){var $0=date.getUTCMonth(),$1,$2;if(n<0){$1=parseInt((-(((12-($0-1))-1-n)/12)));}else{$1=parseInt((($0-1+n)/12));}$2=$0+(n-($1*12));return new Date(Date.UTC(date.getUTCFullYear()+$1,$2,date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds()));}
tab.DateUtil.parsePresModelDate=function(dateValue){if(ss.isNullOrUndefined(dateValue)){return null;}var $0=new RegExp('(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)( (\\d\\d):(\\d\\d):(\\d\\d))?').exec(dateValue);if(ss.isNullOrUndefined($0)){return null;}var $1=parseInt($0[1],10);var $2=parseInt($0[2],10)-1;var $3=parseInt($0[3],10);if(ss.isNullOrUndefined($0[4])){return new Date(Date.UTC($1,$2,$3));}else{var $4=parseInt($0[5],10);var $5=parseInt($0[6],10);var $6=parseInt($0[7],10);return new Date(Date.UTC($1,$2,$3,$4,$5,$6));}}
tab.DateUtil.dateAsYear=function(arg){return arg.getUTCFullYear();}
tab.DateUtil.dateAsQuarter=function(arg){var $0=tab.DateUtil.$3(arg);return parseInt(1+(($0-1)/3));}
tab.DateUtil.dateAsMonth=function(arg){return tab.DateUtil.$3(arg);}
tab.DateUtil.dateAsWeek=function(arg){var $0=new Date(arg.getUTCFullYear(),0,1);var $1=tab.DateUtil.$2(arg);var $2=parseInt(1+((($1+tab.DateUtil.$4($0))-2)/7));return $2;}
tab.DateUtil.dateAsDay=function(arg){return arg.getUTCDate();}
tab.DateUtil.dateAsDayOfYear=function(arg){return tab.DateUtil.$2(arg);}
tab.DateUtil.dateAsDayOfWeek=function(arg){return tab.DateUtil.$4(arg);}
tab.DateUtil.dateAsMonthYear=function(arg){var $0=(tab.DateUtil.$3(arg)*10000)+arg.getUTCFullYear();return $0;}
tab.DateUtil.dateAsMonthDayYear=function(arg){var $0=((tab.DateUtil.$3(arg)*1000000)+(arg.getUTCDate()*10000))+arg.getUTCFullYear();return $0;}
tab.DateUtil.dateTimeAsHour=function(arg){return arg.getUTCHours();}
tab.DateUtil.dateTimeAsMinute=function(arg){return arg.getUTCMinutes();}
tab.DateUtil.dateTimeAsSecond=function(arg){return arg.getUTCSeconds();}
tab.DateUtil.dateTimeAsOleDate=function(arg){return tableau.types.OleDateFromJsDate(arg.getTime());}
tab.DateUtil.$2=function($p0){var $0=$p0.getUTCFullYear();var $1=$p0.getUTCMonth();var $2=$p0.getUTCDate();var $3=new Date($0,0,1,12,0,0);var $4=new Date($0,$1,$2,12,0,0);var $5=Math.round(($4-$3)/tab.DateUtil.$0);return $5+1;}
tab.DateUtil.$3=function($p0){return $p0.getUTCMonth()+1;}
tab.DateUtil.$4=function($p0){return $p0.getUTCDay()+1;}
tab.DateUtil.daysSinceEpoch=function(date){return Math.floor(date.getTime()/tab.DateUtil.$0);}
tab.DateUtil.sameDay=function(date1,date2){return tab.DateUtil.daysSinceEpoch(date1)===tab.DateUtil.daysSinceEpoch(date2);}
tab.DisposableHolder=function(){this.$0=[];}
tab.DisposableHolder.prototype={add:function(d){this.$0.add(d);},dispose:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$0);while($enum1.moveNext()){var $0=$enum1.current;$0.dispose();}this.$0.clear();}}
tab.DomUtil=function(){}
tab.DomUtil.get_$1=function(){return tab.Logger.lazyGetLogger(tab.DomUtil);}
tab.DomUtil.getComputedStyle=function(e){if(tab.BrowserSupport.get_getComputedStyle()){var $0=window.getComputedStyle(e);if(ss.isValue($0)){return $0;}}return e.style;}
tab.DomUtil.getComputedZIndex=function(child){tab.Param.verifyValue(child,'child');var $0=$(child);var $1=$0;var $2=$('body');while(!!$0.length&&$0[0]!==$2[0]){if($0.css('position')==='absolute'){$1=$0;}$0=$0.offsetParent();}return tab.DomUtil.$4($1);}
tab.DomUtil.resize=function(e,rect){if((typeof(e.resize)==='function')){e.resize(rect);}else{tab.DomUtil.setMarginBox((e.domNode||e),rect);}}
tab.DomUtil.getContentBox=function(e){var $0=$(e);return tab.$create_Rect((parseInt($0.css('padding-left'),10)||0),(parseInt($0.css('padding-top'),10)||0),$0.width(),$0.height());}
tab.DomUtil.setContentBox=function(e,r){$(e).width(r.w).height(r.h);}
tab.DomUtil.setMarginBox=function(e,r){tab.DomUtil.setMarginBoxJQ($(e),r);}
tab.DomUtil.setMarginBoxJQ=function(o,r){tab.DomUtil.setMarginSizeJQ(o,tab.RecordCast.rectAsSize(r));if(!isNaN(r.t)){o.css('top',r.t+'px');}if(!isNaN(r.l)){o.css('left',r.l+'px');}}
tab.DomUtil.setMarginSizeJQ=function(o,s){if(s.w>=0){tab.DomUtil.$2(o,s.w);}if(s.h>=0){tab.DomUtil.$3(o,s.h);}}
tab.DomUtil.getMarginBox=function(e){return tab.DomUtil.getMarginBoxJQ($(e));}
tab.DomUtil.getMarginBoxJQ=function(o){var $0=o.position();return tab.$create_Rect($0.left,$0.top,o.outerWidth(true),o.outerHeight(true));}
tab.DomUtil.getDojoCoordsJQ=function(o){var $0=tab.$create_DojoCoords();$0.l=o.position().left;$0.t=o.position().top;$0.x=o.offset().left;$0.y=o.offset().top;$0.w=o.outerWidth(true);$0.h=o.outerHeight(true);return $0;}
tab.DomUtil.isEmbeddedCrossDomain=function(){if(ss.isNullOrUndefined(tab.DomUtil.$0)){try{tab.DomUtil.$0=window.self!==window.parent&&ss.isNullOrUndefined(window.parent.location.hostname);}catch($0){tab.DomUtil.$0=true;}}return tab.DomUtil.$0;}
tab.DomUtil.isAncestorOf=function(ancestor,child){if(ss.isNullOrUndefined(ancestor)||ss.isNullOrUndefined(child)){return false;}return $(child).parents().index(ancestor)>=0;}
tab.DomUtil.setElementPosition=function(e,pageX,pageY,duration){if(tab.BrowserSupport.get_cssTransform()){var $0={top:'0px',left:'0px'};if(tab.BrowserSupport.get_cssTranslate3D()){var $1=new ss.StringBuilder('translate3d(').append(pageX).append('px,').append(pageY).append('px,').append('0px)').toString();$0[tab.BrowserSupport.get_cssTransformName()]=$1;if(ss.isValue(duration)){$0[tab.BrowserSupport.get_cssTransitionName()+'-duration']=duration;}e.css($0);return;}if(tab.BrowserSupport.get_cssTranslate2D()){var $2=new ss.StringBuilder('translate(').append(pageX).append('px,').append(pageY).append('px)').toString();$0[tab.BrowserSupport.get_cssTransformName()]=$2;if(ss.isValue(duration)){$0[tab.BrowserSupport.get_cssTransitionName()+'-duration']=duration;}e.css($0);return;}}e.css({position:'absolute',top:pageY+'px',left:pageX+'px'});}
tab.DomUtil.getElementPosition=function(e){var $0=e.offset();return tab.$create_Point($0.left,$0.top);}
tab.DomUtil.getElementClientPosition=function(e){var $0=tab.DomUtil.getElementPosition(e);$0.x-=$(document.documentElement).scrollLeft();$0.y-=$(document.documentElement).scrollTop();return $0;}
tab.DomUtil.getElementRelativePosition=function(e,p){if(ss.isNullOrUndefined(p)){p=e.parent();}var $0=e.offset();var $1=p.offset();return tab.$create_Point($0.left-$1.left,$0.top-$1.top);}
tab.DomUtil.parseWidthFromStyle=function(style){if(ss.isValue(style)&&!tab.MiscUtil.isNullOrEmpty(style.width)){return parseInt(style.width);}return Number.NaN;}
tab.DomUtil.parseHeightFromStyle=function(style){if(ss.isValue(style)&&!tab.MiscUtil.isNullOrEmpty(style.height)){return parseInt(style.height);}return Number.NaN;}
tab.DomUtil.$2=function($p0,$p1){var $0=(parseInt($p0.css('margin-left'),10)||0);var $1=(parseInt($p0.css('border-left-width'),10)||0);var $2=(parseInt($p0.css('padding-left'),10)||0);var $3=(parseInt($p0.css('padding-right'),10)||0);var $4=(parseInt($p0.css('border-right-width'),10)||0);var $5=(parseInt($p0.css('margin-right'),10)||0);var $6=Math.max($p1-$0-$1-$2-$3-$4-$5,0);$p0.width($6);}
tab.DomUtil.$3=function($p0,$p1){var $0=(parseInt($p0.css('margin-top'),10)||0);var $1=(parseInt($p0.css('border-top-width'),10)||0);var $2=(parseInt($p0.css('padding-top'),10)||0);var $3=(parseInt($p0.css('padding-bottom'),10)||0);var $4=(parseInt($p0.css('border-bottom-width'),10)||0);var $5=(parseInt($p0.css('margin-bottom'),10)||0);var $6=Math.max($p1-$0-$1-$2-$3-$4-$5,0);$p0.height($6);}
tab.DomUtil.$4=function($p0){tab.Param.verifyValue($p0,'o');var $0=$p0.css('z-index');if(_.isNumber($0)){return $0;}if(_.isString($0)){if(!String.isNullOrEmpty($0)&&$0!=='auto'&&$0!=='inherits'){return parseInt($0,10);}}return 0;}
tab.FloatUtil=function(){}
tab.FloatUtil.isEqual=function(f1,f2){if(!f1||!f2){return f1===f2;}var $0=f2/f1;return tab.FloatUtil.$2<$0&&$0<tab.FloatUtil.$1;}
tab.FloatUtil.isLessThan=function(f1,f2){return f1<f2&&!tab.FloatUtil.isEqual(f1,f2);}
tab.FloatUtil.isLessThanOrEqual=function(f1,f2){return f1<f2||tab.FloatUtil.isEqual(f1,f2);}
tab.FloatUtil.isGreaterThan=function(f1,f2){return f1>f2||!tab.FloatUtil.isEqual(f1,f2);}
tab.FloatUtil.isGreaterThanOrEqual=function(f1,f2){return f1>f2||tab.FloatUtil.isEqual(f1,f2);}
tableau.format=function(){}
tableau.format.get_$B=function(){return tab.Logger.lazyGetLogger(tableau.format);}
tableau.format.get_isO8601DateFormat=function(){return tableau.format.$0;}
tableau.format.get_isO8601DateTimeFormat=function(){return tableau.format.$1;}
tableau.format.formatDataValue=function(dv,role,format,precision,showFullDateTimes){var $0=dv.s;if(ss.isNullOrUndefined($0)||$0==null){var $1=(('t' in dv))?dv.t:'';var $2=dv.v;switch($1){case 's':return $2;case 'b':return $2.toString();case 'i':return (role==='d')?tableau.format.$21($2).toString():tableau.format.$26($2,format);case 'r':return tableau.format.$25($2,format,precision,role);case 't':return (_.isDate($2))?tableau.format.$1A($2,format,showFullDateTimes,$1):tableau.format.$1B($2,format,showFullDateTimes,$1);case 'd':return (_.isDate($2))?tableau.format.$1A($2,format,false,$1):tableau.format.$1B($2,format,false,$1);}throw Error.createError('Invalid Tableau Format Type',null);}if($0==='n'){return 'null';}return '#special:'+$0+'#';}
tableau.format.formatToJSCompliantFormat=function(dateTimeString,format,showFullDateTimes,dataValueType){var $0=tableau.format.normalizeDateTimeFormat(format,showFullDateTimes,dataValueType);var $1=tableau.format.tokenizeDateTime(dateTimeString,$0);if(ss.isValue($1)){return tableau.format.$C($1);}else{return '';}}
tableau.format.normalizeDateTimeFormat=function(format,showFullDateTimes,dataValueType){var $0=format.format;var $1=format.timeFormat;if($0.charAt(0)==='*'){$0=$0.substr(1);}if(showFullDateTimes&&ss.isValue($1)&&((ss.isValue(format.originalFormat)&&(0===format.originalFormat.length||format.originalFormat==='S'))||dataValueType==='t')){if($1.charAt(0)==='*'){$1=$1.substr(1);}$0=$0+' '+$1;}$0=$0.replace(new RegExp('ampm','g'),'tt');$0=$0.replaceAll('H','h');$0=$0.replace(tableau.format.$8,function($p1_0){
return $p1_0.replace(new RegExp('m','gi'),'m');});$0=$0.replace(tableau.format.$9,function($p1_0){
return $p1_0.replace(new RegExp('m','gi'),'n');});return $0;}
tableau.format.tokenizeDateTime=function(dateTime,normalizedDateTimeFormat){var $0=normalizedDateTimeFormat;$0=$0.replace(tableau.format.$2,'\\$1');$0=$0.replace(tableau.format.tt,'($1)');$0=$0.replace(tableau.format.$5,'($1)');var $1=normalizedDateTimeFormat.match(new RegExp($0));var $2=normalizedDateTimeFormat;$2=$2.replace(tableau.format.$2,'\\$1');$2=$2.replace(tableau.format.$3,'$1(?: $2)?');$2=$2.replace(tableau.format.$4,'(?:$1)?');$2=$2.replace(tableau.format.$5,'(\\d+)');$2=$2.replace(tableau.format.tt,'([^0-9\\s]+)?');$2=$2.replace(tableau.format.$6,function($p1_0){
return $p1_0.replace(new RegExp('\\s+','g'),'\\s+');});$2=$2.replace(tableau.format.$7,'\\s*');var $3=dateTime.match(new RegExp($2));if(ss.isNullOrUndefined($3)){return null;}var $4={};for(var $5=1;$5<$3.length;++$5){if(ss.isValue($3[$5])&&$3[$5].length>0){$4[$1[$5].substr(0,1).toLowerCase()]=$3[$5];}}return $4;}
tableau.format.$C=function($p0){var $0=$p0['y'].replace(new RegExp('^(\\d{2})$'),function($p1_0){
var $1_0=parseInt($p1_0,10);return ($1_0<30)?('20'+$p1_0):('19'+$p1_0);});var $1=$p0['m']+'/'+$p0['d']+'/'+$0;if(Object.keyExists($p0,'h')&&Object.keyExists($p0,'n')){$1+=' '+$p0['h']+':'+$p0['n']+':';$1+=(Object.keyExists($p0,'s'))?$p0['s']:'00';if(Object.keyExists($p0,'t')){if(ss.isValue($p0['t'].match(tableau.format.am))){$1+=' am';}else if(ss.isValue($p0['t'].match(tableau.format.pm))){$1+=' pm';}}}return $1;}
tableau.format.adjustFyFormat=function(d,fiscalYearStart){var $0=d.getUTCFullYear();var $1=d.getUTCMonth()+1;var $2=d.getUTCDate();if($1<fiscalYearStart){$1+=13-fiscalYearStart;}else{$1-=fiscalYearStart-1;++$0;}if($2>28&&$1===2){if(!!($0%4)||(!!($0%400)&&!($0%100))){$2=28;}else{$2=29;}}else if($2>30&&($1===4||$1===6||$1===9||$1===11)){$2=30;}return new Date(Date.UTC($0,$1-1,$2,0,0,0));}
tableau.format.formatCustomJSDateTime=function(d,format,showFullDateTimes,dataValueType,locale,originalFormat,timeFormat,localeFormattingStrings,fiscalYearStart,startOfWeek){var $0=0,$1=0,$2;if(fiscalYearStart>1&&fiscalYearStart<=12){d=tableau.format.adjustFyFormat(d,fiscalYearStart);}if(showFullDateTimes&&ss.isValue(timeFormat)&&((ss.isValue(originalFormat)&&(0===originalFormat.length||originalFormat==='S'))||dataValueType==='t')){if(timeFormat.charAt(0)==='*'){timeFormat=timeFormat.substr(1);}format=format+' '+timeFormat;}if(format==='L'){format='*dddd, mmmm dd, yyyy';}if(format.charAt(0)==='*'){format=format.substr(1);}$2=format.length;var $3=[];$3.add(new tab.StringTuple('ampm',tableau.format.$11(d)));$3.add(new tab.StringTuple('tt',tableau.format.$11(d)));$3.add(new tab.StringTuple('yyyy',d.getUTCFullYear().toString()));$3.add(new tab.StringTuple('yy',d.getUTCFullYear().toString().substr(2)));$3.add(new tab.StringTuple('mmmm',tableau.format.$18(d,localeFormattingStrings)));$3.add(new tab.StringTuple('mmm',tableau.format.$19(d,localeFormattingStrings)));$3.add(new tab.StringTuple('dddd',tableau.format.$16(d,localeFormattingStrings)));$3.add(new tab.StringTuple('ddd',tableau.format.$17(d,localeFormattingStrings)));$3.add(new tab.StringTuple('mm',tableau.format.$F(d.getUTCMonth()+1,2)));$3.add(new tab.StringTuple('m',(d.getUTCMonth()+1).toString()));$3.add(new tab.StringTuple('dd',tableau.format.$F(d.getUTCDate(),2)));$3.add(new tab.StringTuple('d',d.getUTCDate().toString()));$3.add(new tab.StringTuple('hh',tableau.format.$F(tableau.format.$13(d),2)));$3.add(new tab.StringTuple('h',tableau.format.$13(d).toString()));$3.add(new tab.StringTuple('nn',tableau.format.$F(d.getUTCMinutes(),2)));$3.add(new tab.StringTuple('n',d.getUTCMinutes().toString()));$3.add(new tab.StringTuple('ss',tableau.format.$F(d.getUTCSeconds(),2)));$3.add(new tab.StringTuple('s',d.getUTCSeconds().toString()));$3.add(new tab.StringTuple('ww',tableau.format.$15(d,startOfWeek).toString()));$3.add(new tab.StringTuple('y',tableau.format.$14(d).toString()));$3.add(new tab.StringTuple('w',(d.getUTCDay()+1).toString()));$3.add(new tab.StringTuple('q',(Math.floor(d.getUTCMonth()/3)+1).toString()));var $4=[];var $5=null;while($0<$2){var $6=false;var $enum1=ss.IEnumerator.getEnumerator($3);while($enum1.moveNext()){var $7=$enum1.current;var $8=$7.get_first();var $9=$7.get_second();if($8===format.substr($0,$8.length).toLowerCase()){$6=true;$4.add($9);$0+=$8.length;if(ss.isValue($5)&&$8==='mm'){$4[$4.length-1]=tableau.format.$F(d.getUTCMinutes(),2);}if(ss.isValue($5)&&$8==='m'){$4[$4.length-1]=d.getUTCMinutes().toString();}if($8.charAt(0)==='d'){$5=null;}if($8.charAt(0)==='h'){$5=$8;$1=$4.length-1;}if(ss.isValue($5)&&($8==='ampm'||$8==='tt')){$4[$1]=($5==='hh')?tableau.format.$F(tableau.format.$12(d),2):tableau.format.$12(d).toString();}break;}}if($6){continue;}if(format.charAt($0)==='\\'){$4.add(format.substr($0+1,1));$0+=2;}else{$4.add(format.charAt($0).toString());$0+=1;}}format=$4.join('');return format;}
tableau.format.mapIcuToOleFormat=function(icuFormat){return tableau.format.$D(tableau.format.$A,icuFormat);}
tableau.format.$D=function($p0,$p1){if($p0==null||String.isNullOrEmpty($p1)){return $p1;}var $0=new ss.StringBuilder();var $1=0;var $2=0;var $3=null;while(++$2<=$p1.length){var $4=$p0[$p1.substring($1,$2)];if(ss.isValue($4)){$3=$4;}else{if($3!=null){$0.append($3);--$2;}else{$0.append($p1.substring($1,$1+1));}$1=$2;$3=null;}}if($3!=null){$0.append($3);}return $0.toString();}
tableau.format.escapeHTML=function(html){return tab.EscapingUtil.escapeHtml(html);}
tableau.format.formatSchemaDisplayName=function(schema){var $0='';var $enum1=ss.IEnumerator.getEnumerator(schema);while($enum1.moveNext()){var $1=$enum1.current;if(!!$0.length){$0+=',';}$0+=tableau.format.formatColumnDisplayName($1,false);}return $0;}
tableau.format.formatColumnDisplayName=function(column,suppressDSName){var $0=column.caption;if(!ss.isUndefined($0)){return $0;}var $1=column.name;if(suppressDSName){return $1.extract(1).join('.');}return tableau.format.formatQualifiedName($1);}
tableau.format.formatTupleDisplayName=function(tuple,noEscape,role){var $0=tuple.d;var $1=(ss.isValue($0))?$0:tableau.format.formatTupleUniqueName(tuple,role);return (noEscape)?$1:tableau.format.escapeHTML($1);}
tableau.format.formatTupleUniqueName=function(tuple,role){var $0='';var $1=tuple.t;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;if(!!$0.length){$0+=',';}$0+=tableau.format.formatDataValue($2,role);}return $0;}
tableau.format.formatTupleDisplayFacet=function(tuple,noEscape,role){var $0=tableau.format.formatTupleFacet(tuple,role);return (noEscape)?$0:tableau.format.escapeHTML($0);}
tableau.format.formatTupleFacet=function(tuple,role){var $0='';var $1=tuple.f;if(ss.isValue($1)){var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;if(!!$0.length){$0+=',';}$0+=tableau.format.formatDataValue($2,role);}}return $0;}
tableau.format.formatAliasedDataValue=function(adv,role,precision,showFullDateTimes){if(ss.isValue(adv[1])){return adv[1];}return tableau.format.formatDataValue(adv[0],role,null,precision,showFullDateTimes);}
tableau.format.formatQualifiedName=function(qname){var $0='';var $enum1=ss.IEnumerator.getEnumerator(qname);while($enum1.moveNext()){var $1=$enum1.current;if(!!$0.length){$0+='.';}$0+='['+$1.replace(new RegExp('\\]','g'),']]')+']';}return $0;}
tableau.format.formatIntAuto=function(v,doSeparators,separatorStr,groupingSpecStr){var $0=tableau.format.$1E(v,doSeparators,separatorStr,groupingSpecStr);return (tableau.format.$1D(v)>=0)?$0:'-'+$0;}
tableau.format.isDateTimeWithNonMidnightTime=function(dv){return (!('s' in dv)||dv.s==null)&&dv.t==='t'&&!tableau.format.$10(new Date(tableau.types.JsDateFromOleDate(dv.v)));}
tableau.format.applyDecimalPlaces=function(v,places,decimalStr){if(places>=0){var $0=tableau.format.$1C(v,places);var $1=$0-tableau.format.$1D(v);var $2=$1.toFixed(places);var $3=parseInt($2,10);if(Math.abs($3)===1){return $3;}if(!places){return '';}$2=$2.replace(new RegExp('^-?0\\.'),decimalStr);return $2;}return '';}
tableau.format.formatString=function(value,type,formatStrings,role){var $0=formatStrings;var $1='';var $2=value;switch(type){case 'cstring':$1='s';break;case 'date':$1='d';$2=tab.DateUtil.parsePresModelDate(value);$0=tableau.format.$27(formatStrings);break;case 'datetime':$1='t';$2=tab.DateUtil.parsePresModelDate(value);$0=tableau.format.$27(formatStrings);break;case 'integer':$1='i';$2=parseInt(value);break;case 'real':$1='r';$2=parseFloat(value);break;case 'tuple':$1='s';$2=tableau.format.$28(value);break;case 'unknown':default:$1=null;break;}var $3={};$3.t=$1;$3.v=$2;var $4;switch(role){case 'dimension':$4='d';break;case 'measure':$4='m';break;case 'unknown':default:$4=null;break;}return tableau.format.formatDataValue($3,$4,$0,null,false);}
tableau.format.formatSpecial=function(specialValue){switch(specialValue){case '%many-values%':return tab.Strings.SpecialManyValues;case '%null%':return '';case '%error%':return tab.Strings.SpecialError;case '%ragged%':return tab.Strings.SpecialRagged;case '%skipped%':return tab.Strings.SpecialSkipped;case '%missing%':return '';case '%all%':return tab.Strings.SpecialAll;case '%no-access%':return tab.Strings.SpecialNoAccess;case '%wildcard%':return tab.Strings.SpecialWildcard;default:return '#Special';}}
tableau.format.isSpecialValue=function(value){return (value==='%many-values%'||value==='%null%'||value==='%error%'||value==='%ragged%'||value==='%skipped%'||value==='%missing%'||value==='%all%'||value==='%no-access%'||value==='%wildcard%');}
tableau.format.stripFormattedText=function(formattedText){if(ss.isNullOrUndefined(formattedText)){return null;}return $(formattedText).find('run').text();}
tableau.format.$E=function($p0){var $0={en:true,fr:true,de:true};if(ss.isNullOrUndefined($p0)||String.isNullOrEmpty($p0)){return 'en';}var $1=($p0).substr(0,2);if(String.isNullOrEmpty($1)||!Object.keyExists($0,$1)){return 'en';}return $1;}
tableau.format.$F=function($p0,$p1){var $0=$p0.toString();while($0.length<$p1){$0='0'+$0;}return $0;}
tableau.format.$10=function($p0){return ss.isValue($p0)&&((!$p0.getUTCHours()&&!$p0.getUTCMinutes()&&!$p0.getUTCSeconds())||($p0.getUTCHours()===23&&$p0.getUTCMinutes()===59&&$p0.getUTCSeconds()===59));}
tableau.format.$11=function($p0){return ($p0.getUTCHours()<12)?'AM':'PM';}
tableau.format.$12=function($p0){var $0=$p0.getUTCHours();if($0<12){if(!$0){$0=12;}}else if($0>12){$0-=12;}return $0;}
tableau.format.$13=function($p0){return $p0.getUTCHours();}
tableau.format.$14=function($p0){var $0=new Date($p0.getUTCFullYear(),0,1,12);var $1=new Date($p0.getUTCFullYear(),$p0.getUTCMonth(),$p0.getUTCDate(),12);return Math.round(($1-$0)/86400000)+1;}
tableau.format.$15=function($p0,$p1){var $0=new Date(Date.UTC($p0.getUTCFullYear(),0,1));var $1=($0.getUTCDay()+7-($p1-1))%7;var $2=(($p0-$0)/86400000)+$1;return Math.floor($2/7)+1;}
tableau.format.$16=function($p0,$p1){if(ss.isNullOrUndefined($p1)){return null;}return $p1.day[$p0.getUTCDay()+1];}
tableau.format.$17=function($p0,$p1){if(ss.isNullOrUndefined($p1)){return null;}return $p1.shortDay[$p0.getUTCDay()+1];}
tableau.format.$18=function($p0,$p1){if(ss.isNullOrUndefined($p1)){return null;}return $p1.month[$p0.getUTCMonth()];}
tableau.format.$19=function($p0,$p1){if(ss.isNullOrUndefined($p1)){return null;}return $p1.shortMonth[$p0.getUTCMonth()];}
tableau.format.$1A=function($p0,$p1,$p2,$p3){if(ss.isNullOrUndefined($p1)){return tableau.format.formatCustomJSDateTime($p0,'*M/d/yyyy',($p2||!tableau.format.$10($p0)),$p3,'en_US','','h:nn:ss tt',null,0,1);}return tableau.format.formatCustomJSDateTime($p0,$p1.format,$p2,$p3,$p1.locale,$p1.originalFormat,$p1.timeFormat,$p1.locale_formatting_strings,$p1.fiscalYearStart,$p1.startOfWeek);}
tableau.format.$1B=function($p0,$p1,$p2,$p3){var $0=new Date(tableau.types.JsDateFromOleDate($p0));return tableau.format.$1A($0,$p1,$p2,$p3);}
tableau.format.$1C=function($p0,$p1){var $0=Math.pow(10,$p1);var $1;if(!!$p1){$1=$p0*$0;}else{$1=$p0;}var $2=Math.floor($1);var $3=$1-$2;var $4;if($3===0.5){if(!($2%2)){$4=$2;}else{$4=$2+1;}}else{$4=Math.round($1);}if(!!$p1){return $4/$0;}else{return $4;}}
tableau.format.$1D=function($p0){return ($p0<0)?Math.ceil($p0):Math.floor($p0);}
tableau.format.$1E=function($p0,$p1,$p2,$p3){var $0=Math.abs(tableau.format.$1D($p0));var $1='';var $2=(parseInt($p3.charAt(0).toString(),10)||3);if($p1!=='t'){return $0.toString();}while(true){var $3=$0%1000;$0=tableau.format.$1D($0/1000);if(isNaN($0)||0===$0){$1=$3.toString()+$1;break;}$1=$p2+tableau.format.$F($3,$2)+$1;}return $1;}
tableau.format.$1F=function($p0,$p1){switch($p1){case 'B':case 'G':return $p0/1000000000;case 'M':return $p0/1000000;case 'K':return $p0/1000;default:return $p0;}}
tableau.format.$20=function($p0,$p1,$p2,$p3,$p4){$p1=$p1.replace(new RegExp('^-'),'');if($p0>=0||new RegExp('^[.0]*$').test($p1)){return $p2+$p1+$p3;}switch(parseInt($p4,10)){case 2:return '-'+$p2+$p1+$p3;case 3:return $p2+$p1+$p3+'-';case 4:return $p2+'-'+$p1+$p3;case 5:return $p2+$p1+'-'+$p3;default:return '('+$p2+$p1+$p3+')';}}
tableau.format.$21=function($p0){return tableau.format.$1D($p0);}
tableau.format.$22=function($p0,$p1,$p2,$p3,$p4,$p5){var $0=$p0-tableau.format.$1D($p0);var $1=tableau.format.formatIntAuto($p0,$p3,$p4,$p5);var $2='';if(!$0){return $1;}if($1==='0'&&$p0<0){$1='-0';}var $3;if(ss.isValue($p1)&&$p1<0){$3=-$p1;}else{$3=Math.max(0,12-$1.length);}$2=tableau.format.$1C($0,$3).toFixed($3);if(parseFloat($2)>=1){$1=tableau.format.formatIntAuto(tableau.format.$1D($p0)+1,$p3,$p4,$p5);return $1;}$2=$2.replace(new RegExp('0+$'),'');$2=$2.replace(new RegExp('^-?0\\.'),$p2);return $1+$2;}
tableau.format.$23=function($p0,$p1){var $0=$p0.toExponential(parseInt($p1[1],10)).replace(new RegExp('e'),'E').replace(new RegExp('\\.'),$p1[7]);var $1=$0.indexOf('E');var $2=$0.substr($1);if($2.length<4){$0=$0.substring(0,$1+2)+'0'+$0.substr($1+2);}return $0;}
tableau.format.$24=function($p0,$p1){var $0=tableau.format.$1C(($p0*100),parseInt($p1[1],10)).toFixed(parseInt($p1[1],10))+'%';return $0.replace(new RegExp('^-(0[.0]*%)$'),'$1').replace(new RegExp('\\.'),$p1[7]);}
tableau.format.$25=function($p0,$p1,$p2,$p3){if(ss.isNullOrUndefined($p1)||$p1.length!==10){return tableau.format.$22($p0,$p2,'.',($p3==='d')?null:'t',',','3;0');}switch($p1[0]){case '':return tableau.format.$22($p0,null,$p1[7],$p1[2],$p1[8],$p1[9]);case 'e':return tableau.format.$23($p0,$p1);case 'p':return tableau.format.$24($p0,$p1);case 'N':$p1[1]='0';break;}$p0=tableau.format.$1F($p0,$p1[5]);var $0=$p1[5]+$p1[4];var $1=tableau.format.applyDecimalPlaces($p0,parseInt($p1[1],10),$p1[7]);if(Type.canCast($1,Number)){$p0+=$1;$1=tableau.format.applyDecimalPlaces(0,parseInt($p1[1],10),$p1[7]);}var $2=tableau.format.$1E($p0,$p1[2],$p1[8],$p1[9])+$1;return tableau.format.$20($p0,$2,$p1[3],$0,$p1[6]);}
tableau.format.$26=function($p0,$p1){return tableau.format.$25(tableau.format.$1D($p0),$p1,null,null);}
tableau.format.$27=function($p0){var $0=tab.$create_FormattingInfo();$0.format=$p0[0];$0.locale=$p0[1];$0.originalFormat=$p0[2];$0.timeFormat=$p0[3];$0.fiscalYearStart=parseInt($p0[4]);if(isNaN($0.fiscalYearStart)){$0.fiscalYearStart=0;}$0.startOfWeek=parseInt($p0[5]);if(isNaN($0.startOfWeek)){$0.startOfWeek=1;}return $0;}
tableau.format.$28=function($p0){var $0=',';var $1='(';var $2=')';var $3='"';var $4='\\';var $5=[];$p0=$p0.trim();if(!$p0.length){return '';}var $6=$p0.length;var $7=0;if($7>=$6||$p0.charAt($7)!==$1){return '';}++$7;while($7<$6){var $8=$7;var $9=false;var $A=0;while($8<$6&&!$9){var $C=$p0.charAt($8);if(!$A&&($C===$0||$C===$2)){$9=true;break;}else if($C===$4){$8+=2;}else{if($C===$3){$A=1-$A;}++$8;}}if(!$9){return '';}var $B=$p0.substring($7+1,$8-1);$B=$B.replaceAll('\\\\','\\');$B=$B.replaceAll('\\"','"');$B=$B.replaceAll('\\,',',');$B=$B.replaceAll('\\(','(');$B=$B.replaceAll('\\)',')');$5.add($B);$7=$8;++$7;}return $5.join(', ');}
tab.HistoryUtil=function(){}
tab.HistoryUtil.pushState=function(window,state,title,url){if(tab.BrowserSupport.get_historyApi()){try{window.history.pushState(state, title, url);}catch($0){}}}
tab.HistoryUtil.replaceState=function(window,state,title,url){if(tab.BrowserSupport.get_historyApi()){try{window.history.replaceState(state, title, url);}catch($0){}}}
tab.IntegerRange=function(from,to){this.$0=from;this.to=to;}
tab.IntegerRange.itemToTileRange=function(itemRange,tileSize){var $0=new tab.IntegerRange(0,0);$0.set_from(Math.floor(itemRange.get_from()/tileSize));$0.set_to(Math.floor(itemRange.get_to()/tileSize));return $0;}
tab.IntegerRange.pixelToItemRange=function(pixelRange,itemHeight){var $0=new tab.IntegerRange(0,0);$0.set_from(Math.floor(pixelRange.get_from()/itemHeight));$0.set_to(Math.floor(pixelRange.get_to()/itemHeight));return $0;}
tab.IntegerRange.pixelToTileRange=function(pixelRange,itemHeight,tileSize){return tab.IntegerRange.itemToTileRange(tab.IntegerRange.pixelToItemRange(pixelRange,itemHeight),tileSize);}
tab.IntegerRange.prototype={$0:0,to:0,get_from:function(){return this.$0;},set_from:function(value){this.$0=value;return value;},get_to:function(){return this.to;},set_to:function(value){this.to=value;return value;}}
tab.IntSet=function(){this.$0={};}
tab.IntSet.prototype={get_count:function(){return Object.getKeyCount(this.$0);},get_values:function(){var $0=new Array(this.get_count());var $1=0;var $dict1=this.$0;for(var $key2 in $dict1){var $2={key:$key2,value:$dict1[$key2]};$0[$1]=$2.value;$1++;}return $0;},addAll:function(ints){var $enum1=ss.IEnumerator.getEnumerator(ints);while($enum1.moveNext()){var $0=$enum1.current;this.$0[$0]=$0;}},add:function(i){this.$0[i]=i;},remove:function(i){delete this.$0[i];},contains:function(i){return Object.keyExists(this.$0,i);},intersect:function(ints){var $0=new tab.IntSet();var $dict1=ints.$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};if(this.contains($1.key)){$0.$0[$1.key]=$1.value;}}return $0;}}
$.fn.focusDelayed=function(delayMilliseconds,action){this.each(function(){
var $1_0=this;window.setTimeout(function(){
$($1_0).focus();if(ss.isValue(action)){action.call($1_0);}},delayMilliseconds);});}
$.expr.filters.focusable=function(element){return tab.vqlcore$0.$0(element,!isNaN(parseInt($(element).attr('tabindex'),10)));}
$.expr.filters.tabbable=function(element){var $0=parseInt($(element).attr('tabindex'),10);var $1=isNaN($0);return ($1||$0>=0)&&tab.vqlcore$0.$0(element,!$1);}
tab.vqlcore$0=function(){}
tab.vqlcore$0.$0=function($p0,$p1){var $0=$p0.nodeName.toLowerCase();if($0==='area'){return false;}var $1=$p1;var $2=new RegExp('input|select|textarea|button|object');if($2.test($0)){$1=!$p0.disabled;}else if($0==='a'){$1=!String.isNullOrEmpty(($p0).href)||$p1;}return $1&&tab.vqlcore$0.$1($p0);}
tab.vqlcore$0.$1=function($p0){var $0=$($p0).parents().andSelf().filter(function(){
return $(this).css('visibility')==='hidden'||$.expr.filters.hidden(this);});return !$0.length;}
tab.JsonUtil=function(){}
tab.JsonUtil.parseJson=function(jsonValue){return $.parseJSON(jsonValue);}
tab.JsonUtil.toJson=function(it,pretty,indentStr){pretty=(pretty||false);indentStr=(indentStr||'');var $0=[];return tab.JsonUtil.$3(it,pretty,indentStr,$0);}
tab.JsonUtil.$1=function($p0,$p1,$p2){if(ss.isValue((Array).prototype['indexOf'])){return $p0.indexOf($p1,$p2);}$p2=($p2||0);var $0=$p0.length;if($0>0){for(var $1=$p2;$1<$0;$1++){if($p0[$1]===$p1){return $1;}}}return -1;}
tab.JsonUtil.$2=function($p0,$p1,$p2){var $0=tab.JsonUtil.$1($p0,$p1,$p2);return $0>=0;}
tab.JsonUtil.$3=function($p0,$p1,$p2,$p3){if(tab.JsonUtil.$2($p3,$p0)){throw Error.createError('The object contains recursive reference of sub-objects',null);}if(ss.isUndefined($p0)){return 'undefined';}if($p0==null){return 'null';}var $0=$.type($p0);if($0==='number'||$0==='boolean'){return $p0.toString();}if($0==='string'){return tab.JsonUtil.$6($p0);}$p3.push($p0);var $1;$p2=($p2||'');var $2=($p1)?$p2+'\t':'';var $3=($p0.__json__||$p0.json);if($.isFunction($3)){var $6=$3;$1=$6($p0);if($p0!==$1){var $7=tab.JsonUtil.$3($1,$p1,$2,$p3);$p3.pop();return $7;}}if(ss.isValue($p0.nodeType)&&ss.isValue($p0.cloneNode)){throw Error.createError("Can't serialize DOM nodes",null);}var $4=($p1)?' ':'';var $5=($p1)?'\n':'';if($.isArray($p0)){return tab.JsonUtil.$5($p0,$p1,$p2,$p3,$2,$5);}if($0==='function'){$p3.pop();return null;}return tab.JsonUtil.$4($p0,$p1,$p2,$p3,$2,$5,$4);}
tab.JsonUtil.$4=function($p0,$p1,$p2,$p3,$p4,$p5,$p6){var $0=$p0;var $1=new ss.StringBuilder('{');var $2=false;var $dict1=$0;for(var $key2 in $dict1){var $3={key:$key2,value:$dict1[$key2]};var $4;var $5;if(typeof($3.key)==='number'){$4='"'+$3.key+'"';}else if(typeof($3.key)==='string'){$4=tab.JsonUtil.$6($3.key);}else{continue;}$5=tab.JsonUtil.$3($3.value,$p1,$p4,$p3);if($5==null){continue;}if($2){$1.append(',');}$1.append($p5+$p4+$4+':'+$p6+$5);$2=true;}$1.append($p5+$p2+'}');$p3.pop();return $1.toString();}
tab.JsonUtil.$5=function($p0,$p1,$p2,$p3,$p4,$p5){var $0=false;var $1=new ss.StringBuilder('[');var $2=$p0;for(var $3=0;$3<$2.length;$3++){var $4=$2[$3];var $5=tab.JsonUtil.$3($4,$p1,$p4,$p3);if($5==null){$5='undefined';}if($0){$1.append(',');}$1.append($p5+$p4+$5);$0=true;}$1.append($p5+$p2+']');$p3.pop();return $1.toString();}
tab.JsonUtil.$6=function($p0){$p0 = ('"' + $p0.replace(/(["\\])/g, '\\$1') + '"');$p0=$p0.replace(new RegExp('[\u000c]','g'),'\\f');$p0=$p0.replace(new RegExp('[\u0008]','g'),'\\b');$p0=$p0.replace(new RegExp('[\n]','g'),'\\n');$p0=$p0.replace(new RegExp('[\t]','g'),'\\t');$p0=$p0.replace(new RegExp('[\r]','g'),'\\r');return $p0;}
tab.MiscUtil=function(){}
tab.MiscUtil.addMethodAfterAdvice=function(instance,methodName,afterAdvice){var $0=instance[methodName];var $1=function(){
var $1_0=Array.toArray(arguments);var $1_1=$0.apply(instance,$1_0);return (afterAdvice.call(instance,$1_0)||$1_1);};instance[methodName]=$1;var $2=function(){
instance[methodName]=$0;};return new tab.CallOnDispose($2);}
tab.MiscUtil.lazyInitStaticField=function(t,fieldName,initializer){var $0=t[fieldName];if(ss.isNullOrUndefined($0)){$0=initializer();t[fieldName]=$0;}return $0;}
tab.MiscUtil.isValue=function(arg,field){if(ss.isNullOrUndefined(arg)){return false;}if(!ss.isNullOrUndefined(field)){var $0=arg[field];return !ss.isNullOrUndefined($0);}return true;}
tab.MiscUtil.percentEncode=function(valueToEncode,unreservedChars){valueToEncode=encodeURIComponent(valueToEncode);if(ss.isNullOrUndefined(unreservedChars)){return valueToEncode;}var $0=new ss.StringBuilder();var $1=0;while($1<valueToEncode.length){var $2=valueToEncode.substr($1,1);if($2==='%'){$0.append(valueToEncode.substr($1,3));$1+=2;}else if(!Object.keyExists(unreservedChars,$2)){$0.append('%').append($2.charCodeAt(0).toString(16).toUpperCase());}else{$0.append($2);}$1++;}return $0.toString();}
tab.MiscUtil.encodeForWG=function(valueToEncode){var $0={};var $1=function($p1_0,$p1_1){
for(var $1_0=$p1_0;$1_0<=$p1_1;$1_0++){var $1_1=String.fromCharCode($1_0);$0[$1_1]=$1_1;}};$1(97,122);$1(64,90);$1(48,57);$1(95,95);$1(45,45);valueToEncode=tab.MiscUtil.percentEncode(valueToEncode,$0);valueToEncode=tab.MiscUtil.percentEncode(valueToEncode,null);return valueToEncode;}
tab.MiscUtil.isNullOrUndefined=function(args){if(ss.isNullOrUndefined(args)){return true;}for(var $0=0;$0<args.length;$0++){if(ss.isNullOrUndefined(args[$0])){return true;}}return false;}
tab.MiscUtil.isNullOrEmpty=function(args){if(ss.isNullOrUndefined(args)){return true;}var $0=args;if(ss.isValue($0['length'])&&!$0['length']){return true;}return false;}
tab.MiscUtil.isValidIndex=function(index,arr){var $0=[index,arr];return !tab.MiscUtil.isNullOrUndefined($0)&&index>=0&&index<arr.length;}
tab.MiscUtil.isObject=function(o){return o === Object(o);}
tab.MiscUtil.hasOwnProperty=function(owner,field){return owner.hasOwnProperty(field);}
tab.MiscUtil.getUriQueryParameters=function(uri){var $0={};if(ss.isNullOrUndefined(uri)){return $0;}var $1=(uri).indexOf('?');if($1<0){return $0;}var $2=(uri).substr($1+1);var $3=$2.indexOf('#');if($3>=0){$2=$2.substr(0,$3);}if(String.isNullOrEmpty($2)){return $0;}var $4=$2.split('&');var $enum1=ss.IEnumerator.getEnumerator($4);while($enum1.moveNext()){var $5=$enum1.current;var $6=$5.split('=');var $7=decodeURIComponent($6[0]);var $8;if(Object.keyExists($0,$7)){$8=$0[$7];}else{$8=[];$0[$7]=$8;}if($6.length>1){$8.add(decodeURIComponent($6[1]));}}return $0;}
tab.MiscUtil.replaceUriQueryParameters=function(uri,parameters){var $0=new ss.StringBuilder();var $1=true;var $2=function(){
$0.append(($1)?'?':'&');$1=false;};var $dict1=parameters;for(var $key2 in $dict1){var $8={key:$key2,value:$dict1[$key2]};var $9=encodeURIComponent($8.key);if(ss.isNullOrUndefined($8.value)||!$8.value.length){$2();$0.append($9);}else{var $enum3=ss.IEnumerator.getEnumerator($8.value);while($enum3.moveNext()){var $A=$enum3.current;$2();$0.append($9).append('=').append(encodeURIComponent($A));}}}var $3=(uri).indexOf('?');var $4=(uri).indexOf('#');var $5=Math.min(($3<0)?(uri).length:$3,($4<0)?(uri).length:$4);var $6=(uri).substr(0,$5);var $7=($4<0)?'':(uri).substr($4);return $6+$0+$7;}
tab.MiscUtil.getLocationWindow=function(){var $0;if(tab.DomUtil.isEmbeddedCrossDomain()){$0=window.self;}else{$0=window.parent;}return $0;}
tab.MiscUtil.postHookMessage=function(message){tab.BrowserSupport.doPostMessage('tableau.hooks.'+message);}
tab.ObjectRegistry=function(){}
tab.ObjectRegistry.registerType=function(baseType,actualType){if(ss.isNullOrUndefined(tab.ObjectRegistry.$0)){tab.ObjectRegistry.$0={};}tab.ObjectRegistry.$0[baseType.get_fullName()]=actualType;}
tab.ObjectRegistry.newView=function(t,vm){if(ss.isNullOrUndefined(tab.ObjectRegistry.$0)){throw new Error('No types registered');}var $0=tab.ObjectRegistry.$0[t.get_fullName()];if(ss.isNullOrUndefined($0)){throw new Error('Unknown view type: '+t.get_fullName());}var $1=new $0(vm);return $1;}
tab.Param=function(){}
tab.Param.createArgumentNullOrUndefinedException=function(paramName){return Error.createError(paramName+' is null or undefined.',{paramName:paramName});}
tab.Param.verifyString=function(param,paramName){tab.Param.verifyValue(param,paramName);if(!param.trim().length){var $0=Error.createError(paramName+' contains only white space',{paramName:paramName});tab.Param.$0($0);throw $0;}}
tab.Param.verifyValue=function(param,paramName){if(ss.isNullOrUndefined(param)){var $0=tab.Param.createArgumentNullOrUndefinedException(paramName);tab.Param.$0($0);throw $0;}}
tab.Param.$0=function($p0){if(tab.Param.suppressAlerts){return;}try{throw $p0;}catch($0){alert(tab.Param.$1($0));}}
tab.Param.$1=function($p0){var $0;if(ss.isValue($p0.stack)){$0=$p0.stack;}else{$0=$p0.message;}return $0;}
tab.PointUtil=function(){}
tab.PointUtil.fromJson=function(json){if(ss.isNullOrUndefined(json)){return null;}return tab.$create_Point(json.x,json.y);}
tab.PointUtil.fromPosition=function(position){return tab.$create_Point(position.left,position.top);}
tab.PointUtil.add=function(first,second){if(ss.isNullOrUndefined(first)||ss.isNullOrUndefined(second)){return first;}return tab.$create_Point(first.x+second.x,first.y+second.y);}
tab.PointUtil.subtract=function(first,second){return tab.$create_Point(first.x-second.x,first.y-second.y);}
tab.PointUtil.distance=function(first,second){tab.Param.verifyValue(first,'first');tab.Param.verifyValue(second,'second');var $0=first.x-second.x;var $1=first.y-second.y;return Math.sqrt(($0*$0)+($1*$1));}
tab.PointUtil.equals=function(p,p2){return ss.isValue(p)&&ss.isValue(p2)&&p2.x===p.x&&p2.y===p.y;}
tab.RecordCast=function(){}
tab.RecordCast.deltaAsPoint=function(d){return d;}
tab.RecordCast.deltaAsRectXY=function(d){return d;}
tab.RecordCast.rectAsSize=function(r){return r;}
tab.RecordCast.rectXYAsSize=function(r){return r;}
tab.RecordCast.regionRectAsRectXY=function(r){return r;}
tab.RecordCast.regionRectAsSize=function(r){return r;}
tab.RecordCast.dojoCoordsAsPoint=function(c){return c;}
tab.RecordCast.dojoCoordsAsRectXY=function(c){return c;}
tab.RecordCast.frameInfoAsRect=function(fi){return fi;}
tab.RecordCast.rectJsonAsRectXY=function(r){return r;}
tab.RecordCast.pointJsonAsSize=function(point){return tab.$create_Size(point.x,point.y);}
tab.RecordCast.pointJsonAsPoint=function(point){return point;}
tab.RectUtil=function(){}
tab.RectUtil.isEmpty=function(r){return !r.w||!r.h;}
tab.RectUtil.isEqual=function(r1,r2){return r1.t===r2.t&&r1.l===r2.l&&r1.w===r2.w&&r1.h===r2.h;}
tab.RectUtil.inRect=function(r,p){return p.x>=r.l&&p.x<(r.l+r.w)&&p.y>=r.t&&p.y<(r.t+r.h);}
tab.RectUtil.intersectsWith=function(r1,r2){return !(r2.l+r2.w<r1.l||r2.t+r2.h<r1.t||r2.l>r1.l+r1.w||r2.t>r1.t+r1.h);}
tab.RectUtil.union=function(bounds1,bounds2){var $0=Math.min(bounds1.l,bounds2.l);var $1=Math.min(bounds1.t,bounds2.t);var $2=Math.max(bounds1.l+bounds1.w,bounds2.l+bounds2.w);var $3=Math.max(bounds1.t+bounds1.h,bounds2.t+bounds2.h);return tab.$create_Rect($0,$1,$2-$0,$3-$1);}
tab.RectXYUtil=function(){}
tab.RectXYUtil.isEmpty=function(r){return !r.w||!r.h;}
tab.RectXYUtil.isNull=function(r){return !r.x&&!r.y&&!r.w&&!r.h;}
tab.RectXYUtil.inRect=function(r,p){return p.x>=r.x&&p.x<(r.x+r.w)&&p.y>=r.y&&p.y<(r.y+r.h);}
tab.RectXYUtil.inRectPointF=function(r,p){return p.x>=r.x&&p.x<(r.x+r.w)&&p.y>=r.y&&p.y<(r.y+r.h);}
tab.RectXYUtil.intersectsWith=function(r1,r2){return !(r2.x+r2.w<r1.x||r2.y+r2.h<r1.y||r2.x>r1.x+r1.w||r2.y>r1.y+r1.h);}
tab.RectXYUtil.intersectsWithAny=function(r1,rectangles){var $0=false;var $enum1=ss.IEnumerator.getEnumerator(rectangles);while($enum1.moveNext()){var $1=$enum1.current;if(tab.RectXYUtil.intersectsWith(r1,$1)){$0=true;break;}}return $0;}
tab.RectXYUtil.completelyContains=function(r1,r2){return tab.RectXYUtil.inRect(r1,tab.$create_Point(r2.x,r2.y))&&tab.RectXYUtil.inRect(r1,tab.$create_Point(r2.x+r2.w-1,r2.y+r2.h-1));}
tab.RectXYUtil.toRect=function(r){return tab.$create_Rect(r.x,r.y,r.w,r.h);}
tab.RectXYUtil.offsetRect=function(r,p){return tab.$create_RectXY(r.x+p.x,r.y+p.y,r.w,r.h);}
tab.RectXYUtil.outsetRect=function(r,dx,dy){return tab.$create_RectXY(r.x-dx,r.y-dy,r.w+dx+dx,r.h+dy+dy);}
tab.RectXYUtil.encompassPoint=function(r,p){if(tab.RectXYUtil.isEmpty(r)){return tab.$create_RectXY(p.x,p.y,1,1);}if(!tab.RectXYUtil.inRect(r,p)){var $0=tab.$create_RectXY(r.x,r.y,r.w,r.h);var $1=$0.x-p.x;if($1>0){$0.x=p.x;$0.w+=$1;}else if($1<-$0.w){$0.w=-$1;}var $2=$0.y-p.y;if($2>0){$0.y=p.y;$0.h+=$2;}else if($2<-$0.h){$0.h=-$2;}return $0;}return r;}
tab.RectXYUtil.encompassCircle=function(r,p,diameter){var $0=diameter/2;var $1=tab.$create_RectXY(Math.floor(p.x-$0+0.5),Math.floor(p.y-$0+0.5),Math.floor(diameter+0.5),Math.floor(diameter+0.5));if(tab.RectXYUtil.isEmpty(r)){return $1;}return tab.RectXYUtil.union(r,$1);}
tab.RectXYUtil.encompassCircleF=function(r,p,diameter){var $0=diameter/2;var $1=tab.$create_RectXY(Math.floor(p.x-$0+0.5),Math.floor(p.y-$0+0.5),Math.floor(diameter+0.5),Math.floor(diameter+0.5));if(tab.RectXYUtil.isEmpty(r)){return $1;}return tab.RectXYUtil.union(r,$1);}
tab.RectXYUtil.union=function(bounds1,bounds2){if(tab.RectXYUtil.isEmpty(bounds1)){return bounds2;}if(tab.RectXYUtil.isEmpty(bounds2)){return bounds1;}var $0=Math.min(bounds1.x,bounds2.x);var $1=Math.min(bounds1.y,bounds2.y);var $2=Math.max(bounds1.x+bounds1.w,bounds2.x+bounds2.w);var $3=Math.max(bounds1.y+bounds1.h,bounds2.y+bounds2.h);return tab.$create_RectXY($0,$1,$2-$0,$3-$1);}
tab.RectXYUtil.rectXYFromCorners=function(corner1,corner2){var $0=Math.round(Math.min(corner1.x,corner2.x));var $1=Math.round(Math.min(corner1.y,corner2.y));var $2=Math.abs(Math.round(corner1.x-corner2.x));var $3=Math.abs(Math.round(corner1.y-corner2.y));return tab.$create_RectXY($0,$1,$2,$3);}
tab.RectXYUtil.rectXYFromBBoxRectF=function(bounds){return tab.RectXYUtil.rectXYFromMinAndMax(bounds.minX,bounds.minY,bounds.maxX,bounds.maxY);}
tab.RectXYUtil.rectXYFromMinAndMax=function(minX,minY,maxX,maxY){var $0=Math.floor(minX);var $1=Math.floor(minY);var $2=Math.ceil(maxX);var $3=Math.ceil(maxY);return tab.$create_RectXY($0,$1,$2-$0,$3-$1);}
tab.RectXYUtil.dialate=function(r,dialation){var $0=r.x-dialation;var $1=r.y-dialation;var $2=r.w+(2*dialation);var $3=r.h+(2*dialation);return tab.$create_RectXY($0,$1,$2,$3);}
tab.RectXYUtil.shiftCoordsTowardsCenter=function(coords,rect,marginSize){if(ss.isNullOrUndefined(rect)){return coords;}var $0=tab.$create_Point(coords.x,coords.y);$0=tab.RectXYUtil.horizontalShiftCoordsTowardsCenter(coords,rect,marginSize);$0=tab.RectXYUtil.verticalShiftCoordsTowardsCenter(coords,rect,marginSize);return $0;}
tab.RectXYUtil.horizontalShiftCoordsTowardsCenter=function(coords,rect,marginSize){if(ss.isNullOrUndefined(rect)){return coords;}var $0=tab.$create_Point(coords.x,coords.y);if($0.x<=(rect.x+marginSize)){$0.x+=marginSize;}else if($0.x>=((rect.x+rect.w)-(2*marginSize))){$0.x-=marginSize;}return $0;}
tab.RectXYUtil.verticalShiftCoordsTowardsCenter=function(coords,rect,marginSize){if(ss.isNullOrUndefined(rect)){return coords;}var $0=tab.$create_Point(coords.x,coords.y);if($0.y<=(rect.y+marginSize)){$0.y+=marginSize;}else if($0.y>=((rect.y+rect.h)-(2*marginSize))){$0.y-=marginSize;}return $0;}
tab.SizeUtil=function(){}
tab.SizeUtil.fromJson=function(json){return tab.$create_Size(json.w,json.h);}
tab.SizeUtil.isEmpty=function(s){return !s.w&&!s.h;}
tab.SizeUtil.add=function(first,second){if(ss.isNullOrUndefined(first)||ss.isNullOrUndefined(second)){return first;}return tab.$create_Size(first.w+second.w,first.h+second.h);}
tab.SizeUtil.subtract=function(first,second){return tab.$create_Size(first.w-second.w,first.h-second.h);}
tab.SizeUtil.equals=function(p,p2){return ss.isValue(p)&&ss.isValue(p2)&&p2.w===p.w&&p2.h===p.h;}
tab.StringTuple=function(first,second){this.$0=first;this.$1=second;}
tab.StringTuple.prototype={$0:null,$1:null,get_first:function(){return this.$0;},set_first:function(value){this.$0=value;return value;},get_second:function(){return this.$1;},set_second:function(value){this.$1=value;return value;}}
tab.StyleUtil=function(){}
tab.StyleUtil.appendCSSRule=function(selector,declarations){if(ss.isNullOrUndefined(tab.StyleUtil.$0)){var $1=document.createElement('style');$1.setAttribute('type','text/css');document.getElementsByTagName('head')[0].appendChild($1);tab.StyleUtil.$0=document.styleSheets[document.styleSheets.length-1];}var $0='';var $enum1=ss.IEnumerator.getEnumerator(Object.keys(declarations));while($enum1.moveNext()){var $2=$enum1.current;$0+=$2+':'+declarations[$2]+';\n';}if((typeof(tab.StyleUtil.$0.insertRule)==='function')){var $3=selector+' {\n'+$0+'}\n';var $4=tab.StyleUtil.$0.cssRules.length;tab.StyleUtil.$0.insertRule($3,$4);}else{var $enum2=ss.IEnumerator.getEnumerator(selector.split(','));while($enum2.moveNext()){var $5=$enum2.current;tab.StyleUtil.$0.addRule($5,$0,-1);}}}
tableau.types.$0=function(){return tab.MiscUtil.lazyInitStaticField(tableau.types,'millisecondsPerDay',function(){
return 24*60*60*1000;});}
tableau.types.$1=function(){return tab.MiscUtil.lazyInitStaticField(tableau.types,'javascriptOleEpoch',function(){
return Date.UTC(1899,11,30,0,0,0,0);});}
tableau.types.JsDateFromOleDate=function(f){var $0=(f<0)?Math.ceil(f):Math.floor(f);var $1=Math.round(Math.abs(f-$0)*tableau.types.$0())+($0*tableau.types.$0());return $1+tableau.types.$1();}
tableau.types.OleDateFromJsDate=function(ms){var $0=new Date(ms);var $1=Date.UTC($0.getUTCFullYear(),$0.getUTCMonth(),$0.getUTCDate());var $2=($1-tableau.types.$1())/tableau.types.$0();var $3=(ms-$1)/tableau.types.$0();return $2+((($2<0)?-1:1)*$3);}
tableau.types.isO=function(field){return field.fieldType==='O'||field.fieldType==='N';}
tableau.types.isMetadata=function(field){return !field.column_class;}
tableau.types.isOm=function(field){return tableau.types.isO(field)&&tableau.types.isMetadata(field);}
tableau.types.getRegionType=function(regionName){switch(regionName){case 'viz':case 'bottomaxis':case 'topaxis':case 'leftaxis':case 'rightaxis':case 'xheader':case 'yheader':return 't';case 'color':case 'shape':case 'size':case 'map':return 'l';case 'filter':return 'f';case 'current-page':return 'p';case 'title':return 'i';case 'text':return 'x';case 'bitmap':return 'b';case 'web':return 'w';case 'paramctrl':return 'a';case 'draw':return 'd';case 'text-block':return 'k';case 'layout-basic':case 'layout-flow':return 'c';default:return null;}}
tableau.types.RegionType=function(){}
tableau.types.FieldTypeTypes=function(){}
tableau.types.QFDomain=function(){}
tableau.types.CFStyle=function(){}
tableau.types.HFStyle=function(){}
tableau.types.CFType=function(){}
tableau.types.QFFixed=function(){}
tableau.types.QFInclude=function(){}
tableau.types.QFInclude.isRange=function(v){switch(v){case 'include-all':case 'include-null':case 'include-non-null':return false;default:return true;}}
tableau.types.DataSpecial.registerClass('tableau.types.DataSpecial');tableau.types.DataType.registerClass('tableau.types.DataType');tableau.types.TableauTypesFieldRole.registerClass('tableau.types.TableauTypesFieldRole');tab.BaseLogAppender.registerClass('tab.BaseLogAppender',null,tab.ILogAppender);tab.ConsoleLogAppender.registerClass('tab.ConsoleLogAppender',tab.BaseLogAppender);tab.Logger.registerClass('tab.Logger',tab.BaseLogger);tab.Log.registerClass('tab.Log');tab.MetricsLogger.registerClass('tab.MetricsLogger');tab.MetricsContext.registerClass('tab.MetricsContext');tab.WindowAppender.registerClass('tab.WindowAppender',tab.BaseLogAppender);tab.Widget.registerClass('tab.Widget',null,ss.IDisposable);tab.BaseView.registerClass('tab.BaseView',tab.Widget,tab.IView);tab.BaseViewModel.registerClass('tab.BaseViewModel',null,tab.IViewModel);tab.PropertyChangedEventArgs.registerClass('tab.PropertyChangedEventArgs',ss.EventArgs);tab.Template.registerClass('tab.Template');tab.BrowserSupport.registerClass('tab.BrowserSupport');tab.CallOnDispose.registerClass('tab.CallOnDispose',null,ss.IDisposable);tab.FeatureParamsLookup.registerClass('tab.FeatureParamsLookup');tab.DateUtil.registerClass('tab.DateUtil');tab.DisposableHolder.registerClass('tab.DisposableHolder',null,ss.IDisposable);tab.DomUtil.registerClass('tab.DomUtil');tab.FloatUtil.registerClass('tab.FloatUtil');tableau.format.registerClass('tableau.format');tab.HistoryUtil.registerClass('tab.HistoryUtil');tab.IntegerRange.registerClass('tab.IntegerRange');tab.IntSet.registerClass('tab.IntSet');tab.vqlcore$0.registerClass('tab.vqlcore$0');tab.JsonUtil.registerClass('tab.JsonUtil');tab.MiscUtil.registerClass('tab.MiscUtil');tab.ObjectRegistry.registerClass('tab.ObjectRegistry');tab.Param.registerClass('tab.Param');tab.PointUtil.registerClass('tab.PointUtil');tab.RecordCast.registerClass('tab.RecordCast');tab.RectUtil.registerClass('tab.RectUtil');tab.RectXYUtil.registerClass('tab.RectXYUtil');tab.SizeUtil.registerClass('tab.SizeUtil');tab.StringTuple.registerClass('tab.StringTuple');tab.StyleUtil.registerClass('tab.StyleUtil');tableau.types.RegionType.registerClass('tableau.types.RegionType');tableau.types.FieldTypeTypes.registerClass('tableau.types.FieldTypeTypes');tableau.types.QFDomain.registerClass('tableau.types.QFDomain');tableau.types.CFStyle.registerClass('tableau.types.CFStyle');tableau.types.HFStyle.registerClass('tableau.types.HFStyle');tableau.types.CFType.registerClass('tableau.types.CFType');tableau.types.QFFixed.registerClass('tableau.types.QFFixed');tableau.types.QFInclude.registerClass('tableau.types.QFInclude');tableau.types.DataSpecial.DS_NORMAL=null;tableau.types.DataSpecial.DS_NULL='n';tableau.types.DataSpecial.DS_ALL='a';tableau.types.DataSpecial.DS_WILDCARD='w';tableau.types.DataSpecial.DS_SKIPPED='s';tableau.types.DataSpecial.DS_NOACCESS='p';tableau.types.DataSpecial.DS_RAGGED='r';tableau.types.DataSpecial.DS_ERROR='e';tableau.types.DataType.DT_INTEGER='i';tableau.types.DataType.DT_REAL='r';tableau.types.DataType.DT_STRING='s';tableau.types.DataType.DT_TIMESTAMP='t';tableau.types.DataType.DT_BOOLEAN='b';tableau.types.DataType.DT_DATE='d';tableau.types.DataType.DT_UNKNOWN=null;tableau.types.TableauTypesFieldRole.ROLE_DIMENSION='d';tableau.types.TableauTypesFieldRole.ROLE_MEASURE='m';tableau.types.TableauTypesFieldRole.ROLE_UNKNOWN=null;tab.ConsoleLogAppender.$1=null;tab.Logger.global=tab.Logger.getLoggerWithName('global');(function(){})();
tab.MetricsLogger.$0=null;tab.WindowAppender.$1=null;tab.Widget.$3=0;tab.BrowserSupport.$0=false;tab.BrowserSupport.$1='ontouchend' in document;tab.BrowserSupport.$2=false;tab.BrowserSupport.$3=false;tab.BrowserSupport.$4=false;tab.BrowserSupport.$5=false;tab.BrowserSupport.$6=null;tab.BrowserSupport.$7=null;tab.BrowserSupport.$8=false;tab.BrowserSupport.$9=false;tab.BrowserSupport.$A=false;tab.BrowserSupport.$B=false;tab.BrowserSupport.$C=false;tab.BrowserSupport.$D=false;tab.BrowserSupport.$E=false;tab.BrowserSupport.$F=false;tab.BrowserSupport.$10=false;tab.BrowserSupport.$11=false;tab.BrowserSupport.$12=false;tab.BrowserSupport.$13=false;tab.BrowserSupport.$14=false;tab.BrowserSupport.$15=false;tab.BrowserSupport.$16=false;tab.BrowserSupport.$17=1;tab.BrowserSupport.$18=1;tab.BrowserSupport.$19=false;tab.BrowserSupport.$1A=false;tab.BrowserSupport.$1B=false;(function(){$(function(){
var $1_0=document.body;var $1_1=document.createElement('div');$1_0.appendChild($1_1);tab.BrowserSupport.$0=('onselectstart' in $1_1);$1_0.removeChild($1_1).style.display='none';tab.BrowserSupport.$3=('postMessage' in window);tab.BrowserSupport.$4=(typeof(window.history.pushState)==='function')&&(typeof(window.history.replaceState)==='function');tab.BrowserSupport.$1C();tab.BrowserSupport.$1E();tab.BrowserSupport.$1F();tab.BrowserSupport.$21();tab.BrowserSupport.$22();tab.BrowserSupport.$1D();tab.BrowserSupport.$23();tab.BrowserSupport.$24();tab.BrowserSupport.$26();tab.BrowserSupport.$25();});})();
tab.FeatureParamsLookup.$0=null;tab.FeatureParamsLookup.$1=null;tab.FeatureParamsLookup.$2=null;tab.FeatureParamsLookup.$3=null;tab.FeatureParamsLookup.$4=null;tab.FeatureParamsLookup.$5=null;tab.FeatureParamsLookup.$6=null;tab.FeatureParamsLookup.$7=null;tab.FeatureParamsLookup.$8=null;tab.FeatureParamsLookup.$9=null;(function(){tab.FeatureParamsLookup.$0=tab.Logger.lazyGetLogger(tab.FeatureParamsLookup);tab.FeatureParamsLookup.$1=[];tab.FeatureParamsLookup.$2=[];tab.FeatureParamsLookup.$3=[];tab.FeatureParamsLookup.$4=[];tab.FeatureParamsLookup.$5={};tab.FeatureParamsLookup.$6={};tab.FeatureParamsLookup.$7={};tab.FeatureParamsLookup.$8={};tab.FeatureParamsLookup.$9={};tab.FeatureParamsLookup.$A(':transparentbackground',3);tab.FeatureParamsLookup.$A(':newfilter',4);tab.FeatureParamsLookup.$A(':fieldconversion',5);tab.FeatureParamsLookup.$A(':qfformatting',6);tab.FeatureParamsLookup.$E();})();
tab.DateUtil.oneSecond=new Date(2008,11,21,1,1,2).getTime()-new Date(2008,11,21,1,1,1).getTime();tab.DateUtil.oneMinute=new Date(2008,11,21,1,2).getTime()-new Date(2008,11,21,1,1).getTime();tab.DateUtil.oneHour=new Date(2008,11,21,2).getTime()-new Date(2008,11,21,1).getTime();tab.DateUtil.oneDay=new Date(2008,11,21).getTime()-new Date(2008,11,20).getTime();tab.DateUtil.oneWeek=new Date(2008,11,21).getTime()-new Date(2008,11,14).getTime();tab.DateUtil.$0=(1000*60)*(60*24);tab.DomUtil.$0=null;tab.FloatUtil.epsilon=Math.pow(2,-23);tab.FloatUtil.$0=1+tab.FloatUtil.epsilon;tab.FloatUtil.$1=tab.FloatUtil.$0;tab.FloatUtil.$2=1/tab.FloatUtil.$0;tableau.format.specialManyValues='%many-values%';tableau.format.specialNull='%null%';tableau.format.specialError='%error%';tableau.format.specialRagged='%ragged%';tableau.format.specialSkipped='%skipped%';tableau.format.specialMissing='%missing%';tableau.format.specialAll='%all%';tableau.format.specialNoAccess='%no-access%';tableau.format.specialWildcard='%wildcard%';tableau.format.millisPerDay=86400000;tableau.format.$0=tab.$create_FormattingInfo();tableau.format.$1=tab.$create_FormattingInfo();tableau.format.$2=new RegExp('(\\\\|\\^|\\$|\\*|\\+|\\?|\\.|\\:|\\,|\\(|\\)|\\[|\\]|\\{|\\}|\\|)','g');tableau.format.$3=new RegExp('^([yYmMdD\\W]+)\\s+([hnst\\W]+)$');tableau.format.$4=new RegExp('(\\\\[:.]s+)');tableau.format.tt=new RegExp('(t+)','g');tableau.format.$5=new RegExp('([yYmMdDhnswq]+)','g');tableau.format.$6=new RegExp('\\(\\\\d\\+\\)(?:\\(\\?\\:)?\\s+\\(\\\\d\\+\\)','g');tableau.format.$7=new RegExp('\\s','g');tableau.format.$8=new RegExp('(^|d)([^h]*)(h|$)','gi');tableau.format.$9=new RegExp('h([^d]*)(d|$)','gi');tableau.format.am=new RegExp('^(a|a\\.?m\\.?|\u33c2|\u03c0\\.?\u00b5\\.?|\u5348\u524d)$','i');tableau.format.pm=new RegExp('^(p|p\\.?m\\.?|\u33d8|\u00b5\\.?\u00b5\\.?|\u5348\u5f8c)$','i');tableau.format.$A={yyyyy:'yyyyy',yyyy:'yyyy',yyy:'yyyy',yy:'yy',y:'yyyy'};(function(){tableau.format.$0.format='yyyy-mm-dd';tableau.format.$0.timeFormat='hh:nn';tableau.format.$1.format='yyyy-mm-ddThh:nn';})();
tab.ObjectRegistry.$0=null;tab.Param.suppressAlerts=false;tab.StyleUtil.$0=null;(function(){var $0={};$0['ExportImage']={title:tab.Strings.ExportImageDialogTitle,mimeType:'image/png',message:tab.Strings.ExportImageDialogMessage};$0['ExportData']={title:tab.Strings.ExportDataDialogTitle,mimeType:'text/csv',message:tab.Strings.ExportDataDialogMessage};$0['ExportCrosstab']={title:tab.Strings.ExportCrosstabDialogTitle,message:tab.Strings.ExportCrosstabDialogMessage};$0['PrintPDF']={title:tab.Strings.PrintPdfDialogTitle,mimeType:'application/pdf',message:tab.Strings.PrintPdfDialogMessage,noping:true};tab.MiscUtil.lazyInitStaticField(tableau.types,'ExportDialogType',function(){
return $0;});})();
tableau.types.RegionType.table='t';tableau.types.RegionType.legend='l';tableau.types.RegionType.filter='f';tableau.types.RegionType.currentPage='p';tableau.types.RegionType.title='i';tableau.types.RegionType.text='x';tableau.types.RegionType.bitmap='b';tableau.types.RegionType.web='w';tableau.types.RegionType.draw='d';tableau.types.RegionType.textBlock='k';tableau.types.RegionType.layoutContainer='c';tableau.types.RegionType.parameter='a';tableau.types.FieldTypeTypes.FT_QUANTITATIVE='Q';tableau.types.FieldTypeTypes.FT_ORDINAL='O';tableau.types.FieldTypeTypes.FT_NOMINAL='N';tableau.types.FieldTypeTypes.FT_UNKNOWN=null;tableau.types.QFDomain.QFD_ALL='all';tableau.types.QFDomain.QFD_CONTEXT='context';tableau.types.QFDomain.QFD_RELEVANT='relevant';tableau.types.CFStyle.CFS_ALL='all';tableau.types.CFStyle.CFS_SINGLE='single-select';tableau.types.CFStyle.CFS_MULTIPLE='multi-select';tableau.types.HFStyle.HFS_SINGLE='single-select';tableau.types.HFStyle.HFS_MULTIPLE='multi-select';tableau.types.CFType.CFT_INCLUSIVE='include';tableau.types.CFType.CFT_EXCLUSIVE='exclude';tableau.types.QFFixed.QFF_FIXED_START='start';tableau.types.QFFixed.QFF_FIXED_END='end';tableau.types.QFInclude.QFI_ALL='include-all';tableau.types.QFInclude.QFI_NON_NULL='include-non-null';tableau.types.QFInclude.QFI_NULL_ONLY='include-null';tableau.types.QFInclude.QFI_RANGE='include-range';tableau.types.QFInclude.QFI_RANGE_OR_NULL='include-range-or-null';}());// This script was generated using Script# v0.7.4.0
// vqldomain.js
(function(){
Type.registerNamespace('tab');tab.TabResources=function(){}
tab.TabResources.getResourceName=function(filePath){return filePath.substring(filePath.lastIndexOf('/')+1,filePath.lastIndexOf('.'));}
tab.TabResources.lookupResourceAlias=function(id){return (Object.keyExists(tab.TabResources.$0,id))?tab.TabResources.$0[id]:'';}
tab.TabResources.lookupFullResourceAlias=function(id){var $0=(id).split('/');var $1=($0.length>0)?$0[$0.length-1]:id;return tab.TabResources.lookupResourceAlias($1);}
tab.TabResources.lookupTabRes=function(id){return tab.TabResources.lookupResourceAlias(id);}
tab.TabResources.lookupDefaultTabRes=function(id){return (':/'+tsConfig.locale+'/'+tab.TabResources.lookupResourceAlias(id));}
tab.$create_CommandModel=function(){return {};}
tab.EventName=function(){};tab.EventName.prototype = {onTabSelect:'onTabSelect',onDoLaunchAuthoring:'onDoLaunchAuthoring',newGuid:'newGuid',newLayoutId:'newLayoutId',activeViewChanged:'activeViewChanged',invalidate:'invalidate',hoverChanged:'hoverChanged',modifiedSheetsChanged:'modifiedSheetsChanged',workbookModifiedChanged:'workbookModifiedChanged',globalFirstTouch:'globalFirstTouch',stateChanged:'stateChanged',layoutUpdated:'layoutUpdated',refreshLayoutModel:'refreshLayoutModel',sheetDataChanged:'sheetDataChanged',refreshSheetInfo:'refreshSheetInfo',refreshFilterModel:'refreshFilterModel',viewChanged:'viewChanged',refreshVisualModel:'refreshVisualModel',refreshLegacyLegendImages:'refreshLegacyLegendImages',refreshMenuModel:'refreshMenuModel',selectionChanged:'selectionChanged',onBootstrapSuccess:'onBootstrapSuccess',maxEvent:'maxEvent',openActionUrl:'openActionUrl',modifierKeysChanged:'modifierKeysChanged',fieldSelectionChanged:'fieldSelectionChanged'}
tab.EventName.registerEnum('tab.EventName',false);tab.PresModelPathItemType=function(){};tab.PresModelPathItemType.prototype = {simple:0,array:1}
tab.PresModelPathItemType.registerEnum('tab.PresModelPathItemType',false);tab.IContinuousRangeModel=function(){};tab.IContinuousRangeModel.registerInterface('tab.IContinuousRangeModel');tab.FieldInstanceType=function(){};tab.FieldInstanceType.prototype = {column:'column',drillPath:'drillPath',cubeDimension:'cubeDimension',group:'group',cubeHierarchy:'cubeHierarchy',relationalTable:'relationalTable',cubeFolder:'cubeFolder',folder:'folder',multiple:'multiple'}
tab.FieldInstanceType.registerEnum('tab.FieldInstanceType',false);tab.$create_Granularity=function(){return {};}
tab.$create_UbertipModel=function(){return {};}
tab.IClientCommand=function(){};tab.IClientCommand.registerInterface('tab.IClientCommand');tab.IRemoteCommandHandler=function(){};tab.IRemoteCommandHandler.registerInterface('tab.IRemoteCommandHandler');tab.ChangeType=function(){};tab.ChangeType.prototype = {single:0,range:1}
tab.ChangeType.registerEnum('tab.ChangeType',false);tab.ActionType=function(){};tab.ActionType.prototype = {highlight:'highlight',filter:'filter',url:'url'}
tab.ActionType.registerEnum('tab.ActionType',false);tab.$create_XhrMultipartData=function(){return {};}
tab.ApiClientCommands=function(){}
tab.ApiClientCommands.doApiCommand=function(c,onSuccess,onError){tab.CommandController.SendCommand(tab.vqldomain$7.$7(c,'immediately',onSuccess,onError));}
tab.StoryClientCommands=function(){}
tab.StoryClientCommands.get_$0=function(){return tab.Logger.lazyGetLogger(tab.StoryClientCommands);}
tab.StoryClientCommands.setActiveStoryPoint=function(newActiveStoryPointID,nav){if(ss.isNullOrUndefined(tab.ApplicationModel.get_instance().get_workbook().get_storyboard())||nav.get_currentPoint()===newActiveStoryPointID){return;}var $0=new tab.vqldomain$6(function($p1_0){
tab.StoryClientCommands.$1(newActiveStoryPointID,nav,$p1_0);},function($p1_0,$p1_1){
tab.StoryClientCommands.$2(newActiveStoryPointID,$p1_0,$p1_1);},'immediately');tab.CommandController.SendCommand($0);}
tab.StoryClientCommands.$1=function($p0,$p1,$p2){if(ss.isValue($p1)){var $0=$p2.makeMutablePresModel($p1);$0.currentStorypointIndex=$p0;}}
tab.StoryClientCommands.$2=function($p0,$p1,$p2){var $0=tab.CommandUtils.newDocCommand('set-active-story-point');var $1=tab.ApplicationModel.get_instance().get_workbook().get_storyboard().get_flipboard();var $2={};$2['storyboard']=tsConfig.current_sheet_name;$2['flipboardZoneId']=$1.get_zoneId();$2['storyPointId']=$p0;$0.commandParams=$2;$p1.executeCommand($0,function(){
$p2(true);},function(){
$p2(false);});}
tab.UberTipClientCommands=function(){}
tab.UberTipClientCommands.get_$0=function(){return tab.MiscUtil.lazyInitStaticField(tab.UberTipClientCommands,'commandPermissions',function(){
return tab.PermissionManager.buildCommandPermission();});}
tab.UberTipClientCommands.getUberTip=function(vizRegion,sheetId,selRect,localInfo,callback,tooltipFailureCallback){if(!tsConfig.allow_tooltip){return;}if(ss.isValue(localInfo)&&ss.isValue(localInfo.get_effectedTupleIds())&&ss.isValue(localInfo.get_effectedTupleIds().length)&&localInfo.get_effectedTupleIds().length>1){tab.UberTipClientCommands.$2(vizRegion,sheetId,selRect,callback,tooltipFailureCallback);return;}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(ss.isValue(localInfo)&&localInfo.shouldDoLocalUbertip()&&tab.ModelUtils.hasUberTipData(sheetId)&&vizRegion==='viz'){tab.UberTipClientCommands.$1(vizRegion,sheetId,selRect,localInfo,callback,tooltipFailureCallback);}else{var $0=tab.ActionUtils.getApplicableActions(sheetId,'on-hover',undefined,vizRegion);if(ss.isValue($0)&&$0.length>0){var $1=new tab.vqldomain$8(function($p1_0){
tab.ActionUtils.executeActions(sheetId,'on-hover',localInfo.get_interactedTupleIds(),$p1_0,false,vizRegion);},tab.UberTipClientCommands.$3(vizRegion,sheetId,selRect,callback,tooltipFailureCallback,false,'remote'));tab.CommandController.SendCommand($1);}else if(ss.isValue(localInfo)&&localInfo.get_needRemoteUbertip()){tab.UberTipClientCommands.$2(vizRegion,sheetId,selRect,callback,tooltipFailureCallback);}}}else{tab.UberTipClientCommands.$2(vizRegion,sheetId,selRect,callback,tooltipFailureCallback);}}
tab.UberTipClientCommands.executeUbertipAction=function(action,objectIds,visualModel){var $0=new tab.vqldomain$4(function($p1_0){
tab.ActionUtils.executeAction(action,objectIds,visualModel,$p1_0);});tab.CommandController.SendCommand($0);}
tab.UberTipClientCommands.executeUbertipCommand=function(command){switch(command.commandType){case 2:var $0=Object.keyExists(command.command.commandParams,'exclude')&&Boolean.parse(command.command.commandParams['exclude']);tab.UberTipClientCommands.$4($0,command);break;case 4:var $1=Object.keyExists(command.command.commandParams,'sort-order')&&command.command.commandParams['sort-order']==='asc';tab.UberTipClientCommands.$5($1,command);break;case 1:tab.SelectionClientCommands.clearAllSelections(tab.ModelUtils.findActiveOrDefaultVisual().get_worksheetName());break;case 11:tab.UberTipClientCommands.$7(command);break;case 12:tab.UberTipClientCommands.$6(command);break;case 10:var $2=Object.keyExists(command.command.commandParams,'merge-or-split')&&command.command.commandParams['merge-or-split']==='merge';tab.UberTipClientCommands.$9($2,command);break;case 13:tab.UberTipClientCommands.$8(command);break;case 6:case 9:case 7:default:return;}}
tab.UberTipClientCommands.$1=function($p0,$p1,$p2,$p3,$p4,$p5){var $0=new tab.vqldomain$8(function($p1_0){
var $1_0=tab.UbertipSerializer.createLocalUberTipModel($p1,$p3,tsConfig.is_authoring);$1_0.isUpdate=false;if(ss.isValue($1_0)){tab.PermissionManager.filterCommands($1_0.commands,tab.UberTipClientCommands.get_$0());}$p4($1_0,'locallyDrawn');tab.ActionUtils.executeActions($p1,'on-hover',$p3.get_interactedTupleIds(),$p1_0);},tab.UberTipClientCommands.$3($p0,$p1,$p2,$p4,$p5,true,'locallyDrawn'));tab.CommandController.SendCommand($0);}
tab.UberTipClientCommands.$2=function($p0,$p1,$p2,$p3,$p4){var $0=new tab.vqldomain$8(null,tab.UberTipClientCommands.$3($p0,$p1,$p2,$p3,$p4,false,'remote'));tab.CommandController.SendCommand($0);}
tab.UberTipClientCommands.$3=function($p0,$p1,$p2,$p3,$p4,$p5,$p6){return function($p1_0,$p1_1){
var $1_0={};$1_0.commandNamespace='tabsrv';$1_0.commandName='render-tooltip-server';var $1_1={};tab.CommandUtils.injectVizID($1_1,$p1);var $1_2=new tab.VizRegionRect();$1_2.r=$p0;$1_2.x=Math.round($p2.x);$1_2.y=Math.round($p2.y);$1_2.w=Math.round($p2.w);$1_2.h=Math.round($p2.h);$1_1['vizRegionRect']=$1_2;$1_1['tooltipAnchorPoint']=tab.$create_Point(Math.round($p2.x),Math.round($p2.y));$1_1['allowHoverActions']=true;$1_1['allowPromptText']=true;$1_1['allowWork']=tsConfig.is_mobile;$1_1['useInlineImages']=true;$1_0.commandParams=$1_1;var $1_3=function($p2_0){
try{var $2_0=tab.JsonUtil.parseJson($p2_0.toString());var $2_1=tab.UbertipSerializer.deserializeUbertip($2_0);if(ss.isValue($2_1)){$2_1.isUpdate=$p5;tab.PermissionManager.filterCommands($2_1.commands,tab.UberTipClientCommands.get_$0());}if(ss.isValue($p3)){$p3($2_1,$p6);}}finally{$p1_1(true);}};var $1_4=function(){
$p1_1(false);if($p4!=null){$p4();}};$p1_0.executeCommand($1_0,$1_3,$1_4);};}
tab.UberTipClientCommands.$4=function($p0,$p1){var $0={};$0.commandNamespace='tabdoc';$0.commandName='keep-only-or-exclude';var $1={};$1['exclude']=$p0;$1['worksheet']=$p1.command.commandParams['worksheet'];var $2=$p1.command.commandParams['dashboard'];if(ss.isValue($2)){$1['dashboard']=$2;}var $3=$p1.command.commandParams['select-at-point'];var $4=$p1.command.commandParams['tuple-id'];if(ss.isValue($3)){$1['selectAtPoint']=$3;}else if(ss.isValue($4)){var $5=[parseInt($4)];var $6={};$6.objectIds=$5;$6.selectionType='tuples';$1['selection']=$6;}$0.commandParams=$1;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.UberTipClientCommands.$5=function($p0,$p1){var $0={};$0.commandNamespace='tabdoc';$0.commandName='quick-sort';$0.commandParams={};$0.commandParams['worksheet']=$p1.command.commandParams['worksheet'];var $1=$p1.command.commandParams['dashboard'];if(ss.isValue($1)){$0.commandParams['dashboard']=$1;}$0.commandParams['sortOrder']=($p0)?'asc':'desc';$0.commandParams=$p1.command.commandParams;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.UberTipClientCommands.$6=function($p0){var $0={};$0.commandNamespace='tabdoc';$0.commandName='level-drill';$0.commandParams=$p0.command.commandParams;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.UberTipClientCommands.$7=function($p0){var $0={};$0.commandNamespace='tabdoc';$0.commandName='label-drill';$0.commandParams=$p0.command.commandParams;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.UberTipClientCommands.$8=function($p0){var $0={};$0.commandNamespace='tabdoc';$0.commandName='legend-group-or-ungroup';$0.commandParams=$p0.command.commandParams;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.UberTipClientCommands.$9=function($p0,$p1){var $0={};$0.commandNamespace='tabdoc';$0.commandName='merge-or-split';var $1={};$0.commandParams={};$0.commandParams['worksheet']=$p1.command.commandParams['worksheet'];var $2=$p1.command.commandParams['dashboard'];if(ss.isValue($2)){$0.commandParams['dashboard']=$2;}$1['mergeOrSplit']=($p0)?'merge':'split';var $3=$p1.command.commandParams['select-at-point'];var $4=$p1.command.commandParams['tuple-id'];if(ss.isValue($3)){$1['selectAtPoint']=$3;}else if(ss.isValue($4)){var $5=[parseInt($4)];var $6={};$6.objectIds=$5;$6.selectionType='tuples';$1['selection']=$6;}$0.commandParams=$1;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.UbertipParams=function(vizRegion,sheetId,selRect,localUbertipInfo,tooltipSuccessCallback,tooltipFailureCallback){this.$0=vizRegion;this.$1=sheetId;this.$2=selRect;this.$3=localUbertipInfo;this.$4=tooltipSuccessCallback;this.$5=tooltipFailureCallback;}
tab.UbertipParams.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,get_vizRegion:function(){return this.$0;},get_sheetId:function(){return this.$1;},get_selRect:function(){return this.$2;},get_localUbertipInfo:function(){return this.$3;},get_tooltipSuccessCallback:function(){return this.$4;},get_tooltipFailureCallback:function(){return this.$5;}}
tab.vqldomain$8=function(doLocal,doRemote){tab.vqldomain$8.initializeBase(this,[doLocal,doRemote,'none']);}
tab.vqldomain$8.prototype={get_isOneAtATime:function(){return true;}}
tab.FilterClientCommands=function(){}
tab.FilterClientCommands.setQuantitativeFilterRange=function(sheetID,filterField,filterMin,filterMax,includeMode){var $0={};$0.commandNamespace='tabdoc';$0.commandName='range-filter';$0.commandParams={};tab.CommandUtils.injectVizID($0.commandParams,sheetID);$0.commandParams['globalFieldName']=filterField;if(ss.isValue(filterMin)){$0.commandParams['filterRangeMin']=filterMin.toString();}if(ss.isValue(filterMax)){$0.commandParams['filterRangeMax']=filterMax.toString();}$0.commandParams['included']=includeMode;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.setCategoricalFilterValues=function(sheetID,filterField,updateType,aliases){if(!ss.isValue(updateType)){updateType='filter-replace';}if(!ss.isValue(aliases)){aliases=new Array(0);}var $0={};$0.commandNamespace='tabdoc';$0.commandName='categorical-filter';$0.commandParams={};tab.CommandUtils.injectVizID($0.commandParams,sheetID);$0.commandParams['globalFieldName']=filterField;$0.commandParams['filterValues']=tab.JsonUtil.toJson(aliases);$0.commandParams['filterUpdateType']=updateType;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.setCategoricalFilterValuesByIndex=function(sheetID,filterField,updateType,indexes){if(!ss.isValue(updateType)){updateType='filter-replace';}if(!ss.isValue(indexes)){indexes=new Array(0);}var $0={};$0.commandNamespace='tabdoc';$0.commandName='categorical-filter-by-index';$0.commandParams={};tab.CommandUtils.injectVizID($0.commandParams,sheetID);$0.commandParams['globalFieldName']=filterField;$0.commandParams['filterIndices']=tab.JsonUtil.toJson(indexes);$0.commandParams['filterUpdateType']=updateType;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.modifyCategoricalFilterValues=function(sheetID,filterField,addAliases,removeAliases){if((!ss.isValue(addAliases)||!addAliases.length)&&(!ss.isValue(removeAliases)||!removeAliases.length)){return;}var $0={};$0.commandNamespace='tabdoc';$0.commandName='categorical-filter';$0.commandParams={};tab.CommandUtils.injectVizID($0.commandParams,sheetID);$0.commandParams['globalFieldName']=filterField;if(ss.isValue(addAliases)){$0.commandParams['filterAdd']=tab.JsonUtil.toJson(addAliases);}if(ss.isValue(removeAliases)){$0.commandParams['filterRemove']=tab.JsonUtil.toJson(removeAliases);}$0.commandParams['filterUpdateType']='filter-delta';tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.modifyCategoricalFilterValuesByIndex=function(sheetID,filterField,addIndexes,removeIndexes){if((!ss.isValue(addIndexes)||!addIndexes.length)&&(!ss.isValue(removeIndexes)||!removeIndexes.length)){return;}var $0={};$0.commandNamespace='tabdoc';$0.commandName='categorical-filter-by-index';$0.commandParams={};tab.CommandUtils.injectVizID($0.commandParams,sheetID);$0.commandParams['globalFieldName']=filterField;if(ss.isValue(addIndexes)){$0.commandParams['filterAddIndices']=tab.JsonUtil.toJson(addIndexes);}if(ss.isValue(removeIndexes)){$0.commandParams['filterRemoveIndices']=tab.JsonUtil.toJson(removeIndexes);}$0.commandParams['filterUpdateType']='filter-delta';tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.setCategoricalQuickFilterMode=function(sheetId,fieldName,mode){var $0={};$0.commandNamespace='tabsrv';$0.commandName='set-quick-filter-mode';$0.commandParams={};tab.CommandUtils.injectVizID($0.commandParams,sheetId);$0.commandParams['categoricalMode']=mode;$0.commandParams['fn']=fieldName;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.setCategoricalQuickFilterDomain=function(sheetId,fieldName,domain){var $0={};$0.commandNamespace='tabsrv';$0.commandName='set-quick-filter-domain';$0.commandParams={};tab.CommandUtils.injectVizID($0.commandParams,sheetId);$0.commandParams['filterDomainType']=domain;$0.commandParams['fn']=fieldName;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.setPatternFilterState=function(sheetID,fieldName,pattern){var $0={};$0.commandNamespace='tabsrv';$0.commandName='set-pattern-quick-filter-state';$0.commandParams={};tab.CommandUtils.injectVizID($0.commandParams,sheetID);$0.commandParams['patternFilterString']=pattern;$0.commandParams['fn']=fieldName;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.addManualFilterItems=function(sheetID,fieldName,data){var $0={};var $1={};$1.charsetId=0;$1.name='';$0.dataType='cstring';$0.stringCollation=$1;var $2=data.tuples;var $3=[];var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $5=$enum1.current;$3.add($5.d);}$0.dataValues=$3;var $4={};$4.commandNamespace='tabsrv';$4.commandName='add-manual-items-to-filter';$4.commandParams={};tab.CommandUtils.injectVizID($4.commandParams,sheetID);$4.commandParams['dataColumn']=tab.JsonUtil.toJson($0);$4.commandParams['fn']=fieldName;tab.ServerCommands.executeServerCommand($4,'immediately');}
tab.FilterClientCommands.levelDrill=function(sheetID,position,shelfType,isDrillDown){var $0={};$0.commandNamespace='tabdoc';$0.commandName='level-drill';$0.commandParams={};tab.CommandUtils.injectVizID($0.commandParams,sheetID);$0.commandParams['drillDown']=isDrillDown.toString();$0.commandParams['shelfType']=shelfType;$0.commandParams['position']=position.toString();tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.updateCategoricalFilter=function(filterData){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return;}var $0=function(){
return true;};var $1=function($p1_0,$p1_1){
var $1_0=$p1_0.getAliasValueAtTupleIndex($p1_1);return !filterData.includesValue($1_0);};tab.FilterClientCommands.$4(filterData.get_filterField(),filterData.get_targetSheets(),$0,$1,true);}
tab.FilterClientCommands.updateQuantitativeFilter=function(filterData){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return;}var $0=function(){
var $1_0=(tab.FloatUtil.isLessThanOrEqual(filterData.get_currentMaxVal(),filterData.get_previousMaxVal())&&tab.FloatUtil.isGreaterThanOrEqual(filterData.get_currentMinVal(),filterData.get_previousMinVal()));return $1_0;};var $1=function($p1_0,$p1_1){
if($p1_0.get_dataType()==='date'||$p1_0.get_dataType()==='datetime'){var $1_0=tab.DateUtil.parsePresModelDate($p1_0.getDataValueAtTupleIndex($p1_1).toString());return !filterData.valueInRange(tab.DateUtil.dateTimeAsOleDate($1_0));}else{return !filterData.valueInRange(parseFloat($p1_0.getDataValueAtTupleIndex($p1_1)));}};tab.FilterClientCommands.$4(filterData.get_filterField(),filterData.get_targetSheets(),$0,$1,false);}
tab.FilterClientCommands.applyFilter=function(appModel,visModel,filterField,isFilteredOut){var $0=(appModel.get_presModel()).dataDictionary;var $1=visModel.get_vizDataModel().get_vizDataPresModel();var $2=new tab.VizDataField($0,$1,filterField);var $3=[];for(var $4=0;$4<$2.get_numDataValues();$4++){if(isFilteredOut($2,$4)){$3.add($2.getTupleID($4));}}return $3;}
tab.FilterClientCommands.doRelativeDateQuickFilter=function(sheetId,fieldName,periodType,rangeType,range){var $0={};$0.commandNamespace='tabdoc';$0.commandName='relative-date-filter';$0.commandParams=tab.FilterClientCommands.createDoRelativeDateQuickFilterParams(sheetId,fieldName,periodType,rangeType,range);tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.doLevelHierarchialFilter=function(sheetId,fieldName,addLevels,removeLevels,updateType){var $0={};$0.commandNamespace='tabdoc';$0.commandName='hierarchical-filter';$0.commandParams=tab.FilterClientCommands.$0(sheetId,fieldName,addLevels,removeLevels,updateType);tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.doMemberHierarchialFilter=function(sheetId,fieldName,addMember,removeMember,updateType){var $0={};$0.commandNamespace='tabdoc';$0.commandName='hierarchical-filter';$0.commandParams=tab.FilterClientCommands.$1(sheetId,fieldName,addMember,removeMember,updateType);tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.doRangeHierarchialFilter=function(sheetId,fieldName,rangeAddMembers,rangeRemoveMembers,updateType){var $0={};$0.commandNamespace='tabdoc';$0.commandName='hierarchical-filter';$0.commandParams=tab.FilterClientCommands.$2(sheetId,fieldName,rangeAddMembers,rangeRemoveMembers,updateType);tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.FilterClientCommands.createDoRelativeDateQuickFilterParams=function(sheetId,fieldName,periodType,rangeType,range,anchorDate,includedValues){var $0={};tab.CommandUtils.injectVizID($0,sheetId);$0['globalFieldName']=fieldName;$0['datePeriodType']=periodType;$0['dateRangeType']=rangeType;if(rangeType==='lastn'||rangeType==='nextn'){$0['rangeN']=range;}if(ss.isValue(anchorDate)){$0['anchorDate']=anchorDate;}if(ss.isValue(includedValues)){$0['included']=includedValues;}return $0;}
tab.FilterClientCommands.$0=function($p0,$p1,$p2,$p3,$p4){var $0={};tab.CommandUtils.injectVizID($0,$p0);var $1={};$1['filterLevelAdd']=$p2;$1['filterLevelRemove']=$p3;$0['globalFieldName']=$p1;$0['filterOptions']=$1;$0['filterUpdateType']=$p4;return $0;}
tab.FilterClientCommands.$1=function($p0,$p1,$p2,$p3,$p4){var $0={};tab.CommandUtils.injectVizID($0,$p0);var $1={};$1['filterAdd']=$p2;$1['filterRemove']=$p3;$0['globalFieldName']=$p1;$0['filterOptions']=$1;$0['filterUpdateType']=$p4;return $0;}
tab.FilterClientCommands.$2=function($p0,$p1,$p2,$p3,$p4){var $0={};tab.CommandUtils.injectVizID($0,$p0);var $1={};$1['filterRangeAdd']=$p2;$1['filterRangeRemove']=$p3;$0['globalFieldName']=$p1;$0['filterOptions']=$1;$0['filterUpdateType']=$p4;return $0;}
tab.FilterClientCommands.$3=function($p0,$p1){var $0=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),$p1);if(ss.isValue($0)){return $0.get_shouldUpdate()&&$0.hasFilterFieldData($p0);}return false;}
tab.FilterClientCommands.$4=function($p0,$p1,$p2,$p3,$p4){var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $0=$enum1.current;var $1=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),$0);if(ss.isNullOrUndefined($1)){continue;}var $2=tab.FilterClientCommands.$3($p0,$0);var $3=new tab.vqldomain$4(function($p1_0){
if(!$2||!$p2()){if(!$p4){tab.ModelUtils.setVisualValidStateOnModel($p1_0,$1,false);}}else{var $1_0=new Array(0);$1_0=tab.FilterClientCommands.applyFilter(tab.ApplicationModel.get_instance(),$1,$p0,$p3);$1.filterTuples($p0,$1_0);if(!$p4){$1.hideTuples($p0,$1_0);}tab.ModelUtils.setVisualValidStateOnModel($p1_0,$1,true);}});tab.CommandController.SendCommand($3);}}
tab.SheetClientCommands=function(){}
tab.SheetClientCommands.switchSheets=function(msg,isEmbedded){if(ss.isNullOrUndefined(msg.oldSheetName)){msg.oldSheetName=tsConfig.current_sheet_name;}tab.CommandController.get().get_legacySession().get_waitHandler().showAndLock();var $0={};$0.commandNamespace='tabsrv';$0.commandName='ensure-layout-for-sheet';$0.commandParams={};$0.commandParams['targetSheet']=msg.sheetName;$0.commandParams['isEmbedded']=isEmbedded.toString();tab.ServerCommands.executeServerCommand($0,'immediately',msg.successCallback,msg.errorCallback);}
tab.SheetClientCommands.createSheet=function(sheetName,insertAtEnd){var $0={};$0.commandNamespace='tabdoc';$0.commandName='new-worksheet';$0.commandParams={};if(ss.isValue(sheetName)){$0.commandParams['newSheet']=sheetName;}if(insertAtEnd){$0.commandParams['insertAtEnd']=insertAtEnd.toString();}tab.ServerCommands.executeServerCommand($0,'immediately',null,null);}
tab.SheetClientCommands.deleteSheet=function(sheetName){var $0={};$0.commandNamespace='tabdoc';$0.commandName='delete-sheet';$0.commandParams={};$0.commandParams['sheet']=sheetName;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.SheetClientCommands.renameSheet=function(sheetName,newName){var $0={};$0.commandNamespace='tabdoc';$0.commandName='rename-sheet';$0.commandParams={};$0.commandParams['sheet']=sheetName;$0.commandParams['newSheet']=newName;tab.ServerCommands.executeServerCommand($0,'immediately',null,null);}
tab.SheetClientCommands.duplicateSheet=function(sheetName){var $0={};$0.commandNamespace='tabdoc';$0.commandName='duplicate-sheet';$0.commandParams={};$0.commandParams['sheet']=sheetName;tab.ServerCommands.executeServerCommand($0,'immediately',null,null);}
tab.SheetClientCommands.clearWorksheet=function(sheetName){var $0={};$0.commandNamespace='tabdoc';$0.commandName='clear-sheet';$0.commandParams={};$0.commandParams['sheet']=sheetName;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.SheetClientCommands.setPortSize=function(portSize,metrics){var $0={};$0.commandNamespace='tabsrv';$0.commandName='set-port-size';$0.commandParams={};$0.commandParams['sheet']=tsConfig.current_sheet_name;$0.commandParams['viewportSize']=tab.JsonUtil.toJson(portSize);$0.commandParams['clientDashboardUiMetricContainer']=tab.JsonUtil.toJson(metrics);tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.VizClientCommands=function(){}
tab.VizClientCommands.invalidateVisualModel=function(model){tab.VizClientCommands.$0(model,false);}
tab.VizClientCommands.validateVisualModel=function(model){tab.VizClientCommands.$0(model,true);}
tab.VizClientCommands.$0=function($p0,$p1){var $0=new tab.vqldomain$4(function($p1_0){
tab.ModelUtils.setVisualValidStateOnModel($p1_0,$p0,$p1);});tab.CommandController.SendCommand($0);}
tab.VizRegionRect=function(){}
tab.VizRegionRect.prototype={r:null,fieldVector:null,x:0,y:0,w:0,h:0}
tab.vqldomain$3=function(session){this.$0=session;}
tab.vqldomain$3.prototype={$0:null,add_commmandSucceeded:function($p0){this.$1=ss.Delegate.combine(this.$1,$p0);},remove_commmandSucceeded:function($p0){this.$1=ss.Delegate.remove(this.$1,$p0);},$1:null,add_commandFailed:function($p0){this.$2=ss.Delegate.combine(this.$2,$p0);},remove_commandFailed:function($p0){this.$2=ss.Delegate.remove(this.$2,$p0);},$2:null,executeCommand:function($p0,$p1,$p2){var $0=tab.MetricsLogger.get_instance().createContext('BaseSessionCommanHandler::ExecuteCommand -- '+$p0.commandName);var $1=ss.Delegate.create(this,function($p1_0){
$0.close();if(ss.isValue(this.$1)){this.$1($p0,$p1_0);}var $1_0=tab.PresentationModel.fromCommand($p1_0,$p0);$p1($1_0);});var $2=ss.Delegate.create(this,function($p1_0){
$0.close();if(ss.isValue(this.$2)){this.$2($p0,$p1_0);}$p2($p1_0);});this.$0.executeServerCommand($p0,$1,$2);}}
tab.CommandPermission=function(availableTypes){this.$1={};var $enum1=ss.IEnumerator.getEnumerator(availableTypes);while($enum1.moveNext()){var $0=$enum1.current;this.$1[$0.toString()]='granted';}}
tab.CommandPermission.prototype={$1:null,test:function(command){tab.Param.verifyValue(command,'command');return Object.keyExists(this.$1,command.commandType.toString())&&this.$1[command.commandType.toString()]==='granted';}}
tab.CommandSerializer=function(){}
tab.CommandSerializer.get_$1=function(){return tab.Logger.lazyGetLogger(tab.CommandSerializer);}
tab.CommandSerializer.buildDocCommandName=function(command){return tab.CommandSerializer.buildQualifiedCommandName('tabdoc',command);}
tab.CommandSerializer.buildQualifiedCommandName=function(commandNamespace,command){return commandNamespace+':'+command;}
tab.CommandSerializer.deserialize=function(serializedCommand){var $0=new RegExp('^(\\w+):([\\w-]+)( (.*))?$');var $1=$0.exec(serializedCommand);if(ss.isNullOrUndefined($1)||!$1.length){return null;}var $2={};$2.commandNamespace=$1[1];$2.commandName=$1[2];tab.CommandSerializer.$2($2,$1[4]);return $2;}
tab.CommandSerializer.getCommandType=function(command){if(Object.keyExists(tab.CommandSerializer.$0,command.commandName)){return tab.CommandSerializer.$0[command.commandName];}else{return null;}}
tab.CommandSerializer.$2=function($p0,$p1){if(String.isNullOrEmpty($p1)){return;}var $0=new ss.StringBuilder();var $1=[];for(var $2=$p1.length-1;$2>=0;$2--){$1.push($p1.charAt($2));}while($1.length>0){var $3=tab.CommandSerializer.$3($1,$0);if(ss.isNullOrUndefined($3)){return;}var $4=tab.CommandSerializer.$4($1,$0);if(ss.isNullOrUndefined($4)){return;}if($4==='{}'){continue;}if(ss.isNullOrUndefined($p0.commandParams)){$p0.commandParams={};}$p0.commandParams[$3.trim()]=$4;}}
tab.CommandSerializer.$3=function($p0,$p1){$p1.clear();while($p0.length>0){var $0=$p0.pop();switch($0){case '=':return $p1.toString();default:$p1.append($0);break;}}return null;}
tab.CommandSerializer.$4=function($p0,$p1){$p1.clear();var $0=[];while($p0.length>0){var $1=$p0.pop();var $2=true;switch($1){case '\\':if($0.peek()!=='\\'){$0.push('\\');$2=false;}else{$0.pop();}break;case '"':if($0.peek()==='\\'){$0.pop();}else if($0.peek()==='"'){$0.pop();if(!$0.length){$2=false;}}else{if(!$0.length){$2=false;}$0.push('"');}break;case '[':if($0.peek()==='"'){}else{$0.push('[');}break;case ']':if($0.peek()==='"'){}else if($0.peek()!=='['){}else{$0.pop();}break;case '{':if($0.peek()==='"'){}else{$0.push('{');}break;case '}':if($0.peek()==='"'){}else if($0.peek()!=='{'){}else{$0.pop();}break;default:if($0.peek()==='\\'){$0.pop();}break;}if($2){$p1.append($1);}if(!$0.length){return $p1.toString();}}return null;}
tab.DeferLayoutImpl=function(){}
tab.DeferLayoutImpl.get_instance=function(){if(ss.isNullOrUndefined(tab.DeferLayoutImpl.$0)){tab.DeferLayoutImpl.$0=new tab.DeferLayoutImpl();}return tab.DeferLayoutImpl.$0;}
tab.DeferLayoutImpl.prototype={$1:false,$2:false,get_isZoomin:function(){return this.$2;},set_isZoomin:function(value){this.$2=value;return value;},shouldDeferLayoutUpdates:function(){return this.$1;},setDeferLayoutUpdates:function(b){this.$1=b;}}
tab.EventMap=function(){}
tab.EventMap.prototype={get_$1:function(){return Object.getKeyCount(tab.EventMap.$0);},get_item:function($p0){return tab.EventMap.$0[$p0];}}
tab.vqldomain$4=function(doLocal){tab.vqldomain$4.initializeBase(this,[null,null,'none',null]);this.$4=doLocal;}
tab.vqldomain$4.prototype={$4:null,doLocal:function($p0,$p1){this.$4($p0);$p1();}}
tab.vqldomain$5=function(doLocal,doRemote,uiBlockType){tab.vqldomain$5.initializeBase(this,[null,doRemote,uiBlockType,null]);this.$4=doLocal;}
tab.vqldomain$5.prototype={$4:null,doLocal:function($p0,$p1){this.$4($p0);$p1();}}
tab.PermissionManager=function(){}
tab.PermissionManager.buildCommandPermission=function(){var $0=[];if(tsConfig.allow_filter){$0.add(11);$0.add(12);$0.add(10);$0.add(2);$0.add(13);$0.add(4);$0.add(6);}if(tsConfig.allow_select){$0.add(1);$0.add(9);}if(tsConfig.allow_sheetlink){$0.add(8);}if(tsConfig.allow_view_underlying){$0.add(7);}return new tab.CommandPermission($0);}
tab.PermissionManager.filterCommands=function(commands,permission){for(var $0=commands.length-1;$0>=0;$0--){if(!permission.test(commands[$0])){commands.removeAt($0);}}}
tab.PresentationModel=function(){}
tab.PresentationModel.commandResultByName=function(response,c){var $0=tab.CommandSerializer.buildQualifiedCommandName(c.commandNamespace,c.commandName);var $1=(response).vqlCmdResponse;var $2=$1.cmdResultList;var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $3=$enum1.current;if($3.commandName===$0){return $3.commandReturn;}}return null;}
tab.PresentationModel.fromCommand=function(response,c){var $0=tab.PresentationModel.commandResultByName(response,c);if(ss.isValue($0)&&Object.getKeyCount($0)===1){var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};return $1.value;}}else{return $0;}return null;}
tab.PresentationModel.ensurePath=function(sourcePM,destPM,path){var $0=destPM;var $1=sourcePM;var $2;var $3;var $4=path.get_pathList();for(var $5=0,$6=$4.length;$5<$6;$5++){var $7=$4[$5];var $8=$7.name;$2=$0[$8];$3=(ss.isValue($1))?$1[$8]:null;if(!ss.isValue($2)){var $9=$5===$6-1;var $A=null;if($7.type===1&&ss.isValue($3)){var $B=$3;var $C=[];for(var $D=0;$D<$B.length;$D++){$C[$D]=tab.PresentationModel.cloneObjWithScalarsOnly($B[$D]);}$A=$C;}else if(!$9&&ss.isValue($3)){$A=tab.PresentationModel.cloneObjWithScalarsOnly($3);}else{$A={};}$0[$8]=$A;}$0=$0[$8];$1=$3;}return $0;}
tab.PresentationModel.insertAtPath=function(sourcePM,destPM,path,newPM){tab.PresentationModel.ensurePath(sourcePM,destPM,path);tab.PresentationModel.$0(destPM,path,newPM);}
tab.PresentationModel.cloneObjWithScalarsOnly=function(sourceObj){if(!_.isObject(sourceObj)){return sourceObj;}var $0={};var $1=sourceObj;var $enum1=ss.IEnumerator.getEnumerator(Object.keys($1));while($enum1.moveNext()){var $2=$enum1.current;var $3=$1[$2];if(!_.isObject($3)){$0[$2]=$3;}}return $0;}
tab.PresentationModel.$0=function($p0,$p1,$p2){var $0,$1;var $2=$p0;var $3=$p1.get_pathList();for($0=0,$1=$3.length;$0<$1-1;$0++){$2=$2[$3[$0].name];}$2[$3[$1-1].name]=$p2;}
tab.PresModelPathItem=function(name,type){this.name=name;if(ss.isValue(type)){this.type=type;}else{this.type=0;}}
tab.PresModelPathItem.prototype={name:null,type:0}
tab.PresModelPath=function(){this.$0=[];}
tab.PresModelPath.prototype={get_pathList:function(){return this.$0;},get_enumerator:function(){return this.$0.getEnumerator();},add:function(s){this.$0.add(s);},reverse:function(){this.$0.reverse();}}
tab.vqldomain$6=function(doLocal,doRemote,uiBlockType){tab.vqldomain$6.initializeBase(this,[null,doRemote,uiBlockType,null]);this.$4=doLocal;}
tab.vqldomain$6.prototype={$4:null,doLocal:function($p0,$p1){$p1();if(ss.isValue(this.$4)){this.$4($p0);}}}
tab.UbertipSerializer=function(){}
tab.UbertipSerializer.deserializeUbertip=function(ubertip){if(ss.isNullOrUndefined(ubertip)){return null;}var $0=[];if(ss.isValue(ubertip.commands)){tab.UbertipSerializer.$B(ubertip.commands,$0,-1);}var $1=[];if(ss.isValue(ubertip.actions)){tab.UbertipSerializer.$B(ubertip.actions,$1,-1);}var $2=tab.$create_UbertipModel();$2.tooltipHtml=tab.UbertipSerializer.$D(ubertip.htmlTooltip);$2.selectionHtml=tab.UbertipSerializer.$D(ubertip.htmlSelection);$2.overlayImage=tab.UbertipSerializer.$D(ubertip.overlayImage);$2.overlayImageKey=tab.UbertipSerializer.$D(ubertip.overlayImageKey);$2.tupleId=ubertip.tupleId;$2.tooltipOffset=tab.PointUtil.fromJson(ubertip.tooltipOffset);$2.commands=$0;$2.actions=$1;if(ss.isValue($2.overlayImage)||ss.isValue($2.overlayImageKey)){var $3=ubertip.overlayAnchors.length;$2.overlayAnchors=new Array($3);for(var $4=0;$4<$3;++$4){var $5=ubertip.overlayAnchors[$4];$2.overlayAnchors[$4]=tab.PointUtil.fromJson($5);}}tab.UbertipSerializer.$A(ubertip,$0,true);if(ss.isValue($2.tooltipHtml)||ss.isValue($2.selectionHtml)||$0.length>0||$1.length>0){return $2;}return null;}
tab.UbertipSerializer.createLocalUberTipModel=function(sheetId,localInfo,isAuthoring){var $0=localInfo.get_interactedTupleIds();var $1=localInfo.get_effectedTupleIds();var $2=localInfo.get_paneDescriptorKey();var $3=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),sheetId);var $4=$3.get_vizDataModel();if(ss.isNullOrUndefined($4)){return null;}var $5=$4.get_vizDataPresModel().ubertipData;var $6=tab.UbertipSerializer.$6($5,$2);var $7=null;var $8;if($0.length===1){$7=tab.UbertipSerializer.$8($6,$4,$0);$8=$0[0];}else{$8=-1;}var $9=null;var $A=false;if($1.length>1&&$6.showButtons){$A=true;$9=tab.UbertipSerializer.$9($4,$1,$6.summaryField);}var $B=[];var $C=($1.length>1)?-1:$1[0];var $D=[];if($6.showButtons&&$4.hasDimensionColumnNotMeasureNames()){var $10=tab.ApplicationModel.get_instance().get_dataDictionary();if(tab.VizDataUtils.hasTupleWithNonTotalValue($4,$10,$1)){tab.UbertipSerializer.$B($5.standardCommands,$B,$C);}if($A){tab.UbertipSerializer.$B($5.multiselectCommands,$B,$C);}$B=$B.filter(function($p1_0){
return $p1_0.commandType!==10;});tab.UbertipSerializer.$A(null,$B,false);if(isAuthoring){var $11=tab.$create_CommandModel();$11.commandType=10;$11.imageRes=tab.TabResources.lookupResourceAlias('TQRC_SPLIT');$11.name='';if(tsConfig.is_mobile){var $12=tab.Strings.UbertipMergeMobile;var $13=tab.Strings.UbertipSplitMobile;$11.description=($13.length>$12.length)?$13:$12;}$D.add($11);}}var $E=tab.ActionUtils.getApplicableActions(sheetId,'explicitly');var $F=tab.$create_UbertipModel();$F.tooltipHtml=$7;$F.selectionHtml=$9;$F.tupleId=$C;$F.interactedTupleId=$8;$F.actionPMs=$E;$F.commands=$B;$F.placeHolders=$D;$F.sheetId=sheetId;return $F;}
tab.UbertipSerializer.$6=function($p0,$p1){if($p0.ubertipPaneDatas.length===1){return $p0.ubertipPaneDatas[0];}var $enum1=ss.IEnumerator.getEnumerator($p0.ubertipPaneDatas);while($enum1.moveNext()){var $0=$enum1.current;if(ss.isValue($0.paneDescriptor)){var $1=tab.UbertipSerializer.$7($0.paneDescriptor);if($1===$p1){return $0;}}}return null;}
tab.UbertipSerializer.$7=function($p0){var $0='';var $enum1=ss.IEnumerator.getEnumerator($p0.xFields);while($enum1.moveNext()){var $1=$enum1.current;$0+=$1+', ';}$0+=$p0.xIndex+'; ';var $enum2=ss.IEnumerator.getEnumerator($p0.yFields);while($enum2.moveNext()){var $2=$enum2.current;$0+=$2+', ';}$0+=$p0.yIndex;return $0;}
tab.UbertipSerializer.$8=function($p0,$p1,$p2){var $0=tab.ApplicationModel.get_instance().get_dataDictionary();return tab.VizDataUtils.constructHtml($0,$p0.htmlTooltip,$p1,$p2);}
tab.UbertipSerializer.$9=function($p0,$p1,$p2){var $0=$p0.getColumnByCaptionOrFieldName($p2||'');if(ss.isValue($0)){var $1=[];$.extend(true,$1,tab.UbertipSerializer.$4);$1[2]=$p1.length.toString();$1[4]=tab.Strings.UbertipItemsSelected;if($0.aggregation!=='sum'){$1[8]=tab.Strings.SumOf;}$1[10]=$p2;$1[14]='&lt;'+$p2+'&gt;';var $2=$1.join('');var $3=tab.ApplicationModel.get_instance().get_dataDictionary();return tab.VizDataUtils.constructHtml($3,$2,$p0,$p1);}else{tab.UbertipSerializer.$5[2]=$p1.length.toString();tab.UbertipSerializer.$5[4]=tab.Strings.UbertipItemsSelected;return tab.UbertipSerializer.$5.join('');}}
tab.UbertipSerializer.$A=function($p0,$p1,$p2){if($p1.length<=0){return;}var $0=false;if(ss.isValue($p0)&&ss.isValue($p0.r)){switch($p0.r){case 'viz':case 'xheader':case 'yheader':case 'bottomaxis':case 'leftaxis':case 'rightaxis':case 'topaxis':$0=true;break;}}if(!tsConfig.previewMode&&($0||!$p2)){var $1=tab.$create_CommandModel();$1.commandType=7;$1.status='enabled';$1.description=tab.Strings.UbertipViewData;$1.command={};$1.command.commandName='viewData';$1.command.commandNamespace='tabdoc';$1.command.commandParams={};var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $2=$enum1.current;if(ss.isValue($2.command)&&ss.isValue($2.command.commandParams)&&Object.keyExists($2.command.commandParams,'select-at-point')){$1.command.commandParams['select-at-point']=$2.command.commandParams['select-at-point'];break;}}$p1.add($1);}if(tsConfig.is_mobile){var $3=tab.$create_CommandModel();$3.commandType=1;$3.name=tab.Strings.UbertipClearSelection;$3.status='enabled';$p1.add($3);}}
tab.UbertipSerializer.$B=function($p0,$p1,$p2){if(ss.isNullOrUndefined($p0)||ss.isNullOrUndefined($p0.commandItems)){return;}var $enum1=ss.IEnumerator.getEnumerator($p0.commandItems);while($enum1.moveNext()){var $0=$enum1.current;var $1=tab.$create_CommandModel();$1.command=tab.CommandSerializer.deserialize($0.command);if(ss.isValue($1.command)){tab.UbertipSerializer.$C($1);$1.name=$0.name;$1.description=$0.description;if(!tab.MiscUtil.isNullOrEmpty($0.iconRes)){$1.imageRes=tab.TabResources.lookupFullResourceAlias($0.iconRes);}var $2=$0.state;$1.status=(ss.isNullOrUndefined($2)||$2)?'enabled':'disabled';if($p2>=0&&!ss.isValue($1.command.commandParams['select-at-point'])){$1.command.commandParams['tuple-id']=$p2.toString();}$p1.add($1);}if(ss.isValue($0.commands)){tab.UbertipSerializer.$B($0.commands,$p1,$p2);}}}
tab.UbertipSerializer.$C=function($p0){var $0=tab.CommandSerializer.getCommandType($p0.command);if(ss.isValue($0)){$p0.commandType=$0;}}
tab.UbertipSerializer.$D=function($p0){return (String.isNullOrEmpty($p0))?null:$p0;}
tab.CategoricalLegendModel=function(parent,contentType,legendType){tab.CategoricalLegendModel.initializeBase(this,[parent,new tab.PresModelPathItem(contentType)]);this.$6=legendType;}
tab.CategoricalLegendModel.$9=function($p0,$p1){var $0;switch($p0){case 'color':case 'map':$0=($p1).colorLegendItems;break;case 'size':$0=($p1).sizeLegendItems;break;case 'shape':$0=($p1).shapeLegendItems;break;default:return null;}return $0;}
tab.CategoricalLegendModel.prototype={$6:null,add_legendChanged:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_legendChanged:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_worksheetName:function(){return this.get_$8().get_worksheetName();},get_id:function(){return this.get_legendNames().join(';')+this.$6;},get_catLegendPresModel:function(){return this.presModel;},get_isHighlightEnabled:function(){return (this.get_catLegendPresModel().isHighlightEnabled||false);},get_isHighlightAllowed:function(){return (this.get_catLegendPresModel().isHighlightAllowed||false);},get_isOneWay:function(){return (this.get_catLegendPresModel().oneWayBrushing||false);},get_fieldCaptions:function(){return this.get_catLegendPresModel().fieldCaptions;},get_legendNames:function(){return this.get_catLegendPresModel().legendNames;},get_legendType:function(){return this.$6;},get_items:function(){return tab.CategoricalLegendModel.$9(this.get_legendType(),this.get_catLegendPresModel());},get_$8:function(){var $0=Type.safeCast(this.get_parent(),tab.ZoneContentWrapperModel);return $0.get_zone();},findItemById:function(objectId){return _.find(this.get_items(),function($p1_0){
return $p1_0.objectId===objectId;});},update:function(catLegendPresModel){if(this.isNewPresModelSameAsOld(catLegendPresModel)){return;}var $0=this.get_catLegendPresModel();this.swapAndCopyPresModel(catLegendPresModel);if(this.$A($0,this.get_catLegendPresModel())){this.get_catLegendPresModel().catLegendLayout=$0.catLegendLayout;}this.raiseEvent(this.$7);},$A:function($p0,$p1){var $0=false;if(ss.isValue($p0)&&ss.isValue($p0.catLegendLayout)&&ss.isValue($p1)&&ss.isValue($p1.catLegendLayout)){$0=$p0.titleHtml===$p1.titleHtml&&$p0.catLegendLayout.legendLayout===$p1.catLegendLayout.legendLayout&&$p0.catLegendLayout.rowCount===$p1.catLegendLayout.colCount&&$p0.catLegendLayout.colCount===$p1.catLegendLayout.rowCount;}return $0;}}
tab.ColorModel=function(r,g,b,a){this.r=r;this.g=g;this.b=b;this.a=a;}
tab.ColorModel.fromArgbInt=function(color){var $0=(color&16711680)>>>16;var $1=(color&65280)>>>8;var $2=(color&255);var $3=(color&4278190080)>>>24;return new tab.ColorModel($0,$1,$2,$3/255);}
tab.ColorModel.fromColorCode=function(colorCode){var $0=function($p1_0){
return Math.min(Math.max($p1_0,0),255);};var $1;var $2;var $3;var $4=1;var $5=tab.ColorModel.$1.exec(colorCode);if(ss.isValue($5)){$1=$0(parseInt($5[1],16));$2=$0(parseInt($5[2],16));$3=$0(parseInt($5[3],16));return new tab.ColorModel($1,$2,$3,$4);}$5=tab.ColorModel.$2.exec(colorCode);if(ss.isValue($5)){$1=$0(parseInt($5[1],10));$2=$0(parseInt($5[2],10));$3=$0(parseInt($5[3],10));return new tab.ColorModel($1,$2,$3,$4);}$5=tab.ColorModel.$3.exec(colorCode);if(ss.isValue($5)){$1=$0(parseInt($5[1],10));$2=$0(parseInt($5[2],10));$3=$0(parseInt($5[3],10));$4=parseFloat($5[4]);if($4>255){$4=255;}if($4<0){$4=0;}$4=$4/255;return new tab.ColorModel($1,$2,$3,$4);}throw new Error('Unknown color format: '+colorCode);}
tab.ColorModel.fromColorModelPlusAlpha=function(rgb,a){return new tab.ColorModel(rgb.get_r(),rgb.get_g(),rgb.get_b(),a);}
tab.ColorModel.convertColorForCanvas=function(colorFromBackend){var $0=tab.ColorModel.fromColorCode(colorFromBackend);return $0.toString();}
tab.ColorModel.alphaComposite=function(src,dst){if(dst.get_a()>=0.99999){return tab.ColorModel.alphaCompositeSolidDest(src,dst);}var $0=1-src.get_a();var $1=src.get_a()+(dst.get_a()*$0);return new tab.ColorModel(tab.ColorModel.$5(src.get_r(),src.get_a(),dst.get_r(),dst.get_a(),$1),tab.ColorModel.$5(src.get_g(),src.get_a(),dst.get_g(),dst.get_a(),$1),tab.ColorModel.$5(src.get_b(),src.get_a(),dst.get_b(),dst.get_a(),$1),$1);}
tab.ColorModel.alphaCompositeSolidDest=function(src,dst){return new tab.ColorModel(tab.ColorModel.$6(src.get_r(),src.get_a(),dst.get_r()),tab.ColorModel.$6(src.get_g(),src.get_a(),dst.get_g()),tab.ColorModel.$6(src.get_b(),src.get_a(),dst.get_b()),1);}
tab.ColorModel.$4=function($p0,$p1){var $0=$p0.toString(16);while($0.length<$p1){$0='0'+$0;}return $0;}
tab.ColorModel.$5=function($p0,$p1,$p2,$p3,$p4){return Math.round(((($p0*$p1)+(($p2*$p3)*(1-$p1)))/$p4));}
tab.ColorModel.$6=function($p0,$p1,$p2){return Math.round(($p0*$p1)+($p2*(1-$p1)));}
tab.ColorModel.prototype={r:0,g:0,b:0,a:0,get_r:function(){return this.r;},get_g:function(){return this.g;},get_b:function(){return this.b;},get_a:function(){return this.a;},toString:function(){return (this.a>=0.99999)?this.toRgb():this.toRgba();},equals:function(m){return ss.isValue(m)&&this.r===m.r&&this.g===m.g&&this.b===m.b&&this.a===m.a;},toRgba:function(){return new ss.StringBuilder('rgba(').append(this.r).append(',').append(this.g).append(',').append(this.b).append(',').append(this.a).append(')').toString();},toRgb:function(){return new ss.StringBuilder('rgb(').append(this.r).append(',').append(this.g).append(',').append(this.b).append(')').toString();},toArgbHex:function(){var $0=this.a*255;return new ss.StringBuilder('#').append(tab.ColorModel.$4($0,2)).append(tab.ColorModel.$4(this.r,2)).append(tab.ColorModel.$4(this.g,2)).append(tab.ColorModel.$4(this.b,2)).toString();},toArgbInt:function(){var $0=this.a*255;return ($0<<24)+(this.r<<16)+(this.g<<8)+this.b;}}
tab.StoryPointsModel=function(parent){tab.StoryPointsModel.initializeBase(this,[parent,new tab.PresModelPathItem('storyPoints')]);}
tab.StoryPointsModel.prototype={$6:null,get_currentStoryPoint:function(){return this.$6;},update:function(storyPoint){if(!ss.isValue(this.$6)){this.$6=new tab.StoryPointModel(this,storyPoint.storyPointId);}this.$6.update(storyPoint);}}
tab.ColorPaletteCollectionModel=function(parent){tab.ColorPaletteCollectionModel.initializeBase(this,[parent,new tab.PresModelPathItem('color-palettes')]);}
tab.ColorPaletteCollectionModel.prototype={get_paletteCollectionPresModel:function(){return this.presModel;},get_qColorPaletteGroups:function(){return this.get_paletteCollectionPresModel().qColorPaletteGroups;},get_qColorPaletteGroupCount:function(){return this.get_paletteCollectionPresModel().qColorPaletteGroups.length;},get_catColorPaletteGroupCount:function(){return this.get_paletteCollectionPresModel().catColorPaletteGroups.length;},get_catColorPaletteGroups:function(){return this.get_paletteCollectionPresModel().catColorPaletteGroups;},get_colorPalettes:function(){var $0=this.presModel;if(ss.isNullOrUndefined($0)){return [];}return $0.colorPalettes;},colorPaletteGroup:function(groupPresModel){var $0=groupPresModel.palettesIndices;return _.map($0,ss.Delegate.create(this,function($p1_0){
return this.get_colorPalettes()[$p1_0];}));},qColorPaletteGroup:function(groupIndex){return this.colorPaletteGroup(this.get_qColorPaletteGroups()[groupIndex]);},catColorPaletteGroup:function(groupIndex){return this.colorPaletteGroup(this.get_catColorPaletteGroups()[groupIndex]);},update:function(newColorPalettes){this.simpleSwapToUpdate(newColorPalettes,null);}}
tab.FlipboardModel=function(parent){tab.FlipboardModel.initializeBase(this,[parent,new tab.PresModelPathItem('flipboard')]);this.$6=new tab.StoryPointsModel(this);}
tab.FlipboardModel.prototype={$6:null,get_flipboardPresModel:function(){return this.presModel;},get_storyPointModel:function(){return this.$6.get_currentStoryPoint();},get_dashboardModel:function(){return this.get_storyPointModel().get_dashboardModel();},get_zoneId:function(){return (this.get_parent()).get_zone().get_zoneId();},get_currentStoryPointId:function(){return this.get_flipboardPresModel().currentStorypointIndex;},update:function(flipboardPresModel){if(ss.isValue(flipboardPresModel.currentStorypointIndex)){this.$6.update(flipboardPresModel.storyPoints[flipboardPresModel.currentStorypointIndex.toString()]);}this.swapPresModel(flipboardPresModel);}}
tab.QuantitativeColorLegendModel=function(parent,contentType){tab.QuantitativeColorLegendModel.initializeBase(this,[parent,new tab.PresModelPathItem(contentType)]);}
tab.QuantitativeColorLegendModel.prototype={add_legendChanged:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_legendChanged:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_quantColorLegendPresModel:function(){return this.presModel;},get_worksheetName:function(){return this.get_$7().get_worksheetName();},get_$7:function(){var $0=Type.safeCast(this.get_parent(),tab.ZoneContentWrapperModel);return $0.get_zone();},update:function(quantLegendPresModel){if(this.isNewPresModelSameAsOld(quantLegendPresModel)){return;}this.swapAndCopyPresModel(quantLegendPresModel);this.raiseEvent(this.$6);}}
tab.StoryPointModel=function(parent,storyPointId){tab.StoryPointModel.initializeBase(this,[parent,new tab.PresModelPathItem(storyPointId.toString(),0)]);this.$6=new tab.DashboardModel(this,'dashboardPresModel');}
tab.StoryPointModel.prototype={$6:null,add_dashboardDisposal:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_dashboardDisposal:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,add_newStoryPoint:function(value){this.$8=ss.Delegate.combine(this.$8,value);},remove_newStoryPoint:function(value){this.$8=ss.Delegate.remove(this.$8,value);},$8:null,get_dashboardModel:function(){return this.$6;},get_$9:function(){return this.presModel;},get_storyPointId:function(){return this.get_$9().storyPointId;},update:function(storyPointPresModel){if(ss.isValue(this.get_$9())&&(this.get_storyPointId()!==storyPointPresModel.storyPointId)){this.set_presModelKey(new tab.PresModelPathItem(storyPointPresModel.storyPointId.toString(),0));if(ss.isValue(this.$6)){this.$7();this.$6=null;}this.$6=new tab.DashboardModel(this,'dashboardPresModel');this.$A(storyPointPresModel.dashboardPresModel);this.raiseEvent(this.$8);}else{this.$A(storyPointPresModel.dashboardPresModel);}this.swapPresModel(storyPointPresModel);},$A:function($p0){if(ss.isValue($p0)){this.get_dashboardModel().update($p0);}}}
tab.FieldModel=function(parent){tab.FieldModel.initializeBase(this,[parent,new tab.PresModelPathItem('field')]);}
tab.FieldModel.prototype={get_dataSourceModel:function(){return this.get_parent();},get_canHaveChildren:function(){return this.get_isDrillPath()||this.get_isCubeHierarchy()||this.get_isRelationalTable()||this.get_isCubeDimension()||this.get_isCubeFolder()||this.get_isFolder();},get_isUnsortedContainer:function(){return this.get_isRelationalTable()||this.get_isCubeFolder()||this.get_isFolder();},get_isDraggable:function(){return !this.get_isUnsortedContainer();},get_childToSelect:function(){return (this.get_isUnsortedContainer())?null:this;},get_isDerived:function(){if(this.get_canHaveChildren()){return false;}return this.get_isGenerated()||this.get_isAutoColumn()||(this.get_isColumn()&&this.asColumn().get_isInstance());},get_field:function(){return this.presModel;},get_fieldIconResource:function(){return this.get_dataSourceModel().getFieldIconResource(this.get_field().fieldIconIdx);},get_isInstance:function(){return !this.get_isGenerated()&&this.get_isDerived();},get_isHidden:function(){return this.get_field().isHidden||this.get_isInstance();},get_isGenerated:function(){return this.get_field().isGenerated;},get_isAutoColumn:function(){return this.get_field().isAutoColumn;},get_globalName:function(){return this.get_field().fn;},get_localName:function(){return this.get_field().name;},get_description:function(){return this.get_field().description;},get_userCaption:function(){return this.get_field().userCaption;},get_ordinal:function(){return this.get_field().datasourceOrdinal;},get_isColumn:function(){return this.get_instanceType()==='column'||this.get_instanceType()==='group';},get_isGroup:function(){return this.get_instanceType()==='group';},get_isCubeDimension:function(){return this.get_instanceType()==='cubeDimension';},get_isDrillPath:function(){return this.get_instanceType()==='drillPath';},get_isCubeHierarchy:function(){return this.get_instanceType()==='cubeHierarchy';},get_isCubeFolder:function(){return this.get_instanceType()==='cubeFolder';},get_isFolder:function(){return this.get_instanceType()==='folder';},get_isRelationalTable:function(){return this.get_instanceType()==='relationalTable';},get_role:function(){return 'unknown';},get_fieldType:function(){return (this.get_isColumn())?(this.get_field()).fieldType:'unknown';},get_displayName:function(){return (this.get_isDrillPath())?(this.get_localName()||this.get_description()):(this.get_description()||this.get_localName());},get_tooltip:function(){return (this.get_userCaption()||this.get_description()||this.get_displayName());},matchesFolderRole:function(section){if(this.get_isFolder()){return this.asFolder().get_folderRole()===section;}else{switch(section){case 'dimensions':return this.get_role()==='dimension';case 'measure':return this.get_role()==='measure';case 'groups':return this.get_isGroup();case 'parameters':return true;default:return false;}}},asColumn:function(){return Type.safeCast(this,tab.FieldColumnModel);},asGroup:function(){return Type.safeCast(this,tab.GroupModel);},asDimension:function(){return Type.safeCast(this,tab.CubeDimensionModel);},asHierarchy:function(){return Type.safeCast(this,tab.CubeHierarchyModel);},asCubeFolder:function(){return Type.safeCast(this,tab.CubeFolderModel);},asFolder:function(){return Type.safeCast(this,tab.FolderModel);},asDrillPath:function(){return Type.safeCast(this,tab.DrillPathModel);},asRelationalTable:function(){return Type.safeCast(this,tab.RelationalTableModel);}}
tab.FieldColumnModel=function(parent){tab.FieldColumnModel.initializeBase(this,[parent]);}
tab.FieldColumnModel.prototype={fieldCol:null,get_instanceType:function(){return 'column';},get_dataType:function(){return this.fieldCol.dataType;},get_role:function(){var $0=this.fieldCol.fieldRole;if(ss.isNullOrUndefined($0)||$0==='unknown'){$0=this.fieldCol.defaultFieldRole;}return $0;},get_baseColumnName:function(){return this.fieldCol.baseColumnName;},get_baseColumn:function(){return (this.get_isInstance())?(this.get_parent()).findField(this.get_baseColumnName()):this;},get_isInstance:function(){return !ss.isNullOrUndefined(this.fieldCol.isInstance)&&this.fieldCol.isInstance;},get_aggType:function(){return this.fieldCol.aggregation;},get_defaultAggType:function(){return this.fieldCol.defaultAggregation;},get_isCalculated:function(){return this.fieldCol.isCalculated;},update:function(pm){this.fieldCol=pm;this.swapAndCopyPresModel(pm);}}
tab.GroupModel=function(parent){tab.GroupModel.initializeBase(this,[parent]);}
tab.GroupModel.prototype={get_instanceType:function(){return 'group';},get_isCombinedField:function(){return ((this.fieldCol).isCombinedField||false);}}
tab.DrillPathModel=function(parent){tab.DrillPathModel.initializeBase(this,[parent]);}
tab.DrillPathModel.prototype={$6:null,get_levels:function(){return this.$6;},get_childToSelect:function(){return this.$6[0];},get_instanceType:function(){return 'drillPath';},update:function(pm,newLevels){this.swapAndCopyPresModel(pm);this.$6=newLevels;}}
tab.CubeHierarchyModel=function(parent){tab.CubeHierarchyModel.initializeBase(this,[parent]);}
tab.CubeHierarchyModel.prototype={$6:null,get_levels:function(){return this.$6;},get_childToSelect:function(){return this.$6[0];},get_instanceType:function(){return 'cubeHierarchy';},update:function(pm,newLevels){this.swapAndCopyPresModel(pm);this.$6=newLevels;}}
tab.FolderModel=function(parent){tab.FolderModel.initializeBase(this,[parent]);}
tab.FolderModel.prototype={$6:null,get_fields:function(){return this.$6;},get_folderRole:function(){return (this.presModel).folderRole;},get_instanceType:function(){return 'folder';},update:function(pm,newFields){this.swapAndCopyPresModel(pm);this.$6=newFields;}}
tab.CubeFolderModel=function(parent){tab.CubeFolderModel.initializeBase(this,[parent]);}
tab.CubeFolderModel.prototype={$6:null,$7:null,get_hierarchies:function(){return this.$6;},get_childToSelect:function(){return this.$6[0];},get_columns:function(){return this.$7;},get_instanceType:function(){return 'cubeFolder';},update:function(pm,newHierarchies,newColumns){this.swapAndCopyPresModel(pm);this.$6=newHierarchies;this.$7=newColumns;}}
tab.CubeDimensionModel=function(parent){tab.CubeDimensionModel.initializeBase(this,[parent]);}
tab.CubeDimensionModel.prototype={$6:null,$7:null,$8:null,get_hierarchies:function(){return this.$6;},get_childToSelect:function(){var $0=(this.presModel).defaultHierarchyName;if(!String.isNullOrEmpty($0)){var $enum1=ss.IEnumerator.getEnumerator(this.$6);while($enum1.moveNext()){var $2=$enum1.current;if($2.get_localName()===$0){return $2.get_levels()[0];}}}var $1=[];var $enum2=ss.IEnumerator.getEnumerator(this.$6);while($enum2.moveNext()){var $3=$enum2.current;$1.add($3);}var $enum3=ss.IEnumerator.getEnumerator(this.$7);while($enum3.moveNext()){var $4=$enum3.current;var $enum4=ss.IEnumerator.getEnumerator($4.get_hierarchies());while($enum4.moveNext()){var $5=$enum4.current;$1.add($5);}}$1.sort(function($p1_0,$p1_1){
if($p1_0.get_levels().length>1&&$p1_1.get_levels().length<=1){return -1;}else if($p1_0.get_levels().length<=1&&$p1_1.get_levels().length>1){return 1;}else{return 0;}});return ($1.length>0)?$1[0].get_levels()[0]:null;},get_folders:function(){return this.$7;},get_attributes:function(){return this.$8;},get_instanceType:function(){return 'cubeDimension';},update:function(pm,newHierarchies,newFolders,newAttributes){this.swapAndCopyPresModel(pm);this.$6=newHierarchies;this.$7=newFolders;this.$8=newAttributes;}}
tab.RelationalTableModel=function(parent){tab.RelationalTableModel.initializeBase(this,[parent]);}
tab.RelationalTableModel.prototype={$6:null,get_columns:function(){return this.$6;},get_instanceType:function(){return 'relationalTable';},update:function(pm,newColumns){this.swapAndCopyPresModel(pm);this.$6=newColumns;}}
tab.MultipleFieldsModel=function(){tab.MultipleFieldsModel.initializeBase(this,[null]);var $0={};$0.fn='';this.swapAndCopyPresModel($0);}
tab.MultipleFieldsModel.prototype={get_instanceType:function(){return 'multiple';}}
tab.FlipboardNavigatorModel=function(parent){tab.FlipboardNavigatorModel.initializeBase(this,[parent,new tab.PresModelPathItem('flipboardNavigation')]);}
tab.FlipboardNavigatorModel.prototype={add_newStoryPoint:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_newStoryPoint:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_flipboardNavPresModel:function(){return this.presModel;},get_numberOfPoints:function(){return this.get_flipboardNavPresModel().storypointNavItems.length;},get_currentPoint:function(){return this.get_flipboardNavPresModel().currentStorypointIndex;},getStoryPoints:function(){return this.get_flipboardNavPresModel().storypointNavItems;},update:function(flipboardNavPresModel){this.simpleSwapToUpdate(flipboardNavPresModel,this.$6);}}
tab.ImageZoneModel=function(parent){tab.ImageZoneModel.initializeBase(this,[parent,new tab.PresModelPathItem('imagezone')]);this.$6=parent.get_zone();}
tab.ImageZoneModel.prototype={$6:null,add_newImageZone:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newImageZone:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_zone:function(){return this.$6.get_presModel();},update:function(imageZonePresModel){this.simpleSwapToUpdate(imageZonePresModel,this.$7);}}
tab.WebZoneModel=function(parent){tab.WebZoneModel.initializeBase(this,[parent,new tab.PresModelPathItem('webzone')]);this.$6=parent.get_zone();}
tab.WebZoneModel.prototype={$6:null,add_newWebZone:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newWebZone:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_zone:function(){return this.$6.get_presModel();},update:function(webZonePresModel){this.simpleSwapToUpdate(webZonePresModel,this.$7);}}
tab.LegacyLegendModel=function(parent){tab.LegacyLegendModel.initializeBase(this,[parent,new tab.PresModelPathItem('legacylegend')]);}
tab.LegacyLegendModel.prototype={add_newLegacyLegend:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_newLegacyLegend:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_frame:function(){return this.get_presModel();},get_sheetName:function(){return this.get_frame().name;},update:function(newPresModel){this.simpleSwapToUpdate(newPresModel,this.$6);}}
tab.CustomizedView=function(){}
tab.CustomizedView.prototype={id:null,name:null,urlId:null,startViewId:null,isPublic:false,owner:null}
tab.ParameterCtrlModel=function(parent){tab.ParameterCtrlModel.initializeBase(this,[parent,new tab.PresModelPathItem('parameterCtrl')]);}
tab.ParameterCtrlModel.prototype={$6:null,add_newParameterCtrl:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newParameterCtrl:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_title:function(){return tableau.format.stripFormattedText((this.get_parameterCtrlPresModel().legacyPresModel).title);},get_parameterCtrlPresModel:function(){return this.presModel;},get_zone:function(){return this.get_zoneModel().get_presModel();},get_frame:function(){return this.$6;},get_zoneModel:function(){return (this.get_parent()).get_zone();},update:function(newPresModel,newFrame){this.$6=newFrame;if(ss.isValue(this.$6)){this.$6.attributes['model']=newPresModel;}this.simpleSwapToUpdate(newPresModel,this.$7,newPresModel);}}
tab.PageModel=function(parent){tab.PageModel.initializeBase(this,[parent,new tab.PresModelPathItem('page')]);this.$6=parent.get_zone();}
tab.PageModel.prototype={$6:null,$7:null,add_newPage:function(value){this.$8=ss.Delegate.combine(this.$8,value);},remove_newPage:function(value){this.$8=ss.Delegate.remove(this.$8,value);},$8:null,get_title:function(){return tableau.format.stripFormattedText(this.get_pagePresModel().title);},get_pagePresModel:function(){return this.presModel;},get_zone:function(){return this.$6.get_presModel();},get_frame:function(){return this.$7;},update:function(pagePresModel,newFrame){this.$7=newFrame;this.simpleSwapToUpdate(pagePresModel,this.$8,pagePresModel);}}
tab.VisualImageModel=function(parent){tab.VisualImageModel.initializeBase(this,[parent,new tab.PresModelPathItem('visualImage')]);}
tab.VisualImageModel.prototype={add_newVisualImage:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_newVisualImage:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,update:function(newPresModel){this.simpleSwapToUpdate(newPresModel,this.$6,newPresModel);}}
tab.ViewGeometryModel=function(parent){tab.ViewGeometryModel.initializeBase(this,[parent,new tab.PresModelPathItem('geometry')]);}
tab.ViewGeometryModel.prototype={add_newViewGeometry:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_newViewGeometry:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,update:function(newPresModel){this.simpleSwapToUpdate(newPresModel,this.$6);}}
tab.FilterModel=function(parent,presModel){tab.FilterModel.initializeBase(this,[parent,new tab.PresModelPathItem('filter['+presModel.name.join('_')+']')]);this.presModel=presModel;}
tab.FilterModel.$6=function($p0){return ss.isValue($p0)&&tableau.format.isDateTimeWithNonMidnightTime($p0);}
tab.FilterModel.isQuantitativeTimestampFilter=function(filterState,min,max){var $0=tab.FilterModel.$6(min)||tab.FilterModel.$6(max);if(!$0&&ss.isValue(filterState)){if(ss.isValue(filterState.data)){$0=$0||tab.FilterModel.$6(filterState.data.min)||tab.FilterModel.$6(filterState.data.max);}if(!$0&&ss.isValue(filterState.range)){$0=$0||tab.FilterModel.$6(filterState.range.min)||tab.FilterModel.$6(filterState.range.max);}}return $0;}
tab.FilterModel.$7=function($p0){return ($p0.t===tableau.types.DataType.DT_TIMESTAMP||$p0.t===tableau.types.DataType.DT_DATE);}
tab.FilterModel.isQuantitativeDateFilter=function(filterState,min,max){if(ss.isValue(min)){return tab.FilterModel.$7(min);}else if(ss.isValue(max)){return tab.FilterModel.$7(max);}else if(ss.isValue(filterState)){if(ss.isValue(filterState.data)){if(ss.isValue(filterState.data.min)){return tab.FilterModel.$7(filterState.data.min);}else if(ss.isValue(filterState.data.max)){return tab.FilterModel.$7(filterState.data.max);}}if(ss.isValue(filterState.range)){if(ss.isValue(filterState.range.min)){return tab.FilterModel.$7(filterState.range.min);}else if(ss.isValue(filterState.range.max)){return tab.FilterModel.$7(filterState.range.max);}}}return false;}
tab.FilterModel.prototype={get_filterPresModel:function(){return this.get_presModel();},get_globalFieldName:function(){var $0=this.get_presModel();var $1=new String();$1='[';for(var $2=0;$2<$0.name.length;++$2){if($1.endsWith(']')){$1+='.';$1+='[';}$1+=$0.name[$2];$1+=']';}return $1;}}
tab.SceneModel=function(parent){this.$7={};this.$8=[];this.$9=[];tab.SceneModel.initializeBase(this,[parent,new tab.PresModelPathItem('scene')]);this.$A=[];this.$B=[];}
tab.SceneModel.$E=function($p0,$p1){if(Object.keyExists($p0,'background')){var $0=$p0['background'].get_visualListPresModel().drawItems;var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;if($1.type==='draw-solid-brush'){var $2=$1;return tab.ColorModel.fromColorCode($2.color);}}}return (ss.isValue($p1.bgColor))?tab.ColorModel.fromColorCode($p1.bgColor):tab.SceneModel.$6;}
tab.SceneModel.prototype={$A:null,$B:null,$C:null,add_newSceneModel:function(value){this.$D=ss.Delegate.combine(this.$D,value);},remove_newSceneModel:function(value){this.$D=ss.Delegate.remove(this.$D,value);},$D:null,get_scenePresModel:function(){return this.presModel;},get_visualListModels:function(){return this.$7;},get_refLineVisualLists:function(){return this.$A;},get_trendLineVisualLists:function(){return this.$B;},get_drawFirstParts:function(){return this.$8;},get_drawLastParts:function(){return this.$9;},get_backgroundColor:function(){return this.$C;},get_paneDescriptorCount:function(){return Object.getKeyCount(this.get_scenePresModel().pdMarksMap);},update:function(scenePresModel){if(this.isNewPresModelSameAsOld(scenePresModel)){return;}this.$10(scenePresModel);if(ss.isValue(scenePresModel.drawFirst)){this.$8.clear();var $enum1=ss.IEnumerator.getEnumerator(scenePresModel.drawFirst);while($enum1.moveNext()){var $0=$enum1.current;var $1=$0.visualPart;if(!Object.keyExists(this.$7,$1)){this.$7[$1]=new tab.VisualListModel(this);}if(this.$8.contains($1)){continue;}this.$8.add($1);this.$7[$1].update($0);}}if(ss.isValue(scenePresModel.drawLast)){this.$9.clear();var $enum2=ss.IEnumerator.getEnumerator(scenePresModel.drawLast);while($enum2.moveNext()){var $2=$enum2.current;var $3=$2.visualPart;if(!Object.keyExists(this.$7,$3)){this.$7[$3]=new tab.VisualListModel(this);}this.$9.add($3);this.$7[$3].update($2);}}this.swapAndCopyPresModel(scenePresModel);this.$C=tab.SceneModel.$E(this.$7,scenePresModel);this.$F();this.raiseEvent(this.$D);},$F:function(){this.$A.clear();this.$B.clear();if(ss.isValue(this.get_scenePresModel().panes)){var $enum1=ss.IEnumerator.getEnumerator(this.get_scenePresModel().panes);while($enum1.moveNext()){var $0=$enum1.current;if(ss.isValue($0.drawPane)){var $enum2=ss.IEnumerator.getEnumerator($0.drawPane);while($enum2.moveNext()){var $1=$enum2.current;if(ss.isValue($1)){if($1.visualPart==='ref-lines'){this.$A.add($1);}else if($1.visualPart==='trend-lines'){this.$B.add($1);}}}}}}},$10:function($p0){var $dict1=this.get_visualListModels();for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.key;var $2=_.find($p0.drawFirst,function($p1_0){
return $1===$p1_0.visualPart;});if(ss.isNullOrUndefined($2)){$2=_.find($p0.drawLast,function($p1_0){
return $1===$p1_0.visualPart;});}if(ss.isNullOrUndefined($2)){delete this.get_visualListModels()[$1];}}}}
tab.ProjectModel=function(){}
tab.ProjectModel.prototype={$0:null,id:null,get_name:function(){return this.$0;},set_name:function(value){this.$0=value;return value;},get_id:function(){return this.id;},set_id:function(value){this.id=value;return value;}}
tab.Schedule=function(){}
tab.Schedule.prototype={$0:null,id:null,$1:0,get_name:function(){return this.$0;},set_name:function(value){this.$0=value;return value;},get_id:function(){return this.id;},set_id:function(value){this.id=value;return value;},get_action:function(){return this.$1;},set_action:function(value){this.$1=value;return value;}}
tab.SelectionsModel=function(parent,pathName){this.$6=[];tab.SelectionsModel.initializeBase(this,[parent,new tab.PresModelPathItem(pathName,1)]);this.$B('tuples');this.$B('nodes');this.$B('trend-lines');}
tab.SelectionsModel.$8=function($p0){var $0={};$0.selectionType=$p0;switch($p0){case 'tuples':$0.objectIds=new Array(0);break;case 'legend-items':$0.legendSelectionInfo={};$0.objectIds=new Array(0);break;case 'nodes':$0.selectedNodes=new Array(0);break;}return $0;}
tab.SelectionsModel.$9=function($p0,$p1){var $0=$p0.selectionType;for(var $1=0;$1<$p1.length;++$1){var $2=$p1[$1];if($2.selectionType===$0){if($0==='legend-items'&&!_.isEqual($p0.legendSelectionInfo,$2.legendSelectionInfo)){continue;}$p1[$1]=$p0;return;}}$p1.add($p0);}
tab.SelectionsModel.prototype={add_newSelections:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newSelections:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_selectionModels:function(){return this.$6;},get_isEmpty:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$6);while($enum1.moveNext()){var $0=$enum1.current;if(!$0.get_isEmpty()){return false;}}return true;},get_tupleSelection:function(){return this.$A('tuples');},get_nodeSelection:function(){return this.$A('nodes');},get_allLegendSelections:function(){return _.filter(this.$6,function($p1_0){
return $p1_0.get_selectionType()==='legend-items';});},getLegendSelection:function(key,legendColumns){var $0=_.find(this.$6,function($p1_0){
return $p1_0.get_selectionType()==='legend-items'&&ss.isValue($p1_0.get_selectionPresModel())&&$p1_0.get_selectionPresModel().legendSelectionInfo.legendType===key&&_.isEqual($p1_0.get_selectionPresModel().legendSelectionInfo.legendColumns,legendColumns);});if(ss.isNullOrUndefined($0)){$0=this.$B('legend-items');$0.get_selectionPresModel().legendSelectionInfo.legendType=key;$0.get_selectionPresModel().legendSelectionInfo.legendColumns=legendColumns;}return $0;},update:function(presModels){var $0=_.compact(presModels);var $1=[];$1.addRange($0);var $2=false;var $3=[];var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $5=$enum1.current;var $6;if($5.selectionType==='legend-items'){if(ss.isNullOrUndefined($5.legendSelectionInfo)){$2=true;continue;}$6=this.getLegendSelection($5.legendSelectionInfo.legendType,$5.legendSelectionInfo.legendColumns);}else{$6=this.$A($5.selectionType);}if(ss.isNullOrUndefined($6)){$6=new tab.SelectionModel(this,this.$6.length);this.$6.add($6);}$6.update($5);$3.add($6.get_hashKey());tab.SelectionsModel.$9($5,$1);}if($2){var $enum2=ss.IEnumerator.getEnumerator(this.$6);while($enum2.moveNext()){var $7=$enum2.current;tab.SelectionsModel.$9($7.get_selectionPresModel(),$1);}}else{var $enum3=ss.IEnumerator.getEnumerator(this.$6);while($enum3.moveNext()){var $8=$enum3.current;if($3.contains($8.get_hashKey())){continue;}var $9=tab.SelectionsModel.$8($8.get_selectionType());if($9.selectionType==='legend-items'){$9.legendSelectionInfo=$8.get_selectionPresModel().legendSelectionInfo;}$8.update($9);tab.SelectionsModel.$9($9,$1);}}for(var $A=0;$A<$1.length;++$A){presModels[$A]=$1[$A];}var $4={};$4.selections=presModels;if(this.isNewPresModelSameAsOld($4)){return;}this.swapAndCopyPresModel($4);this.raiseEvent(this.$7);},$A:function($p0){return _.find(this.$6,function($p1_0){
return $p1_0.get_selectionType()===$p0;});},$B:function($p0){var $0=new tab.SelectionModel(this,this.$6.length);this.$6.add($0);var $1=tab.SelectionsModel.$8($p0);$0.update($1);return $0;}}
tab.User=function(){}
tab.User.prototype={id:0,friendlyName:null,username:null}
tab.SortIndicatorsModel=function(parent){tab.SortIndicatorsModel.initializeBase(this,[parent,new tab.PresModelPathItem('sortIndicators')]);}
tab.SortIndicatorsModel.prototype={add_newSortIndicators:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_newSortIndicators:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_sortIndicatorsPresModel:function(){return this.get_presModel();},update:function(sortIndicatorsPresModel){this.simpleSwapToUpdate(sortIndicatorsPresModel,this.$6,sortIndicatorsPresModel);}}
tab.VisualListModel=function(parent){tab.VisualListModel.initializeBase(this,[parent,new tab.PresModelPathItem('visuallist')]);}
tab.VisualListModel.prototype={$6:null,add_newVisualList:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newVisualList:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_visualListPresModel:function(){return this.presModel;},get_groupItemNodes:function(){if(ss.isNullOrUndefined(this.$6)){this.$6=[];var $enum1=ss.IEnumerator.getEnumerator(this.get_visualListPresModel().drawItems);while($enum1.moveNext()){var $0=$enum1.current;if($0.type==='draw-group'){this.$6.add($0);}}}return this.$6;},update:function(visualListPresModel){if(this.isNewPresModelSameAsOld(visualListPresModel)){return;}this.$6=null;this.swapAndCopyPresModel(visualListPresModel);this.raiseEvent(this.$7);}}
tab.VizDataModel=function(parent){tab.VizDataModel.initializeBase(this,[parent,new tab.PresModelPathItem('vizdata')]);}
tab.VizDataModel.getFieldCaptions=function(vizDataPresModel){var $0=[];var $enum1=ss.IEnumerator.getEnumerator(vizDataPresModel.vizColumns);while($enum1.moveNext()){var $1=$enum1.current;if(!tab.MiscUtil.isNullOrEmpty($1.tupleIds)){continue;}$0.add($1.fieldCaption);}return $0;}
tab.VizDataModel.getTupleIdColumn=function(vizDataPresModel){var $0=_.find(vizDataPresModel.vizColumns,function($p1_0){
return $p1_0.fn==='[system:visual].[tuple_id]';});return $0;}
tab.VizDataModel.findColumnByCaptionOrFieldName=function(vizDataPresModel,captionOrFieldName){var $0=_.find(vizDataPresModel.vizColumns,function($p1_0){
return $p1_0.fieldCaption===captionOrFieldName||$p1_0.fn===captionOrFieldName||$p1_0.fnDisagg===captionOrFieldName||$p1_0.localBaseColumnName==='['+captionOrFieldName+']'||$p1_0.fn==='['+captionOrFieldName+']';});return $0;}
tab.VizDataModel.prototype={add_newVizData:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_newVizData:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_vizDataPresModel:function(){return this.presModel;},get_highlightCaptions:function(){return this.get_vizDataPresModel().highlightCaptions;},get_fieldCaptions:function(){var $0=tab.VizDataModel.getFieldCaptions(this.get_vizDataPresModel());return $0;},get_tupleIdColumn:function(){var $0=tab.VizDataModel.getTupleIdColumn(this.get_vizDataPresModel());return $0;},getColumnByIdx:function(idx){return this.get_vizDataPresModel().vizColumns[idx];},getColumnByCaptionOrFieldName:function(captionOrFieldName){var $0=tab.VizDataModel.findColumnByCaptionOrFieldName(this.get_vizDataPresModel(),captionOrFieldName);return $0;},update:function(vizDataPresModel){this.simpleSwapToUpdate(vizDataPresModel,this.$6);},hasDimensionColumnNotMeasureNames:function(){var $enum1=ss.IEnumerator.getEnumerator(this.get_vizDataPresModel().vizColumns);while($enum1.moveNext()){var $0=$enum1.current;if($0.localBaseColumnName!=='[:Measure Names]'&&$0.fieldRole==='dimension'){return true;}}return false;}}
tab.ZoneModel=function(parent,dashboard,zoneId){tab.ZoneModel.initializeBase(this,[parent,new tab.PresModelPathItem(zoneId.toString(),0)]);this.$16=dashboard;}
tab.ZoneModel.typeOfContent=function(zonePresModel){var $0=zonePresModel.presModelHolder;if(ss.isValue($0)&&Object.getKeyCount($0)===1){return Object.keys($0)[0];}switch(zonePresModel.zoneType){case 'filter':case 'layout-basic':case 'layout-flow':case 'layout-free-form':case 'empty':return '';}return '';}
tab.ZoneModel.getContent=function(zonePresModel,contentType){if(!(contentType in zonePresModel.presModelHolder)){return null;}return zonePresModel.presModelHolder[contentType];}
tab.ZoneModel.$1E=function($p0){switch($p0){case 'color':return 'color';case 'shape':return 'shape';case 'size':return 'size';case 'map':return 'map';}return 'color';}
tab.ZoneModel.prototype={$16:null,$17:null,$18:null,add_newZoneContent:function(value){this.$19=ss.Delegate.combine(this.$19,value);},remove_newZoneContent:function(value){this.$19=ss.Delegate.remove(this.$19,value);},$19:null,add_updateZoneContent:function(value){this.$1A=ss.Delegate.combine(this.$1A,value);},remove_updateZoneContent:function(value){this.$1A=ss.Delegate.remove(this.$1A,value);},$1A:null,add_removeZoneContent:function(value){this.$1B=ss.Delegate.combine(this.$1B,value);},remove_removeZoneContent:function(value){this.$1B=ss.Delegate.remove(this.$1B,value);},$1B:null,add_updateZone:function(value){this.$1C=ss.Delegate.combine(this.$1C,value);},remove_updateZone:function(value){this.$1C=ss.Delegate.remove(this.$1C,value);},$1C:null,add_resizeZone:function(value){this.$1D=ss.Delegate.combine(this.$1D,value);},remove_resizeZone:function(value){this.$1D=ss.Delegate.remove(this.$1D,value);},$1D:null,get_model:function(){return this.$17;},get_dashboardModel:function(){return this.$16;},get_visualModel:function(){if(this.get_zoneType()==='viz'){return this.$17;}return null;},get_zoneType:function(){return this.$1F(this.get_zonePresModel());},get_height:function(){return this.get_zonePresModel().h;},get_width:function(){return this.get_zonePresModel().w;},get_x:function(){return this.get_zonePresModel().x;},get_y:function(){return this.get_zonePresModel().y;},get_zoneContentRect:function(){return tab.$create_RectXY(this.get_x(),this.get_y(),this.get_width(),this.get_height());},get_zoneId:function(){return this.get_zonePresModel().zoneId;},get_worksheetName:function(){return this.get_zonePresModel().worksheet;},get_contentType:function(){return tab.ZoneModel.typeOfContent(this.get_zonePresModel());},get_zonePresModel:function(){return this.presModel;},get_backgroundColor:function(){if(ss.isValue(this.get_zonePresModel().bgColor)){return tab.ColorModel.convertColorForCanvas(this.get_zonePresModel().bgColor);}return null;},get_relativeZoneZIndex:function(){return this.get_zonePresModel().zoneZOrder+1;},get_associatedSheet:function(){return this.get_zonePresModel().sheet;},get_isDependentOnViz:function(){switch(this.get_zoneType()){case 'viz':case 'color':case 'shape':case 'size':case 'map':return true;}return false;},get_hasBorder:function(){return ss.isValue(this.get_zonePresModel().styledBox)&&this.get_zonePresModel().styledBox.borderStyle!=='bs-none'&&ss.isValue(this.get_zonePresModel().styledBox.uw);},raiseRemoveZoneContent:function(){this.raiseEvent(this.$1B);},update:function(zonePresModel){if(ss.isValue(zonePresModel)){if(!this.$20(zonePresModel)){this.raiseEvent(this.$1D);}if(ss.isValue(zonePresModel.presModelHolder)){if(!ss.isValue(this.$18)){this.$18=new tab.ZoneContentWrapperModel(this);}var $0=tab.ZoneModel.typeOfContent(zonePresModel);var $1=true;if($0===tab.ZoneModel.$6){var $2=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$6);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.VisualModel(this.$18);this.$21(this.$17);}var $3=this.$17;$3.update($2);}else if($0===tab.ZoneModel.$7){var $4=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$7);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.TextRegionModel(this.$18,tab.ZoneModel.$7);this.$21(this.$17);}var $5=this.$17;$5.update($4);}else if($0===tab.ZoneModel.$8){var $6=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$8);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.TextRegionModel(this.$18,tab.ZoneModel.$8);this.$21(this.$17);}var $7=this.$17;$7.update($6);}else if($0===tab.ZoneModel.$13){var $8=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$13);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.QuickFilterModel(this.$18);this.$21(this.$17);}var $9=tab.JsonUtil.parseJson(zonePresModel.frameJson);var $A=this.$17;$A.update($8,$9);}else if($0===tab.ZoneModel.$9){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var $B=tab.ZoneModel.getContent(zonePresModel,$0);if(ss.isNullOrUndefined(this.$17)){var $D=this.$1F(zonePresModel);this.$17=new tab.QuantitativeColorLegendModel(this.$18,$0);this.$21(this.$17);}var $C=this.$17;$C.update($B);}}else if($0===tab.ZoneModel.$A||$0===tab.ZoneModel.$B||$0===tab.ZoneModel.$C||$0===tab.ZoneModel.$D){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var $E=tab.ZoneModel.getContent(zonePresModel,$0);if(ss.isNullOrUndefined(this.$17)){var $10=this.$1F(zonePresModel);this.$17=new tab.CategoricalLegendModel(this.$18,$0,tab.ZoneModel.$1E($10));this.$21(this.$17);}var $F=this.$17;$F.update($E);}}else if($0===tab.ZoneModel.$E){var $11=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$E);var $12=tab.JsonUtil.parseJson($11.parameterCtrlJson);$11.legacyPresModel=$12;if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.ParameterCtrlModel(this.$18);this.$21(this.$17);}var $13=tab.JsonUtil.parseJson(zonePresModel.frameJson);var $14=this.$17;$14.update($11,$13);}else if($0===tab.ZoneModel.$F){var $15=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$F);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.PageModel(this.$18);this.$21(this.$17);}var $16=tab.JsonUtil.parseJson(zonePresModel.frameJson);var $17=this.$17;$17.update($15,$16);}else if($0===tab.ZoneModel.$14){var $18=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$14);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.FlipboardNavigatorModel(this.$18);this.$21(this.$17);}var $19=this.$17;$19.update($18);}else if($0===tab.ZoneModel.$15){var $1A=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$15);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.FlipboardModel(this.$18);this.$21(this.$17);}var $1B=this.$17;$1B.update($1A);}else if($0===tab.ZoneModel.$10){var $1C=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$10);if(Type.canCast($1C,String)){var $1F=$1C;$1C=tab.JsonUtil.parseJson($1F);}var $1D=$1C;if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.LegacyLegendModel(this.$18);this.$21(this.$17);}var $1E=this.$17;$1E.update($1D);}else if($0===tab.ZoneModel.$12){var $20=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$12);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.WebZoneModel(this.$18);this.$21(this.$17);}var $21=this.$17;$21.update($20);}else if($0===tab.ZoneModel.$11){var $22=tab.ZoneModel.getContent(zonePresModel,tab.ZoneModel.$11);if(ss.isNullOrUndefined(this.$17)){this.$17=new tab.ImageZoneModel(this.$18);this.$21(this.$17);}var $23=this.$17;$23.update($22);}else{$1=false;}if($1){this.$22();}}else{if(zonePresModel.zoneType==='filter'){if(zonePresModel.frameJson!==this.get_zonePresModel().frameJson){var $24=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),this.get_worksheetName());$24.set_shouldUpdateFilters(true);}}}}this.swapAndCopyPresModel(zonePresModel);this.raiseEvent(this.$1C);},$1F:function($p0){if(ss.isValue($p0)){return $p0.zoneType;}return 'invalid';},$20:function($p0){if(ss.isValue(this.get_presModel())){return $p0.h===this.get_height()&&$p0.w===this.get_width()&&$p0.x===this.get_x()&&$p0.y===this.get_y();}return false;},borderWidth:function(){var $0=0;if(this.get_hasBorder()){$0=this.get_zonePresModel().styledBox.uw;}return $0;},$21:function($p0){this.raiseEvent(this.$19,$p0);},$22:function(){this.raiseEvent(this.$1A);}}
tab.ZoneContentWrapperModel=function(parent){tab.ZoneContentWrapperModel.initializeBase(this,[parent,new tab.PresModelPathItem('presModelHolder')]);}
tab.ZoneContentWrapperModel.prototype={get_zone:function(){return Type.safeCast(this.get_parent(),tab.ZoneModel);}}
tab.ShapeModel=function(shapePalette,shapeType){this.$0=shapePalette;this.$1=shapeType;}
tab.ShapeModel.fromString=function(shapeName){var $0=new RegExp('^(:([^\\/]+)\\/)?([^\\/]+)$');var $1=$0.exec(shapeName);if(ss.isNullOrUndefined($1)){return null;}var $2=$1[2];var $3=$1[3];if(ss.isNullOrUndefined($3)){return null;}var $4=null;if(ss.isValue($2)){if($2==='filled'){$4='filled';}else{return null;}}var $5=$3;return new tab.ShapeModel($4,$5);}
tab.ShapeModel.prototype={$0:null,$1:null,get_palette:function(){return this.$0;},get_shapeType:function(){return this.$1;},equals:function(selectedShape){return ss.isValue(selectedShape)&&this.$0===selectedShape.$0&&this.$1===selectedShape.$1;},toString:function(){if(ss.isNullOrUndefined(this.$0)){return this.get_shapeType();}return ':'+this.get_palette()+'/'+this.get_shapeType();}}
tab.TextRegionModel=function(parent,presModelKey){tab.TextRegionModel.initializeBase(this,[parent,new tab.PresModelPathItem(presModelKey)]);}
tab.TextRegionModel.prototype={add_newText:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_newText:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,get_hAlign:function(){return this.get_$7().halign;},get_html:function(){return this.get_$7().html;},get_orientation:function(){return this.get_$7().orientation;},get_styledBox:function(){return this.get_$7().styledBox;},get_vAlign:function(){return this.get_$7().valign;},get_$7:function(){return this.presModel;},update:function(textRegionPresModel){this.simpleSwapToUpdate(textRegionPresModel,this.$6);}}
tab.QuickFilterModel=function(parent){tab.QuickFilterModel.initializeBase(this,[parent,new tab.PresModelPathItem('quickFilter')]);}
tab.QuickFilterModel.prototype={$6:null,$7:null,$8:null,add_newQuickFilter:function(value){this.$9=ss.Delegate.combine(this.$9,value);},remove_newQuickFilter:function(value){this.$9=ss.Delegate.remove(this.$9,value);},$9:null,get_quickFilterTitle:function(){return this.get_quickFilterPresModel().quickFilterTitle;},get_quickFilterCommands:function(){return this.get_quickFilterPresModel().quickFilterCommands;},get_quickFilterModeMatrix:function(){var $0=tab.FeatureParamsLookup.getBool(tab.FeatureParam.newFilter);if(ss.isValue($0)&&$0){return this.$A();}else{return null;}},get_quickFilterPresModel:function(){return this.presModel;},get_zone:function(){return this.get_zoneModel().get_presModel();},get_frame:function(){return this.$6;},get_zoneModel:function(){return (this.get_parent()).get_zone();},update:function(newQuickFilterPresModel,newFrame){this.$6=newFrame;if(this.isNewPresModelSameAsOld(newQuickFilterPresModel)){return;}if(ss.isValue(newQuickFilterPresModel)&&ss.isValue(newQuickFilterPresModel.quickFilterTitle)){this.$7=new tab.TextRegionModel(this,'quickFilterTitle');}this.$7.update(newQuickFilterPresModel.quickFilterTitle);if(ss.isValue(newQuickFilterPresModel)&&ss.isValue(newQuickFilterPresModel.quickFilterCommands)){this.$8=new tab.CommandsModel(this);}this.$8.update(newQuickFilterPresModel.quickFilterCommands);this.simpleSwapToUpdate(newQuickFilterPresModel,this.$9,newQuickFilterPresModel);},$A:function(){var $0=[];var $1=['year','qtr','month','day','hour','minute','second','week','weekday','month-year','mdy','none','trunc-year','trunc-qtr','trunc-month','trunc-week','trunc-day','trunc-hour','trunc-minute','trunc-second'];var $2=['check-list','radio-list','dropdown','slider','pattern','type-in-list','check-dropdown'];var $3=['min-max','min-only','max-only','rel-date','rel-pick'];var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $4=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($2);while($enum2.moveNext()){var $5=$enum2.current;var $6={};$6.aggregation=$4;$6.categoricalMode=$5;$0.add($6);}var $enum3=ss.IEnumerator.getEnumerator($3);while($enum3.moveNext()){var $7=$enum3.current;var $8={};$8.aggregation=$4;$8.quantitativeMode=$7;$0.add($8);}}return $0;}}
tab.ZonesModel=function(parent){tab.ZonesModel.initializeBase(this,[parent,new tab.PresModelPathItem('zones')]);this.set_zonePresModels({});}
tab.ZonesModel.$8=function($p0){return 'z_'+$p0;}
tab.ZonesModel.prototype={$6:null,add_newZone:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newZone:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_zoneModels:function(){var $0=[];var $dict1=this.$6;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};$0.add($1.value);}return $0;},get_zonePresModels:function(){return this.presModel;},set_zonePresModels:function(value){this.presModel=value;return value;},getZone:function(zoneId){return this.$6[tab.ZonesModel.$8(zoneId)];},hasZone:function(zoneId){return Object.keyExists(this.$6,tab.ZonesModel.$8(zoneId));},update:function(presModels){this.$A('Zones before update: ');if(!ss.isValue(this.$6)){this.$6={};}this.$9(presModels);var $dict1=presModels;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;if(ss.isValue($1)){var $2=$1.zoneId;try{var $3=tab.ZonesModel.$8($2);if(!ss.isValue(this.$6[$3])){var $4=new tab.ZoneModel(this,this.get_parent(),$2);this.$6[$3]=$4;this.raiseEvent(this.$7,this.$6[$3]);}this.$6[$3].update($1);}catch($5){}}}this.swapAndCopyPresModel(presModels);this.$A('Zones after update: ');},$9:function($p0){var $dict1=this.$6;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;var $2=$p0[$1.get_zoneId().toString()];if(ss.isNull($2)){var $3=$1.get_zoneId().toString();delete $p0[$3];delete this.get_zonePresModels()[$3];this.removeZone($1);continue;}if(ss.isValue($2)&&$1.get_zoneType()!==$2.zoneType){this.removeZone($1);continue;}if(ss.isValue($2)&&ss.isValue($2.presModelHolder)&&$1.get_contentType()!==tab.ZoneModel.typeOfContent($2)){this.removeZone($1);continue;}}},removeZone:function($p0){$p0.raiseRemoveZoneContent();delete this.$6[tab.ZonesModel.$8($p0.get_zoneId())];},$A:function($p0){var $0=new ss.StringBuilder();$0.appendLine($p0);var $dict1=this.get_zonePresModels();for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};$0.append('[ ');$0.append($1.value.zoneId);$0.append(' ');$0.append($1.value.zoneType);$0.append(' ] ');$0.appendLine();}}}
tab.ExportServerCommands=function(){}
tab.ExportServerCommands.exportImage=function(sheetName,dialogData){var $0={};$0.commandNamespace='tabsrv';$0.commandName='png-export-server';$0.commandParams={};if(ss.isValue(sheetName)){$0.commandParams['sheet']=sheetName;}tab.ServerCommands.executeServerCommand($0,'immediately',function($p1_0){
var $1_0=$p1_0;var $1_1=tab.CommandController.get().get_legacySession();$1_1.openDownload($1_1.formatSessionTempfileReference($1_0.tempfileKey,true,true),dialogData);},null);}
tab.SessionServerCommands=function(){}
tab.SessionServerCommands.destroySessionAndForward=function(window,forwardUrl){var $0=tab.CommandController.get().get_legacySession();var $1=$0.$12(function(){
tab.WindowHelper.setLocationHref(window,forwardUrl);},function(){
},function(){
},'immediately');var $2={};$2.type='DELETE';$2.url=$0.$C('destroy');$2.headers={Accept:'text/javascript'};$2.dataType='json';$0.$10($2,$1);}
tab.ToolbarServerCommands=function(){}
tab.ToolbarServerCommands.setAutoUpdate=function(state){var $0={};$0.commandNamespace='tabsrv';$0.commandName='set-auto-update-server';var $1={};$1['state']=state;$0.commandParams=$1;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.ToolbarServerCommands.refreshData=function(){var $0={};$0.commandNamespace='tabsrv';$0.commandName='refresh-data-server';var $1={};$1['deltaTime']=0;$1['shouldRefreshDs']=true;$0.commandParams=$1;tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.ToolbarServerCommands.toggleMarks=function(){var $0={};$0.commandNamespace='tabdoc';$0.commandName='toggle-mark-labels';tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.ParameterServerCommands=function(){}
tab.ParameterServerCommands.setParameterValue=function(fieldName,value,successCallback,errorCallback){var $0={};$0.commandNamespace='tabdoc';$0.commandName='set-parameter-value';$0.commandParams=tab.ParameterServerCommands.$0(fieldName,value);tab.ServerCommands.executeServerCommand($0,'immediately',successCallback,errorCallback);}
tab.ParameterServerCommands.$0=function($p0,$p1){var $0={};$0['globalFieldName']=$p0;$0['valueString']=$p1;return $0;}
tab.PageServerCommands=function(){}
tab.PageServerCommands.changePage=function(pageNumber,sheetID){var $0={};$0.commandNamespace='tabdoc';$0.commandName='change-page';$0.commandParams=tab.PageServerCommands.$0(pageNumber,sheetID);tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.PageServerCommands.syncedChangePage=function(dashboard,zoneId,pageNumber){var $0={};$0.commandNamespace='tabsrv';$0.commandName='synced-change-page-server';$0.commandParams=tab.PageServerCommands.$1(dashboard,zoneId,pageNumber);tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.PageServerCommands.toggleTrails=function(sheetID){var $0={};$0.commandNamespace='tabdoc';$0.commandName='page-toggle-trails';$0.commandParams=tab.PageServerCommands.$2(sheetID);tab.ServerCommands.executeServerCommand($0,'afterDelay');}
tab.PageServerCommands.$0=function($p0,$p1){var $0={};tab.CommandUtils.injectVizID($0,$p1);$0['pageNumber']=$p0;return $0;}
tab.PageServerCommands.$1=function($p0,$p1,$p2){var $0={};$0['sheet']=$p0;$0['zoneId']=$p1;$0['pageNumber']=$p2;return $0;}
tab.PageServerCommands.$2=function($p0){var $0={};tab.CommandUtils.injectVizID($0,$p0);return $0;}
tab.SaveServerCommands=function(){}
tab.SaveServerCommands.saveWorkbook=function(successCallback){var $0=function($p1_0){
tab.WorldUpdateServerCommands.getWorldUpdate();if(ss.isValue(successCallback)){successCallback($p1_0);}};tab.CommandController.get().SaveWorkbook(tsConfig.current_workbook_name,tsConfig.current_project_id,tsConfig.showTabsWorkbook,$0);}
tab.SaveServerCommands.saveWorkbookAs=function(name,project,showTabs,embedCredentials,noOverwrite,successCallback,errorCallback){tab.CommandController.get().SaveWorkbookAs(name,project.get_id(),showTabs,embedCredentials,noOverwrite,successCallback,errorCallback);}
tab.SaveServerCommands.transitionSessionAfterLogon=function(successCallback){tab.CommandController.get().$16(successCallback);}
tab.SortServerCommands=function(){}
tab.SortServerCommands.sortFromIndicator=function(mouse,scrollAmount,sheetID){var $0={};$0.commandNamespace='tabdoc';$0.commandName='sort-from-indicator';$0.commandParams=tab.SortServerCommands.$0(mouse,scrollAmount,sheetID);tab.ServerCommands.executeServerCommand($0,'afterDelay');}
tab.SortServerCommands.$0=function($p0,$p1,$p2){var $0={};tab.CommandUtils.injectVizID($0,$p2);$0['vizLocation']=tab.JsonUtil.toJson($p0);$0['scrollOffset']=tab.JsonUtil.toJson($p1);return $0;}
tab.WorkgroupServerCommands=function(){}
tab.WorkgroupServerCommands.getWritableProjects=function(callback){var $0={};$0.type='GET';$0.dataType='xml';$0.url=tsConfig.site_root+'/projects.xml?all=true&intent=write';$0.success=function($p1_0,$p1_1,$p1_2){
callback(tab.WorkgroupServerCommands.$0($p1_0));};tab.XhrUtil.helper($0);}
tab.WorkgroupServerCommands.getSchedules=function(callback){var $0={};$0.type='GET';$0.dataType='xml';$0.url=tsConfig.site_root+'/schedules?format=xml';$0.success=function($p1_0,$p1_1,$p1_2){
callback(tab.WorkgroupServerCommands.$1($p1_0));};tab.XhrUtil.helper($0);}
tab.WorkgroupServerCommands.getUserEmail=function(callback){var $0=tab.MiscUtil.encodeForWG(tsConfig.current_user_qualified_name);var $1={};$1.type='GET';$1.dataType='xml';$1.url=tsConfig.site_root+'/users/'+$0+'?basic=true&format=xml';$1.success=function($p1_0,$p1_1,$p1_2){
callback(tab.WorkgroupServerCommands.$2($p1_0));};tab.XhrUtil.helper($1);}
tab.WorkgroupServerCommands.setUserEmail=function(email,success,failure){var $0={};$0.type='POST';$0.dataType='xml';$0.data={email:email,submit:'Set',authenticity_token:tsConfig.auth_token};$0.url=tsConfig.site_root+'/update_email/users/'+tsConfig.current_user_id;$0.success=function($p1_0,$p1_1,$p1_2){
success();};$0.error=function($p1_0,$p1_1,$p1_2){
failure($p1_0.responseText);};tab.XhrUtil.helper($0);}
tab.WorkgroupServerCommands.createSubscription=function(subject,workbook,schedule,success,failure){var $0={};$0.type='POST';$0.dataType='xml';var $1={subject:$.trim(subject),user_id:tsConfig.current_user_id,schedule_id:schedule.get_id(),customized_view_id:tsConfig.current_custom_view_id,workbook_name:tsConfig.current_workbook_name,view_name:tsConfig.current_sheet_name,project_id:tsConfig.current_project_id,submit:'Set',authenticity_token:tsConfig.auth_token};if(workbook){$0.url=tsConfig.site_root+'/subscriptions/create/workbook/';}else{$0.url=tsConfig.site_root+'/subscriptions/create/view/';}$0.data=$1;$0.success=function($p1_0,$p1_1,$p1_2){
success();};$0.error=function($p1_0,$p1_1,$p1_2){
failure();};tab.XhrUtil.helper($0);}
tab.WorkgroupServerCommands.$0=function($p0){var $0=[];var $1=$($p0);$1.find('project').each(function($p1_0,$p1_1){
var $1_0=$($p1_1);var $1_1=new tab.ProjectModel();$1_1.set_name($1_0.find('name').text());$1_1.set_id($1_0.children('id').text());$0.add($1_1);});return $0;}
tab.WorkgroupServerCommands.$1=function($p0){var $0=[];var $1=$($p0);$1.find('schedule').each(function($p1_0,$p1_1){
var $1_0=$($p1_1);var $1_1=new tab.Schedule();$1_1.set_name($1_0.find('name').text());$1_1.set_id($1_0.children('id').text());$1_1.set_action(parseInt($1_0.children('scheduled_action').text()));$0.add($1_1);});return $0;}
tab.WorkgroupServerCommands.$2=function($p0){var $0=null;var $1=$($p0);$1.find('user').each(function($p1_0,$p1_1){
var $1_0=$($p1_1);$0=$1_0.children('email').text();if(String.isNullOrEmpty($0)){$0=null;}});return $0;}
tab.WorksheetServerCommands=function(){}
tab.WorksheetServerCommands.revert=function(){var $0=tab.CommandUtils.newSrvCommand('revert-workbook');tab.CommandController.SendCommand(tab.vqldomain$7.$7($0,'immediately'));}
tab.WorksheetServerCommands.undo=function(historyPosition){var $0=tab.CommandUtils.newDocCommand('undo');$0.commandParams=tab.WorksheetServerCommands.$0(historyPosition);tab.CommandController.SendCommand(tab.vqldomain$7.$7($0,'immediately'));}
tab.WorksheetServerCommands.redo=function(historyPosition){var $0=tab.CommandUtils.newDocCommand('redo');$0.commandParams=tab.WorksheetServerCommands.$0(historyPosition);tab.CommandController.SendCommand(tab.vqldomain$7.$7($0,'immediately'));}
tab.WorksheetServerCommands.$0=function($p0){var $0={};$0['undoPosition']=$p0;return $0;}
tab.WorldUpdateServerCommands=function(){}
tab.WorldUpdateServerCommands.getWorldUpdate=function(){var $0={};$0.commandNamespace='tabdoc';$0.commandName='get-world-update';$0.commandParams=tab.WorldUpdateServerCommands.$0();tab.ServerCommands.executeServerCommand($0,'immediately');}
tab.WorldUpdateServerCommands.$0=function(){var $0={};$0['sheet']=tsConfig.current_sheet_name;return $0;}
tab.PaneClientCommands=function(){}
tab.PaneClientCommands.setPanePrimitive=function(model,type){var $0=tab.CommandUtils.newDocCommand('set-primitive');$0.commandParams=tab.PaneClientCommands.$0(model);$0.commandParams['primitiveType']=type;tab.CommandController.SendCommand(new tab.vqldomain$7($0,'immediately',null,null));}
tab.PaneClientCommands.getDefaultShapeType=function(layer,callback){var $0=tab.CommandUtils.newDocCommand('get-default-shape');$0.commandParams=tab.PaneClientCommands.$0(layer);tab.CommandController.SendCommand(new tab.vqldomain$7($0,'none',function($p1_0){
callback((_.isString($p1_0))?tab.ShapeModel.fromString($p1_0.toString()):null);},function(){
callback(null);}));}
tab.PaneClientCommands.setDefaultShapeType=function(layer,shape){var $0=tab.CommandUtils.newDocCommand('set-default-shape');$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['shapeName']=tab.PaneClientCommands.$1(shape);tab.CommandController.SendCommand(new tab.vqldomain$7($0,'immediately',null,null));}
tab.PaneClientCommands.toggleMarkLabels=function(layer){var $0=tab.CommandUtils.newDocCommand('toggle-mark-labels');$0.commandParams={};$0.commandParams['worksheet']=tsConfig.current_sheet_name;if(ss.isValue(layer)&&layer.get_id()>0){$0.commandParams['paneSpec']=layer.get_id().toString();}tab.CommandController.SendCommand(new tab.vqldomain$7($0,'immediately',null,null));}
tab.PaneClientCommands.setMarkSize=function(layer,newSize){var $0=tab.CommandUtils.newDocCommand('set-mark-size');$0.commandParams={};$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['markScale']=newSize.toString();tab.CommandController.SendCommand(new tab.vqldomain$7($0,'immediately',null,null));}
tab.PaneClientCommands.resetTooltip=function(layer){var $0=tab.CommandUtils.newDocCommand('reset-tooltip');$0.commandParams={};$0.commandParams['worksheet']=tsConfig.current_sheet_name;if(ss.isValue(layer)&&layer.get_id()>0){$0.commandParams['paneSpec']=layer.get_id().toString();}tab.CommandController.SendCommand(new tab.vqldomain$7($0,'immediately',null,null));}
tab.PaneClientCommands.getDefaultColor=function(layer,callback){var $0=tab.CommandUtils.newDocCommand('get-default-color');$0.commandParams=tab.PaneClientCommands.$0(layer);tab.CommandController.SendCommand(new tab.vqldomain$7($0,'none',function($p1_0){
callback((_.isString($p1_0))?tab.ColorModel.fromColorCode($p1_0.toString()):null);},function(){
callback(null);}));}
tab.PaneClientCommands.setDefaultColor=function(layer,color){var $0=tab.CommandUtils.newDocCommand('set-default-color');$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['defaultColor']=color.toRgba();tab.CommandController.SendCommand(new tab.vqldomain$7($0,'immediately',null,null));}
tab.PaneClientCommands.setSteppedColor=function(layer,stepCount){var $0=tab.CommandUtils.newDocCommand('set-quantitative-color');$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['steps']=stepCount.toString();tab.CommandController.SendCommand(new tab.vqldomain$7($0,'immediately',null,null));}
tab.PaneClientCommands.reverseColor=function(layer,newValue){var $0=tab.CommandUtils.newDocCommand('set-quantitative-color');$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['isReversed']=newValue.toString();tab.CommandController.SendCommand(new tab.vqldomain$7($0,'immediately',null,null));}
tab.PaneClientCommands.setQuantColorPalette=function(layer,newPaletteName){var $0=tab.CommandUtils.newDocCommand('set-quantitative-color');$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['paletteName']=newPaletteName;tab.CommandController.SendCommand(new tab.vqldomain$7($0,'immediately',null,null));}
tab.PaneClientCommands.setCatColorPalette=function(layer,newPaletteName){var $0=tab.CommandUtils.newDocCommand('set-categorical-color');$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['paletteName']=newPaletteName;var $1=true;$0.commandParams['isInstance']=$1.toString();tab.CommandController.SendCommand(new tab.vqldomain$7($0,'immediately',null,null));}
tab.PaneClientCommands.setColorAlphaLevel=function(layer,newAlphaLevel){var $0=tab.CommandUtils.newDocCommand('change-alpha-level');$0.commandParams=tab.PaneClientCommands.$0(layer);$0.commandParams['alphaLevel']=newAlphaLevel.toString();tab.CommandController.SendCommand(new tab.vqldomain$7($0,'immediately',null,null));}
tab.PaneClientCommands.$0=function($p0){var $0={};$0['worksheet']=tsConfig.current_sheet_name;$0['paneSpec']=$p0.get_id().toString();return $0;}
tab.PaneClientCommands.$1=function($p0){if(ss.isNullOrUndefined($p0)){return null;}return $p0.toString();}
tab.SchemaClientCommands=function(){}
tab.SchemaClientCommands.addFieldToSheet=function(f,callback){var $0={};$0.commandNamespace='tabdoc';$0.commandName='add-to-sheet';$0.commandParams={};$0.commandParams['fn']=f.get_globalName();$0.commandParams['worksheet']=tsConfig.current_sheet_name;tab.CommandController.SendCommand(tab.vqldomain$7.$7($0,'immediately',function($p1_0){
callback();},function($p1_0){
callback();}));}
tab.SchemaClientCommands.$0=function($p0,$p1){var $0=tab.CommandUtils.newDocCommand($p0);var $1={};$0.commandParams={};$1['fieldVector']=$p1;$0.commandParams=$1;tab.CommandController.SendCommand(new tab.vqldomain$7($0,'immediately',null,null));}
tab.SchemaClientCommands.convertToMeasure=function(fieldNames){tab.SchemaClientCommands.$0('convert-to-measure',fieldNames);}
tab.SchemaClientCommands.convertToDimension=function(fieldNames){tab.SchemaClientCommands.$0('convert-to-dimension',fieldNames);}
tab.SelectionClientCommands=function(){}
tab.SelectionClientCommands.get_$1=function(){return tab.Logger.lazyGetLogger(tab.SelectionClientCommands);}
tab.SelectionClientCommands.setActiveZone=function(newActiveZoneID){if(!tsConfig.allow_select){return;}if(tab.SelectionClientCommands.$C(newActiveZoneID)){return;}var $0=new tab.vqldomain$6(function($p1_0){
tab.SelectionClientCommands.$D(newActiveZoneID,$p1_0);},function($p1_0,$p1_1){
tab.SelectionClientCommands.$E(newActiveZoneID,$p1_0,$p1_1);},'none');tab.CommandController.SendCommand($0);}
tab.SelectionClientCommands.selectFields=function(fieldNames,dataSourceName,callback){var $0={};$0.commandNamespace='tabdoc';$0.commandName='get-show-me';var $1={};$1['fieldVector']=fieldNames;$1['worksheet']=tsConfig.current_sheet_name;$1['datasource']=dataSourceName;$0.commandParams=$1;tab.CommandController.SendCommand(tab.vqldomain$7.$7($0,'none',function($p1_0){
tab.ModelUtils.findActiveOrDefaultVisual().get_showMeModel().forceUpdate($p1_0);tab.ModelUtils.findActiveOrDefaultVisual().get_showMeModel().set_shouldUpdate((!fieldNames.length));callback();},function($p1_0){
callback();}));}
tab.SelectionClientCommands.toggleLegendHighlight=function(zoneId,sheetID,regionPart,fieldNames,successCallback){if(!tsConfig.allow_highlight){return;}var $0=new tab.vqldomain$6(function($p1_0){
tab.SelectionClientCommands.$D(zoneId,$p1_0);},function($p1_0,$p1_1){
tab.SelectionClientCommands.$E(zoneId,$p1_0,function(){
});var $1_0={};$1_0['r']=regionPart;$1_0['legendNames']=fieldNames;tab.CommandUtils.injectVizID($1_0,sheetID);var $1_1={};$1_1.commandNamespace='tabsrv';$1_1.commandName='toggle-legend-server';$1_1.commandParams=$1_0;var $1_2=function($p2_0){
try{if(ss.isValue(successCallback)){successCallback($p2_0);}}finally{$p1_1(true);}};$p1_0.executeCommand($1_1,$1_2,function(){
$p1_1(false);});},'immediately');tab.CommandController.SendCommand($0);}
tab.SelectionClientCommands.selectRegion=function(region,selRect,action,sheetID,fieldNames){if(!tsConfig.allow_select){return;}var $0={};$0.commandNamespace='tabsrv';$0.commandName='select-region-no-return-server';$0.commandParams=tab.SelectionClientCommands.$8(selRect,region,action,sheetID,fieldNames);tab.ServerCommands.executeServerCommand($0,'afterDelay');}
tab.SelectionClientCommands.selectRegionAndDoUbertip=function(region,selRect,action,sheetID,ubertipParams){if(!tsConfig.allow_select){return;}var $0=function($p1_0){
tab.UberTipClientCommands.getUberTip(ubertipParams.get_vizRegion(),ubertipParams.get_sheetId(),ubertipParams.get_selRect(),ubertipParams.get_localUbertipInfo(),ubertipParams.get_tooltipSuccessCallback(),ubertipParams.get_tooltipFailureCallback());};var $1={};$1.commandNamespace='tabsrv';$1.commandName='select-region-no-return-server';$1.commandParams=tab.SelectionClientCommands.$8(selRect,region,action,sheetID);tab.ServerCommands.executeServerCommand($1,'afterDelay',$0,null);}
tab.SelectionClientCommands.clearAllSelections=function(sheetId){if(!tsConfig.allow_select){return;}var $0=tab.SelectionClientCommands.$4(sheetId);var $1=tab.SelectionClientCommands.$C($0);if(!$1){tab.SelectionClientCommands.setActiveZone($0);return;}var $2=new tab.vqldomain$6(function($p1_0){
if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){tab.SelectionClientCommands.$7($p1_0,null);tab.ActionUtils.executeActions(sheetId,'on-select',new Array(0),$p1_0,true);}},function($p1_0,$p1_1){
var $1_0=tab.CommandUtils.newSrvCommand('select-none');var $1_1={};tab.CommandUtils.injectVizID($1_1,sheetId);$1_0.commandParams=$1_1;$p1_0.executeCommand($1_0,function(){
$p1_1(true);},function(){
$p1_1(false);});},((tab.ApplicationModel.get_instance().get_isLocalRenderMode())?'none':'afterDelay'));tab.CommandController.SendCommand($2);}
tab.SelectionClientCommands.selectLegendItemsLocal=function(zoneId,action,selectedItems,sheetId,model,type){if(!tsConfig.allow_select){return;}var $0=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),sheetId);var $1=$0.get_selectionsModel();var $2=$1.getLegendSelection(type,model.get_legendNames());var $3=tab.SelectionUtils.resolveLegendSelection(action,selectedItems,model,$2);var $4=new tab.vqldomain$6(function($p1_0){
tab.SelectionClientCommands.$D(zoneId,$p1_0);if(!$2.isAnyLegendItemSelected()&&!$3.length){return;}var $1_0=$p1_0.makeMutablePresModel($2);$1_0.objectIds=$3;$1_0.legendSelectionInfo={};$1_0.legendSelectionInfo.legendType=model.get_legendType();$1_0.legendSelectionInfo.legendColumns=model.get_legendNames();tab.SelectionClientCommands.$A($p1_0,$1.get_tupleSelection(),$0);tab.SelectionClientCommands.$A($p1_0,$1.get_nodeSelection(),$0);var $enum1=ss.IEnumerator.getEnumerator($1.get_allLegendSelections());while($enum1.moveNext()){var $1_1=$enum1.current;if($1_1!==$2){tab.SelectionClientCommands.$A($p1_0,$1_1,$0);}}tab.SelectionClientCommands.$7($p1_0,sheetId);tab.SelectionClientCommands.$6($3,model,$0,$p1_0);},function($p1_0,$p1_1){
if(!$2.isAnyLegendItemSelected()&&!$3.length){tab.SelectionClientCommands.$E(zoneId,$p1_0,function(){
$p1_1(true);});return;}var $1_0={};$1_0.commandNamespace='tabdoc';$1_0.commandName='select-legend-items';$1_0.commandParams=tab.SelectionClientCommands.$9($3,sheetId,model,type,zoneId);$p1_0.executeCommand($1_0,function(){
$p1_1(true);},function(){
$p1_1(false);});},'none');tab.CommandController.SendCommand($4);}
tab.SelectionClientCommands.selectNodeLocal=function(region,coords,action,visualListModel,selectedNode,sheetId){if(!tsConfig.allow_select){return;}var $0=tab.SelectionClientCommands.$4(sheetId);var $1=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),sheetId);var $2=$1.get_selectionsModel();var $3=$2.get_nodeSelection();var $4=(tab.ActionUtils.willActionCauseTabChange(sheetId,'on-select'))?'afterDelay':'none';var $5=new tab.vqldomain$6(function($p1_0){
tab.SelectionClientCommands.$D($0,$p1_0);var $1_0=$p1_0.makeMutablePresModel($3);tab.SelectionUtils.resolveNodeSelection(action,visualListModel.get_groupItemNodes(),selectedNode,$3,$1_0);var $1_1=action!=='toggle'&&action!=='range';var $1_2=$2.get_tupleSelection().get_ids();if($1_1){tab.SelectionClientCommands.$A($p1_0,$2.get_tupleSelection(),$1);$1_2=new Array(0);}var $enum1=ss.IEnumerator.getEnumerator($2.get_allLegendSelections());while($enum1.moveNext()){var $1_4=$enum1.current;tab.SelectionClientCommands.$A($p1_0,$1_4,$1);}tab.SelectionClientCommands.$7($p1_0,sheetId);var $1_3=tab.BrushingComputer.getTuplesAssociatedWithSelectedNodes($1,$1_0.selectedNodes);$1.$29($1_3);tab.ActionUtils.executeActions(sheetId,'on-select',$1.getEffectiveSelectedTuples($1_2),$p1_0,true);},function($p1_0,$p1_1){
tab.SelectionClientCommands.$E($0,$p1_0,function(){
});var $1_0=tab.CommandUtils.newSrvCommand('select-region-no-return-server');var $1_1=2;var $1_2=tab.RectXYUtil.shiftCoordsTowardsCenter(coords,tab.RecordCast.rectJsonAsRectXY(selectedNode.pixelExtents),$1_1);var $1_3=tab.$create_RectXY($1_2.x,$1_2.y,0,0);$1_0.commandParams=tab.SelectionClientCommands.$8($1_3,region,action,sheetId);$p1_0.executeCommand($1_0,function(){
$p1_1(true);},function(){
$p1_1(false);});},$4);tab.CommandController.SendCommand($5);}
tab.SelectionClientCommands.selectMarksLocal=function(selectedMarkIDs,sheetId,action,isAreaSelection,ubertipParams){if(!tsConfig.allow_select){return;}var $0=tab.SelectionClientCommands.$4(sheetId);if(tab.MiscUtil.isNullOrEmpty(selectedMarkIDs)){tab.SelectionClientCommands.clearAllSelections(sheetId);return;}var $1=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),sheetId);var $2=$1.get_selectionsModel();var $3=$2.get_tupleSelection();var $4=(tab.ActionUtils.willActionCauseTabChange(sheetId,'on-select'))?'afterDelay':'none';var $5=new tab.vqldomain$6(function($p1_0){
tab.SelectionClientCommands.$D($0,$p1_0);var $1_0=tab.SelectionUtils.resolveMarkSelection(action,selectedMarkIDs,$3,isAreaSelection);var $1_1=$p1_0.makeMutablePresModel($3);$1_1.objectIds=$1_0;if(action!=='toggle'&&action!=='range'){tab.SelectionClientCommands.$A($p1_0,$2.get_nodeSelection(),$1);}var $enum1=ss.IEnumerator.getEnumerator($2.get_allLegendSelections());while($enum1.moveNext()){var $1_2=$enum1.current;tab.SelectionClientCommands.$A($p1_0,$1_2,$1);}tab.SelectionClientCommands.$7($p1_0,sheetId);tab.ActionUtils.executeActions(sheetId,'on-select',$1.getEffectiveSelectedTuples($1_0),$p1_0,true);},function($p1_0,$p1_1){
var $1_0={};$1_0.commandNamespace='tabdoc';$1_0.commandName='select';$1_0.commandParams=tab.SelectionClientCommands.$B(selectedMarkIDs,'tuples',action,sheetId);if(ss.isValue(ubertipParams)){tab.SelectionClientCommands.$5($p1_0,$p1_1,$1_0,ubertipParams);}else{$p1_0.executeCommand($1_0,function(){
$p1_1(true);},function(){
$p1_1(false);});}},$4);tab.CommandController.SendCommand($5);}
tab.SelectionClientCommands.$2=function($p0,$p1){if(!$p0.get_isBrushingComputed()){return;}var $dict1=tab.ModelUtils.getVisualModels(tab.ApplicationModel.get_instance());for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;var $2=$0.key;var $3=$p1.makeMutablePresModel($1.get_brushingsModel().get_tupleSelection());$3.objectIds=$p0.getTupleBrushing($2);var $4=$p1.makeMutablePresModel($1.get_brushingsModel().get_nodeSelection());$4.selectedNodes=$p0.getNodeBrushing($2);var $5=$p0.getLegendBrushing($2);var $enum3=ss.IEnumerator.getEnumerator($1.get_brushingsModel().get_allLegendSelections());while($enum3.moveNext()){var $6=$enum3.current;var $7=$p1.makeMutablePresModel($6);var $8=new Array(0);if(ss.isValue($5[$7.legendSelectionInfo.legendType])){$8=$5[$7.legendSelectionInfo.legendType];}$7.objectIds=$8;}}}
tab.SelectionClientCommands.$3=function($p0){var $dict1=tab.ModelUtils.getVisualModels(tab.ApplicationModel.get_instance());for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;var $2=$p0.makeMutablePresModel($1.get_brushingsModel().get_tupleSelection());$2.objectIds=new Array(0);var $3=$p0.makeMutablePresModel($1.get_brushingsModel().get_nodeSelection());$3.selectedNodes=new Array(0);var $enum3=ss.IEnumerator.getEnumerator($1.get_brushingsModel().get_allLegendSelections());while($enum3.moveNext()){var $4=$enum3.current;var $5=$p0.makeMutablePresModel($4);var $6=new Array(0);$5.objectIds=$6;}}}
tab.SelectionClientCommands.$4=function($p0){var $0=tab.ModelUtils.findContentDashboard();var $enum1=ss.IEnumerator.getEnumerator($0.get_zoneModels());while($enum1.moveNext()){var $1=$enum1.current;if($1.get_zoneType()==='viz'&&$1.get_worksheetName()===$p0){return $1.get_zoneId();}}return -1;}
tab.SelectionClientCommands.$5=function($p0,$p1,$p2,$p3){var $0=function($p1_0){
try{tab.UberTipClientCommands.getUberTip($p3.get_vizRegion(),$p3.get_sheetId(),$p3.get_selRect(),$p3.get_localUbertipInfo(),$p3.get_tooltipSuccessCallback(),$p3.get_tooltipFailureCallback());}finally{$p1(true);}};var $1=function(){
$p1(false);};$p0.executeCommand($p2,$0,$1);}
tab.SelectionClientCommands.$6=function($p0,$p1,$p2,$p3){var $0=tab.BrushingComputer.computeFromLegend($p2,$p0,$p1);tab.SelectionClientCommands.$2($0,$p3);}
tab.SelectionClientCommands.$7=function($p0,$p1){var $0=tab.ModelUtils.getVisualModels(tab.ApplicationModel.get_instance());var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $2=$1.value;var $3=$1.key;if($3!==$p1){var $4=tab.ModelUtils.findContentDashboard();if(!tab.ActionUtils.isFilterSource($4,$3)){var $enum3=ss.IEnumerator.getEnumerator($2.get_selectionsModel().get_selectionModels());while($enum3.moveNext()){var $5=$enum3.current;var $6=$p0.makeMutablePresModel($5);$6.objectIds=new Array(0);$6.selectedNodes=new Array(0);$5.setOverriddenTupleIds(new Array(0));}}else{}}}}
tab.SelectionClientCommands.$8=function($p0,$p1,$p2,$p3,$p4){var $0={};tab.CommandUtils.injectVizID($0,$p3);var $1=new tab.VizRegionRect();$1.x=Math.round($p0.x);$1.y=Math.round($p0.y);$1.w=Math.round(($p0.w||0));$1.h=Math.round(($p0.h||0));$1.r=$p1;if(ss.isValue($p4)){$1.fieldVector=$p4;}$0['vizRegionRect']=$1;$0['mouseAction']=$p2;return $0;}
tab.SelectionClientCommands.$9=function($p0,$p1,$p2,$p3,$p4){var $0={};tab.CommandUtils.injectVizID($0,$p1);$0['legendNames']=$p2.get_legendNames();$0['legendType']=$p3;$0['objectIds']=$p0;$0['zoneId']=$p4;return $0;}
tab.SelectionClientCommands.$A=function($p0,$p1,$p2){if(ss.isValue($p1)){var $0=$p0.makeMutablePresModel($p1);$0.objectIds=new Array(0);$0.selectedNodes=new Array(0);if($p1.get_selectionType()==='nodes'){$p2.$2A();}}}
tab.SelectionClientCommands.$B=function($p0,$p1,$p2,$p3){var $0={};tab.CommandUtils.injectVizID($0,$p3);var $1={};$1.objectIds=$p0;$1.selectionType=$p1;$0['selection']=$1;$0['selectOptions']=tab.SelectionClientCommands.$0[$p2];return $0;}
tab.SelectionClientCommands.$C=function($p0){return $p0===tab.ModelUtils.findContentDashboard().get_activeZoneID();}
tab.SelectionClientCommands.$D=function($p0,$p1){var $0=tab.ModelUtils.findContentDashboard();var $1=$p1.makeMutablePresModel($0);$1.activeZoneId=$p0;}
tab.SelectionClientCommands.$E=function($p0,$p1,$p2){var $0=tab.CommandUtils.newDocCommand('set-active-zone');var $1={};$1['dashboard']=tsConfig.current_sheet_name;$1['zoneId']=$p0;$0.commandParams=$1;$p1.executeCommand($0,function(){
$p2(true);},function(){
$p2(false);});}
tab.ShelfClientCommands=function(){}
tab.ShelfClientCommands.setItemEncodingType=function(sm,pm,et){var $0={};$0.commandNamespace='tabdoc';$0.commandName='set-item-encoding-type';$0.commandParams={};tab.CommandUtils.injectVizID($0.commandParams,tsConfig.current_sheet_name);$0.commandParams['paneSpec']=sm.get_paneId().toString();$0.commandParams['position']=sm.get_pills().indexOf(pm).toString();$0.commandParams['encodingType']=et;$0.commandParams['shelfType']=sm.get_shelfType();tab.CommandController.SendCommand(new tab.vqldomain$7($0,'immediately',null,null));}
tab.ShelfClientCommands.startDrag=function(f,t,activePaneSpecId,callback){var $0={};$0.commandNamespace='tabdoc';$0.commandName='get-drag-pres-model';$0.commandParams={};$0.commandParams['worksheet']=tsConfig.current_sheet_name;$0.commandParams['isRightDrag']=tab.JsonUtil.toJson(false);if(ss.isValue(activePaneSpecId)){$0.commandParams['paneSpec']=tab.JsonUtil.toJson(activePaneSpecId);}tab.ShelfClientCommands.$3($0.commandParams,f,t);var $1=function($p1_0){
callback($p1_0);};tab.CommandController.SendCommand(tab.vqldomain$7.$7($0,'none',$1));}
tab.ShelfClientCommands.drillOnPill=function(shelf,p,index){var $0=new tab.vqldomain$9(function($p1_0){
var $1_0=$p1_0.makeMutablePresModel(shelf);var $1_1=$p1_0.makeMutablePresModel(p);$1_1.shouldDrill=!p.get_shouldDrill();if(p.get_shouldDrill()){var $1_2=tab.ApplicationModel.get_instance().get_workbook().get_dataSchema();var $1_3=$1_2.dataSourceForField(p.get_column());var $1_4={};$1_4.shelfType='encoding-shelf';$1_4.shelfDropAction='insert';$1_4.encodingType=p.get_encodingType();$1_4.isOverride=true;if(ss.isValue($1_3)){var $1_5=$1_3.findColumnDrillChain(p.get_column());if(ss.isValue($1_5)&&$1_5.length>0){var $1_6=$1_5[0];var $1_7={};$1_7.fn=$1_6.get_globalName();$1_7.displayText=$1_6.get_description();$1_7.hasDrill=false;$1_4.shelfPosIndex=index+1;tab.ShelfClientCommands.$7($1_0,$1_7,$1_4,0);}}}else{for(var $1_8=shelf.get_pills().indexOf(p)+1;$1_8<shelf.get_pills().length;$1_8++){var $1_9=shelf.get_pills()[$1_8];tab.ShelfClientCommands.$8($1_0,$1_9.get_item());if(!$1_9.get_hasDrill()){break;}}}},function($p1_0,$p1_1){
var $1_0={};$1_0.commandName='level-drill';$1_0.commandNamespace='tabdoc';$1_0.commandParams={};$1_0.commandParams['worksheet']=tsConfig.current_sheet_name;$1_0.commandParams['shelfType']=shelf.get_shelfType();$1_0.commandParams['position']=index.toString();$1_0.commandParams['drillDown']=tab.JsonUtil.toJson(p.get_shouldDrill());if(shelf.get_shelfType()==='encoding-shelf'){$1_0.commandParams['paneSpec']=shelf.get_paneId().toString();}$p1_0.executeCommand($1_0,function(){
$p1_1(true);},function(){
$p1_1(false);});},'immediately');tab.CommandController.SendCommand($0);}
tab.ShelfClientCommands.removeShelfPill=function(shelf,p){var $0=new tab.vqldomain$9(function($p1_0){
tab.ShelfClientCommands.$8($p1_0.makeMutablePresModel(shelf),p.get_item());},function($p1_0,$p1_1){
var $1_0=tab.ShelfClientCommands.$0();$1_0.commandName='drop-nowhere';var $1_1=$1_0.commandParams;$1_1['paneSpec']=shelf.get_paneId();$1_1['dragDescription']=shelf.get_shelfType();tab.ShelfClientCommands.$2($1_1,p.get_column(),p.get_encodingType());$1_1['shelfSelection']=[p.get_item().shelfItemId];$1_1['dragSource']='drag-drop-viz';var $1_2=$1_1['shelfDragSourcePosition'];$1_2.shelfType=shelf.get_shelfType();$1_2.shelfPosIndex=shelf.get_pills().indexOf(p);$1_2.shelfDropAction='replace';$p1_0.executeCommand($1_0,function(){
$p1_1(true);},function(){
$p1_1(false);});},'immediately');tab.CommandController.SendCommand($0);}
tab.ShelfClientCommands.replaceShelfPill=function(srcShelf,src,targetShelf,target,dropPos,isRightDrop){var $0=tab.ShelfClientCommands.$0();var $1=$0.commandParams;var $2=new tab.vqldomain$9(function($p1_0){
var $1_0=srcShelf.get_pills().indexOf(src);var $1_1=dropPos.shelfPosIndex;tab.ShelfClientCommands.$2($1,src.get_column(),src.get_encodingType());$1['shelfSelection']=[src.get_item().shelfItemId];$1['dragSource']='drag-drop-viz';var $1_2=$1['shelfDragSourcePosition'];$1_2.shelfType=srcShelf.get_shelfType();$1_2.shelfPosIndex=$1_0;$1_2.shelfDropAction='replace';$1['paneSpec']=targetShelf.get_paneId();$1['dropTarget']='drag-drop-viz';if(ss.isNullOrUndefined(dropPos)){dropPos=$1['shelfDropTargetPosition'];dropPos.shelfType=targetShelf.get_shelfType();dropPos.shelfPosIndex=$1_1;dropPos.encodingType=target.get_encodingType();dropPos.shelfDropAction='replace';}else{$1['shelfDropTargetPosition']=dropPos;}if(isRightDrop){$1['isCopy']=tab.JsonUtil.toJson(true);}else{var $1_5=$p1_0.makeMutablePresModel(srcShelf);tab.ShelfClientCommands.$8($1_5,src.get_item());}var $1_3=$p1_0.makeMutablePresModel(targetShelf);tab.ShelfClientCommands.$8($1_3,target.get_item());var $1_4={};$1_4.displayText=src.get_item().displayText;$1_4.fn=src.get_item().fn;$1_4.encodingType=target.get_encodingType();$1_4.encodingUiItems=target.get_item().encodingUiItems;tab.ShelfClientCommands.$7($1_3,$1_4,dropPos,0);},function($p1_0,$p1_1){
tab.ShelfClientCommands.$4($p1_0,$p1_1,$1,$0,targetShelf.get_shelfType());},'immediately');tab.CommandController.SendCommand($2);}
tab.ShelfClientCommands.moveShelfPill=function(srcShelf,targetShelf,p,dropPos,isRightDrop){var $0=tab.ShelfClientCommands.$0();var $1=$0.commandParams;if(ss.isNullOrUndefined(dropPos)){dropPos=$1['shelfDropTargetPosition'];dropPos.shelfType=targetShelf.get_shelfType();dropPos.shelfPosIndex=0;dropPos.shelfDropAction=(srcShelf===targetShelf)?'swap':'insert';}var $2=new tab.vqldomain$9(function($p1_0){
$1['shelfSelection']=[p.get_item().shelfItemId];$1['dragSource']='drag-drop-viz';var $1_0=$1['shelfDragSourcePosition'];$1_0.shelfType=srcShelf.get_shelfType();$1_0.shelfPosIndex=srcShelf.get_pills().indexOf(p);$1_0.shelfDropAction='replace';tab.ShelfClientCommands.$2($1,p.get_column(),p.get_encodingType());var $1_1={};$1_1.displayText=p.get_item().displayText;$1_1.fn=p.get_item().fn;$1_1.encodingType=dropPos.encodingType;var $1_2=$p1_0.makeMutablePresModel(targetShelf);tab.ShelfClientCommands.$7($1_2,$1_1,dropPos,0);if(isRightDrop){$1['isCopy']=tab.JsonUtil.toJson(true);}else{var $1_3=$p1_0.makeMutablePresModel(srcShelf);tab.ShelfClientCommands.$8($1_3,p.get_item());}},function($p1_0,$p1_1){
$1['dropTarget']='drag-drop-viz';$1['paneSpec']=targetShelf.get_paneId();$1['shelfDropTargetPosition']=dropPos;tab.ShelfClientCommands.$4($p1_0,$p1_1,$1,$0,targetShelf.get_shelfType());},'immediately');tab.CommandController.SendCommand($2);}
tab.ShelfClientCommands.movePillToEncoding=function(srcShelf,encodingShelf,type,p,isRightDrop,dropPos){var $0=tab.ShelfClientCommands.$0();var $1=$0.commandParams;if(ss.isNullOrUndefined(dropPos)){dropPos=$1['shelfDropTargetPosition'];dropPos.shelfType='encoding-shelf';dropPos.shelfPosIndex=0;dropPos.shelfDropAction='insert';dropPos.encodingType=type;dropPos.isOverride=true;}var $2=new tab.vqldomain$9(function($p1_0){
var $1_0=$p1_0.makeMutablePresModel(srcShelf);$1['shelfSelection']=[p.get_item().shelfItemId];$1['dragSource']='drag-drop-viz';var $1_1=$1['shelfDragSourcePosition'];$1_1.shelfType=srcShelf.get_shelfType();$1_1.shelfPosIndex=srcShelf.get_pills().indexOf(p);$1_1.encodingType=p.get_encodingType();$1_1.shelfDropAction='replace';$1_1.isOverride=false;tab.ShelfClientCommands.$2($1,p.get_column(),p.get_encodingType());if(isRightDrop){$1['isCopy']=tab.JsonUtil.toJson(true);}else{tab.ShelfClientCommands.$8($1_0,p.get_item());}var $1_2={};$1_2.displayText=p.get_column().get_description();$1_2.fn=p.get_column().get_globalName();$1_2.encodingType=type;$1_2.encodingUiItems=p.get_item().encodingUiItems;tab.ShelfClientCommands.$7($1_0,$1_2,dropPos,0);},function($p1_0,$p1_1){
$1['dropTarget']='drag-drop-viz';$1['paneSpec']=encodingShelf.get_paneId();$1['shelfDropTargetPosition']=tab.JsonUtil.toJson(dropPos);tab.ShelfClientCommands.$4($p1_0,$p1_1,$1,$0,encodingShelf.get_shelfType());},'immediately');tab.CommandController.SendCommand($2);}
tab.ShelfClientCommands.addEncodingFields=function(encodingShelf,type,fieldColumns,dropPos,isShiftDrop){var $0=tab.ShelfClientCommands.$0();var $1=$0.commandParams;if(ss.isNullOrUndefined(dropPos)){dropPos=$1['shelfDropTargetPosition'];dropPos.shelfType='encoding-shelf';dropPos.shelfPosIndex=0;dropPos.shelfDropAction='insert';dropPos.encodingType=type;}if(isShiftDrop){$1['isShiftDrag']=tab.JsonUtil.toJson(true);}var $2=new tab.vqldomain$9(function($p1_0){
var $1_0=$p1_0.makeMutablePresModel(encodingShelf);var $enum1=ss.IEnumerator.getEnumerator(fieldColumns);while($enum1.moveNext()){var $1_1=$enum1.current;var $1_2={};$1_2.displayText=$1_1.get_description();$1_2.fn=$1_1.get_globalName();$1_2.encodingType=type;$1_2.encodingUiItems=[{}];$1_2.encodingUiItems[0].isVisible=true;$1_2.encodingUiItems[0].isEnabled=true;$1_2.encodingUiItems[0].encodingType=$1_2.encodingType;tab.ShelfClientCommands.$7($1_0,$1_2,dropPos,0);}},function($p1_0,$p1_1){
tab.ShelfClientCommands.$3($1,fieldColumns,'invalid-encoding');$1['paneSpec']=encodingShelf.get_paneId();$1['dragSource']='drag-drop-schema';$1['dropTarget']='drag-drop-viz';$1['shelfDropTargetPosition']=tab.JsonUtil.toJson(dropPos);tab.ShelfClientCommands.$4($p1_0,$p1_1,$1,$0,encodingShelf.get_shelfType());},'immediately');tab.CommandController.SendCommand($2);}
tab.ShelfClientCommands.addShelfField=function(svm,fieldColumns,encoding,dropPos){var $0=tab.ShelfClientCommands.$0();var $1=$0.commandParams;if(ss.isNullOrUndefined(dropPos)){dropPos=$1['shelfDropTargetPosition'];dropPos.shelfType=svm.get_shelfType();dropPos.shelfPosIndex=0;dropPos.shelfDropAction='insert';dropPos.encodingType=encoding;}var $2=new tab.vqldomain$9(function($p1_0){
var $1_0=0;var $enum1=ss.IEnumerator.getEnumerator(fieldColumns);while($enum1.moveNext()){var $1_1=$enum1.current;var $1_2={};$1_2.displayText=$1_1.get_description();$1_2.fn=$1_1.get_globalName();$1_2.encodingType=(svm.get_shelfType()==='encoding-shelf'&&encoding==='invalid-encoding')?'level-of-detail-encoding':encoding;var $1_3=$p1_0.makeMutablePresModel(svm);tab.ShelfClientCommands.$7($1_3,$1_2,dropPos,$1_0);$1_0++;}},function($p1_0,$p1_1){
tab.ShelfClientCommands.$3($1,fieldColumns,'invalid-encoding');$1['paneSpec']=svm.get_paneId();$1['dragSource']='drag-drop-schema';$1['dropTarget']='drag-drop-viz';$1['shelfDropTargetPosition']=dropPos;if(encoding!=='invalid-encoding'){$1['encodingType']=encoding;}tab.ShelfClientCommands.$4($p1_0,$p1_1,$1,$0,svm.get_shelfType());},'immediately');tab.CommandController.SendCommand($2);}
tab.ShelfClientCommands.replaceShelfPillWithField=function(targetShelf,target,src,dropPos){var $0=tab.ShelfClientCommands.$0();var $1=$0.commandParams;if(ss.isNullOrUndefined(dropPos)){dropPos=$1['shelfDropTargetPosition'];dropPos.shelfType=targetShelf.get_shelfType();dropPos.shelfPosIndex=targetShelf.get_pills().indexOf(target);dropPos.shelfDropAction='replace';dropPos.encodingType=target.get_encodingType();}var $2=new tab.vqldomain$9(function($p1_0){
var $1_0=$p1_0.makeMutablePresModel(targetShelf);var $1_1=0;var $enum1=ss.IEnumerator.getEnumerator(src);while($enum1.moveNext()){var $1_2=$enum1.current;var $1_3={};$1_3.displayText=$1_2.get_description();$1_3.fn=$1_2.get_globalName();$1_3.encodingType=target.get_encodingType();$1_3.encodingUiItems=target.get_item().encodingUiItems;tab.ShelfClientCommands.$7($1_0,$1_3,dropPos,$1_1);$1_1++;}},function($p1_0,$p1_1){
tab.ShelfClientCommands.$3($1,src,'invalid-encoding');$1['paneSpec']=targetShelf.get_paneId();$1['shelfSelection']=new Array(0);$1['dragSource']='drag-drop-schema';$1['dropTarget']='drag-drop-viz';$1['shelfDropTargetPosition']=dropPos;tab.ShelfClientCommands.$4($p1_0,$p1_1,$1,$0,targetShelf.get_shelfType());},'immediately');tab.CommandController.SendCommand($2);}
tab.ShelfClientCommands.$0=function(){var $0={};$0.commandNamespace='tabdoc';$0.commandName='drop-on-shelf';var $1={};$1['dragSource']='drag-drop-none';$1['dropTarget']='drag-drop-none';$1['dragDescription']='';$1['isCopy']=false;$1['isDeadDrop']=false;$1['isRightDrag']=false;$1['shelfDropContext']='none';$1['shelfDragSourcePosition']={};$1['shelfDropTargetPosition']={};$0.commandParams=$1;return $0;}
tab.ShelfClientCommands.$1=function($p0,$p1){var $0={};$0.fn=$p0.get_globalName();if(ss.isValue($p1)&&$p1!=='invalid-encoding'){$0.encodingType=$p1;}return $0;}
tab.ShelfClientCommands.$2=function($p0,$p1,$p2){$p0['fieldEncodings']=tab.JsonUtil.toJson([tab.ShelfClientCommands.$1($p1,$p2)]);}
tab.ShelfClientCommands.$3=function($p0,$p1,$p2){var $0=_.map($p1,function($p1_0){
return tab.ShelfClientCommands.$1($p1_0,$p2);});$p0['fieldEncodings']=tab.JsonUtil.toJson($0);}
tab.ShelfClientCommands.$4=function($p0,$p1,$p2,$p3,$p4){var $0={};$0.commandNamespace='tabdoc';$0.commandName='drop-prepare';tab.ShelfClientCommands.$6($0,$p2);var $1=function($p1_0){
var $1_0=$p1_0;if(ss.isNullOrUndefined($1_0)){return;}if(Object.keyExists($1_0,'dropCommandModel')){var $1_2=$1_0['dropCommandModel'];var $1_3=tab.CommandSerializer.deserialize($1_2.simpleCommand);if(ss.isValue($1_3)){$p3=$1_3;$p2=$1_3.commandParams;}}if(Object.keyExists($1_0,'fieldEncodings')){$p2['fieldEncodings']=$1_0['fieldEncodings'];}else if(Object.keyExists($1_0,'fn')){var $1_4={};$1_4.fn=$1_0['fn'];$p2['fieldEncodings']=tab.JsonUtil.toJson([$1_4]);}var $1_1=[];$1_1.enqueue($p3);if(Object.keyExists($1_0,'doDropUiAction')&&$1_0['doDropUiAction']&&$p4==='filter-shelf'){var $1_5=$1_0['fieldEncoding'];var $1_6=tab.CommandUtils.newSrvCommand('create-default-quick-filter');var $1_7={};$1_7['fn']=$1_5.fn;tab.ShelfClientCommands.$6($1_6,$1_7);$1_1.enqueue($1_6);}tab.ShelfClientCommands.$6($p3,$p2);tab.ShelfClientCommands.$5($p0,$1_1,$p1);};$p0.executeCommand($0,$1,function(){
$p1(false);});}
tab.ShelfClientCommands.$5=function($p0,$p1,$p2){if(!$p1.length){$p2(true);return;}var $0=$p1.dequeue();$p0.executeCommand($0,function(){
tab.ShelfClientCommands.$5($p0,$p1,$p2);},function(){
$p2(false);});}
tab.ShelfClientCommands.$6=function($p0,$p1){tab.CommandUtils.injectVizID($p1,tsConfig.current_sheet_name);var $dict1=$p1;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;if(ss.isNullOrUndefined($1)||Type.canCast($1,String)||Type.canCast($1,Boolean)||Type.canCast($1,Number)){}else if(Type.canCast($1,Object)||Type.canCast($1,Array)){$p1[$0.key]=tab.JsonUtil.toJson($1);}}$p0.commandParams=$p1;}
tab.ShelfClientCommands.$7=function($p0,$p1,$p2,$p3){var $0=($p3>0)?'insert':($p2.shelfDropAction||'insert');switch($0){case 'insert':tab.ShelfClientCommands.$9($p0.shelfItems).insert($p2.shelfPosIndex+$p3,$p1);break;case 'replace':$p0.shelfItems[$p2.shelfPosIndex]=$p1;break;case 'replace-all':$p0.shelfItems[$p2.shelfPosIndex]=$p1;$p0.shelfItems=_.filter($p0.shelfItems,function($p1_0){
return $p1_0.encodingType!==$p2.encodingType||$p1_0===$p1;});break;}}
tab.ShelfClientCommands.$8=function($p0,$p1){$p0.shelfItems=_.filter($p0.shelfItems,function($p1_0){
return !_.isEqual($p1_0,$p1);});}
tab.ShelfClientCommands.$9=function($p0){return ($p0);}
tab.vqldomain$9=function(doLocal,doRemote,uiBlockState){tab.vqldomain$9.initializeBase(this,[doLocal,doRemote,uiBlockState]);}
tab.vqldomain$2=function(doLocal,doRemote,uiBlockType,sequence){if(ss.isValue(doLocal)){this.$0=doLocal;}if(ss.isValue(doRemote)){this.$1=doRemote;}this.$2=uiBlockType;this.$3=sequence;}
tab.vqldomain$2.prototype={$0:null,$1:null,$2:null,$3:0,get_blockType:function(){return this.$2;},get_isOneAtATime:function(){return false;},doLocal:function($p0,$p1){if(ss.isValue(this.$0)){this.$0($p0,$p1);}else{$p1();}},doRemote:function($p0,$p1){if(ss.isValue(this.$1)){this.$1($p0,$p1);}else{if(ss.isValue($p1)){$p1(true);}}}}
tab.CommandController=function(session,isEmbedded){this.$5=[];this.$6=new tab.vqldomain$1();this.$7=new tab.Transactor();this.$8=[];this.$4=new tab.vqldomain$3(session);this.$4.add_commmandSucceeded(ss.Delegate.create(this,this.$1E));this.$D=session;this.$E=isEmbedded;}
tab.CommandController.get_fireDeferredUrlActions=function(){return tab.CommandController.$2;}
tab.CommandController.set_fireDeferredUrlActions=function(value){tab.CommandController.$2=value;return value;}
tab.CommandController.get_$14=function(){return tab.Logger.lazyGetLogger(tab.CommandController);}
tab.CommandController.create=function(session,isEmbedded){if(ss.isNullOrUndefined(tab.CommandController.$3)){tab.CommandController.$3=new tab.CommandController(session,isEmbedded);}return tab.CommandController.$3;}
tab.CommandController.get=function(){if(!ss.isValue(tab.CommandController.$3)){throw new Error('Attempted to use CommandController before creating it.');}return tab.CommandController.$3;}
tab.CommandController.handleBootstrapException=function(e){if(tab.CommandController.$0){return;}var $0=new ss.StringBuilder();if(ss.isValue(e['name'])){$0.append(e['name']).append(': ');}$0.append(e.message);tab.BaseSession.showAlertDialog(tab.Strings.UnhandledExceptionMessage($0.toString()),tab.Strings.UnhandledExceptionTitle);tab.CommandController.sendParentCompletedMessage();tab.CommandController.$0=true;}
tab.CommandController.sendParentCompletedMessage=function(){if(tab.CommandController.$1){return;}tab.CommandController.$1=true;var $0=new ss.StringBuilder('tableau.completed');if(tsConfig.loadOrderID>=0){$0.append(',').append(tsConfig.loadOrderID);}if(!String.isNullOrEmpty(tsConfig.apiID)){if(tsConfig.loadOrderID<0){$0.append(',').append(tsConfig.loadOrderID);}$0.append(',').append(tsConfig.apiID);}tab.BrowserSupport.doPostMessage($0.toString());}
tab.CommandController.$15=function($p0){return $p0.get_blockType()==='immediately';}
tab.CommandController.SendCommand=function($p0){var $0=tab.CommandController.get();$0.$6.$2($p0);$0.$1A();}
tab.CommandController.prototype={$4:null,$9:null,$A:0,$B:null,$C:false,$D:null,$E:false,add_onUrlActionsResponse:function(value){this.$F=ss.Delegate.combine(this.$F,value);},remove_onUrlActionsResponse:function(value){this.$F=ss.Delegate.remove(this.$F,value);},$F:null,add_onInvalidation:function(value){this.$10=ss.Delegate.combine(this.$10,value);},remove_onInvalidation:function(value){this.$10=ss.Delegate.remove(this.$10,value);},$10:null,add_onBootstrapSuccess:function(value){this.$11=ss.Delegate.combine(this.$11,value);},remove_onBootstrapSuccess:function(value){this.$11=ss.Delegate.remove(this.$11,value);},$11:null,add_destroyView:function(value){this.$12=ss.Delegate.combine(this.$12,value);},remove_destroyView:function(value){this.$12=ss.Delegate.remove(this.$12,value);},$12:null,add_renderModeChanged:function(value){this.$13=ss.Delegate.combine(this.$13,value);},remove_renderModeChanged:function(value){this.$13=ss.Delegate.remove(this.$13,value);},$13:null,get_legacySession:function(){return this.$D;},updateLayoutSession:function(layoutSession){this.$D=layoutSession;},resetInvalidationHandlers:function(){this.$F=null;this.$10=null;this.$11=null;},refreshLayout:function(){dojo.publish('close-menus');if(tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()){return;}var $0=ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;if(ss.isValue(this.$11)){try{this.$11($1_0,this);}catch($1_1){tab.CommandController.handleBootstrapException($1_1);}window.onerror=null;this.get_legacySession().nudgeWait();}});var $1=ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;if(ss.isValue($1_0)){_.defer(ss.Delegate.create(this,function(){
try{this.$18($1_0);}catch($2_0){tab.CommandController.handleBootstrapException($2_0);}tab.CommandController.sendParentCompletedMessage();}));}});var $2=ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0.status;if($1_0===200){var $1_1=$p1_0.message;if($1_1.substr(0,12)==='Invalid JSON'){tab.CommandController.sendParentCompletedMessage();var $1_2=tab.Strings.ServerErrorInvalidJSON+'<br>';tab.BaseSession.showAlertDialog($1_2,tab.Strings.SessionUnknownErrorTitle);throw new Error('Invalid JSON');}}else if($1_0===403){var $1_3=0;var $1_4='';try{var $1_5=JSON.parse($p1_0.responseText);if(ss.isValue($1_5)){$1_3=$1_5.code;$1_4=$1_5.message;}}catch($1_6){}tab.CommandController.sendParentCompletedMessage();this.$D.handleSessionForbiddenAction($1_3,$1_4);}else if($1_0===401){var $1_7=$p1_0.responseText;tab.WindowHelper.locationReplace(window.self,$1_7);}else if($1_0===410){this.$D.handleSessionExpiration();}else if($1_0===413){tab.CommandController.sendParentCompletedMessage();this.$D.handleSessionLimitExceeded();}else if(!!$1_0){tab.CommandController.sendParentCompletedMessage();var $1_8=$p1_0.responseText;if($1_0>=500){this.$D.handleSessionKilled($1_8);}else{this.$D.handleUnknownErrorStatus($1_8);}this.$D.nudgeWait();}});tabBootstrap.ViewerBootstrap.get_instance().waitOnInitialLayoutModel($0,$2,$1);},executeUrlActions:function(urlActions){var $0=Array.toArray(urlActions);this.$F($0);},checkpointAppPresModel:function(){this.$B=tab.ApplicationModel.get_instance().get_presModel();this.$8.clear();this.$C=false;},SaveWorkbook:function($p0,$p1,$p2,$p3){this.$19('publish',$p0,$p1,$p2,null,null,$p3,null);},SaveWorkbookAs:function($p0,$p1,$p2,$p3,$p4,$p5,$p6){this.$19('publish_as',$p0,$p1,$p2,$p3,$p4,$p5,$p6);},$16:function($p0){var $0=function(){
$p0();};var $1={};$1.type='POST';$1.dataType='json';$1.url=this.$17('transitionGuest');var $2=new tab.SessionAjaxCallManager(this.$D,null,$0,null,true,true);tab.XhrUtil.helper($1,$2);},$17:function($p0){return tabBootstrap.BaseUrlFormatter.formatSessionMethod($p0,this.$D.get_id(),this.$D.get_urlRoot());},$18:function($p0){var $0=$p0.secondaryInfo;if(!ss.isValue($0)||!ss.isValue($0.presModelMap)||!Object.getKeyCount($0.presModelMap)){return;}var $1=tab.ApplicationModel.get_instance().getMutableCopyOfPresModel();if(Object.keyExists($0.presModelMap,'dataDictionary')){var $2=$0.presModelMap['dataDictionary'].presModelHolder;var $3=$2.DataDictionaryPresModel;if(ss.isValue($3)){$1.dataDictionary=$3;}}if(Object.keyExists($0.presModelMap,'vizData')){var $4=$1.workbookPresModel.dashboardPresModel;var $5=$0.presModelMap['vizData'].presModelHolder;var $6=$5.PresModelMapPresModel;var $7=Object.keys($6.presModelMap);var $enum1=ss.IEnumerator.getEnumerator($7);while($enum1.moveNext()){var $8=$enum1.current;var $dict2=$4.zones;for(var $key3 in $dict2){var $9={key:$key3,value:$dict2[$key3]};var $A=$9.value;if($A.zoneType==='viz'&&$A.sheet===$8){var $B=$A.presModelHolder.visual;if(ss.isValue($B)){$5=$6.presModelMap[$8].presModelHolder;$B.vizData=$5.VizDataPresModel;}break;}}}}tab.ApplicationModel.get_instance().update($1);this.checkpointAppPresModel();tab.Model.fireDeferredEvents(tab.CommandController.handleBootstrapException);},$19:function($p0,$p1,$p2,$p3,$p4,$p5,$p6,$p7){var $0=function($p1_0,$p1_1,$p1_2){
var $1_0=$p1_0;if(Object.keyExists($1_0,'workbook')){var $1_1=$1_0['workbook'];$p6($1_1);}else{$p6(null);}};var $1=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
var $1_0;try{$1_0=tab.JsonUtil.parseJson($p1_0.responseText);}catch($1_1){$1_0=null;}if(ss.isValue($p7)&&ss.isValue($1_0)){var $1_2=$1_0;$p7($1_2);}else{this.$D.$F($p1_2,$p1_0);}});var $2={};$2.type='POST';$2.dataType='json';$2.url=this.$17($p0);var $3={project:$p2,name:$p1,display_tabs:$p3};if(ss.isValue($p4)){$3['save_db_passwords']=$p4;}if(ss.isValue($p5)){$3['no_overwrite']=$p5;}var $4=tab.XhrUtil.getMultipartData(null,$3);$2.contentType='multipart/form-data; boundary='+$4.header;$2.data=$4.body;var $5=new tab.SessionAjaxCallManager(this.$D,null,$0,$1,true,true);tab.XhrUtil.helper($2,$5);},$1A:function(){while(!!this.$6.get_$1()&&!_.any(this.$5,tab.CommandController.$15)){this.$1B(this.$6.$3());}},$1B:function($p0){this.$5.add($p0);var $0=tab.MetricsLogger.get_instance().createContext('ExecuteClientCommand::ExecuteClientCommand');var $1=this.$7.beginTransaction();var $2;var $3=false;try{$p0.doLocal($1,ss.Delegate.create(this,function(){
$3=true;this.$1D($1,$p0);}));$2=this.$7.endTransaction();}catch($5){this.$7.rollbackTransaction();tab.Model.$4();if(!$3){this.$20($p0);}return;}var $4=tab.MetricsLogger.get_instance().createContext('ExecuteClientCommand::update + fire events');if(ss.isValue($2)){tab.ApplicationModel.get_instance().update($2);this.$23();}tab.Model.fireDeferredEvents(null);$4.close();$0.close();},$1C:function($p0,$p1,$p2){_.defer(ss.Delegate.create(this,function(){
this.$20($p1);if(this.$6.get_$1()>0){this.$1A();}}));},$1D:function($p0,$p1){try{if($p1.get_blockType()!=='none'){this.get_legacySession().incrementWait($p1.get_blockType()==='immediately');}$p1.doRemote(this.$4,ss.Delegate.create(this,function($p1_0){
this.$1C($p0,$p1,$p1_0);}));}catch($0){this.$1C($p0,$p1,false);}},$1E:function($p0,$p1){var $0=$p1.vqlCmdResponse;if(!ss.isValue($0)){return;}if(ss.isValue($0.layoutStatus)){var $1=$0.layoutStatus;if((ss.isValue($1.urlActionList)&&!tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&ss.isValue(this.$F))||tab.CommandController.get_fireDeferredUrlActions()){if($1.urlActionList.length>0){tab.CommandController.set_fireDeferredUrlActions(false);this.$F($1.urlActionList);}}if(ss.isValue($1.applicationPresModel)&&ss.isValue($1.applicationPresModel.workbookPresModel)&&ss.isValue($1.applicationPresModel.workbookPresModel.dashboardPresModel)&&ss.isValue($1.applicationPresModel.workbookPresModel.dashboardPresModel.sheetLayoutInfo)){this.$9=$1.applicationPresModel.workbookPresModel.dashboardPresModel.sheetLayoutInfo;}var $2=new ss.Tuple();var $3=null;if(ss.isValue($p0.commandParams)&&Object.keyExists($p0.commandParams,'worksheet')&&!($p0.commandName==='render-tooltip-server')){$3=$p0.commandParams['worksheet'];}var $4=new tab.InvalidationInfo();$4.primarySheet=$3;$4.layoutStatus=$0.layoutStatus;$4.cmdResult=$0.cmdResultList[0];$2.second=$4;if(ss.isValue($0.layoutStatus.applicationPresModel)){$2.first=$0.layoutStatus.applicationPresModel;}this.$22($2);}},$1F:function($p0){if(ss.isNullOrUndefined(this.$10)){return;}this.$10($p0);},$20:function($p0){this.$5.remove($p0);if($p0.get_blockType()!=='none'){this.$A+=1;}if(!this.$5.length&&!this.$6.get_$1()){var $0=false;var $1=false;if(ss.isValue(this.$9)){$0=this.get_legacySession().get_layoutId()!==this.$9.layoutId.toString();$1=tsConfig.current_sheet_name!==this.$9.sheetName;this.get_legacySession().set_layoutId(this.$9.layoutId.toString());if($1||$0){this.$12();}}var $2=tab.ApplicationModel.get_instance().get_renderMode();var $3=tab.ApplicationModel.get_instance();if(this.$C){$3.update(this.$B);}var $4=[];var $enum1=ss.IEnumerator.getEnumerator(this.$8);while($enum1.moveNext()){var $7=$enum1.current;$3.update($7.first);$4.add($7.second);if(ss.isValue($7.second)&&ss.isValue($7.second.layoutStatus)&&ss.isValue($7.second.layoutStatus.undoPosition)){if($7.second.layoutStatus.undoPosition>this.get_legacySession().get_historyPosition()){this.$D.$9('',this.$E);}this.get_legacySession().set_historyPosition($7.second.layoutStatus.undoPosition);}}this.checkpointAppPresModel();var $5=(tab.ApplicationModel.get_instance().get_renderMode()!==$2);if($5){this.$A+=1;this.get_legacySession().get_waitHandler().addrefAndTurnOnImmediately();if(ss.isValue(this.$13)){this.$13();}}if(ss.isValue(this.$9)){if($1||$0){if($1){try{if(ss.isValue(window.parent)&&(typeof(window.parent.handleSheetChanged)==='function')){window.parent.handleSheetChanged(this.$9.sheetName,this.$9.repositoryUrl);}}catch($8){}}this.$9.oldSheetName=tsConfig.current_sheet_name;dojo.publish('newLayoutId',[this.$9]);this.$9=null;}}var $6=tab.LayoutSession.getDashboardSize($3.get_presModel());if(ss.isValue($6)){dojo.publish('refreshLayoutModel',[$6]);}tab.Model.fireDeferredEvents(null);this.$21($4);while(this.$A>0){this.get_legacySession().decrementWait();this.$A-=1;}}},$21:function($p0){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;this.$1F($0);}},$22:function($p0){if(ss.isValue($p0)){this.$8.add($p0);}},$23:function(){this.$C=true;}}
tab.vqldomain$1=function(){this.$0=[];}
tab.vqldomain$1.prototype={$0:null,get_$1:function(){return this.$0.length;},$2:function($p0){if($p0.get_isOneAtATime()){this.$5(Type.getInstanceType($p0));}this.$0.add($p0);},$3:function(){if(this.$0.length<=0){return null;}var $0=this.$0[0];this.$0.removeAt(0);return $0;},$4:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$0);while($enum1.moveNext()){var $0=$enum1.current;if(tab.CommandController.$15($0)){return true;}}return false;},$5:function($p0){var $0=0;for(var $1=this.$0.length-1;$1>=0;--$1){if(Type.getInstanceType(this.$0[$1])===$p0){++$0;this.$0.removeAt($1);}}if($0>0){}}}
tab.vqldomain$7=function(command,uiBlockType,successCallback,errorCallback){tab.vqldomain$7.initializeBase(this,[null,null,uiBlockType,null]);this.$4=command;this.$5=successCallback;this.$6=errorCallback;}
tab.vqldomain$7.$7=function($p0,$p1,$p2,$p3){return new tab.vqldomain$7($p0,$p1,$p2,$p3);}
tab.vqldomain$7.prototype={$4:null,$5:null,$6:null,doRemote:function($p0,$p1){$p0.executeCommand(this.$4,ss.Delegate.create(this,function($p1_0){
try{if(ss.isValue(this.$5)){this.$5($p1_0);}}finally{$p1(true);}}),ss.Delegate.create(this,function($p1_0){
try{if(ss.isValue(this.$6)){this.$6($p1_0);}}finally{$p1(false);}}));}}
tab.Transactor=function(){}
tab.Transactor.prototype={$0:null,beginTransaction:function(){if(ss.isValue(this.$0)){throw new Error('Internal error: nested transaction');}this.$0=new tab.Transaction();return this.$0;},rollbackTransaction:function(){this.$0=null;},endTransaction:function(){var $0=this.$0.get_transactedChange();this.$0=null;return $0;},doTransaction:function(a){this.beginTransaction();a(this.$0);return this.endTransaction();}}
tab.Transaction=function(){this.$0=[];}
tab.Transaction.prototype={$0:null,get_transactedChange:function(){return this.$1();},makeMutablePresModel:function(model){var $0=model.getPresModelPath();var $enum1=ss.IEnumerator.getEnumerator(this.$0);while($enum1.moveNext()){var $2=$enum1.current;if(_.isEqual($2.get_$3(),$0)){return $2.get_$2();}}var $1=model.getMutableCopyOfPresModel();this.$0.add(new tab.vqldomain$0($0,$1));return $1;},$1:function(){if(!this.$0.length){return null;}this.$0=_.sortBy(this.$0,function($p1_0){
return $p1_0.get_$3().get_pathList().length;});var $0=tab.ApplicationModel.get_instance().get_presModel();var $1=tab.PresentationModel.cloneObjWithScalarsOnly($0);if(!ss.isValue($1)){$1={};}for(var $2=0,$3=this.$0.length;$2<$3;$2++){var $4=this.$0[$2];tab.PresentationModel.insertAtPath($0,$1,$4.get_$3(),$4.get_$2());}return $1;}}
tab.vqldomain$0=function(path,presModel){this.$0=path;this.$1=presModel;}
tab.vqldomain$0.prototype={$0:null,$1:null,get_$2:function(){return this.$1;},get_$3:function(){return this.$0;}}
tab.ApplicationModel=function(){tab.ApplicationModel.initializeBase(this,[null,null]);this.set_presModelKey(new tab.PresModelPathItem('applicationPresModel'));this.$7=new tab.WorkbookModel(this);this.$8=new tab.ColorPaletteCollectionModel(this);}
tab.ApplicationModel.get_instance=function(){if(ss.isNullOrUndefined(tab.ApplicationModel.$6)){tab.ApplicationModel.$6=new tab.ApplicationModel();}return tab.ApplicationModel.$6;}
tab.ApplicationModel.prototype={$7:null,$8:null,add_newWorkbook:function(value){this.$9=ss.Delegate.combine(this.$9,value);},remove_newWorkbook:function(value){this.$9=ss.Delegate.remove(this.$9,value);},$9:null,add_applicationUpdate:function(value){this.$A=ss.Delegate.combine(this.$A,value);},remove_applicationUpdate:function(value){this.$A=ss.Delegate.remove(this.$A,value);},$A:null,get_workbook:function(){return this.$7;},get_colorPalettes:function(){return this.$8;},get_dataDictionary:function(){return this.get_appPresModel().dataDictionary;},get_renderMode:function(){return this.get_appPresModel().renderMode;},get_isLocalRenderMode:function(){return this.get_renderMode()==='render-mode-client';},get_appPresModel:function(){return this.presModel;},get_autoUpdate:function(){return tab.ModelUtils.findContentDashboard().get_autoUpdate();},set_autoUpdate:function(value){tab.ModelUtils.findContentDashboard().set_autoUpdate(value);return value;},get_invalid:function(){return tab.ModelUtils.findContentDashboard().get_invalid();},set_invalid:function(value){tab.ModelUtils.findContentDashboard().set_invalid(value);return value;},update:function(applicationPresModel){if(ss.isNullOrUndefined(this.presModel)){this.presModel={};}if(ss.isValue(applicationPresModel.renderMode)){this.get_appPresModel().renderMode=applicationPresModel.renderMode;}if(ss.isValue(applicationPresModel.dataDictionary)){this.get_appPresModel().dataDictionary=applicationPresModel.dataDictionary;}if(ss.isValue(applicationPresModel.workbookPresModel)){if(!ss.isValue(this.$7)){this.$7=new tab.WorkbookModel(this);this.raiseEvent(this.$9,this.$7);}this.$7.update(applicationPresModel.workbookPresModel);}if(ss.isValue(applicationPresModel.colorPaletteCollection)){this.$8.update(applicationPresModel.colorPaletteCollection);}this.simpleSwapToUpdate(applicationPresModel,this.$A);}}
tab.SelectionModel=function(parent,index){tab.SelectionModel.initializeBase(this,[parent,new tab.PresModelPathItem(index.toString())]);}
tab.SelectionModel.$B=function($p0,$p1){return $p0.join(';')+'='+$p1.join(';');}
tab.SelectionModel.prototype={$6:null,$7:null,$8:null,add_newSelection:function(value){this.$9=ss.Delegate.combine(this.$9,value);},remove_newSelection:function(value){this.$9=ss.Delegate.remove(this.$9,value);},$9:null,get_selectionPresModel:function(){if(ss.isValue(this.$6)){var $0={};$0.selectionType='tuples';$0.objectIds=this.$6;return $0;}return this.get_$A();},get_selectionType:function(){return this.get_$A().selectionType;},get_isEmpty:function(){return (ss.isNullOrUndefined(this.get_$A().objectIds)||!this.get_$A().objectIds.length)&&tab.MiscUtil.isNullOrEmpty(this.get_$A().selectedNodes);},get_nodes:function(){return this.get_$A().selectedNodes;},get_ids:function(){if(ss.isValue(this.$6)){return this.$6;}return this.get_$A().objectIds;},get_hashKey:function(){var $0=this.get_selectionType();if(this.get_selectionType()==='legend-items'){$0+='-'+this.get_selectionPresModel().legendSelectionInfo.legendType+':'+this.get_selectionPresModel().legendSelectionInfo.legendColumns.join(';');}return $0;},get_$A:function(){return this.presModel;},isMarkSelected:function(markId){if(ss.isNullOrUndefined(this.get_$A())){return false;}return (this.get_ids()||new Array(0)).contains(markId);},isLegendItemSelected:function(item){if(this.get_selectionType()!=='legend-items'){return false;}if(ss.isNullOrUndefined(this.$8)){this.$8={};if(ss.isValue(this.get_ids())){var $enum1=ss.IEnumerator.getEnumerator(this.get_ids());while($enum1.moveNext()){var $0=$enum1.current;this.$8[$0]=true;}}}return Object.keyExists(this.$8,item.objectId);},isAnyLegendItemSelected:function(){if(this.get_selectionType()!=='legend-items'){return false;}if(ss.isValue(this.get_ids())){return this.get_ids().length>0;}return false;},isNodeSelected:function(nodeGroup){return ss.isValue(this.$C(nodeGroup.columnIndices,nodeGroup.aliasIndices));},findNodeSelection:function(nodeGroup){return this.$C(nodeGroup.columnIndices,nodeGroup.aliasIndices);},isNodeAncestorSelected:function(nodeGroup){if(ss.isNullOrUndefined(nodeGroup.columnIndices)||ss.isNullOrUndefined(nodeGroup.aliasIndices)){return false;}for(var $0=1;$0<nodeGroup.columnIndices.length;$0++){var $1=nodeGroup.columnIndices.extract($0);var $2=nodeGroup.aliasIndices.extract($0);if(ss.isValue(this.$C($1,$2))){return true;}}return false;},setOverriddenTupleIds:function(tupleIds){if(this.get_$A().selectionType!=='tuples'){return;}if(_.isEqual(this.$6,tupleIds)||(tab.MiscUtil.isNullOrEmpty(this.$6)&&tab.MiscUtil.isNullOrEmpty(tupleIds))){return;}this.$6=tupleIds;this.raiseEvent(this.$9);},update:function(selectionPresModel){if(this.isNewPresModelSameAsOld(selectionPresModel)&&ss.isNullOrUndefined(this.$6)){return;}this.$7=null;this.$8=null;this.$6=null;this.swapAndCopyPresModel(selectionPresModel);this.raiseEvent(this.$9);},isNewPresModelSameAsOld:function(newPM){if(ss.isNullOrUndefined(this.presModel)!==ss.isNullOrUndefined(newPM)){return false;}var $0=newPM;if($0.selectionType!==this.get_selectionPresModel().selectionType){return false;}if(ss.isValue($0.objectIds)&&!_.isEqual($0.objectIds,this.get_selectionPresModel().objectIds)){return false;}if(ss.isValue($0.selectedNodes)&&!_.isEqual($0.selectedNodes,this.get_selectionPresModel().selectedNodes)){return false;}if(ss.isValue($0.legendSelectionInfo)&&!_.isEqual($0.legendSelectionInfo,this.get_selectionPresModel().legendSelectionInfo)){return false;}return true;},$C:function($p0,$p1){if(ss.isNullOrUndefined($p0)||ss.isNullOrUndefined($p1)){return null;}if(ss.isNullOrUndefined(this.$7)){this.$7={};var $0=this.get_$A();if(ss.isValue($0.selectedNodes)){var $enum1=ss.IEnumerator.getEnumerator($0.selectedNodes);while($enum1.moveNext()){var $1=$enum1.current;this.$7[tab.SelectionModel.$B($1.columnIndices,$1.aliasIndices)]=$1;}}}if(!Object.getKeyCount(this.$7)){return null;}return this.$7[tab.SelectionModel.$B($p0,$p1)];}}
tab.DataSourceModel=function(parent){tab.DataSourceModel.initializeBase(this,[parent,new tab.PresModelPathItem('dataSourcPresModel')]);this.$6={};this.$B={};this.$7={};this.$D={};this.$8={};this.$C={};this.$9={};this.$E={};this.$A=[];}
tab.DataSourceModel.splitGlobalFieldName=function(fn){return (tab.DataSourceModel.$12(fn)).split('].[');}
tab.DataSourceModel.$11=function($p0,$p1){for(var $0=0;$0<$p0.length;$0++){var $1=$p0[$0];if($1.get_localName()===$p1&&$0<$p0.length-1){return _.last($p0,$p0.length-$0-1);}}return null;}
tab.DataSourceModel.$12=function($p0){if(($p0).length>=2&&($p0).charAt(0)==='['&&($p0).charAt(($p0).length-1)===']'){return ($p0).substr(1,($p0).length-2);}return $p0;}
tab.DataSourceModel.prototype={$6:null,$7:null,$8:null,$9:null,$A:null,$B:null,$C:null,$D:null,$E:null,$F:0,get_name:function(){return this.get_$10().datasource;},get_caption:function(){return this.get_$10().datasourceCaption;},get_fields:function(){return this.$A;},get_dataSourceLayoutPresModel:function(){return this.get_$10().dataSourceLayout;},get_$10:function(){return this.presModel;},get_specifiedWidth:function(){return this.$F;},set_specifiedWidth:function(value){this.$F=value;return value;},getFieldIconResource:function(index){var $0=this.get_$10().iconResDictionary;if(ss.isNullOrUndefined($0)){return '';}if(index<0||index>=$0.imageResources.length){return 'invalid';}return $0.imageResources[index];},findField:function(fn){if(ss.isValue(this.$6)&&Object.keyExists(this.$6,fn)){return this.$6[fn];}return null;},findColumnDrillChain:function(column){var $0=null;var $1=column.get_localName();if(column.get_isColumn()&&column.asColumn().get_isInstance()){$1=tab.DataSourceModel.$12(column.asColumn().get_baseColumnName());}var $enum1=ss.IEnumerator.getEnumerator(this.get_fields());while($enum1.moveNext()){var $2=$enum1.current;switch($2.get_instanceType()){case 'drillPath':$0=tab.DataSourceModel.$11($2.asDrillPath().get_levels(),$1);if(ss.isValue($0)){return $0;}break;case 'cubeDimension':var $enum2=ss.IEnumerator.getEnumerator($2.asDimension().get_hierarchies());while($enum2.moveNext()){var $3=$enum2.current;$0=tab.DataSourceModel.$11($3.get_levels(),$1);if(ss.isValue($0)){return $0;}}break;}}return $0;},update:function(datasourcePresModel){if(this.isNewPresModelSameAsOld(datasourcePresModel)){return;}if(ss.isValue(datasourcePresModel.fieldList)){this.$A.clear();this.$B=$.extend({},this.$6);this.$C=$.extend({},this.$8);this.$D=$.extend({},this.$7);this.$E=$.extend({},this.$9);var $enum1=ss.IEnumerator.getEnumerator(datasourcePresModel.fieldList);while($enum1.moveNext()){var $0=$enum1.current;switch($0.type){case 'field-folder':this.$14(this.$17($0),true);break;case 'drill-path':var $1=[];var $enum2=ss.IEnumerator.getEnumerator(($0).columnList);while($enum2.moveNext()){var $6=$enum2.current;$1.add(this.$18($6));this.$14($1[$1.length-1],false);}this.$14(this.$16($0,$1),true);break;case 'relational-table':var $2=[];var $enum3=ss.IEnumerator.getEnumerator(($0).columnList);while($enum3.moveNext()){var $7=$enum3.current;$2.add(this.$18($7));this.$14($2[$2.length-1],false);}this.$14(this.$1A($0,$2),true);break;case 'dimension':this.$14(this.$1B($0),true);break;case 'display-folder':var $3=$0;var $4=[];var $5=[];var $enum4=ss.IEnumerator.getEnumerator($3.hierarchyList);while($enum4.moveNext()){var $8=$enum4.current;var $9=[];var $enum5=ss.IEnumerator.getEnumerator($8.columnList);while($enum5.moveNext()){var $A=$enum5.current;$9.add(this.$18($A));this.$14($9[$9.length-1],false);}$4.add(this.$1D($8,$9));this.$14($4[$4.length-1],false);}var $enum6=ss.IEnumerator.getEnumerator($3.columnList);while($enum6.moveNext()){var $B=$enum6.current;$5.add(this.$18($B));}this.$14(this.$1E($3,$4,$5),true);break;case 'group':this.$14(this.$19($0),true);break;case 'column':this.$14(this.$18($0),true);break;}}var $dict7=this.$8;for(var $key8 in $dict7){var $C={key:$key8,value:$dict7[$key8]};var $D=$C.value;var $E=$D.get_presModel();var $F=[];var $enum9=ss.IEnumerator.getEnumerator($E.namesOfFields);while($enum9.moveNext()){var $10=$enum9.current;var $11=(Object.keyExists(this.$6,$10))?this.$6[$10]:null;if(ss.isValue($11)){$F.add($11);this.$A.remove($11);}}var $enum10=ss.IEnumerator.getEnumerator($E.drillpathVector);while($enum10.moveNext()){var $12=$enum10.current;var $13=(Object.keyExists(this.$7,$12))?this.$7[$12]:null;if(ss.isValue($13)){$F.add($13);this.$A.remove($13);}}$D.update($E,$F);}if(ss.isValue(datasourcePresModel.columnList)){var $enum11=ss.IEnumerator.getEnumerator(datasourcePresModel.columnList);while($enum11.moveNext()){var $14=$enum11.current;this.$14(this.$18($14),false);}}this.$15();}else{this.$A.clear();Object.clearKeys(this.$6);Object.clearKeys(this.$7);Object.clearKeys(this.$8);Object.clearKeys(this.$9);}this.swapAndCopyPresModel(datasourcePresModel);},$13:function($p0){this.$A.add($p0);},$14:function($p0,$p1){if($p0.get_isColumn()&&!$p0.asColumn().get_isInstance()){delete this.$B[$p0.get_localName()];this.$6[$p0.get_localName()]=$p0;}var $0=$p0.get_globalName()||$p0.get_localName();switch($p0.get_instanceType()){case 'drillPath':this.$7[$0]=$p0;delete this.$D[$0];break;case 'folder':$0=$0+($p0).get_folderRole();this.$8[$0]=$p0;delete this.$C[$0];break;case 'relationalTable':this.$9[$0]=$p0;delete this.$E[$0];break;default:this.$6[$0]=$p0;delete this.$B[$0];break;}if($p1){this.$13($p0);}},$15:function(){var $dict1=this.$B;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};delete this.$6[$0.key];}Object.clearKeys(this.$B);var $dict3=this.$D;for(var $key4 in $dict3){var $1={key:$key4,value:$dict3[$key4]};delete this.$7[$1.key];}Object.clearKeys(this.$D);var $dict5=this.$C;for(var $key6 in $dict5){var $2={key:$key6,value:$dict5[$key6]};delete this.$8[$2.key];}Object.clearKeys(this.$C);var $dict7=this.$E;for(var $key8 in $dict7){var $3={key:$key8,value:$dict7[$key8]};delete this.$9[$3.key];}Object.clearKeys(this.$E);},$16:function($p0,$p1){var $0=null;if(Object.keyExists(this.$7,$p0.name)){var $1=this.$7[$p0.name];if($1.get_isDrillPath()){$0=$1;}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.DrillPathModel(this);}$0.update($p0,$p1);return $0;},$17:function($p0){var $0=null;var $1=$p0.name+$p0.folderRole;if(Object.keyExists(this.$8,$1)){var $2=this.$8[$1];if($2.get_isFolder()){$0=$2;}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.FolderModel(this);}$0.update($p0,[]);return $0;},$18:function($p0){var $0=null;if(Object.keyExists(this.$6,$p0.fn)){var $1=this.$6[$p0.fn];if($1.get_isColumn()){$0=$1.asColumn();}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.FieldColumnModel(this);}$0.update($p0);return $0;},$19:function($p0){var $0=null;if(Object.keyExists(this.$6,$p0.fn)){var $1=this.$6[$p0.fn];if($1.get_isGroup()){$0=$1.asGroup();}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.GroupModel(this);}$0.update($p0);return $0;},$1A:function($p0,$p1){var $0=null;if(Object.keyExists(this.$9,$p0.name)){var $1=this.$9[$p0.name];if($1.get_isRelationalTable()){$0=$1.asRelationalTable();}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.RelationalTableModel(this);}$0.update($p0,$p1);return $0;},$1B:function($p0){var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p0.hierarchyList);while($enum1.moveNext()){var $3=$enum1.current;var $4=[];var $enum2=ss.IEnumerator.getEnumerator($3.columnList);while($enum2.moveNext()){var $5=$enum2.current;$4.add(this.$18($5));this.$14($4[$4.length-1],false);}$0.add(this.$1D($3,$4));this.$14($0[$0.length-1],false);}var $1=[];var $enum3=ss.IEnumerator.getEnumerator($p0.displayFolderList);while($enum3.moveNext()){var $6=$enum3.current;var $7=[];var $8=[];var $enum4=ss.IEnumerator.getEnumerator($6.hierarchyList);while($enum4.moveNext()){var $9=$enum4.current;var $A=[];var $enum5=ss.IEnumerator.getEnumerator($9.columnList);while($enum5.moveNext()){var $B=$enum5.current;$A.add(this.$18($B));this.$14($A[$A.length-1],false);}$7.add(this.$1D($9,$A));this.$14($7[$7.length-1],false);}var $enum6=ss.IEnumerator.getEnumerator($6.columnList);while($enum6.moveNext()){var $C=$enum6.current;$8.add(this.$18($C));}$1.add(this.$1E($6,$7,$8));}var $2=[];var $enum7=ss.IEnumerator.getEnumerator($p0.attributeDimensionList);while($enum7.moveNext()){var $D=$enum7.current;$2.add(this.$1B($D));}return this.$1C($p0,$0,$1,$2);},$1C:function($p0,$p1,$p2,$p3){var $0=null;if(Object.keyExists(this.$6,$p0.fn)){var $1=this.$6[$p0.fn];if($1.get_isCubeDimension()){$0=$1.asDimension();}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.CubeDimensionModel(this);}$0.update($p0,$p1,$p2,$p3);return $0;},$1D:function($p0,$p1){var $0=null;if(Object.keyExists(this.$6,$p0.fn)){var $1=this.$6[$p0.fn];if($1.get_isCubeHierarchy()){$0=$1.asHierarchy();}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.CubeHierarchyModel(this);}$0.update($p0,$p1);return $0;},$1E:function($p0,$p1,$p2){var $0=null;if(Object.keyExists(this.$6,$p0.name)){var $1=this.$6[$p0.name];if($1.get_isCubeFolder()){$0=$1.asCubeFolder();}else{}}if(ss.isNullOrUndefined($0)){$0=new tab.CubeFolderModel(this);}$0.update($p0,$p1,$p2);return $0;}}
tab.LayerEncodingModel=function(parent,paneSpecId){tab.LayerEncodingModel.initializeBase(this,[parent,new tab.PresModelPathItem('layer-encoding['+paneSpecId+']')]);this.$6=new tab.MarkSizeModel(this);}
tab.LayerEncodingModel.prototype={$6:null,add_newLayerEncoding:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newLayerEncoding:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_id:function(){return this.get_layerPresModel().paneSpec;},get_name:function(){return this.get_layerPresModel().name;},get_isTableCalc:function(){return this.get_layerPresModel().isTableCalc;},get_encodings:function(){return _.filter(this.get_layerPresModel().encodingUiItems,function($p1_0){
return $p1_0.isVisible&&$p1_0.isEnabled;});},get_textEncodingDropdown:function(){return this.getDropdownPresModel('text-encoding');},get_colorEncodingDropdown:function(){return this.getDropdownPresModel('color-encoding');},get_currentPrimitiveType:function(){var $0=_.find(this.get_primitiveTypes(),function($p1_0){
return $p1_0.isSelected;});return $0;},get_primitiveTypes:function(){return _.filter(this.get_layerPresModel().primitiveTypeUiItems,function($p1_0){
return $p1_0.isVisible&&$p1_0.isEnabled;});},get_markSizeModel:function(){return this.$6;},get_layerPresModel:function(){return this.presModel;},update:function(newPresModel){this.simpleSwapToUpdate(newPresModel,this.$7);if(ss.isNullOrUndefined(this.$6)){this.$6=new tab.MarkSizeModel(this);}this.$6.update(this.getDropdownPresModel('size-encoding'));},equals:function(pm){return this.get_id()===pm.paneSpec;},getDropdownPresModel:function($p0){var $0=_.filter(this.get_layerPresModel().encodingUiItems,function($p1_0){
return $p1_0.isVisible&&$p1_0.isEnabled&&$p1_0.encodingType===$p0;});if(ss.isNullOrUndefined($0)||$0.length!==1){return null;}return $0[0].marksCardDropdownItem;}}
tab.MarksCardModel=function(parent){this.$6=[];tab.MarksCardModel.initializeBase(this,[parent,new tab.PresModelPathItem('marks-card')]);}
tab.MarksCardModel.prototype={$7:null,add_newMarksCard:function(value){this.$8=ss.Delegate.combine(this.$8,value);},remove_newMarksCard:function(value){this.$8=ss.Delegate.remove(this.$8,value);},$8:null,get_layers:function(){return this.$6;},get_activePaneSpecId:function(){return this.$7;},set_activePaneSpecId:function(value){this.$7=value;return value;},update:function(newPresModel){if(this.isNewPresModelSameAsOld(newPresModel)){return;}var $0=[];if(ss.isValue(newPresModel)&&ss.isValue(newPresModel.layer)){this.$9(newPresModel.layer,$0);}if(ss.isValue(newPresModel)&&ss.isValue(newPresModel.layers)){var $enum1=ss.IEnumerator.getEnumerator(newPresModel.layers);while($enum1.moveNext()){var $1=$enum1.current;this.$9($1,$0);}}this.$6=$0;this.swapAndCopyPresModel(newPresModel);this.raiseEvent(this.$8);},$9:function($p0,$p1){var $0=_.find(this.$6,function($p1_0){
return $p1_0.equals($p0);});if(ss.isNullOrUndefined($0)){$0=new tab.LayerEncodingModel(this,$p0.paneSpec);}$0.update($p0);$p1.add($0);}}
tab.MarkSizeModel=function(parent){tab.MarkSizeModel.initializeBase(this,[parent,new tab.PresModelPathItem('mark-size')]);this.$6=parent;}
tab.MarkSizeModel.prototype={$6:null,$7:null,add_sliderFractionUpdated:function(value){this.$8=ss.Delegate.combine(this.$8,value);},remove_sliderFractionUpdated:function(value){this.$8=ss.Delegate.remove(this.$8,value);},$8:null,get_markSizePresModel:function(){return this.presModel;},get_explanation:function(){return this.get_markSizePresModel().explanation;},get_minMarkSize:function(){return this.get_markSizePresModel().minMarkSize;},get_maxMarkSize:function(){return this.get_markSizePresModel().maxMarkSize;},get_currentMarkSize:function(){return this.get_markSizePresModel().markSize;},get_currentSliderFraction:function(){return this.$7.valueToFraction(this.get_currentMarkSize());},get_transform:function(){return this.$7;},get_parentModel:function(){return this.$6;},getCurrentFraction:function(){return this.get_currentSliderFraction();},setCurrentFraction:function(newValue){},markSizeUpdated:function(){if(ss.isValue(this.$8)){this.$8(this.get_currentSliderFraction());}},update:function(pmodel){if(ss.isValue(pmodel)){this.$9(pmodel);}this.simpleSwapToUpdate(pmodel,ss.Delegate.create(this,this.markSizeUpdated));},$9:function($p0){switch($p0.inflectionPoints.length){case 0:this.$7=new tab.LinearRangeTransform($p0.minMarkSize,$p0.maxMarkSize);break;case 1:var $0=$p0.inflectionPoints[0];this.$7=new tab.AcceleratingRangeTransform($p0.minMarkSize,$p0.maxMarkSize,$0.inflectionFraction,$0.inflectionValue,$0.inflectionFraction,$0.inflectionValue);break;case 2:default:var $1=$p0.inflectionPoints[0];var $2=$p0.inflectionPoints[1];this.$7=new tab.AcceleratingRangeTransform($p0.minMarkSize,$p0.maxMarkSize,$1.inflectionFraction,$1.inflectionValue,$2.inflectionFraction,$2.inflectionValue);break;}}}
tab.DataSchemaModel=function(parent){tab.DataSchemaModel.initializeBase(this,[parent,new tab.PresModelPathItem('dataSchema')]);this.$6=[];}
tab.DataSchemaModel.prototype={$6:null,add_newDataSchema:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newDataSchema:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_parametersDataSource:function(){if(ss.isNullOrUndefined(this.get_dataSchemaPresModel())){return null;}var $enum1=ss.IEnumerator.getEnumerator(this.$6);while($enum1.moveNext()){var $0=$enum1.current;if($0.get_name()===this.get_dataSchemaPresModel().parametersDatasource){return $0;}}return null;},get_dataSchemaPresModel:function(){return this.presModel;},get_dataSources:function(){return this.$6;},getDefaultDataSourceForSheet:function(sheetName){if(ss.isNullOrUndefined(this.get_dataSchemaPresModel())){return null;}var $0=this.get_dataSchemaPresModel().worksheetDataSchemaMap[sheetName].primaryDatasource;if(String.isNullOrEmpty($0)){return _.chain(this.$6).filter(ss.Delegate.create(this,function($p1_0){
return $p1_0.get_name()!==this.get_dataSchemaPresModel().parametersDatasource;})).last().value();}return _.find(this.$6,function($p1_0){
return $p1_0.get_name()===$0;});},findField:function(globalFieldName){var $0=this.findDataSourceFromGlobalFieldName(globalFieldName);if(ss.isNullOrUndefined($0)){return null;}return $0.findField(globalFieldName);},findDataSourceFromGlobalFieldName:function(fn){var $0=tab.DataSourceModel.splitGlobalFieldName(fn);if($0.length<=1){return null;}var $1=$0[0].replace(new RegExp('\\]\\]'),']');return _.find(this.$6,function($p1_0){
return $p1_0.get_name()===$1;});},dataSourceForField:function(field){return this.findDataSourceFromGlobalFieldName(field.get_globalName());},update:function(newPresModel){if(this.isNewPresModelSameAsOld(newPresModel)){return;}var $0=(ss.isValue(newPresModel))?newPresModel.dataSourceList:new Array(0);var $1=this.$6.clone();var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $2=$enum1.current;var $3=_.find(this.$6,function($p1_0){
return $p1_0.get_name()===$2.datasource;});if(ss.isNullOrUndefined($3)){$3=new tab.DataSourceModel(this);this.$6.add($3);}else{$1.remove($3);}$3.update($2);}var $enum2=ss.IEnumerator.getEnumerator($1);while($enum2.moveNext()){var $4=$enum2.current;this.$6.remove($4);}this.swapAndCopyPresModel(newPresModel);this.raiseEvent(this.$7);}}
tab.PillModel=function(parent,index){tab.PillModel.initializeBase(this,[parent,new tab.PresModelPathItem(index.toString())]);}
tab.PillModel.prototype={$6:null,get_encodingType:function(){if(ss.isNullOrUndefined(this.get_item())||ss.isNullOrUndefined(this.get_item().encodingType)){return 'invalid-encoding';}return this.get_item().encodingType;},get_alternateEncodings:function(){if(ss.isNullOrUndefined(this.get_item())||ss.isNullOrUndefined(this.get_item().encodingUiItems)){return [];}return _.filter(this.get_item().encodingUiItems,function($p1_0){
return $p1_0.isVisible&&$p1_0.isEnabled;});},get_filterType:function(){if(ss.isNullOrUndefined(this.get_item())||ss.isNullOrUndefined(this.get_item().filterIconType)){return 'no-filter';}return this.get_item().filterIconType;},get_hasDrill:function(){return (this.get_item().hasDrill||false);},get_shouldDrill:function(){return this.get_hasDrill()&&(this.get_item().shouldDrill||false);},get_item:function(){return this.presModel;},get_column:function(){return this.$6;},get_tooltip:function(){return tableau.format.stripFormattedText(this.get_item().tooltip);},get_sideIconToolip:function(){return tableau.format.stripFormattedText(this.get_item().iconTooltip);},get_displayName:function(){return this.get_item().displayText;},get_contextMenuCommands:function(){return this.get_item().commands;},get_isMultipleFields:function(){return this.get_item().encodingType!=='invalid-encoding'&&Type.canCast(this.$6,tab.MultipleFieldsModel);},update:function(item,newColumn){if(this.isNewPresModelSameAsOld(item)){return;}this.$6=newColumn;this.swapAndCopyPresModel(item);}}
tab.ShelfModel=function(parent,index){tab.ShelfModel.initializeBase(this,[parent,new tab.PresModelPathItem(index.toString())]);}
tab.ShelfModel.prototype={$6:null,add_shelfChanged:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_shelfChanged:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_paneId:function(){return (ss.isValue(this.get_$8().paneSpec))?this.get_$8().paneSpec:0;},get_shelfType:function(){return this.get_$8().shelfType;},get_pills:function(){return this.$6;},get_tooltip:function(){return tableau.format.stripFormattedText(this.get_$8().tooltip);},get_$8:function(){return this.get_presModel();},update:function(shelf,schema){if(this.isNewPresModelSameAsOld(shelf)){return;}if(ss.isNull(shelf.shelfItems)){this.$6=[];}else if(ss.isValue(shelf.shelfItems)){var $0=[];var $1=new tab.ShelfItemsArrayModel(this);for(var $2=0;$2<shelf.shelfItems.length;$2++){var $3=shelf.shelfItems[$2];var $4=$3.fn;var $5;if(String.isNullOrEmpty($4)&&shelf.shelfType==='encoding-shelf'){$5=new tab.MultipleFieldsModel();}else{$5=schema.findField($4);}if(ss.isNullOrUndefined($5)){$3.isInvalid=true;}if($3.isInvalid){var $7=new tab.FieldColumnModel(schema.findDataSourceFromGlobalFieldName($4));var $8={};$8.type='column';$8.fn=$4;$8.description=$4;$8.fieldIconIdx=-1;$7.update($8);$5=$7;}var $6=new tab.PillModel($1,$2);$6.update($3,$5);$0.add($6);}this.$6=$0;}this.swapAndCopyPresModel(shelf);this.raiseEvent(this.$7,this);}}
tab.ShelfItemsArrayModel=function(parent){tab.ShelfItemsArrayModel.initializeBase(this,[parent,new tab.PresModelPathItem('shelfItems',1)]);}
tab.VisualModel=function(parent){this.$A=[];tab.VisualModel.initializeBase(this,[parent,new tab.PresModelPathItem('visual')]);this.$16={};this.$17={};this.$18={};this.$19={};this.$7=new tab.SelectionsModel(this,'selectionList');this.$8=new tab.SelectionModel(null,-1);this.$9=new tab.SelectionsModel(this,'brushingSelectionList');this.$6=new tab.VisualImageModel(this);this.$1B=true;this.$1C=false;this.$8.update(tab.SelectionsModel.$8('tuples'));}
tab.VisualModel.get_$26=function(){return tab.Logger.lazyGetLogger(tab.VisualModel);}
tab.VisualModel.prototype={$6:null,$7:null,$8:null,$9:null,$B:null,$C:null,$D:null,$E:null,$F:null,$10:null,$11:null,$12:null,$13:null,$14:null,$15:null,$16:null,$17:null,$18:null,$19:null,$1A:null,$1B:false,$1C:false,$1D:false,add_newVisual:function(value){this.$1E=ss.Delegate.combine(this.$1E,value);},remove_newVisual:function(value){this.$1E=ss.Delegate.remove(this.$1E,value);},$1E:null,add_newFilters:function(value){this.$1F=ss.Delegate.combine(this.$1F,value);},remove_newFilters:function(value){this.$1F=ss.Delegate.remove(this.$1F,value);},$1F:null,add_newHiddenTuples:function(value){this.$20=ss.Delegate.combine(this.$20,value);},remove_newHiddenTuples:function(value){this.$20=ss.Delegate.remove(this.$20,value);},$20:null,add_newFilteredTuples:function(value){this.$21=ss.Delegate.combine(this.$21,value);},remove_newFilteredTuples:function(value){this.$21=ss.Delegate.remove(this.$21,value);},$21:null,add_urlInfoCacheChange:function(value){this.$22=ss.Delegate.combine(this.$22,value);},remove_urlInfoCacheChange:function(value){this.$22=ss.Delegate.remove(this.$22,value);},$22:null,add_visualValidStateChanged:function(value){this.$23=ss.Delegate.combine(this.$23,value);},remove_visualValidStateChanged:function(value){this.$23=ss.Delegate.remove(this.$23,value);},$23:null,add_brushingFromActionChanged:function(value){this.$24=ss.Delegate.combine(this.$24,value);},remove_brushingFromActionChanged:function(value){this.$24=ss.Delegate.remove(this.$24,value);},$24:null,add_colorDictionaryChanged:function(value){this.$25=ss.Delegate.combine(this.$25,value);},remove_colorDictionaryChanged:function(value){this.$25=ss.Delegate.remove(this.$25,value);},$25:null,get_worksheetName:function(){return this.get_zone().get_worksheetName();},get_containerGeometry:function(){return this.get_zone().get_zoneContentRect();},get_visualPresModel:function(){return this.presModel;},get_scenePresModel:function(){return this.get_visualPresModel().scene;},get_shelves:function(){return this.$C;},get_marksCardModel:function(){return this.$F;},get_selectionsModel:function(){return this.$7;},get_impliedSelectionModel:function(){return this.$8;},get_brushingsModel:function(){return this.$9;},get_showMeModel:function(){return this.$10;},get_sceneModel:function(){return this.$D;},get_labelsModel:function(){return this.$E;},get_visualImageModel:function(){return this.$6;},get_filters:function(){return this.$A;},get_geometryModel:function(){return this.$15;},get_sortIndicatorsModel:function(){return this.$14;},get_vizDataModel:function(){return this.$11;},get_titleModel:function(){return this.$13;},get_captionModel:function(){return this.$12;},get_hiddenTuples:function(){return this.$17;},get_filteredTuples:function(){return this.$19;},get_isMap:function(){return this.get_visualPresModel().isMap;},get_floatingToolbarVisibility:function(){return this.get_visualPresModel().floatingToolbarVisibility;},get_cacheUrlInfo:function(){return this.$1A;},get_hasModifiedAxes:function(){return this.get_visualPresModel().hasModifiedAxes;},get_shouldUpdateFilters:function(){return this.$1D;},set_shouldUpdateFilters:function(value){this.$1D=value;return value;},get_shouldUpdate:function(){return tab.ApplicationModel.get_instance().get_autoUpdate();},get_invalidSheets:function(){var $0=tab.ApplicationModel.get_instance().get_workbook().findContentDashboard();return $0.get_invalidSheets();},get_isVisualValid:function(){return this.$1B;},set_isVisualValid:function(value){if(this.get_visualPresModel().valid&&value!==this.$1B){this.$1B=value;this.raiseEvent(this.$23);}return value;},get_isBrushedFromAction:function(){return this.$1C;},set_isBrushedFromAction:function(value){if(this.$1C!==value){this.$1C=value;this.raiseEvent(this.$24);}return value;},get_zone:function(){var $0=Type.safeCast(this.get_parent(),tab.ZoneContentWrapperModel);return $0.get_zone();},vizDataContainsDuplicateCaption:function(caption){if(ss.isNullOrUndefined(this.get_vizDataModel())){return false;}return _.filter(this.get_vizDataModel().get_fieldCaptions(),function($p1_0){
return $p1_0===caption;}).length>1;},filterTuples:function(fieldName,tuplesToFilter){this.$18[fieldName]=tuplesToFilter;var $0={};var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$18));while($enum1.moveNext()){var $2=$enum1.current;var $3=this.$18[$2];var $enum2=ss.IEnumerator.getEnumerator($3);while($enum2.moveNext()){var $4=$enum2.current;$0[$4.toString()]=$4;}}var $1=Object.getKeyCount(this.$19)!==Object.getKeyCount($0);if(!$1){var $enum3=ss.IEnumerator.getEnumerator(Object.keys(this.$19));while($enum3.moveNext()){var $5=$enum3.current;if(!Object.keyExists($0,$5)){$1=true;break;}}}if($1){this.$19=$0;if(ss.isValue(this.$21)){this.$21();}}},hideTuples:function(fieldName,tuplesToHide){this.$16[fieldName]=tuplesToHide;var $0={};var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$16));while($enum1.moveNext()){var $2=$enum1.current;var $3=this.$16[$2];var $enum2=ss.IEnumerator.getEnumerator($3);while($enum2.moveNext()){var $4=$enum2.current;$0[$4.toString()]=$4;}}var $1=Object.getKeyCount(this.$17)!==Object.getKeyCount($0);if(!$1){var $enum3=ss.IEnumerator.getEnumerator(Object.keys(this.$17));while($enum3.moveNext()){var $5=$enum3.current;if(!Object.keyExists($0,$5)){$1=true;break;}}}if($1){this.$17=$0;if(ss.isValue(this.$20)){this.$20();}}},getMutableCopyOfPresModel:function(){var $0=this.get_visualPresModel().scene;var $1=this.get_visualPresModel().markLabels;var $2=this.get_visualPresModel().vizData;delete this.get_visualPresModel().scene;delete this.get_visualPresModel().vizData;delete this.get_visualPresModel().markLabels;var $3=tab.VisualModel.callBaseMethod(this, 'getMutableCopyOfPresModel');this.get_visualPresModel().scene=$0;this.get_visualPresModel().vizData=$2;this.get_visualPresModel().markLabels=$1;return $3;},update:function(visualPresModel){if(ss.isNullOrUndefined(this.$C)){this.$C=new tab.ShelvesModel(this);}if(ss.isValue(visualPresModel.shelves)){this.$C.update(visualPresModel.shelves,tab.ApplicationModel.get_instance().get_workbook().get_dataSchema());}if(ss.isValue(visualPresModel.vizData)){if(ss.isNullOrUndefined(this.$11)){this.$11=new tab.VizDataModel(this);}this.$11.update(visualPresModel.vizData);}if(ss.isNullOrUndefined(this.$D)){this.$D=new tab.SceneModel(this);}if(ss.isValue(visualPresModel.scene)){if(ss.isValue(this.$16)){var $9=Object.getKeyCount(this.$17)>0;this.$16={};this.$17={};if($9){this.raiseEvent(this.$20);}}if(ss.isValue(this.$18)){var $A=Object.getKeyCount(this.$19)>0;this.$18={};this.$19={};if($A){this.raiseEvent(this.$21);}}this.$D.update(visualPresModel.scene);}if(ss.isValue(visualPresModel.colorDictionary)&&ss.isValue(this.get_visualPresModel())){if(!_.isEqual(this.get_visualPresModel().colorDictionary,visualPresModel.colorDictionary)){this.raiseEvent(this.$25);}}if(ss.isNullOrUndefined(this.$E)){this.$E=new tab.SceneModel(this);}if(ss.isValue(visualPresModel.markLabels)){this.$E.update(visualPresModel.markLabels);}var $0=visualPresModel.viewJson||'';var $1=tab.JsonUtil.parseJson($0);this.$6.update($1);if(ss.isNullOrUndefined(this.$F)){this.$F=new tab.MarksCardModel(this);}if(ss.isValue(visualPresModel.marksCardPresModel)){this.$F.update(visualPresModel.marksCardPresModel);}if(ss.isValue(visualPresModel.selectionList)&&visualPresModel.selectionList.length>0){this.$7.update(visualPresModel.selectionList);}if(ss.isValue(visualPresModel.brushingSelectionList)){this.$9.update(visualPresModel.brushingSelectionList);}var $2=tab.BrushingComputer.getTuplesAssociatedWithSelectedNodes(this,this.$7.get_nodeSelection().get_nodes());this.$29($2);if(!ss.isValue(this.$10)){this.$10=new tab.CommandsModel(this);}if(ss.isValue(visualPresModel.showMeCommands)){this.$10.update(visualPresModel.showMeCommands);}var $3=visualPresModel.filtersJson||'';var $4=tab.JsonUtil.parseJson($3);if(this.$28($4,$3)){this.$B=$3;this.$A.clear();if(ss.isValue($4)){var $enum1=ss.IEnumerator.getEnumerator($4);while($enum1.moveNext()){var $B=$enum1.current;this.$A.add(new tab.FilterModel(this,$B));}}this.set_shouldUpdateFilters(true);}var $5=visualPresModel.cacheUrlInfoJson||'';var $6=tab.JsonUtil.parseJson($5);if(!_.isEqual($6,this.get_cacheUrlInfo())){this.$1A=$6;this.$27();}var $7=visualPresModel.geometryJson||'';if(!ss.isValue(this.$15)){this.$15=new tab.ViewGeometryModel(this);}var $8=tab.JsonUtil.parseJson($7);if(!_.isEqual($8,this.get_geometryModel().get_presModel())){this.$15.update($8);}if(ss.isNullOrUndefined(this.$13)){this.$13=new tab.TextRegionModel(this,'visualTitle');}if(ss.isValue(visualPresModel.visualTitle)){this.$13.update(visualPresModel.visualTitle);}if(!ss.isValue(this.$12)){this.$12=new tab.TextRegionModel(this,'visualCaption');}if(ss.isValue(visualPresModel.visualCaption)){this.$12.update(visualPresModel.visualCaption);}if(!ss.isValue(this.$14)){this.$14=new tab.SortIndicatorsModel(this);}if(ss.isValue(visualPresModel.sortIndicators)){this.$14.update(visualPresModel.sortIndicators);}this.swapAndCopyPresModel(visualPresModel);if(this.get_isVisualValid()!==this.get_visualPresModel().valid){this.$1B=this.get_visualPresModel().valid;this.raiseEvent(this.$23);}this.raiseNewVisual();},raiseNewVisual:function(){this.raiseEvent(this.$1E);},$27:function(){if(ss.isValue(this.get_cacheUrlInfo())){this.raiseEvent(this.$22);}},$28:function($p0,$p1){if(ss.isNullOrUndefined(this.$B)){return true;}if(ss.isValue($p0)){var $0=_.find($p0,function($p1_0){
return $p1_0.isTiled;});if(ss.isValue($0)){return true;}}return (this.$B!==$p1);},raiseNewFilters:function(){if(this.get_shouldUpdateFilters()){this.raiseEvent(this.$1F,this);this.set_shouldUpdateFilters(false);}},hasFilterFieldData:function(fieldName){return (ss.isValue(this.get_vizDataModel())&&this.get_vizDataModel().get_vizDataPresModel().filterFields.indexOf(fieldName)!==-1);},getEffectiveSelectedTuples:function(directTupleSelection){var $0;var $1=this.$8.get_ids();if(tab.MiscUtil.isNullOrEmpty($1)){$0=directTupleSelection;}else if(tab.MiscUtil.isNullOrEmpty(directTupleSelection)){$0=$1;}else{var $2=[];$2.addRange(directTupleSelection);$2.addRange($1);$0=$2;}return $0;},$29:function($p0){this.$8.setOverriddenTupleIds($p0);},$2A:function(){this.$8.setOverriddenTupleIds(new Array(0));}}
tab.DashboardModel=function(parent,dashboardID){this.$6={};tab.DashboardModel.initializeBase(this,[parent,new tab.PresModelPathItem('dashboardPresModel')]);this.$8=false;}
tab.DashboardModel.prototype={$7:null,$8:false,$9:false,add_newDashboard:function(value){this.$A=ss.Delegate.combine(this.$A,value);},remove_newDashboard:function(value){this.$A=ss.Delegate.remove(this.$A,value);},$A:null,add_activeZoneChanged:function(value){this.$B=ss.Delegate.combine(this.$B,value);},remove_activeZoneChanged:function(value){this.$B=ss.Delegate.remove(this.$B,value);},$B:null,get_zonesModel:function(){return this.$7;},get_zoneModels:function(){return (ss.isValue(this.$7))?this.$7.get_zoneModels():[];},get_actionPresModels:function(){return this.get_dashboardPresModel().userActions;},get_dashboardPresModel:function(){return this.presModel;},get_backgroundColor:function(){return this.get_dashboardPresModel().cssAttrs['backgroundColor'];},get_sheetName:function(){if(ss.isValue(this.get_dashboardPresModel().sheetLayoutInfo)){return this.get_dashboardPresModel().sheetLayoutInfo.sheetName;}return null;},get_invalidSheets:function(){return [this.get_dashboardPresModel().invalidSheets];},get_autoUpdate:function(){return this.$9;},set_autoUpdate:function(value){this.$9=value;return value;},get_invalid:function(){return this.$8;},set_invalid:function(value){if(value===this.$8){return;}this.$8=value;return value;},get_activeZoneID:function(){return this.get_dashboardPresModel().activeZoneId;},get_activeVisual:function(){if(ss.isNullOrUndefined(this.get_dashboardPresModel())){return null;}if(this.get_activeZoneID()>0){var $enum1=ss.IEnumerator.getEnumerator(this.get_zoneModels());while($enum1.moveNext()){var $0=$enum1.current;if($0.get_zoneId()===this.get_activeZoneID()){return $0.get_visualModel();}}}return null;},get_renderMode:function(){return tab.ApplicationModel.get_instance().get_renderMode();},get_formats:function(){return this.get_dashboardPresModel().cssAttrs;},get_portSize:function(){return this.get_dashboardPresModel().viewportSize;},get_isDashboard:function(){var $0=tab.ApplicationModel.get_instance().get_appPresModel().workbookPresModel.sheetsInfo;var $1=_.find($0,ss.Delegate.create(this,function($p1_0){
return $p1_0.sheet===this.get_sheetName();}));return $1.isDashboard;},get_flipboard:function(){var $0=_.find(this.get_zoneModels(),function($p1_0){
return $p1_0.get_zoneType()==='flipboard';});return $0.get_model();},getViewId:function(sheetName){if(!Object.keyExists(this.get_dashboardPresModel().viewIds,sheetName)){return null;}return this.get_dashboardPresModel().viewIds[sheetName];},getViewSession:function(sheetName){return this.$6[sheetName];},getZone:function(zoneId){return this.$7.getZone(zoneId);},hasZone:function(zoneId){return this.$7.hasZone(zoneId);},isValidSheet:function(zone){return ss.isValue(this.get_dashboardPresModel().invalidSheets)&&(zone.get_zoneType()!=='viz'||this.get_dashboardPresModel().invalidSheets.indexOf(zone.get_worksheetName())===-1);},update:function(dashboardPresModel){if(ss.isValue(dashboardPresModel.zones)){if(!ss.isValue(this.$7)){this.$7=new tab.ZonesModel(this);}this.$7.update(dashboardPresModel.zones);var $0=tab.ModelUtils.getVisualModelsFromDashboard(this);var $enum1=ss.IEnumerator.getEnumerator(Object.keys($0));while($enum1.moveNext()){var $1=$enum1.current;$0[$1].raiseNewFilters();}}if(ss.isValue(dashboardPresModel.autoUpdate)){this.$9=dashboardPresModel.autoUpdate;}if(ss.isValue(dashboardPresModel.viewIds)){var $dict2=dashboardPresModel.viewIds;for(var $key3 in $dict2){var $3={key:$key3,value:$dict2[$key3]};var $4=$3.key;var $5=$3.value;var $6=this.$6[$4];if(ss.isNullOrUndefined($6)){$6=new tab.ViewSession(tab.CommandController.get().get_legacySession().get_urlRoot(),$4,$5);this.$6[$4]=$6;}$6.set_viewId($5);}var $2=_.difference(_.keys(this.$6),_.keys(dashboardPresModel.viewIds));var $enum4=ss.IEnumerator.getEnumerator($2);while($enum4.moveNext()){var $7=$enum4.current;delete this.$6[$7];}}if(ss.isValue(dashboardPresModel.activeZoneId)){if((ss.isNullOrUndefined(this.get_dashboardPresModel())||this.get_dashboardPresModel().activeZoneId!==dashboardPresModel.activeZoneId)){this.raiseEvent(this.$B);}}if(!ss.isUndefined(dashboardPresModel.modifiedSheets)){this.raiseEvent(function(){
tab.CommandController.get().get_legacySession().fireEvent('modifiedSheetsChanged',dashboardPresModel.modifiedSheets);});}this.swapAndCopyPresModel(dashboardPresModel);this.raiseEvent(this.$A);this.$C();},$C:function(){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return;}var $0=tab.ModelUtils.getVisualModelsFromDashboard(this);var $1=null;var $dict1=$0;for(var $key2 in $dict1){var $3={key:$key2,value:$dict1[$key2]};if(!$3.value.get_selectionsModel().get_nodeSelection().get_isEmpty()||!$3.value.get_selectionsModel().get_tupleSelection().get_isEmpty()){if(ss.isNullOrUndefined($3.value.get_vizDataModel())||!tab.MiscUtil.isNullOrEmpty($3.value.get_vizDataModel().get_highlightCaptions())){$1=$3.key;}break;}}var $2={};if(ss.isValue($1)){var $4=tab.ActionUtils.getApplicableActions($1,'on-select','highlight');var $enum3=ss.IEnumerator.getEnumerator($4);while($enum3.moveNext()){var $5=$enum3.current;if($5.sourceWorksheets.contains($1)){var $enum4=ss.IEnumerator.getEnumerator($5.targetWorksheets);while($enum4.moveNext()){var $6=$enum4.current;$2[$6]=true;}}}}var $dict5=$0;for(var $key6 in $dict5){var $7={key:$key6,value:$dict5[$key6]};var $8=Object.keyExists($2,$7.key);$7.value.set_isBrushedFromAction($8);}}}
tab.WorkbookModel=function(parent){tab.WorkbookModel.initializeBase(this,[parent,new tab.PresModelPathItem('workbookPresModel')]);this.$6=new tab.CommandsModel(this);this.$8=new tab.DataSchemaModel(this);}
tab.WorkbookModel.prototype={$6:null,$7:null,$8:null,$9:null,add_newDashboard:function(value){this.$A=ss.Delegate.combine(this.$A,value);},remove_newDashboard:function(value){this.$A=ss.Delegate.remove(this.$A,value);},$A:null,add_dashboardDeleted:function(value){this.$B=ss.Delegate.combine(this.$B,value);},remove_dashboardDeleted:function(value){this.$B=ss.Delegate.remove(this.$B,value);},$B:null,add_sheetsChanged:function(value){this.$C=ss.Delegate.combine(this.$C,value);},remove_sheetsChanged:function(value){this.$C=ss.Delegate.remove(this.$C,value);},$C:null,get_dataSchema:function(){return this.$8;},get_commands:function(){return this.$6;},get_$D:function(){return this.$7;},get_storyboard:function(){var $0=tab.ModelUtils.findContentDashboard();if($0.get_sheetName()===this.$7.get_sheetName()){return null;}return this.$7;},get_sheetsInfo:function(){return this.$9;},get_isWorkbookIncomplete:function(){return this.get_removedDataSourceCount()>0||this.get_removedSheetCount()>0;},get_isWorkbookModifiedAuthoring:function(){return ss.isValue(this.get_$E())&&this.get_$E().workbookModified;},get_removedDataSourceCount:function(){return (this.get_$E().removedDatasourceCount||0);},get_removedSheetCount:function(){return (this.get_$E().removedSheetCount||0);},get_$E:function(){return this.presModel;},get_outerDashboardRepositoryUrl:function(){return (ss.isValue(this.$7)&&ss.isValue(this.$7.get_dashboardPresModel())&&ss.isValue(this.$7.get_dashboardPresModel().sheetLayoutInfo))?this.$7.get_dashboardPresModel().sheetLayoutInfo.repositoryUrl:null;},get_outerDashboardPortSize:function(){var $0=this.$7.get_portSize();return tab.$create_Size($0.x,$0.y);},$F:function($p0){return (ss.isValue($p0.dashboardPresModel.sheetLayoutInfo)&&$p0.dashboardPresModel.sheetLayoutInfo.sheetName!==tsConfig.current_sheet_name);},$10:function($p0){return (ss.isValue($p0.dashboardPresModel.sheetLayoutInfo)&&ss.isValue(this.get_$E())&&ss.isValue(this.get_$E().dashboardPresModel)&&ss.isValue(this.get_$E().dashboardPresModel.sheetLayoutInfo)&&$p0.dashboardPresModel.sheetLayoutInfo.layoutId!==this.get_$E().dashboardPresModel.sheetLayoutInfo.layoutId);},addNewDashboardHandler:function(handler){this.add_newDashboard(handler);if(ss.isValue(this.$7)){handler(this.$7);}},findContentDashboard:function(){if(ss.isNullOrUndefined(this.$7)){return null;}var $0=this.$7;var $enum1=ss.IEnumerator.getEnumerator($0.get_zoneModels());while($enum1.moveNext()){var $1=$enum1.current;if(Type.canCast($1.get_model(),tab.FlipboardModel)){$0=($1.get_model()).get_dashboardModel();break;}}return $0;},update:function(workbookPresModel){if(ss.isValue(workbookPresModel.workbookModified)&&(ss.isNullOrUndefined(this.presModel)||this.get_isWorkbookModifiedAuthoring()!==workbookPresModel.workbookModified)){this.raiseEvent(function(){
tab.CommandController.get().get_legacySession().fireEvent('workbookModifiedChanged',workbookPresModel.workbookModified);});}if(!ss.isValue(this.$8)){this.$8=new tab.DataSchemaModel(this);}if(ss.isValue(workbookPresModel.dataSchema)){this.$8.update(workbookPresModel.dataSchema);}if(ss.isUndefined(workbookPresModel.dashboardPresModel)){}else if(ss.isNull(workbookPresModel.dashboardPresModel)){var $0=this.$7;this.$7=null;this.raiseEvent(this.$B,$0);}else{if(this.$F(workbookPresModel)||this.$10(workbookPresModel)){this.$7=null;}if(!ss.isValue(this.$7)){this.$7=new tab.DashboardModel(this,'dashboardPresModel');this.raiseEvent(this.$A,this.$7);}this.$7.update(workbookPresModel.dashboardPresModel);}if(ss.isValue(workbookPresModel.commands)){this.$6.update(workbookPresModel.commands);}if(ss.isValue(workbookPresModel.sheetsInfo)){this.$9=workbookPresModel.sheetsInfo;this.raiseEvent(this.$C,this);}this.swapAndCopyPresModel(workbookPresModel);}}
tab.ShelvesModel=function(parent){this.$6=[];tab.ShelvesModel.initializeBase(this,[parent,new tab.PresModelPathItem('shelves',1)]);}
tab.ShelvesModel.createShelfModel=function(parent,shelf,schema,index){var $0=new tab.ShelfModel(new tab.ShelfListArrayModel(parent),index);$0.update(shelf,schema);return $0;}
tab.ShelvesModel.prototype={add_newShelves:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_newShelves:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_shelves:function(){return this.$6;},findShelf:function(st){return this.$9(this.$6,st);},update:function(pm,schema){if(this.isNewPresModelSameAsOld(pm)){return;}this.swapAndCopyPresModel(pm);this.$8(pm,schema);this.raiseEvent(this.$7);},$8:function($p0,$p1){if(ss.isValue($p0)){var $0=this.$6.clone();for(var $1=0;$1<$p0.shelfList.length;$1++){var $2=$p0.shelfList[$1];var $3=_.find(this.$6,function($p1_0){
return $p1_0.get_shelfType()===$2.shelfType&&$p1_0.get_paneId()===($2.paneSpec||0);});if(ss.isValue($3)){$0.remove($3);$3.update($2,$p1);}else{this.$6.add(tab.ShelvesModel.createShelfModel(this,$2,$p1,$1));}}var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $4=$enum1.current;this.$6.remove($4);}}},$9:function($p0,$p1){return _.find($p0,function($p1_0){
return $p1_0.get_shelfType()===$p1;});}}
tab.ShelfListArrayModel=function(parent){tab.ShelfListArrayModel.initializeBase(this,[parent,new tab.PresModelPathItem('shelfList',1)]);}
tab.ServerCommands=function(){}
tab.ServerCommands.executeServerCommand=function(c,uiBlockState,successCallback,errorCallback){tab.CommandController.SendCommand(tab.vqldomain$7.$7(c,uiBlockState,successCallback,errorCallback));}
tab.BaseSession=function(urlRoot){var $0=tabBootstrap.BaseUrlFormatter.formatBaseUrl();if(ss.isValue(urlRoot)){this.urlRoot=urlRoot;}else{this.urlRoot=tabBootstrap.BaseUrlFormatter.formatUrlRoot($0);}if(ss.isValue(tsConfig.site_root)){this.siteRoot=tsConfig.site_root;}else{this.siteRoot=$0;}}
tab.BaseSession.showAlertDialog=function(bodyText,title){try{tableau.util.showAlertDialog(bodyText, title);}catch($0){}}
tab.BaseSession.prototype={urlRoot:null,siteRoot:null,add_stateChanged:function(value){this.$5=ss.Delegate.combine(this.$5,value);},remove_stateChanged:function(value){this.$5=ss.Delegate.remove(this.$5,value);},$5:null,get_urlRoot:function(){return this.urlRoot;},get_id:function(){return tsConfig.sessionid;},get_historyPosition:function(){return tab.BaseSession.$3;},set_historyPosition:function(value){tab.BaseSession.$3=value;return value;},get_waitHandler:function(){if(ss.isNullOrUndefined(tab.BaseSession.$4)){tab.BaseSession.$4=new tab.WaitHandler();}return tab.BaseSession.$4;},get_sessionRoot:function(){return this.urlRoot+'/sessions/'+tsConfig.sessionid;},formatThumbnailReference:function(worksheetPath){return this.siteRoot+'/thumb/views/'+worksheetPath;},formatSessionTempfileReference:function(tempfileid,keepfile,attachment){return this.urlRoot+'/tempfile/sessions/'+tsConfig.sessionid+'/?key='+tempfileid+((keepfile)?'&keepfile=yes':'')+((attachment)?'&attachment=yes':'');},railsEncode:function(s){var $dict1=tab.BaseSession.$2;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};s=s.replace($0.value,$0.key);}return s;},nudgeWait:function(){if(ss.isNullOrUndefined(tab.BaseSession.$4)){return false;}tab.BaseSession.$4.nudge();return true;},incrementWait:function(immediateWait){if(ss.isNullOrUndefined(tab.BaseSession.$4)){return false;}tab.BaseSession.$4.addref(immediateWait);return true;},decrementWait:function(){if(ss.isNullOrUndefined(tab.BaseSession.$4)){return false;}tab.BaseSession.$4.release();return true;},handleSessionExpiration:function(){document.body.style.cursor='wait';tab.WindowHelper.reloadLocation();},handleSessionForbiddenAction:function(code,message){var $0=tab.Strings.SessionForbiddenActionTitle;var $1=tab.Strings.SessionForbiddenActionMsg;if(code===16){$1=message;}else if(code===18){$1=message;}else if(code===20){$1=message;}this.showDialog($1,$0);},handleSessionLimitExceeded:function(){if(tab.BaseSession.$0){return;}var $0=tab.Strings.TimeLimitExceededWarning;$0+='\n';$0+=tab.Strings.PressBackButtonMessage;var $1=tab.Strings.TimeLimitExceededTitle;tab.BaseSession.$0=true;this.showDialog($0,$1);},handleSessionKilled:function(info){this.$13(info,tab.Strings.SessionEndedAlertTitle,tab.Strings.SessionEndedAlertMessage);},handleUnknownErrorStatus:function(info){this.$13(info,tab.Strings.SessionUnknownErrorTitle,tab.Strings.SessionEndedAlertMessage);},getWindow:function(rootName){return rootName+tsConfig.sessionid.replace(new RegExp('[^A-Za-z0-9_]','g'),'_');},registerEventListener:function(evt,callback){return dojo.subscribe(this.$A(evt),callback);},fireEvent:function(evt,data){dojo.publish(this.$A(evt),[data]);},fireStateChanged:function(data){if(ss.isValue(this.$5)){this.$5(data);}},showDialog:function(bodyText,title){tab.BaseSession.showAlertDialog(bodyText,title);},openWindow:function(url,name,options){var $0=tableau.types.ExportDialogType.ViewData;;var $1=$0['name'];var $2='<div style="text-align:center">The '+$1+' has been generated.</div><br/>'+'<div style="text-align:center"><a onclick="dijit.getEnclosingWidget(this).hide();'+"window.open('"+url+"','"+name+"','"+options+"'); return false;\" "+'href="'+url+'">Download</a><span style="margin-left:60px">'+'<a onclick="dijit.getEnclosingWidget(this).hide(); '+'return false;" href="javascript:void(0);">Cancel</a></span></div>';var $3=ss.Delegate.create(this,function($p1_0,$p1_1){
this.showDialog($2,$0['title']);});if(!Object.keyExists($0,'noping')){var $4=(url.indexOf('?')===-1)?'?':'&';url+=$4+'nodata=true';var $5=this.$12($3,null,null,'none');var $6={};$6.type='GET';$6.url=url;this.$10($6,$5);}},openDownload:function(url,dialogData){if(ss.isValue(dialogData.popup)){var $0=dialogData.popup;var $1=window.open('about:blank',$0);window.setTimeout(ss.Delegate.create(this,function(){
var $1_0=new tab.WindowHelper($1);if(ss.isValue($1)&&!$1.closed&&!!$1_0.get_innerWidth()&&!!$1_0.get_innerHeight()){$1.location.href=url;}else{if(ss.isValue($1)){$1.close();}dialogData.popup=null;this.openDownload(url,dialogData);}}),500);}else{var $2="\n<div style='text-align:center'>{0}</div><br/>\n  <div class='tab-dialog-actions'>\n    <a name='ok' class='tab-styledButton left' target='{1}' href='{2}' onclick='dijit.getEnclosingWidget(this).hide();'>\n        <span class='tab-styledButtonLeft'></span>\n        <span class='tab-styledButtonMiddle'>{3}</span>\n        <span class='tab-styledButtonRight'></span>\n    </a><button name='cancel' class='tab-styledButton' onclick='dijit.getEnclosingWidget(this).hide();'>\n        <span class='tab-styledButtonLeft'></span>\n        <span class='tab-styledButtonMiddle'>{4}</span>\n        <span class='tab-styledButtonRight'></span>\n    </button>\n  </div>";var $3=(url.indexOf('?')===-1)?'?':'&';url+=$3+'download=true';var $4='_blank';var $5=String.format($2,dialogData.message,$4,url,tab.Strings.DialogButtonDownload,tab.Strings.DialogButtonCancel);var $6=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.showDialog($5,dialogData.title);});if(ss.isNullOrUndefined(dialogData.noping)){var $7=(url.indexOf('?')===-1)?'?':'&';url+=$7+'nodata=true';var $8=this.$12(null,$6,null,'none');var $9={};$9.headers={Accept:'text/plain'};$9.dataType='text';$9.type='GET';$9.url=url;this.$10($9,$8);}else{this.showDialog($5,dialogData.title);}}},showDownloads:function(urlsByName,dialogData){var $0="\n<div style='text-align:center'>{0}</div><br />\n<div class='dlgDownloads' style='text-align:center'>";var $1="<a href='{1}' target='_blank'>{0}</a><br />";var $2="</div>\n  <div class='tab-dialog-footer'>\n    <div class='tab-dialog-actions'>\n      <input onclick='dijit.getEnclosingWidget(this).hide(); return false;' type='button' value='{0}' name='cancel' />\n    </div>\n  </div>\n</div>";var $3=new ss.StringBuilder(String.format($0,dialogData['message']));var $enum1=ss.IEnumerator.getEnumerator(Object.keys(urlsByName));while($enum1.moveNext()){var $5=$enum1.current;$3.append(String.format($1,$5,urlsByName[$5]));}$3.append(String.format($2,tab.Strings.DialogButtonCancel));var $4=$3.toString();this.showDialog($4,dialogData['title']);},sendSessionCommand:function(ns,command,inputModel,onSuccess,onError){var $0={};$0.type='POST';$0.url=this.$D(ns,command);$0.headers={Accept:'application/json, text/javascript'};$0.dataType='json';$0.success=onSuccess;$0.error=onError;var $1=tab.XhrUtil.getMultipartData(null,inputModel);$0.contentType='multipart/form-data; boundary='+$1.header;$0.data=$1.body;var $2=this.$11(null,onSuccess,null);this.$10($0,$2);},commandResultByName:function(options,commandNamespace,command){var $0=tab.CommandSerializer.buildQualifiedCommandName(commandNamespace,command);var $1=options;var $2=$1['vqlCmdResponse'];var $3=$2.cmdResultList;var $enum1=ss.IEnumerator.getEnumerator($3);while($enum1.moveNext()){var $4=$enum1.current;if($4.commandName===$0){return $4.commandReturn;}}return null;},requestUndoRedo:function(historyPosition,redo){if(redo){tab.WorksheetServerCommands.redo(historyPosition);}else{tab.WorksheetServerCommands.undo(historyPosition);}},requestSetIgnore:function(){var $0={};$0.error=null;$0.success=null;$0.type='POST';$0.url=this.urlRoot+'/setignore/sessions';var $1={_method:'PUT',target:tsConfig.sessionid};$0.data=$1;$0.async=false;this.$10($0);},requestRestoreFixedAxes:function(sheetId){if(!tsConfig.allow_filter){return;}var $0={};$0.commandNamespace='tabsrv';$0.commandName='restore-fixed-axes';var $1={};tab.CommandUtils.injectVizID($1,sheetId);$0.commandParams=$1;var $2=ss.Delegate.create(this,function($p1_0){
this.fireStateChanged($p1_0);});tab.CommandController.SendCommand(new tab.vqldomain$7($0,'immediately',$2,function(){
}));},executeServerCommand:function(c,successCallback,errorCallback){var $0={};this.$8($0,c);$0.headers={Accept:'text/javascript'};var $1=function($p1_0,$p1_1,$p1_2){
if(ss.isValue(successCallback)){successCallback($p1_0);}};var $2=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.$F($p1_2,$p1_0,c.noExceptionDialog);if(ss.isValue(errorCallback)){var $1_0={message:$p1_0.responseText,status:$p1_0.status};errorCallback(Error.createError($p1_2.toString(),$1_0));}});var $3=this.$11(null,$1,(ss.isValue(errorCallback))?$2:null);this.$10($0,$3);},$6:function($p0,$p1){var $0={};$0.type='POST';$0.url=$p0;$0.headers={Accept:'text/javascript'};$0.dataType='json';$0.data=$p1;return $0;},$7:function($p0){var $0={};$0.type='GET';$0.url=$p0;$0.headers={Accept:'text/javascript'};$0.dataType='json';return $0;},$8:function($p0,$p1){var $0=tab.XhrUtil.getMultipartData(null,$p1.commandParams);$p0.type='POST';$p0.dataType='json';$p0.contentType='multipart/form-data; boundary='+$0.header;$p0.data=$0.body;$p0.url=this.$D($p1.commandNamespace,$p1.commandName);},$9:function($p0,$p1){var $0=this.get_historyPosition();var $1=ss.Delegate.create(this,function(){
this.requestUndoRedo($0,false);});var $2=ss.Delegate.create(this,function(){
this.requestUndoRedo($0+1,true);});this.$E($1,$2,$p1);++tab.BaseSession.$3;},$A:function($p0){return this.getTopicCore($p0,null);},$B:function($p0){return this.urlRoot+'/'+$p0;},$C:function($p0){return tabBootstrap.BaseUrlFormatter.formatSessionMethod($p0,tsConfig.sessionid,this.urlRoot);},$D:function($p0,$p1){return this.get_sessionRoot()+'/commands/'+$p0+'/'+$p1;},$E:function($p0,$p1,$p2){if(ss.isValue(tab.BaseSession.$1)){tab.BaseSession.$1.back=$p0;}else{tab.DojoCurrentState.setInitialState($p0,$p2);}tab.BaseSession.$1=new tab.DojoCurrentState();tab.BaseSession.$1.back=null;tab.BaseSession.$1.forward=$p1;tab.DojoCurrentState.addToHistory(tab.BaseSession.$1,$p2);},$F:function($p0,$p1,$p2){var $0=$p1.responseText.match(new RegExp('Fatal exception in vizql engine'));if($p1.status===410||$p1.status===404||$p1.status===403){this.handleSessionExpiration();}else if($p1.status===502||$p1.status===503||($p1.status===500&&$0!=null&&$0.length>0)){var $1=($p1.status===500)?$p1.responseText:null;this.handleSessionKilled($1);}else if($p1.status===413){this.handleSessionLimitExceeded();}else if(!$p1.status){var $2;if(!!$p1.responseText.length){var $3=new ss.StringBuilder();$3.append('XHR Response Status: 0\nReadyState:');$3.append($p1.readyState);$3.append('\nHeaders:\n');$3.append($p1.getAllResponseHeaders());$3.append('\nResponse:\n');$3.append($p1.responseText);$2=ss.Delegate.create(this,function(){
this.showDialog($3.toString(),tab.Strings.RequestAbortedByBrowser);});}else{$2=ss.Delegate.create(this,function(){
this.$14($p0,$p1);});}window.setTimeout($2,5000);}else if(ss.isNullOrUndefined($p2)||!$p2){this.$14($p0,$p1);}},$10:function($p0,$p1){return tab.XhrUtil.helper($p0,$p1);},$11:function($p0,$p1,$p2){return new tab.SessionAjaxCallManager(this,$p0,$p1,$p2,false,false);},$12:function($p0,$p1,$p2,$p3){var $0=($p3!=='none');var $1=($p3==='immediately');return new tab.SessionAjaxCallManager(this,$p0,$p1,$p2,$0,$1);},formatLayoutMethod:function(layoutid,method){var $0=(ss.isValue(method))?this.$C(method):this.get_sessionRoot();$0+='/layouts/'+layoutid;return $0;},formatSheetMethod:function(sheetid,method){sheetid=encodeURIComponent(this.railsEncode(sheetid));var $0=(ss.isValue(method))?this.$C(method):this.get_sessionRoot();$0+='/sheets/'+sheetid;return $0;},formatViewMethod:function(viewid,method){var $0=(ss.isValue(method))?this.$C(method):this.get_sessionRoot();$0+='/views/'+viewid;return $0;},formatSaveSharedViewMethod:function(){return this.$C('save_shared_view');},formatFilterReference:function(sheetid,field,method){return this.formatSubSheetReference(sheetid,field,method,'filters');},formatSortReference:function(sheetid,field,method){return this.formatSubSheetReference(sheetid,field,method,'sorts');},formatSubSheetReference:function(sheetid,field,method,reftype){sheetid=encodeURIComponent(this.railsEncode(sheetid));var $0;if(ss.isValue(method)){$0=this.$C(method);}else{$0=this.get_sessionRoot();}$0+='/sheets/'+sheetid+'/'+reftype;if(ss.isValue(field)){$0+='/'+encodeURIComponent(this.railsEncode(field));}return $0;},getTopicCore:function(evt,subid){var $0=evt;var $1=new tab.EventMap();var $2=$1.get_item(evt);if($2<0||$2>=$1.get_$1()){throw Error.createError('Illegal event id '+$0,null);}if($2<=$1.get_item('stateChanged')){subid=null;}return (ss.isNullOrUndefined(subid))?$0:$0+subid;},$13:function($p0,$p1,$p2){var $0=null;try{$0=window.parent.location;}catch($4){}var $1=tableau.messages.unexpected;$1=$1.replace(new RegExp('\n','g'),'<br>');if(!String.isNullOrEmpty($p0)){$1+='<br/><br/>';$1+=$p0.trim();}var $2=$p1;var $3=ss.Delegate.create(this,function(){
$1+='<br/><br/>';$1+=$p2;var $1_0=ss.Delegate.create(this,function(){
this.requestSetIgnore();document.body.style.cursor='wait';tab.WindowHelper.reloadLocation();});tableau.util.showConfirmationDialog($1, $2, $1_0);});if(tsConfig.single_frame){$3();}else if(ss.isNullOrUndefined($0)){this.showDialog($1,$2);}else{$3();}},$14:function($p0,$p1){var $0=Type.safeCast($p0,String);var $1=Type.safeCast($p0,Error);var $2='';if(ss.isValue($0)){$2=$0.replaceAll('XMLHttpTransport.watchInFlight Error: ','');}else if(ss.isValue($1)){$2=$1.message.replaceAll('XMLHttpTransport.watchInFlight Error: ','');}$2=$2.replaceAll('XMLHttpTransport Error: ','');var $3=tab.Strings.ServerErrorUnexpected;if($p1.status<400){$3=tab.Strings.BrowserErrorProcessing;$2=tab.Strings.BrowserErrorProcessingMessage+'<br>'+$2;}else if($p1.status===400){$3=tab.Strings.ServerErrorRejected;$2=tab.Strings.ServerErrorRejectedMessage+'<br>';}else{var $4;try{$4=eval('('+$p1.responseText+')');$4=$4.replace(new RegExp('\n(?=s*[A-Z])','g'),'<li>').replace(new RegExp('\n','g'),'<br>');$4='<ul><li>'+$4+'</ul>';}catch($5){$4=$p1.responseText;}if(String.isNullOrEmpty($4)){$2=tab.Strings.ServerErrorGeneral($p1.status)+'<br>';}else{$2=$4;}}this.showDialog($2,$3);}}
tab.CustomizedViewSession=function(baseSession){this.$7=baseSession;}
tab.CustomizedViewSession.buildUrl=function(cv,loc){if(ss.isNullOrUndefined(loc)){loc=tab.WindowHelper.getLocation(tab.MiscUtil.getLocationWindow());}var $0=new RegExp('(.*/views/[^/]+)/([^/]+)(/.*)?$');var $1;if(ss.isValue(cv)){if(ss.isValue(cv.startViewId)){$1=String.format('$1/{0}/{1}/{2}',cv.startViewId,tab.CustomizedViewSession.$A(cv.owner.username),cv.urlId);}else{$1=String.format('$1/$2/{0}/{1}',tab.CustomizedViewSession.$A(cv.owner.username),cv.urlId);}}else{$1='$1/$2';}return String.format('{0}//{1}{2}{3}',loc.protocol,loc.host,loc.pathname.replace($0,$1),loc.search);}
tab.CustomizedViewSession.$8=function($p0){var $0=function($p1_0,$p1_1,$p1_2){
if(!ss.isValue($p0)){return;}var $1_0=tab.CustomizedViewSession.$9($p1_0);$p0((ss.isValue($1_0))?$1_0:($p1_2.message||''));};return $0;}
tab.CustomizedViewSession.$9=function($p0){if(ss.isValue($p0.responseText)){try{var $0=tab.JsonUtil.parseJson($p0.responseText);if(('msg' in $0)){return $0.msg;}}catch($1){}}return null;}
tab.CustomizedViewSession.$A=function($p0){var $0=tab.MiscUtil.percentEncode($p0.replaceAll('/','%2F'),tab.CustomizedViewSession.$6);return $0.replaceAll('%40','@');}
tab.CustomizedViewSession.prototype={$7:null,navigateToCustomizedView:function(cv){var $0=tab.MiscUtil.getLocationWindow();tab.SessionServerCommands.destroySessionAndForward($0,tab.CustomizedViewSession.buildUrl(cv,tab.WindowHelper.getLocation($0)));},navigateToOriginalView:function(){var $0=tab.MiscUtil.getLocationWindow();tab.SessionServerCommands.destroySessionAndForward($0,tab.CustomizedViewSession.buildUrl(null,tab.WindowHelper.getLocation($0)));},getCustomizedViews:function(success,failure){var $0=function($p1_0,$p1_1,$p1_2){
if(!ss.isValue(success)){return;}var $1_0;var $1_1=null;if(('customizedViews' in $p1_0)){$1_0=$p1_0.customizedViews;}else{$1_0=new Array(0);}if(('defaultCustomizedViewId' in $p1_0)){$1_1=$p1_0.defaultCustomizedViewId;}success($1_0,$1_1);};this.$C($0,tab.CustomizedViewSession.$8(failure),'get_customized_views',{sheet_id:tsConfig.current_sheet_name},'GET','none');},setDefaultCustomizedView:function(cv,success,failure){var $0=function($p1_0,$p1_1,$p1_2){
if(!ss.isValue(success)){return;}var $1_0=null;if(('defaultCv' in $p1_0)){$1_0=$p1_0.defaultCv;}success($1_0);};var $1={sheet_id:tsConfig.current_sheet_name};if(ss.isValue(cv)){$1['cvId']=cv.id;}this.$C($0,tab.CustomizedViewSession.$8(failure),'set_default_customized_view',$1);},destroyCustomizedView:function(cv,success,failure){tab.Param.verifyValue(cv,'cv');var $0=function($p1_0,$p1_1,$p1_2){
if(!ss.isValue(success)){return;}success();};this.$B($0,tab.CustomizedViewSession.$8(failure),'destroy_customized_view',{cvId:cv.id});},saveCustomizedView:function(cv,success,failure){tab.Param.verifyValue(cv,'cv');var $0=function($p1_0,$p1_1,$p1_2){
if(!ss.isValue(success)){return;}var $1_0=null;if(('cv' in $p1_0)){$1_0=$p1_0.cv;}success($1_0);};var $1={sheet_id:tsConfig.current_sheet_name,name:cv.name,shared:cv.isPublic};if(ss.isValue(cv.id)){$1['cvId']=cv.id;}this.$C($0,tab.CustomizedViewSession.$8(failure),'save_customized_view',$1);},updateCustomizedView:function(cv,success,failure){tab.Param.verifyValue(cv,'cv');var $0=function($p1_0,$p1_1,$p1_2){
if(!ss.isValue(success)){return;}var $1_0=null;if(('cv' in $p1_0)){$1_0=$p1_0.cv;}success($1_0);};var $1={sheet_id:tsConfig.current_sheet_name,name:cv.name,shared:cv.isPublic,cvId:cv.id};this.$C($0,tab.CustomizedViewSession.$8(failure),'update_customized_view',$1);},$B:function($p0,$p1,$p2,$p3){var $0=this.$7.$12(null,$p0,$p1,'immediately');var $1={};$1.type='POST';$1.url=this.$7.$B($p2);$1.headers={Accept:'text/javascript'};$1.dataType='json';if(ss.isValue($p3)){$1.data=$p3;}this.$7.$10($1,$0);},$C:function($p0,$p1,$p2,$p3,$p4,$p5){var $0={};$0.type=($p4||'POST');$0.url=this.$7.$C($p2);$0.headers={Accept:'text/javascript'};$0.dataType='json';if(ss.isValue($p3)){$0.data=$p3;}var $1=($p5||'immediately');var $2=this.$7.$12(null,$p0,$p1,$1);this.$7.$10($0,$2);}}
tab.DojoCurrentState=function(){}
tab.DojoCurrentState.setInitialState=function(undo,isEmbedded){if(isEmbedded){return;}var $0=function(){
};var $1={back:undo,forward:$0};dojo.back.setInitialState($1);}
tab.DojoCurrentState.addToHistory=function(state,isEmbedded){if(isEmbedded){return;}dojo.back.addToHistory(state);}
tab.DojoCurrentState.prototype={back:null,forward:null}
tab.LayoutSession=function(urlRoot,layoutid){tab.LayoutSession.initializeBase(this,[urlRoot]);this.layoutid=layoutid;}
tab.LayoutSession.getDashboardSize=function(appPresModel){var $0=null;if(ss.isValue(appPresModel)&&ss.isValue(appPresModel.workbookPresModel)&&ss.isValue(appPresModel.workbookPresModel.dashboardPresModel)){var $1=appPresModel.workbookPresModel.dashboardPresModel;$0=tab.$create_Size($1.viewportSize.x,$1.viewportSize.y);}return $0;}
tab.LayoutSession.getViewingUriFromWorkbook=function(w){var $0=_.find(w.views,function($p1_0){
return $p1_0.name===tsConfig.current_sheet_name;})||_.first(w.views);if($0==null){return tab.WindowHelper.getLocation(window.self).pathname;}return tab.LayoutSession.getViewingUri(w.repositoryUrl,$0.sheetId);}
tab.LayoutSession.getViewingUri=function(workbookId,viewId){var $0=new ss.StringBuilder();if(!String.isNullOrEmpty(tsConfig.site_root)){$0.append(tsConfig.site_root);}$0.append('/views');$0.append('/').append(workbookId).append('/').append(viewId);return $0.toString();}
tab.LayoutSession.getWorkbookUri=function(workbookId){var $0=new ss.StringBuilder();if(!String.isNullOrEmpty(tsConfig.site_root)){$0.append(tsConfig.site_root);}$0.append('/workbooks').append('/').append(workbookId);return $0.toString();}
tab.LayoutSession.getAuthoringUriFromWorkbook=function(w){var $0=_.find(w.views,function($p1_0){
return $p1_0.name===tsConfig.current_sheet_name;})||_.first(w.views);if($0==null){return tab.WindowHelper.getLocation(window.self).pathname;}return tab.LayoutSession.getAuthoringUri(w.repositoryUrl,$0.sheetId,tsConfig.current_sheet_name);}
tab.LayoutSession.getAuthoringUri=function(workbookId,viewId,sheetName){var $0=new ss.StringBuilder();if(!String.isNullOrEmpty(tsConfig.site_root)){$0.append(tsConfig.site_root);}$0.append('/authoring');$0.append('/').append(workbookId).append('/').append(viewId);if(ss.isValue(sheetName)){$0.append('/').append(encodeURIComponent((sheetName)));}return $0.toString();}
tab.LayoutSession.getAuthoringUriForSheet=function(sheetName){var $0=(tab.DomUtil.isEmbeddedCrossDomain())?window.location.pathname:window.parent.location.pathname;var $1=$0.indexOf('/views/');if($1<0){$1=$0.indexOf('/authoring/');}$0=$0.substr($1);var $2=2;var $3=3;var $4=$0.split('/');if($3>=$4.length){return null;}return tab.LayoutSession.getAuthoringUri($4[$2],$4[$3],sheetName);}
tab.LayoutSession.prototype={layoutid:null,$15:null,get_layoutId:function(){return this.layoutid;},set_layoutId:function(value){this.layoutid=value;return value;},formatDashboardTempfileReference:function(tempfileid,keepfile,attachment){return this.formatLayoutMethod(this.layoutid,'tempfile')+'/?key='+tempfileid+((keepfile)?'&keepfile=yes':'')+((attachment)?'&attachment=yes':'');},saveSharedView:function(button,primaryContentUrl,doShareAction){var $0=function($p1_0,$p1_1,$p1_2){
$p1_0.button=button;if(ss.isValue($p1_0.guid)){tab.XhrUtil.guid=$p1_0.guid;}dojo.publish('newGuid',[$p1_0]);};var $1=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
tab.XhrUtil.guid=null;if($p1_0.status===410||$p1_0.status===403){this.handleSessionExpiration();}else{var $1_0={};$1_0.button=button;doShareAction($1_0);}});var $2=this.$12(null,$0,$1,'none');var $3={};$3['sheet_id']=tab.XhrUtil.get_currentTabName();$3['parent_id']=tab.XhrUtil.parentID;$3['primary_content_url']=primaryContentUrl;$3['share_button']=button;var $4=this.$6(this.$C('save_shared_view'),$3);$4.async=false;$4.timeout=2000;this.$10($4,$2);},recordMetricsDifference:function(metricsJson){var $0={};$0['metrics']=metricsJson;$0['docmode'] = document.documentMode || '0';$0['useragent']=window.navigator.userAgent;var $1=this.$6(this.formatLayoutMethod(this.layoutid,'recordMetricsDifference'),$0);this.$10($1);},getBootstrapRequestLayoutModelSuccessFunction:function(sheetName){var $0=function($p1_0){
var $1_0=tab.LayoutSession.getDashboardSize($p1_0);dojo.publish('refreshLayoutModel',[$1_0]);if(!ss.isNullOrUndefined(sheetName)){dojo.publish('onBootstrapSuccess',[sheetName]);}};return $0;},formatExportURL:function(mimetype,options,scrollData){var $0=this.formatLayoutMethod(this.layoutid,'export')+'?format='+mimetype;if(ss.isValue(options)){$0+='&'+$.param(options);}if(ss.isValue(scrollData)){$0+='&'+$.param(scrollData);}return $0;},formatZoneURL:function(mimetype,id){var $0=this.formatLayoutMethod(this.layoutid,'image')+'?format='+mimetype;if(ss.isValue(id)){$0+='&zone_id='+id;}return $0;},saveAndOpenMetricsView:function(){window.open(this.$C('save_metrics_view'),'metrics','scrollbars,resizable');},metricsViewDownloadUrl:function(){return this.$C('download_metrics_view');},applySheetLink:function(protocol,target,query,source){if(!tsConfig.allow_sheetlink){return;}var $0=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.$16($p1_0);});var $1=this.$12(null,$0,null,'none');var $2={protocol:protocol,target:this.railsEncode(decodeURIComponent(target)),query:query,source:source};this.$15=source;var $3=this.$6(this.formatLayoutMethod(this.layoutid,'applylink'),$2);this.$10($3,$1);},getAutocompleteInfo:function(currentStr,updateFunc,field){var $0=function($p1_0,$p1_1,$p1_2){
updateFunc($p1_0.new_value);};var $1=this.$7(this.formatLayoutMethod(this.layoutid,'getautocomplete'));var $2={fieldname:field,input_string:currentStr};$1.data=$2;$1.success=$0;this.$10($1);},performPostLoadOperations:function(sheetId,responseCallback){var $0=function($p1_0,$p1_1,$p1_2){
if(ss.isValue(responseCallback)){responseCallback($p1_0);}};var $1=this.$12(null,$0,null,'none');var $2={sheet_id:sheetId};var $3={};$3.data=$2;$3.async=true;$3.type='GET';$3.headers={Accept:'text/javascript'};$3.dataType='json';$3.url=this.formatLayoutMethod(this.layoutid,'performPostLoadOperations');this.$10($3,$1);},launchEditing:function(sheetName){var $0=tab.LayoutSession.getAuthoringUriForSheet(sheetName);if(ss.isValue($0)){if(tab.DomUtil.isEmbeddedCrossDomain()||tsConfig.is_mobile_app){window.open($0,'tableauAuthoring');}else{tab.WindowHelper.setLocationHref(window.top,$0);}}},$A:function($p0){return this.getTopicCore($p0,'Layout_'+tsConfig.sheetId);},$16:function($p0){$p0.primarySheet=this.$15;}}
tab.SessionAjaxCallManager=function(session,onComplete,onSuccess,onError,usesWaitHandler,immediateWait){this.$0=session;this.$1=onComplete;this.$2=onSuccess;this.$3=onError;if(ss.isNullOrUndefined(usesWaitHandler)||usesWaitHandler){this.$4=this.$0.incrementWait(immediateWait);}}
tab.SessionAjaxCallManager.prototype={$0:null,$1:null,$2:null,$3:null,$4:false,get_completedDelegate:function(){return ss.Delegate.create(this,this.onComplete);},get_successDelegate:function(){return ss.Delegate.create(this,this.onSuccess);},get_errorDelegate:function(){return ss.Delegate.create(this,this.onError);},onComplete:function(xhr,textStatus){try{if(ss.isValue(this.$1)){this.$1(xhr,textStatus);}}finally{this.$5();}},onSuccess:function(data,textStatus,xhr){try{var $0=false;$0 = data instanceof Error;if($0){this.$0.$F(data,xhr);}else if(xhr.status===202){var $1=xhr.args;var $2=new tab.SessionAjaxHandler(this.$0,$1);$2.requestStatus();$0=true;}if(!$0){if(ss.isValue(this.$2)){this.$2(data,textStatus,xhr);}}}finally{this.$5();}},onError:function(xhr,textStatus,errorThrown){try{if(ss.isValue(this.$3)){this.$3(xhr,textStatus,errorThrown);}else{this.$0.$F(errorThrown,xhr);}}finally{this.$5();}},$5:function(){if(this.$4){this.$4=false;this.$0.decrementWait();}}}
tab.SessionAjaxHandler=function(session,args){this.$4='';this.$5=session;this.$1=args;this.$4=session.$C('status');}
tab.SessionAjaxHandler.prototype={$0:false,$1:null,$2:0,$3:1000,$5:null,requestStatus:function(){var $0=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.$6($p1_1,$p1_2);});var $1=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.$7($p1_0,$p1_1);});var $2=new tab.SessionAjaxCallManager(this.$5,null,$0,$1,false,false);var $3={};$3.type='GET';$3.url=this.$4;$3.cache=false;tab.XhrUtil.helper($3,$2);},$6:function($p0,$p1){if($p1.status===204){this.$0=true;}this.$8($p0,$p1);},$7:function($p0,$p1){if(ss.isNullOrUndefined(this.$1.complete)){this.$1.complete($p0,$p1);}},$8:function($p0,$p1){++this.$2;if(!(this.$2%10)&&this.$3<4000){this.$3*=2;}if(!this.$0){window.setTimeout(ss.Delegate.create(this,function(){
this.requestStatus();}),this.$3);}else{var $0=this.$1.skipResendOriginal;if(ss.isValue($0)&&$0){if(ss.isValue(this.$1.complete)){this.$1.complete($p1,$p0);}}else{window.setTimeout(ss.Delegate.create(this,function(){
this.$9();}),0);}}},$9:function(){if(!this.$1.async){delete this.$1.async;}tab.XhrUtil.helper(this.$1);}}
tab.SheetSession=function(urlRoot,sheetid){tab.SheetSession.initializeBase(this,[urlRoot]);this.sheetid=sheetid;}
tab.SheetSession.prototype={sheetid:null,add_sheetDataChanged:function(value){this.$15=ss.Delegate.combine(this.$15,value);},remove_sheetDataChanged:function(value){this.$15=ss.Delegate.remove(this.$15,value);},$15:null,get_sheetName:function(){return this.sheetid;},requestHSMChildren:function(field,member,onComplete,onError){if(!tsConfig.allow_filter){return;}var $0=function($p1_0,$p1_1,$p1_2){
onComplete($p1_0);};var $1=this.$12(null,$0,null,'none');var $2={};$2.name='file';$2.filename='file';$2.contentType='text/javascript';$2.content=tab.JsonUtil.toJson(member,true,'');var $3={_method:'PUT'};var $4=tab.XhrUtil.getMultipartData($2,$3);var $5={};$5.type='POST';$5.url=this.formatFilterReference(this.sheetid,field,'show_children');$5.dataType='json';$5.contentType='multipart/form-data; boundary='+$4.header;$5.data=$4.body;this.$10($5,$1);},getFilterItems:function(field,domain,itemRange,onComplete,onError){if(!tsConfig.allow_filter){return;}var $0=function($p1_0,$p1_1,$p1_2){
onComplete($p1_0);};var $1=this.$12(null,$0,null,'none');var $2={};$2['fromIndex']=itemRange.get_from();$2['toIndex']=itemRange.get_to();$2['domain']=domain;var $3=this.$7(this.formatFilterReference(this.sheetid,field,'getfilteritems'));$3.data=$2;this.$10($3,$1);},setPatternFilterState:function(pattern,filterDef){var $0=filterDef.field;tab.FilterClientCommands.setPatternFilterState(this.sheetid,$0,pattern.toString());},addManualFilterItems:function(data,filterDef){var $0=filterDef.field;tab.FilterClientCommands.addManualFilterItems(this.sheetid,$0,data);},searchFilter:function(field,query,maxRows,shouldGetIndex,domain,successHandler,errorHandler){if(!tsConfig.allow_filter){return null;}var $0=function($p1_0,$p1_1,$p1_2){
var $1_0=$p1_0;successHandler($1_0);};var $1=function($p1_0,$p1_1,$p1_2){
errorHandler($p1_2);};var $2=this.$12(null,$0,$1,'none');var $3=(shouldGetIndex)?'searchwithindex':'search';var $4=this.$7(this.formatFilterReference(this.sheetid,field,$3));var $5={query:query,maxRows:maxRows,domain:domain};$4.data=$5;return this.$10($4,$2);},restoreSheetAxes:function(){this.requestRestoreFixedAxes(this.sheetid);},$A:function($p0){return this.getTopicCore($p0,'Sheet_'+this.sheetid);},fireSheetDataChanged:function(){if(ss.isValue(this.$15)){this.$15();}}}
tab.ViewSession=function(urlRoot,sheetId,viewid){tab.ViewSession.initializeBase(this,[urlRoot,sheetId]);this.viewid=viewid;this.$16=tab.PermissionManager.buildCommandPermission();}
tab.ViewSession.$1C=function($p0){var $0=$p0;if(ss.isValue($p0)){$0=tab.$create_Point(Math.round($p0.x),Math.round($p0.y));}return $0;}
tab.ViewSession.prototype={$16:null,viewid:null,$17:false,get_viewId:function(){return this.viewid;},set_viewId:function(value){if(this.viewid===value){return;}this.viewid=value;return value;},fireSelectionChanged:function(data){this.fireEvent('selectionChanged',data);},fireChangesForViews:function(rgviews){var $0=0,$1;for($1=0;$1<rgviews.length;$1++){var $2=rgviews[$1].hasmodel;if(!$2){$0+=1;}}if($0>1){this.fireStateChanged(null);}else{this.fireSheetDataChanged();}},formatRegionImageURL:function(sregion){return this.formatViewMethod(this.viewid,'region')+'?r='+sregion;},formatRegionTileURL:function(cacheInfo,r,requestId){if(cacheInfo.useUrl){return this.formatTileURL(cacheInfo,r,0,0,requestId);}return this.formatRegionImageURL(r)+'&'+requestId;},formatLegendRegionImageURL:function(sregion,fn){var $0='';if(!tab.MiscUtil.isNullOrEmpty(fn)){$0='&fn='+encodeURIComponent(fn);}return this.formatViewMethod(this.viewid,'region')+'?r='+sregion+$0;},formatLegendRegionTileURL:function(cacheInfo,r,fn,fnid,requestId){fnid=(ss.isNullOrUndefined(fnid))?'':fnid;if(cacheInfo.useUrl){return this.formatTileURL(cacheInfo,r+fnid,0,0,requestId);}return this.formatLegendRegionImageURL(r,fn)+'&'+requestId;},formatTileURL:function(cacheInfo,r,tileX,tileY,requestId){if(cacheInfo.useUrl){var $1=cacheInfo.url;return $1.replaceAll('%SESSIONID%',tsConfig.sessionid).replaceAll('[r]',r).replaceAll('[x]',tileX.toString()).replaceAll('[y]',tileY.toString())+'?'+requestId;}var $0=this.formatViewMethod(this.viewid,'tile');return $0+'?r='+r+'&x='+tileX+'&y='+tileY+'&'+requestId;},formatUnderlyingDataURL:function(selectAtPoint){var $0=new ss.StringBuilder(this.formatViewMethod(this.viewid,'viewData'));$0.append('?maxrows=200');if(ss.isValue(selectAtPoint)){$0.append('&select_x=').append(selectAtPoint.x);$0.append('&select_y=').append(selectAtPoint.y);}return $0.toString();},formatExportURL:function(mimetype,options){var $0=this.formatViewMethod(this.viewid,'export')+'?format='+mimetype;if(ss.isValue(options)){$0+='&'+$.param(options);}return $0;},formatExportCrossTabURL:function(charset){if(ss.isNullOrUndefined(charset)){charset='utf8';}return this.formatViewMethod(this.viewid,'exportcrosstab')+'?charset='+charset;},fireRefreshLegacyLegendImages:function(data){this.fireEvent('refreshLegacyLegendImages',data);},zoomDoubleClick:function(regionPart,rect,paneResolverPoint,isZoomin,deferAPI){deferAPI.isZoomin=isZoomin;this.zoom(regionPart,rect,paneResolverPoint,isZoomin,deferAPI);},zoomIn:function(regionPart,rect,paneResolverPoint){this.zoom(regionPart,rect,paneResolverPoint,true,null);},zoomOut:function(regionPart,point,paneResolverPoint){this.zoom(regionPart,point,paneResolverPoint,false,null);},zoom:function(regionPart,rect,paneResolverPoint,isZoomin,deferAPI){if(!tsConfig.allow_filter){return;}var $0={};var $1=new tab.VizRegionRect();$1.r=regionPart;$1.x=rect.x;$1.y=rect.y;if(ss.isValue($1.x)){$1.x=Math.round($1.x);}if(ss.isValue($1.y)){$1.y=Math.round($1.y);}if(ss.isValue(rect.w)&&ss.isValue(rect.h)){$1.w=rect.w;$1.h=rect.h;}$0['vizRegionRect']=$1;$0['zoomIn']=isZoomin;$0['focus']=false;if(ss.isValue(paneResolverPoint)){paneResolverPoint=tab.ViewSession.$1C(paneResolverPoint);$0['paneResolverLocation']=paneResolverPoint;}var $2={};$2.commandNamespace='tabsrv';$2.commandName='pane-zoom-server';$2.commandParams=$0;tab.CommandUtils.injectVizID($2.commandParams,this.sheetid);var $3=ss.Delegate.create(this,function($p1_0){
if(ss.isValue(deferAPI)){deferAPI.setDeferLayoutUpdates(false);}this.fireSheetDataChanged();});tab.CommandController.SendCommand(new tab.vqldomain$7($2,'afterDelay',$3,function(){
}));},pan:function(regionPart,point,delta,onError){if(!tsConfig.allow_filter){return;}var $0={};$0['r']=regionPart;$0['panLocation']=tab.ViewSession.$1C(point);$0['panAmount']=tab.ViewSession.$1C(delta);var $1={};$1.commandNamespace='tabsrv';$1.commandName='pane-pan-server';$1.commandParams=$0;tab.CommandUtils.injectVizID($1.commandParams,this.sheetid);var $2=ss.Delegate.create(this,function($p1_0){
this.fireSheetDataChanged();});var $3=function($p1_0){
onError();};tab.ServerCommands.executeServerCommand($1,'afterDelay',$2,$3);},toggleHighlight:function(regionPart,encodedFieldName){var $0=ss.Delegate.create(this,function($p1_0){
this.$18(null,$p1_0);});var $1=encodedFieldName.split('\n');var $2=tab.SelectionClientCommands.$4(this.sheetid);tab.SelectionClientCommands.toggleLegendHighlight($2,this.sheetid,regionPart,$1,$0);},executeAction:function(action,successCallback,onFailure){if(action.commandType===9){this.executeCommand(action);}else{var $0={};$0.commandNamespace='tabdoc';$0.commandName='run-action';$0.commandParams=action.command.commandParams;tab.ServerCommands.executeServerCommand($0,'immediately',successCallback,onFailure);}},executeCommand:function(command){if(command==null){return;}switch(command.commandType){case 9:var $0={};$0.url=command.command.commandParams['url'];$0.target=command.command.commandParams['target'];tab.ActionUtils.launchActionUrls([$0]);break;case 7:var $1=null;if(ss.isValue(command.command)&&ss.isValue(command.command.commandParams)&&Object.keyExists(command.command.commandParams,'select-at-point')){$1=tab.JsonUtil.parseJson(command.command.commandParams['select-at-point']);}window.open(this.formatUnderlyingDataURL($1),this.getWindow('vud'),'scrollbars,resizable');break;case 1:case 2:case 4:case 6:case 11:case 12:case 10:case 13:break;default:break;}},levelDrill:function(position,direction,axis){if(!tsConfig.allow_filter){return;}var $0=(axis.toString()==='yheader')?'rows-shelf':'columns-shelf';var $1=(direction==='down');tab.FilterClientCommands.levelDrill(this.sheetid,position,$0,$1);},createUbertipModel:function(ubertip){var $0=tab.UbertipSerializer.deserializeUbertip(ubertip);if(ss.isValue($0)){tab.PermissionManager.filterCommands($0.commands,this.$16);}return $0;},$A:function($p0){var $0=new tab.EventMap();var $1=$0.get_item($p0);var $2=$0.get_item('viewChanged');if($1>=$2){return this.getTopicCore($p0,'View_'+this.sheetid);}return tab.ViewSession.callBaseMethod(this, '$A',[$p0]);},$18:function($p0,$p1){var $0=false;var $1=dojo.subscribe(this.$A('onTabSelect'),function($p1_0){
$0=true;});$p1.primarySheet=this.sheetid;if(ss.isValue($p1)&&ss.isValue($p0)){this.$1A();var $2;if(!$0&&(ss.isNullOrUndefined(tsConfig.allow_tooltip)||tsConfig.allow_tooltip)){var $3=$p1.ubertip;$2=this.createUbertipModel($3);}else{$2=null;}$p0($2);}dojo.unsubscribe($1);},$19:function($p0,$p1){var $0=null;if(ss.isValue($p1)){var $1=null;$1 = dijit.byId('tabbedNavigation');if(ss.isValue($1)){var $3=$1.getCurrentSheetInfo();if(ss.isValue($3)&&$p1.active_tab!==$3.sheetName){return;}}var $2=$p1.ubertip;$0=this.createUbertipModel($2);}this.$1A();$p0($0);},$1A:function(){this.$17=false;},$1B:function($p0,$p1){var $0;if(this.$17){return;}if($p1.status===413){$0='Operation timeout.  Undo last operation or press F5 to refresh';}else{this.$17=true;if($p1.status===410){$0='Viewer session expired';}else if($p1.status===409){$0='Session busy';}else{$0='Tooltip unavailable ('+$p1.status+')';}window.setTimeout(ss.Delegate.create(this,function(){
this.$1A();}),15000);}var $1=tab.$create_UbertipModel();$1.tooltipHtml='<div>'+$0+'</div>';if(ss.isValue($p0)){$p0($1);}}}
tab.WaitHandler=function(){this.$0=$('#loadingGlassPane');this.$0.bind('mousedown',false);this.$1=$('#loadingSpinner');this.$5=0;this.$6=true;this.$2=dojo.animateProperty;this.$3=dojo.fx.easing;this.$4=dojo.fadeOut;this.$9=null;this.$A=null;this.$D=true;this.$E=false;}
tab.WaitHandler.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:0,$6:false,$7:null,$8:null,$9:null,$A:null,$B:null,$C:null,$D:false,$E:false,isBusy:function(){return this.$5>0;},addref:function(immediateWait){if(!this.$6){return;}this.$5+=1;if(this.$5===1&&!this.$D&&!this.$E){this.$11(immediateWait);}},addrefAndTurnOnImmediately:function(){if(!this.$6){return;}this.$5+=1;this.$11(true,true);},showAndLock:function(){this.$11(true,true);this.lock();},lock:function(){this.$E=true;},unlock:function(){this.$E=false;},release:function(){if(!this.$6){return;}this.$5-=1;if(this.$5<0){this.$5=0;}this.nudge();},nudge:function(){if(this.$5>0||this.$E){return;}this.$10();},invalidate:function(){this.$6=false;this.$11();},reset:function(){this.$F();var $0=300;var $1='linear';this.$1.hide().css('opacity','0');if(!this.$0.length){return;}var $2=ss.Delegate.create(this,function(){
this.$0.css('cursor','default').hide();this.$B=null;var $1_0=$('.facadedom');if($1_0.length>0){$1_0.remove();}});var $3={node:this.$0[0],duration:$0,easing:this.$3[$1],onEnd:$2};this.$B=this.$4($3);this.$B.play();},onNextHide:function(f){this.$C=f;},$F:function(){if(ss.isValue(this.$7)){window.clearTimeout(this.$7);}delete this.glassShowTimer;if(ss.isValue(this.$8)){window.clearTimeout(this.$8);}delete this.spinnerShowTimer;if(ss.isValue(this.$9)){this.$9.stop();}if(ss.isValue(this.$A)){this.$A.stop();}},$10:function(){if(ss.isValue(this.$C)){this.$C();this.$C=null;}else{this.reset();}this.$D=false;},$11:function($p0,$p1){var $0=400;var $1=500;var $2=1900;var $3=100;var $4='quadOut';var $5='linear';var $6=0.24;if($p0){$0=0;$2-=400;}this.$F();if($p1){this.$12($1,$4,$6);this.$13($3,$5);}else{this.$7=window.setTimeout(ss.Delegate.create(this,function(){
this.$12($1,$4,$6);}),$0);this.$8=window.setTimeout(ss.Delegate.create(this,function(){
this.$13($3,$5);}),$2);}this.$D=true;},$12:function($p0,$p1,$p2){if(ss.isValue(this.$B)){this.$B.stop();}var $0=ss.Delegate.create(this,function(){
this.$0.show().css('cursor','wait');});var $1=ss.Delegate.create(this,function(){
this.$7=null;this.$9=null;});var $2={node:this.$0[0],onBegin:$0,onEnd:$1,onStop:$1,properties:{opacity:{start:0,end:$p2}},duration:$p0,easing:this.$3[$p1]};this.$9=this.$2($2);this.$9.play();},$13:function($p0,$p1){var $0=ss.Delegate.create(this,function(){
this.$1.show();});var $1=ss.Delegate.create(this,function(){
this.$8=null;this.$A=null;});var $2={node:this.$1[0],onBegin:$0,onEnd:$1,onStop:$1,properties:{opacity:{start:0,end:1}},duration:$p0,easing:this.$3[$p1]};this.$A=this.$2($2);this.$A.play();}}
tab.BrushingComputer=function(){this.$3={};this.$4={};this.$5={};}
tab.BrushingComputer.get_$7=function(){return tab.Logger.lazyGetLogger(tab.BrushingComputer);}
tab.BrushingComputer.computeFromLegend=function(legendVisualModel,selectedItemsIds,legendModel){var $0=new tab.BrushingComputer();if(!legendModel.get_catLegendPresModel().isHighlightEnabled){return $0;}var $1=legendVisualModel.get_vizDataModel();var $2=tab.DataUtils.$1(legendModel,selectedItemsIds,$1,legendModel.get_fieldCaptions());var $enum1=ss.IEnumerator.getEnumerator(legendModel.get_fieldCaptions());while($enum1.moveNext()){var $4=$enum1.current;if(legendVisualModel.vizDataContainsDuplicateCaption($4)){$0.$6=false;return $0;}}var $3;if(legendModel.get_isOneWay()){$3=tab.ModelUtils.getVisualModels(tab.ApplicationModel.get_instance());}else{$3={};var $5=tab.ActionUtils.getApplicableActions(legendVisualModel.get_worksheetName(),'on-select','highlight');var $enum2=ss.IEnumerator.getEnumerator($5);while($enum2.moveNext()){var $6=$enum2.current;if(ss.isNullOrUndefined($6.targetWorksheets)){continue;}var $enum3=ss.IEnumerator.getEnumerator($6.targetWorksheets);while($enum3.moveNext()){var $7=$enum3.current;var $8=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),$7);$3[$7]=$8;}}}var $dict4=$3;for(var $key5 in $dict4){var $9={key:$key5,value:$dict4[$key5]};var $A=$9.value;var $B=$A.get_vizDataModel();$0.$3[$9.key]=tab.DataUtils.$7($2,$B);var $C=[];var $dict6=$A.get_sceneModel().get_visualListModels();for(var $key7 in $dict6){var $D={key:$key7,value:$dict6[$key7]};var $E=tab.DataUtils.$3($A,$D.value);var $F=_.intersection($E,legendModel.get_fieldCaptions());if($F.length>0){var $10=tab.DataUtils.$1(legendModel,selectedItemsIds,$1,$F);$C.addRange(tab.DataUtils.$A($10,$A,$D.value));}}$0.$5[$9.key]=$C;var $enum8=ss.IEnumerator.getEnumerator(tab.ModelUtils.getVizCategoricalLegends($A));while($enum8.moveNext()){var $11=$enum8.current;if($11.get_isOneWay()||!$11.get_isHighlightEnabled()){continue;}var $12=tab.DataUtils.$9($2,$B,$11);if(!Object.keyExists($0.$4,$A.get_worksheetName())){$0.$4[$A.get_worksheetName()]={};}$0.$4[$A.get_worksheetName()][$11.get_legendType()]=$12;}}return $0;}
tab.BrushingComputer.getTuplesAssociatedWithSelectedNodes=function(visualModel,selectedNodes){if(ss.isNullOrUndefined(visualModel.get_vizDataModel())||ss.isNullOrUndefined(tab.ApplicationModel.get_instance().get_dataDictionary())){return new Array(0);}var $0=tab.DataUtils.$2(visualModel.get_vizDataModel(),selectedNodes);var $1=tab.BrushingComputer.$8($0,visualModel);return $1;}
tab.BrushingComputer.computeFromTuples=function(visualModel,tupleIDs,relatedActions){var $0=new tab.BrushingComputer();var $enum1=ss.IEnumerator.getEnumerator(relatedActions);while($enum1.moveNext()){var $1=$enum1.current;if(ss.isNullOrUndefined($1.targetWorksheets)){continue;}var $2=tab.CommandSerializer.deserialize($1.simpleCommandModel.simpleCommand);var $enum2=ss.IEnumerator.getEnumerator($1.targetWorksheets);while($enum2.moveNext()){var $3=$enum2.current;var $4=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),$3);if(ss.isNullOrUndefined($4)){continue;}var $5=$4.get_vizDataModel();if(ss.isNullOrUndefined($5)){continue;}var $6=$2.commandParams['special-fields'];if(tab.BrushingComputer.$A($6)){var $7=tab.ApplicationModel.get_instance().get_dataDictionary();var $8=tab.DataUtils.$5(visualModel.get_vizDataModel(),$5,$7,tupleIDs);var $9=$8.first;var $A=$8.second;$0.$3[$3]=tab.DataUtils.$6($9,$A,$5,$7);$0.$5[$3]=tab.DataUtils.$B($9,$A,$4,$7);$0.$C($4,visualModel,tupleIDs);}else{var $B;if(ss.isValue($6)){$B=tab.BrushingComputer.$B($6,$5);}else{if(visualModel===$4){var $E=_.intersection(visualModel.get_vizDataModel().get_highlightCaptions(),visualModel.get_vizDataModel().get_fieldCaptions());if(tab.MiscUtil.isNullOrEmpty($E)){continue;}}$B=tab.BrushingComputer.$9(visualModel.get_vizDataModel(),$5);}var $enum3=ss.IEnumerator.getEnumerator($B);while($enum3.moveNext()){var $F=$enum3.current;if(visualModel.vizDataContainsDuplicateCaption($F)){$0.$6=false;return $0;}}var $C=tab.DataUtils.$4(visualModel.get_vizDataModel(),tupleIDs,$B);$0.$3[$3]=tab.DataUtils.$7($C,$5);var $D=[];var $dict4=$4.get_sceneModel().get_visualListModels();for(var $key5 in $dict4){var $10={key:$key5,value:$dict4[$key5]};var $11=tab.DataUtils.$3($4,$10.value);var $12=_.intersection($11,$B);if($12.length>0){var $13=tab.DataUtils.$4(visualModel.get_vizDataModel(),tupleIDs,$12);$D.addRange(tab.DataUtils.$A($13,$4,$10.value));}}$0.$5[$3]=$D;$0.$C($4,visualModel,tupleIDs);}}}return $0;}
tab.BrushingComputer.$8=function($p0,$p1){var $0=[];if(ss.isNullOrUndefined($p1.get_vizDataModel())){return $0;}var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.current;$0=_.union($0,tab.DataUtils.$7($1,$p1.get_vizDataModel()));}return $0;}
tab.BrushingComputer.$9=function($p0,$p1){return _.intersection($p0.get_highlightCaptions(),$p1.get_highlightCaptions());}
tab.BrushingComputer.$A=function($p0){return ss.isValue($p0)&&$p0==='date-time';}
tab.BrushingComputer.$B=function($p0,$p1){var $0=[];if($p0==='all'){$0.addRange($p1.get_fieldCaptions());}return $0;}
tab.BrushingComputer.prototype={$6:true,get_isBrushingComputed:function(){return this.$6;},getTupleBrushing:function(worksheet){return (this.$3[worksheet]||[]);},getNodeBrushing:function(worksheet){return (this.$5[worksheet]||[]);},getLegendBrushing:function(worksheet){return this.$4[worksheet]||{};},$C:function($p0,$p1,$p2){var $0=$p0.get_vizDataModel();var $enum1=ss.IEnumerator.getEnumerator(tab.ModelUtils.getVizCategoricalLegends($p0));while($enum1.moveNext()){var $1=$enum1.current;if(ss.isNullOrUndefined($0)){continue;}if($1.get_isOneWay()||!$1.get_isHighlightEnabled()){continue;}var $2=_.intersection($p1.get_vizDataModel().get_fieldCaptions(),$1.get_fieldCaptions());var $3=tab.DataUtils.$4($p1.get_vizDataModel(),$p2,$2);var $4=tab.DataUtils.$9($3,$0,$1);if(!Object.keyExists(this.$4,$p0.get_worksheetName())){this.$4[$p0.get_worksheetName()]={};}this.$4[$p0.get_worksheetName()][$1.get_legendType()]=$4;}}}
tab.CategoricalFilterData=function(sheets,filterField,exclude,filterValues){this.$0=sheets;this.$1=filterField;this.$4=exclude;if(ss.isValue(filterValues)){this.$2=filterValues;}else{this.$2=[];}}
tab.CategoricalFilterData.prototype={$0:null,$1:null,$2:null,$3:false,$4:false,get_filterField:function(){return this.$1;},get_targetSheets:function(){return this.$0;},set_targetSheets:function(value){this.$0=value;return value;},get_includeAll:function(){return this.$3;},set_includeAll:function(value){this.$3=value;this.clearValues();return value;},get_isExclude:function(){return this.$4;},addValue:function(value){if(this.$2.contains(value)){return false;}this.$2.add(value);return true;},clearValues:function(){this.$2.clear();},getFilterValues:function(){return this.$2;},includesValue:function(value){if(this.get_includeAll()){return true;}return (this.$4!==this.$2.contains(value));},removeValue:function(value){if(this.$2.contains(value)){return false;}this.$2.remove(value);return true;}}
tab.Changelist=function(){this.$0=[];}
tab.Changelist.prototype={$0:null,addChange:function(change){this.$0.add(change);},compileForChecklist:function(domain){var $0={};for(var $4=0;$4<this.$0.length;++$4){var $5=this.$0[$4];switch($5.type){case 0:$0[$5.index]=$5.checkState;break;case 1:var $6=$5.range;var $7=$5.checkState;var $8=Math.min($6.get_from(),$6.get_to());var $9=Math.max($6.get_from(),$6.get_to());for(var $A=$8;$A<=$9;++$A){$0[$A]=$7;}break;}}var $1=[];var $2=[];var $dict1=$0;for(var $key2 in $dict1){var $B={key:$key2,value:$dict1[$key2]};var $C=parseInt($B.key,10);var $D=$B.value;if($D){$1.add($C);}else{$2.add($C);}}var $3=new tab.CompiledChecklistChangelist();$3.select=$1;$3.deselect=$2;$3.domain=domain;return $3;},compileForRadiolist:function(domain){var $0=this.$0.length-1;var $1=this.$0[$0];var $2=new tab.CompiledRadiolistChangelist();$2.index=$1.index;$2.domain=domain;return $2;},reset:function(){this.$0.clear();},appendChangelist:function(other){for(var $0=0;$0<other.$0.length;$0++){this.$0.add(other.$0[$0]);}}}
tab.RawChange=function(){}
tab.RawChange.prototype={range:null,index:0,type:0,checkState:false,setRange:function(range,checkState){this.type=1;this.range=range;this.checkState=checkState;},setSingle:function(index,checkState){this.type=0;this.index=index;this.checkState=checkState;}}
tab.CompiledChecklistChangelist=function(){this.select=new Array(0);this.deselect=new Array(0);}
tab.CompiledChecklistChangelist.prototype={select:null,deselect:null,domain:null}
tab.CompiledRadiolistChangelist=function(){}
tab.CompiledRadiolistChangelist.prototype={index:0,domain:null}
tab.CommandUtils=function(){}
tab.CommandUtils.newDocCommand=function(commandName){var $0={};$0.commandName=commandName;$0.commandNamespace='tabdoc';return $0;}
tab.CommandUtils.newSrvCommand=function(commandName){var $0={};$0.commandName=commandName;$0.commandNamespace='tabsrv';return $0;}
tab.CommandUtils.injectVizID=function(cmdParams,worksheetName){cmdParams['worksheet']=worksheetName;var $0=tab.ModelUtils.findContentDashboard().get_sheetName();if(worksheetName!==$0){cmdParams['dashboard']=$0;}var $1=tab.ApplicationModel.get_instance().get_workbook().get_storyboard();if(ss.isValue($1)){cmdParams['storyboard']=$1.get_sheetName();cmdParams['flipboardZoneId']=$1.get_flipboard().get_zoneId();cmdParams['storyPointId']=$1.get_flipboard().get_currentStoryPointId();}}
tab.ActionUtils=function(){}
tab.ActionUtils.get_$4=function(){return tab.Logger.lazyGetLogger(tab.ActionUtils);}
tab.ActionUtils.isVizSourceOfAction=function(action,sheet){return _.any(action.sourceWorksheets,function($p1_0){
return $p1_0===sheet;});}
tab.ActionUtils.isTargetOfActionLocal=function(action){var $0=tab.ModelUtils.getVisualModels(tab.ApplicationModel.get_instance());var $enum1=ss.IEnumerator.getEnumerator(action.targetWorksheets);while($enum1.moveNext()){var $1=$enum1.current;if(Object.keyExists($0,$1)){return true;}}return false;}
tab.ActionUtils.isFilterAction=function(action){return (ss.isValue(action.simpleCommandModel)&&(action.simpleCommandModel.simpleCommand).startsWith('tabdoc:filter-targets'));}
tab.ActionUtils.isHighlightAction=function(action){return (ss.isValue(action.simpleCommandModel)&&(action.simpleCommandModel.simpleCommand).startsWith('tabdoc:highlight'));}
tab.ActionUtils.isFilterSource=function(dashboardModel,sheet){var $0=dashboardModel.get_dashboardPresModel();var $1=$0.userActions;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;if(!tab.ActionUtils.isVizSourceOfAction($2,sheet)){continue;}if($2.activation!=='on-select'){continue;}if(ss.isNullOrUndefined($2.simpleCommandModel)){continue;}var $3=($2.simpleCommandModel.simpleCommand).replaceAll('simpleCommand=','');var $4=tab.CommandSerializer.deserialize($3);if($4.commandName!=='filter-targets'){continue;}var $5=$2.targetWorksheets;if(!$5.length){continue;}return true;}return false;}
tab.ActionUtils.getApplicableActions=function(sourceWorksheet,activationMethod,type,vizRegion){var $0=tab.ActionUtils.$5(vizRegion);var $1=tab.ApplicationModel.get_instance().get_workbook().findContentDashboard().get_actionPresModels();var $2=tab.ActionUtils.$C($1,sourceWorksheet,activationMethod);if(ss.isValue(type)){$2=_.filter($2,function($p1_0){
return tab.ActionUtils.getActionType($p1_0)===type&&!$0;});}return $2;}
tab.ActionUtils.executeActions=function(sheetID,activationMethod,tupleIds,t,forceHighlight,vizRegion){var $0=tab.ActionUtils.getApplicableActions(sheetID,activationMethod,'filter',vizRegion);var $1=tab.ActionUtils.getApplicableActions(sheetID,activationMethod,'highlight',vizRegion);var $2=tab.ActionUtils.getApplicableActions(sheetID,activationMethod,'url',vizRegion);var $3=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),sheetID);if(ss.isValue(tupleIds)){if($2.length>0&&tupleIds.length>0){tab.ActionUtils.$8($2,tupleIds,$3);}if($1.length>0){if(tupleIds.length>0){tab.ActionUtils.$6($1,tupleIds,$3,t);}else{tab.ActionUtils.$7(t);}}else if(ss.isValue(forceHighlight)&&forceHighlight){tab.ActionUtils.$6($1,tupleIds,$3,t);}}if($0.length>0){tab.ActionUtils.$9(sheetID,$0,tupleIds,t,$3);}}
tab.ActionUtils.executeAction=function(actionPresModel,tupleIds,visualModel,t){if(!ss.isValue(actionPresModel)){return;}var $0=[actionPresModel];if(!ss.isNullOrUndefined(actionPresModel.linkSpec)){tab.ActionUtils.$8($0,tupleIds,visualModel);}else if(true){tab.ActionUtils.$6($0,tupleIds,visualModel,t);}else{}}
tab.ActionUtils.getActionType=function(model){if(ss.isValue(model.simpleCommandModel)){var $0=tab.CommandSerializer.deserialize(model.simpleCommandModel.simpleCommand);if($0.commandName==='highlight'){return 'highlight';}if($0.commandName==='filter-targets'){return 'filter';}return null;}if(ss.isValue(model.linkSpec)){return 'url';}return null;}
tab.ActionUtils.willActionCauseTabChange=function(sheetID,activationMethod){var $0=tab.ActionUtils.getApplicableActions(sheetID,activationMethod,'filter');var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;if(ss.isValue($1.simpleCommandModel)){var $2=tab.CommandSerializer.deserialize($1.simpleCommandModel.simpleCommand);var $3=$2.commandParams['target-sheet'];if(ss.isValue($3)&&!_.isEqual($3,tsConfig.current_sheet_name)){return true;}}}return false;}
tab.ActionUtils.getUrlActionPm=function(actionPresModel,vizModel,tupleIds){if(ss.isValue(tupleIds)){if(!ss.isNullOrUndefined(actionPresModel.linkSpec)){var $0=vizModel.get_vizDataModel();var $1=tab.ApplicationModel.get_instance().get_dataDictionary();var $2=tab.VizDataUtils.constructUrl($1,actionPresModel.linkSpec,$0,tupleIds,vizModel.get_worksheetName());if(ss.isNullOrUndefined($2)){return null;}var $3={};$3.url=$2;var $4=tab.ModelUtils.getFirstAvailableWebZoneName(tab.ApplicationModel.get_instance());if($4!=null){$3.target=$4;}return $3;}}return null;}
tab.ActionUtils.$5=function($p0){return ss.isValue($p0)&&($p0==='color'||$p0==='size'||$p0==='shape');}
tab.ActionUtils.$6=function($p0,$p1,$p2,$p3){var $0=tab.BrushingComputer.computeFromTuples($p2,$p1,$p0);tab.SelectionClientCommands.$2($0,$p3);}
tab.ActionUtils.$7=function($p0){tab.SelectionClientCommands.$3($p0);}
tab.ActionUtils.$8=function($p0,$p1,$p2){if((ss.isValue($p1)&&$p1.length>0)){var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.current;var $2=tab.ActionUtils.getUrlActionPm($1,$p2,$p1);if(ss.isValue($2)){$0.add($2);}else{tab.CommandController.set_fireDeferredUrlActions(true);return;}}if($0.length>0){tab.CommandController.get().executeUrlActions($0);}}}
tab.ActionUtils.$9=function($p0,$p1,$p2,$p3,$p4){if(ss.isValue($p1)){var $0=tab.ActionUtils.$A($p1);if($0.length>0){var $1=tab.ModelUtils.getSheetInfoPresModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name);if(ss.isValue($1)&&!($1.isDashboard&&ss.isNullOrUndefined($1.namesOfSubsheets))){var $2=!$1.isDashboard||$1.namesOfSubsheets.length===1;var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $3=$enum1.current;if($2||$3.get_worksheetName()!==$p0){tab.ModelUtils.setVisualValidStateOnPresModel($p3,$3);}}}}if($p2.length>0){var $4=[];var $enum2=ss.IEnumerator.getEnumerator($p1);while($enum2.moveNext()){var $5=$enum2.current;if(($p2.length===1||!$5.singleSelectOnly)&&ss.isValue($5.targetUrl)){var $6={};var $7=$5.targetUrl+'&:exclude='+tab.CommandController.get().get_legacySession().railsEncode($p0);var $8=$p4.get_vizDataModel();var $9=tab.ApplicationModel.get_instance().get_dataDictionary();$6.url=tab.VizDataUtils.constructUrlForFilterActionFromTargetURL($9,$7,$8,$p2);$4.add($6);}}if($4.length>0){tab.CommandController.get().executeUrlActions($4);}}}}
tab.ActionUtils.$A=function($p0){var $0={};if(ss.isValue($p0)){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $2=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($2.targetWorksheets);while($enum2.moveNext()){var $3=$enum2.current;var $4=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),$3);if(ss.isValue($4)){$0[$3]=$4;}}}}var $1=[];var $dict3=$0;for(var $key4 in $dict3){var $5={key:$key4,value:$dict3[$key4]};$1.add($5.value);}return $1;}
tab.ActionUtils.$B=function($p0){if(!tab.ActionUtils.$2){tab.ActionUtils.$2=true;var $3=tsConfig.schemeWhitelist.split(',');var $enum1=ss.IEnumerator.getEnumerator($3);while($enum1.moveNext()){var $4=$enum1.current;var $5=$4.toLowerCase().trim();if(!$5.endsWith(':')){$5+=':';}if($5.length>1){tab.ActionUtils.$1.add($5);}}}var $0=new RegExp('(^[A-Za-z][A-Za-z0-9+\\-.]*:)');var $1=$0.exec($p0);if(!ss.isValue($1)){return true;}var $2=$1[0].toLowerCase();return tab.ActionUtils.$1.contains($2);}
tab.ActionUtils.$C=function($p0,$p1,$p2){var $0=_.filter($p0,function($p1_0){
var $1_0=$p1_0.sourceWorksheets.contains($p1);var $1_1=($p2===$p1_0.activation);return ($1_0&&$1_1);});return $0;}
tab.ActionUtils.launchActionUrls=function(launch){var $0=[];var $1={};if(ss.isNullOrUndefined(launch)||!launch.length){return;}if(ss.isValue(tab.BaseSession.linkTarget)&&tab.BaseSession.linkTarget.length>0){var $2=tab.BaseSession.linkTarget;$0.add(new ss.Tuple($2,false));$1[$2]=launch[launch.length-1].url;}else{var $3=0;var $enum1=ss.IEnumerator.getEnumerator(launch);while($enum1.moveNext()){var $4=$enum1.current;if(!tab.ActionUtils.$B($4.url)){if(!tab.ActionUtils.$3){tab.ActionUtils.$3=true;tab.BaseSession.showAlertDialog(tab.Strings.SecurityBlockedURLActionMessage,tab.Strings.SecurityBlockedURLActionHeader);}continue;}if(ss.isNullOrUndefined($4.target)||('t' in $4)){$4.target=$4.t;}var $5;if(ss.isValue($4.target)){$5=new ss.Tuple($4.target,true);}else{var $6='_'+tsConfig.layoutid.toString().replace(new RegExp('[^\\w]','g'),'');if($3>0){$6+='_'+$3.toString();}$5=new ss.Tuple($6,false);}if(!Object.keyExists($1,$5.first)){$0.add($5);}$1[$5.first]=$4.url;$3++;}}var $enum2=ss.IEnumerator.getEnumerator($0);while($enum2.moveNext()){var $7=$enum2.current;var $8=$7.first;if($7.second){$('[name='+$8+']').prop('src',$1[$8]);}else{window.open($1[$8],$8);}}}
tab.InvalidationInfo=function(){}
tab.InvalidationInfo.prototype={primarySheet:null,suppressActivation:null,layoutStatus:null,cmdResult:null}
tab.LocalUbertipInfo=function(interactedTupleIds,effectedTupleIds,paneDescriptorKey,needRemoteUbertip){this.$0=interactedTupleIds;this.$1=effectedTupleIds;this.$2=paneDescriptorKey;this.$3=needRemoteUbertip;}
tab.LocalUbertipInfo.prototype={$0:null,$1:null,$2:null,$3:false,get_interactedTupleIds:function(){return this.$0;},get_effectedTupleIds:function(){return this.$1;},get_paneDescriptorKey:function(){return this.$2;},get_needRemoteUbertip:function(){return this.$3;},shouldDoLocalUbertip:function(){return ss.isValue(this.$0)&&ss.isValue(this.$2)&&this.$0.length>0;}}
tab.ModelUtils=function(){}
tab.ModelUtils.getViewSession=function(sheetName){return tab.ModelUtils.findContentDashboard().getViewSession(sheetName);}
tab.ModelUtils.getVizCategoricalLegends=function(viz){var $0=[];var $1=tab.ModelUtils.findContentDashboard();var $enum1=ss.IEnumerator.getEnumerator($1.get_zoneModels());while($enum1.moveNext()){var $2=$enum1.current;if(Type.canCast($2.get_model(),tab.CategoricalLegendModel)&&$2.get_worksheetName()===viz.get_worksheetName()){$0.add($2.get_model());}}return $0;}
tab.ModelUtils.withVisualModel=function(sheetName,callback){var $0=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),sheetName);if(ss.isValue($0)){callback($0);return;}if(ss.isNullOrUndefined(tab.ModelUtils.$0)){tab.ModelUtils.$0={};tab.ModelUtils.findContentDashboard().get_zonesModel().add_newZone(tab.ModelUtils.$2);}var $1=tab.ModelUtils.$0[sheetName]||[];$1.add(callback);tab.ModelUtils.$0[sheetName]=$1;}
tab.ModelUtils.getVisualModels=function(appModel){var $0=tab.ModelUtils.findContentDashboard(appModel);return tab.ModelUtils.getVisualModelsFromDashboard($0);}
tab.ModelUtils.getVisualModelsFromDashboard=function(dashboardModel){var $0={};var $enum1=ss.IEnumerator.getEnumerator(dashboardModel.get_zoneModels());while($enum1.moveNext()){var $1=$enum1.current;var $2=$1.get_visualModel();if(ss.isValue($2)){var $3=$1.get_worksheetName();$0[$3]=$2;}}return $0;}
tab.ModelUtils.getSheetInfoPresModel=function(appModel,sheetName){var $0=appModel.get_workbook();if(ss.isNullOrUndefined($0)||ss.isNullOrUndefined($0.get_sheetsInfo())){return null;}var $enum1=ss.IEnumerator.getEnumerator($0.get_sheetsInfo());while($enum1.moveNext()){var $1=$enum1.current;if($1.sheet===sheetName){return $1;}}return null;}
tab.ModelUtils.getVisualModel=function(appModel,sheetName){var $0=null;var $1=tab.ModelUtils.findContentDashboard(appModel);if(ss.isNullOrUndefined($1)){return $0;}var $enum1=ss.IEnumerator.getEnumerator($1.get_zoneModels());while($enum1.moveNext()){var $2=$enum1.current;var $3=$2.get_visualModel();if(ss.isValue($3)){var $4=$2.get_worksheetName();if($4===sheetName){$0=$3;break;}}}return $0;}
tab.ModelUtils.getFirstAvailableWebZoneName=function(appModel){var $0=null;var $1=tab.ModelUtils.findContentDashboard(appModel);if(ss.isNullOrUndefined($1)){return $0;}var $enum1=ss.IEnumerator.getEnumerator($1.get_zoneModels());while($enum1.moveNext()){var $2=$enum1.current;if($2.get_zoneType()==='web'){var $3=$2.get_zoneId();$0='frame_'+$3.toString();break;}}return $0;}
tab.ModelUtils.hasUberTipData=function(sheetName){var $0=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),sheetName);return ss.isValue($0.get_visualPresModel().vizData)&&ss.isValue($0.get_visualPresModel().vizData.ubertipData);}
tab.ModelUtils.visualHasFilterField=function(sheetName,fieldName){var $0=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),sheetName);return (ss.isValue($0.get_vizDataModel())&&$0.get_vizDataModel().get_vizDataPresModel().filterFields.indexOf(fieldName)!==-1);}
tab.ModelUtils.setVisualValidStateOnModel=function(t,model,valid){if(ss.isNullOrUndefined(model)){return;}model.set_isVisualValid(valid);}
tab.ModelUtils.validateVisuals=function(sheetNames){tab.ModelUtils.$1(sheetNames,true);}
tab.ModelUtils.invalidateVisuals=function(sheetNames){tab.ModelUtils.$1(sheetNames,false);}
tab.ModelUtils.$1=function($p0,$p1){if(ss.isNullOrUndefined($p0)){return;}var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;var $1=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),$0);if(ss.isValue($1)){if($p1){tab.VizClientCommands.validateVisualModel($1);}else{tab.VizClientCommands.invalidateVisualModel($1);}}}}
tab.ModelUtils.setVisualValidStateOnPresModel=function(t,model){if(ss.isNullOrUndefined(model)){return;}(t.makeMutablePresModel(model)).valid=false;}
tab.ModelUtils.$2=function($p0){if($p0.get_zoneType()!=='viz'){return;}var $0=tab.ModelUtils.$0[$p0.get_worksheetName()]||[];delete tab.ModelUtils.$0[$p0.get_worksheetName()];if(!Object.getKeyCount(tab.ModelUtils.$0)){tab.ModelUtils.$0=null;tab.ModelUtils.findContentDashboard().get_zonesModel().remove_newZone(tab.ModelUtils.$2);}var $1=$p0.get_visualModel();var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $2=$enum1.current;$2($1);}}
tab.ModelUtils.findContentDashboard=function(appModel){if(ss.isNullOrUndefined(appModel)){appModel=tab.ApplicationModel.get_instance();}return appModel.get_workbook().findContentDashboard();}
tab.ModelUtils.findActiveOrDefaultVisual=function(){var $0=tab.ModelUtils.findContentDashboard();if(ss.isNullOrUndefined($0)||ss.isNullOrUndefined($0.get_zoneModels())){return null;}var $1=$0.get_activeVisual();if(ss.isValue($1)){return $1;}var $enum1=ss.IEnumerator.getEnumerator($0.get_zoneModels());while($enum1.moveNext()){var $2=$enum1.current;if(ss.isValue($2.get_visualModel())){return $2.get_visualModel();}}return null;}
tab.QuantitativeFilterData=function(sheets,filterField,currentMinVal,currentMaxVal,previousMinVal,previousMaxVal){this.$0=sheets;this.$1=filterField;this.$2=currentMinVal;this.$3=currentMaxVal;this.$4=previousMinVal;this.$5=previousMaxVal;}
tab.QuantitativeFilterData.prototype={$0:null,$1:null,$2:0,$3:0,$4:0,$5:0,get_filterField:function(){return this.$1;},get_currentMaxVal:function(){return this.$3;},get_currentMinVal:function(){return this.$2;},get_targetSheets:function(){return this.$0;},set_targetSheets:function(value){this.$0=value;return value;},get_previousMaxVal:function(){return this.$5;},get_previousMinVal:function(){return this.$4;},valueInRange:function(val){var $0=true;if(ss.isValue(this.$2)){$0=$0&&tab.FloatUtil.isGreaterThanOrEqual(val,this.$2);}if(ss.isValue(this.$3)){$0=$0&&tab.FloatUtil.isLessThanOrEqual(val,this.$3);}return $0;}}
tab.XhrUtil=function(){}
tab.XhrUtil.get_currentTabName=function(){return tab.XhrUtil.$0;}
tab.XhrUtil.set_currentTabName=function(value){tab.XhrUtil.$0=value;return value;}
tab.XhrUtil.helper=function(args,handler){var $0=new tab.XhrUtil();if(!ss.isValue(args.success)&&ss.isValue(handler)){args.success=handler.get_successDelegate();}if(!ss.isValue(args.complete)&&ss.isValue(handler)){args.complete=handler.get_completedDelegate();}if(!ss.isValue(args.error)&&ss.isValue(handler)){args.error=handler.get_errorDelegate();}return $0.request(args);}
tab.XhrUtil.getMultipartData=function(file,nameValues){var $0=tab.XhrUtil.randomString();var $1='--'+$0;var $2='\r\n';var $3=new ss.StringBuilder();if(ss.isValue(file)){$3.append($1);$3.append($2);$3.append('Content-Disposition: form-data; name="');$3.append(file.name);$3.append('"');if(('filename' in file)){$3.append('; filename="');$3.append(file.filename);$3.append('"');}$3.append($2);$3.append('Content-Type: ');$3.append(file.contentType);$3.append($2);$3.append($2);$3.append(file.content);$3.append($2);}var $dict1=nameValues;for(var $key2 in $dict1){var $5={key:$key2,value:$dict1[$key2]};$3.append($1);$3.append($2);$3.append('Content-Disposition: form-data; name="');$3.append($5.key);$3.append('"');$3.append($2);$3.append($2);if(Type.canCast($5.value,String)){$3.append($5.value);}else{$3.append(tab.JsonUtil.toJson($5.value));}$3.append($2);}$3.append($1);$3.append('--');$3.append($2);var $4=tab.$create_XhrMultipartData();$4.header=$0;$4.body=$3.toString();return $4;}
tab.XhrUtil.randomString=function(){var $0='0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz';var $1=8;var $2='';for(var $3=0;$3<$1;$3++){var $4=Math.random()*$0.length;var $5=parseInt($4);$2+=$0.substring($5,$5+1);}return $2;}
tab.XhrUtil.prototype={request:function($p0){$p0.headers=($p0.headers||{});if(!$p0.headers['X-Tsi-Supports-Accepted']){delete $p0.headers['X-Tsi-Supports-Accepted'];}else{$p0.headers['X-Tsi-Supports-Accepted']=true;}if(ss.isValue(tab.XhrUtil.$0)&&tab.XhrUtil.$0.length>0){$p0.headers['X-Tsi-Active-Tab']=encodeURIComponent(tab.XhrUtil.$0);}if(ss.isValue($p0.complete)){var $1=$p0.complete;$p0.complete=function($p1_0,$p1_1){
$p1_0.args=$p0;$1($p1_0,$p1_1);};}if(ss.isValue($p0.success)){var $2=$p0.success;$p0.success=function($p1_0,$p1_1,$p1_2){
$p1_2.args=$p0;$2($p1_0,$p1_1,$p1_2);};}if(ss.isValue($p0.error)){var $3=$p0.error;$p0.error=function($p1_0,$p1_1,$p1_2){
$p1_0.args=$p0;$3($p1_0,$p1_1,$p1_2);};}if(ss.isValue($p0.beforeSend)){var $4=$p0.beforeSend;$p0.beforeSend=function($p1_0){
$p1_0.args=$p0;$4($p1_0);};}var $0=null;$0 = $p0;return $.ajax($0);}}
tab.Model=function(parent,presModelKey){this.$0=parent;this.$3=presModelKey;}
tab.Model.fireDeferredEvents=function(exceptionHandler){var $0=tab.Model.$1;tab.Model.$1=null;if(ss.isValue($0)){var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;try{$1();}catch($2){if(ss.isValue(exceptionHandler)){exceptionHandler($2);}}}}if(ss.isValue(tab.Model.$2)){window.clearTimeout(tab.Model.$2);tab.Model.$2=null;}}
tab.Model.$4=function(){tab.Model.$1=null;}
tab.Model.prototype={presModel:null,$0:null,$3:null,get_presModel:function(){return this.presModel;},get_presModelKey:function(){return this.$3;},set_presModelKey:function(value){this.$3=value;return value;},get_parent:function(){return this.$0;},getMutableCopyOfPresModel:function(){var $0;if(tab.BrowserSupport.get_nativeJSONSupport()){var $1=JSON.stringify(this.presModel);$0=JSON.parse($1);}else{$0=$.extend(true,{},this.presModel);}if(!ss.isValue($0)){$0={};}return $0;},getPresModelPath:function(){return this.$5(new tab.PresModelPath());},swapAndCopyPresModel:function(newPM){var $0=this.presModel;if(ss.isValue($0)&&ss.isValue(newPM)){var $1=newPM;var $2=$0;var $enum1=ss.IEnumerator.getEnumerator(Object.keys($2));while($enum1.moveNext()){var $3=$enum1.current;if((!Object.keyExists($1,$3)||ss.isUndefined($1[$3]))&&!$.isFunction($2[$3])&&!_.isBoolean($2[$3])){$1[$3]=$2[$3];}}}this.presModel=newPM;},swapPresModel:function(newPM){this.presModel=newPM;},simpleSwapToUpdate:function(newPresModel,eventToFire){if(this.isNewPresModelSameAsOld(newPresModel)){return;}this.swapAndCopyPresModel(newPresModel);var $0=Array.toArray(arguments).extract(1);Function.prototype.apply.call(ss.Delegate.create(this,this.raiseEvent), this, $0);},isNewPresModelSameAsOld:function(newPM){return _.isEqual(this.presModel,newPM);},isNewPresModelSameAsOldArray:function(oldPM,newPM){return _.isEqual(oldPM,newPM);},raiseEvent:function(a){if(ss.isValue(a)){if(ss.isValue(this.presModel)){}var $0=Array.toArray(arguments).extract(1);var $1=this;var $2=function(){
Function.prototype.apply.call(a, $1, $0);};if(ss.isNullOrUndefined(tab.Model.$1)){tab.Model.$1=[];}tab.Model.$1.add($2);if(ss.isNullOrUndefined(tab.Model.$2)){tab.Model.$2=window.setTimeout(function(){
tab.Model.fireDeferredEvents(null);},0);}}},$5:function($p0){if(!ss.isValue(this.$0)){$p0.reverse();return $p0;}if(ss.isValue(this.$3)){$p0.add(this.$3);}var $0=this.$0;return $0.$5($p0);}}
tab.UndoList=function(){this.$0=[];}
tab.UndoList.prototype={add:function(nextUndo){this.$0.add(nextUndo);},makeUndoFunc:function(){var $0=ss.Delegate.create(this,function(){
var $enum1=ss.IEnumerator.getEnumerator(this.$0);while($enum1.moveNext()){var $1_0=$enum1.current;$1_0();}});return $0;}}
tab.CommandsModel=function(parent){tab.CommandsModel.initializeBase(this,[parent,new tab.PresModelPathItem('commands')]);}
tab.CommandsModel.prototype={$6:true,add_commandsChanged:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_commandsChanged:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_shouldUpdate:function(){return this.$6;},set_shouldUpdate:function(value){this.$6=value;return value;},get_commands:function(){return this.presModel;},update:function(newCommands){if(this.get_shouldUpdate()){this.forceUpdate(newCommands);}},forceUpdate:function(newCommands){this.simpleSwapToUpdate(newCommands,this.$7,this);}}
tab.RangeTransform=function(){}
tab.LinearRangeTransform=function(min,max){tab.LinearRangeTransform.initializeBase(this);if(min<=max){this.$0=min;this.$1=max;}else{this.$0=max;this.$1=min;}}
tab.LinearRangeTransform.prototype={$0:0,$1:10,fractionToValue:function(fract){return this.$0+(fract*(this.$1-this.$0));},valueToFraction:function(value){return (this.$0===this.$1)?0:(value-this.$0)/(this.$1-this.$0);}}
tab.AcceleratingRangeTransform=function(min,max,inflectionFrac1,inflectionVal1,inflectionFrac2,inflectionVal2){tab.AcceleratingRangeTransform.initializeBase(this);if(ss.isNullOrUndefined(inflectionFrac2)&&ss.isValue(inflectionVal2)){inflectionFrac2=inflectionFrac1;inflectionVal2=inflectionVal1;}this.$0=min;this.$1=inflectionFrac1;this.$2=inflectionVal1;this.$3=inflectionFrac2;this.$4=inflectionVal2;var $0=max;var $1=inflectionFrac2;var $2=inflectionVal2;var $3=inflectionVal2/inflectionFrac2;this.a=($2-($3*$1)-$0+$3)/(-($1*$1)+(2*$1)-1);this.b=$3-(2*this.a*$1);this.c=$0-$3+(this.a*((2*$1)-1));}
tab.AcceleratingRangeTransform.prototype={$0:0,$1:0,$2:0,$3:0,$4:0,a:0,b:0,c:0,fractionToValue:function(fract){if(fract<=this.$1){return this.$0+(fract*(this.$2-this.$0)/this.$1);}if(fract<=this.$3){var $0=(this.$4-this.$2)/(this.$3-this.$1);var $1=this.$2-($0*this.$1);return (fract*$0)+$1;}return (this.a*fract*fract)+(this.b*fract)+this.c;},valueToFraction:function(value){if(value<=this.$2){return this.$1*(value-this.$0)/(this.$2-this.$0);}if(value<=this.$4){var $1=(this.$4-this.$2)/(this.$3-this.$1);var $2=this.$2-($1*this.$1);return (value-$2)/$1;}var $0=Math.sqrt((this.b*this.b)-(4*this.a*(this.c-value)));return (-this.b+$0)/(2*this.a);}}
tab.HTMLEscape=function(){};tab.HTMLEscape.prototype = {escape:0,noEscape:1}
tab.HTMLEscape.registerEnum('tab.HTMLEscape',false);tab.SceneUtils=function(){}
tab.SceneUtils.get_$0=function(){return tab.Logger.lazyGetLogger(tab.SceneUtils);}
tab.SceneUtils.getPaneDescriptorKeyFromTupleId=function(tupleId,scene){var $enum1=ss.IEnumerator.getEnumerator(scene.panes);while($enum1.moveNext()){var $0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($0.drawPane);while($enum2.moveNext()){var $1=$enum2.current;if(ss.isValue($1.paneMarks)){var $2=scene.pdMarksMap;var $dict3=$2;for(var $key4 in $dict3){var $3={key:$key4,value:$dict3[$key4]};var $4=$3.value.encodingColumns['tuple_id'];var $5=_.find($4.dataValues,function($p1_0){
return $p1_0===tupleId;});if(ss.isValue($5)){return $3.key;}}}}}return '';}
tab.DataUtils=function(){}
tab.DataUtils.get_$0=function(){return tab.Logger.lazyGetLogger(tab.SelectionClientCommands);}
tab.DataUtils.$1=function($p0,$p1,$p2,$p3){var $0=tab.DataUtils.$8(tab.ApplicationModel.get_instance().get_dataDictionary(),$p2,$p3);var $1=new tab.DataValues($p3);var $2=new Array($p3.length);for(var $3=0;$3<$2.length;++$3){var $4=tab.DataUtils.$E($p2,$p3[$3]);$2[$3]=$4;}var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $5=$enum1.current;var $6=$p0.findItemById($5);if(!ss.isValue($6)){continue;}var $7=[];if(tab.DataUtils.$D($p0,$6,$0,$7)){$1.addValues($7,$2);}}return $1;}
tab.DataUtils.$2=function($p0,$p1){var $0={};var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $1=$enum1.current;var $2=new Array($1.columnIndices.length);for(var $5=0;$5<$2.length;$5++){var $6=$p0.getColumnByIdx($1.columnIndices[$5]);$2[$5]=$6.fn;}var $3=$2.join(';');var $4;if(Object.keyExists($0,$3)){$4=$0[$3];}else{$4=new tab.DataValues($2);$0[$3]=$4;}$4.addValues($1.aliasIndices,$1.columnIndices);}return _.map($0,function($p1_0,$p1_1){
return $p1_0;});}
tab.DataUtils.$3=function($p0,$p1){var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p1.get_groupItemNodes());while($enum1.moveNext()){var $1=$enum1.current;if(ss.isNullOrUndefined($1.columnIndices)){continue;}var $enum2=ss.IEnumerator.getEnumerator($1.columnIndices);while($enum2.moveNext()){var $2=$enum2.current;var $3=$p0.get_vizDataModel().getColumnByIdx($2);var $4=$3.fieldCaption;if(!$0.contains($4)){$0.add($4);}}}return $0;}
tab.DataUtils.$4=function($p0,$p1,$p2){var $0=new tab.DataValues($p2);var $1=$p0.get_tupleIdColumn();var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $2=$enum1.current;var $3=$1.tupleIds.indexOf($2);var $4=[];var $5=[];var $enum2=ss.IEnumerator.getEnumerator($p2);while($enum2.moveNext()){var $6=$enum2.current;var $7=$p0.getColumnByCaptionOrFieldName($6);if(ss.isNullOrUndefined($7)){return new tab.DataValues(new Array(0));}var $8=$7.aliasIndices[$3];$4.add($8);$5.add(tab.DataUtils.$E($p0,$6));}if($4.length!==$p2.length){}$0.addValues($4,$5);}return $0;}
tab.DataUtils.$5=function($p0,$p1,$p2,$p3){var $0=[];var $1={};var $2=false;var $3=$p0.get_vizDataPresModel().vizColumns;for(var $A=0;$A<$3.length;++$A){if(tab.DataUtils.$F($3[$A])){var $B=tab.DataUtils.$11($3[$A]);if(ss.isValue($B)){$1[$B]=$A;if($B==='none'){$2=true;}}}}var $4=true;var $5=null;var $enum1=ss.IEnumerator.getEnumerator($p1.get_vizDataPresModel().vizColumns);while($enum1.moveNext()){var $C=$enum1.current;if(tab.DataUtils.$F($C)){if($5==null){$5=$C.baseColumnName;}else if($5!==$C.baseColumnName){$4=false;}}}var $6=[];if($4){var $D=[];for(var $E=0;$E<$p1.get_vizDataPresModel().vizColumns.length;++$E){var $F=$p1.get_vizDataPresModel().vizColumns[$E];if(tab.DataUtils.$F($F)){var $10=tab.DataUtils.$11($F);if(!$2&&$10==='none'){var $enum2=ss.IEnumerator.getEnumerator(Object.keys($1));while($enum2.moveNext()){var $11=$enum2.current;if(!$D.contains($11)){$D.add($11);var $12=$1[$11];$0.add(new tab.DateTimePartIndexes($12,$E,$11,'none'));var $13=$3[$12];$6.add($13);}}}else if(Object.keyExists($1,$10)){if(!$D.contains($10)){$D.add($10);var $14=$1[$10];$0.add(new tab.DateTimePartIndexes($14,$E,'none','none'));$6.add($F);}}else if($2){var $15=$1['none'];$0.add(new tab.DateTimePartIndexes($15,$E,'none',$10));$6.add($F);}}}}var $7=new Array($6.length);var $enum3=ss.IEnumerator.getEnumerator($6);while($enum3.moveNext()){var $16=$enum3.current;$7.add($16.fieldCaption);}var $8=new tab.DataValues($7);var $9=$p0.get_tupleIdColumn();var $enum4=ss.IEnumerator.getEnumerator($p3);while($enum4.moveNext()){var $17=$enum4.current;var $18=$9.tupleIds.indexOf($17);var $19=[];var $1A=[];var $enum5=ss.IEnumerator.getEnumerator($0);while($enum5.moveNext()){var $1B=$enum5.current;var $1C=$p0.getColumnByIdx($1B.srcColumnIndex);var $1D=$1C.valueIndices[$18];var $1E=tab.DataUtils.$C($p2,$1C.dataType);var $1F=$1E.dataValues[$1D];var $20=tab.DataUtils.$10($1F,$1B.srcAgg,$1B.destAgg,$1D);$19.add($20);$1A.add($1B.srcColumnIndex);}$8.addValues($19,$1A);}return new ss.Tuple($8,$0);}
tab.DataUtils.$6=function($p0,$p1,$p2,$p3){var $0=[];if(ss.isNullOrUndefined($p2)||tab.MiscUtil.isNullOrEmpty($p0.get_values())){return $0;}var $1=$p2.get_tupleIdColumn();for(var $2=0;$2<$1.tupleIds.length;$2++){var $3=[];var $4=[];var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $5=$enum1.current;var $6=$p2.getColumnByIdx($5.destColumnIndex);var $7=$6.valueIndices[$2];var $8=tab.DataUtils.$C($p3,$6.dataType);var $9=$8.dataValues[$7];var $A=tab.DataUtils.$10($9,$5.destAgg,$5.srcAgg,$7);$3.add($A);$4.add($5.destColumnIndex);}if($p0.findMatch($4,$3)){$0.add($1.tupleIds[$2]);}}return $0;}
tab.DataUtils.$7=function($p0,$p1){var $0=[];if(ss.isNullOrUndefined($p1)||tab.MiscUtil.isNullOrEmpty($p0.get_values())){return $0;}var $1=$p0.get_fieldCaptions();var $2=tab.DataUtils.$8(tab.ApplicationModel.get_instance().get_dataDictionary(),$p1,$1);if(ss.isNullOrUndefined($2)){return $0;}var $3=$p1.get_tupleIdColumn();if(ss.isNullOrUndefined($3)){return $0;}var $4=new Array($1.length);for(var $5=0;$5<$1.length;$5++){$4[$5]=tab.DataUtils.$E($p1,$1[$5]);}for(var $6=0;$6<$3.tupleIds.length;$6++){var $7=false;var $8=new Array($1.length);for(var $9=0;$9<$1.length;$9++){var $A=$1[$9];var $B=$2[$A];if($B.isValidTupleIndexForAliasTable($6)){$8[$9]=$B.getAliasIndexFromTupleIndex($6);}else{$7=true;break;}}if(!$7&&$p0.findMatch($4,$8)){$0.add($3.tupleIds[$6]);}}return $0;}
tab.DataUtils.$8=function($p0,$p1,$p2){var $0={};var $enum1=ss.IEnumerator.getEnumerator($p2);while($enum1.moveNext()){var $1=$enum1.current;var $2=$p1.getColumnByCaptionOrFieldName($1);if(ss.isNullOrUndefined($2)){return null;}$0[$1]=new tab.VizDataField($p0,$p1.get_vizDataPresModel(),$1);}return $0;}
tab.DataUtils.$9=function($p0,$p1,$p2){var $0=[];if(ss.isNullOrUndefined($p1)||$p2.get_fieldCaptions().length!==$p0.get_fieldCaptions().length){return $0;}var $1=$p2.get_fieldCaptions();var $2=tab.DataUtils.$8(tab.ApplicationModel.get_instance().get_dataDictionary(),$p1,$1);var $enum1=ss.IEnumerator.getEnumerator($p0.get_values());while($enum1.moveNext()){var $3=$enum1.current;var $4=new Array($3.length);for(var $5=0;$5<$4.length;$5++){var $6=$1[$5];var $7=$p0.get_fieldCaptions().indexOf($6);var $8=$3[$7];var $9=$2[$6];$4[$5]=$9.getAliasValueFromAliasIndex($8);}var $enum2=ss.IEnumerator.getEnumerator($p2.get_items());while($enum2.moveNext()){var $A=$enum2.current;if(_.isEqual($4,$A.itemValues)){$0.add($A.objectId);}}}return $0;}
tab.DataUtils.$A=function($p0,$p1,$p2){var $0=[];if(ss.isNullOrUndefined($p1.get_vizDataModel())){return $0;}var $1=$p0.get_fieldCaptions();var $enum1=ss.IEnumerator.getEnumerator($p2.get_groupItemNodes());while($enum1.moveNext()){var $2=$enum1.current;if(ss.isNullOrUndefined($2.columnIndices)||ss.isNullOrUndefined($2.aliasIndices)||$2.aliasIndices.length<$1.length){continue;}var $3=[];var $4=[];var $5=false;for(var $6=0;$6<$2.columnIndices.length;++$6){var $7=$2.columnIndices[$6];var $8=$p1.get_vizDataModel().getColumnByIdx($7).fieldCaption;if(ss.isValue($8)&&$1.contains($8)){$3.add($7);$4.add($2.aliasIndices[$6]);if(!$6){$5=true;}}}if($5&&$p0.findMatch($3,$4)){var $9={};$9.columnIndices=$2.columnIndices;$9.aliasIndices=$2.aliasIndices;$0.add($9);}}return $0;}
tab.DataUtils.$B=function($p0,$p1,$p2,$p3){var $0=[];if(ss.isNullOrUndefined($p2.get_vizDataModel())){return $0;}var $dict1=$p2.get_sceneModel().get_visualListModels();for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $enum3=ss.IEnumerator.getEnumerator($1.value.get_groupItemNodes());while($enum3.moveNext()){var $2=$enum3.current;if(ss.isNullOrUndefined($2.columnIndices)||ss.isNullOrUndefined($2.aliasIndices)||$2.columnIndices.length!==$2.aliasIndices.length){continue;}var $3=[];for(var $4=0;$4<$2.columnIndices.length;++$4){var $5=$2.columnIndices[$4];var $6=_.find($p1,function($p1_0){
return $p1_0.destColumnIndex===$5;});if(ss.isValue($6)){var $7=$2.aliasIndices[$4];var $8=$p2.get_vizDataModel().getColumnByIdx($6.destColumnIndex);var $9=tab.DataUtils.$C($p3,$8.dataType);var $A=$9.dataValues[$7];var $B=tab.DataUtils.$10($A,$6.destAgg,$6.srcAgg,$7);$3.add($B);}}if($3.length===$2.aliasIndices.length){if($p0.findMatch($2.columnIndices,$3)){var $C={};$C.columnIndices=$2.columnIndices;$C.aliasIndices=$2.aliasIndices;$0.add($C);}}}}return $0;}
tab.DataUtils.$C=function($p0,$p1){if(ss.isNullOrUndefined($p0)){return null;}var $0=_.find($p0.dataColumns,function($p1_0){
return ($p1_0.dataType===$p1);});return $0;}
tab.DataUtils.$D=function($p0,$p1,$p2,$p3){$p3.clear();for(var $0=0;$0<$p1.itemValues.length;$0++){var $1=$p0.get_fieldCaptions()[$0];var $2=$p1.itemValues[$0];var $3=$p2[$1];if(ss.isNullOrUndefined($3)){continue;}var $4=$3.getAliasIndexFromAliasValue($2);if(ss.isNullOrUndefined($4)||isNaN($4)){return false;}$p3.add($4);}return true;}
tab.DataUtils.$E=function($p0,$p1){for(var $0=0;$0<$p0.get_vizDataPresModel().vizColumns.length;$0++){var $1=$p0.get_vizDataPresModel().vizColumns[$0];if($1.fieldCaption===$p1||$1.fn===$p1){return $0;}}return -1;}
tab.DataUtils.$F=function($p0){if(ss.isNullOrUndefined($p0)){return false;}var $0=$p0.dataType;if($0==='datetime'||$0==='date'){return true;}var $1=['day','hour','mdy','minute','month','month-year','qtr','trunc-day','trunc-hour','trunc-minute','trunc-month','trunc-qtr','trunc-second','trunc-week','trunc-year','week','weekday','year'];return $1.contains($p0.aggregation);}
tab.DataUtils.$10=function($p0,$p1,$p2,$p3){if(_.isNumber($p0)){return $p0;}var $0=(_.isDate($p0))?$p0:tab.DateUtil.parsePresModelDate($p0);var $1=$p3;if($p1==='none'&&$p2!=='none'){switch($p2){case 'year':$1=tab.DateUtil.dateAsYear($0);break;case 'qtr':$1=tab.DateUtil.dateAsQuarter($0);break;case 'month':$1=tab.DateUtil.dateAsMonth($0);break;case 'day':$1=tab.DateUtil.dateAsDay($0);break;case 'hour':$1=tab.DateUtil.dateTimeAsHour($0);break;case 'minute':$1=tab.DateUtil.dateTimeAsMinute($0);break;case 'second':$1=tab.DateUtil.dateTimeAsSecond($0);break;case 'week':$1=tab.DateUtil.dateAsWeek($0);break;case 'weekday':$1=tab.DateUtil.dateAsDayOfWeek($0);break;case 'month-year':$1=tab.DateUtil.dateAsMonthYear($0);break;case 'mdy':$1=tab.DateUtil.dateAsMonthDayYear($0);break;}if(ss.isNullOrUndefined($1)){}}return $1;}
tab.DataUtils.$11=function($p0){return ($p0.aggregation||'none');}
tab.DataValues=function(fieldCaptions){this.$1={};this.$0=fieldCaptions;}
tab.DataValues.$2=function($p0,$p1){var $0;if($p1.length===1||ss.isNullOrUndefined($p0)){$0=$p1;}else{$0=_.sortBy($p1,function($p1_0,$p1_1){
return $p0[$p1_1];});}return $0;}
tab.DataValues.prototype={$0:null,get_fieldCaptions:function(){return this.$0;},get_values:function(){return _.map(this.$1,function($p1_0,$p1_1){
return $p1_0;});},addValues:function(valueIndexes,colIndexes){if(ss.isNullOrUndefined(valueIndexes)||!valueIndexes.length){return;}valueIndexes=tab.DataValues.$2(colIndexes,valueIndexes);this.$1[valueIndexes.join(',')]=valueIndexes;},findMatch:function(colIndexes,valueIndexes){if(ss.isNullOrUndefined(valueIndexes)||!valueIndexes.length){return false;}var $0=tab.DataValues.$2(colIndexes,valueIndexes);return Object.keyExists(this.$1,$0.join(','));}}
tab.DateTimePartIndexes=function(srcIdx,destIdx,srcA,destA){this.srcColumnIndex=srcIdx;this.destColumnIndex=destIdx;this.srcAgg=(srcA||'none');this.destAgg=(destA||'none');}
tab.DateTimePartIndexes.prototype={srcColumnIndex:0,destColumnIndex:0,srcAgg:null,destAgg:null}
tab.SelectionUtils=function(){}
tab.SelectionUtils.get_$0=function(){return tab.Logger.lazyGetLogger(tab.SelectionUtils);}
tab.SelectionUtils.resolveLegendSelection=function(action,selectedItems,legend,currentSelection){var $0=[];if(ss.isValue(selectedItems)){var $1=currentSelection.get_selectionPresModel()||{};switch(action){case 'toggle':if(ss.isValue($1.objectIds)){$0.addRange($1.objectIds);}var $enum1=ss.IEnumerator.getEnumerator(selectedItems);while($enum1.moveNext()){var $3=$enum1.current;var $4=$0.indexOf($3.objectId);if($4>=0){$0.removeAt($4);}else{$0.add($3.objectId);}}break;case 'range':$0=tab.SelectionUtils.$1(selectedItems,legend,$1);break;case 'simple':var $2=(ss.isValue($1.objectIds))?$1.objectIds:new Array(0);if($2.length<=1){var $enum2=ss.IEnumerator.getEnumerator(selectedItems);while($enum2.moveNext()){var $5=$enum2.current;var $6=$2.indexOf($5.objectId);if($6>=0){$0.removeAt($6);}else{$0.add($5.objectId);}}}else{$0.addRange(_.pluck(selectedItems,'objectId'));}break;}}return $0;}
tab.SelectionUtils.resolveMarkSelection=function(action,selectedMarkIDs,currentSelection,isAreaSelection){var $0=[];switch(action){case 'simple':if(!isAreaSelection&&selectedMarkIDs.length===1&&currentSelection.get_ids().length===1&&selectedMarkIDs[0]===currentSelection.get_ids()[0]){$0.clear();}else{$0.addRange(selectedMarkIDs);}break;case 'toggle':$0.addRange(currentSelection.get_ids());var $enum1=ss.IEnumerator.getEnumerator(selectedMarkIDs);while($enum1.moveNext()){var $1=$enum1.current;if(!currentSelection.isMarkSelected($1)){$0.add($1);}else if(!isAreaSelection){$0.remove($1);}}break;case 'range':break;}return $0;}
tab.SelectionUtils.resolveNodeSelection=function(action,allNodes,selectedNode,currentSelection,selectionToUpdate){var $0=[];if(ss.isValue(selectedNode)){switch(action){case 'simple':tab.SelectionUtils.$3(selectedNode,currentSelection,$0);break;case 'toggle':tab.SelectionUtils.$4(selectedNode,currentSelection,$0);break;case 'range':tab.SelectionUtils.$2(allNodes,selectedNode,currentSelection,$0);break;}}selectionToUpdate.selectedNodes=$0;}
tab.SelectionUtils.$1=function($p0,$p1,$p2){var $0=[];if(!ss.isValue($p2.objectIds)){return $0;}$0.addRange($p2.objectIds);$0.addRange(_.pluck($p0,'objectId'));var $1=_.last($p2.objectIds);var $2=-1;for(var $6=0;$6<$p1.get_items().length;$6++){if($p1.get_items()[$6].objectId===$1){$2=$6;}}var $3=$p1.get_items().indexOf(_.first($p0));if($2<0||$3<0){return _.uniq($0);}var $4=Math.min($2,$3);var $5=$4+Math.abs($2-$3)+1;for(var $7=$4;$7<$5;$7++){$0.add($p1.get_items()[$7].objectId);}return _.uniq($0);}
tab.SelectionUtils.$2=function($p0,$p1,$p2,$p3){var $0=_.last($p2.get_nodes());if(ss.isNullOrUndefined($0)){$p3.addRange($p2.get_nodes());var $1={};$1.columnIndices=$p1.columnIndices;$1.aliasIndices=$p1.aliasIndices;$p3.add($1);}else{$p3.addRange($p2.get_nodes());var $2=-1;for(var $4=0;$4<$p0.length;$4++){var $5=$p0[$4];if(_.isEqual($5.columnIndices,$0.columnIndices)&&_.isEqual($5.aliasIndices,$0.aliasIndices)){$2=$4;break;}}var $3=$p0.indexOf($p1);if($p1.columnIndices[0]!==$p0[$2].columnIndices[0]){if(!$p2.isNodeAncestorSelected($p1)){var $6={};$6.columnIndices=$p1.columnIndices;$6.aliasIndices=$p1.aliasIndices;$p3.add($6);}}else{var $7=$p0.extract(Math.min($2,$3),Math.abs($2-$3)+1);var $enum1=ss.IEnumerator.getEnumerator($7);while($enum1.moveNext()){var $8=$enum1.current;if($8.columnIndices[0]!==$p1.columnIndices[0]){continue;}if($p2.isNodeSelected($8)){continue;}if($p2.isNodeAncestorSelected($8)){continue;}var $9={};$9.columnIndices=$8.columnIndices;$9.aliasIndices=$8.aliasIndices;$p3.add($9);}}}}
tab.SelectionUtils.$3=function($p0,$p1,$p2){if(!$p1.isNodeSelected($p0)||$p1.get_nodes().length>1){var $0={};$0.columnIndices=$p0.columnIndices;$0.aliasIndices=$p0.aliasIndices;$p2.add($0);}}
tab.SelectionUtils.$4=function($p0,$p1,$p2){$p2.addRange($p1.get_nodes());var $0=$p1.findNodeSelection($p0);if(ss.isValue($0)){$p2.remove($0);}else if(!$p1.isNodeAncestorSelected($p0)){var $1={};$1.columnIndices=$p0.columnIndices;$1.aliasIndices=$p0.aliasIndices;$p2.add($1);}}
tab.StartupUtils=function(){}
tab.StartupUtils.callAfterBootstrap=function(action){if(tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()){action();}else{var $0=null;var $1=function(){
action();dojo.unsubscribe($0);};$0=dojo.subscribe('onBootstrapSuccess',$1);}}
tab.SubscriptionDisposable=function(subscription){this.$0=subscription;}
tab.SubscriptionDisposable.prototype={$0:null,dispose:function(){dojo.unsubscribe(this.$0);}}
tab.VizDataField=function(dataDictionary,vizDataPresModel,captionOrFieldName){this.$1=tab.VizDataModel.getTupleIdColumn(vizDataPresModel).tupleIds;this.$0=tab.VizDataModel.findColumnByCaptionOrFieldName(vizDataPresModel,captionOrFieldName);if(ss.isValue(this.$0)){var $enum1=ss.IEnumerator.getEnumerator(dataDictionary.dataColumns);while($enum1.moveNext()){var $0=$enum1.current;if($0.dataType===this.$0.dataType){this.$2=$0.dataValues;}if($0.dataType==='cstring'){this.$3=$0.dataValues;}}}}
tab.VizDataField.prototype={$0:null,$1:null,$2:null,$3:null,get_dataType:function(){return this.$0.dataType;},get_fieldName:function(){return this.$0.fn;},get_fieldCaption:function(){return this.$0.fieldCaption;},get_localBaseColumnName:function(){return this.$0.localBaseColumnName;},get_role:function(){return this.$0.fieldRole;},get_formatStrings:function(){return this.$0.formatStrings;},get_numDataValues:function(){if(ss.isValue(this.$1)&&ss.isValue(this.$2)&&ss.isValue(this.$0.valueIndices)){return Math.min(this.$1.length,this.$0.valueIndices.length);}return 0;},hasTotalAtTupleId:function(tupleId){var $0=false;var $1=this.getTupleIndex(tupleId);var $2=this.$6($1);if(ss.isNullOrUndefined($2)||isNaN($2)){return false;}if($2>=0){var $3=this.$2[$2].toString();if($3===tableau.format.specialAll){$0=true;}}else{var $4=this.$3[-$2-1];if($4===tableau.format.specialAll){$0=true;}}return $0;},isValidTupleIndexForAliasTable:function(tupleIndex){var $0=tupleIndex;var $1=this.$4($0);return $1;},getAliasIndexFromTupleIndex:function(tupleIndex){var $0=tupleIndex;if(!this.$4($0)){return Number.NaN;}var $1=this.$0.aliasIndices[$0];if($1===2147483647){return Number.NaN;}return $1;},getAliasIndexFromAliasValue:function(aliasValue){var $enum1=ss.IEnumerator.getEnumerator(this.$0.aliasIndices);while($enum1.moveNext()){var $0=$enum1.current;var $1=this.getAliasValueFromAliasIndex($0);if(aliasValue == $1){return $0;}}return Number.NaN;},getAliasValueAtTupleId:function(tupleId){return this.getAliasValueAtTupleIndex(this.getTupleIndex(tupleId));},getAliasValueAtTupleIndex:function(tupleIndex){var $0=this.getAliasIndexFromTupleIndex(tupleIndex);if(ss.isValue($0)&&!isNaN($0)){return this.getAliasValueFromAliasIndex($0);}return null;},getAliasValueFromAliasIndex:function(aliasIndex){var $0;if(aliasIndex>=0){var $1=this.$2[aliasIndex].toString();if(tableau.format.isSpecialValue($1)){$0=tableau.format.formatSpecial($1);}else{$0=this.formatValue($1);}}else{$0=this.$3[-aliasIndex-1];if(tableau.format.isSpecialValue($0)){$0=tableau.format.formatSpecial($0);}}return $0;},isSpecialAliasValue:function(aliasIndex){var $0;if(aliasIndex>=0){$0=this.$2[aliasIndex].toString();}else{$0=this.$3[-aliasIndex-1];}return tableau.format.isSpecialValue($0);},getDataValueAtTupleId:function(tupleId){return this.getDataValueAtTupleIndex(this.getTupleIndex(tupleId));},getDataValueAtTupleIndex:function(tupleIndex){var $0=this.$6(tupleIndex);if(ss.isValue($0)&&!isNaN($0)){return this.getDataValueAtDataValueIndex($0);}return null;},getDataValueAtDataValueIndex:function(dataValueIndex){if(dataValueIndex===2147483647){return Number.NaN;}return this.$2[dataValueIndex];},hasDataValueAtTupleId:function(tupleId){return this.hasDataValueAtTupleIndex(this.getTupleIndex(tupleId));},hasDataValueAtTupleIndex:function(tupleIndex){var $0=this.$5(tupleIndex);return $0;},getTupleID:function(tupleIndex){return this.$1[tupleIndex];},getTupleIndex:function(tupleId){return this.$1.indexOf(tupleId);},formatValue:function(value){return tableau.format.formatString(value,this.get_dataType(),this.get_formatStrings(),this.get_role());},$4:function($p0){var $0=ss.isValue(this.$0.aliasIndices)&&$p0>=0&&$p0<this.$0.aliasIndices.length;return $0;},$5:function($p0){var $0=$p0;var $1=ss.isValue(this.$0.valueIndices)&&$0>=0&&$0<this.$0.valueIndices.length;return $1;},$6:function($p0){if(!this.$5($p0)){return Number.NaN;}var $0=this.$0.valueIndices[$p0];if($0===2147483647){return Number.NaN;}return $0;}}
tab.VizDataUtils=function(){}
tab.VizDataUtils.constructUrl=function(dataDictionary,linkInfo,source,tupleIds,sheetId){var $0=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),sheetId);var $1=function($p1_0,$p1_1,$p1_2){
if(String.isNullOrEmpty($p1_1)){if(ss.isValue(tupleIds)){return tab.VizDataUtils.$4($p1_0,tupleIds,1,linkInfo);}return null;}return tab.VizDataUtils.$8($0,$p1_0,$p1_1);};var $2=tab.VizDataUtils.decodeAndReplaceData(dataDictionary,linkInfo.url,'<','>',source,$1);if(!$2.second){return null;}return $2.first;}
tab.VizDataUtils.constructUrlForFilterActionFromTargetURL=function(dataDictionary,targetURL,source,tupleIds){var $0=function($p1_0,$p1_1,$p1_2){
return tab.VizDataUtils.$5($p1_0,tupleIds,$p1_2,',');};var $1=tab.VizDataUtils.decodeAndReplaceData(dataDictionary,targetURL,'<','>',source,$0);return $1.first;}
tab.VizDataUtils.constructUrlFromString=function(dataDictionary,linkDisplayStr,source,tupleIds,sheetId){var $0=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),sheetId);var $1=function($p1_0,$p1_1,$p1_2){
if(String.isNullOrEmpty($p1_1)){return tab.VizDataUtils.$6($p1_0,tupleIds,1);}else{return tab.VizDataUtils.$8($0,$p1_0,$p1_1);}};var $2=tab.VizDataUtils.decodeAndReplaceData(dataDictionary,linkDisplayStr,'<','>',source,$1);return $2.first;}
tab.VizDataUtils.constructHtml=function(dataDictionary,html,source,tupleIds){var $0=function($p1_0,$p1_1,$p1_2){
return tab.VizDataUtils.$6($p1_0,tupleIds,0);};var $1=tab.VizDataUtils.decodeAndReplaceData(dataDictionary,html,'&lt;','&gt;',source,$0);var $2=$($1.first);var $3=[];tab.VizDataUtils.$1($2,$3);tab.VizDataUtils.$2($2,$3);if(tab.MiscUtil.isNullOrEmpty($2.text())){return '';}return $2.wrap('<div>').parent().html();}
tab.VizDataUtils.decodeAndReplaceData=function(dataDictionary,original,open,close,vizDataModel,getStringForColumn){var $0=true;var $1=tab.VizDataUtils.$0(original,'escaped_open_tag');var $2=tab.VizDataUtils.$0(original,'escaped_close_tag');var $3=(original).replaceAll(open+open,$1).replaceAll(close+close,$2);var $4=$3.split(open);var $5=null;var $6=new ss.StringBuilder($4[0]);for(var $8=1;$8<$4.length;++$8){var $9=$4[$8];var $A=$9.split(close);var $B=$A[0].replaceAll($1,open).replaceAll($2,close).htmlDecode();var $C=$A[1];var $D;var $E=true;var $F=$B.lastIndexOf('~');var $10=$B.lastIndexOf(']');if($F>=0&&($10===-1||$10<$F)){$D=$B.substr($F);$B=$B.substr(0,$F);if($D==='~na'){$E=false;}}if(tab.VizDataUtils.$7($B)){var $16=$B.indexOf('(');$5=$B.substring(0,$16);$B=$B.substring($16+1,$B.length-1);}var $11=$B.indexOf('[');var $12=$B.lastIndexOf(']');if($11>=0&&$11<$12){$B=$B.substring($11+1,$12);}if($B.startsWith('Parameters.')){return new ss.Tuple('',false);}var $13=tab.VizDataModel.findColumnByCaptionOrFieldName(vizDataModel.get_vizDataPresModel(),$B);if(ss.isNullOrUndefined($13)){return new ss.Tuple('',false);}var $14=new tab.VizDataField(dataDictionary,vizDataModel.get_vizDataPresModel(),$B);var $15=getStringForColumn($14,$5,$E);if(ss.isNullOrUndefined($15)){$0=false;}else{$6.append($15);}$6.append($C);}var $7=$6.toString().replaceAll($1,open).replaceAll($2,close);return new ss.Tuple($7,$0);}
tab.VizDataUtils.hasTupleWithNonTotalValue=function(vizData,dataDictionary,effectiveTupleIds){var $enum1=ss.IEnumerator.getEnumerator(effectiveTupleIds);while($enum1.moveNext()){var $0=$enum1.current;var $1=false;var $2=vizData.get_vizDataPresModel().vizColumns;var $enum2=ss.IEnumerator.getEnumerator($2);while($enum2.moveNext()){var $3=$enum2.current;if(!tab.MiscUtil.isNullOrEmpty($3.tupleIds)||$3.fieldRole!=='dimension'){continue;}var $4=new tab.VizDataField(dataDictionary,vizData.get_vizDataPresModel(),$3.fn);if($4.hasTotalAtTupleId($0)){$1=true;break;}}if(!$1){return true;}}return false;}
tab.VizDataUtils.$0=function($p0,$p1){var $0=$p1;while($p0.indexOf($0)>-1){$0+=parseInt((Math.random()*10000));}return $0;}
tab.VizDataUtils.$1=function($p0,$p1){var $0=$p0.clone().children().remove().end().text();if($0.indexOf('~~~???~~~')!==-1){$p1.add($p0);}var $enum1=ss.IEnumerator.getEnumerator($p0.children().get());while($enum1.moveNext()){var $1=$enum1.current;tab.VizDataUtils.$1($($1),$p1);}}
tab.VizDataUtils.$2=function($p0,$p1){var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $0=$enum1.current;var $1=tab.VizDataUtils.$3($p0,$0,'tr');if(ss.isValue($1)){$1.remove();}else{var $2=tab.VizDataUtils.$3($p0,$0,'div');if(ss.isValue($2)){$2.remove();}else{$0.remove();}}}}
tab.VizDataUtils.$3=function($p0,$p1,$p2){var $0=$p1;if(ss.isValue($p0)&&ss.isValue($p1)&&$p0.find($p1).length===1){while($0[0]!==$p0[0]){if($0[0].tagName.toLowerCase()===$p2){return $0;}$0=$0.parent();}}return null;}
tab.VizDataUtils.$4=function($p0,$p1,$p2,$p3){var $0=[];for(var $2=0;$2<$p1.length;++$2){var $3=$p0.getAliasValueAtTupleId($p1[$2]);if($p3.shouldUrlEscape){$3=encodeURIComponent($3);}if($p1.length>1&&$3.indexOf($p3.delimiter)>=0){$3=$3.replaceAll($p3.delimiter,$p3.escapeString+$p3.delimiter);}if(!$0.contains($3)){$0.add($3);}}if($0.length>1&&ss.isNullOrUndefined($p3.delimiter)){return null;}var $1=$0.join($p3.delimiter);if(!$p2){$1=tableau.format.escapeHTML($1);}return $1;}
tab.VizDataUtils.$5=function($p0,$p1,$p2,$p3){var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $1=$enum1.current;var $2=($p2)?$p0.getAliasValueAtTupleId($1):$p0.getDataValueAtTupleId($1).toString();if(!$0.contains($2)){$0.add($2);}}return $0.join($p3);}
tab.VizDataUtils.$6=function($p0,$p1,$p2){var $0;if($p1.length>1){if(!$p0.get_numDataValues()){return '...';}var $1=new Array($p1.length);for(var $3=0;$3<$p1.length;++$3){var $4=$p0.getDataValueAtTupleId($p1[$3]).toString();if(ss.isNull($4)||tableau.format.isSpecialValue($4)){$4='0';}else if(ss.isUndefined($4)||!$4.length){return '...';}$1[$3]=$4;}var $2=0;for(var $5=0;$5<$1.length;++$5){$2+=parseFloat($1[$5]);}$0=tableau.format.formatString($2.toString(),$p0.get_dataType(),$p0.get_formatStrings(),$p0.get_role());}else if($p1.length===1){var $6=$p0.getAliasValueAtTupleId($p1[0]);if(ss.isNullOrUndefined($6)){return '~~~???~~~';}$0=$6;}else{return '';}if(!$p2){return tableau.format.escapeHTML($0);}else{return $0;}}
tab.VizDataUtils.$7=function($p0){if($p0.startsWith('FILTERMAX(')){return true;}else if($p0.startsWith('FILTERMIN(')){return true;}else if($p0.startsWith('FILTERVALUES(')){return true;}return false;}
tab.VizDataUtils.$8=function($p0,$p1,$p2){var $0=$p1.get_fieldName();var $1=new String();var $2=$p0.get_vizDataModel().getColumnByCaptionOrFieldName($0);if(ss.isValue($2)&&ss.isValue($2.filterContext)){var $3=$2.filterContext;var $4=null;if($p2==='FILTERMAX'){$4=$3.filterMaxIndices;}else if($p2==='FILTERMIN'){$4=$3.filterMinIndices;}else if($p2==='FILTERVALUES'){$4=$3.filterValueIndices;}if(!tab.MiscUtil.isNullOrEmpty($4)){var $5=[];var $enum1=ss.IEnumerator.getEnumerator($4);while($enum1.moveNext()){var $6=$enum1.current;$5.push($p1.getDataValueAtDataValueIndex($6));}$1=$5.join(',');}}return $1;}
tab.TabResources.registerClass('tab.TabResources');tab.ApiClientCommands.registerClass('tab.ApiClientCommands');tab.StoryClientCommands.registerClass('tab.StoryClientCommands');tab.UberTipClientCommands.registerClass('tab.UberTipClientCommands');tab.UbertipParams.registerClass('tab.UbertipParams');tab.vqldomain$2.registerClass('tab.vqldomain$2',null,tab.IClientCommand);tab.vqldomain$6.registerClass('tab.vqldomain$6',tab.vqldomain$2);tab.vqldomain$8.registerClass('tab.vqldomain$8',tab.vqldomain$6);tab.FilterClientCommands.registerClass('tab.FilterClientCommands');tab.SheetClientCommands.registerClass('tab.SheetClientCommands');tab.VizClientCommands.registerClass('tab.VizClientCommands');tab.VizRegionRect.registerClass('tab.VizRegionRect');tab.vqldomain$3.registerClass('tab.vqldomain$3',null,tab.IRemoteCommandHandler);tab.CommandPermission.registerClass('tab.CommandPermission');tab.CommandSerializer.registerClass('tab.CommandSerializer');tab.DeferLayoutImpl.registerClass('tab.DeferLayoutImpl',null,tab.IDeferLayout);tab.EventMap.registerClass('tab.EventMap');tab.vqldomain$4.registerClass('tab.vqldomain$4',tab.vqldomain$2);tab.vqldomain$5.registerClass('tab.vqldomain$5',tab.vqldomain$2);tab.PermissionManager.registerClass('tab.PermissionManager');tab.PresentationModel.registerClass('tab.PresentationModel');tab.PresModelPathItem.registerClass('tab.PresModelPathItem');tab.PresModelPath.registerClass('tab.PresModelPath');tab.UbertipSerializer.registerClass('tab.UbertipSerializer');tab.Model.registerClass('tab.Model');tab.CategoricalLegendModel.registerClass('tab.CategoricalLegendModel',tab.Model);tab.ColorModel.registerClass('tab.ColorModel');tab.StoryPointsModel.registerClass('tab.StoryPointsModel',tab.Model);tab.ColorPaletteCollectionModel.registerClass('tab.ColorPaletteCollectionModel',tab.Model);tab.FlipboardModel.registerClass('tab.FlipboardModel',tab.Model);tab.QuantitativeColorLegendModel.registerClass('tab.QuantitativeColorLegendModel',tab.Model);tab.StoryPointModel.registerClass('tab.StoryPointModel',tab.Model);tab.FieldModel.registerClass('tab.FieldModel',tab.Model);tab.FieldColumnModel.registerClass('tab.FieldColumnModel',tab.FieldModel);tab.GroupModel.registerClass('tab.GroupModel',tab.FieldColumnModel);tab.DrillPathModel.registerClass('tab.DrillPathModel',tab.FieldModel);tab.CubeHierarchyModel.registerClass('tab.CubeHierarchyModel',tab.FieldModel);tab.FolderModel.registerClass('tab.FolderModel',tab.FieldModel);tab.CubeFolderModel.registerClass('tab.CubeFolderModel',tab.FieldModel);tab.CubeDimensionModel.registerClass('tab.CubeDimensionModel',tab.FieldModel);tab.RelationalTableModel.registerClass('tab.RelationalTableModel',tab.FieldModel);tab.MultipleFieldsModel.registerClass('tab.MultipleFieldsModel',tab.FieldModel);tab.FlipboardNavigatorModel.registerClass('tab.FlipboardNavigatorModel',tab.Model);tab.ImageZoneModel.registerClass('tab.ImageZoneModel',tab.Model);tab.WebZoneModel.registerClass('tab.WebZoneModel',tab.Model);tab.LegacyLegendModel.registerClass('tab.LegacyLegendModel',tab.Model);tab.CustomizedView.registerClass('tab.CustomizedView');tab.ParameterCtrlModel.registerClass('tab.ParameterCtrlModel',tab.Model);tab.PageModel.registerClass('tab.PageModel',tab.Model);tab.VisualImageModel.registerClass('tab.VisualImageModel',tab.Model);tab.ViewGeometryModel.registerClass('tab.ViewGeometryModel',tab.Model);tab.FilterModel.registerClass('tab.FilterModel',tab.Model);tab.SceneModel.registerClass('tab.SceneModel',tab.Model);tab.ProjectModel.registerClass('tab.ProjectModel');tab.Schedule.registerClass('tab.Schedule');tab.SelectionsModel.registerClass('tab.SelectionsModel',tab.Model);tab.User.registerClass('tab.User');tab.SortIndicatorsModel.registerClass('tab.SortIndicatorsModel',tab.Model);tab.VisualListModel.registerClass('tab.VisualListModel',tab.Model);tab.VizDataModel.registerClass('tab.VizDataModel',tab.Model);tab.ZoneModel.registerClass('tab.ZoneModel',tab.Model);tab.ZoneContentWrapperModel.registerClass('tab.ZoneContentWrapperModel',tab.Model);tab.ShapeModel.registerClass('tab.ShapeModel');tab.TextRegionModel.registerClass('tab.TextRegionModel',tab.Model);tab.QuickFilterModel.registerClass('tab.QuickFilterModel',tab.Model);tab.ZonesModel.registerClass('tab.ZonesModel',tab.Model);tab.ExportServerCommands.registerClass('tab.ExportServerCommands');tab.SessionServerCommands.registerClass('tab.SessionServerCommands');tab.ToolbarServerCommands.registerClass('tab.ToolbarServerCommands');tab.ParameterServerCommands.registerClass('tab.ParameterServerCommands');tab.PageServerCommands.registerClass('tab.PageServerCommands');tab.SaveServerCommands.registerClass('tab.SaveServerCommands');tab.SortServerCommands.registerClass('tab.SortServerCommands');tab.WorkgroupServerCommands.registerClass('tab.WorkgroupServerCommands');tab.WorksheetServerCommands.registerClass('tab.WorksheetServerCommands');tab.WorldUpdateServerCommands.registerClass('tab.WorldUpdateServerCommands');tab.PaneClientCommands.registerClass('tab.PaneClientCommands');tab.SchemaClientCommands.registerClass('tab.SchemaClientCommands');tab.SelectionClientCommands.registerClass('tab.SelectionClientCommands');tab.ShelfClientCommands.registerClass('tab.ShelfClientCommands');tab.vqldomain$9.registerClass('tab.vqldomain$9',tab.vqldomain$5);tab.CommandController.registerClass('tab.CommandController');tab.vqldomain$1.registerClass('tab.vqldomain$1');tab.vqldomain$7.registerClass('tab.vqldomain$7',tab.vqldomain$2);tab.Transactor.registerClass('tab.Transactor');tab.Transaction.registerClass('tab.Transaction');tab.vqldomain$0.registerClass('tab.vqldomain$0');tab.ApplicationModel.registerClass('tab.ApplicationModel',tab.Model);tab.SelectionModel.registerClass('tab.SelectionModel',tab.Model);tab.DataSourceModel.registerClass('tab.DataSourceModel',tab.Model);tab.LayerEncodingModel.registerClass('tab.LayerEncodingModel',tab.Model);tab.MarksCardModel.registerClass('tab.MarksCardModel',tab.Model);tab.MarkSizeModel.registerClass('tab.MarkSizeModel',tab.Model,tab.IContinuousRangeModel);tab.DataSchemaModel.registerClass('tab.DataSchemaModel',tab.Model);tab.PillModel.registerClass('tab.PillModel',tab.Model);tab.ShelfModel.registerClass('tab.ShelfModel',tab.Model);tab.ShelfItemsArrayModel.registerClass('tab.ShelfItemsArrayModel',tab.Model);tab.VisualModel.registerClass('tab.VisualModel',tab.Model);tab.DashboardModel.registerClass('tab.DashboardModel',tab.Model);tab.WorkbookModel.registerClass('tab.WorkbookModel',tab.Model);tab.ShelvesModel.registerClass('tab.ShelvesModel',tab.Model);tab.ShelfListArrayModel.registerClass('tab.ShelfListArrayModel',tab.Model);tab.ServerCommands.registerClass('tab.ServerCommands');tab.BaseSession.registerClass('tab.BaseSession');tab.CustomizedViewSession.registerClass('tab.CustomizedViewSession');tab.DojoCurrentState.registerClass('tab.DojoCurrentState');tab.LayoutSession.registerClass('tab.LayoutSession',tab.BaseSession);tab.SessionAjaxCallManager.registerClass('tab.SessionAjaxCallManager');tab.SessionAjaxHandler.registerClass('tab.SessionAjaxHandler');tab.SheetSession.registerClass('tab.SheetSession',tab.BaseSession);tab.ViewSession.registerClass('tab.ViewSession',tab.SheetSession);tab.WaitHandler.registerClass('tab.WaitHandler');tab.BrushingComputer.registerClass('tab.BrushingComputer');tab.CategoricalFilterData.registerClass('tab.CategoricalFilterData');tab.Changelist.registerClass('tab.Changelist');tab.RawChange.registerClass('tab.RawChange');tab.CompiledChecklistChangelist.registerClass('tab.CompiledChecklistChangelist');tab.CompiledRadiolistChangelist.registerClass('tab.CompiledRadiolistChangelist');tab.CommandUtils.registerClass('tab.CommandUtils');tab.ActionUtils.registerClass('tab.ActionUtils');tab.InvalidationInfo.registerClass('tab.InvalidationInfo');tab.LocalUbertipInfo.registerClass('tab.LocalUbertipInfo');tab.ModelUtils.registerClass('tab.ModelUtils');tab.QuantitativeFilterData.registerClass('tab.QuantitativeFilterData');tab.XhrUtil.registerClass('tab.XhrUtil');tab.UndoList.registerClass('tab.UndoList');tab.CommandsModel.registerClass('tab.CommandsModel',tab.Model);tab.RangeTransform.registerClass('tab.RangeTransform');tab.LinearRangeTransform.registerClass('tab.LinearRangeTransform',tab.RangeTransform);tab.AcceleratingRangeTransform.registerClass('tab.AcceleratingRangeTransform',tab.RangeTransform);tab.SceneUtils.registerClass('tab.SceneUtils');tab.DataUtils.registerClass('tab.DataUtils');tab.DataValues.registerClass('tab.DataValues');tab.DateTimePartIndexes.registerClass('tab.DateTimePartIndexes');tab.SelectionUtils.registerClass('tab.SelectionUtils');tab.StartupUtils.registerClass('tab.StartupUtils');tab.SubscriptionDisposable.registerClass('tab.SubscriptionDisposable',null,ss.IDisposable);tab.VizDataField.registerClass('tab.VizDataField');tab.VizDataUtils.registerClass('tab.VizDataUtils');tab.TabResources.$0={};(function(){tab.TabResources.$0['TQRC_DRILL_DOWN']='others/DrillDown.png';tab.TabResources.$0['TQRC_DRILL_UP']='others/DrillUp.png';tab.TabResources.$0['TQRC_EXCLUDE']='others/Exclude.png';tab.TabResources.$0['TQRC_KEEP_ONLY']='others/KeepOnly.png';tab.TabResources.$0['TQRC_MERGE']='others/Merge.png';tab.TabResources.$0['TQRC_VIEWDATA']='others/ViewData.png';tab.TabResources.$0['TQRC_SORT_ASCENDING']='others/SortAscending.png';tab.TabResources.$0['TQRC_SORT_DESCENDING']='others/SortDescending.png';tab.TabResources.$0['TQRC_SPLIT']='others/Split.png';tab.TabResources.$0['TQRC_SHOWME_SHOWME']='showme/showme.png';tab.TabResources.$0['TQRC_SHOWME_CLOSE']='showme/close.png';tab.TabResources.$0['TQRC_SHOWME_GRIPPER']='showme/gripper.png';tab.TabResources.$0['TQRC_SHOWME_BIN']='showme/bin.png';tab.TabResources.$0['TQRC_SHOWME_DATE']='showme/date.png';tab.TabResources.$0['TQRC_SHOWME_GEO']='showme/geo.png';tab.TabResources.$0['TQRC_SHOWME_GLOW']='showme/glow.png';tab.TabResources.$0['TQRC_SHOWME_TITLE_BACKGROUND_REST']='showme/title-background-rest.png';tab.TabResources.$0['TQRC_SHOWME_TITLE_BACKGROUND_HOVER']='showme/title-background-hover.png';tab.TabResources.$0['TQRC_SHOWME_1_BARSTACKED']='showme/enabled/BarStacked.png';tab.TabResources.$0['TQRC_SHOWME_1_BARSIDEBY']='showme/enabled/BarSideBySide.png';tab.TabResources.$0['TQRC_SHOWME_1_BARHORIZONTAL']='showme/enabled/BarHorizontal.png';tab.TabResources.$0['TQRC_SHOWME_1_BARLINE']='showme/enabled/BarLine.png';tab.TabResources.$0['TQRC_SHOWME_1_CIRCLE']='showme/enabled/Circle.png';tab.TabResources.$0['TQRC_SHOWME_1_CIRCLESIDEBYSIDE']='showme/enabled/CircleSideBySide.png';tab.TabResources.$0['TQRC_SHOWME_1_GANTT']='showme/enabled/Gantt.png';tab.TabResources.$0['TQRC_SHOWME_1_HEATMAP']='showme/enabled/HeatMap.png';tab.TabResources.$0['TQRC_SHOWME_1_HISTOGRAM']='showme/enabled/Histogram.png';tab.TabResources.$0['TQRC_SHOWME_1_LINEDIM']='showme/enabled/LineDimension.png';tab.TabResources.$0['TQRC_SHOWME_1_LINEMEAS']='showme/enabled/LineMeasure.png';tab.TabResources.$0['TQRC_SHOWME_1_AREAMEAS']='showme/enabled/FilledLineContinuous.png';tab.TabResources.$0['TQRC_SHOWME_1_AREADIM']='showme/enabled/FilledLineDiscrete.png';tab.TabResources.$0['TQRC_SHOWME_1_SCATSING']='showme/enabled/ScatterSingle.png';tab.TabResources.$0['TQRC_SHOWME_1_TEXTTABLE']='showme/enabled/TextTable.png';tab.TabResources.$0['TQRC_SHOWME_1_SPOTTABLE']='showme/enabled/SpotTable.png';tab.TabResources.$0['TQRC_SHOWME_1_MAPS']='showme/enabled/Maps.png';tab.TabResources.$0['TQRC_SHOWME_1_FILLEDMAPS']='showme/enabled/FilledMaps.png';tab.TabResources.$0['TQRC_SHOWME_1_PIES']='showme/enabled/Pies.png';tab.TabResources.$0['TQRC_SHOWME_1_DUALLINE']='showme/enabled/DualAxis.png';tab.TabResources.$0['TQRC_SHOWME_1_BULLET']='showme/enabled/Bullet.png';tab.TabResources.$0['TQRC_SHOWME_1_TREEMAP']='showme/enabled/Treemap.png';tab.TabResources.$0['TQRC_SHOWME_1_BUBBLE']='showme/enabled/Bubble.png';tab.TabResources.$0['TQRC_SHOWME_1_BOXPLOT']='showme/enabled/Boxplot.png';tab.TabResources.$0['TQRC_SHOWME_0_BARSTACKED']='showme/disabled/BarStacked.png';tab.TabResources.$0['TQRC_SHOWME_0_BARSIDEBY']='showme/disabled/BarSideBySide.png';tab.TabResources.$0['TQRC_SHOWME_0_BARHORIZONTAL']='showme/disabled/BarHorizontal.png';tab.TabResources.$0['TQRC_SHOWME_0_BARLINE']='showme/disabled/BarLine.png';tab.TabResources.$0['TQRC_SHOWME_0_CIRCLE']='showme/disabled/Circle.png';tab.TabResources.$0['TQRC_SHOWME_0_CIRCLESIDEBYSIDE']='showme/disabled/CircleSideBySide.png';tab.TabResources.$0['TQRC_SHOWME_0_GANTT']='showme/disabled/Gantt.png';tab.TabResources.$0['TQRC_SHOWME_0_HEATMAP']='showme/disabled/HeatMap.png';tab.TabResources.$0['TQRC_SHOWME_0_HISTOGRAM']='showme/disabled/Histogram.png';tab.TabResources.$0['TQRC_SHOWME_0_LINEDIM']='showme/disabled/LineDimension.png';tab.TabResources.$0['TQRC_SHOWME_0_LINEMEAS']='showme/disabled/LineMeasure.png';tab.TabResources.$0['TQRC_SHOWME_0_AREAMEAS']='showme/disabled/FilledLineContinuous.png';tab.TabResources.$0['TQRC_SHOWME_0_AREADIM']='showme/disabled/FilledLineDiscrete.png';tab.TabResources.$0['TQRC_SHOWME_0_SCATSING']='showme/disabled/ScatterSingle.png';tab.TabResources.$0['TQRC_SHOWME_0_TEXTTABLE']='showme/disabled/TextTable.png';tab.TabResources.$0['TQRC_SHOWME_0_SPOTTABLE']='showme/disabled/SpotTable.png';tab.TabResources.$0['TQRC_SHOWME_0_MAPS']='showme/disabled/Maps.png';tab.TabResources.$0['TQRC_SHOWME_0_FILLEDMAPS']='showme/disabled/FilledMaps.png';tab.TabResources.$0['TQRC_SHOWME_0_PIES']='showme/disabled/Pies.png';tab.TabResources.$0['TQRC_SHOWME_0_DUALLINE']='showme/disabled/DualAxis.png';tab.TabResources.$0['TQRC_SHOWME_0_BULLET']='showme/disabled/Bullet.png';tab.TabResources.$0['TQRC_SHOWME_0_TREEMAP']='showme/disabled/Treemap.png';tab.TabResources.$0['TQRC_SHOWME_0_BUBBLE']='showme/disabled/Bubble.png';tab.TabResources.$0['TQRC_SHOWME_0_BOXPLOT']='showme/disabled/Boxplot.png';tab.TabResources.$0['TQRC_TREE_PLUS']='others/TreePlus.png';tab.TabResources.$0['TQRC_TREE_MINUS']='others/TreeMinus.png';})();
tab.CommandSerializer.$0={'keep-only-or-exclude':2,'quick-sort':4,'clear-sorts':6,'run-action':8,'load-url':9,'merge-or-split':10,'legend-group-or-ungroup':13,'label-drill':11,'level-drill':12};tab.DeferLayoutImpl.$0=null;tab.EventMap.onTabSelect='onTabSelect';tab.EventMap.onDoLaunchAuthoring='onDoLaunchAuthoring';tab.EventMap.newGuid='newGuid';tab.EventMap.newLayoutId='newLayoutId';tab.EventMap.activeViewChanged='activeViewChanged';tab.EventMap.invalidate='invalidate';tab.EventMap.hoverChanged='hoverChanged';tab.EventMap.stateChanged='stateChanged';tab.EventMap.layoutUpdated='layoutUpdated';tab.EventMap.refreshLayoutModel='refreshLayoutModel';tab.EventMap.sheetDataChanged='sheetDataChanged';tab.EventMap.refreshSheetInfo='refreshSheetInfo';tab.EventMap.refreshFilterModel='refreshFilterModel';tab.EventMap.viewChanged='viewChanged';tab.EventMap.refreshVisualModel='refreshVisualModel';tab.EventMap.refreshLegacyLegendImages='refreshLegacyLegendImages';tab.EventMap.refreshMenuModel='refreshMenuModel';tab.EventMap.selectionChanged='selectionChanged';tab.EventMap.fieldSelectionChanged='fieldSelectionChanged';tab.EventMap.onBootstrapSuccess='onBootstrapSuccess';tab.EventMap.openActionUrl='openActionUrl';tab.EventMap.modifierKeysChanged='modifierKeysChanged';tab.EventMap.closeMenus='close-menus';tab.EventMap.$0={};(function(){var $0=0;var $enum1=ss.IEnumerator.getEnumerator(Object.keys((tab.EventName).prototype));while($enum1.moveNext()){var $1=$enum1.current;tab.EventMap.$0[$1]=$0++;}})();
tab.UbertipSerializer.$4=['<span style="white-space:pre"><div class="uberSelection"style="text-align:center;"><span>&nbsp;&nbsp;</span>','<span style="font-weight:bold;">','','</span><span> ','','  </span><span>','\u00b7','  </span><span>','',' </span><span>','','</span><span>',': ','</span><span style="font-weight:bold;">','','</span><span>&nbsp;&nbsp;','</span></div></span>'];tab.UbertipSerializer.$5=['<div class="uberSelection"style="text-align:center;"><span></span>','<span style="font-weight:bold;"> ','',' </span><span>','','</span><div> '];tab.ColorModel.$1=new RegExp('#([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})','i');tab.ColorModel.$2=new RegExp('rgb\\((\\d+),(\\d+),(\\d+)\\)','i');tab.ColorModel.$3=new RegExp('rgba\\((\\d+),(\\d+),(\\d+),(\\d+|0\\.\\d+|1\\.0)\\)','i');tab.SceneModel.$6=new tab.ColorModel(0,0,0,1);tab.Schedule.extract=0;tab.Schedule.subscription=1;tab.VizDataModel.tupleIdColumnName='[system:visual].[tuple_id]';tab.VizDataModel.measureNamesColumnName='[:Measure Names]';tab.ZoneModel.$6='visual';tab.ZoneModel.$7='dashboardTitle';tab.ZoneModel.$8='dashboardText';tab.ZoneModel.$9='quantitativeColorLegend';tab.ZoneModel.$A='colorLegend';tab.ZoneModel.$B='categoricalSizeLegend';tab.ZoneModel.$C='categoricalShapeLegend';tab.ZoneModel.$D='categoricalMapLegend';tab.ZoneModel.$E='parameterControl';tab.ZoneModel.$F='pageModel';tab.ZoneModel.$10='legacyLegend';tab.ZoneModel.$11='imageZone';tab.ZoneModel.$12='webZone';tab.ZoneModel.$13='quickFilter';tab.ZoneModel.$14='flipboardNavigation';tab.ZoneModel.$15='flipboard';tab.SelectionClientCommands.$0=null;(function(){tab.SelectionClientCommands.$0={};tab.SelectionClientCommands.$0['simple']='select-options-simple';tab.SelectionClientCommands.$0['toggle']='select-options-toggle';tab.SelectionClientCommands.$0['range']='select-options-range';tab.SelectionClientCommands.$0['menu']='select-options-menu';})();
tab.CommandController.$0=false;tab.CommandController.$1=false;tab.CommandController.$2=false;tab.CommandController.$3=null;tab.ApplicationModel.$6=null;tab.BaseSession.linkTarget=null;tab.BaseSession.autoUpdate=true;tab.BaseSession.$0=false;tab.BaseSession.$1=null;tab.BaseSession.$2=null;tab.BaseSession.$3=0;tab.BaseSession.$4=null;(function(){tab.BaseSession.$2={'%25':new RegExp('%','g'),'%3B':new RegExp(';','g'),'%2C':new RegExp(',','g'),'%2E':new RegExp('\\.','g'),'%2F':new RegExp('\\/','g'),'%3F':new RegExp('\\?','g'),'%2B':new RegExp('\\+','g'),'%20':new RegExp(' ','g'),'%5C':new RegExp('\\\\','g')};})();
tab.CustomizedViewSession.$5=tab.Logger.getLogger(tab.CustomizedViewSession);tab.CustomizedViewSession.$6={};(function(){var $0=function($p1_0,$p1_1){
for(var $1_0=$p1_0;$1_0<=$p1_1;$1_0++){var $1_1=String.fromCharCode($1_0);tab.CustomizedViewSession.$6[$1_1]=$1_1;}};$0(97,122);$0(64,90);$0(48,57);$0(95,95);$0(45,46);})();
tab.ActionUtils.$1=['http:','https:','mailto:','news:','gopher:','tsc:','tsl:'];tab.ActionUtils.$2=false;tab.ActionUtils.$3=false;tab.ModelUtils.visualPartToRegionMap=null;tab.ModelUtils.$0=null;(function(){tab.ModelUtils.visualPartToRegionMap={};tab.ModelUtils.visualPartToRegionMap['left-axis']='leftaxis';tab.ModelUtils.visualPartToRegionMap['right-axis']='rightaxis';tab.ModelUtils.visualPartToRegionMap['top-axis']='topaxis';tab.ModelUtils.visualPartToRegionMap['bottom-axis']='bottomaxis';tab.ModelUtils.visualPartToRegionMap['y-labels']='yheader';tab.ModelUtils.visualPartToRegionMap['x-labels']='xheader';})();
tab.XhrUtil.guid='';tab.XhrUtil.parentID='';tab.XhrUtil.$0='';tab.Model.$1=null;tab.Model.$2=null;tab.SceneUtils.blackColor=null;(function(){var $0=new tab.ColorModel(0,0,0,1).toRgba();tab.SceneUtils.blackColor={};tab.SceneUtils.blackColor['colorOverrideNone']=$0;tab.SceneUtils.blackColor['colorOverrideFog']=$0;tab.SceneUtils.blackColor['colorOverrideOpaque']=$0;})();
tab.VizDataField.tableSentinelValue=2147483647;tab.VizDataUtils.unknownFieldMarker='~~~???~~~';tab.VizDataUtils.noLocalSummary='...';}());// This script was generated using Script# v0.7.4.0
// vqlui.js
dojo.addOnLoad(function(){
Type.registerNamespace('tab');tab._ApiCommand=function(name,sourceId,handlerId,parameters){this.$1=name;this.$3=sourceId;this.$2=handlerId;this.$4=parameters;}
tab._ApiCommand.$B=function($p0){var $0;var $1=$p0.indexOf(',');if($1<0){$0=$p0;return new tab._ApiCommand($0,null,null,null);}$0=$p0.substr(0,$1);var $2;var $3=$p0.substr($1+1);$1=$3.indexOf(',');if($1<0){$2=$3;return new tab._ApiCommand($0,$2,null,null);}$2=$3.substr(0,$1);var $4;var $5=$3.substr($1+1);$1=$5.indexOf(',');if($1<0){$4=$5;return new tab._ApiCommand($0,$2,$4,null);}$4=$5.substr(0,$1);var $6=$5.substr($1+1);return new tab._ApiCommand($0,$2,$4,$6);}
tab._ApiCommand.prototype={$1:null,$2:null,$3:null,$4:null,get_$5:function(){return this.$1;},get_$6:function(){return this.$2;},get_$7:function(){return this.$3;},get_$8:function(){return this.$4;},get_$9:function(){return !this.get_$A().indexOf('api.',0);},get_$A:function(){return this.$1;},$C:function(){var $0=[];$0.push(this.$1);$0.push(this.$3);$0.push(this.$2);if(ss.isValue(this.$4)){$0.push(this.$4);}var $1=$0.join(',');return $1;}}
tab._apiServerResultParser=function(serverResult){var $0=JSON.parse(serverResult);this.$0=$0['api.commandResult'];this.$1=$0['api.commandData'];}
tab._apiServerResultParser.prototype={$0:null,$1:null,get__result:function(){return this.$0;},get__data:function(){return this.$1;}}
tab.vqlui$4=function(serverResult){var $0=JSON.parse(serverResult);this.$0=$0['api.workbookName'];this.$1=$0['api.worksheetName'];this.$2=$0['api.commandData'];}
tab.vqlui$4.prototype={$0:null,$1:null,$2:null,get_$3:function(){return this.$0;},get_$4:function(){return this.$1;},get_$5:function(){return this.$2;}}
tab.FormattingConverters=function(){}
tab.FormattingConverters.getCSSBorderStyle=function(borderStyle){var $0='solid';switch(borderStyle){case 'bs-dashed':$0='dashed';break;case 'bs-dotted':$0='dotted';break;case 'bs-double':$0='double';break;case 'bs-groove':$0='groove';break;case 'bs-hidden':$0='hidden';break;case 'bs-inset':$0='inset';break;case 'bs-outset':$0='outset';break;case 'bs-ridge':$0='ridge';break;case 'bs-solid':$0='solid';break;case 'bs-none':$0='none';break;default:break;}return $0;}
tab.FormattingConverters.$0=function($p0,$p1){var $0={};if(ss.isValue($p0)){$0=tab.FormattingConverters.$2($p0);if($p0.hasFill){var $1=tab.ColorModel.fromColorCode($p0.fillColor);$0['background-color']=($p1)?$1.toString():$1.toRgb();}}return $0;}
tab.FormattingConverters.$1=function($p0,$p1){var $0={'font-family':$p0.fontName,'font-size':$p0.fontSize+'pt',color:$p0.color};if(ss.isValue($p1)){$0['color']=$p1;}if($p0.fontStyle==='font-style-italic'){$0['font-style']='italic';}if($p0.fontWeight==='font-weight-bold'){$0['font-weight']='bold';}var $1=null;switch($p0.textDecoration){case 'text-decoration-overline':$1='overline';break;case 'text-decoration-strikethrough':$1='line-through';break;case 'text-decoration-underline':$1='underline';break;}if(ss.isValue($1)){$0['text-decoration']=$1;}if(ss.isValue($p0.wrapMode)){switch($p0.wrapMode){case 'text-wrap-off':$0['white-space']='nowrap';break;case 'text-wrap-truncate':$0['overflow-x']='hidden';break;}}return $0;}
tab.FormattingConverters.$2=function($p0){var $0={'border-width':$p0.uw.toString()+'px','border-color':$p0.borderColor,'border-style':tab.FormattingConverters.getCSSBorderStyle($p0.borderStyle)};return $0;}
tab.FormattingConverters.$3=function($p0){var $0={left:$p0.x.toString()+'px',top:$p0.y.toString()+'px',width:$p0.w.toString()+'px',height:$p0.h.toString()+'px'};return $0;}
tab.FormattingConverters.$4=function($p0){var $0='bottom';switch($p0){case 'v-align-bottom':$0='bottom';break;case 'v-align-top':$0='top';break;case 'v-align-center':$0='middle';break;default:break;}return $0;}
tab.FormattingConverters.$5=function($p0){var $0='start';switch($p0){case 'h-align-left':$0='start';break;case 'h-align-center':$0='center';break;case 'h-align-right':$0='end';break;default:break;}return $0;}
tab.RelativeDateFilterPeriodType=function(){};tab.RelativeDateFilterPeriodType.prototype = {year:'year',quarter:'quarter',month:'month',week:'week',day:'day',hour:'hour',minute:'minute',second:'second'}
tab.RelativeDateFilterPeriodType.registerEnum('tab.RelativeDateFilterPeriodType',false);tab.RelativeDateFilterRangeType=function(){};tab.RelativeDateFilterRangeType.prototype = {curr:'curr',todate:'todate',last:'last',next:'next',lastn:'lastn',nextn:'nextn',other:'other',othern:'othern',invalid:'invalid'}
tab.RelativeDateFilterRangeType.registerEnum('tab.RelativeDateFilterRangeType',false);tab.$create_DropResult=function(drag,target,dropAccepted,canceled,ctrlKeyPressed){var $o={};$o.drag=drag;$o.target=target;$o.dropAccepted=dropAccepted;$o.canceled=canceled;$o.isCopyDrop=ctrlKeyPressed;return $o;}
tab.IDragSource=function(){};tab.IDragSource.registerInterface('tab.IDragSource');tab.IDropTarget=function(){};tab.IDropTarget.registerInterface('tab.IDropTarget');tab.$create_GestureEventInfo=function(){var $o={};return $o;}
tab.$create_EventHandleSpec=function(){var $o={};return $o;}
tab.$create_EventHandlerEvent=function(){return {};}
tab.$create_GeometryWithRegions=function(){return {};}
tab.$create_VisibleGeometry=function(){return {};}
tab.IClient=function(){};tab.IClient.registerInterface('tab.IClient');tab.$create_PaneInfo=function(canDragH,canDragV,x,y,w,h){var $o={};$o.canDragH=canDragH;$o.canDragV=canDragV;$o.x=x;$o.y=y;$o.w=w;$o.h=h;return $o;}
tab.$create_VisibleRoom=function(roomAbove,roomBelow,roomLeft,roomRight){var $o={};$o.roomAbove=roomAbove;$o.roomBelow=roomBelow;$o.roomLeft=roomLeft;$o.roomRight=roomRight;return $o;}
tab.NodeType=function(){};tab.NodeType.prototype = {root:0,pane:1,bin:2,mark:3,lineSegmentUnionRect:4,lineSegment:5}
tab.NodeType.registerEnum('tab.NodeType',false);tab.HitTargetType=function(){};tab.HitTargetType.prototype = {rectangle:0,circle:1,line:2,polygon:3}
tab.HitTargetType.registerEnum('tab.HitTargetType',false);tab.IHitTargetGeom=function(){};tab.IHitTargetGeom.registerInterface('tab.IHitTargetGeom');tab.IScrollable=function(){};tab.IScrollable.registerInterface('tab.IScrollable');tab.ClipCase=function(){};tab.ClipCase.prototype = {clipNone:0,clipX:1,clipY:2,clipXY:3}
tab.ClipCase.registerEnum('tab.ClipCase',false);Type.registerNamespace('tableau');Type.registerNamespace('tableau.util');tab.IUberPopupContent=function(){};tab.IUberPopupContent.registerInterface('tab.IUberPopupContent');tab.UberPopupMode=function(){};tab.UberPopupMode.prototype = {closeOnExternalInteraction:0,ignoreExternalInteraction:1}
tab.UberPopupMode.registerEnum('tab.UberPopupMode',false);tab.UberPopupHorizontalAlign=function(){};tab.UberPopupHorizontalAlign.prototype = {left:0,center:1,right:2}
tab.UberPopupHorizontalAlign.registerEnum('tab.UberPopupHorizontalAlign',false);tab.$create_QFMetrics=function(){return {};}
tab.$create_vqlui$2=function(x,y,xStart,isRange,oImg){var $o={};$o.x=x;$o.y=y;$o.$0=xStart;$o.$1=isRange;$o.$2=oImg;return $o;}
tab.IRegionContentProvider=function(){};tab.IRegionContentProvider.registerInterface('tab.IRegionContentProvider');tab.ComboBoxTheme=function(){};tab.ComboBoxTheme.prototype = {standard:0,compact:1}
tab.ComboBoxTheme.registerEnum('tab.ComboBoxTheme',false);tab.ComboBoxMenuThemeChoice=function(){};tab.ComboBoxMenuThemeChoice.prototype = {standard:0,dropdown:1}
tab.ComboBoxMenuThemeChoice.registerEnum('tab.ComboBoxMenuThemeChoice',false);tab.MenuItemCheckState=function(){};tab.MenuItemCheckState.prototype = {none:0,check:1,radio:2}
tab.MenuItemCheckState.registerEnum('tab.MenuItemCheckState',false);tab.$create_CatFilterContentItem=function(){return {};}
tab.IAccordionContent=function(){};tab.IAccordionContent.registerInterface('tab.IAccordionContent');tab.IMovable=function(){};tab.IMovable.registerInterface('tab.IMovable');tab.IScroller=function(){};tab.IScroller.registerInterface('tab.IScroller');tab.ISlider=function(){};tab.ISlider.registerInterface('tab.ISlider');tab.FilteringSearchWidgetStyle=function(){};tab.FilteringSearchWidgetStyle.prototype = {invalid:0,dropdown:1,inline:2}
tab.FilteringSearchWidgetStyle.registerEnum('tab.FilteringSearchWidgetStyle',false);tab.$create_OverlayImageInfo=function(){var $o={};return $o;}
tab.$create_SearchWidgetQfProperty=function(){return {};}
tab.$create_LinkBlurbPair=function(){return {};}
tab.$create_VizParameterInfo=function(){return {};}
tab.$create_ShareSettings=function(){return {};}
tab.$create_ScrollBound=function(){return {};}
tab.$create_MoverObj=function(){return {};}
tab.$create_ContinuousSliderParams=function(){return {};}
tab.$create_SliderParams=function(){return {};}
tab.$create_ScrollData=function(){return {};}
tab.$create_DomRectangle=function(){var $o={};return $o;}
tab.$create_TransformSpec=function(){return {};}
tab.IContentFetcher=function(){};tab.IContentFetcher.registerInterface('tab.IContentFetcher');tab.IContentFormatter=function(){};tab.IContentFormatter.registerInterface('tab.IContentFormatter');tab.ITiledGridModel=function(){};tab.ITiledGridModel.registerInterface('tab.ITiledGridModel');tab.ITiledWidgetUI=function(){};tab.ITiledWidgetUI.registerInterface('tab.ITiledWidgetUI');tab.ApiEventHandler=function(client){this.$0=new tab.DisposableHolder();this.setClient(client);dojo.subscribe('newLayoutId',ss.Delegate.create(this,this.handleTabChanged));dojo.subscribe('layoutUpdated',ss.Delegate.create(this,this.onLayoutUpdated));}
tab.ApiEventHandler.$7=function($p0,$p1){if($p1==='boolean'){if(_.isBoolean($p0)){return $p0;}return (ss.isValue($p0))?$p0.toString().toLowerCase()==='true':false;}if(ss.isNullOrUndefined($p0)){return null;}switch($p1){case 'date':case 'datetime':var $0=null;if(_.isDate($p0)){$0=$p0;}else if(_.isNumber($p0)){if(isNaN($p0)){$0=null;}else{$0=new Date(tableau.types.JsDateFromOleDate($p0));}}else{$0=tab.DateUtil.parsePresModelDate($p0.toString());}if(ss.isNullOrUndefined($0)){return null;}return $0.getTime();case 'integer':if(_.isNumber($p0)){return (isNaN($p0))?null:$p0;}var $1=parseInt($p0.toString(),10);return (isNaN($1))?null:$1;case 'real':if(_.isNumber($p0)){return (isNaN($p0))?null:$p0;}var $2=parseFloat($p0.toString());return (isNaN($2))?null:$2;case 'cstring':case 'tuple':case 'unknown':default:return $p0.toString();}}
tab.ApiEventHandler.prototype={$1:null,$2:null,$3:null,$4:false,$5:null,$6:null,setClient:function(obj){if(ss.isValue(this.$1)){if(tsConfig.allow_custom_views&&ss.isValue(this.$1.get_customViewsViewModel())){this.$1.get_customViewsViewModel().remove_dirtyChanged(ss.Delegate.create(this,this.onCustomViewUpdated));this.$1.get_customViewsViewModel().remove_customViewListChanged(ss.Delegate.create(this,this.onCustomViewListLoaded));this.$1.get_customViewsViewModel().remove_customViewDestroyed(ss.Delegate.create(this,this.onCustomViewDestroyed));this.$1.get_customViewsViewModel().remove_defaultCustomViewChanged(ss.Delegate.create(this,this.onCustomViewSetDefault));}}this.$1=obj;window.setTimeout(ss.Delegate.create(this,function(){
if(ss.isValue(this.$6)){var $enum1=ss.IEnumerator.getEnumerator(this.$6);while($enum1.moveNext()){var $1_1=$enum1.current;if(ss.isValue($1_1)){dojo.unsubscribe($1_1);}}}this.$6=new Array(this.$1.get_viewControllers().length);var $1_0=0;var $enum2=ss.IEnumerator.getEnumerator(this.$1.get_viewControllers());while($enum2.moveNext()){var $1_2=$enum2.current;this.$6[$1_0]=$1_2.get_viewSession().registerEventListener('selectionChanged',ss.Delegate.create(this,this.onSelectionChanged));$1_0++;}}),0);if(tsConfig.allow_custom_views&&ss.isValue(this.$1.get_customViewsViewModel())){this.$1.get_customViewsViewModel().add_dirtyChanged(ss.Delegate.create(this,this.onCustomViewUpdated));this.$1.get_customViewsViewModel().add_customViewListChanged(ss.Delegate.create(this,this.onCustomViewListLoaded));this.$1.get_customViewsViewModel().add_customViewDestroyed(ss.Delegate.create(this,this.onCustomViewDestroyed));this.$1.get_customViewsViewModel().add_defaultCustomViewChanged(ss.Delegate.create(this,this.onCustomViewSetDefault));}this.$4=false;var $0=tab.ApplicationModel.get_instance().get_workbook();if(ss.isValue($0)){$0.addNewDashboardHandler(ss.Delegate.create(this,this.onNewDashboard));}},handleEvent:function(e){var $0=e.data;if(ss.isNullOrUndefined($0)){return;}var $1=tab._ApiCommand.$B($0);if(ss.isNullOrUndefined($1.get_$A())){return;}if($1.get_$5()==='api.GetActiveSheetCommand'){this.$2D($1);}else if($1.get_$5()==='api.GetPublishedSheetsCommand'){this.$2E($1);}else if($1.get_$5()==='api.GetClientInfoCommand'){this.$2C($1);}else if($1.get_$5()==='api.ClearFilterCommand'){this.$16($1);}else if($1.get_$5()==='api.ApplyCategoricalFilterCommand'){this.$17($1);}else if($1.get_$5()==='api.ApplyRangeFilterCommand'){this.$F($1);}else if($1.get_$5()==='api.ApplyRelativeDateFilterCommand'){this.$10($1);}else if($1.get_$5()==='api.ApplyHierarchicalFilterCommand'){this.$E($1);}else if($1.get_$5()==='api.RefreshDataCommand'){this.$27($1);}else if($1.get_$5()==='api.RevertAllCommand'){this.$28($1);}else if($1.get_$5()==='api.SwitchActiveSheetCommand'){this.$2A($1);}else if($1.get_$5()==='api.UpdateActiveSheetCommand'){this.$2B($1);}else if($1.get_$5()==='api.SelectMarksCommand'){this.$1B($1);}else if($1.get_$5()==='api.FetchSelectedMarksCommand'){this.$C($1);}else if($1.get_$5()==='api.FetchParametersCommand'){this.$8($1);}else if($1.get_$5()==='api.SetParameterValueCommand'){this.$9($1);}else if($1.get_$5()==='api.InvokeCommandCommand'){this.$24($1);}else if($1.get_$5()==='api.SetSheetSizeCommand'){this.$26($1);}else if($1.get_$5()==='api.ShowHideToolbarCommand'){this.$29($1);}else if($1.get_$5()==='api.GetFiltersListCommand'){this.$A($1);}else if($1.get_$5()==='api.GetOneFilterInfoCommand'){this.$B($1);}else if($1.get_$5()==='api.GetDataSourcesCommand'){this.$23($1);}else if($1.get_$5()==='api.FetchCustomViewsCommand'){this.$1D($1);}else if($1.get_$5()==='api.ShowCustomViewCommand'){this.$1E($1);}else if($1.get_$5()==='api.UpdateCustomViewCommand'){this.$20($1);}else if($1.get_$5()==='api.MakeCurrentCustomViewDefaultCommand'){this.$21($1);}else if($1.get_$5()==='api.RemoveCustomViewCommand'){this.$1F($1);}else if($1.get_$5()==='api.SaveNewCustomViewCommand'){this.$22($1);}},handleTabChanged:function(info){var $0=info.oldSheetName;var $1=info.sheetName;this.$38('api.TabSwitchEvent',$0,$1);},onSelectionChanged:function(oSelectionInfo){if(ss.isNullOrUndefined(oSelectionInfo)||ss.isNullOrUndefined(oSelectionInfo.primarySheet)){return;}if(ss.isNullOrUndefined(oSelectionInfo.cmdResult)||ss.isNullOrUndefined(oSelectionInfo.cmdResult.commandName)){return;}var $0=(oSelectionInfo.cmdResult.commandName).split(':');if($0[0]==='tabdoc'){var $1=$0[1];if($0[1].startsWith('select')){this.$38('api.MarksSelectionChangedEvent',oSelectionInfo.primarySheet,null);}else if($1==='reset-filter'||$1==='clear-existing-filter'||$1==='range-filter'||$1==='categorical-filter'||$1==='categorical-filter-by-index'||$1==='hierarchical-filter'||$1==='relative-date-filter'){var $2=oSelectionInfo.cmdResult.commandReturn;var $3=$2['fn'];if(ss.isNullOrUndefined($2['invalidValues'])&&ss.isNullOrUndefined($2['invalidFieldCaption'])&&ss.isValue($3)){var $4=null;var $5=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),oSelectionInfo.primarySheet);if(ss.isValue($5)){var $7=_.find($5.get_filters(),function($p1_0){
return $p1_0.get_globalFieldName()===$3;});if(ss.isValue($7)){$4=$7.get_filterPresModel().fieldCaption;}}var $6=[$3,$4||$3];this.$38('api.FilterChangedEvent',oSelectionInfo.primarySheet,tab.JsonUtil.toJson($6));}}}else if($0[0]==='tabsrv'&&$0[1].startsWith('select')){this.$38('api.MarksSelectionChangedEvent',oSelectionInfo.primarySheet,null);}},onLayoutUpdated:function(info){this.$38('api.VizInteractiveEvent',null,null);},onNewDashboard:function(dm){dm=tab.ModelUtils.findContentDashboard();this.$0.dispose();var $0=dm.get_zoneModels();$0.forEach(ss.Delegate.create(this,function($p1_0){
if($p1_0.get_zoneType()==='paramctrl'){var $1_0=$p1_0.get_model();$1_0.add_newParameterCtrl(ss.Delegate.create(this,this.onParameterChange));this.$0.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
$1_0.remove_newParameterCtrl(ss.Delegate.create(this,this.onParameterChange));})));}}));},onParameterChange:function(info){var $0=(info.legacyPresModel).title;this.$38('api.ParameterChangedEvent',null,$0);},onCustomViewDestroyed:function(sender,e){this.$38('api.CustomViewRemovedEvent',null,tab.JsonUtil.toJson(this.$1C(),false,''));this.$4=true;},onCustomViewUpdated:function(sender,e){this.$38('api.CustomViewUpdatedEvent',null,tab.JsonUtil.toJson(this.$1C(),false,''));this.$4=true;},onCustomViewSetDefault:function(sender,e){this.$38('api.CustomViewSetDefaultEvent',null,tab.JsonUtil.toJson(this.$1C(),false,''));this.$4=true;},onCustomViewListLoaded:function(sender,e){this.$38('api.CustomViewsListLoadedEvent',null,tab.JsonUtil.toJson(this.$1C(),false,''));this.$4=true;},$8:function($p0){var $0={};$0.commandName='get-parameter-models';$0.commandNamespace='tabdoc';this.$39($p0,$0,'api.FetchParametersCommand',tab.vqlui$9.$0);},$9:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1={};$1.commandName='set-parameter-value';$1.commandNamespace='tabdoc';$1.commandParams={};$1.commandParams['fieldCaption']=$0['api.setParameterName'];$1.commandParams['valueString']=$0['api.setParameterValue'];this.$39($p0,$1,'api.SetParameterValueCommand',tab.vqlui$9.$1);},$A:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1={};$1.commandName='get-filter-info';$1.commandNamespace='tabsrv';$1.commandParams={};$1.commandParams['worksheet']=$0['api.worksheetName'];if(ss.isValue($0['api.dashboardName'])){$1.commandParams['dashboard']=$0['api.dashboardName'];}$1.commandParams['ignoreDomain']=$0['api.ignoreDomain'].toString();this.$39($p0,$1,'api.GetFiltersListCommand',tab.vqlui$5.$0);},$B:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1={};$1.commandName='get-filter-info';$1.commandNamespace='tabsrv';$1.commandParams={};$1.commandParams['worksheet']=$0['api.worksheetName'];if(ss.isValue($0['api.dashboardName'])){$1.commandParams['dashboard']=$0['api.dashboardName'];}if(ss.isValue($0['api.fieldCaption'])){$1.commandParams['fieldCaption']=$0['api.fieldCaption'];}else{$1.commandParams['fn']=$0['api.fieldName'];}if(ss.isValue($0['api.filterHierarchicalLevels'])){$1.commandParams['filterLevel']=$0['api.filterHierarchicalLevels'];}$1.commandParams['ignoreDomain']=$0['api.ignoreDomain'].toString();this.$39($p0,$1,'api.GetOneFilterInfoCommand',tab.vqlui$5.$1);},$C:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1={};$1.commandName='get-selection';$1.commandNamespace='tabdoc';$1.commandParams={};$1.commandParams['worksheet']=$0['api.worksheetName'];if(ss.isValue($0['api.dashboardName'])){$1.commandParams['dashboard']=$0['api.dashboardName'];}this.$39($p0,$1,'api.FetchSelectedMarksCommand',ss.Delegate.create(this,this.$D));},$D:function($p0){var $0=$p0.dataDictionary;var $1=$p0.vizData;var $2={};var $3=[];$2.marks=$3;if(ss.isNullOrUndefined($0)||tab.MiscUtil.isNullOrEmpty($0.dataColumns)||ss.isNullOrUndefined($1)||tab.MiscUtil.isNullOrEmpty($1.vizColumns)){return $2;}var $4=tab.VizDataModel.getTupleIdColumn($1);var $5=tab.VizDataModel.getFieldCaptions($1);var $enum1=ss.IEnumerator.getEnumerator($4.tupleIds);while($enum1.moveNext()){var $6=$enum1.current;var $7={};$7.tupleId=$6;var $8=[];$7.pairs=$8;$3.push($7);var $enum2=ss.IEnumerator.getEnumerator($5);while($enum2.moveNext()){var $9=$enum2.current;var $A=new tab.VizDataField($0,$1,$9);var $B={};var $C=$A.getTupleIndex($6);$B.fieldName=$A.get_fieldCaption();$B.formattedValue=$A.getAliasValueAtTupleIndex($C);$B.valueDataType=$A.get_dataType();var $D=$A.getAliasIndexFromTupleIndex($C);var $E=null;if(!$A.isSpecialAliasValue($D)&&$A.hasDataValueAtTupleId($6)){$E=$A.getDataValueAtTupleIndex($C);}var $F=tab.ApiEventHandler.$7($E,$A.get_dataType());$B.value=$F;$8.push($B);}}return $2;},$E:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1={};$1.commandName='hierarchical-filter';$1.commandNamespace='tabdoc';$1.commandParams={};$1.commandParams['worksheet']=$0['api.worksheetName'];if(ss.isValue($0['api.dashboardName'])){$1.commandParams['dashboard']=$0['api.dashboardName'];}$1.commandParams['qualifiedFieldCaption']=$0['api.fieldCaption'];if(ss.isValue($0['api.filterReset'])&&$0['api.filterReset']){$1.commandParams['filterUpdateType']='filter-clear';}else{if(ss.isValue($0['api.exclude'])){$1.commandParams['exclude']=$0['api.exclude'];}var $2=this.$11($0['api.filterUpdateType'].toString());$1.commandParams['filterUpdateType']=$2;if(ss.isValue($0['api.filterHierarchicalValues'])){$1.commandParams['filterValues']=$0['api.filterHierarchicalValues'];}if(ss.isValue($0['api.filterHierarchicalLevels'])){$1.commandParams['filterLevels']=$0['api.filterHierarchicalLevels'];}if(ss.isNullOrUndefined($0['api.filterHierarchicalValues'])&&ss.isNullOrUndefined($0['api.filterHierarchicalLevels'])){$1.commandParams['filterLevels']='[]';}}this.$39($p0,$1,'api.ApplyHierarchicalFilterCommand');},$F:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1={};$1.commandName='range-filter';$1.commandNamespace='tabdoc';$1.commandParams={};$1.commandParams['worksheet']=$0['api.worksheetName'];if(ss.isValue($0['api.dashboardName'])){$1.commandParams['dashboard']=$0['api.dashboardName'];}$1.commandParams['qualifiedFieldCaption']=$0['api.fieldCaption'];if(ss.isValue($0['api.filterReset'])&&$0['api.filterReset']){$1.commandParams['filterUpdateType']='filter-clear';}else{if(ss.isValue($0['api.filterRangeMax'])){$1.commandParams['rangeMax']=$0['api.filterRangeMax'];}if(ss.isValue($0['api.filterRangeMin'])){$1.commandParams['rangeMin']=$0['api.filterRangeMin'];}if(ss.isValue($0['api.filterRangeNullOption'])){if($0['api.filterRangeNullOption']==='NULL_VALUES'){$1.commandParams['included']='include-null';}else if($0['api.filterRangeNullOption']==='NON_NULL_VALUES'){$1.commandParams['included']='include-non-null';}else{$1.commandParams['included']='include-all';}}}this.$39($p0,$1,'api.ApplyRangeFilterCommand');},$10:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1={};$1.commandName='relative-date-filter';$1.commandNamespace='tabdoc';$1.commandParams={};$1.commandParams['worksheet']=$0['api.worksheetName'];if(ss.isValue($0['api.dashboardName'])){$1.commandParams['dashboard']=$0['api.dashboardName'];}$1.commandParams['qualifiedFieldCaption']=$0['api.fieldCaption'];if(ss.isValue($0['api.filterReset'])&&$0['api.filterReset']){$1.commandParams['filterUpdateType']='filter-clear';}else{if(ss.isValue($0['api.filterDateArchorValue'])){$1.commandParams['anchorDate']=$0['api.filterDateArchorValue'];}$1.commandParams['datePeriodType']=($0['api.filterPeriodType']).toLowerCase();$1.commandParams['dateRangeType']=($0['api.filterDateRangeType']).toLowerCase();if(ss.isValue($0['api.filterDateRange'])){$1.commandParams['rangeN']=$0['api.filterDateRange'];}}this.$39($p0,$1,'api.ApplyRelativeDateFilterCommand');},$11:function($p0){if($p0.toLowerCase()==='replace'){return 'filter-replace';}else if($p0.toLowerCase()==='all'){return 'filter-all';}else if($p0.toLowerCase()==='add'){return 'filter-add';}else if($p0.toLowerCase()==='remove'){return 'filter-remove';}else{return 'filter-replace';}},$12:function($p0){if($p0.toLowerCase()==='replace'){return 'select-replace';}else if($p0.toLowerCase()==='add'){return 'select-add';}else if($p0.toLowerCase()==='remove'){return 'select-remove';}return 'select-replace';},$13:function($p0){if($p0.toLowerCase()==='nullvalues'){return 'include-null';}else if($p0.toLowerCase()==='nonnullvalues'){return 'include-non-null';}else if($p0.toLowerCase()==='allvalues'){return 'include-all';}return 'include-all';},$14:function($p0){var $0=new ss.StringBuilder();var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.current;if(!$0.isEmpty){$0.append('.');}$0.append('['+$1+']');}return $0.toString();},$15:function(){var $0={};var $1=tab.ModelUtils.findContentDashboard();var $enum1=ss.IEnumerator.getEnumerator($1.get_zoneModels());while($enum1.moveNext()){var $3=$enum1.current;var $4=tab.JsonUtil.parseJson($3.get_zonePresModel().frameJson);if($3.get_zoneType()==='filter'&&$3.get_worksheetName()===tsConfig.current_sheet_name){$0[$4.param]=true;}}this.$5={};var $2=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name);if(ss.isValue($2)){var $5=$2.get_filters();var $enum2=ss.IEnumerator.getEnumerator($5);while($enum2.moveNext()){var $6=$enum2.current;var $7=this.$14($6.get_filterPresModel().name);if(Object.keyExists($0,$7)){var $8=$6.get_filterPresModel().fieldCaption;if($6.get_filterPresModel().type!=='H'){this.$5[$8]=$6.get_filterPresModel().type;}else{$8='';var $9=$6.get_filterPresModel().table[0].table;if(ss.isValue($9)&&ss.isValue($9.schema)&&ss.isValue($9.schema[0])&&ss.isValue($9.schema[0].name)){var $A=$9.schema[0].name;for(var $B=1;$B<$A.length;$B++){$8+='['+$A[$B]+']';this.$5[$8]=$6.get_filterPresModel().type;$8+='.';}}}}}}},$16:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1=Object.keyExists(this.$5,$0['api.fieldCaption']);var $2={};if($1){if(this.$5[$0['api.fieldCaption']]==='RD'){var $3=new tab.vqlui$6('api.localfailed','Clearing a relative date filter is not supported when an associated quick filter is on the Worksheet. Please call applyRelativeDateFilter instead.');this.$3A($p0,$3.get_$1(),'api.ClearFilterCommand');return;}$2.commandName='reset-filter';}else{$2.commandName='clear-existing-filter';}$2.commandNamespace='tabdoc';$2.commandParams={};$2.commandParams['worksheet']=$0['api.worksheetName'];if(ss.isValue($0['api.dashboardName'])){$2.commandParams['dashboard']=$0['api.dashboardName'];}$2.commandParams['qualifiedFieldCaption']=$0['api.fieldCaption'];this.$39($p0,$2,'api.ClearFilterCommand');},$17:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1={};$1.commandName='categorical-filter';$1.commandNamespace='tabdoc';$1.commandParams={};$1.commandParams['worksheet']=$0['api.worksheetName'];if(ss.isValue($0['api.dashboardName'])){$1.commandParams['dashboard']=$0['api.dashboardName'];}$1.commandParams['qualifiedFieldCaption']=$0['api.fieldCaption'];if(ss.isValue($0['api.filterReset'])&&$0['api.filterReset']){$1.commandParams['filterUpdateType']='filter-clear';}else{if(ss.isValue($0['api.exclude'])){$1.commandParams['exclude']=$0['api.exclude'];}var $2=this.$11($0['api.filterUpdateType'].toString());$1.commandParams['filterUpdateType']=$2;if(ss.isValue($0['api.filterCategoricalValues'])){$1.commandParams['filterValues']=$0['api.filterCategoricalValues'];}else{$1.commandParams['filterValues']='[""]';}}this.$39($p0,$1,'api.ApplyCategoricalFilterCommand');},$18:function($p0,$p1){var $0=[];$0.add('[');for(var $1=0;$1<$p0.length;$1++){if($1>0){$0.add(',');}$0.add('{');$0.add('"'+'qualifiedFieldCaption'+'":');$0.add('"'+$p0[$1]+'"');$0.add(',');$0.add('"'+'selectValues'+'":');$0.add($p1[$1]);$0.add('}');}$0.add(']');return $0;},$19:function($p0){var $0=[];$0.add('{');$0.add('"'+'selectionType'+'":');$0.add('"tuples"');$0.add(',');$0.add('"'+'objectIds'+'":');$0.add($p0);$0.add('}');return $0.join('');},$1A:function($p0,$p1){var $0=[];$0.add('[');for(var $1=0;$1<$p0.length;$1++){if($1>0){$0.add(',');}$0.add('{');$0.add('"'+'qualifiedFieldCaption'+'":');$0.add('"'+$p0[$1]+'"');$0.add(',');var $2=tab.JsonUtil.parseJson($p1[$1]);var $3=tab.JsonUtil.parseJson($2[0]);if(ss.isValue($3.max)){$0.add('"'+'maxValue'+'":');$0.add('"'+$3.max.toString()+'"');}if(ss.isValue($3.min)){if(ss.isValue($3.max)){$0.add(',');}$0.add('"'+'minValue'+'":');$0.add('"'+$3.min.toString()+'"');}if(ss.isValue($3.nullOption)){var $4=this.$13($3.nullOption.toString());$0.add(',');$0.add('"'+'included'+'":');$0.add('"'+$4+'"');}$0.add('}');}$0.add(']');return $0;},$1B:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1={};$1.commandName='select-by-value';$1.commandNamespace='tabdoc';$1.commandParams={};$1.commandParams['worksheet']=$0['api.worksheetName'];if(ss.isValue($0['api.dashboardName'])){$1.commandParams['dashboard']=$0['api.dashboardName'];}if(tab.MiscUtil.isNullOrEmpty($0)){$1.commandParams['selectionUpdateType']='select-replace';}else{$1.commandParams['selectionUpdateType']=this.$12($0['api.filterUpdateType'].toString());if(ss.isValue($0['api.categoricalFieldCaption'])&&ss.isValue($0['api.categoricalMarkValues'])){var $2=tab.JsonUtil.parseJson($0['api.categoricalFieldCaption']);var $3=tab.JsonUtil.parseJson($0['api.categoricalMarkValues']);var $4=this.$18($2,$3);$1.commandParams['dimensionValueSelectionModels']=$4.join('');}if(ss.isValue($0['api.hierarchicalFieldCaption'])&&ss.isValue($0['api.hierarchicalMarkValues'])){var $5=tab.JsonUtil.parseJson($0['api.hierarchicalFieldCaption']);var $6=tab.JsonUtil.parseJson($0['api.hierarchicalMarkValues']);var $7=this.$18($5,$6);$1.commandParams['hierarchicalValueSelectionModels']=$7.join('');}if(ss.isValue($0['api.rangeFieldCaption'])&&ss.isValue($0['api.rangeMarkValues'])){var $8=tab.JsonUtil.parseJson($0['api.rangeFieldCaption']);var $9=tab.JsonUtil.parseJson($0['api.rangeMarkValues']);var $A=this.$1A($8,$9);$1.commandParams['quantativeRangeSelectionModels']=$A.join('');}if(ss.isValue($0['api.tupleIds'])){var $B=[];$B.add('{');$B.add('"'+'selectionType'+'":');$B.add('"tuples"');$B.add(',');$B.add('"'+'objectIds'+'":');$B.add($0['api.tupleIds']);$B.add('}');$1.commandParams['selection']=$B.join('');}}this.$39($p0,$1,'api.SelectMarksCommand');},$1C:function(){var $0={};$0['customViewLoaded']=this.$4;$0['currentView']=this.$1.get_customViewsViewModel().get_currentCustomView();$0['defaultId']=this.$1.get_customViewsViewModel().get_defaultCustomViewId();var $1=[];$0['list']=$1;var $2=this.$1.get_customViewsViewModel().get_myCustomViews();var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $4=$enum1.current;$4._sessionUrl=this.$1.get_customViewsViewModel().buildUrl($4);$1.add($4);}var $3=this.$1.get_customViewsViewModel().get_otherCustomViews();var $enum2=ss.IEnumerator.getEnumerator($3);while($enum2.moveNext()){var $5=$enum2.current;$5._sessionUrl=this.$1.get_customViewsViewModel().buildUrl($5);$1.add($5);}return $0;},$1D:function($p0){this.$1.get_customViewsViewModel().updateCustomizedViews(ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=new tab.vqlui$6('api.success',this.$1C());this.$3A($p0,$1_0.get_$1());}),ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$6('api.remotefailed',$p1_0);this.$3A($p0,$1_0.get_$1(),'api.FetchCustomViewsCommand');}));},$1E:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1=null;if(ss.isValue($0['api.customViewParam'])){$1=$0['api.customViewParam'];}this.$1.get_customViewsViewModel().select($1);},$1F:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1=$0['api.customViewParam'];this.$1.get_customViewsViewModel().destroy($1,ss.Delegate.create(this,function(){
var $1_0=new tab.vqlui$6('api.success',this.$1C());this.$3A($p0,$1_0.get_$1());}),ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$6('api.remotefailed',$p1_0);this.$3A($p0,$1_0.get_$1(),'api.RemoveCustomViewCommand');}));},$20:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1=$0['api.customViewParam'];var $2=new tab.CustomizedView();$2.id=$1.id;$2.isPublic=$1.isPublic;$2.name=$1.name;$2.owner=$1.owner;$2.startViewId=$1.startViewId;$2.urlId=$1.urlId;this.$1.get_customViewsViewModel().update($2,ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$6('api.success',this.$1C());this.$3A($p0,$1_0.get_$1());}),ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$6('api.remotefailed',$p1_0);this.$3A($p0,$1_0.get_$1(),'api.UpdateCustomViewCommand');}));},$21:function($p0){this.$1.get_customViewsViewModel().makeCurrentDefault(ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$6('api.success',this.$1C());this.$3A($p0,$1_0.get_$1());}),ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$6('api.remotefailed',$p1_0);this.$3A($p0,$1_0.get_$1(),'api.MakeCurrentCustomViewDefaultCommand');}));},$22:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1=$0['api.customViewName'];this.$1.get_customViewsViewModel().save($1,ss.Delegate.create(this,function($p1_0){
var $1_0=this.$1C();$1_0['newView']=$p1_0;var $1_1=new tab.vqlui$6('api.success',$1_0);this.$3A($p0,$1_1.get_$1());}),ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$6('api.remotefailed',$p1_0);this.$3A($p0,$1_0.get_$1(),'api.SaveNewCustomViewCommand');}));},$23:function($p0){var $0={};$0.commandName='get-schema';$0.commandNamespace='tabdoc';$0.commandParams={};this.$39($p0,$0,'api.GetDataSourcesCommand');},$24:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1=$0['api.invokeCommandName'];if($1==='showExportImageDialog'){this.$1.get_toolbarCommands().exportImage();}else if($1==='showExportDataDialog'){var $2=null;if(ss.isValue('api.invokeCommandParam')){$2=$0['api.invokeCommandParam'];}this.$1.get_toolbarCommands().exportData($2);}else if($1==='showExportCrosstabDialog'){var $3=null;if(ss.isValue('api.invokeCommandParam')){$3=$0['api.invokeCommandParam'];}this.$1.get_toolbarCommands().exportCrosstab($3);}else if($1==='showExportPDFDialog'){this.$1.get_toolbarCommands().exportPdf();}else if($1==='pauseAutomaticUpdates'){this.$1.get_toolbarCommands().$5();this.$25($p0);}else if($1==='resumeAutomaticUpdates'){this.$1.get_toolbarCommands().$6();this.$25($p0);}else if($1==='toggleAutomaticUpdates'){this.$1.get_toolbarCommands().$8();this.$25($p0);}else if($1==='showShareDialog'){this.$1.get_toolbarCommands().$E();}else if($1==='showDownloadWorkbookDialog'){var $4=this.$1.get_applicationPresModel().workbookPresModel.dashboardPresModel;this.$1.get_toolbarCommands().$B($4.sheetLayoutInfo.downloadLink);}else if($1==='selectedMarksKeepOnly'){this.$1.get_toolbarCommands().$F();}else if($1==='selectedMarksExclude'){this.$1.get_toolbarCommands().$10();}},$25:function($p0){var $0=new tab.vqlui$6('api.success',{isAutoUpdate:this.$1.get_toolbarCommands().$7()});this.$3A($p0,$0.get_$1(),'api.InvokeCommandCommand');},$26:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1={};$1.commandName='set-sheet-size';$1.commandNamespace='tabdoc';$1.commandParams={};$1.commandParams['sheet']=$0['api.setSheetSizeName'];$1.commandParams['minWidth']=$0['api.minWidth'];$1.commandParams['minHeight']=$0['api.minHeight'];$1.commandParams['maxWidth']=$0['api.maxWidth'];$1.commandParams['maxHeight']=$0['api.maxHeight'];this.$39($p0,$1,'api.SetSheetSizeCommand');},$27:function($p0){this.$1.get_toolbarCommands().$C();var $0=new tab.vqlui$6('api.success','');this.$3A($p0,$0.get_$1(),'api.RefreshDataCommand');},$28:function($p0){tab.WorksheetServerCommands.revert();var $0=new tab.vqlui$6('api.success','');this.$3A($p0,$0.get_$1(),'api.RevertAllCommand');},$29:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1=$0['api.showHideToolbarValue'];this.$1.set_toolbarDisplayed($1);this.$1.doResize();},$2A:function($p0){var $0=tab.JsonUtil.parseJson($p0.get_$8());var $1={};$1.oldRepositoryUrl=$0['api.oldRepositoryUrl'];$1.repositoryUrl=$0['api.switchToRepositoryUrl'];$1.sheetName=$0['api.switchToSheetName'];$1.oldSheetName=tsConfig.current_sheet_name;$1.noUndo=true;$1.successCallback=ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$6('api.success','');this.$3A($p0,$1_0.get_$1(),'api.SwitchActiveSheetCommand');});$1.errorCallback=ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$6('api.remotefailed',$p1_0);this.$3A($p0,$1_0.get_$1(),'api.SwitchActiveSheetCommand');});dojo.publish('onTabSelect',[$1]);},$2B:function($p0){this.$1.doResize();},$2C:function($p0){var $0=new tab.vqlui$6('api.success',this.$31());this.$3A($p0,$0.get_$1(),'api.GetClientInfoCommand');},$2D:function($p0){this.$3A($p0,this.$2F(tsConfig.current_sheet_name),'api.GetActiveSheetCommand');},$2E:function($p0){this.$3A($p0,tab.JsonUtil.toJson(tsConfig.visible_sheets,false,''),'api.GetPublishedSheetsCommand');},$2F:function($p0){this.$2={};var $0=0;for($0=0;$0<tsConfig.visible_sheets.length;$0++){this.$2[tsConfig.visible_sheets[$0]]=$0;}var $1={name:$p0,index:this.$2[$p0],isActive:true,isHidden:false,isDashboard:this.$1.get_isDashboard(),vizSize:this.$1.get_vizSize(),filters:this.$1.get_vFilterList(),sheets:this.$1.currentSheets};$1['views']=this.$35();return tab.JsonUtil.toJson($1,false,'');},$30:function($p0){var $0=$p0;var $1=(tsConfig.single_frame)?window.location:window.parent.location;var $2=new RegExp('((http://)|(https://))([^/]+)(.*)');var $3=$p0.match($2);if(ss.isValue($3)){$0=$1.protocol+'//'+$1.host+$3[5];}return $0;},$31:function(){this.$15();this.$2={};var $0=0;for($0=0;$0<tsConfig.visible_sheets.length;$0++){this.$2[tsConfig.visible_sheets[$0]]=$0;}this.$33();var $1=false;if(ss.isValue(this.$3)){var $5=this.$3[tsConfig.current_sheet_name];if(ss.isValue($5)){$1=$5['isDashboard'];}}var $2=this.$1.get_applicationPresModel().workbookPresModel.dashboardPresModel;var $3=$2.sheetLayoutInfo.downloadLink;var $4={isAutoUpdate:this.$1.get_toolbarCommands().$7(),isDownloadAllowed:this.$1.get_toolbarCommands().$9(),clientUrl:this.$30(this.$1.get_requestURI()),isDashboard:$1,vizSize:{w:$2.viewportSize.x,h:$2.viewportSize.y},tabsAllowed:tsConfig.tabs_allowed,visibleSheets:tsConfig.visible_sheets,repositoryUrls:this.$32(),currentSheetName:tsConfig.current_sheet_name,modifiedSheets:$2.modifiedSheets};$4['views']=this.$35();if(ss.isValue(tsConfig.repository_urls)){$4['workbookName']=tsConfig.current_workbook_name;}$4['frames']=this.$36();$4['baseSheets']=this.$34();return $4;},$32:function(){var $0=(tab.DomUtil.isEmbeddedCrossDomain())?window.location.href:window.parent.location.href;var $1=$0.indexOf('/views/');$0=$0.substr(0,$1)+'/views/';var $2=[];var $enum1=ss.IEnumerator.getEnumerator(tsConfig.repository_urls);while($enum1.moveNext()){var $3=$enum1.current;$2.add($0+$3);}return $2;},$33:function(){this.$3=null;if(ss.isValue(this.$1.get_applicationPresModel())&&ss.isValue(this.$1.get_applicationPresModel().workbookPresModel)&&ss.isValue(this.$1.get_applicationPresModel().workbookPresModel.sheetsInfo)){this.$3={};var $enum1=ss.IEnumerator.getEnumerator(this.$1.get_applicationPresModel().workbookPresModel.sheetsInfo);while($enum1.moveNext()){var $0=$enum1.current;var $1={name:$0.sheet,isDashboard:$0.isDashboard,maxHeight:$0.maxHeight,maxWidth:$0.maxWidth,minHeight:$0.minHeight,minWidth:$0.minWidth};if(ss.isValue($0.namesOfSubsheets)){$1['nameOfSubsheets']=$0.namesOfSubsheets;}this.$3[$0.sheet]=$1;}}},$34:function(){var $0=null;if(ss.isValue(this.$3)){$0=[];for(var $1=0;$1<tsConfig.visible_sheets.length;$1++){var $2=this.$3[tsConfig.visible_sheets[$1]];$0.add($2);}}return $0;},$35:function(){var $0=[];var $1=this.$1.get_applicationPresModel().workbookPresModel.dashboardPresModel.zones;var $dict1=$1;for(var $key2 in $dict1){var $2={key:$key2,value:$dict1[$key2]};var $3=$2.value;if($3.zoneType==='viz'){var $4=$3.presModelHolder;if(ss.isValue($4.viewJson)){var $5=$4.worksheet;var $6=tab.JsonUtil.parseJson($4.viewJson);$0.add(this.$37($5,$6));}}}return $0;},$36:function(){var $0=[];var $1=this.$1.get_applicationPresModel().workbookPresModel.dashboardPresModel.zones;var $2=tab.JsonUtil.parseJson(tab.JsonUtil.toJson(Object.keys($1)));$2.sort(function($p1_0,$p1_1){
return parseInt($p1_0)-parseInt($p1_1);});var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $3=$enum1.current;var $4=$1[$3];if(ss.isValue($4.frameJson)){var $5=tab.JsonUtil.parseJson($4.frameJson);$0.add($5);}}return $0;},$37:function($p0,$p1){if(!ss.isValue(this.$2[$p0])){this.$2[$p0]=Object.getKeyCount(this.$2);}var $0={name:$p0,index:this.$2[$p0],isActive:false,isHidden:false,isDashboard:false,isMap:$p1.isMap,isModified:$p1.isModified,pages:$p1.pages,portSize:$p1.portsize};var $1=$p1.sheet;$0['filters']=$1['filters'];return $0;},$38:function($p0,$p1,$p2){var $0=new tab.vqlui$7(tsConfig.current_workbook_name,($p1||''),($p2||''));var $1=new tab._ApiCommand($p0,'xdomainSourceId',tsConfig.apiID,$0.get_$1());this.$3A($1);},$39:function($p0,$p1,$p2,$p3){$p1.noExceptionDialog=true;tab.ApiClientCommands.doApiCommand($p1,ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;if(ss.isValue($p3)){$1_0=$p3($p1_0);}var $1_1=new tab.vqlui$6('api.success',$1_0);this.$3A($p0,$1_1.get_$1(),$p2);}),ss.Delegate.create(this,function($p1_0){
var $1_0=new tab.vqlui$6('api.remotefailed',$p1_0);this.$3A($p0,$1_0.get_$1(),$p2);}));},$3A:function($p0,$p1,$p2){if(tab.BrowserSupport.get_postMessage()){$p2=($p2||$p0.get_$5());$p1=($p1||$p0.get_$8());var $0=new tab._ApiCommand($p2,$p0.get_$7(),$p0.get_$6(),$p1);var $1=$0.$C();window.parent.postMessage($1,'*');}}}
tab.vqlui$6=function(result,pm){var $0={};$0['api.commandResult']=result;$0['api.commandData']=pm;this.$0=tab.JsonUtil.toJson($0,false,'');}
tab.vqlui$6.prototype={$0:null,get_$1:function(){return this.$0;}}
tab.vqlui$7=function(workbookName,worksheetName,pm){var $0={};$0['api.workbookName']=workbookName;$0['api.worksheetName']=worksheetName;$0['api.commandData']=pm;this.$0=tab.JsonUtil.toJson($0,false,'');}
tab.vqlui$7.prototype={$0:null,get_$1:function(){return this.$0;}}
tab.vqlui$5=function(){}
tab.vqlui$5.$0=function($p0){var $0=JSON.parse($p0.toString());var $1=[];if(ss.isValue($0)){var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $3=$enum1.current;var $4=tab.vqlui$5.$2($3);if($4!=null){$1.add($4);}}}var $2={};$2.filters=$1;return $2;}
tab.vqlui$5.$1=function($p0){var $0=$p0;if(Object.keyExists($0,'parameterError')){return $p0;}var $1=JSON.parse($p0.toString());if(ss.isValue($1)){return tab.vqlui$5.$2($1);}return null;}
tab.vqlui$5.$2=function($p0){var $0={};tab.vqlui$5.$3($p0,$0);switch($p0.type){case 'C':tab.vqlui$5.$4($p0,$0);break;case 'RD':tab.vqlui$5.$6($p0,$0);break;case 'H':tab.vqlui$5.$A($p0,$0);break;case 'Q':tab.vqlui$5.$5($p0,$0);break;}return $0;}
tab.vqlui$5.$3=function($p0,$p1){$p1.fieldName=$p0.fieldName;$p1.caption=$p0.fieldCaption;$p1.type=$p0.type;if(ss.isValue($p0.fieldDetailsJson)&&ss.isValue($p0.fieldDatasource)){$p1.datasourceName=$p0.fieldDatasource;var $0=JSON.parse($p0.fieldDetailsJson);var $1=$0['FieldColumnPresModel'];$p1.fieldRoleType=$1.fieldRole;$p1.fieldAggrType=$1.aggregation;}}
tab.vqlui$5.$4=function($p0,$p1){if(ss.isValue($p0.exclude)){$p1.isExclude=$p0.exclude;}var $0=($p0.all||false)||($p0.allChecked||false);if(ss.isValue($p0.table)){var $1=$p0.table;if(ss.isValue($1.tuples)){var $2=$1.tuples;var $3=[];var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $4=$enum1.current;if($0||(ss.isValue($4.s)&&$4.s)){var $5=$4.t[0];var $6=$4.d;$3.add(tab.vqlui$5.$7($p0,$5,$6));}}$p1.catAppliedValues=$3;}}}
tab.vqlui$5.$5=function($p0,$p1){if(ss.isValue($p0.range)){var $0=$p0.range;if(ss.isValue($0.min)&&ss.isValue($0.min.v)){$p1.domainMinValue=tab.vqlui$5.$8($p0,$0.min,null);}if(ss.isValue($0.max)&&ss.isValue($0.max.v)){$p1.domainMaxValue=tab.vqlui$5.$8($p0,$0.max,null);}}if(ss.isValue($p0.table)){var $1=$p0.table;if(ss.isValue($1.min)&&ss.isValue($1.min.v)){$p1.minValue=tab.vqlui$5.$8($p0,$1.min,null);}if(ss.isValue($1.max)&&ss.isValue($1.max.v)){$p1.maxValue=tab.vqlui$5.$8($p0,$1.max,null);}if(ss.isValue($1.included)){var $2=$1.included;$p1.includeNullValues=($2==='include-all'||$2==='include-null'||$2==='include-range-or-null');}}}
tab.vqlui$5.$6=function($p0,$p1){var $0=$p0.table;if(ss.isNullOrUndefined($0)){return;}if(ss.isValue($0.periodType)){$p1.periodType=$0.periodType;}if(ss.isValue($0.rangeType)){$p1.rangeType=$0.rangeType;}if(ss.isValue($0.rangeN)){$p1.rangeN=$0.rangeN;}}
tab.vqlui$5.$7=function($p0,$p1,$p2){return tab.vqlui$5.$8($p0,$p1,$p2);}
tab.vqlui$5.$8=function($p0,$p1,$p2){var $0={};if(ss.isNullOrUndefined($p1)){return $0;}var $1=tab.vqlui$5.$9($p1.t);var $2=tableau.format.isDateTimeWithNonMidnightTime;var $3=$2($p1);if(ss.isValue($p0.range)){$3=$3||(ss.isValue($p0.range.min)&&$2($p0.range.min))||(ss.isValue($p0.range.max)&&$2($p0.range.max));}if(ss.isValue($p0.table)){$3=$3||(ss.isValue($p0.table.min)&&$2($p0.table.min))||(ss.isValue($p0.table.max)&&$2($p0.table.max));}if($1==='date'||$1==='datetime'){$3=$3&&$p0.date_format['isAutoFormat'];}$0.type=$1;var $4=($1==='date'||$1==='datetime')?$p0.date_format:$p0.format;$0.formattedValue=tableau.format.formatDataValue($p1,$p0.role,$4,null,$3);if(ss.isValue($p2)){$0.aliasedValue=$p2;}$0.value=tab.ApiEventHandler.$7($p1.v,$1);return $0;}
tab.vqlui$5.$9=function($p0){switch($p0){case tableau.types.DataType.DT_BOOLEAN:return 'boolean';case tableau.types.DataType.DT_DATE:return 'date';case tableau.types.DataType.DT_INTEGER:return 'integer';case tableau.types.DataType.DT_REAL:return 'real';case tableau.types.DataType.DT_STRING:return 'cstring';case tableau.types.DataType.DT_TIMESTAMP:return 'datetime';case tableau.types.DataType.DT_UNKNOWN:return 'unknown';}return 'unknown';}
tab.vqlui$5.$A=function($p0,$p1){$p1.levels=0;if(ss.isValue($p0.levels)){$p1.levels=($p0.levels).length;}}
tab.vqlui$5.$B=function($p0,$p1,$p2){for(var $0=0;$0<$p0.length;$0++){var $1=$p0[$0];if(ss.isValue($1.table)){tab.vqlui$5.$C($1.table,$p1,$p2);}if(ss.isValue($1.children)){tab.vqlui$5.$B($1.children,$p1,$p2);}}}
tab.vqlui$5.$C=function($p0,$p1,$p2){if(ss.isValue($p0.tuples)){tab.vqlui$5.$D($p0.tuples,$p1,$p2);}}
tab.vqlui$5.$D=function($p0,$p1,$p2){for(var $0=0;$0<$p0.length;$0++){var $1=$p0[$0];if($1.s){var $2=tab.vqlui$5.$E($1);var $3=$2[$2.length-1];if(!ss.isValue($p2[$3])){$p2[$3]=0;$p1.add($3);}}}}
tab.vqlui$5.$E=function($p0){var $0=null;if(ss.isValue($p0.t)){$0=[];var $1=$p0.t;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;$0.add($2.v);}}return $0;}
tab.vqlui$9=function(){}
tab.vqlui$9.$0=function($p0){var $0=$p0;var $1=[];if(ss.isValue($0)){var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $3=$enum1.current;var $4=tab.vqlui$9.$2($3);if($4!=null&&$4.isValidPresModel){$1.add($4);}}}var $2={};$2.parameters=$1;return $2;}
tab.vqlui$9.$1=function($p0){var $0=$p0;if(ss.isValue($0.valid)&&!$0.valid){var $1={};$1.isValidPresModel=false;return $1;}else{var $2=$p0;if(ss.isValue($2)){return tab.vqlui$9.$2($2);}}return null;}
tab.vqlui$9.$2=function($p0){if(!ss.isValue($p0.parameterName)||!ss.isValue($p0.fieldCaption)){return null;}var $0=$p0.dataType;var $1=[];for(var $3=0;$3<$p0.valuesAliases.length;$3++){var $4=$p0.valuesAliases[$3];var $5=$p0.formattedValues[$3];$1.add(tab.vqlui$9.$4($0,$4,$5));}var $2={};$2.isValidPresModel=true;$2.parameterName=$p0.parameterName;$2.name=$p0.fieldCaption;$2.currentValue=tab.vqlui$9.$4($0,$p0.valueAlias,$p0.formattedValue);$2.dataType=$0;$2.allowableValuesType=$p0.parameterDomainType;$2.allowableValues=$1;$2.stepSize=tab.vqlui$9.$5($0,$p0.valueInc);$2.minValue=tab.vqlui$9.$3($0,$p0.valueMin,$p0.formattedMin,null);$2.maxValue=tab.vqlui$9.$3($0,$p0.valueMax,$p0.formattedMax,null);if($0==='date'||$0==='datetime'){$2.dateStepPeriod=$p0.datePeriodType;}return $2;}
tab.vqlui$9.$3=function($p0,$p1,$p2,$p3){var $0={};$0.type=$p0;$0.value=tab.ApiEventHandler.$7($p1,$p0);if(!tab.MiscUtil.isNullOrEmpty($p3)){$0.aliasedValue=$p3;}if(!tab.MiscUtil.isNullOrEmpty($p2)){$0.formattedValue=$p2;}return $0;}
tab.vqlui$9.$4=function($p0,$p1,$p2){return tab.vqlui$9.$3($p0,tab.vqlui$9.$6($p1),$p2,tab.vqlui$9.$7($p1));}
tab.vqlui$9.$5=function($p0,$p1){if(ss.isValue($p1)){if($p0==='integer'||$p0==='date'||$p0==='datetime'){return parseInt($p1);}if($p0==='real'){return parseFloat($p1);}}return null;}
tab.vqlui$9.$6=function($p0){return $p0[0];}
tab.vqlui$9.$7=function($p0){if($p0.length<2){return null;}if(ss.isNullOrUndefined($p0[1])||!($p0[1]).length){return null;}return $p0[1];}
tab.Application=function(){this.$7=[];tab.Application.add_starting(ss.Delegate.create(this,function(){
this.$2=tsConfig.sheetId;this.$7.add(dojo.subscribe('newLayoutId',ss.Delegate.create(this,this.$13)));this.$7.add(dojo.subscribe('onBootstrapSuccess',ss.Delegate.create(this,this.$11)));this.$7.add(dojo.subscribe('onTabSelect',ss.Delegate.create(this,this.$E)));tab.ApplicationModel.get_instance().get_workbook().add_dashboardDeleted(ss.Delegate.create(this,this.$C));var $1_0=new tab.LayoutSession(null,null);tab.CommandController.create($1_0,tsConfig.embedded);tab.CommandController.get().add_destroyView(ss.Delegate.create(this,function(){
this.$D();}));var $1_1=$('.tabbedNavigation');if($1_1.length>0){this.$6=new tableau.base.widget.TabbedNavigation({},$1_1[0]);this.$6.startup();}this.$3=tab.Application.$B(false,$1_0);this.$3.startup();this.$10(this.$3);this.$4=new tab.ModifierKeyState();}));}
tab.Application.add_starting=function(value){tab.Application.$8=ss.Delegate.combine(tab.Application.$8,value);}
tab.Application.remove_starting=function(value){tab.Application.$8=ss.Delegate.remove(tab.Application.$8,value);}
tab.Application.add_started=function(value){tab.Application.$9=ss.Delegate.combine(tab.Application.$9,value);}
tab.Application.remove_started=function(value){tab.Application.$9=ss.Delegate.remove(tab.Application.$9,value);}
tab.Application.get_instance=function(){if(ss.isNullOrUndefined(tab.Application.$0)){tab.Application.$0=new tab.Application();}return tab.Application.$0;}
tab.Application.get_isStarted=function(){return tab.Application.$1;}
tab.Application.startup=function(){if(ss.isValue(tab.Application.$1)&&tab.Application.$1){throw Error.createError('Application.Startup() can only be called once',null);}var $0=tab.Application.get_instance();if(ss.isValue(tab.Application.$8)){tab.Application.$8($0,ss.EventArgs.Empty);}if(ss.isValue(tab.Application.$9)){tab.Application.$9($0,ss.EventArgs.Empty);}tab.Application.$1=true;}
tab.Application.$B=function($p0,$p1){var $0=Type.getType((tsConfig.is_mobile)?'tab.ApplicationViewModelMobile':'tab.ApplicationViewModelWeb');return new $0($p0,$p1);}
tab.Application.$14=function($p0){if(ss.isNullOrUndefined($p0)||!$p0.length){return;}var $0=tab.WindowHelper.getLocation(window.parent).href;$0=($0).replace(tsConfig.repositoryUrl,$p0);tab.HistoryUtil.replaceState(window.parent,{},'',$0);tsConfig.repositoryUrl=$p0;}
tab.Application.prototype={$2:null,$3:null,$4:null,$5:null,$6:null,add_clientChanged:function(value){this.$A=ss.Delegate.combine(this.$A,value);},remove_clientChanged:function(value){this.$A=ss.Delegate.remove(this.$A,value);},$A:null,get_client:function(){return this.$3;},get_currentSheetName:function(){return this.$2;},dispose:function(){if(!ss.isValue(tab.Application.$0)){return;}this.$D();var $enum1=ss.IEnumerator.getEnumerator(this.$7);while($enum1.moveNext()){var $0=$enum1.current;dojo.unsubscribe($0);}this.$7.clear();this.$F();this.$4.dispose();if(ss.isValue(this.$6)){this.$6.destroy();this.$6=null;}tab.ApplicationModel.get_instance().get_workbook().remove_dashboardDeleted(ss.Delegate.create(this,this.$C));tab.Application.$0=null;},$C:function($p0){this.$D();},$D:function(){if(ss.isNullOrUndefined(this.$3)){return;}this.$3.destroyRecursive();this.$3=null;},$E:function($p0){var $0=$p0;tab.SheetClientCommands.switchSheets($0,tsConfig.embedded);},$F:function(){if(ss.isValue(window.removeEventListener)){window.removeEventListener('message',ss.Delegate.create(this,this.$12),true);}else{window.self.detachEvent('onmessage', ss.Delegate.create(this,this.$12));}this.$5=null;},$10:function($p0){this.$5=new tab.ApiEventHandler($p0);if(ss.isValue(window.addEventListener)){window.addEventListener('message',ss.Delegate.create(this,this.$12),true);}else{window.self.attachEvent('onmessage', ss.Delegate.create(this,this.$12));}},$11:function($p0){this.$2=$p0;if(ss.isValue(this.$5)){this.$5.setClient(this.$3);}},$12:function($p0){this.$5.handleEvent($p0);},$13:function($p0){var $0=$p0;this.$2=$0.sheetId;this.$15($0);var $1=tab.CommandController.get().get_legacySession();this.$D();this.$3=tab.Application.$B(true,$1);this.$3.startup();if(ss.isValue(this.$A)){this.$A();}this.$5.setClient(this.$3);if(!tab.DomUtil.isEmbeddedCrossDomain()){tab.Application.$14($0.repositoryUrl);}},$15:function($p0){tsConfig.current_sheet_name=$p0.sheetName;if(!!$p0.isCurrentCustViewIdValid){tsConfig.current_custom_view_id=$p0.currentCustomViewId;}else{tsConfig.current_custom_view_id=null;}tsConfig.layoutid=$p0.layoutId;tsConfig.embeddedTitle=$p0.embeddedTitle;tsConfig.blogURI=$p0.blogLink;tsConfig.requestURI=$p0.shareLink;tsConfig.downloadURI=$p0.downloadLink;tsConfig.staticImage=$p0.staticImage;tsConfig.guid=$p0.guid;}}
tab.CategoricalSelectionMixin=function(){this._anchorIndex=-1;this._selectedIndexes=[];this._lastRangeSelectionIndex=-1;tab.CategoricalSelectionMixin.initializeBase(this);}
tab.CategoricalSelectionMixin.prototype={changelist:null,_applyTimer:null,get_isCategoricalFilter:function(){return this.declaredClass.indexOf('CategoricalFilter')>-1;},get_asCategoricalFilter:function(){return this;},get_isSearchWidget:function(){return this.declaredClass.indexOf('CategoricalFilter')<0;},get_asSearchWidget:function(){return this;},recordCheckedChanges:function(changedList,item,tuple){if(tableau.FilterItem.isChecked(item)&&!tuple.s){changedList.tuples.push(tableau.FilterItem.setChecked(item,true,tuple));}else if(!tableau.FilterItem.isChecked(item)&&tuple.s){changedList.tuples.push(tableau.FilterItem.setChecked(item,false,tuple));}},clearRangeAnchorAndSelection:function(){var $0=this.get_asCategoricalFilter().fetchChildNodeByIndex(this._anchorIndex);if(!!$0){var $1=tableau.FilterItem.getCssNode($0);if(!!$1){dojo.removeClass($0,'anchorSelection');}}this._anchorIndex=this._lastRangeSelectionIndex=-1;this._clearSelection();},refreshRangeAnchorAndSelection:function(){if(this._anchorIndex>=0){var $0=this.get_asCategoricalFilter().fetchChildNodeByIndex(this._anchorIndex);if(!!$0){var $1=tableau.FilterItem.getCssNode($0);if(!!$1){dojo.addClass($1,'anchorSelection');}}else{this._anchorIndex=-1;}}for(var $2=this._selectedIndexes.length-1;$2>=0;--$2){var $3=this._selectedIndexes[$2];var $4=this.get_asCategoricalFilter().fetchChildNodeByIndex($3);if(!!$4){this._selectItem($3);}else{this._selectedIndexes.splice($2,1);}}},onListItemClick:function(evt){var $0;var $1;var $2=new tab.RawChange();var $3=[];var $4=null;if(!!!this.changelist){this.changelist=new tab.Changelist();}var $5=tableau.FilterItem.getNodeFromEvent(evt);if(!!!$5){return;}$0=tableau.util.isNodeMatch(evt.target,'input',{type:'checkbox'});$0=$0||tableau.util.isNodeMatch(evt.target,'input',{type:'radio'});if($0){tableau.FilterItem.syncCssToCheckState($5);if(this.get_isCategoricalFilter()){if(ss.isValue(this.get_asCategoricalFilter().get_modeContents().pendingManager)){this.get_asCategoricalFilter().get_modeContents().pendingManager.handleItemClicked(tableau.FilterItem.getIndex($5),$5);}if(tableau.FilterItem.isAllItem($5)){this.get_asCategoricalFilter().doSelectAll(this.get_asCategoricalFilter().isSingleSelect()||tableau.FilterItem.isChecked($5));return;}}}$1=tableau.FilterItem.getIndex($5);if(ss.isNullOrUndefined($1)||$1<0){return;}if(tableau.FilterItem.isTypeInListItem($5)){if(!!evt.shiftKey&&this._anchorIndex>=0){this._selectRangeFromAnchor($1);}else if(tableau.util.isCtrlKey(evt)){this._toggleItemSelection($1);this._updateRangeAnchor($1);}else{this._clearSelection();this._updateRangeAnchor($1);this._selectItem($1);}}else{if($0){var $6=tableau.FilterItem.isChecked($5);if(this.get_isCategoricalFilter()&&!!this.get_asCategoricalFilter().get_oFilter()){$4=this.get_asCategoricalFilter().get_oFilter().table;}else if(this.get_isSearchWidget()&&!!this.get_asSearchWidget().get_oResults()){$4=this.get_asSearchWidget().get_oResults();}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()&&!(this.get_isCategoricalFilter()&&this.get_asCategoricalFilter().shouldDeferChanges())){if(!!$4&&$4.actual_size===$4.tuples.length){var $7=$4.tuples;var $8=this._getCheckedIndexes($7,$5,this.changelist);for(var $B=0,$C=$8.length;$B<$C;$B++){var $D=$8[$B];var $E=($7[$D].d||$7[$D].t[0].v);$3.push($E);}var $9=null;if(this.get_isSearchWidget()){$9=this.get_asSearchWidget().get_qf();}else{$9=this.get_asCategoricalFilter();}var $A=new tab.CategoricalFilterData($9.get_oFilter().targetSheets,$9.get_field(),$9.get_oFilter().exclude,$3);tab.FilterClientCommands.updateCategoricalFilter($A);}}if(tableau.FilterItem.isTiled($5)){if(!!evt.shiftKey){this._updateCheckboxRangeFromAnchorByIndex($1);var $F=(this._anchorIndex>-1)?this._anchorIndex:$1;$2.setRange(new tab.IntegerRange($F,$1),$6);this.changelist.addChange($2);}else{$2.setSingle($1,$6);this.changelist.addChange($2);}}else{if(!!evt.shiftKey){this._updateCheckboxRangeFromAnchor($1);}else{$2.setSingle($1,$6);this.changelist.addChange($2);}}if(this.get_isCategoricalFilter()&&ss.isValue(this.get_asCategoricalFilter().get_modeContents().pendingManager)){this.get_asCategoricalFilter().applyChangesByChangelist(this.changelist);this.changelist.reset();}else{this.notifyChange(this.getDoChangeFunc());}}this._updateRangeAnchor($1);}},getDoChangeFunc:function(){var $0=ss.Delegate.create(this,function(){
this.get_asCategoricalFilter().applyChangesByChangelist(this.changelist);this.changelist.reset();});return $0;},notifyChange:function(callback){if(!!this._applyTimer){window.clearTimeout(this._applyTimer);this._applyTimer=null;}if(this.get_isCategoricalFilter()){this.get_asCategoricalFilter().set_stateId(this.get_asCategoricalFilter().get_stateId()+1);}this._applyTimer=window.setTimeout(callback,this._applyDelayOfHostClass());},_getCheckedIndexes:function($p0,$p1,$p2){var $0=[];var $1=null;if(this.get_isSearchWidget()){$1=this.get_asSearchWidget().get_qf();}else{$1=this.get_asCategoricalFilter();}var $2=$1.get_mode()==='checklist'||$1.get_mode()==='checkdropdown';var $3=$2||$1.get_mode()==='radiolist'||$1.get_mode()==='dropdown';var $4=null;if($2){$4=$p2.compileForChecklist(null);}for(var $5=0,$6=$p0.length;$5<$6;$5++){var $7=this.get_asCategoricalFilter().fetchChildNodeByIndex($5);if(!!$7){if(tableau.FilterItem.isChecked($7)){$0.add($5);}}else if($3){var $8=$p0[$5].s;if(tableau.FilterItem.getIndex($p1)===$5){if(tableau.FilterItem.isChecked($p1)){$0.add($5);}}else if($2){if($4.select.contains($5)){$0.add($5);}else if(!$4.deselect.contains($5)&&$8){$0.add($5);}}}}return $0;},forEachSelected:function(itemCallback){if(ss.isNullOrUndefined(itemCallback)||typeof(itemCallback)!=='function'){return;}for(var $0=0,$1=this._selectedIndexes.length;$0<$1;$0++){var $2=this._selectedIndexes[$0];var $3=this.get_asCategoricalFilter().fetchChildNodeByIndex($2);itemCallback($2,$3);}},_applyDelayOfHostClass:function(){var $0=500;if(this.get_isCategoricalFilter()){$0=this.get_asCategoricalFilter().applyDelay;}else if(this.get_isSearchWidget()){$0=this.get_asSearchWidget().get_applyDelay();}return $0;},_selectRangeFromAnchor:function($p0){var $0;var $1;var $2=this._anchorIndex;var $3;var $4;var $5=(this._lastRangeSelectionIndex>=0)?this._lastRangeSelectionIndex:$2;var $6=Math.min($2,$p0);var $7=Math.max($2,$p0);for($0=$p0;$0<=Math.min($2,$5);$0++){this._selectItem($0);}for($3=$5;$3<$6;$3++){this._deselectItem($3);}for($1=Math.max($2,$5);$1<=$p0;$1++){this._selectItem($1);}for($4=$7+1;$4<=$5;$4++){this._deselectItem($4);}this._lastRangeSelectionIndex=$p0;},_toggleItemSelection:function($p0){var $0=this.get_asCategoricalFilter().fetchChildNodeByIndex($p0);if(tableau.FilterItem.isSelected($0)){this._deselectItem($p0);}else{this._selectItem($p0);}},_selectItem:function($p0){var $0=this.get_asCategoricalFilter().fetchChildNodeByIndex($p0);var $1;tableau.FilterItem.setSelected($0,true);$1=tableau.util.binarySearch($p0,this._selectedIndexes);if(!$1.found){this._selectedIndexes.splice($1.index,0,$p0);}},_deselectItem:function($p0){var $0=this.get_asCategoricalFilter().fetchChildNodeByIndex($p0);var $1;tableau.FilterItem.setSelected($0,false);$1=tableau.util.binarySearch($p0,this._selectedIndexes);if($1.found){this._selectedIndexes.splice($1.index,1);}},_clearSelection:function(){for(var $0=this._selectedIndexes.length-1;$0>=0;--$0){this._deselectItem(this._selectedIndexes[$0]);}this._selectedIndexes=[];},_updateCheckboxRangeFromAnchor:function($p0){var $0=Math.min(this._anchorIndex,$p0);var $1=Math.max(this._anchorIndex,$p0);var $2=this.get_asCategoricalFilter().fetchChildNodeByIndex($0);var $3=this.get_asCategoricalFilter().fetchChildNodeByIndex($1);var $4=tableau.FilterItem.isChecked(this.get_asCategoricalFilter().fetchChildNodeByIndex($p0));var $5;while(!!$2&&$2!==$3){tableau.FilterItem.setChecked($2,$4);$5=new tab.RawChange();$5.setSingle(tableau.FilterItem.getIndex($2),$4);this.changelist.addChange($5);$2=$2.nextSibling;}tableau.FilterItem.setChecked($3,$4);$5=new tab.RawChange();$5.setSingle(tableau.FilterItem.getIndex($3),$4);this.changelist.addChange($5);},_updateCheckboxRangeFromAnchorByIndex:function($p0){var $0=Math.min(this._anchorIndex,$p0);var $1=Math.max(this._anchorIndex,$p0);var $2=tableau.FilterItem.isChecked(this.get_asCategoricalFilter().fetchChildNodeByIndex($p0));var $3;var $4;for($3=$0;$3<=$1;++$3){$4=this.get_asCategoricalFilter().fetchChildNodeByIndex($3);if(!!$4){if(this.get_isCategoricalFilter()&&ss.isValue(this.get_asCategoricalFilter().get_modeContents().pendingManager)){this.get_asCategoricalFilter().get_modeContents().pendingManager.handleItemClicked(tableau.FilterItem.getIndex($4),$4);}tableau.FilterItem.setChecked($4,$2);}}},_updateRangeAnchor:function($p0){if(this.get_asCategoricalFilter().isSingleSelect()){return;}if(this._anchorIndex===$p0&&$p0>=0){return;}var $0;if(this._anchorIndex>=0){$0=this.get_asCategoricalFilter().fetchChildNodeByIndex(this._anchorIndex);if(!!$0){dojo.removeClass(tableau.FilterItem.getCssNode($0),'anchorSelection');}}this._anchorIndex=$p0;$0=this.get_asCategoricalFilter().fetchChildNodeByIndex($p0);if(!!$0){dojo.addClass(tableau.FilterItem.getCssNode($0),'anchorSelection');}this._lastRangeSelectionIndex=-1;}}
tab.Dialog=function(titleUnescaped,body){tab.Dialog.initializeBase(this,[$("\n<div class='tab-dialogContainer'>\n  <div class='tab-dialogUnderlay'></div>\n  <div class='tab-dialog'>\n    <div class='tab-dialogTitleBar'>\n      <span class='tab-dialogTitle' />\n      <div class='tab-dialogCloseButton'></div>\n    </div>\n    <div class='tab-dialogBodyContainer'></div>\n  </div>\n</div>\n")]);this.set_titleUnescaped(titleUnescaped);this.set_body(body);this.$1_8=new tab.Button(false);this.$1_8.add_clicked(ss.Delegate.create(this,this.$1_11));this.get_element().find('.tab-dialogUnderlay').click(ss.Delegate.create(this,function($p1_0){
this.close();}));this.get_element().find('.tab-dialogCloseButton').append(this.$1_8.get_element());this.$1_8.get_element().attr('tabindex','-2');this.$1_0=this.get_element().find('.tab-dialog');this.$1_0.attr('tabIndex','-1').css('outline','0');var $0=function($p1_0){
$p1_0.stopPropagation();};this.get_element().bind(this.createNamespacedEventName('touchstart'),$0);this.get_element().bind(this.createNamespacedEventName('touchcancel'),$0);this.get_element().bind(this.createNamespacedEventName('touchend'),$0);this.get_element().bind(this.createNamespacedEventName('touchmove'),$0);this.get_element().bind(this.createNamespacedEventName('click'),$0);this.get_element().bind(this.createNamespacedEventName('mousedown'),$0);this.get_element().bind(this.createNamespacedEventName('mousemove'),$0);this.get_element().bind(this.createNamespacedEventName('mouseup'),$0);}
tab.Dialog.prototype={$1_0:null,$1_7:null,$1_8:null,$1_9:false,$1_A:true,$1_B:true,add_closing:function(value){this.$1_C=ss.Delegate.combine(this.$1_C,value);},remove_closing:function(value){this.$1_C=ss.Delegate.remove(this.$1_C,value);},$1_C:null,add_closed:function(value){this.$1_D=ss.Delegate.combine(this.$1_D,value);},remove_closed:function(value){this.$1_D=ss.Delegate.remove(this.$1_D,value);},$1_D:null,get_body:function(){return this.$1_7;},set_body:function(value){if(this.$1_7!==value){this.$1_7=value;this.get_element().find('.tab-dialogBodyContainer').html('').append(value);this.$1_10();}return value;},get_titleUnescaped:function(){return this.get_element().find('.tab-dialogTitle').text();},set_titleUnescaped:function(value){this.get_element().find('.tab-dialogTitle').text(value);return value;},get_isShown:function(){return this.$1_9;},get_setFocusOnShow:function(){return this.$1_B;},set_setFocusOnShow:function(value){this.$1_B=value;return value;},get_closeButton:function(){return this.$1_8;},get_closeButtonVisible:function(){return this.get_element().find('.tab-dialogCloseButton').is(':visible');},set_closeButtonVisible:function(value){if(value){this.get_element().find('.tab-dialogCloseButton').show();}else{this.get_element().find('.tab-dialogCloseButton').hide();}return value;},get_noClosingAnimation:function(){return this.$1_A;},set_noClosingAnimation:function(value){this.$1_A=value;return value;},get_dialogElement:function(){return this.$1_0;},dispose:function(){if(ss.isValue(this.$1_8)){this.$1_8.dispose();this.$1_8=null;}$(window).unbind(this.get_eventNamespace());$(document).unbind(this.get_eventNamespace());this.$1_D=null;this.$1_C=null;tab.Dialog.callBaseMethod(this, 'dispose');},showModal:function(){this.$1_E();this.get_element().show();this.$1_9=true;if(this.get_setFocusOnShow()){this.$1_10();}},close:function(callbackWhenClosed){if(!this.get_isShown()){if(ss.isValue(callbackWhenClosed)){callbackWhenClosed();}return;}var $0=new ss.CancelEventArgs();this.onClosing($0);if($0.cancel){return;}var $1=ss.Delegate.create(this,function(){
this.$1_F();this.$1_9=false;if(ss.isValue(callbackWhenClosed)){callbackWhenClosed();}this.onClosed(new ss.EventArgs());});if(this.$1_A){this.get_element().hide();$1();}else{this.get_element().fadeOut('fast',$1);}},onClosing:function(e){if(this.$1_C!=null){this.$1_C(this,e);}},onClosed:function(e){if(this.$1_D!=null){this.$1_D(this,e);}},closeIfEscapePressed:function(e){if(e.which===27){this.close();e.preventDefault();}},onWindowResize:function(e){var $0=this.$1_0;$0.css({left:Math.round((this.get_element().width()-$0.outerWidth())/2)+'px',top:Math.round((this.get_element().height()-$0.outerHeight())/2)+'px'});},$1_E:function(){var $0=$('body');if(this.get_element().parent()===$0){return;}this.get_element().appendTo($0);this.onWindowResize(null);$(window).bind(this.createNamespacedEventName('resize'),ss.Delegate.create(this,this.onWindowResize));$(document).bind(this.createNamespacedEventName('keydown'),ss.Delegate.create(this,this.$1_12));this.get_element().bind(this.createNamespacedEventName('keydown'),ss.Delegate.create(this,this.$1_13));},$1_F:function(){this.get_element().css('display','none').detach();var $0=[window,document,this.get_element()];$($0).unbind(this.get_eventNamespace());},$1_10:function(){if(this.$1_9){var $0=this.get_element().find('.tab-dialogBodyContainer'+' :tabbable');if($0.length>0){$0.eq(0).focus();}else{this.$1_0.eq(0).focus();}}},$1_11:function($p0,$p1){this.close();},$1_12:function($p0){this.closeIfEscapePressed($p0);},$1_13:function($p0){if($p0.which!==9){return;}var $0=this.get_element().find(':tabbable');var $1=$0.filter(':first');var $2=$0.filter(':last');if($p0.target===$2[0]&&!$p0.shiftKey){$1.focusDelayed(1);$p0.preventDefault();$p0.stopPropagation();}else if($p0.target===$1[0]&&$p0.shiftKey){$2.focusDelayed(1);$p0.preventDefault();$p0.stopPropagation();}}}
tab.ExportPdfDialog=function(sess,pngMode){tab.ExportPdfDialog.initializeBase(this,['',$(tab.ExportPdfDialog.dialogTemplate())]);this.$1_17=(pngMode)?'png':'pdf';this.$1_16=sess;this.dom=new tab.ExportPdfDialogTemplate(this.get_element());this.thumbnails=[];this.get_dialogElement().css({minWidth:'none',maxWidth:'none'});switch(this.$1_17){case 'png':this.set_titleUnescaped(tab.Strings.PdfExportTitlePNG);this.dom.getElementsBySelector('.pdf-only').hide();break;case 'pdf':this.set_titleUnescaped(tab.Strings.PdfExportTitlePDF);this.dom.getElementsBySelector('.png-only').hide();break;}this.set_closeButtonVisible(false);this.disableTextSelection();}
tab.ExportPdfDialog.dialogTemplate=function(){if(tab.ExportPdfDialog.$1_14==null){tab.ExportPdfDialog.$1_14=String.localeFormat(tab.ExportPdfDialogTemplate.template,tableau.format.escapeHTML(tab.Strings.PdfDialogPaperSize),tableau.format.escapeHTML(tab.Strings.PdfDialogImageSize),tableau.format.escapeHTML(tab.Strings.PdfDialogScalingLabel),tableau.format.escapeHTML(tab.Strings.PdfDialogSectionLayout),tableau.format.escapeHTML(tab.Strings.PdfExportPageOrientationPortrait),tableau.format.escapeHTML(tab.Strings.PdfExportPageOrientationLandscape),tableau.format.escapeHTML(tab.Strings.PdfDialogSectionContent),tableau.format.escapeHTML(tab.Strings.PdfDialogContentDashboardSheets),tableau.format.escapeHTML(tab.Strings.PdfDialogContentDashboard),tableau.format.escapeHTML(tab.Strings.PdfDialogContentTopSheets),tableau.format.escapeHTML(tab.Strings.PdfDialogContentWorksheet),tableau.format.escapeHTML(tab.Strings.PdfDialogSelectSheetToChangePrintScaling),tableau.format.escapeHTML(tab.Strings.DialogButtonExport),tableau.format.escapeHTML(tab.Strings.DialogButtonCancel));}return tab.ExportPdfDialog.$1_14;}
tab.ExportPdfDialog.scalingValueFromLayoutOptions=function(options){switch(options.pageScaleMode){case 'fit-pages':return String.format('fit{0}x{1}',options.pageFitHorizontal,options.pageFitVertical);case 'percent':return String.format('pct{0}',options.pageScalePercent);case 'auto':default:return 'auto';}}
tab.ExportPdfDialog.scalingLabelFromLayoutOptions=function(options){switch(options.pageScaleMode){case 'fit-pages':if(!options.pageFitHorizontal&&options.pageFitVertical>0){return tab.Strings.PdfExportFitHigh(options.pageFitVertical);}else if(!options.pageFitVertical&&options.pageFitHorizontal>0){return tab.Strings.PdfExportFitWide(options.pageFitHorizontal);}else{return tab.Strings.PdfExportFitWideByHigh(options.pageFitHorizontal,options.pageFitVertical);}case 'percent':return tab.Strings.PdfExportPageScalePercent(options.pageScalePercent);case 'auto':default:return tab.Strings.PdfExportPageScaleAuto;}}
tab.ExportPdfDialog.canSelectSheet=function(sheet){return sheet.isPublished||(ss.isValue(tsConfig.is_authoring)&&tsConfig.is_authoring);}
tab.ExportPdfDialog.prototype={dom:null,thumbnails:null,$1_15:null,$1_16:null,$1_17:null,$1_18:null,$1_19:false,get_thumbnailTemplates:function(){return this.thumbnails;},get_$1_1A:function(){return this.dom.orientationBtns.find('.selected').val();},set_$1_1A:function($p0){var $0=($p0==='printer')?'portrait':$p0;var $1=this.dom.orientationBtns;var $2=function($p1_0,$p1_1){
var $1_0=$($p1_1);if($1_0.attr('value')===$0){$1_0.addClass('selected');}else{$1_0.removeClass('selected');}};$1.each($2);return $p0;},get_$1_1B:function(){return (this.$1_17==='png')?parseInt(this.dom.imageHeightBtn.val()):0;},set_$1_1B:function($p0){if(this.$1_17==='png'){this.dom.imageHeightBtn.val($p0);}return $p0;},get_$1_1C:function(){return (this.$1_17==='png')?parseInt(this.dom.imageWidthBtn.val()):0;},set_$1_1C:function($p0){if(this.$1_17==='png'){this.dom.imageHeightBtn.val($p0);}return $p0;},get_$1_1D:function(){return (this.$1_17==='png')?'letter':this.dom.sizeControl.val();},set_$1_1D:function($p0){if(this.$1_17==='pdf'){this.dom.sizeControl.val($p0);}return $p0;},get_$1_1E:function(){return this.dom.statusMsg.text();},set_$1_1E:function($p0){this.dom.statusMsg.text($p0);return $p0;},get_$1_1F:function(){return this.$1_15;},set_$1_1F:function($p0){this.$1_15=$p0;this.initFromModel();return $p0;},get_$1_20:function(){return this.$1_18.get_presModel();},get_$1_21:function(){return this.$1_19;},set_$1_21:function($p0){this.$1_19=$p0;if($p0){this.get_body().find('select, input, button').attr('disabled','disabled');this.get_body().find("button[name='cancel']").removeAttr('disabled');}else{this.get_body().find('select, input, button').removeAttr('disabled');}return $p0;},initialize:function(){this.initEventHandlers();},dispose:function(){this.get_body().undelegate('button','click').undelegate('select','change').undelegate('input','change');tab.ExportPdfDialog.callBaseMethod(this, 'dispose');},showModal:function(){if(ss.isNullOrUndefined(this.get_$1_1F())){this.$1_27();}this.initialize();tab.ExportPdfDialog.callBaseMethod(this, 'showModal');},initEventHandlers:function(){this.get_body().find('select').change(ss.Delegate.create(this,this.updateSelection)).end().find('.tab-pdfdlg-group-orientation button').click(ss.Delegate.create(this,this.updateOrientation)).end().find('.png-only input').change(ss.Delegate.create(this,this.updateImageDimension)).end().find('.tab-pdfdlg-dashboard-content-mode button').click(ss.Delegate.create(this,this.handleContentModeSwitch)).end().find('.tab-pdfdlg-worksheet-content-mode button').click(ss.Delegate.create(this,this.handleContentModeSwitch)).end().find('.tab-dialog-actions button').click(ss.Delegate.create(this,this.handleActionButtons)).end().keyup(ss.Delegate.create(this,this.closeIfEscapePressed));},appendOptionToSelect:function(label,value,select){var $0=String.localeFormat("<option value='{0}'>{1}</option>",tableau.format.escapeHTML(value),tableau.format.escapeHTML(label));select.append($($0));},appendEnumToSelect:function(label,value,select){this.appendOptionToSelect(label,value,select);},initFromModel:function(){this.$1_2C();this.$1_2B();this.$1_2A();var $0=this.get_$1_20().isDashboard;this.$1_2E($0);var $1=($0)?'dashboard':'this-sheet';this.$1_2D($1);},handleActionButtons:function(e){var $0=$(e.currentTarget);switch($0.attr('name')){case 'export':this.$1_26();break;case 'cancel':this.close();break;default:break;}},setEnabledStatesForSelectedSheets:function(){if(this.get_body().find('.tab-pdfdlg-thumbnail-button').hasClass('selected')){this.get_body().find("button[name='export']").removeAttr('disabled');this.set_$1_1E(null);this.$1_29();}else{this.get_body().find("button[name='export']").attr('disabled','disabled');this.set_$1_1E(tab.Strings.PrintPdfDialogContentRequired);this.$1_28();this.dom.spinner.hide();}},updateScalingSelectFromSheet:function(sheet){var $0=this.dom.scalingSelector;var $1=tab.ExportPdfDialog.scalingValueFromLayoutOptions(sheet.exportLayoutOptions);var $2=$0.children(String.format("option[value='{0}']",$1));if($2.length>0){$0.val($1);}else{this.appendOptionToSelect(tab.ExportPdfDialog.scalingLabelFromLayoutOptions(sheet.exportLayoutOptions),$1,$0);}},updateSheetsFromScalingValue:function(val){var $0=new RegExp('pct([0-9]{1,3})');var $1=new RegExp('fit([0-9]{1,2})x([0-9]{1,2})');var $2;if($0.test(val)){$2=$0.exec(val);var $3=parseInt($2[1]);var $enum1=ss.IEnumerator.getEnumerator(this.$1_15.sheetOptions);while($enum1.moveNext()){var $4=$enum1.current;$4.exportLayoutOptions.pageScaleMode='percent';$4.exportLayoutOptions.pageScalePercent=$3;}}else if($1.test(val)){$2=$1.exec(val);var $5=parseInt($2[1]);var $6=parseInt($2[2]);var $enum2=ss.IEnumerator.getEnumerator(this.$1_15.sheetOptions);while($enum2.moveNext()){var $7=$enum2.current;$7.exportLayoutOptions.pageScaleMode='fit-pages';$7.exportLayoutOptions.pageFitHorizontal=$5;$7.exportLayoutOptions.pageFitVertical=$6;}}else{var $enum3=ss.IEnumerator.getEnumerator(this.$1_15.sheetOptions);while($enum3.moveNext()){var $8=$enum3.current;$8.exportLayoutOptions.pageScaleMode='auto';}}},updateImageDimension:function(evt){var $0=$(evt.currentTarget);var $1=$0.attr('value');var $2=this.$1_15.exportLayoutOptions;switch($0.attr('name')){case 'imageHeight':var $3=parseInt($1);$2.imageHeight=$3;var $enum1=ss.IEnumerator.getEnumerator(this.$1_15.sheetOptions);while($enum1.moveNext()){var $5=$enum1.current;$5.exportLayoutOptions.imageHeight=$3;}break;case 'imageWidth':var $4=parseInt($1);$2.imageWidth=$4;var $enum2=ss.IEnumerator.getEnumerator(this.$1_15.sheetOptions);while($enum2.moveNext()){var $6=$enum2.current;$6.exportLayoutOptions.imageWidth=$4;}break;}},updateSelection:function(evt){var $0=$(evt.currentTarget);var $1=$0.attr('value');switch($0.attr('name')){case 'scaling':this.updateSheetsFromScalingValue($1);break;case 'pageSize':var $2=$1;this.$1_15.exportLayoutOptions.pageSizeOption=$2;var $enum1=ss.IEnumerator.getEnumerator(this.$1_15.sheetOptions);while($enum1.moveNext()){var $3=$enum1.current;$3.exportLayoutOptions.pageSizeOption=$2;}break;}},handleContentModeSwitch:function(evt){var $0=$(evt.currentTarget);$0.siblings().removeClass('selected').end().addClass('selected');switch($0.attr('name')){case 'dashboard-content':case 'worksheet-content':this.$1_2D($0.attr('value'));break;}},updateOrientation:function(evt){var $0=evt.currentTarget.getAttribute('value');this.$1_15.exportLayoutOptions.pageOrientationOption=$0;var $enum1=ss.IEnumerator.getEnumerator(this.$1_15.sheetOptions);while($enum1.moveNext()){var $1=$enum1.current;$1.exportLayoutOptions.pageOrientationOption=$0;}this.set_$1_1A($0);},onWindowResize:function(e){var $0=this.get_dialogElement();$0.css({left:Math.round((this.get_element().width()-$0.outerWidth())/2)+'px',top:Math.max(Math.round((this.get_element().height()-$0.outerHeight())/2)-100,0)+'px'});},showThumbList:function(){this.dom.thumbListWrapper.show();this.dom.thumbList.show();},hideThumbList:function(){this.dom.thumbListWrapper.hide();this.dom.thumbList.hide();},setSingleSheetSelected:function(){var $0=this.get_$1_20();var $enum1=ss.IEnumerator.getEnumerator(this.thumbnails);while($enum1.moveNext()){var $1=$enum1.current;$1.selectAndShow($1.get_presModel()===$0);}},$1_22:function(){var $0={};$0.commandNamespace='tabsrv';$0.commandName='pdf-export-server';var $1={pdfExport:this.$1_15};var $2=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.set_$1_21(false);this.$1_29();if($p1_2.status===200){if(this.get_isShown()){var $1_0=tab.PresentationModel.fromCommand($p1_0,$0);var $1_1=tableau.types.ExportDialogType['PrintPDF'];var $1_2=this.$1_16.formatSessionTempfileReference($1_0.tempfileKey,true,true);this.$1_16.openDownload($1_2,$1_1);this.close();}}else{this.$1_25();}});var $3=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.$1_25();});this.$1_16.sendSessionCommand($0.commandNamespace,$0.commandName,$1,$2,$3);},$1_23:function(){var $0=tsConfig.visible_sheets;var $1={pdfExport:this.$1_15};var $2={};var $3=tableau.types.ExportDialogType['ExportImage'];var $enum1=ss.IEnumerator.getEnumerator(this.$1_15.sheetOptions);while($enum1.moveNext()){var $8=$enum1.current;if($8.isSelected){var $9=$8.exportLayoutOptions;var $A=$0.indexOf($8.sheet);if($A>=0){var $B='';urlPNG = this.session.formatExportURL('image/png', {});var $C=$9.imageHeight;var $D=$9.imageWidth;$B+=String.format('?:dimensions={0},{1}',$C,$D);$2[$8.sheet]=$B;}}}var $4=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.$1_16.showDownloads($2,$3);this.close();});var $5=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.$1_25();});var $6='tabsrv';var $7='pdf-export-options';this.$1_16.sendSessionCommand($6,$7,$1,$4,$5);},$1_24:function(){switch(this.$1_17){case 'png':this.$1_23();break;case 'pdf':this.$1_22();break;default:break;}},$1_25:function(){this.$1_28();this.set_$1_21(false);switch(this.$1_17){case 'png':this.set_$1_1E(tab.Strings.PdfExportMessageErrorPng);break;case 'pdf':default:this.set_$1_1E(tab.Strings.PdfExportMessageError);break;}this.dom.spinner.hide();this.dom.statusMsg.show();},$1_26:function(){this.set_$1_21(true);this.set_$1_1E(tab.Strings.PdfExportMessageExporting);this.$1_28();this.$1_24();},$1_27:function(){var $0={};$0.commandNamespace='tabsrv';$0.commandName='pdf-export-options';this.set_$1_1E(tab.Strings.PdfExportMessageSettings);this.set_$1_21(true);this.$1_28();var $1=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
if($p1_2.status!==200){return;}this.set_$1_1F(tab.PresentationModel.fromCommand($p1_0,$0));this.$1_29();this.set_$1_21(false);});var $2=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.set_$1_1E(tab.Strings.PdfExportMessageSettingsError);});this.$1_16.sendSessionCommand($0.commandNamespace,$0.commandName,{},$1,$2);},$1_28:function(){this.dom.spinner.show();this.dom.status.show();},$1_29:function(){this.dom.status.hide(250);},$1_2A:function(){var $0=tsConfig.repository_urls;var $1=tsConfig.visible_sheets;this.thumbnails.clear();var $enum1=ss.IEnumerator.getEnumerator(this.$1_15.sheetOptions);while($enum1.moveNext()){var $2=$enum1.current;var $3=$2.sheet;if(ss.isNullOrUndefined($2.baseViewThumbLink)||!($2.baseViewThumbLink).length){if(tab.ExportPdfDialog.canSelectSheet($2)){var $5=$1.indexOf($3);if($5>=0){var $6=$0[$5];$2.baseViewThumbLink=this.$1_16.formatThumbnailReference($6);}}}var $4=new tab.SheetThumbnailTemplate($(tab.SheetThumbnailTemplate.template));$4.label.text($3);if(tab.ExportPdfDialog.canSelectSheet($2)){$4.icon.attr('style',String.format('background: url({0}) 0 0;',$2.baseViewThumbLink));}else{$4.domRoot.addClass('hidden');$4.icon.addClass('tab-pdfdlg-worksheet-icon');}this.dom.thumbList.append($4.domRoot);if($3===this.$1_15.currentSheet){this.$1_18=$4;var $7=$2.exportLayoutOptions;this.set_$1_1D($7.pageSizeOption);this.set_$1_1A($7.pageOrientationOption);this.updateScalingSelectFromSheet($2);this.set_$1_1B($7.imageHeight);this.set_$1_1C($7.imageWidth);}$4.domRoot.data('PDFSheet',$2);this.thumbnails.add($4);}},$1_2B:function(){var $0=this.dom.scalingSelector;if($0.length>0){$0.empty();this.appendEnumToSelect(tab.Strings.PdfExportPageScaleAuto,'auto',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(25),'pct25',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(50),'pct50',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(60),'pct60',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(75),'pct75',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(80),'pct80',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(90),'pct90',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(100),'pct100',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(200),'pct200',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageScalePercent(400),'pct400',$0);this.appendOptionToSelect(tab.Strings.PdfExportFitOneHigh,'fit0x1',$0);this.appendOptionToSelect(tab.Strings.PdfExportFitTwoHigh,'fit0x2',$0);this.appendOptionToSelect(tab.Strings.PdfExportFitOneWide,'fit1x0',$0);this.appendOptionToSelect(tab.Strings.PdfExportFitTwoWide,'fit2x0',$0);}},$1_2C:function(){var $0=this.dom.sizeSelector;if($0.length>0){$0.empty();this.appendEnumToSelect(tab.Strings.PdfExportPageSizeLetter,'letter',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeLegal,'legal',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeNote,'note',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeFolio,'folio',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeTabloid,'tabloid',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeLedger,'ledger',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeStatement,'statement',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeExecutive,'executive',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeA3,'a3',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeA4,'a4',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeA5,'a5',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeB4,'b4',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeB5,'b5',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeQuarto,'quarto',$0);this.appendEnumToSelect(tab.Strings.PdfExportPageSizeUnspecified,'unspecified',$0);}},$1_2D:function($p0){this.$1_2F();switch($p0){case 'dashboard':case 'this-sheet':this.setSingleSheetSelected();break;case 'all':this.$1_30();this.showThumbList();break;case 'all-dashboard':this.$1_31();this.showThumbList();break;}this.setEnabledStatesForSelectedSheets();},$1_2E:function($p0){var $0=($p0)?'dashboard':'worksheet';this.get_body().find('.tab-pdfdlg-'+$0+'-content-mode').show().css('visibility','visible').siblings().hide();},$1_2F:function(){var $enum1=ss.IEnumerator.getEnumerator(this.thumbnails);while($enum1.moveNext()){var $0=$enum1.current;$0.selectAndShow(false);}},$1_30:function(){var $enum1=ss.IEnumerator.getEnumerator(this.thumbnails);while($enum1.moveNext()){var $0=$enum1.current;$0.selectAndShow(tab.ExportPdfDialog.canSelectSheet($0.get_presModel()));}},$1_31:function(){var $0=this.get_$1_20().namesOfSubsheets;var $enum1=ss.IEnumerator.getEnumerator(this.thumbnails);while($enum1.moveNext()){var $1=$enum1.current;var $2=$0.contains($1.get_presModel().sheet);$1.selectAndShow($2);}}}
tab.SheetThumbnailTemplate=function(root){tab.SheetThumbnailTemplate.initializeBase(this,[root]);this.button=this.getElementBySelector('.tab-pdfdlg-thumbnail-button');this.icon=this.getElementBySelector('.tab-pdfdlg-button-icon');this.label=this.getElementBySelector('.tab-pdfdlg-note');this.initEventHandlers();}
tab.SheetThumbnailTemplate.prototype={button:null,icon:null,label:null,get_presModel:function(){return this.domRoot.data('PDFSheet');},set_presModel:function(value){this.domRoot.data('PDFSheet',value);return value;},get_isSelected:function(){return this.button.hasClass('selected');},set_isSelected:function(value){if(value){this.button.addClass('selected');}else{this.button.removeClass('selected');}this.get_presModel().isSelected=value;return value;},get_isVisible:function(){return this.domRoot.is(':visible');},set_isVisible:function(value){if(value){this.domRoot.show();}else{this.domRoot.hide();}return value;},selectAndShow:function(toShow){this.set_isSelected(toShow);this.set_isVisible(toShow);},initEventHandlers:function(){tab.ClickHandler.targetAndClick(this.button,ss.Delegate.create(this,this.handleSheetToggled));},handleSheetToggled:function(e){if(!this.button.is(':disabled')){this.set_isSelected(!this.get_isSelected());}}}
tab.ExportPdfDialogTemplate=function(root){tab.ExportPdfDialogTemplate.initializeBase(this,[root]);this.orientationBtns=this.getElementsBySelector("button[name='orientation']");this.scalingSelector=this.getElementBySelector('#pdfdlgScaling');this.sizeSelector=this.getElementBySelector('#pdfdlgPageSize');this.imageHeightBtn=this.getElementBySelector("[name='imageHeight']");this.imageWidthBtn=this.getElementBySelector("[name='imageWidth']");this.sizeControl=this.getElementBySelector("[name='pageSize']");this.status=this.getElementBySelector('.tab-pdfdlg-status');this.statusMsg=this.getElementBySelector('.tab-dialog-status-msg');this.spinner=this.getElementBySelector('.tab-pdfdlg-spinner');this.thumbListWrapper=this.getElementBySelector('.tab-pdfdlg-sheets-container');this.thumbList=this.getElementBySelector('.tab-pdfdlg-sheet-list');}
tab.ExportPdfDialogTemplate.prototype={orientationBtns:null,scalingSelector:null,sizeSelector:null,imageHeightBtn:null,imageWidthBtn:null,sizeControl:null,spinner:null,status:null,statusMsg:null,thumbListWrapper:null,thumbList:null,thumbs:function(){return this.thumbList.find('li');}}
tab.DragDropManager=function(){}
tab.DragDropManager.add_dragStarted=function(value){tab.DragDropManager.$E=ss.Delegate.combine(tab.DragDropManager.$E,value);}
tab.DragDropManager.remove_dragStarted=function(value){tab.DragDropManager.$E=ss.Delegate.remove(tab.DragDropManager.$E,value);}
tab.DragDropManager.add_dragEnded=function(value){tab.DragDropManager.$F=ss.Delegate.combine(tab.DragDropManager.$F,value);}
tab.DragDropManager.remove_dragEnded=function(value){tab.DragDropManager.$F=ss.Delegate.remove(tab.DragDropManager.$F,value);}
tab.DragDropManager.get_isDragging=function(){return ss.isValue(tab.DragDropManager.$6);}
tab.DragDropManager.get_$10=function(){return tab.Logger.lazyGetLogger(tab.DragDropManager);}
tab.DragDropManager.attachDropTarget=function(targetElement,dropTarget){targetElement.addClass('tabDropTarget').data('tabDropTarget',dropTarget);}
tab.DragDropManager.attachDragSource=function(sourceElement,dragSource){sourceElement.addClass('tabDragSource').data('tabDragSource',dragSource);}
tab.DragDropManager.makeDraggable=function(dragElement,callbackResponder){dragElement.addClass('tabDragSource').data('tabDragSource',callbackResponder);}
tab.DragDropManager.startDrag=function(draggedObject){if(ss.isNullOrUndefined(draggedObject)||ss.isNullOrUndefined(draggedObject.get_draggedObject())){return;}tab.DragDropManager.cancelDrag();tab.DragDropManager.$6=draggedObject;tab.DragDropManager.$12(tab.DragDropManager.$6.get_dragAvatar());if(ss.isValue(tab.DragDropManager.$E)){tab.DragDropManager.$E(tab.DragDropManager.$6);}}
tab.DragDropManager.cancelDrag=function(){if(!ss.isValue(tab.DragDropManager.$6)){return;}tab.DragDropManager.$11(null,false,true,false);}
tab.DragDropManager.drop=function(target,isCopyDrop,isShiftDrop){var $0;tab.DragDropManager.$6.isCopyDrag=ss.isValue(isCopyDrop)&&isCopyDrop;tab.DragDropManager.$6.isShiftDrag=ss.isValue(isShiftDrop)&&isShiftDrop;$0=ss.isNullOrUndefined(target)||target.acceptDrop(tab.DragDropManager.$6);tab.DragDropManager.$11(target,$0,false,isCopyDrop);}
tab.DragDropManager.firstTouch=function(e){var $0=$(e.target).closest('.tabDragSource');if(ss.isNullOrUndefined($0)||!$0.length){tab.DragDropManager.$9=null;return;}tab.DragDropManager.$9=$0.data('tabDragSource');}
tab.DragDropManager.dragEnd=function(e){if(ss.isNullOrUndefined(tab.DragDropManager.$6)){return;}switch(tab.DragDropManager.$6.get_dragType()){case 'dragdrop':tab.DragDropManager.drop(tab.DragDropManager.$7,e.ctrlKey,e.shiftKey);break;case 'dragresize':tab.DragDropManager.$6.endDragAt(e);tab.DragDropManager.$11(null,true,false,false);break;}}
tab.DragDropManager.dragMove=function(e){if(ss.isNullOrUndefined(tab.DragDropManager.$6)){return;}e.preventDefault();e.stopPropagation();tab.DragDropManager.$A=e;var $0=Date.get_now().getTime();if(($0-tab.DragDropManager.$B)>75){if(ss.isValue(tab.DragDropManager.$C)){tab.WindowHelper.cancelAnimationFrame(tab.DragDropManager.$C);}tab.DragDropManager.$13();}switch(tab.DragDropManager.$6.get_dragType()){case 'dragdrop':var $1=tab.DragDropManager.$15(e);if(ss.isValue(tab.DragDropManager.$7)){if(tab.DragDropManager.$7!==$1){tab.DragDropManager.$7.dragExit(tab.DragDropManager.$6);}else{return;}}tab.DragDropManager.$7=$1;if(ss.isNullOrUndefined(tab.DragDropManager.$7)){return;}var $2=tab.DragDropManager.$7.dragOver(tab.DragDropManager.$6);while(ss.isValue($2)&&$2!==tab.DragDropManager.$7){tab.DragDropManager.$7=$2;$2=tab.DragDropManager.$7.dragOver(tab.DragDropManager.$6);}tab.DragDropManager.$7=$2;break;case 'dragresize':tab.DragDropManager.$6.moveTo(e);break;default:break;}}
tab.DragDropManager.dragStart=function(e){if(tab.DragDropManager.get_isDragging()){return;}var $0=tab.DragDropManager.$9;if(ss.isNullOrUndefined($0)){var $2=$(e.target).closest('tabDragSource');$0=$2.data('tabDragSource');}if(ss.isNullOrUndefined($0)){return;}var $1=$0.startDrag(e);if(ss.isNullOrUndefined($1)){return;}tab.DragDropManager.startDrag($1);tab.DragDropManager.$A=e;tab.DragDropManager.$13();tab.DragDropManager.$C=tab.WindowHelper.requestAnimationFrame(tab.DragDropManager.$13);}
tab.DragDropManager.$11=function($p0,$p1,$p2,$p3){if(ss.isValue(tab.DragDropManager.$F)){tab.DragDropManager.$F(tab.$create_DropResult(tab.DragDropManager.$6,$p0,$p1,$p2,$p3));}if(ss.isValue(tab.DragDropManager.$C)){tab.WindowHelper.cancelAnimationFrame(tab.DragDropManager.$C);tab.DragDropManager.$C=null;}tab.DragDropManager.$12(null);tab.DragDropManager.$6=null;tab.DragDropManager.$7=null;}
tab.DragDropManager.$12=function($p0){if(ss.isValue(tab.DragDropManager.$8)){tab.DragDropManager.$8.get_element().detach();var $0=tab.DragDropManager.$8;$0.dispose();tab.DragDropManager.$8=null;}tab.DragDropManager.$8=$p0;if(ss.isValue(tab.DragDropManager.$8)){tab.DragDropManager.$8.get_element().addClass('dragAvatar').css('position','absolute').css('pointer-events','none').appendTo($('body'));}}
tab.DragDropManager.$13=function(){if(ss.isNullOrUndefined(tab.DragDropManager.$8)){return;}tab.DomUtil.setElementPosition(tab.DragDropManager.$8.get_element(),tab.DragDropManager.$A.pageX,tab.DragDropManager.$A.pageY);tab.DragDropManager.$B=Date.get_now().getTime();tab.DragDropManager.$C=tab.WindowHelper.requestAnimationFrame(tab.DragDropManager.$13);}
tab.DragDropManager.$14=function($p0){if(ss.isValue(tab.DragDropManager.$8)&&!tab.BrowserSupport.get_pointerEvents()){tab.DragDropManager.$8.get_element().hide();}var $0=$p0.clientX;var $1=$p0.clientY;if(tab.BrowserSupport.get_useAlternateHitStrategy()){if(ss.isValue($p0.touches)&&$p0.touches.length>0&&ss.isValue($p0.touches[0].screenX)){$0=$p0.touches[0].screenX;$1=$p0.touches[0].screenY;}else{$0=$p0.originalEvent.screenX;$1=$p0.originalEvent.screenY;}}var $2=$(document.elementFromPoint($0,$1));if(ss.isValue(tab.DragDropManager.$8)&&!tab.BrowserSupport.get_pointerEvents()){tab.DragDropManager.$8.get_element().show();}return $2;}
tab.DragDropManager.$15=function($p0){var $0=tab.DragDropManager.$14($p0).closest('.tabDropTarget');var $1=$0.data('tabDropTarget');return $1;}
tab.DragInstance=function(dragged,dragAvatar){this.$1=dragged;this.$0=dragAvatar;this.isCopyDrag=false;this.isShiftDrag=false;}
tab.DragInstance.prototype={isCopyDrag:false,isShiftDrag:false,$0:null,$1:null,get_draggedObject:function(){return this.$1;},set_draggedObject:function(value){this.$1=value;return value;},get_dragAvatar:function(){return this.$0;},get_dragType:function(){return 'unknown';},moveTo:function(e){},endDragAt:function(e){}}
tab.ClickHandler=function(){this.$6='clickHandler'+(tab.ClickHandler.$2++);}
tab.ClickHandler.targetAndClick=function(o,onClick){return new tab.ClickHandler().setTarget(o).onClick(onClick);}
tab.ClickHandler.targetAndRightClick=function(o,onRightClick){return new tab.ClickHandler().setTarget(o).onRightClick(onRightClick);}
tab.ClickHandler.targetAndPress=function(o,onClick){return new tab.ClickHandler().setTarget(o).onPress(onClick);}
tab.ClickHandler.prototype={$3:0,$4:0,$5:null,$7:null,$8:null,add_$9:function($p0){this.$A=ss.Delegate.combine(this.$A,$p0);},remove_$9:function($p0){this.$A=ss.Delegate.remove(this.$A,$p0);},$A:null,add_$B:function($p0){this.$C=ss.Delegate.combine(this.$C,$p0);},remove_$B:function($p0){this.$C=ss.Delegate.remove(this.$C,$p0);},$C:null,add_$D:function($p0){this.$E=ss.Delegate.combine(this.$E,$p0);},remove_$D:function($p0){this.$E=ss.Delegate.remove(this.$E,$p0);},$E:null,get_target:function(){return this.$5;},dispose:function(){this.$10();if(!ss.isValue(this.$5)){return;}this.$5.unbind('.'+this.$6);this.$5=null;},onPress:function(handler){this.add_$9(handler);return this;},onClick:function(handler){this.add_$B(handler);return this;},onRightClick:function(handler){this.add_$D(handler);return this;},setTarget:function(dom){this.$5=dom;if(tsConfig.is_touch){dom.bind(this.$F('touchstart'),ss.Delegate.create(this,this.$13)).bind(this.$F('click'),ss.Delegate.create(this,this.$17));}else{dom.bind(this.$F('mousedown'),ss.Delegate.create(this,this.$11)).bind(this.$F('click'),ss.Delegate.create(this,this.$17)).bind(this.$F('contextmenu'),ss.Delegate.create(this,this.$17));}return this;},$F:function($p0){return $p0+'.'+this.$6;},$10:function(){if(ss.isValue(this.$5)){this.$5.unbind(this.$F('touchend'));this.$5.unbind(this.$F('touchcancel'));}if(ss.isValue(this.$7)){document.body.removeEventListener('touchmove',this.$7,true);this.$7=null;}if(ss.isValue(this.$8)){window.clearTimeout(this.$8);this.$8=null;}},$11:function($p0){this.$3=$p0.clientX;this.$4=$p0.clientY;this.$14();if(ss.isValue(this.$A)){this.$A($p0);}},$12:function($p0){if($p0 && $p0.originalEvent && $p0.originalEvent.touches && $p0.originalEvent.touches[0]){return $p0.originalEvent.touches[0];}return {};},$13:function($p0){var $0=this.$12($p0);var $1=($0['clientX']||0);var $2=($0['clientY']||0);this.$5.bind(this.$F('touchend'),ss.Delegate.create(this,this.$17));this.$5.bind(this.$F('touchcancel'),ss.Delegate.create(this,this.$16));this.$14();if(tab.BrowserSupport.get_addEventListener()){this.$7=ss.Delegate.create(this,this.$15);document.body.addEventListener('touchmove',this.$7,true);}this.$3=$1;this.$4=$2;if(ss.isValue(this.$A)){this.$A($p0);}},$14:function(){if(ss.isValue(this.$8)){window.clearTimeout(this.$8);}this.$8=window.setTimeout(ss.Delegate.create(this,this.$10),300);},$15:function($p0){var $0=$p0.touches[0].clientX;var $1=$p0.touches[0].clientY;if(Math.abs($0-this.$3)>10||Math.abs($1-this.$4)>10){this.$10();}},$16:function($p0){this.$10();},$17:function($p0){$p0.stopPropagation();this.$10();if($p0.type==='contextmenu'){$p0.preventDefault();if(ss.isValue(this.$E)){this.$E($p0);}}else{if(ss.isValue(this.$C)){this.$C($p0);}if($p0.type==='touchend'){tab.vqlui$8.$2(this.$3,this.$4);}}}}
tab.vqlui$8=function(){}
tab.vqlui$8.$2=function($p0,$p1,$p2){if(!tsConfig.is_touch||!tab.BrowserSupport.get_addEventListener()){return;}if(ss.isNullOrUndefined(tab.vqlui$8.$1)){tab.vqlui$8.$1=[];document.addEventListener('click',tab.vqlui$8.$4,true);}tab.vqlui$8.$1.add(new ss.Tuple($p0,$p1));window.setTimeout(tab.vqlui$8.$3,$p2||600);}
tab.vqlui$8.$3=function(){tab.vqlui$8.$1.removeAt(0);}
tab.vqlui$8.$4=function($p0){var $0=$p0.clientX;var $1=$p0.clientY;var $enum1=ss.IEnumerator.getEnumerator(tab.vqlui$8.$1);while($enum1.moveNext()){var $2=$enum1.current;if(Math.abs($2.first-$0)<25&&Math.abs($2.second-$1)<25){$p0.stopPropagation();$p0.preventDefault();}}}
tab.Discrete=function(config){tab.Discrete.initializeBase(this,[config,'discrete']);}
tab.Discrete.prototype={$5:null,$6:0,$7:0,$8:false,$9:false,$A:false,$B:false,$C:0,$D:null,$E:null,$F:null,start:function(e){var $0=e.touches[0];if(e.touches.length!==this.numTouches){this.reset();return;}var $1=this.$1A(e);var $2=ss.Delegate.create(this,function($p1_0){
this.cancelCallbackForOtherAgents($p1_0);});dojo.publish('globalFirstTouch',[e,$2]);if(this.$9){this.reset();if(!this.$A){e.preventDefault();}this.$A=false;return;}this.$1('firstTouch',e,$1);this.$6=$0.pageX;this.$7=$0.pageY;this.$8=true;this.$17(this.$D);this.$D=null;if(ss.isValue(this.$5)){this.$17(this.$E);this.$E=null;}else{this.$C=new Date().getTime();this.$F=window.setTimeout(ss.Delegate.create(this,function(){
this.$14(e,$1);}),500);this.$D=window.setTimeout(ss.Delegate.create(this,function(){
this.$13(e,$1);}),750);}},move:function(e){if(this.$19(e)){this.reset();}},end:function(e){var $0=this.$1A(e);this.$15();if(this.$8){if(ss.isValue(this.$5)&&this.$5){this.$12(e,$0);}else{this.$16(e,$0);}}if(!e.touches.length){this.$1('lastTouch',e,$0);}},cancel:function(){this.reset();},cancelCallbackForOtherAgents:function(localAllowDefault){this.$9=true;this.$A=localAllowDefault;},reset:function(){this.$15();this.$8=false;this.$9=false;this.$5=null;this.$B=false;this.$17(this.$F);this.$F=null;this.$17(this.$D);this.$D=null;if(ss.isValue(this.$E)){this.$1('cancelPotentialTap',{},null);}this.$17(this.$E);this.$E=null;},$10:function($p0,$p1,$p2,$p3){this.$1($p0,$p1,$p2);if(ss.isValue($p3)&&!!$p3['reset']){this.reset();}},$11:function($p0,$p1){this.$E=null;this.$10('tap',$p0,$p1,{reset:true});},$12:function($p0,$p1){this.$10('doubleTap',$p0,$p1,{reset:true});},$13:function($p0,$p1){this.$B=false;var $0=ss.Delegate.create(this,function(){
this.cancelCallbackForOtherAgents(false);});dojo.publish('globalPress',[$p0,$0]);if(this.$9){this.reset();$p0.preventDefault();return;}this.$10('press',$p0,$p1,{reset:true});},$14:function($p0,$p1){this.$B=true;this.$10('potentialPress',$p0,$p1);},$15:function(){this.$17(this.$F);this.$F=null;this.$17(this.$D);this.$D=null;if(this.$B){this.$10('cancelPotentialPress',{},null);}},$16:function($p0,$p1){this.$5=true;var $0=ss.Delegate.create(this,function(){
this.cancelCallbackForOtherAgents(false);});dojo.publish('globalPotentialTap',[$p0,$0]);if(this.$9){this.reset();$p0.preventDefault();return;}window.setTimeout(ss.Delegate.create(this,function(){
this.reset();}),390-this.$18());this.$1('potentialTap',$p0,$p1);this.$1('tap',$p0,$p1);},$17:function($p0){if(ss.isValue($p0)){window.clearTimeout($p0);}},$18:function(){var $0=new Date().getTime()-this.$C;return $0;},$19:function($p0){var $0=$p0.touches[0];return Math.abs($0.pageX-this.$6)>this.slop||Math.abs($0.pageY-this.$7)>this.slop;},$1A:function($p0){var $0=tab.$create_GestureEventInfo();$0.pageX=$p0.changedTouches[0].pageX;$0.pageY=$p0.changedTouches[0].pageY;$0.clientX=$p0.changedTouches[0].clientX;$0.clientY=$p0.changedTouches[0].clientY;return $0;}}
tab.Drag=function(config){tab.Drag.initializeBase(this,[config,'drag',5]);}
tab.Drag.prototype={$2:false,$3:null,$4:null,$5:false,start:function(e){var $0=e.touches[0];if(e.touches.length!==this.numTouches){if(this.$2){this.$1('dragEnd',e,this.$4);}this.$2=false;this.$5=true;return;}if(ss.isValue(this.$3)&&!tsConfig.is_touch){this.end(e);}this.$5=false;this.$3=tab.$create_GestureEventInfo();this.$3.pageX=$0.pageX;this.$3.pageY=$0.pageY;this.$4=this.$3;},move:function(e){if(this.$5){return;}this.$4=this.$6(e);if(this.$2){this.$1('dragMove',e,this.$4);}else if(this.$7(e)){this.$2=true;this.$1('dragStart',e,this.$4);this.$1('dragMove',e,this.$4);}},end:function(e){var $0;if(!this.$2){if(e.touches.length!==this.numTouches||ss.isNullOrUndefined(e.touches[0].identifier)){return;}this.$3=tab.$create_GestureEventInfo();this.$3.pageX=e.touches[0].pageX;this.$3.pageY=e.touches[0].pageY;this.$4=this.$3;$0=this.$6(e);this.$5=false;this.$2=true;this.$1('dragStart',e,$0);return;}$0=this.$6(e);this.$2=false;this.$3=null;this.$1('dragEnd',e,$0);},cancel:function(){this.$5=true;},$6:function($p0){var $0=$p0.changedTouches[0];if(ss.isNullOrUndefined(this.$3)){this.$3=tab.$create_GestureEventInfo();this.$3.pageX=$p0.pageX;this.$3.pageY=$p0.pageY;}var $1=tab.$create_GestureEventInfo();$1.clientX=$0.clientX;$1.clientY=$0.clientY;$1.pageX=$0.pageX;$1.pageY=$0.pageY;$1.startX=this.$3.pageX;$1.startY=this.$3.pageY;$1.deltaX=$0.pageX-this.$3.pageX;$1.deltaY=$0.pageY-this.$3.pageY;$1.deltaXSinceLast=$0.pageX-this.$4.pageX;$1.deltaYSinceLast=$0.pageY-this.$4.pageY;$1.scale=1;return $1;},$7:function($p0){var $0=$p0.touches[0];if(ss.isNullOrUndefined(this.$3)){return false;}return Math.abs($0.pageX-this.$3.pageX)>this.slop||Math.abs($0.pageY-this.$3.pageY)>this.slop;}}
tab.Gesture=function(config,type,slop,numTouches){if(ss.isValue(type)){this.type=type;}if(ss.isValue(slop)){this.slop=slop;}if(ss.isValue(numTouches)){this.numTouches=numTouches;}this.$0=tab.$create_EventHandleSpec();this.update(config);}
tab.Gesture.prototype={$0:null,slop:7,numTouches:1,type:'gesture',update:function(config){if(ss.isValue(config)){$.extend(this.$0,config);}},start:function(e){},move:function(e){},end:function(e){},cancel:function(){},$1:function($p0,$p1,$p2){if(tab.TableauEventHandler.isHandling(this.$0,$p0)){var $0=$p1;$.extend($0,$p2);$0.gestureName=this.type;$0.$0=$p0;var $1=tab.TableauEventHandler.$5(this.$0,$p0);$1($0);}}}
tab.Hover=function(config){tab.Hover.initializeBase(this,[config,'hover',0]);this.$7=(ss.isValue(config.hoverDelay))?config.hoverDelay:150;}
tab.Hover.prototype={$2:0,$3:0,$4:true,$5:false,$6:null,$7:0,start:function(e){this.$4=false;this.cancel();},move:function(e){var $0=e.touches[0];if(!this.$4){return;}if(!this.$9(e)){return;}var $1=this.$A(e);if(ss.isValue(this.$6)){this.cancel();}this.$1('moving',e,$1);this.$2=$0.pageX;this.$3=$0.pageY;this.$6=window.setTimeout(ss.Delegate.create(this,function(){
if(!this.$5){this.$1('hover',e,$1);}this.$8();}),this.$7);},end:function(e){if(!e.touches.length){this.$4=true;}},out:function(e){if(!tab.DomUtil.isAncestorOf(this.$0.domElem,e.originalEvent.relatedTarget)){this.cancel();this.$1('mouseleave',e,this.$A(e));}},suppressHover:function(){if(!this.$5){}this.$5=true;},unsuppressHover:function(){if(this.$5){}this.$5=false;this.$4=true;this.cancel();},cancel:function(){this.$8();this.$2=0;this.$3=0;},$8:function(){if(ss.isValue(this.$6)){window.clearTimeout(this.$6);this.$6=null;}},$9:function($p0){var $0=$p0.touches[0];var $1=Math.abs($0.pageX-this.$2);var $2=Math.abs($0.pageY-this.$3);return ($1+$2)>this.slop;},$A:function($p0){var $0=tab.$create_GestureEventInfo();$0.pageX=$p0.changedTouches[0].pageX;$0.pageY=$p0.changedTouches[0].pageY;$0.clientX=$p0.changedTouches[0].clientX;$0.clientY=$p0.changedTouches[0].clientY;return $0;}}
tab.NormalizedEvent=function(evt,listeningNode){this.originalEvent=evt;this.type=evt.type;this.timeStamp=evt.timeStamp;this.keyCode=evt.keyCode;this.ctrlKey=evt.ctrlKey;this.altKey=evt.altKey;this.metaKey=evt.metaKey;this.shiftKey=evt.shiftKey;this.charOrCode=evt.charOrCode;this.clientX=this.clientX;this.clientY=this.clientY;if(ss.isValue(evt.touches)){this.touches=evt.touches;this.targetTouches=evt.targetTouches;this.changedTouches=evt.changedTouches;this.target=(evt.target.nodeType===3)?evt.target.parentNode:evt.target;this.currentTarget=listeningNode;}else{this.targetTouches=evt.type === 'mouseup' ? [] : [evt];this.touches=this.targetTouches;this.changedTouches=[evt];this.currentTarget=evt.currentTarget;this.target=evt.target;}var $0=this.touches.length;this.touchesById=new Array($0);while($0>0){$0-=1;var $1=(this.touches[$0].identifier||0);this.touchesById[$1]=this.touches[$0];}$0=this.changedTouches.length;while($0>0){$0-=1;var $2=(this.changedTouches[$0].identifier||0);this.touchesById[$2]=this.changedTouches[$0];}}
tab.NormalizedEvent.prototype={originalEvent:null,type:null,target:null,currentTarget:null,timeStamp:null,keyCode:0,ctrlKey:false,altKey:false,metaKey:false,shiftKey:false,clientX:0,clientY:0,pageX:0,pageY:0,charOrCode:null,touches:null,targetTouches:null,changedTouches:null,touchesById:null,gestureName:null,$0:null,get_gestureInfo:function(){return this;},preventDefault:function(){if(ss.isValue(this.originalEvent.preventDefault)){this.originalEvent.preventDefault();}},stopPropagation:function(){if(ss.isValue(this.originalEvent.stopPropagation)){this.originalEvent.stopPropagation();}}}
tab.Pinch=function(config){tab.Pinch.initializeBase(this,[config,'pinch',10,2]);}
tab.Pinch.prototype={$2:false,$3:null,$4:null,$5:null,$6:null,start:function(e){if(e.touches.length<this.numTouches){return;}if(!this.$2){this.$3=e.touches[0];this.$4=e.touches[1];this.$5=this.$7();this.$6=this.$5;var $0=this.$8();this.$1('pinchStart',e,$0);this.$2=true;}},move:function(e){if(this.$2){if(e.touches.length<2){this.end(e);return;}this.$3=e.touches[0];this.$4=e.touches[1];this.$6=this.$8();this.$1('pinchMove',e,this.$6);}},end:function(e){var $0;if(e.touches.length>=this.numTouches){return;}if(this.$2){this.$2=false;$0=this.$8();this.$1('pinchEnd',e,$0);}},$7:function(){var $0=this.$3;var $1=this.$4;var $2=$1.pageX-$0.pageX;var $3=$1.pageY-$0.pageY;var $4=Math.sqrt(($2*$2)+($3*$3));var $5=($2/2)+$0.pageX;var $6=($3/2)+$0.pageY;var $7=tab.$create_GestureEventInfo();$7.pageX=$5;$7.pageY=$6;$7.distance=$4;return $7;},$8:function(){var $0=this.$3;var $1=this.$4;var $2=$1.pageX-$0.pageX;var $3=$1.pageY-$0.pageY;var $4=Math.sqrt(($2*$2)+($3*$3));var $5=($2/2)+$0.pageX;var $6=($3/2)+$0.pageY;var $7=tab.$create_GestureEventInfo();$7.pageX=$5;$7.pageY=$6;$7.scale=$4/this.$5.distance;$7.deltaX=$5-this.$5.pageX;$7.deltaY=$6-this.$5.pageY;$7.startX=this.$5.pageX;$7.startY=this.$5.pageY;$7.deltaXSinceLast=$5-this.$6.pageX;$7.deltaYSinceLast=$6-this.$5.pageY;return $7;}}
tab.TableauEventHandler=function(domElement,config){this.config=(config||tab.$create_EventHandleSpec());this.config.domElem=domElement;this.makeRecognizers(this.config);this.configureDomElem(domElement);this.$A();this.setupEventNames();this.$1=new ss.StringBuilder().append(this.startEvent).append(' ').append(this.moveEvent).append(' ').append(this.endEvent);this.additionalEvents();this.$7(domElement);}
tab.TableauEventHandler.get_$4=function(){return tab.TableauEventHandler.$0;}
tab.TableauEventHandler.set_$4=function($p0){if(tab.TableauEventHandler.$0!==$p0){tab.TableauEventHandler.$0=$p0;}return $p0;}
tab.TableauEventHandler.setHandler=function(spec,evt,fn){spec[evt]=fn;}
tab.TableauEventHandler.isHandling=function(spec,evt){var $0=spec;return ss.isValue($0[evt]);}
tab.TableauEventHandler.$5=function($p0,$p1){return $p0[$p1];}
tab.TableauEventHandler.prototype={recognizers:null,isTouch:false,config:null,mousedown:false,lastMouseButtonPressed:null,startEvent:null,moveEvent:null,endEvent:null,outEvent:null,scrollEvent:null,cancelEvent:null,$1:null,$2:null,$3:null,get_usingHover:function(){return false;},update:function(spec){$.extend(this.config,spec);var $dict1=this.recognizers;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.value;$1.update(this.config);}this.$A();},destroy:function(){this.dispose();},dispose:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$3);while($enum1.moveNext()){var $0=$enum1.current;dojo.disconnect($0);}if(ss.isValue(this['debugger'])){this['debugger'].destroy();}},setupEventNames:function(){},makeRecognizers:function(spec){this.recognizers={};this.recognizers.drag=new tab.Drag(spec);this.recognizers.discrete=new tab.Discrete(spec);},additionalEvents:function(){},configureDomElem:function(domElem){},addEvent:function(eventName){this.$1.append(' ').append(eventName);},$6:function($p0){var $0=new tab.NormalizedEvent($p0,this.config.domElem);if(this.mousedown&&tab.TableauEventHandler.get_$4()!=='left'){this.mousedown=false;}if($0.touches.length>1&&!this.$9($0)){var $dict1=this.recognizers;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $2=$1.value;$2.cancel();}return;}if(!this.isTouch){var $3=(ss.isValue($0.target))?$0.target.tagName.toLowerCase():'';if($3!=='textarea'&&$3!=='input'&&$3!=='select'){$0.preventDefault();}}if($0.type===this.scrollEvent){this.mousedown=false;}else if($0.type===this.outEvent){if(!this.isTouch&&!this.mousedown&&this.get_usingHover()){this.recognizers.hover.out($0);}}else if($0.type===this.startEvent){this.lastMouseButtonPressed=tab.MouseEventUtil.getMouseButtonEnum($p0);if(!this.isTouch&&this.lastMouseButtonPressed!=='left'){return;}this.mousedown=true;if(!this.isTouch){tab.TableauEventHandler.set_$4(tab.MouseEventUtil.getMouseButtonEnum($p0));}if(this.get_usingHover()){this.recognizers.hover.start($0);}this.recognizers.discrete.start($0);this.recognizers.drag.start($0);if(ss.isValue(this.recognizers.pinch)){this.recognizers.pinch.start($0);}}else if($0.type===this.moveEvent){if(!this.mousedown&&this.get_usingHover()){this.recognizers.hover.move($0);}if(!this.isTouch&&this.lastMouseButtonPressed!=='left'){return;}if(!this.isTouch&&!this.mousedown){return;}this.recognizers.discrete.move($0);this.recognizers.drag.move($0);if(ss.isValue(this.recognizers.pinch)){this.recognizers.pinch.move($0);}}else{tab.TableauEventHandler.set_$4('none');this.mousedown=false;if(this.get_usingHover()){this.recognizers.hover.end($0);}if(ss.isValue(this.recognizers.pinch)){this.recognizers.pinch.end($0);}this.recognizers.drag.end($0);this.recognizers.discrete.end($0);}},$7:function($p0){var $0=ss.Delegate.create(this,function($p1_0){
this.$6($p1_0);});this.$2=this.$1.toString();var $1=this.$2.split(' ');this.$3=new Array($1.length);var $2=0;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $3=$enum1.current;this.$3[$2]=dojo.connect($p0, $3, this, $0);$2++;}},$8:function(){return tab.TableauEventHandler.isHandling(this.config,'pressDragStart')||tab.TableauEventHandler.isHandling(this.config,'pressDragMove')||tab.TableauEventHandler.isHandling(this.config,'pressDragEnd')||tab.TableauEventHandler.isHandling(this.config,'doublePressDragStart')||tab.TableauEventHandler.isHandling(this.config,'doublePressDragMove')||tab.TableauEventHandler.isHandling(this.config,'doublePressDragEnd');},$9:function($p0){var $0=$p0.touches[0].target;var $1=$p0.touches[1].target;var $2=document.body;var $3=$p0.currentTarget;var $4=false;while(!$4&&ss.isValue($0)&&ss.isValue($1)){$4=true;if($0!==$3&&$0!==$2){$0=$0.parentNode;$4=false;}if($1!==$3&&$1!==$2){$1=$1.parentNode;$4=false;}if($0===$1){$4=true;}}return $0===$1;},$A:function(){if(!this.$8()){return;}var $0=ss.Delegate.create(this,function($p1_0){
if(tab.TableauEventHandler.isHandling(this.config,'press')){var $1_1=tab.TableauEventHandler.$5(this.config,'press');$1_1($p1_0);}var $1_0=tab.$create_EventHandleSpec();tab.TableauEventHandler.setHandler($1_0,'dragStart',tab.TableauEventHandler.$5(this.config,'pressDragStart'));tab.TableauEventHandler.setHandler($1_0,'dragMove',tab.TableauEventHandler.$5(this.config,'pressDragMove'));tab.TableauEventHandler.setHandler($1_0,'dragEnd',tab.TableauEventHandler.$5(this.config,'pressDragEnd'));tab.TableauEventHandler.setHandler($1_0,'pinchStart',tab.TableauEventHandler.$5(this.config,'doublePressDragStart'));tab.TableauEventHandler.setHandler($1_0,'pinchMove',tab.TableauEventHandler.$5(this.config,'doublePressDragMove'));tab.TableauEventHandler.setHandler($1_0,'pinchEnd',tab.TableauEventHandler.$5(this.config,'doublePressDragEnd'));this.recognizers.drag.update($1_0);if(ss.isValue(this.recognizers.pinch)){this.recognizers.pinch.update($1_0);}});var $1=ss.Delegate.create(this,function($p1_0){
if(tab.TableauEventHandler.isHandling(this.config,'lastTouch')){var $1_0=tab.TableauEventHandler.$5(this.config,'lastTouch');$1_0($p1_0);}this.recognizers.drag.update(this.config);if(ss.isValue(this.recognizers.pinch)){this.recognizers.pinch.update(this.config);}});var $2=tab.$create_EventHandleSpec();tab.TableauEventHandler.setHandler($2,'press',$0);tab.TableauEventHandler.setHandler($2,'lastTouch',$1);this.recognizers.discrete.update($2);}}
tab.MarksRenderer=function(canvas,context){tab.MarksRenderer.initializeBase(this,[canvas,context]);}
tab.MarksRenderer.$B=function($p0,$p1){return tab.CanvasRenderer.bBoxMultipolygon($p0.scaledMarks,$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('size',$p1),7,$p0.getMarkProperty('geometry',$p1));}
tab.MarksRenderer.$C=function($p0,$p1,$p2,$p3){var $0;var $1=$p0.getMarkProperty('x',$p3);var $2=$p0.getMarkProperty('y',$p3);var $3=$p0.getMarkProperty('geometry',$p3);if(ss.isNull($3)){$0=tab.$create_PointF($p1,$p2);var $4=tab.$create_PointF($1,$2);return tab.GeometryUtil.isPointInCircle($0,$4,7);}if(!$p0.scaledMarks){var $5=$p0.getMarkProperty('size',$p3);if(!!$5){$p1=($p1-$1)/$5;$p2=($p2-$2)/$5;}}$0=tab.$create_PointF($p1,$p2);return tab.GeometryUtil.isPointInMultipolygon($3,$0);}
tab.MarksRenderer.$D=function($p0,$p1,$p2){var $0=$p0.getMarkProperty('geometry',$p2);if(ss.isNull($0)){return true;}return tab.GeometryUtil.mulipolygonIntersectsRect($0,$p1);}
tab.MarksRenderer.$E=function($p0,$p1){var $0=$p0.getLeft($p1);var $1=$p0.getRight($p1);var $2=tab.$create_RectXY(0,0,0,0);if($0!==-1){var $3=tab.RectXYUtil.rectXYFromCorners(tab.$create_PointF($p0.getMarkProperty('x1',$p1),$p0.getMarkProperty('y1',$p1)),tab.$create_PointF(($p0.getMarkProperty('x_next',$0)+$p0.getMarkProperty('x_prev',$p1))/2,($p0.getMarkProperty('y_next',$0)+$p0.getMarkProperty('y_prev',$p1))/2));$2=tab.RectXYUtil.union($2,$3);var $4=tab.RectXYUtil.rectXYFromCorners(tab.$create_PointF(($p0.getMarkProperty('x1',$0)+$p0.getMarkProperty('x1',$p1))/2,($p0.getMarkProperty('y1',$0)+$p0.getMarkProperty('y1',$p1))/2),tab.$create_PointF($p0.getMarkProperty('x_prev',$p1),$p0.getMarkProperty('y_prev',$p1)));$2=tab.RectXYUtil.union($2,$4);}if($1!==-1){var $5=tab.RectXYUtil.rectXYFromCorners(tab.$create_PointF($p0.getMarkProperty('x1',$p1),$p0.getMarkProperty('y1',$p1)),tab.$create_PointF(($p0.getMarkProperty('x_prev',$1)+$p0.getMarkProperty('x_next',$p1))/2,($p0.getMarkProperty('y_prev',$1)+$p0.getMarkProperty('y_next',$p1))/2));$2=tab.RectXYUtil.union($2,$5);var $6=tab.RectXYUtil.rectXYFromCorners(tab.$create_PointF(($p0.getMarkProperty('x1',$1)+$p0.getMarkProperty('x1',$p1))/2,($p0.getMarkProperty('y1',$1)+$p0.getMarkProperty('y1',$p1))/2),tab.$create_PointF($p0.getMarkProperty('x_next',$p1),$p0.getMarkProperty('y_next',$p1)));$2=tab.RectXYUtil.union($2,$6);}if($0===-1&&$1===-1){var $7=tab.RectXYUtil.rectXYFromCorners(tab.$create_PointF($p0.getMarkProperty('x1',$p1),$p0.getMarkProperty('y1',$p1)),tab.$create_PointF($p0.getMarkProperty('x_next',$p1),$p0.getMarkProperty('y_next',$p1)));$2=tab.RectXYUtil.union($2,$7);}if($0===-1&&$1===-1){var $8=tab.RectXYUtil.rectXYFromCorners(tab.$create_PointF($p0.getMarkProperty('x1',$p1),$p0.getMarkProperty('y1',$p1)),tab.$create_PointF($p0.getMarkProperty('x_prev',$p1),$p0.getMarkProperty('y_prev',$p1)));$2=tab.RectXYUtil.union($2,$8);}$2=tab.RectXYUtil.encompassCircleF($2,tab.$create_PointF($p0.getMarkProperty('x1',$p1),$p0.getMarkProperty('y1',$p1)),(5+20));return $2;}
tab.MarksRenderer.$F=function($p0,$p1,$p2,$p3){var $0=$p0.getLeft($p3);var $1=$p0.getRight($p3);if($0!==-1){var $2=[];$2.add(tab.$create_PointF($p0.getMarkProperty('x1',$p3),$p0.getMarkProperty('y1',$p3)));$2.add(tab.$create_PointF(($p0.getMarkProperty('x1',$0)+$p0.getMarkProperty('x1',$p3))/2,($p0.getMarkProperty('y1',$0)+$p0.getMarkProperty('y1',$p3))/2));$2.add(tab.$create_PointF(($p0.getMarkProperty('x_next',$0)+$p0.getMarkProperty('x_prev',$p3))/2,($p0.getMarkProperty('y_next',$0)+$p0.getMarkProperty('y_prev',$p3))/2));$2.add(tab.$create_PointF($p0.getMarkProperty('x_prev',$p3),$p0.getMarkProperty('y_prev',$p3)));if(tab.GeometryUtil.isPointInPoly($2,tab.$create_PointF($p1,$p2))){return true;}}if($1!==-1){var $3=[];$3.add(tab.$create_PointF($p0.getMarkProperty('x1',$p3),$p0.getMarkProperty('y1',$p3)));$3.add(tab.$create_PointF(($p0.getMarkProperty('x1',$1)+$p0.getMarkProperty('x1',$p3))/2,($p0.getMarkProperty('y1',$1)+$p0.getMarkProperty('y1',$p3))/2));$3.add(tab.$create_PointF(($p0.getMarkProperty('x_prev',$1)+$p0.getMarkProperty('x_next',$p3))/2,($p0.getMarkProperty('y_prev',$1)+$p0.getMarkProperty('y_next',$p3))/2));$3.add(tab.$create_PointF($p0.getMarkProperty('x_next',$p3),$p0.getMarkProperty('y_next',$p3)));if(tab.GeometryUtil.isPointInPoly($3,tab.$create_PointF($p1,$p2))){return true;}}if($0===-1&&$1===-1){return true;}if($0===-1&&$1===-1){return true;}if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_PointF($p0.getMarkProperty('x1',$p3),$p0.getMarkProperty('y1',$p3)),(5))){return true;}return false;}
tab.MarksRenderer.$10=function($p0,$p1,$p2,$p3){var $0=$p0.getLeft($p3);var $1=$p0.getRight($p3);if($0!==-1){var $2=[];$2.add(tab.$create_PointF($p0.getMarkProperty('x1',$p3),$p0.getMarkProperty('y1',$p3)));$2.add(tab.$create_PointF(($p0.getMarkProperty('x1',$0)+$p0.getMarkProperty('x1',$p3))/2,($p0.getMarkProperty('y1',$0)+$p0.getMarkProperty('y1',$p3))/2));$2.add(tab.$create_PointF(($p0.getMarkProperty('x_next',$0)+$p0.getMarkProperty('x_prev',$p3))/2,($p0.getMarkProperty('y_next',$0)+$p0.getMarkProperty('y_prev',$p3))/2));$2.add(tab.$create_PointF($p0.getMarkProperty('x_prev',$p3),$p0.getMarkProperty('y_prev',$p3)));if(tab.GeometryUtil.isPointInPoly($2,tab.$create_PointF($p1,$p2))){return true;}}if($1!==-1){var $3=[];$3.add(tab.$create_PointF($p0.getMarkProperty('x1',$p3),$p0.getMarkProperty('y1',$p3)));$3.add(tab.$create_PointF(($p0.getMarkProperty('x1',$1)+$p0.getMarkProperty('x1',$p3))/2,($p0.getMarkProperty('y1',$1)+$p0.getMarkProperty('y1',$p3))/2));$3.add(tab.$create_PointF(($p0.getMarkProperty('x_prev',$1)+$p0.getMarkProperty('x_next',$p3))/2,($p0.getMarkProperty('y_prev',$1)+$p0.getMarkProperty('y_next',$p3))/2));$3.add(tab.$create_PointF($p0.getMarkProperty('x_next',$p3),$p0.getMarkProperty('y_next',$p3)));if(tab.GeometryUtil.isPointInPoly($3,tab.$create_PointF($p1,$p2))){return true;}}if($0===-1&&$1===-1){return true;}if($0===-1&&$1===-1){return true;}if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_PointF($p0.getMarkProperty('x1',$p3),$p0.getMarkProperty('y1',$p3)),(5+20))){return true;}return false;}
tab.MarksRenderer.$11=function($p0,$p1,$p2){var $0=tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2));var $1=$p0.getMarkProperty('width',$p2);var $2=tab.RectXYUtil.encompassCircleF(tab.$create_RectXY(0,0,0,0),$0,$1);return tab.RectXYUtil.intersectsWith($2,$p1);}
tab.MarksRenderer.$12=function($p0,$p1){var $0=tab.$create_RectXY(0,0,0,0);var $1=$p0.getMarkLabelProperty('x',$p1);var $2=$p0.getMarkLabelProperty('y',$p1);var $3=$p0.getMarkLabelProperty('width',$p1);var $4=-$p0.getMarkLabelProperty('height',$p1);$1+=0;$2+=0;if($4<0){$2+=$4;$4=Math.abs($4);}$0=tab.$create_RectXY(parseInt($1),parseInt($2),parseInt($3),parseInt($4));return $0;}
tab.MarksRenderer.$13=function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('size',$p3)/2;var $1=$p0.getMarkProperty('theta',$p3);var $2=$p0.getMarkProperty('theta1',$p3);if($1>$2){var $4=$1;$1=$2;$2=$4;}var $3=tab.$create_PointF($p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3));if($2-$1>=1){return tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),$3,$0*2);}$1=tab.CanvasRenderer.toCanvasAngle($1);$2=tab.CanvasRenderer.toCanvasAngle($2);$1=tab.GeometryUtil.normalizeAngle($1);$2=tab.GeometryUtil.normalizeAngle($2);return tab.GeometryUtil.isPointInWedge(tab.$create_PointF($p1,$p2),$3,$0,$1,$2);}
tab.MarksRenderer.$14=function($p0,$p1){var $0=tab.$create_RectXY(0,0,0,0);var $1=$p0.getMarkProperty('size',$p1)/2;$0=tab.RectXYUtil.union($0,tab.CanvasRenderer.boundWedge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$1,$p0.getMarkProperty('theta',$p1),$p0.getMarkProperty('theta1',$p1)));if($p0.getMarkProperty('draw_border',$p1)){$0=tab.RectXYUtil.union($0,tab.CanvasRenderer.boundWedge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$1,$p0.getMarkProperty('theta',$p1),$p0.getMarkProperty('theta1',$p1)));}return $0;}
tab.MarksRenderer.$15=function($p0,$p1){var $0=tab.$create_RectXY(0,0,0,0);if(!(!!$p0.get_clipCase()&&$p0.useCellClipForSelection())){if(!(!!$p0.get_clipCase()&&$p0.useCellClipForSelection())){var $1=$p0.getMarkProperty('x',$p1);var $2=$p0.getMarkProperty('y',$p1);var $3=$p0.getMarkProperty('width',$p1);var $4=-$p0.getMarkProperty('height',$p1);$1+=-$p0.getMarkProperty('width',$p1)/2;$2+=$p0.getMarkProperty('height',$p1)/2;if($4<0){$2+=$4;$4=Math.abs($4);}$0=tab.$create_RectXY(parseInt($1),parseInt($2),parseInt($3),parseInt($4));}}if((!!$p0.get_clipCase()&&$p0.useCellClipForSelection())){if((!!$p0.get_clipCase()&&$p0.useCellClipForSelection())){var $5=$p0.getMarkProperty('x',$p1);var $6=$p0.getMarkProperty('y',$p1);var $7=$p0.getMarkProperty('clip_width',$p1);var $8=-$p0.getMarkProperty('clip_height',$p1);$5+=-$p0.getMarkProperty('clip_width',$p1)/2;$6+=$p0.getMarkProperty('clip_height',$p1)/2;if($8<0){$6+=$8;$8=Math.abs($8);}$0=tab.$create_RectXY(parseInt($5),parseInt($6),parseInt($7),parseInt($8));}}return $0;}
tab.MarksRenderer.$16=function($p0,$p1){var $0=tab.$create_RectXY(0,0,0,0);var $1=$p0.getMarkProperty('size',$p1)/2;if($p0.scaleMarksInX()&&$p0.scaleMarksInY()){var $2=Math.min($p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y1',$p1));var $3=Math.max($p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y1',$p1));var $4=Math.min($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x1',$p1));var $5=Math.max($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x1',$p1));var $6=tab.CanvasRenderer.roundStartAndExtent($2,$3-$2,$p0.get_minBarHeight());var $7=tab.CanvasRenderer.roundStartAndExtent($4,$5-$4,$p0.get_minBarWidth());var $8=tab.$create_RectXY(parseInt($7.first),parseInt($6.first),parseInt($7.second),parseInt($6.second));$0=tab.RectXYUtil.union($0,$8);}if($p0.scaleMarksInX()&&$p0.scaleMarksInY()&&$p0.get_drawBorder()){var $9=Math.min($p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y1',$p1));var $A=Math.max($p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y1',$p1));var $B=Math.min($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x1',$p1));var $C=Math.max($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x1',$p1));var $D=tab.CanvasRenderer.roundStartAndExtent($9,$A-$9,$p0.get_minBarHeight());var $E=tab.CanvasRenderer.roundStartAndExtent($B,$C-$B,$p0.get_minBarWidth());var $F=tab.$create_RectXY(parseInt($E.first),parseInt($D.first),parseInt($E.second),parseInt($D.second));$0=tab.RectXYUtil.union($0,$F);}if(!$p0.scaleMarksInX()&&$p0.scaleMarksInY()){var $10=Math.min($p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y1',$p1));var $11=Math.max($p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y1',$p1));var $12=Math.min($p0.getMarkProperty('x',$p1)-$1,$p0.getMarkProperty('x',$p1)+$1);var $13=Math.max($p0.getMarkProperty('x',$p1)-$1,$p0.getMarkProperty('x',$p1)+$1);var $14=tab.CanvasRenderer.roundStartAndExtent($10,$11-$10,$p0.get_minBarHeight());var $15=tab.CanvasRenderer.roundStartAndExtent($12,$13-$12,$p0.get_minBarWidth());var $16=tab.$create_RectXY(parseInt($15.first),parseInt($14.first),parseInt($15.second),parseInt($14.second));$0=tab.RectXYUtil.union($0,$16);}if(!$p0.scaleMarksInX()&&$p0.scaleMarksInY()&&$p0.get_drawBorder()){var $17=Math.min($p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y1',$p1));var $18=Math.max($p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y1',$p1));var $19=Math.min($p0.getMarkProperty('x',$p1)-$1,$p0.getMarkProperty('x',$p1)+$1);var $1A=Math.max($p0.getMarkProperty('x',$p1)-$1,$p0.getMarkProperty('x',$p1)+$1);var $1B=tab.CanvasRenderer.roundStartAndExtent($17,$18-$17,$p0.get_minBarHeight());var $1C=tab.CanvasRenderer.roundStartAndExtent($19,$1A-$19,$p0.get_minBarWidth());var $1D=tab.$create_RectXY(parseInt($1C.first),parseInt($1B.first),parseInt($1C.second),parseInt($1B.second));$0=tab.RectXYUtil.union($0,$1D);}if($p0.scaleMarksInX()&&!$p0.scaleMarksInY()){var $1E=Math.min($p0.getMarkProperty('y',$p1)-$1,$p0.getMarkProperty('y',$p1)+$1);var $1F=Math.max($p0.getMarkProperty('y',$p1)-$1,$p0.getMarkProperty('y',$p1)+$1);var $20=Math.min($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x1',$p1));var $21=Math.max($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x1',$p1));var $22=tab.CanvasRenderer.roundStartAndExtent($1E,$1F-$1E,$p0.get_minBarHeight());var $23=tab.CanvasRenderer.roundStartAndExtent($20,$21-$20,$p0.get_minBarWidth());var $24=tab.$create_RectXY(parseInt($23.first),parseInt($22.first),parseInt($23.second),parseInt($22.second));$0=tab.RectXYUtil.union($0,$24);}if($p0.scaleMarksInX()&&!$p0.scaleMarksInY()&&$p0.get_drawBorder()){var $25=Math.min($p0.getMarkProperty('y',$p1)-$1,$p0.getMarkProperty('y',$p1)+$1);var $26=Math.max($p0.getMarkProperty('y',$p1)-$1,$p0.getMarkProperty('y',$p1)+$1);var $27=Math.min($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x1',$p1));var $28=Math.max($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x1',$p1));var $29=tab.CanvasRenderer.roundStartAndExtent($25,$26-$25,$p0.get_minBarHeight());var $2A=tab.CanvasRenderer.roundStartAndExtent($27,$28-$27,$p0.get_minBarWidth());var $2B=tab.$create_RectXY(parseInt($2A.first),parseInt($29.first),parseInt($2A.second),parseInt($29.second));$0=tab.RectXYUtil.union($0,$2B);}if(!$p0.scaleMarksInX()&&!$p0.scaleMarksInY()){var $2C=Math.min($p0.getMarkProperty('y',$p1)-$1,$p0.getMarkProperty('y',$p1)+$1);var $2D=Math.max($p0.getMarkProperty('y',$p1)-$1,$p0.getMarkProperty('y',$p1)+$1);var $2E=Math.min($p0.getMarkProperty('x',$p1)-$1,$p0.getMarkProperty('x',$p1)+$1);var $2F=Math.max($p0.getMarkProperty('x',$p1)-$1,$p0.getMarkProperty('x',$p1)+$1);var $30=tab.CanvasRenderer.roundStartAndExtent($2C,$2D-$2C,$p0.get_minBarHeight());var $31=tab.CanvasRenderer.roundStartAndExtent($2E,$2F-$2E,$p0.get_minBarWidth());var $32=tab.$create_RectXY(parseInt($31.first),parseInt($30.first),parseInt($31.second),parseInt($30.second));$0=tab.RectXYUtil.union($0,$32);}if(!$p0.scaleMarksInX()&&!$p0.scaleMarksInY()&&$p0.get_drawBorder()){var $33=Math.min($p0.getMarkProperty('y',$p1)-$1,$p0.getMarkProperty('y',$p1)+$1);var $34=Math.max($p0.getMarkProperty('y',$p1)-$1,$p0.getMarkProperty('y',$p1)+$1);var $35=Math.min($p0.getMarkProperty('x',$p1)-$1,$p0.getMarkProperty('x',$p1)+$1);var $36=Math.max($p0.getMarkProperty('x',$p1)-$1,$p0.getMarkProperty('x',$p1)+$1);var $37=tab.CanvasRenderer.roundStartAndExtent($33,$34-$33,$p0.get_minBarHeight());var $38=tab.CanvasRenderer.roundStartAndExtent($35,$36-$35,$p0.get_minBarWidth());var $39=tab.$create_RectXY(parseInt($38.first),parseInt($37.first),parseInt($38.second),parseInt($37.second));$0=tab.RectXYUtil.union($0,$39);}return $0;}
tab.MarksRenderer.$17=function($p0,$p1){var $0=$p0.getLeft($p1);var $1=$p0.getRight($p1);var $2=tab.$create_RectXY(0,0,0,0);$2=tab.RectXYUtil.encompassCircleF($2,tab.$create_PointF($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1)),($p0.getMarkProperty('width',$p1)+20));$2=tab.RectXYUtil.encompassCircleF($2,tab.$create_PointF($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1)),($p0.getMarkProperty('width',$p1)+20));if($0!==-1){$2=tab.CanvasRenderer.boundLineEdge($2,($p0.getMarkProperty('x',$0)+$p0.getMarkProperty('x',$p1))/2,($p0.getMarkProperty('y',$0)+$p0.getMarkProperty('y',$p1))/2,(($p0.getMarkProperty('width',$0)+$p0.getMarkProperty('width',$p1))/2)+20,$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1)+20);}if($1!==-1){$2=tab.CanvasRenderer.boundLineEdge($2,$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('width',$p1)+20,($p0.getMarkProperty('x',$p1)+$p0.getMarkProperty('x',$1))/2,($p0.getMarkProperty('y',$p1)+$p0.getMarkProperty('y',$1))/2,(($p0.getMarkProperty('width',$p1)+$p0.getMarkProperty('width',$1))/2)+20);}return $2;}
tab.MarksRenderer.$18=function($p0,$p1,$p2,$p3){var $0=$p0.getLeft($p3);var $1=$p0.getRight($p3);if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_PointF($p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3)),($p0.getMarkProperty('width',$p3)))){return true;}if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_PointF($p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3)),($p0.getMarkProperty('width',$p3)))){return true;}if($0!==-1){if(tab.CanvasRenderer.lineEdgeContains($p1,$p2,($p0.getMarkProperty('x',$0)+$p0.getMarkProperty('x',$p3))/2,($p0.getMarkProperty('y',$0)+$p0.getMarkProperty('y',$p3))/2,(($p0.getMarkProperty('width',$0)+$p0.getMarkProperty('width',$p3))/2),$p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3),$p0.getMarkProperty('width',$p3))){return true;}}if($1!==-1){if(tab.CanvasRenderer.lineEdgeContains($p1,$p2,$p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3),$p0.getMarkProperty('width',$p3),($p0.getMarkProperty('x',$p3)+$p0.getMarkProperty('x',$1))/2,($p0.getMarkProperty('y',$p3)+$p0.getMarkProperty('y',$1))/2,(($p0.getMarkProperty('width',$p3)+$p0.getMarkProperty('width',$1))/2))){return true;}}return false;}
tab.MarksRenderer.$19=function($p0,$p1,$p2,$p3){var $0=$p0.getLeft($p3);var $1=$p0.getRight($p3);if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_PointF($p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3)),($p0.getMarkProperty('width',$p3)+20))){return true;}if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_PointF($p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3)),($p0.getMarkProperty('width',$p3)+20))){return true;}if($0!==-1){if(tab.CanvasRenderer.lineEdgeContains($p1,$p2,($p0.getMarkProperty('x',$0)+$p0.getMarkProperty('x',$p3))/2,($p0.getMarkProperty('y',$0)+$p0.getMarkProperty('y',$p3))/2,(($p0.getMarkProperty('width',$0)+$p0.getMarkProperty('width',$p3))/2)+20,$p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3),$p0.getMarkProperty('width',$p3)+20)){return true;}}if($1!==-1){if(tab.CanvasRenderer.lineEdgeContains($p1,$p2,$p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3),$p0.getMarkProperty('width',$p3)+20,($p0.getMarkProperty('x',$p3)+$p0.getMarkProperty('x',$1))/2,($p0.getMarkProperty('y',$p3)+$p0.getMarkProperty('y',$1))/2,(($p0.getMarkProperty('width',$p3)+$p0.getMarkProperty('width',$1))/2)+20)){return true;}}return false;}
tab.MarksRenderer.$1A=function($p0,$p1,$p2){var $0=tab.$create_PointF($p0.getMarkProperty('x',$p2),$p0.getMarkProperty('y',$p2));var $1=$p0.getMarkProperty('width',$p2);var $2=tab.RectXYUtil.encompassCircleF(tab.$create_RectXY(0,0,0,0),$0,$1);return tab.RectXYUtil.intersectsWith($2,$p1);}
tab.MarksRenderer.$1B=function($p0,$p1){var $0=$p0.getMarkProperty('shape_id',$p1);switch($0){case 'shapeIDCircle':var $1=tab.$create_RectXY(0,0,0,0);var $2=Math.round($p0.getMarkProperty('x',$p1));var $3=Math.round($p0.getMarkProperty('y',$p1));var $4=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-0.5/12)))/2);var $5=2*$4;$1=tab.RectXYUtil.union($1,tab.$create_RectXY($2-$4,$3-$4,$5,$5));return $1;case 'shapeIDFilledCircle':var $6=tab.$create_RectXY(0,0,0,0);var $7=Math.round($p0.getMarkProperty('x',$p1));var $8=Math.round($p0.getMarkProperty('y',$p1));var $9=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-0.25/12)))/2);var $A=2*$9;$6=tab.RectXYUtil.union($6,tab.$create_RectXY($7-$9,$8-$9,$A,$A));return $6;case 'shapeIDUnscaledFilledCircle':var $B=tab.$create_RectXY(0,0,0,0);var $C=Math.round($p0.getMarkProperty('x',$p1));var $D=Math.round($p0.getMarkProperty('y',$p1));var $E=Math.ceil($p0.getMarkProperty('width',$p1)/2);var $F=2*$E;$B=tab.RectXYUtil.union($B,tab.$create_RectXY($C-$E,$D-$E,$F,$F));return $B;case 'shapeIDSquare':var $10=tab.$create_RectXY(0,0,0,0);var $11=Math.round($p0.getMarkProperty('x',$p1));var $12=Math.round($p0.getMarkProperty('y',$p1));var $13=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2);var $14=2*$13;$10=tab.RectXYUtil.union($10,tab.$create_RectXY($11-$13,$12-$13,$14,$14));return $10;case 'shapeIDFilledSquare':var $15=tab.$create_RectXY(0,0,0,0);var $16=Math.round($p0.getMarkProperty('x',$p1));var $17=Math.round($p0.getMarkProperty('y',$p1));var $18=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/2);var $19=2*$18;$15=tab.RectXYUtil.union($15,tab.$create_RectXY($16-$18,$17-$18,$19,$19));return $15;case 'shapeIDAsterisk':var $1A=tab.$create_RectXY(0,0,0,0);var $1B=Math.round($p0.getMarkProperty('x',$p1));var $1C=Math.round($p0.getMarkProperty('y',$p1));var $1D=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-0.5/12)))/2);var $1E=2*$1D;$1A=tab.RectXYUtil.union($1A,tab.$create_RectXY($1B-$1D,$1C-$1D,$1E,$1E));return $1A;case 'shapeIDPlus':var $1F=tab.$create_RectXY(0,0,0,0);var $20=Math.round($p0.getMarkProperty('x',$p1));var $21=Math.round($p0.getMarkProperty('y',$p1));var $22=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2);var $23=2*$22;$1F=tab.RectXYUtil.union($1F,tab.$create_RectXY($20-$22,$21-$22,$23,$23));return $1F;case 'shapeIDFilledPlus':var $24=tab.$create_RectXY(0,0,0,0);var $25=Math.round($p0.getMarkProperty('x',$p1));var $26=Math.round($p0.getMarkProperty('y',$p1));var $27=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/2);var $28=2*$27;$24=tab.RectXYUtil.union($24,tab.$create_RectXY($25-$27,$26-$27,$28,$28));return $24;case 'shapeIDTimes':var $29=tab.$create_RectXY(0,0,0,0);var $2A=Math.round($p0.getMarkProperty('x',$p1));var $2B=Math.round($p0.getMarkProperty('y',$p1));var $2C=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1.5/12)))/2);var $2D=2*$2C;$29=tab.RectXYUtil.union($29,tab.$create_RectXY($2A-$2C,$2B-$2C,$2D,$2D));return $29;case 'shapeIDFilledTimes':var $2E=tab.$create_RectXY(0,0,0,0);var $2F=Math.round($p0.getMarkProperty('x',$p1));var $30=Math.round($p0.getMarkProperty('y',$p1));var $31=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-0.75/12)))/2);var $32=2*$31;$2E=tab.RectXYUtil.union($2E,tab.$create_RectXY($2F-$31,$30-$31,$32,$32));return $2E;case 'shapeIDDiamond':var $33=tab.$create_RectXY(0,0,0,0);var $34=Math.round($p0.getMarkProperty('x',$p1));var $35=Math.round($p0.getMarkProperty('y',$p1));var $36=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(0.5/12)))/2);var $37=2*$36;$33=tab.RectXYUtil.union($33,tab.$create_RectXY($34-$36,$35-$36,$37,$37));return $33;case 'shapeIDFilledDiamond':var $38=tab.$create_RectXY(0,0,0,0);var $39=Math.round($p0.getMarkProperty('x',$p1));var $3A=Math.round($p0.getMarkProperty('y',$p1));var $3B=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(0.5/12)))/2);var $3C=2*$3B;$38=tab.RectXYUtil.union($38,tab.$create_RectXY($39-$3B,$3A-$3B,$3C,$3C));return $38;case 'shapeIDTriangle':var $3D=tab.$create_RectXY(0,0,0,0);var $3E=Math.round($p0.getMarkProperty('x',$p1));var $3F=Math.round($p0.getMarkProperty('y',$p1));var $40=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2);var $41=2*$40;$3D=tab.RectXYUtil.union($3D,tab.$create_RectXY($3E-$40,$3F-$40,$41,$41));return $3D;case 'shapeIDFilledTriangle':var $42=tab.$create_RectXY(0,0,0,0);var $43=Math.round($p0.getMarkProperty('x',$p1));var $44=Math.round($p0.getMarkProperty('y',$p1));var $45=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2);var $46=2*$45;$42=tab.RectXYUtil.union($42,tab.$create_RectXY($43-$45,$44-$45,$46,$46));return $42;case 'shapeIDDownTriangle':var $47=tab.$create_RectXY(0,0,0,0);var $48=Math.round($p0.getMarkProperty('x',$p1));var $49=Math.round($p0.getMarkProperty('y',$p1));var $4A=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2);var $4B=2*$4A;$47=tab.RectXYUtil.union($47,tab.$create_RectXY($48-$4A,$49-$4A,$4B,$4B));return $47;case 'shapeIDFilledDownTriangle':var $4C=tab.$create_RectXY(0,0,0,0);var $4D=Math.round($p0.getMarkProperty('x',$p1));var $4E=Math.round($p0.getMarkProperty('y',$p1));var $4F=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2);var $50=2*$4F;$4C=tab.RectXYUtil.union($4C,tab.$create_RectXY($4D-$4F,$4E-$4F,$50,$50));return $4C;case 'shapeIDLeftTriangle':var $51=tab.$create_RectXY(0,0,0,0);var $52=Math.round($p0.getMarkProperty('x',$p1));var $53=Math.round($p0.getMarkProperty('y',$p1));var $54=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2);var $55=2*$54;$51=tab.RectXYUtil.union($51,tab.$create_RectXY($52-$54,$53-$54,$55,$55));return $51;case 'shapeIDFilledLeftTriangle':var $56=tab.$create_RectXY(0,0,0,0);var $57=Math.round($p0.getMarkProperty('x',$p1));var $58=Math.round($p0.getMarkProperty('y',$p1));var $59=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2);var $5A=2*$59;$56=tab.RectXYUtil.union($56,tab.$create_RectXY($57-$59,$58-$59,$5A,$5A));return $56;case 'shapeIDRightTriangle':var $5B=tab.$create_RectXY(0,0,0,0);var $5C=Math.round($p0.getMarkProperty('x',$p1));var $5D=Math.round($p0.getMarkProperty('y',$p1));var $5E=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1.25/12)))/2);var $5F=2*$5E;$5B=tab.RectXYUtil.union($5B,tab.$create_RectXY($5C-$5E,$5D-$5E,$5F,$5F));return $5B;case 'shapeIDFilledRightTriangle':var $60=tab.$create_RectXY(0,0,0,0);var $61=Math.round($p0.getMarkProperty('x',$p1));var $62=Math.round($p0.getMarkProperty('y',$p1));var $63=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(-1/12)))/2);var $64=2*$63;$60=tab.RectXYUtil.union($60,tab.$create_RectXY($61-$63,$62-$63,$64,$64));return $60;case 'shapeIDFilledStar':var $65=tab.$create_RectXY(0,0,0,0);var $66=Math.round($p0.getMarkProperty('x',$p1));var $67=Math.round($p0.getMarkProperty('y',$p1));var $68=Math.ceil(($p0.getMarkProperty('width',$p1)*(1+(1.1/12)))/2);var $69=2*$68;$65=tab.RectXYUtil.union($65,tab.$create_RectXY($66-$68,$67-$68,$69,$69));return $65;default:break;}return tab.$create_RectXY(0,0,0,0);}
tab.MarksRenderer.$1C=function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('shape_id',$p3);switch($0){case 'shapeIDCircle':return true;case 'shapeIDFilledCircle':return true;case 'shapeIDUnscaledFilledCircle':if(tab.GeometryUtil.isPointInCircle(tab.$create_PointF($p1,$p2),tab.$create_PointF($p0.getMarkProperty('x',$p3),$p0.getMarkProperty('y',$p3)),($p0.getMarkProperty('width',$p3)))){return true;}return false;case 'shapeIDSquare':return true;case 'shapeIDFilledSquare':return true;case 'shapeIDAsterisk':return true;case 'shapeIDPlus':return true;case 'shapeIDFilledPlus':return true;case 'shapeIDTimes':return true;case 'shapeIDFilledTimes':return true;case 'shapeIDDiamond':return true;case 'shapeIDFilledDiamond':return true;case 'shapeIDTriangle':return true;case 'shapeIDFilledTriangle':return true;case 'shapeIDDownTriangle':return true;case 'shapeIDFilledDownTriangle':return true;case 'shapeIDLeftTriangle':return true;case 'shapeIDFilledLeftTriangle':return true;case 'shapeIDRightTriangle':return true;case 'shapeIDFilledRightTriangle':return true;case 'shapeIDFilledStar':return true;default:break;}return true;}
tab.MarksRenderer.$1D=function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('shape_id',$p3);switch($0){default:break;}return false;}
tab.MarksRenderer.$22=function($p0,$p1){var $0=document.createElement('canvas');var $1=$0.getContext('2d');var $2=new tab.TabRenderContext2D($1);var $3=$p0.getMarkIndexFromTupleID($p1);var $4=false;if($3-1>0&&!$p0.isMarkEndPrimitive($3-1)){$4=$4||$p0.isMarkHighlighted($3-1);}if(($3+1)<$p0.get_markCount()&&!$p0.isMarkEndPrimitive($3)){$4=$4||$p0.isMarkHighlighted($3+1);}var $5;var $6;if($p0.isMarkSelected($3)){$6=(5+2+8+2);$0.width=parseInt($6);$0.height=parseInt($6);$5=($p0.getMarkProperty('selected_halo_color',$3))['colorOverrideOpaque'];var $D=(5+2);var $E=($6-$D)/2;var $F=$D/2;$2.beginPath();$2.arc($F+$E,$F+$E,$F,0,tab.CanvasRenderer.twoPI,true);$2.closePath();$2.set_lineWidth(4);$2.set_strokeStyle($5);$2.stroke();$5=($p0.getMarkProperty('color',$3))['colorOverrideOpaque'];var $10=(5+2);var $11=($6-$10)/2;var $12=$10/2;$2.beginPath();$2.arc($12+$11,$12+$11,$12,0,tab.CanvasRenderer.twoPI,true);$2.closePath();$2.set_shapeFillStyle($5);$2.fill();}else if($p0.isMarkHighlighted($3)&&!$4){$6=(5+2+8+2);$0.width=parseInt($6);$0.height=parseInt($6);$5=($p0.getMarkProperty('selected_multi_prim_halo_color',$3))['colorOverrideNone'];var $13=(5+2);var $14=($6-$13)/2;var $15=$13/2;$2.beginPath();$2.arc($15+$14,$15+$14,$15,0,tab.CanvasRenderer.twoPI,true);$2.closePath();$2.set_lineWidth(4);$2.set_strokeStyle($5);$2.stroke();$5=($p0.getMarkProperty('color',$3))['colorOverrideNone'];var $16=(5+2);var $17=($6-$16)/2;var $18=$16/2;$2.beginPath();$2.arc($18+$17,$18+$17,$18,0,tab.CanvasRenderer.twoPI,true);$2.closePath();$2.set_shapeFillStyle($5);$2.fill();}else{$6=(5+4+2);$0.width=parseInt($6);$0.height=parseInt($6);$5=(($p0.get_drawBorder())?$p0.get_borderColor():tab.SceneUtils.blackColor)['colorOverrideNone'];var $19=(5);var $1A=($6-$19)/2;var $1B=$19/2;$2.beginPath();$2.arc($1B+$1A,$1B+$1A,$1B,0,tab.CanvasRenderer.twoPI,true);$2.closePath();$2.set_shapeFillStyle($5);$2.fill();}var $7=$0.toDataURL().replace(new RegExp('^data:image/\\w+;base64,'),'');var $8=$p0.getMarkProperty('x',$3);var $9=$p0.getMarkProperty('y',$3);var $A=$p0.getMarkProperty('x1',$3);var $B=$p0.getMarkProperty('y1',$3);var $C=tab.$create_OverlayImageInfo();$C.image=$7;$C.coords=[tab.$create_Point($8-($0.width/2),$9-($0.width/2)),tab.$create_Point($A-($0.width/2),$B-($0.width/2))];return $C;}
tab.MarksRenderer.$2E=function($p0,$p1){var $0=document.createElement('canvas');var $1=$0.getContext('2d');var $2=new tab.TabRenderContext2D($1);var $3=$p0.getMarkIndexFromTupleID($p1);var $4=false;if($3-1>0&&!$p0.isMarkEndPrimitive($3-1)){$4=$4||$p0.isMarkHighlighted($3-1);}if(($3+1)<$p0.get_markCount()&&!$p0.isMarkEndPrimitive($3)){$4=$4||$p0.isMarkHighlighted($3+1);}var $5;var $6;if($p0.isMarkSelected($3)){$6=($p0.getMarkProperty('width',$3)+4+4+8+2);$0.width=parseInt($6);$0.height=parseInt($6);$5=($p0.getMarkProperty('selected_halo_color',$3))['colorOverrideOpaque'];var $B=($p0.getMarkProperty('width',$3)+4+4);var $C=($6-$B)/2;var $D=$B/2;$2.beginPath();$2.arc($D+$C,$D+$C,$D,0,tab.CanvasRenderer.twoPI,true);$2.closePath();$2.set_lineWidth(4);$2.set_strokeStyle($5);$2.stroke();$5=($p0.getMarkProperty('color',$3))['colorOverrideOpaque'];var $E=($p0.getMarkProperty('width',$3)+4+4);var $F=($6-$E)/2;var $10=$E/2;$2.beginPath();$2.arc($10+$F,$10+$F,$10,0,tab.CanvasRenderer.twoPI,true);$2.closePath();$2.set_shapeFillStyle($5);$2.fill();}else if($p0.isMarkHighlighted($3)&&!$4){$6=($p0.getMarkProperty('width',$3)+4+4+8+2);$0.width=parseInt($6);$0.height=parseInt($6);$5=($p0.getMarkProperty('selected_multi_prim_halo_color',$3))['colorOverrideNone'];var $11=($p0.getMarkProperty('width',$3)+4+4);var $12=($6-$11)/2;var $13=$11/2;$2.beginPath();$2.arc($13+$12,$13+$12,$13,0,tab.CanvasRenderer.twoPI,true);$2.closePath();$2.set_lineWidth(4);$2.set_strokeStyle($5);$2.stroke();$5=($p0.getMarkProperty('color',$3))['colorOverrideNone'];var $14=($p0.getMarkProperty('width',$3)+4+4);var $15=($6-$14)/2;var $16=$14/2;$2.beginPath();$2.arc($16+$15,$16+$15,$16,0,tab.CanvasRenderer.twoPI,true);$2.closePath();$2.set_shapeFillStyle($5);$2.fill();}else{$6=($p0.getMarkProperty('width',$3)+4+2+2);$0.width=parseInt($6);$0.height=parseInt($6);$5=($p0.getMarkProperty('color',$3))['colorOverrideNone'];var $17=($p0.getMarkProperty('width',$3)+4);var $18=($6-$17)/2;var $19=$17/2;$2.beginPath();$2.arc($19+$18,$19+$18,$19,0,tab.CanvasRenderer.twoPI,true);$2.closePath();$2.set_shapeFillStyle($5);$2.fill();}var $7=$0.toDataURL().replace(new RegExp('^data:image/\\w+;base64,'),'');var $8=$p0.getMarkProperty('x',$3);var $9=$p0.getMarkProperty('y',$3);var $A=tab.$create_OverlayImageInfo();$A.image=$7;$A.coords=[tab.$create_Point($8-($0.width/2),$9-($0.width/2))];return $A;}
tab.MarksRenderer.prototype={$1E:function($p0,$p1){var $0=$p0.get_markCount();var $1=$p0.get_hasSelection();var $2=$p0.get_hasBrushing();var $3='colorOverrideNone';this.get_currentContext().save();switch($p1){case 'normalUnderPass':if($p0.get_hasBackground()&&$p0.get_hasHalos()){if(($1||$2)){$3='colorOverrideFog';}else{$3='colorOverrideNone';}var $4=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $5=0;$5<$0;$5++){if(!$p0.markNeedsDraw($5,$4)){continue;}if($p0.getMarkState($5)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $6=$p0.getMarkBounds($5);var $7=$p0.pixelToDomainX($6.x);var $8=$p0.pixelToDomainX($6.x+$6.w);var $9=$p0.getMarkInstances($7,$8);for(var $A=$9.first;$A<=$9.second;++$A){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($A),0);this.$1F($p0,$5,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$1F($p0,$5,'normalUnder',$3);}}if(($1||$2)){$3='colorOverrideNone';var $B=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $C=0;$C<$0;$C++){if(!$p0.markNeedsDraw($C,$B)){continue;}if($p0.getMarkState($C)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $D=$p0.getMarkBounds($C);var $E=$p0.pixelToDomainX($D.x);var $F=$p0.pixelToDomainX($D.x+$D.w);var $10=$p0.getMarkInstances($E,$F);for(var $11=$10.first;$11<=$10.second;++$11){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($11),0);this.$1F($p0,$C,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$1F($p0,$C,'normalUnder',$3);}}}}break;case 'normalOnPass':if(($1||$2)){$3='colorOverrideFog';}else{$3='colorOverrideNone';}var $12=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $13=0;$13<$0;$13++){if(!$p0.markNeedsDraw($13,$12)){continue;}if($p0.getMarkState($13)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $14=$p0.getMarkBounds($13);var $15=$p0.pixelToDomainX($14.x);var $16=$p0.pixelToDomainX($14.x+$14.w);var $17=$p0.getMarkInstances($15,$16);for(var $18=$17.first;$18<=$17.second;++$18){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($18),0);this.$1F($p0,$13,'normalOn',$3);this.get_currentContext().restore();}}else{this.$1F($p0,$13,'normalOn',$3);}}break;case 'highlightedUnderPass':break;case 'highlightedOnPass':if(($1||$2)){$3='colorOverrideNone';var $19=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $1A=0;$1A<$0;$1A++){if(!$p0.markNeedsDraw($1A,$19)){continue;}if($p0.getMarkState($1A)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $1B=$p0.getMarkBounds($1A);var $1C=$p0.pixelToDomainX($1B.x);var $1D=$p0.pixelToDomainX($1B.x+$1B.w);var $1E=$p0.getMarkInstances($1C,$1D);for(var $1F=$1E.first;$1F<=$1E.second;++$1F){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($1F),0);this.$1F($p0,$1A,'normalOn',$3);this.get_currentContext().restore();}}else{this.$1F($p0,$1A,'normalOn',$3);}}}break;case 'selectedUnderPass':if(($1||$2)){$3='colorOverrideOpaque';var $20=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $21=0;$21<$0;$21++){if(!$p0.markNeedsDraw($21,$20)){continue;}if($p0.getMarkState($21)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $22=$p0.getMarkBounds($21);var $23=$p0.pixelToDomainX($22.x);var $24=$p0.pixelToDomainX($22.x+$22.w);var $25=$p0.getMarkInstances($23,$24);for(var $26=$25.first;$26<=$25.second;++$26){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($26),0);this.$1F($p0,$21,'selectedUnder',$3);this.get_currentContext().restore();}}else{this.$1F($p0,$21,'selectedUnder',$3);}}}break;case 'selectedOnPass':if(($1||$2)){$3='colorOverrideOpaque';var $27=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $28=0;$28<$0;$28++){if(!$p0.markNeedsDraw($28,$27)){continue;}if($p0.getMarkState($28)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $29=$p0.getMarkBounds($28);var $2A=$p0.pixelToDomainX($29.x);var $2B=$p0.pixelToDomainX($29.x+$29.w);var $2C=$p0.getMarkInstances($2A,$2B);for(var $2D=$2C.first;$2D<=$2C.second;++$2D){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($2D),0);this.$1F($p0,$28,'normalOn',$3);this.get_currentContext().restore();}}else{this.$1F($p0,$28,'normalOn',$3);}}}break;}this.get_currentContext().restore();},$1F:function($p0,$p1,$p2,$p3){if(!!$p0.get_clipCase()){this.get_currentContext().save();this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p2){case 'normalUnder':case 'selectedUnder':case 'normalOn':this.createMultipolygonPath($p0.scaledMarks,$p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('size',$p1),7,$p0.getMarkProperty('geometry',$p1));break;default:break;}switch($p2){case 'normalUnder':this.strokeCurrentPath(2,($p0.getMarkProperty('halo_color',$p1))[$p3]);break;case 'selectedUnder':this.strokeCurrentPath(2,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);break;case 'normalOn':this.fillCurrentPath(($p0.getMarkProperty('color',$p1))[$p3]);if($p0.getMarkProperty('draw_border',$p1)){this.strokeCurrentPath(1,($p0.getMarkProperty('border_color',$p1))[$p3]);}break;default:break;}if(!!$p0.get_clipCase()){this.get_currentContext().restore();}},$20:function($p0,$p1){var $0=$p0.get_hasSelection();var $1=$p0.get_hasBrushing();var $2='colorOverrideNone';var $3=$p0.get_lineDrawState();this.get_currentContext().save();switch($p1){case 'normalUnderPass':break;case 'normalOnPass':if($0||$1){$2='colorOverrideFog';}else{$2='colorOverrideNone';}var $enum1=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum1.moveNext()){var $4=$enum1.current;if($4.get_lineState()!=='lineStateNormal'){continue;}var $5;if($p0.get_isWrappedDomain()){$5=$p0.getMarkInstances($4.minXDomain,$4.maxXDomain);}else{$5=new ss.Tuple(0,0);}for(var $6=$5.first;$6<=$5.second;++$6){if(!!$6){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($6),0);}var $7=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $8=$4.startIndex;$8<=$4.endIndex;$8++){if(!$p0.markNeedsDraw($8,$7)){continue;}this.$21($p0,$8,$4.startIndex,'edgeOn',$2);}if(!!$6){this.get_currentContext().restore();}}}break;case 'highlightedUnderPass':break;case 'highlightedOnPass':if($0||$1){$2='colorOverrideNone';var $enum2=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum2.moveNext()){var $9=$enum2.current;if($9.get_lineState()!=='lineStateHighlighted'){continue;}var $A;if($p0.get_isWrappedDomain()){$A=$p0.getMarkInstances($9.minXDomain,$9.maxXDomain);}else{$A=new ss.Tuple(0,0);}for(var $B=$A.first;$B<=$A.second;++$B){if(!!$B){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($B),0);}var $C=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $D=$9.startIndex;$D<=$9.endIndex;$D++){if(!$p0.markNeedsDraw($D,$C)){continue;}this.$21($p0,$D,$9.startIndex,'edgeOn',$2);}if(!!$B){this.get_currentContext().restore();}}}var $enum3=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum3.moveNext()){var $E=$enum3.current;if($E.get_lineState()!=='lineStateHighlighted'){continue;}var $F;if($p0.get_isWrappedDomain()){$F=$p0.getMarkInstances($E.minXDomain,$E.maxXDomain);}else{$F=new ss.Tuple(0,0);}for(var $10=$F.first;$10<=$F.second;++$10){if(!!$10){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($10),0);}if(!$E.get_allHighlighted()){var $11=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $12=$E.startIndex;$12<=$E.endIndex;$12++){if(!$p0.markNeedsDraw($12,$11)){continue;}if($p0.isMarkHighlighted($12)){this.$21($p0,$12,$E.startIndex,'highlightedUnder1',$2);this.$21($p0,$12,$E.startIndex,'highlightedUnder',$2);}}var $13=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $14=$E.startIndex;$14<=$E.endIndex;$14++){if(!$p0.markNeedsDraw($14,$13)){continue;}if($p0.isMarkHighlighted($14)){this.$21($p0,$14,$E.startIndex,'highlightedOn1',$2);this.$21($p0,$14,$E.startIndex,'highlightedOn',$2);}}}if(!!$10){this.get_currentContext().restore();}}}}break;case 'selectedUnderPass':break;case 'selectedOnPass':if($0||$1){$2='colorOverrideOpaque';var $enum4=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum4.moveNext()){var $15=$enum4.current;if($15.get_lineState()!=='lineStateSelected'){continue;}var $16;if($p0.get_isWrappedDomain()){$16=$p0.getMarkInstances($15.minXDomain,$15.maxXDomain);}else{$16=new ss.Tuple(0,0);}for(var $17=$16.first;$17<=$16.second;++$17){if(!!$17){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($17),0);}var $18=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $19=$15.startIndex;$19<=$15.endIndex;$19++){if(!$p0.markNeedsDraw($19,$18)){continue;}this.$21($p0,$19,$15.startIndex,'edgeOn',$2);}if(!!$17){this.get_currentContext().restore();}}}var $enum5=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum5.moveNext()){var $1A=$enum5.current;if($1A.get_lineState()!=='lineStateSelected'){continue;}var $1B;if($p0.get_isWrappedDomain()){$1B=$p0.getMarkInstances($1A.minXDomain,$1A.maxXDomain);}else{$1B=new ss.Tuple(0,0);}for(var $1C=$1B.first;$1C<=$1B.second;++$1C){if(!!$1C){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($1C),0);}if(!$1A.get_allHighlighted()){var $1D=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $1E=$1A.startIndex;$1E<=$1A.endIndex;$1E++){if(!$p0.markNeedsDraw($1E,$1D)){continue;}if($p0.isMarkHighlighted($1E)&&!$p0.isMarkSelected($1E)){this.$21($p0,$1E,$1A.startIndex,'highlightedUnder1',$2);this.$21($p0,$1E,$1A.startIndex,'highlightedUnder',$2);}}var $1F=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $20=$1A.startIndex;$20<=$1A.endIndex;$20++){if(!$p0.markNeedsDraw($20,$1F)){continue;}if($p0.isMarkHighlighted($20)&&!$p0.isMarkSelected($20)){this.$21($p0,$20,$1A.startIndex,'highlightedOn1',$2);this.$21($p0,$20,$1A.startIndex,'highlightedOn',$2);}}}if(!!$1C){this.get_currentContext().restore();}}}var $enum6=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum6.moveNext()){var $21=$enum6.current;if($21.get_lineState()!=='lineStateSelected'){continue;}var $22;if($p0.get_isWrappedDomain()){$22=$p0.getMarkInstances($21.minXDomain,$21.maxXDomain);}else{$22=new ss.Tuple(0,0);}for(var $23=$22.first;$23<=$22.second;++$23){if(!!$23){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($23),0);}var $24=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $25=$21.startIndex;$25<=$21.endIndex;$25++){if(!$p0.markNeedsDraw($25,$24)){continue;}if($p0.isMarkSelected($25)){this.$21($p0,$25,$21.startIndex,'selectedUnder1',$2);this.$21($p0,$25,$21.startIndex,'selectedUnder',$2);}}var $26=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $27=$21.startIndex;$27<=$21.endIndex;$27++){if(!$p0.markNeedsDraw($27,$26)){continue;}if($p0.isMarkSelected($27)){this.$21($p0,$27,$21.startIndex,'selectedOn1',$2);this.$21($p0,$27,$21.startIndex,'selectedOn',$2);}}if(!!$23){this.get_currentContext().restore();}}}}break;}this.get_currentContext().restore();},$21:function($p0,$p1,$p2,$p3,$p4){var $0=$p0.getLeft($p1);var $1=$p0.getRight($p1);if(!!$p0.get_clipCase()){this.get_currentContext().save();this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p3){case 'edgeOn':if($p0.getRight($p1)!==-1){var $2=[];$2.add(Math.round($p0.getMarkProperty('x1',$p1)));$2.add($p0.getMarkProperty('y1',$p1));$2.add(Math.round($p0.getMarkProperty('x1',$1)));$2.add($p0.getMarkProperty('y1',$1));$2.add(Math.round($p0.getMarkProperty('x_prev',$1)));$2.add($p0.getMarkProperty('y_prev',$1));$2.add(Math.round($p0.getMarkProperty('x_next',$p1)));$2.add($p0.getMarkProperty('y_next',$p1));this.get_currentContext().set_lineJoin('miter');this.renderFilledPolygon($2,($p0.getMarkProperty('color',$p2))[$p4]);}if($p0.get_drawBorder()&&$p0.getRight($p1)!==-1){this.get_currentContext().save();var $3=[];$3.add($p0.getMarkProperty('x1',$p1));$3.add($p0.getMarkProperty('y1',$p1));$3.add($p0.getMarkProperty('x1',$1));$3.add($p0.getMarkProperty('y1',$1));this.renderLine($3,1,($p0.getMarkProperty('border_color',$p1))[$p4],true);this.get_currentContext().restore();}if($p0.get_drawBorder()&&$p0.getRight($p1)!==-1){this.get_currentContext().save();var $4=[];$4.add($p0.getMarkProperty('x_next',$p1));$4.add($p0.getMarkProperty('y_next',$p1));$4.add($p0.getMarkProperty('x_prev',$1));$4.add($p0.getMarkProperty('y_prev',$1));this.renderLine($4,1,($p0.getMarkProperty('border_color',$p1))[$p4],true);this.get_currentContext().restore();}if($p0.get_drawBorder()&&($p0.getLeft($p1)!==-1&&$p0.getRight($p1)!==-1)){this.get_currentContext().save();var $5=[];$5.add($p0.getMarkProperty('x_prev',$p1));$5.add($p0.getMarkProperty('y_prev',$p1));$5.add($p0.getMarkProperty('x_next',$p1));$5.add($p0.getMarkProperty('y_next',$p1));this.renderLine($5,1,($p0.getMarkProperty('border_color',$p1))[$p4],true);this.get_currentContext().restore();}if($p0.get_drawBorder()&&$p0.getLeft($p1)===-1){this.get_currentContext().save();var $6=[];$6.add($p0.getMarkProperty('x1',$p1));$6.add($p0.getMarkProperty('y1',$p1));$6.add($p0.getMarkProperty('x_next',$p1));$6.add($p0.getMarkProperty('y_next',$p1));this.renderLine($6,1,($p0.getMarkProperty('border_color',$p1))[$p4],true);this.get_currentContext().restore();}if($p0.get_drawBorder()&&$p0.getRight($p1)===-1){this.get_currentContext().save();var $7=[];$7.add($p0.getMarkProperty('x1',$p1));$7.add($p0.getMarkProperty('y1',$p1));$7.add($p0.getMarkProperty('x_prev',$p1));$7.add($p0.getMarkProperty('y_prev',$p1));this.renderLine($7,1,($p0.getMarkProperty('border_color',$p1))[$p4],true);this.get_currentContext().restore();}if(!$p0.get_drawBorder()&&$p0.getRight($p1)!==-1){this.get_currentContext().save();var $8=[];$8.add($p0.getMarkProperty('x1',$p1));$8.add($p0.getMarkProperty('y1',$p1));$8.add($p0.getMarkProperty('x1',$1));$8.add($p0.getMarkProperty('y1',$1));this.renderLine($8,1,($p0.getMarkProperty('color',$p2))[$p4],true);this.get_currentContext().restore();}if(!$p0.get_drawBorder()&&$p0.getRight($p1)!==-1){this.get_currentContext().save();var $9=[];$9.add($p0.getMarkProperty('x_next',$p1));$9.add($p0.getMarkProperty('y_next',$p1));$9.add($p0.getMarkProperty('x_prev',$1));$9.add($p0.getMarkProperty('y_prev',$1));this.renderLine($9,1,($p0.getMarkProperty('color',$p2))[$p4],true);this.get_currentContext().restore();}if(!$p0.get_drawBorder()&&($p0.getLeft($p1)!==-1&&$p0.getRight($p1)!==-1)){this.get_currentContext().save();var $A=[];$A.add($p0.getMarkProperty('x_prev',$p1));$A.add($p0.getMarkProperty('y_prev',$p1));$A.add($p0.getMarkProperty('x_next',$p1));$A.add($p0.getMarkProperty('y_next',$p1));this.renderLine($A,1,($p0.getMarkProperty('color',$p2))[$p4],true);this.get_currentContext().restore();}if(!$p0.get_drawBorder()&&$p0.getLeft($p1)===-1){this.get_currentContext().save();var $B=[];$B.add($p0.getMarkProperty('x1',$p1));$B.add($p0.getMarkProperty('y1',$p1));$B.add($p0.getMarkProperty('x_next',$p1));$B.add($p0.getMarkProperty('y_next',$p1));this.renderLine($B,1,($p0.getMarkProperty('color',$p2))[$p4],true);this.get_currentContext().restore();}if(!$p0.get_drawBorder()&&$p0.getRight($p1)===-1){this.get_currentContext().save();var $C=[];$C.add($p0.getMarkProperty('x1',$p1));$C.add($p0.getMarkProperty('y1',$p1));$C.add($p0.getMarkProperty('x_prev',$p1));$C.add($p0.getMarkProperty('y_prev',$p1));this.renderLine($C,1,($p0.getMarkProperty('color',$p2))[$p4],true);this.get_currentContext().restore();}break;case 'selectedOn':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x1',$p1),$p0.getMarkProperty('y1',$p1));this.renderFilledCircle(0,0,5,($p0.getMarkProperty('color',$p1))[$p4]);this.get_currentContext().restore();break;case 'selectedUnder':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x1',$p1),$p0.getMarkProperty('y1',$p1));this.renderCircle(0,0,5,($p0.getMarkProperty('selected_halo_color',$p1))[$p4],4);this.get_currentContext().restore();break;case 'selectedOn1':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderFilledCircle(0,0,5,($p0.getMarkProperty('color',$p1))[$p4]);this.get_currentContext().restore();break;case 'selectedUnder1':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,5,($p0.getMarkProperty('selected_halo_color',$p1))[$p4],4);this.get_currentContext().restore();break;case 'highlightedOn':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x1',$p1),$p0.getMarkProperty('y1',$p1));this.renderFilledCircle(0,0,5,($p0.getMarkProperty('color',$p1))[$p4]);this.get_currentContext().restore();break;case 'highlightedUnder':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x1',$p1),$p0.getMarkProperty('y1',$p1));this.renderCircle(0,0,5,($p0.getMarkProperty('selected_multi_prim_halo_color',$p1))[$p4],4);this.get_currentContext().restore();break;case 'highlightedOn1':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderFilledCircle(0,0,5,($p0.getMarkProperty('color',$p1))[$p4]);this.get_currentContext().restore();break;case 'highlightedUnder1':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,5,($p0.getMarkProperty('selected_multi_prim_halo_color',$p1))[$p4],4);this.get_currentContext().restore();break;default:break;}if(!!$p0.get_clipCase()){this.get_currentContext().restore();}},$23:function($p0,$p1){var $0=$p0.get_markCount();var $1=$p0.get_hasSelection();var $2=$p0.get_hasBrushing();var $3='colorOverrideNone';this.get_currentContext().save();var $4=this.setupContextForTextRendering($p0);switch($p1){case 'normalUnderPass':if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}var $5=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $6=0;$6<$0;$6++){if(!$p0.markHasLabel($6)||!$p0.markLabelNeedsDraw($6,$5)){continue;}if($p0.getMarkState($6)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $7=$p0.getMarkBounds($6);var $8=$p0.pixelToDomainX($7.x);var $9=$p0.pixelToDomainX($7.x+$7.w);var $A=$p0.getMarkInstances($8,$9);for(var $B=$A.first;$B<=$A.second;++$B){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($B),0);this.$24($p0,$6,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$24($p0,$6,'normalUnder',$3);}}$3='colorOverrideNone';var $C=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $D=0;$D<$0;$D++){if(!$p0.markHasLabel($D)||!$p0.markLabelNeedsDraw($D,$C)){continue;}if($p0.getMarkState($D)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $E=$p0.getMarkBounds($D);var $F=$p0.pixelToDomainX($E.x);var $10=$p0.pixelToDomainX($E.x+$E.w);var $11=$p0.getMarkInstances($F,$10);for(var $12=$11.first;$12<=$11.second;++$12){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($12),0);this.$24($p0,$D,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$24($p0,$D,'normalUnder',$3);}}$3='colorOverrideNone';var $13=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $14=0;$14<$0;$14++){if(!$p0.markHasLabel($14)||!$p0.markLabelNeedsDraw($14,$13)){continue;}if($p0.getMarkState($14)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $15=$p0.getMarkBounds($14);var $16=$p0.pixelToDomainX($15.x);var $17=$p0.pixelToDomainX($15.x+$15.w);var $18=$p0.getMarkInstances($16,$17);for(var $19=$18.first;$19<=$18.second;++$19){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($19),0);this.$24($p0,$14,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$24($p0,$14,'normalUnder',$3);}}break;case 'normalOnPass':if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}var $1A=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $1B=0;$1B<$0;$1B++){if(!$p0.markHasLabel($1B)||!$p0.markLabelNeedsDraw($1B,$1A)){continue;}if($p0.getMarkState($1B)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $1C=$p0.getMarkBounds($1B);var $1D=$p0.pixelToDomainX($1C.x);var $1E=$p0.pixelToDomainX($1C.x+$1C.w);var $1F=$p0.getMarkInstances($1D,$1E);for(var $20=$1F.first;$20<=$1F.second;++$20){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($20),0);var $21=this.get_currentContext().get_textAlign()==='end';var $22=$p0.getMarkLabelProperty('text_run_offset',$1B);var $23=$p0.getMarkLabelProperty('text_run_count',$1B);var $24=$23>1;for(var $25=0;$25<$23;$25++){var $26=$25+$22;if($21){$26=$22+$23-$25-1;}this.$25($p0,$1B,$26,$24,'normalOn',$3,$4);}this.clearPrevTextRunInfo();this.get_currentContext().restore();}}else{var $27=this.get_currentContext().get_textAlign()==='end';var $28=$p0.getMarkLabelProperty('text_run_offset',$1B);var $29=$p0.getMarkLabelProperty('text_run_count',$1B);var $2A=$29>1;for(var $2B=0;$2B<$29;$2B++){var $2C=$2B+$28;if($27){$2C=$28+$29-$2B-1;}this.$25($p0,$1B,$2C,$2A,'normalOn',$3,$4);}this.clearPrevTextRunInfo();}}break;case 'highlightedUnderPass':break;case 'highlightedOnPass':if($1||$2){$3='colorOverrideNone';var $2D=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $2E=0;$2E<$0;$2E++){if(!$p0.markHasLabel($2E)||!$p0.markLabelNeedsDraw($2E,$2D)){continue;}if($p0.getMarkState($2E)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $2F=$p0.getMarkBounds($2E);var $30=$p0.pixelToDomainX($2F.x);var $31=$p0.pixelToDomainX($2F.x+$2F.w);var $32=$p0.getMarkInstances($30,$31);for(var $33=$32.first;$33<=$32.second;++$33){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($33),0);var $34=this.get_currentContext().get_textAlign()==='end';var $35=$p0.getMarkLabelProperty('text_run_offset',$2E);var $36=$p0.getMarkLabelProperty('text_run_count',$2E);var $37=$36>1;for(var $38=0;$38<$36;$38++){var $39=$38+$35;if($34){$39=$35+$36-$38-1;}this.$25($p0,$2E,$39,$37,'highlightedOn',$3,$4);}this.clearPrevTextRunInfo();this.get_currentContext().restore();}}else{var $3A=this.get_currentContext().get_textAlign()==='end';var $3B=$p0.getMarkLabelProperty('text_run_offset',$2E);var $3C=$p0.getMarkLabelProperty('text_run_count',$2E);var $3D=$3C>1;for(var $3E=0;$3E<$3C;$3E++){var $3F=$3E+$3B;if($3A){$3F=$3B+$3C-$3E-1;}this.$25($p0,$2E,$3F,$3D,'highlightedOn',$3,$4);}this.clearPrevTextRunInfo();}}}break;case 'selectedUnderPass':if($1||$2){$3='colorOverrideOpaque';var $40=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $41=0;$41<$0;$41++){if(!$p0.markHasLabel($41)||!$p0.markLabelNeedsDraw($41,$40)){continue;}if($p0.getMarkState($41)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $42=$p0.getMarkBounds($41);var $43=$p0.pixelToDomainX($42.x);var $44=$p0.pixelToDomainX($42.x+$42.w);var $45=$p0.getMarkInstances($43,$44);for(var $46=$45.first;$46<=$45.second;++$46){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($46),0);this.$24($p0,$41,'selectedUnder',$3);this.get_currentContext().restore();}}else{this.$24($p0,$41,'selectedUnder',$3);}}}break;case 'selectedOnPass':if($1||$2){$3='colorOverrideOpaque';var $47=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $48=0;$48<$0;$48++){if(!$p0.markHasLabel($48)||!$p0.markLabelNeedsDraw($48,$47)){continue;}if($p0.getMarkState($48)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $49=$p0.getMarkBounds($48);var $4A=$p0.pixelToDomainX($49.x);var $4B=$p0.pixelToDomainX($49.x+$49.w);var $4C=$p0.getMarkInstances($4A,$4B);for(var $4D=$4C.first;$4D<=$4C.second;++$4D){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($4D),0);var $4E=this.get_currentContext().get_textAlign()==='end';var $4F=$p0.getMarkLabelProperty('text_run_offset',$48);var $50=$p0.getMarkLabelProperty('text_run_count',$48);var $51=$50>1;for(var $52=0;$52<$50;$52++){var $53=$52+$4F;if($4E){$53=$4F+$50-$52-1;}this.$25($p0,$48,$53,$51,'normalOn',$3,$4);}this.clearPrevTextRunInfo();this.get_currentContext().restore();}}else{var $54=this.get_currentContext().get_textAlign()==='end';var $55=$p0.getMarkLabelProperty('text_run_offset',$48);var $56=$p0.getMarkLabelProperty('text_run_count',$48);var $57=$56>1;for(var $58=0;$58<$56;$58++){var $59=$58+$55;if($54){$59=$55+$56-$58-1;}this.$25($p0,$48,$59,$57,'normalOn',$3,$4);}this.clearPrevTextRunInfo();}}}break;}this.get_currentContext().restore();},$24:function($p0,$p1,$p2,$p3){if(!!$p0.get_clipCase()){this.get_currentContext().save();this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p2){case 'normalUnder':if($p0.get_hasBackground()&&$p0.get_hasHalos()){var $0=$p0.getMarkLabelProperty('x',$p1);var $1=$p0.getMarkLabelProperty('y',$p1);var $2=$p0.getMarkLabelProperty('width',$p1);var $3=-$p0.getMarkLabelProperty('height',$p1);if($3<0){$1+=$3;$3=Math.abs($3);}var $4=0;var $5=0;var $6;if($p0.isMarkImpliedSelected($p1)){$6=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$6=($p0.getMarkLabelProperty('halo_color',$p1))[$p3];}this.renderFilledBar($0+$4,$1+$5,$2,$3,$6,0,0);}if($p0.isMarkDebug($p1)){var $7=$p0.getMarkLabelProperty('x',$p1);var $8=$p0.getMarkLabelProperty('y',$p1);var $9=$p0.getMarkLabelProperty('width',$p1);var $A=-$p0.getMarkLabelProperty('height',$p1);if($A<0){$8+=$A;$A=Math.abs($A);}var $B=0;var $C=0;var $D;if($p0.isMarkImpliedSelected($p1)){$D=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$D=($p0.getMarkProperty('halo_color',$p1))[$p3];}this.renderFilledBar($7+$B,$8+$C,$9,$A,$D,0,0);}break;case 'normalOn':break;case 'highlightedUnder':if($p0.get_hasBackground()&&$p0.get_hasHalos()){var $E=$p0.getMarkLabelProperty('x',$p1);var $F=$p0.getMarkLabelProperty('y',$p1);var $10=$p0.getMarkLabelProperty('width',$p1);var $11=-$p0.getMarkLabelProperty('height',$p1);if($11<0){$F+=$11;$11=Math.abs($11);}var $12=0;var $13=0;var $14;if($p0.isMarkImpliedSelected($p1)){$14=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$14=($p0.getMarkLabelProperty('halo_color',$p1))[$p3];}this.renderFilledBar($E+$12,$F+$13,$10,$11,$14,0,0);}if($p0.isMarkDebug($p1)){var $15=$p0.getMarkLabelProperty('x',$p1);var $16=$p0.getMarkLabelProperty('y',$p1);var $17=$p0.getMarkLabelProperty('width',$p1);var $18=-$p0.getMarkLabelProperty('height',$p1);if($18<0){$16+=$18;$18=Math.abs($18);}var $19=0;var $1A=0;var $1B;if($p0.isMarkImpliedSelected($p1)){$1B=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$1B=($p0.getMarkProperty('halo_color',$p1))[$p3];}this.renderFilledBar($15+$19,$16+$1A,$17,$18,$1B,0,0);}break;case 'highlightedOn':break;case 'selectedUnder':break;default:break;}if(!!$p0.get_clipCase()){this.get_currentContext().restore();}},$25:function($p0,$p1,$p2,$p3,$p4,$p5,$p6){if(!!$p0.get_clipCase()){this.get_currentContext().save();this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p4){case 'normalUnder':break;case 'normalOn':var $0=$p0.getTextRunProperty('text_style_id',$p2);$p6($0);var $1=$p0.$34($0,$p1,$p5);var $2=$p0.getTextRunProperty('text_run',$p2);var $3=$p0.getMarkLabelProperty('x',$p1)+$p0.getTextRunProperty('text_run_x',$p2);var $4=$p0.getMarkLabelProperty('y',$p1)+$p0.getTextRunProperty('text_run_y',$p2);var $5=(this.get_currentContext().get_isTextAngleHorizontal())?$p0.getMarkLabelProperty('width',$p1):$p0.getMarkLabelProperty('height',$p1);this.renderText($2,$3,$4,$5,$1,$p3);break;case 'highlightedUnder':break;case 'highlightedOn':var $6=$p0.getTextRunProperty('text_style_id',$p2);$p6($6);var $7=$p0.$34($6,$p1,$p5);var $8=$p0.getTextRunProperty('text_run',$p2);var $9=$p0.getMarkLabelProperty('x',$p1)+$p0.getTextRunProperty('text_run_x',$p2);var $A=$p0.getMarkLabelProperty('y',$p1)+$p0.getTextRunProperty('text_run_y',$p2);var $B=(this.get_currentContext().get_isTextAngleHorizontal())?$p0.getMarkLabelProperty('width',$p1):$p0.getMarkLabelProperty('height',$p1);this.renderText($8,$9,$A,$B,$7,$p3);break;case 'selectedUnder':break;default:break;}if(!!$p0.get_clipCase()){this.get_currentContext().restore();}},$26:function($p0,$p1){var $0=$p0.get_markCount();var $1=$p0.get_hasSelection();var $2=$p0.get_hasBrushing();var $3=$p0.get_lineDrawState();var $4='colorOverrideNone';this.get_currentContext().save();switch($p1){case 'normalUnderPass':if($p0.get_hasBackground()&&$p0.get_hasHalos()){if($1||$2){$4='colorOverrideFog';}else{$4='colorOverrideNone';}var $enum1=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum1.moveNext()){var $5=$enum1.current;var $6;if($p0.get_isWrappedDomain()){$6=$p0.getMarkInstances($5.minXDomain,$5.maxXDomain);}else{$6=new ss.Tuple(0,0);}for(var $7=$6.first;$7<=$6.second;++$7){if(!!$7){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($7),0);}var $8=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $9=$5.startIndex;$9<=$5.endIndex;$9++){if(!$p0.markNeedsDraw($9,$8)){continue;}this.$27($p0,$9,'normalUnder',$4);}if(!!$7){this.get_currentContext().restore();}}}}break;case 'normalOnPass':if($1||$2){$4='colorOverrideFog';}else{$4='colorOverrideNone';}var $enum2=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum2.moveNext()){var $A=$enum2.current;if($A.get_lineState()!=='lineStateNormal'){continue;}var $B;if($p0.get_isWrappedDomain()){$B=$p0.getMarkInstances($A.minXDomain,$A.maxXDomain);}else{$B=new ss.Tuple(0,0);}for(var $C=$B.first;$C<=$B.second;++$C){if(!!$C){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($C),0);}var $D=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $E=$A.startIndex;$E<=$A.endIndex;$E++){if(!$p0.markNeedsDraw($E,$D)){continue;}this.$27($p0,$E,'normalOn',$4);}if(!!$C){this.get_currentContext().restore();}}}break;case 'highlightedUnderPass':break;case 'highlightedOnPass':if($1||$2){var $enum3=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum3.moveNext()){var $F=$enum3.current;if($F.get_lineState()!=='lineStateHighlighted'){continue;}var $10;if($p0.get_isWrappedDomain()){$10=$p0.getMarkInstances($F.minXDomain,$F.maxXDomain);}else{$10=new ss.Tuple(0,0);}for(var $11=$10.first;$11<=$10.second;++$11){if(!!$11){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($11),0);}$4='colorOverrideFog';var $12=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $13=$F.startIndex;$13<=$F.endIndex;$13++){if(!$p0.markNeedsDraw($13,$12)){continue;}if($p0.getMarkState($13)!=='markStateNormal'){continue;}this.$27($p0,$13,'normalOn',$4);}$4='colorOverrideNone';var $14=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $15=$F.startIndex;$15<=$F.endIndex;$15++){if(!$p0.markNeedsDraw($15,$14)){continue;}if($p0.getMarkState($15)!=='markStateHighlighted'){continue;}this.$27($p0,$15,'highlightedOn',$4);}if(!!$11){this.get_currentContext().restore();}}}}break;case 'selectedUnderPass':break;case 'selectedOnPass':if($1||$2){var $enum4=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum4.moveNext()){var $16=$enum4.current;if($16.get_lineState()!=='lineStateSelected'){continue;}var $17;if($p0.get_isWrappedDomain()){$17=$p0.getMarkInstances($16.minXDomain,$16.maxXDomain);}else{$17=new ss.Tuple(0,0);}for(var $18=$17.first;$18<=$17.second;++$18){if(!!$18){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($18),0);}$4='colorOverrideFog';var $19=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $1A=$16.startIndex;$1A<=$16.endIndex;$1A++){if(!$p0.markNeedsDraw($1A,$19)){continue;}if($p0.getMarkState($1A)!=='markStateNormal'){continue;}this.$27($p0,$1A,'normalOn',$4);}$4='colorOverrideNone';var $1B=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $1C=$16.startIndex;$1C<=$16.endIndex;$1C++){if(!$p0.markNeedsDraw($1C,$1B)){continue;}if($p0.getMarkState($1C)!=='markStateHighlighted'){continue;}this.$27($p0,$1C,'highlightedOn',$4);}$4='colorOverrideOpaque';var $1D=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $1E=$16.startIndex;$1E<=$16.endIndex;$1E++){if(!$p0.markNeedsDraw($1E,$1D)){continue;}if($p0.getMarkState($1E)!=='markStateSelected'){continue;}this.$27($p0,$1E,'selectedUnder',$4);}var $1F=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $20=$16.startIndex;$20<=$16.endIndex;$20++){if(!$p0.markNeedsDraw($20,$1F)){continue;}if($p0.getMarkState($20)!=='markStateSelected'){continue;}this.$27($p0,$20,'selectedOn',$4);}if(!!$18){this.get_currentContext().restore();}}}}break;}this.get_currentContext().restore();},$27:function($p0,$p1,$p2,$p3){this.get_currentContext().save();if(!!$p0.get_clipCase()){this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p2){case 'normalUnder':var $0=$p0.getMarkProperty('size',$p1)/2;var $1=$p0.getMarkProperty('theta',$p1);var $2=$p0.getMarkProperty('theta1',$p1);var $3=false;if($1>$2){$3=true;}this.renderWedge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$0,$1,$2,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$3);break;case 'normalOn':var $4=$p0.getMarkProperty('size',$p1)/2;var $5=$p0.getMarkProperty('theta',$p1);var $6=$p0.getMarkProperty('theta1',$p1);if($5>$6){var $A=$5;$5=$6;$6=$A;}var $7=$p0.getMarkProperty('x',$p1);var $8=$p0.getMarkProperty('y',$p1);var $9=($p0.getMarkProperty('color',$p1))[$p3];if($p0.getMarkProperty('alpha',$p1)>=1&&$p2!=='selectedOn'){var $B=tab.CanvasRenderer.toCanvasAngle($5);this.get_currentContext().beginPath();this.get_currentContext().set_lineCap('butt');this.get_currentContext().set_lineWidth(1.5);this.get_currentContext().set_strokeStyle($9);this.get_currentContext().moveTo($7,$8);this.get_currentContext().lineTo($7+(Math.cos($B)*$4),$8+(Math.sin($B)*$4));this.get_currentContext().stroke();}this.renderFilledWedge($7,$8,$4,$5,$6,$9);if($p0.getMarkProperty('draw_border',$p1)){var $C=$p0.getMarkProperty('theta',$p1);var $D=$p0.getMarkProperty('theta1',$p1);var $E=false;if($C>$D){$E=true;}this.renderWedge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$4,$C,$D,($p0.getMarkProperty('border_color',$p1))[$p3],1,$E);}break;case 'highlightedUnder':var $F=$p0.getMarkProperty('size',$p1)/2;var $10=$p0.getMarkProperty('theta',$p1);var $11=$p0.getMarkProperty('theta1',$p1);var $12=false;if($10>$11){$12=true;}this.renderWedge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$F,$10,$11,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$12);break;case 'highlightedOn':var $13=$p0.getMarkProperty('size',$p1)/2;var $14=$p0.getMarkProperty('theta',$p1);var $15=$p0.getMarkProperty('theta1',$p1);if($14>$15){var $19=$14;$14=$15;$15=$19;}var $16=$p0.getMarkProperty('x',$p1);var $17=$p0.getMarkProperty('y',$p1);var $18=($p0.getMarkProperty('color',$p1))[$p3];if($p0.getMarkProperty('alpha',$p1)>=1&&$p2!=='selectedOn'){var $1A=tab.CanvasRenderer.toCanvasAngle($14);this.get_currentContext().beginPath();this.get_currentContext().set_lineCap('butt');this.get_currentContext().set_lineWidth(1.5);this.get_currentContext().set_strokeStyle($18);this.get_currentContext().moveTo($16,$17);this.get_currentContext().lineTo($16+(Math.cos($1A)*$13),$17+(Math.sin($1A)*$13));this.get_currentContext().stroke();}this.renderFilledWedge($16,$17,$13,$14,$15,$18);if($p0.getMarkProperty('draw_border',$p1)){var $1B=$p0.getMarkProperty('theta',$p1);var $1C=$p0.getMarkProperty('theta1',$p1);var $1D=false;if($1B>$1C){$1D=true;}this.renderWedge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$13,$1B,$1C,($p0.getMarkProperty('border_color',$p1))[$p3],1,$1D);}break;case 'selectedUnder':var $1E=$p0.getMarkProperty('size',$p1)/2;var $1F=$p0.getMarkProperty('theta',$p1);var $20=$p0.getMarkProperty('theta1',$p1);var $21=false;if($1F>$20){$21=true;}this.renderWedge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$1E,$1F,$20,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4,$21);break;case 'selectedOn':var $22=$p0.getMarkProperty('size',$p1)/2;var $23=$p0.getMarkProperty('theta',$p1);var $24=$p0.getMarkProperty('theta1',$p1);if($23>$24){var $28=$23;$23=$24;$24=$28;}var $25=$p0.getMarkProperty('x',$p1);var $26=$p0.getMarkProperty('y',$p1);var $27=($p0.getMarkProperty('color',$p1))[$p3];if($p0.getMarkProperty('alpha',$p1)>=1&&$p2!=='selectedOn'){var $29=tab.CanvasRenderer.toCanvasAngle($23);this.get_currentContext().beginPath();this.get_currentContext().set_lineCap('butt');this.get_currentContext().set_lineWidth(1.5);this.get_currentContext().set_strokeStyle($27);this.get_currentContext().moveTo($25,$26);this.get_currentContext().lineTo($25+(Math.cos($29)*$22),$26+(Math.sin($29)*$22));this.get_currentContext().stroke();}this.renderFilledWedge($25,$26,$22,$23,$24,$27);if($p0.getMarkProperty('draw_border',$p1)){var $2A=$p0.getMarkProperty('theta',$p1);var $2B=$p0.getMarkProperty('theta1',$p1);var $2C=false;if($2A>$2B){$2C=true;}this.renderWedge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1),$22,$2A,$2B,($p0.getMarkProperty('border_color',$p1))[$p3],1,$2C);}break;default:break;}this.get_currentContext().restore();},$28:function($p0,$p1){var $0=$p0.get_markCount();var $1=$p0.get_hasSelection();var $2=$p0.get_hasBrushing();var $3='colorOverrideNone';this.get_currentContext().save();var $4=this.setupContextForTextRendering($p0);switch($p1){case 'normalUnderPass':if($p0.get_hasBackground()){if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}var $5=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $6=0;$6<$0;$6++){if(!$p0.markNeedsDraw($6,$5)){continue;}if($p0.getMarkState($6)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $7=$p0.getMarkBounds($6);var $8=$p0.pixelToDomainX($7.x);var $9=$p0.pixelToDomainX($7.x+$7.w);var $A=$p0.getMarkInstances($8,$9);for(var $B=$A.first;$B<=$A.second;++$B){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($B),0);this.$29($p0,$6,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$29($p0,$6,'normalUnder',$3);}}var $C=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $D=0;$D<$0;$D++){if(!$p0.markNeedsDraw($D,$C)){continue;}if($p0.getMarkState($D)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $E=$p0.getMarkBounds($D);var $F=$p0.pixelToDomainX($E.x);var $10=$p0.pixelToDomainX($E.x+$E.w);var $11=$p0.getMarkInstances($F,$10);for(var $12=$11.first;$12<=$11.second;++$12){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($12),0);this.$29($p0,$D,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$29($p0,$D,'normalUnder',$3);}}}break;case 'normalOnPass':if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}var $13=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $14=0;$14<$0;$14++){if(!$p0.markNeedsDraw($14,$13)){continue;}if($p0.getMarkState($14)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $15=$p0.getMarkBounds($14);var $16=$p0.pixelToDomainX($15.x);var $17=$p0.pixelToDomainX($15.x+$15.w);var $18=$p0.getMarkInstances($16,$17);for(var $19=$18.first;$19<=$18.second;++$19){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($19),0);var $1A=this.get_currentContext().get_textAlign()==='end';var $1B=$p0.getMarkProperty('text_run_offset',$14);var $1C=$p0.getMarkProperty('text_run_count',$14);var $1D=$1C>1;for(var $1E=0;$1E<$1C;$1E++){var $1F=$1E+$1B;if($1A){$1F=$1B+$1C-$1E-1;}this.$25($p0,$14,$1F,$1D,'normalOn',$3,$4);}this.clearPrevTextRunInfo();this.get_currentContext().restore();}}else{var $20=this.get_currentContext().get_textAlign()==='end';var $21=$p0.getMarkProperty('text_run_offset',$14);var $22=$p0.getMarkProperty('text_run_count',$14);var $23=$22>1;for(var $24=0;$24<$22;$24++){var $25=$24+$21;if($20){$25=$21+$22-$24-1;}this.$25($p0,$14,$25,$23,'normalOn',$3,$4);}this.clearPrevTextRunInfo();}}break;case 'highlightedUnderPass':if($1||$2){if(!$p0.get_hasBackground()){$3='colorOverrideNone';var $26=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $27=0;$27<$0;$27++){if(!$p0.markNeedsDraw($27,$26)){continue;}if($p0.getMarkState($27)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $28=$p0.getMarkBounds($27);var $29=$p0.pixelToDomainX($28.x);var $2A=$p0.pixelToDomainX($28.x+$28.w);var $2B=$p0.getMarkInstances($29,$2A);for(var $2C=$2B.first;$2C<=$2B.second;++$2C){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($2C),0);this.$29($p0,$27,'highlightedUnder',$3);this.get_currentContext().restore();}}else{this.$29($p0,$27,'highlightedUnder',$3);}}}}break;case 'highlightedOnPass':if($1||$2){$3='colorOverrideNone';var $2D=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $2E=0;$2E<$0;$2E++){if(!$p0.markNeedsDraw($2E,$2D)){continue;}if($p0.getMarkState($2E)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $2F=$p0.getMarkBounds($2E);var $30=$p0.pixelToDomainX($2F.x);var $31=$p0.pixelToDomainX($2F.x+$2F.w);var $32=$p0.getMarkInstances($30,$31);for(var $33=$32.first;$33<=$32.second;++$33){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($33),0);var $34=this.get_currentContext().get_textAlign()==='end';var $35=$p0.getMarkProperty('text_run_offset',$2E);var $36=$p0.getMarkProperty('text_run_count',$2E);var $37=$36>1;for(var $38=0;$38<$36;$38++){var $39=$38+$35;if($34){$39=$35+$36-$38-1;}this.$25($p0,$2E,$39,$37,'normalOn',$3,$4);}this.clearPrevTextRunInfo();this.get_currentContext().restore();}}else{var $3A=this.get_currentContext().get_textAlign()==='end';var $3B=$p0.getMarkProperty('text_run_offset',$2E);var $3C=$p0.getMarkProperty('text_run_count',$2E);var $3D=$3C>1;for(var $3E=0;$3E<$3C;$3E++){var $3F=$3E+$3B;if($3A){$3F=$3B+$3C-$3E-1;}this.$25($p0,$2E,$3F,$3D,'normalOn',$3,$4);}this.clearPrevTextRunInfo();}}}break;case 'selectedUnderPass':if($1||$2){$3='colorOverrideOpaque';var $40=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $41=0;$41<$0;$41++){if(!$p0.markNeedsDraw($41,$40)){continue;}if($p0.getMarkState($41)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $42=$p0.getMarkBounds($41);var $43=$p0.pixelToDomainX($42.x);var $44=$p0.pixelToDomainX($42.x+$42.w);var $45=$p0.getMarkInstances($43,$44);for(var $46=$45.first;$46<=$45.second;++$46){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($46),0);this.$29($p0,$41,'selectedUnder',$3);this.get_currentContext().restore();}}else{this.$29($p0,$41,'selectedUnder',$3);}}}break;case 'selectedOnPass':if($1||$2){$3='colorOverrideOpaque';var $47=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $48=0;$48<$0;$48++){if(!$p0.markNeedsDraw($48,$47)){continue;}if($p0.getMarkState($48)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $49=$p0.getMarkBounds($48);var $4A=$p0.pixelToDomainX($49.x);var $4B=$p0.pixelToDomainX($49.x+$49.w);var $4C=$p0.getMarkInstances($4A,$4B);for(var $4D=$4C.first;$4D<=$4C.second;++$4D){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($4D),0);var $4E=this.get_currentContext().get_textAlign()==='end';var $4F=$p0.getMarkProperty('text_run_offset',$48);var $50=$p0.getMarkProperty('text_run_count',$48);var $51=$50>1;for(var $52=0;$52<$50;$52++){var $53=$52+$4F;if($4E){$53=$4F+$50-$52-1;}this.$25($p0,$48,$53,$51,'normalOn',$3,$4);}this.clearPrevTextRunInfo();this.get_currentContext().restore();}}else{var $54=this.get_currentContext().get_textAlign()==='end';var $55=$p0.getMarkProperty('text_run_offset',$48);var $56=$p0.getMarkProperty('text_run_count',$48);var $57=$56>1;for(var $58=0;$58<$56;$58++){var $59=$58+$55;if($54){$59=$55+$56-$58-1;}this.$25($p0,$48,$59,$57,'normalOn',$3,$4);}this.clearPrevTextRunInfo();}}}break;}this.get_currentContext().restore();},$29:function($p0,$p1,$p2,$p3){if(!!$p0.get_clipCase()){this.get_currentContext().save();this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p2){case 'normalUnder':if(!(!!$p0.get_clipCase()&&$p0.useCellClipForSelection())){var $0=$p0.getMarkProperty('x',$p1);var $1=$p0.getMarkProperty('y',$p1);var $2=$p0.getMarkProperty('width',$p1);var $3=-$p0.getMarkProperty('height',$p1);if($3<0){$1+=$3;$3=Math.abs($3);}var $4=-$p0.getMarkProperty('width',$p1)/2;var $5=$p0.getMarkProperty('height',$p1)/2;var $6;if($p0.isMarkImpliedSelected($p1)){$6=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$6=($p0.getMarkProperty('halo_color',$p1))[$p3];}this.renderFilledBar($0+$4,$1+$5,$2,$3,$6,0,0);}if((!!$p0.get_clipCase()&&$p0.useCellClipForSelection())){var $7=$p0.getMarkProperty('x',$p1);var $8=$p0.getMarkProperty('y',$p1);var $9=$p0.getMarkProperty('clip_width',$p1);var $A=-$p0.getMarkProperty('clip_height',$p1);if($A<0){$8+=$A;$A=Math.abs($A);}var $B=-$p0.getMarkProperty('clip_width',$p1)/2;var $C=$p0.getMarkProperty('clip_height',$p1)/2;var $D;if($p0.isMarkImpliedSelected($p1)){$D=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$D=($p0.getMarkProperty('halo_color',$p1))[$p3];}this.renderFilledBar($7+$B,$8+$C,$9,$A,$D,0,0);}break;case 'normalOn':break;case 'highlightedUnder':if($p0.get_hasHaloHighlightColor()&&!(!!$p0.get_clipCase()&&$p0.useCellClipForSelection())){var $E=$p0.getMarkProperty('x',$p1);var $F=$p0.getMarkProperty('y',$p1);var $10=$p0.getMarkProperty('width',$p1);var $11=-$p0.getMarkProperty('height',$p1);if($11<0){$F+=$11;$11=Math.abs($11);}var $12=-$p0.getMarkProperty('width',$p1)/2;var $13=$p0.getMarkProperty('height',$p1)/2;var $14;if($p0.isMarkImpliedSelected($p1)){$14=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$14=($p0.getMarkProperty('highlighted_halo_color',$p1))[$p3];}this.renderFilledBar($E+$12,$F+$13,$10,$11,$14,0,0);}if($p0.get_hasHaloHighlightColor()&&(!!$p0.get_clipCase()&&$p0.useCellClipForSelection())){var $15=$p0.getMarkProperty('x',$p1);var $16=$p0.getMarkProperty('y',$p1);var $17=$p0.getMarkProperty('clip_width',$p1);var $18=-$p0.getMarkProperty('clip_height',$p1);if($18<0){$16+=$18;$18=Math.abs($18);}var $19=-$p0.getMarkProperty('clip_width',$p1)/2;var $1A=$p0.getMarkProperty('clip_height',$p1)/2;var $1B;if($p0.isMarkImpliedSelected($p1)){$1B=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$1B=($p0.getMarkProperty('highlighted_halo_color',$p1))[$p3];}this.renderFilledBar($15+$19,$16+$1A,$17,$18,$1B,0,0);}break;case 'selectedUnder':if(!(!!$p0.get_clipCase()&&$p0.useCellClipForSelection())){var $1C=$p0.getMarkProperty('x',$p1);var $1D=$p0.getMarkProperty('y',$p1);var $1E=$p0.getMarkProperty('width',$p1);var $1F=-$p0.getMarkProperty('height',$p1);if($1F<0){$1D+=$1F;$1F=Math.abs($1F);}var $20=-$p0.getMarkProperty('width',$p1)/2;var $21=$p0.getMarkProperty('height',$p1)/2;var $22;if($p0.isMarkImpliedSelected($p1)){$22=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$22=($p0.getMarkProperty('selected_halo_color',$p1))[$p3];}this.renderFilledBar($1C+$20,$1D+$21,$1E,$1F,$22,0,0);}if((!!$p0.get_clipCase()&&$p0.useCellClipForSelection())){var $23=$p0.getMarkProperty('x',$p1);var $24=$p0.getMarkProperty('y',$p1);var $25=$p0.getMarkProperty('clip_width',$p1);var $26=-$p0.getMarkProperty('clip_height',$p1);if($26<0){$24+=$26;$26=Math.abs($26);}var $27=-$p0.getMarkProperty('clip_width',$p1)/2;var $28=$p0.getMarkProperty('clip_height',$p1)/2;var $29;if($p0.isMarkImpliedSelected($p1)){$29=($p0.getMarkProperty('selected_halo_color',$p1))['colorOverrideOpaque'];}else{$29=($p0.getMarkProperty('selected_halo_color',$p1))[$p3];}this.renderFilledBar($23+$27,$24+$28,$25,$26,$29,0,0);}break;default:break;}if(!!$p0.get_clipCase()){this.get_currentContext().restore();}},$2A:function($p0,$p1){var $0=$p0.get_markCount();var $1=$p0.get_hasSelection();var $2=$p0.get_hasBrushing();var $3='colorOverrideNone';this.get_currentContext().save();this.get_currentContext().set_lineJoin('miter');switch($p1){case 'normalUnderPass':if($p0.get_hasBackground()&&$p0.get_hasHalos()){if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}var $4=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $5=0;$5<$0;$5++){if(!$p0.markNeedsDraw($5,$4)){continue;}if($p0.getMarkState($5)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $6=$p0.getMarkBounds($5);var $7=$p0.pixelToDomainX($6.x);var $8=$p0.pixelToDomainX($6.x+$6.w);var $9=$p0.getMarkInstances($7,$8);for(var $A=$9.first;$A<=$9.second;++$A){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($A),0);this.$2B($p0,$5,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$2B($p0,$5,'normalUnder',$3);}}$3='colorOverrideNone';var $B=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $C=0;$C<$0;$C++){if(!$p0.markNeedsDraw($C,$B)){continue;}if($p0.getMarkState($C)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $D=$p0.getMarkBounds($C);var $E=$p0.pixelToDomainX($D.x);var $F=$p0.pixelToDomainX($D.x+$D.w);var $10=$p0.getMarkInstances($E,$F);for(var $11=$10.first;$11<=$10.second;++$11){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($11),0);this.$2B($p0,$C,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$2B($p0,$C,'normalUnder',$3);}}}break;case 'normalOnPass':if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}var $12=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $13=0;$13<$0;$13++){if(!$p0.markNeedsDraw($13,$12)){continue;}if($p0.getMarkState($13)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $14=$p0.getMarkBounds($13);var $15=$p0.pixelToDomainX($14.x);var $16=$p0.pixelToDomainX($14.x+$14.w);var $17=$p0.getMarkInstances($15,$16);for(var $18=$17.first;$18<=$17.second;++$18){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($18),0);this.$2B($p0,$13,'normalOn',$3);this.get_currentContext().restore();}}else{this.$2B($p0,$13,'normalOn',$3);}}break;case 'highlightedUnderPass':break;case 'highlightedOnPass':if($1||$2){$3='colorOverrideNone';var $19=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $1A=0;$1A<$0;$1A++){if(!$p0.markNeedsDraw($1A,$19)){continue;}if($p0.getMarkState($1A)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $1B=$p0.getMarkBounds($1A);var $1C=$p0.pixelToDomainX($1B.x);var $1D=$p0.pixelToDomainX($1B.x+$1B.w);var $1E=$p0.getMarkInstances($1C,$1D);for(var $1F=$1E.first;$1F<=$1E.second;++$1F){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($1F),0);this.$2B($p0,$1A,'highlightedOn',$3);this.get_currentContext().restore();}}else{this.$2B($p0,$1A,'highlightedOn',$3);}}}break;case 'selectedUnderPass':if($1||$2){$3='colorOverrideOpaque';var $20=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $21=0;$21<$0;$21++){if(!$p0.markNeedsDraw($21,$20)){continue;}if($p0.getMarkState($21)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $22=$p0.getMarkBounds($21);var $23=$p0.pixelToDomainX($22.x);var $24=$p0.pixelToDomainX($22.x+$22.w);var $25=$p0.getMarkInstances($23,$24);for(var $26=$25.first;$26<=$25.second;++$26){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($26),0);this.$2B($p0,$21,'selectedUnder',$3);this.get_currentContext().restore();}}else{this.$2B($p0,$21,'selectedUnder',$3);}}}break;case 'selectedOnPass':if($1||$2){$3='colorOverrideOpaque';this.get_currentContext().save();if($p0.get_clipCase()!==3){this.get_currentContext().setClip($p0.getInsetPaneClipRect(2));}var $27=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $28=0;$28<$0;$28++){if(!$p0.markNeedsDraw($28,$27)){continue;}if($p0.getMarkState($28)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $29=$p0.getMarkBounds($28);var $2A=$p0.pixelToDomainX($29.x);var $2B=$p0.pixelToDomainX($29.x+$29.w);var $2C=$p0.getMarkInstances($2A,$2B);for(var $2D=$2C.first;$2D<=$2C.second;++$2D){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($2D),0);this.$2B($p0,$28,'selectedOn',$3);this.get_currentContext().restore();}}else{this.$2B($p0,$28,'selectedOn',$3);}}this.get_currentContext().restore();}break;}this.get_currentContext().restore();},$2B:function($p0,$p1,$p2,$p3){this.get_currentContext().save();if(!!$p0.get_clipCase()){this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p2){case 'normalUnder':var $0=$p0.getMarkProperty('size',$p1)/2;var $1=$p0.getMarkProperty('x',$p1);var $2=$p0.getMarkProperty('x1',$p1);var $3=$p0.getMarkProperty('y',$p1);var $4=$p0.getMarkProperty('y1',$p1);var $5=Math.min($1,$2);var $6=Math.min($3,$4);var $7=Math.abs($2-$1);var $8=Math.abs($4-$3);if($p0.scaleMarksInX()&&$p0.scaleMarksInY()){this.renderBarOutline($5,$6,$7,$8,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $9=$p0.getMarkProperty('x',$p1)-$0;var $A=$p0.getMarkProperty('x',$p1)+$0;var $B=$p0.getMarkProperty('y',$p1);var $C=$p0.getMarkProperty('y1',$p1);var $D=Math.min($9,$A);var $E=Math.min($B,$C);var $F=Math.abs($A-$9);var $10=Math.abs($C-$B);if(!$p0.scaleMarksInX()&&$p0.scaleMarksInY()){this.renderBarOutline($D,$E,$F,$10,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $11=$p0.getMarkProperty('x',$p1);var $12=$p0.getMarkProperty('x1',$p1);var $13=$p0.getMarkProperty('y',$p1)-$0;var $14=$p0.getMarkProperty('y',$p1)+$0;var $15=Math.min($11,$12);var $16=Math.min($13,$14);var $17=Math.abs($12-$11);var $18=Math.abs($14-$13);if($p0.scaleMarksInX()&&!$p0.scaleMarksInY()){this.renderBarOutline($15,$16,$17,$18,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $19=$p0.getMarkProperty('x',$p1)-$0;var $1A=$p0.getMarkProperty('x',$p1)+$0;var $1B=$p0.getMarkProperty('y',$p1)-$0;var $1C=$p0.getMarkProperty('y',$p1)+$0;var $1D=Math.min($19,$1A);var $1E=Math.min($1B,$1C);var $1F=Math.abs($1A-$19);var $20=Math.abs($1C-$1B);if(!$p0.scaleMarksInX()&&!$p0.scaleMarksInY()){this.renderBarOutline($1D,$1E,$1F,$20,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}break;case 'normalOn':var $21=$p0.getMarkProperty('size',$p1)/2;var $22=$p0.getMarkProperty('x',$p1);var $23=$p0.getMarkProperty('x1',$p1);var $24=$p0.getMarkProperty('y',$p1);var $25=$p0.getMarkProperty('y1',$p1);var $26=Math.min($22,$23);var $27=Math.min($24,$25);var $28=Math.abs($23-$22);var $29=Math.abs($25-$24);if($p0.scaleMarksInX()&&$p0.scaleMarksInY()){var $2A=0;this.renderFilledBar($26-$2A,$27-$2A,$28+(2*$2A),$29+(2*$2A),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $2B=$p0.getMarkProperty('x',$p1);var $2C=$p0.getMarkProperty('x1',$p1);var $2D=$p0.getMarkProperty('y',$p1);var $2E=$p0.getMarkProperty('y1',$p1);var $2F=Math.min($2B,$2C);var $30=Math.min($2D,$2E);var $31=Math.abs($2C-$2B);var $32=Math.abs($2E-$2D);if($p0.scaleMarksInX()&&$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($2F,$30,$31,$32,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $33=$p0.getMarkProperty('x',$p1)-$21;var $34=$p0.getMarkProperty('x',$p1)+$21;var $35=$p0.getMarkProperty('y',$p1);var $36=$p0.getMarkProperty('y1',$p1);var $37=Math.min($33,$34);var $38=Math.min($35,$36);var $39=Math.abs($34-$33);var $3A=Math.abs($36-$35);if(!$p0.scaleMarksInX()&&$p0.scaleMarksInY()){var $3B=0;this.renderFilledBar($37-$3B,$38-$3B,$39+(2*$3B),$3A+(2*$3B),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $3C=$p0.getMarkProperty('x',$p1)-$21;var $3D=$p0.getMarkProperty('x',$p1)+$21;var $3E=$p0.getMarkProperty('y',$p1);var $3F=$p0.getMarkProperty('y1',$p1);var $40=Math.min($3C,$3D);var $41=Math.min($3E,$3F);var $42=Math.abs($3D-$3C);var $43=Math.abs($3F-$3E);if(!$p0.scaleMarksInX()&&$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($40,$41,$42,$43,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $44=$p0.getMarkProperty('x',$p1);var $45=$p0.getMarkProperty('x1',$p1);var $46=$p0.getMarkProperty('y',$p1)-$21;var $47=$p0.getMarkProperty('y',$p1)+$21;var $48=Math.min($44,$45);var $49=Math.min($46,$47);var $4A=Math.abs($45-$44);var $4B=Math.abs($47-$46);if($p0.scaleMarksInX()&&!$p0.scaleMarksInY()){var $4C=0;this.renderFilledBar($48-$4C,$49-$4C,$4A+(2*$4C),$4B+(2*$4C),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $4D=$p0.getMarkProperty('x',$p1);var $4E=$p0.getMarkProperty('x1',$p1);var $4F=$p0.getMarkProperty('y',$p1)-$21;var $50=$p0.getMarkProperty('y',$p1)+$21;var $51=Math.min($4D,$4E);var $52=Math.min($4F,$50);var $53=Math.abs($4E-$4D);var $54=Math.abs($50-$4F);if($p0.scaleMarksInX()&&!$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($51,$52,$53,$54,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $55=$p0.getMarkProperty('x',$p1)-$21;var $56=$p0.getMarkProperty('x',$p1)+$21;var $57=$p0.getMarkProperty('y',$p1)-$21;var $58=$p0.getMarkProperty('y',$p1)+$21;var $59=Math.min($55,$56);var $5A=Math.min($57,$58);var $5B=Math.abs($56-$55);var $5C=Math.abs($58-$57);if(!$p0.scaleMarksInX()&&!$p0.scaleMarksInY()){var $5D=0;this.renderFilledBar($59-$5D,$5A-$5D,$5B+(2*$5D),$5C+(2*$5D),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $5E=$p0.getMarkProperty('x',$p1)-$21;var $5F=$p0.getMarkProperty('x',$p1)+$21;var $60=$p0.getMarkProperty('y',$p1)-$21;var $61=$p0.getMarkProperty('y',$p1)+$21;var $62=Math.min($5E,$5F);var $63=Math.min($60,$61);var $64=Math.abs($5F-$5E);var $65=Math.abs($61-$60);if(!$p0.scaleMarksInX()&&!$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($62,$63,$64,$65,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight());}break;case 'highlightedUnder':var $66=$p0.getMarkProperty('size',$p1)/2;var $67=$p0.getMarkProperty('x',$p1);var $68=$p0.getMarkProperty('x1',$p1);var $69=$p0.getMarkProperty('y',$p1);var $6A=$p0.getMarkProperty('y1',$p1);var $6B=Math.min($67,$68);var $6C=Math.min($69,$6A);var $6D=Math.abs($68-$67);var $6E=Math.abs($6A-$69);if($p0.scaleMarksInX()&&$p0.scaleMarksInY()){this.renderBarOutline($6B,$6C,$6D,$6E,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $6F=$p0.getMarkProperty('x',$p1)-$66;var $70=$p0.getMarkProperty('x',$p1)+$66;var $71=$p0.getMarkProperty('y',$p1);var $72=$p0.getMarkProperty('y1',$p1);var $73=Math.min($6F,$70);var $74=Math.min($71,$72);var $75=Math.abs($70-$6F);var $76=Math.abs($72-$71);if(!$p0.scaleMarksInX()&&$p0.scaleMarksInY()){this.renderBarOutline($73,$74,$75,$76,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $77=$p0.getMarkProperty('x',$p1);var $78=$p0.getMarkProperty('x1',$p1);var $79=$p0.getMarkProperty('y',$p1)-$66;var $7A=$p0.getMarkProperty('y',$p1)+$66;var $7B=Math.min($77,$78);var $7C=Math.min($79,$7A);var $7D=Math.abs($78-$77);var $7E=Math.abs($7A-$79);if($p0.scaleMarksInX()&&!$p0.scaleMarksInY()){this.renderBarOutline($7B,$7C,$7D,$7E,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $7F=$p0.getMarkProperty('x',$p1)-$66;var $80=$p0.getMarkProperty('x',$p1)+$66;var $81=$p0.getMarkProperty('y',$p1)-$66;var $82=$p0.getMarkProperty('y',$p1)+$66;var $83=Math.min($7F,$80);var $84=Math.min($81,$82);var $85=Math.abs($80-$7F);var $86=Math.abs($82-$81);if(!$p0.scaleMarksInX()&&!$p0.scaleMarksInY()){this.renderBarOutline($83,$84,$85,$86,($p0.getMarkProperty('halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}break;case 'highlightedOn':var $87=$p0.getMarkProperty('size',$p1)/2;var $88=$p0.getMarkProperty('x',$p1);var $89=$p0.getMarkProperty('x1',$p1);var $8A=$p0.getMarkProperty('y',$p1);var $8B=$p0.getMarkProperty('y1',$p1);var $8C=Math.min($88,$89);var $8D=Math.min($8A,$8B);var $8E=Math.abs($89-$88);var $8F=Math.abs($8B-$8A);if($p0.scaleMarksInX()&&$p0.scaleMarksInY()){var $90=0;this.renderFilledBar($8C-$90,$8D-$90,$8E+(2*$90),$8F+(2*$90),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $91=$p0.getMarkProperty('x',$p1);var $92=$p0.getMarkProperty('x1',$p1);var $93=$p0.getMarkProperty('y',$p1);var $94=$p0.getMarkProperty('y1',$p1);var $95=Math.min($91,$92);var $96=Math.min($93,$94);var $97=Math.abs($92-$91);var $98=Math.abs($94-$93);if($p0.scaleMarksInX()&&$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($95,$96,$97,$98,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $99=$p0.getMarkProperty('x',$p1)-$87;var $9A=$p0.getMarkProperty('x',$p1)+$87;var $9B=$p0.getMarkProperty('y',$p1);var $9C=$p0.getMarkProperty('y1',$p1);var $9D=Math.min($99,$9A);var $9E=Math.min($9B,$9C);var $9F=Math.abs($9A-$99);var $A0=Math.abs($9C-$9B);if(!$p0.scaleMarksInX()&&$p0.scaleMarksInY()){var $A1=0;this.renderFilledBar($9D-$A1,$9E-$A1,$9F+(2*$A1),$A0+(2*$A1),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $A2=$p0.getMarkProperty('x',$p1)-$87;var $A3=$p0.getMarkProperty('x',$p1)+$87;var $A4=$p0.getMarkProperty('y',$p1);var $A5=$p0.getMarkProperty('y1',$p1);var $A6=Math.min($A2,$A3);var $A7=Math.min($A4,$A5);var $A8=Math.abs($A3-$A2);var $A9=Math.abs($A5-$A4);if(!$p0.scaleMarksInX()&&$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($A6,$A7,$A8,$A9,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $AA=$p0.getMarkProperty('x',$p1);var $AB=$p0.getMarkProperty('x1',$p1);var $AC=$p0.getMarkProperty('y',$p1)-$87;var $AD=$p0.getMarkProperty('y',$p1)+$87;var $AE=Math.min($AA,$AB);var $AF=Math.min($AC,$AD);var $B0=Math.abs($AB-$AA);var $B1=Math.abs($AD-$AC);if($p0.scaleMarksInX()&&!$p0.scaleMarksInY()){var $B2=0;this.renderFilledBar($AE-$B2,$AF-$B2,$B0+(2*$B2),$B1+(2*$B2),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $B3=$p0.getMarkProperty('x',$p1);var $B4=$p0.getMarkProperty('x1',$p1);var $B5=$p0.getMarkProperty('y',$p1)-$87;var $B6=$p0.getMarkProperty('y',$p1)+$87;var $B7=Math.min($B3,$B4);var $B8=Math.min($B5,$B6);var $B9=Math.abs($B4-$B3);var $BA=Math.abs($B6-$B5);if($p0.scaleMarksInX()&&!$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($B7,$B8,$B9,$BA,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $BB=$p0.getMarkProperty('x',$p1)-$87;var $BC=$p0.getMarkProperty('x',$p1)+$87;var $BD=$p0.getMarkProperty('y',$p1)-$87;var $BE=$p0.getMarkProperty('y',$p1)+$87;var $BF=Math.min($BB,$BC);var $C0=Math.min($BD,$BE);var $C1=Math.abs($BC-$BB);var $C2=Math.abs($BE-$BD);if(!$p0.scaleMarksInX()&&!$p0.scaleMarksInY()){var $C3=0;this.renderFilledBar($BF-$C3,$C0-$C3,$C1+(2*$C3),$C2+(2*$C3),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $C4=$p0.getMarkProperty('x',$p1)-$87;var $C5=$p0.getMarkProperty('x',$p1)+$87;var $C6=$p0.getMarkProperty('y',$p1)-$87;var $C7=$p0.getMarkProperty('y',$p1)+$87;var $C8=Math.min($C4,$C5);var $C9=Math.min($C6,$C7);var $CA=Math.abs($C5-$C4);var $CB=Math.abs($C7-$C6);if(!$p0.scaleMarksInX()&&!$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($C8,$C9,$CA,$CB,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight());}break;case 'selectedUnder':var $CC=$p0.getMarkProperty('size',$p1)/2;var $CD=1;var $CE=$p0.getMarkProperty('x',$p1);var $CF=$p0.getMarkProperty('x1',$p1);var $D0=$p0.getMarkProperty('y',$p1);var $D1=$p0.getMarkProperty('y1',$p1);var $D2=Math.min($CE,$CF);var $D3=Math.min($D0,$D1);var $D4=Math.abs($CF-$CE);var $D5=Math.abs($D1-$D0);if($p0.scaleMarksInX()&&$p0.scaleMarksInY()&&!$p0.clippedByPane($D2,$D3,$D4,$D5)){this.renderBarOutline($D2,$D3,$D4,$D5,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $D6=$p0.getMarkProperty('x',$p1);var $D7=$p0.getMarkProperty('x1',$p1);var $D8=$p0.getMarkProperty('y',$p1);var $D9=$p0.getMarkProperty('y1',$p1);var $DA=Math.min($D6,$D7);var $DB=Math.min($D8,$D9);var $DC=Math.abs($D7-$D6);var $DD=Math.abs($D9-$D8);if($p0.scaleMarksInX()&&$p0.scaleMarksInY()&&$p0.clippedByPane($DA,$DB,$DC,$DD)){var $DE=2;this.renderFilledBar($DA-$DE,$DB-$DE,$DC+(2*$DE),$DD+(2*$DE),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $DF=$p0.getMarkProperty('x',$p1);var $E0=$p0.getMarkProperty('x1',$p1)+$CD;var $E1=$p0.getMarkProperty('y',$p1);var $E2=$p0.getMarkProperty('y1',$p1)+$CD;var $E3=Math.min($DF,$E0);var $E4=Math.min($E1,$E2);var $E5=Math.abs($E0-$DF);var $E6=Math.abs($E2-$E1);if($p0.scaleMarksInX()&&$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($E3,$E4,$E5,$E6,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $E7=$p0.getMarkProperty('x',$p1)-$CC;var $E8=$p0.getMarkProperty('x',$p1)+$CC;var $E9=$p0.getMarkProperty('y',$p1);var $EA=$p0.getMarkProperty('y1',$p1);var $EB=Math.min($E7,$E8);var $EC=Math.min($E9,$EA);var $ED=Math.abs($E8-$E7);var $EE=Math.abs($EA-$E9);if(!$p0.scaleMarksInX()&&$p0.scaleMarksInY()&&!$p0.clippedByPane($EB,$EC,$ED,$EE)){this.renderBarOutline($EB,$EC,$ED,$EE,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $EF=$p0.getMarkProperty('x',$p1)-$CC;var $F0=$p0.getMarkProperty('x',$p1)+$CC;var $F1=$p0.getMarkProperty('y',$p1);var $F2=$p0.getMarkProperty('y1',$p1);var $F3=Math.min($EF,$F0);var $F4=Math.min($F1,$F2);var $F5=Math.abs($F0-$EF);var $F6=Math.abs($F2-$F1);if(!$p0.scaleMarksInX()&&$p0.scaleMarksInY()&&$p0.clippedByPane($F3,$F4,$F5,$F6)){var $F7=2;this.renderFilledBar($F3-$F7,$F4-$F7,$F5+(2*$F7),$F6+(2*$F7),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $F8=$p0.getMarkProperty('x',$p1)-$CC;var $F9=$p0.getMarkProperty('x',$p1)+$CC+$CD;var $FA=$p0.getMarkProperty('y',$p1);var $FB=$p0.getMarkProperty('y1',$p1)+$CD;var $FC=Math.min($F8,$F9);var $FD=Math.min($FA,$FB);var $FE=Math.abs($F9-$F8);var $FF=Math.abs($FB-$FA);if(!$p0.scaleMarksInX()&&$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($FC,$FD,$FE,$FF,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $100=$p0.getMarkProperty('x',$p1);var $101=$p0.getMarkProperty('x1',$p1);var $102=$p0.getMarkProperty('y',$p1)-$CC;var $103=$p0.getMarkProperty('y',$p1)+$CC;var $104=Math.min($100,$101);var $105=Math.min($102,$103);var $106=Math.abs($101-$100);var $107=Math.abs($103-$102);if($p0.scaleMarksInX()&&!$p0.scaleMarksInY()&&!$p0.clippedByPane($104,$105,$106,$107)){this.renderBarOutline($104,$105,$106,$107,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $108=$p0.getMarkProperty('x',$p1);var $109=$p0.getMarkProperty('x1',$p1);var $10A=$p0.getMarkProperty('y',$p1)-$CC;var $10B=$p0.getMarkProperty('y',$p1)+$CC;var $10C=Math.min($108,$109);var $10D=Math.min($10A,$10B);var $10E=Math.abs($109-$108);var $10F=Math.abs($10B-$10A);if($p0.scaleMarksInX()&&!$p0.scaleMarksInY()&&$p0.clippedByPane($10C,$10D,$10E,$10F)){var $110=2;this.renderFilledBar($10C-$110,$10D-$110,$10E+(2*$110),$10F+(2*$110),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $111=$p0.getMarkProperty('x',$p1);var $112=$p0.getMarkProperty('x1',$p1)+$CD;var $113=$p0.getMarkProperty('y',$p1)-$CC;var $114=$p0.getMarkProperty('y',$p1)+$CC+$CD;var $115=Math.min($111,$112);var $116=Math.min($113,$114);var $117=Math.abs($112-$111);var $118=Math.abs($114-$113);if($p0.scaleMarksInX()&&!$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($115,$116,$117,$118,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $119=$p0.getMarkProperty('x',$p1)-$CC;var $11A=$p0.getMarkProperty('x',$p1)+$CC;var $11B=$p0.getMarkProperty('y',$p1)-$CC;var $11C=$p0.getMarkProperty('y',$p1)+$CC;var $11D=Math.min($119,$11A);var $11E=Math.min($11B,$11C);var $11F=Math.abs($11A-$119);var $120=Math.abs($11C-$11B);if(!$p0.scaleMarksInX()&&!$p0.scaleMarksInY()&&!$p0.clippedByPane($11D,$11E,$11F,$120)){this.renderBarOutline($11D,$11E,$11F,$120,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $121=$p0.getMarkProperty('x',$p1)-$CC;var $122=$p0.getMarkProperty('x',$p1)+$CC;var $123=$p0.getMarkProperty('y',$p1)-$CC;var $124=$p0.getMarkProperty('y',$p1)+$CC;var $125=Math.min($121,$122);var $126=Math.min($123,$124);var $127=Math.abs($122-$121);var $128=Math.abs($124-$123);if(!$p0.scaleMarksInX()&&!$p0.scaleMarksInY()&&$p0.clippedByPane($125,$126,$127,$128)){var $129=2;this.renderFilledBar($125-$129,$126-$129,$127+(2*$129),$128+(2*$129),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $12A=$p0.getMarkProperty('x',$p1)-$CC;var $12B=$p0.getMarkProperty('x',$p1)+$CC+$CD;var $12C=$p0.getMarkProperty('y',$p1)-$CC;var $12D=$p0.getMarkProperty('y',$p1)+$CC+$CD;var $12E=Math.min($12A,$12B);var $12F=Math.min($12C,$12D);var $130=Math.abs($12B-$12A);var $131=Math.abs($12D-$12C);if(!$p0.scaleMarksInX()&&!$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($12E,$12F,$130,$131,($p0.getMarkProperty('border_color',$p1))[$p3],4,$p0.get_minBarWidth(),$p0.get_minBarHeight());}break;case 'selectedOn':var $132=$p0.getMarkProperty('size',$p1)/2;var $133=$p0.getMarkProperty('x',$p1);var $134=$p0.getMarkProperty('x1',$p1);var $135=$p0.getMarkProperty('y',$p1);var $136=$p0.getMarkProperty('y1',$p1);var $137=Math.min($133,$134);var $138=Math.min($135,$136);var $139=Math.abs($134-$133);var $13A=Math.abs($136-$135);if($p0.scaleMarksInX()&&$p0.scaleMarksInY()){var $13B=0;this.renderFilledBar($137-$13B,$138-$13B,$139+(2*$13B),$13A+(2*$13B),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $13C=$p0.getMarkProperty('x',$p1);var $13D=$p0.getMarkProperty('x1',$p1);var $13E=$p0.getMarkProperty('y',$p1);var $13F=$p0.getMarkProperty('y1',$p1);var $140=Math.min($13C,$13D);var $141=Math.min($13E,$13F);var $142=Math.abs($13D-$13C);var $143=Math.abs($13F-$13E);if($p0.scaleMarksInX()&&$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($140,$141,$142,$143,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $144=$p0.getMarkProperty('x',$p1)-$132;var $145=$p0.getMarkProperty('x',$p1)+$132;var $146=$p0.getMarkProperty('y',$p1);var $147=$p0.getMarkProperty('y1',$p1);var $148=Math.min($144,$145);var $149=Math.min($146,$147);var $14A=Math.abs($145-$144);var $14B=Math.abs($147-$146);if(!$p0.scaleMarksInX()&&$p0.scaleMarksInY()){var $14C=0;this.renderFilledBar($148-$14C,$149-$14C,$14A+(2*$14C),$14B+(2*$14C),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $14D=$p0.getMarkProperty('x',$p1)-$132;var $14E=$p0.getMarkProperty('x',$p1)+$132;var $14F=$p0.getMarkProperty('y',$p1);var $150=$p0.getMarkProperty('y1',$p1);var $151=Math.min($14D,$14E);var $152=Math.min($14F,$150);var $153=Math.abs($14E-$14D);var $154=Math.abs($150-$14F);if(!$p0.scaleMarksInX()&&$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($151,$152,$153,$154,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $155=$p0.getMarkProperty('x',$p1);var $156=$p0.getMarkProperty('x1',$p1);var $157=$p0.getMarkProperty('y',$p1)-$132;var $158=$p0.getMarkProperty('y',$p1)+$132;var $159=Math.min($155,$156);var $15A=Math.min($157,$158);var $15B=Math.abs($156-$155);var $15C=Math.abs($158-$157);if($p0.scaleMarksInX()&&!$p0.scaleMarksInY()){var $15D=0;this.renderFilledBar($159-$15D,$15A-$15D,$15B+(2*$15D),$15C+(2*$15D),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $15E=$p0.getMarkProperty('x',$p1);var $15F=$p0.getMarkProperty('x1',$p1);var $160=$p0.getMarkProperty('y',$p1)-$132;var $161=$p0.getMarkProperty('y',$p1)+$132;var $162=Math.min($15E,$15F);var $163=Math.min($160,$161);var $164=Math.abs($15F-$15E);var $165=Math.abs($161-$160);if($p0.scaleMarksInX()&&!$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($162,$163,$164,$165,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $166=$p0.getMarkProperty('x',$p1)-$132;var $167=$p0.getMarkProperty('x',$p1)+$132;var $168=$p0.getMarkProperty('y',$p1)-$132;var $169=$p0.getMarkProperty('y',$p1)+$132;var $16A=Math.min($166,$167);var $16B=Math.min($168,$169);var $16C=Math.abs($167-$166);var $16D=Math.abs($169-$168);if(!$p0.scaleMarksInX()&&!$p0.scaleMarksInY()){var $16E=0;this.renderFilledBar($16A-$16E,$16B-$16E,$16C+(2*$16E),$16D+(2*$16E),($p0.getMarkProperty('color',$p1))[$p3],$p0.get_minBarWidth(),$p0.get_minBarHeight());}var $16F=$p0.getMarkProperty('x',$p1)-$132;var $170=$p0.getMarkProperty('x',$p1)+$132;var $171=$p0.getMarkProperty('y',$p1)-$132;var $172=$p0.getMarkProperty('y',$p1)+$132;var $173=Math.min($16F,$170);var $174=Math.min($171,$172);var $175=Math.abs($170-$16F);var $176=Math.abs($172-$171);if(!$p0.scaleMarksInX()&&!$p0.scaleMarksInY()&&$p0.get_drawBorder()){this.renderBarOutline($173,$174,$175,$176,($p0.getMarkProperty('border_color',$p1))[$p3],1,$p0.get_minBarWidth(),$p0.get_minBarHeight());}break;default:break;}this.get_currentContext().restore();},$2C:function($p0,$p1){var $0=$p0.get_hasSelection();var $1=$p0.get_hasBrushing();var $2='colorOverrideNone';var $3=$p0.get_lineDrawState();this.get_currentContext().save();switch($p1){case 'normalUnderPass':if($p0.get_hasBackground()&&$p0.get_hasHalos()){if($0||$1){$2='colorOverrideFog';}else{$2='colorOverrideNone';}var $enum1=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum1.moveNext()){var $4=$enum1.current;if($4.get_lineState()!=='lineStateNormal'){continue;}var $5;if($p0.get_isWrappedDomain()){$5=$p0.getMarkInstances($4.minXDomain,$4.maxXDomain);}else{$5=new ss.Tuple(0,0);}for(var $6=$5.first;$6<=$5.second;++$6){if(!!$6){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($6),0);}var $7=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $8=$4.startIndex;$8<=$4.endIndex;$8++){if(!$p0.markNeedsDraw($8,$7)){continue;}if($p0.getLeft($8)!==-1||$p0.getRight($8)!==-1){this.$2D($p0,$8,'normalUnder',$2);}}var $9=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $A=$4.startIndex;$A<=$4.endIndex;$A++){if(!$p0.markNeedsDraw($A,$9)){continue;}this.$2D($p0,$A,'edgeUnder',$2);if(($p0.getLeft($A)===-1&&$p0.getRight($A)===-1)||$p0.shouldShowMarker($A)){this.$2D($p0,$A,'blobUnder',$2);}}if(!!$6){this.get_currentContext().restore();}}}var $enum2=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum2.moveNext()){var $B=$enum2.current;if($B.get_lineState()!=='lineStateHighlighted'){continue;}var $C;if($p0.get_isWrappedDomain()){$C=$p0.getMarkInstances($B.minXDomain,$B.maxXDomain);}else{$C=new ss.Tuple(0,0);}for(var $D=$C.first;$D<=$C.second;++$D){if(!!$D){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($D),0);}var $E=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $F=$B.startIndex;$F<=$B.endIndex;$F++){if(!$p0.markNeedsDraw($F,$E)){continue;}if($p0.getLeft($F)!==-1||$p0.getRight($F)!==-1){this.$2D($p0,$F,'normalUnder',$2);}}var $10=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $11=$B.startIndex;$11<=$B.endIndex;$11++){if(!$p0.markNeedsDraw($11,$10)){continue;}this.$2D($p0,$11,'edgeUnder',$2);if(($p0.getLeft($11)===-1&&$p0.getRight($11)===-1)||$p0.shouldShowMarker($11)){this.$2D($p0,$11,'blobUnder',$2);}}if(!!$D){this.get_currentContext().restore();}}}}break;case 'normalOnPass':if($0||$1){$2='colorOverrideFog';}else{$2='colorOverrideNone';}var $enum3=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum3.moveNext()){var $12=$enum3.current;if($12.get_lineState()!=='lineStateNormal'){continue;}var $13;if($p0.get_isWrappedDomain()){$13=$p0.getMarkInstances($12.minXDomain,$12.maxXDomain);}else{$13=new ss.Tuple(0,0);}for(var $14=$13.first;$14<=$13.second;++$14){if(!!$14){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($14),0);}if($p0.get_hasGlobalTransparency()){this.beginOffScreenRender();$p0.set_forceOpaqueColors(true);if(!!$14){this.get_currentContext().translate($p0.getWorldOffset($14),0);}}var $15=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $16=$12.startIndex;$16<=$12.endIndex;$16++){if(!$p0.markNeedsDraw($16,$15)){continue;}if($p0.getLeft($16)!==-1||$p0.getRight($16)!==-1){this.$2D($p0,$16,'normalOn',$2);}else{this.$2D($p0,$16,'blobOn',$2);}}var $17=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $18=$12.startIndex;$18<=$12.endIndex;$18++){if(!$p0.markNeedsDraw($18,$17)){continue;}this.$2D($p0,$18,'edgeOn',$2);}if($p0.get_hasGlobalTransparency()){$p0.set_forceOpaqueColors(false);this.endOffScreenRender($p0.get_globalAlpha());}var $19=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $1A=$12.startIndex;$1A<=$12.endIndex;$1A++){if(!$p0.markNeedsDraw($1A,$19)){continue;}if($p0.shouldShowMarker($1A)){this.$2D($p0,$1A,'blobOn',$2);}}if(!!$14){this.get_currentContext().restore();}}}break;case 'highlightedUnderPass':break;case 'highlightedOnPass':if($0||$1){$2='colorOverrideNone';var $enum4=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum4.moveNext()){var $1B=$enum4.current;if($1B.get_lineState()!=='lineStateHighlighted'){continue;}var $1C;if($p0.get_isWrappedDomain()){$1C=$p0.getMarkInstances($1B.minXDomain,$1B.maxXDomain);}else{$1C=new ss.Tuple(0,0);}for(var $1D=$1C.first;$1D<=$1C.second;++$1D){if(!!$1D){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($1D),0);}if($p0.get_hasGlobalTransparency()){this.beginOffScreenRender();$p0.set_forceOpaqueColors(true);if(!!$1D){this.get_currentContext().translate($p0.getWorldOffset($1D),0);}}var $1E=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $1F=$1B.startIndex;$1F<=$1B.endIndex;$1F++){if(!$p0.markNeedsDraw($1F,$1E)){continue;}if(!$p0.isMarkHighlighted($1F)){$2='colorOverrideFog';}if(!($p0.isMarkHighlighted($1F)&&!$1B.get_allHighlighted())){if($p0.getLeft($1F)!==-1||$p0.getRight($1F)!==-1){this.$2D($p0,$1F,'normalOn',$2);}else{this.$2D($p0,$1F,'blobOn',$2);}}$2='colorOverrideNone';}var $20=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $21=$1B.startIndex;$21<=$1B.endIndex;$21++){if(!$p0.markNeedsDraw($21,$20)){continue;}if(!$p0.isMarkHighlighted($21)||!$p0.isMarkHighlighted($21+1)){$2='colorOverrideFog';}this.$2D($p0,$21,'edgeOn',$2);$2='colorOverrideNone';}if($p0.get_hasGlobalTransparency()){$p0.set_forceOpaqueColors(false);this.endOffScreenRender($p0.get_globalAlpha());}var $22=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $23=$1B.startIndex;$23<=$1B.endIndex;$23++){if(!$p0.markNeedsDraw($23,$22)){continue;}if(!$p0.isMarkHighlighted($23)){$2='colorOverrideFog';}if(!($p0.isMarkHighlighted($23)&&!$1B.get_allHighlighted())){if($p0.shouldShowMarker($23)){this.$2D($p0,$23,'blobOn',$2);}}$2='colorOverrideNone';}var $24=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $25=$1B.startIndex;$25<=$1B.endIndex;$25++){if(!$p0.markNeedsDraw($25,$24)){continue;}if($p0.isMarkHighlighted($25)&&!$1B.get_allHighlighted()){this.$2D($p0,$25,'highlightedUnder',$2);}}var $26=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $27=$1B.startIndex;$27<=$1B.endIndex;$27++){if(!$p0.markNeedsDraw($27,$26)){continue;}if($p0.isMarkHighlighted($27)&&!$1B.get_allHighlighted()){this.$2D($p0,$27,'highlightedOn',$2);}}if(!!$1D){this.get_currentContext().restore();}}}}break;case 'selectedUnderPass':if($0||$1){$2='colorOverrideNone';var $enum5=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum5.moveNext()){var $28=$enum5.current;if($28.get_lineState()!=='lineStateSelected'){continue;}var $29;if($p0.get_isWrappedDomain()){$29=$p0.getMarkInstances($28.minXDomain,$28.maxXDomain);}else{$29=new ss.Tuple(0,0);}for(var $2A=$29.first;$2A<=$29.second;++$2A){if(!!$2A){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($2A),0);}var $2B=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $2C=$28.startIndex;$2C<=$28.endIndex;$2C++){if(!$p0.markNeedsDraw($2C,$2B)){continue;}this.$2D($p0,$2C,'selectedUnder1',$2);this.$2D($p0,$2C,'selectedEdgeUnder',$2);}if(!!$2A){this.get_currentContext().restore();}}}}break;case 'selectedOnPass':if($0||$1){$2='colorOverrideOpaque';var $enum6=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum6.moveNext()){var $2D=$enum6.current;if($2D.get_lineState()!=='lineStateSelected'){continue;}var $2E;if($p0.get_isWrappedDomain()){$2E=$p0.getMarkInstances($2D.minXDomain,$2D.maxXDomain);}else{$2E=new ss.Tuple(0,0);}for(var $2F=$2E.first;$2F<=$2E.second;++$2F){if(!!$2F){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($2F),0);}var $30=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $31=$2D.startIndex;$31<=$2D.endIndex;$31++){if(!$p0.markNeedsDraw($31,$30)){continue;}if($p0.getLeft($31)!==-1||$p0.getRight($31)!==-1){this.$2D($p0,$31,'normalOn',$2);}else{this.$2D($p0,$31,'blobOn',$2);}}var $32=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $33=$2D.startIndex;$33<=$2D.endIndex;$33++){if(!$p0.markNeedsDraw($33,$32)){continue;}this.$2D($p0,$33,'edgeOn',$2);}var $34=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $35=$2D.startIndex;$35<=$2D.endIndex;$35++){if(!$p0.markNeedsDraw($35,$34)){continue;}if($p0.shouldShowMarker($35)){this.$2D($p0,$35,'blobOn',$2);}}if(!$2D.get_allHighlighted()){var $36=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $37=$2D.startIndex;$37<=$2D.endIndex;$37++){if(!$p0.markNeedsDraw($37,$36)){continue;}if($p0.isMarkHighlighted($37)&&!$p0.isMarkSelected($37)){this.$2D($p0,$37,'highlightedUnder',$2);}}var $38=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $39=$2D.startIndex;$39<=$2D.endIndex;$39++){if(!$p0.markNeedsDraw($39,$38)){continue;}if($p0.isMarkHighlighted($39)&&!$p0.isMarkSelected($39)){this.$2D($p0,$39,'highlightedOn',$2);}}}var $3A=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $3B=$2D.startIndex;$3B<=$2D.endIndex;$3B++){if(!$p0.markNeedsDraw($3B,$3A)){continue;}if($p0.isMarkSelected($3B)){this.$2D($p0,$3B,'selectedUnder',$2);}}var $3C=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $3D=$2D.startIndex;$3D<=$2D.endIndex;$3D++){if(!$p0.markNeedsDraw($3D,$3C)){continue;}if($p0.isMarkSelected($3D)){this.$2D($p0,$3D,'highlightedOn',$2);}}if(!!$2F){this.get_currentContext().restore();}}}}break;}this.get_currentContext().restore();},$2D:function($p0,$p1,$p2,$p3){var $0=$p0.getLeft($p1);var $1=$p0.getRight($p1);if(!!$p0.get_clipCase()){this.get_currentContext().save();this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}switch($p2){case 'normalUnder':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('halo_color',$p1))[$p3],4);this.get_currentContext().restore();break;case 'normalOn':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderFilledCircle(0,0,$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'blobUnder':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,$p0.getMarkProperty('width',$p1)+3,($p0.getMarkProperty('halo_color',$p1))[$p3],4);this.get_currentContext().restore();break;case 'blobOn':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderFilledCircle(0,0,$p0.getMarkProperty('width',$p1)+3,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'highlightedUnder':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,$p0.getMarkProperty('width',$p1)+4,($p0.getMarkProperty('selected_multi_prim_halo_color',$p1))[$p3],4);this.get_currentContext().restore();break;case 'highlightedOn':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderFilledCircle(0,0,$p0.getMarkProperty('width',$p1)+4,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,$p0.getMarkProperty('width',$p1)+4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4);this.get_currentContext().restore();break;case 'selectedUnder1':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('selected_multi_prim_halo_color',$p1))[$p3],4);this.get_currentContext().restore();break;case 'edgeUnder':if($p0.getRight($p1)!==-1){if($p0.getRight($p1)!==-1){this.renderLineEdge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x',$1),$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y',$1),$p0.getMarkProperty('width',$p1),$p0.getMarkProperty('width',$1),($p0.getMarkProperty('halo_color',$p1))[$p3],4);}}break;case 'selectedEdgeUnder':if($p0.getRight($p1)!==-1){if($p0.getRight($p1)!==-1){this.renderLineEdge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x',$1),$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y',$1),$p0.getMarkProperty('width',$p1),$p0.getMarkProperty('width',$1),($p0.getMarkProperty('selected_multi_prim_halo_color',$p1))[$p3],4);}}break;case 'edgeOn':if($p0.getRight($p1)!==-1){if($p0.getRight($p1)!==-1){if($p0.isLineSegmentVisible($p1,$1)){var $2=$p3;if($p0.isLineSegmentFiltered($p1,$1)){$p3='colorOverrideFog';}this.renderFilledLineEdge($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('x',$1),$p0.getMarkProperty('y',$p1),$p0.getMarkProperty('y',$1),$p0.getMarkProperty('width',$p1),$p0.getMarkProperty('width',$1),($p0.getMarkProperty('color',$p1))[$p3],($p0.getMarkProperty('color',$1))[$p3]);}}}break;default:break;}if(!!$p0.get_clipCase()){this.get_currentContext().restore();}},$2F:function($p0,$p1){var $0=$p0.get_markCount();var $1=$p0.get_hasSelection();var $2=$p0.get_hasBrushing();var $3='colorOverrideNone';this.get_currentContext().save();switch($p1){case 'normalUnderPass':if($p0.get_hasBackground()&&$p0.get_hasHalos()){if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}var $4=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $5=0;$5<$0;$5++){if(!$p0.markNeedsDraw($5,$4)){continue;}if($p0.getMarkState($5)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $6=$p0.getMarkBounds($5);var $7=$p0.pixelToDomainX($6.x);var $8=$p0.pixelToDomainX($6.x+$6.w);var $9=$p0.getMarkInstances($7,$8);for(var $A=$9.first;$A<=$9.second;++$A){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($A),0);this.$30($p0,$5,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$30($p0,$5,'normalUnder',$3);}}if($1||$2){$3='colorOverrideNone';var $B=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $C=0;$C<$0;$C++){if(!$p0.markNeedsDraw($C,$B)){continue;}if($p0.getMarkState($C)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $D=$p0.getMarkBounds($C);var $E=$p0.pixelToDomainX($D.x);var $F=$p0.pixelToDomainX($D.x+$D.w);var $10=$p0.getMarkInstances($E,$F);for(var $11=$10.first;$11<=$10.second;++$11){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($11),0);this.$30($p0,$C,'normalUnder',$3);this.get_currentContext().restore();}}else{this.$30($p0,$C,'normalUnder',$3);}}}}break;case 'normalOnPass':if($1||$2){$3='colorOverrideFog';}else{$3='colorOverrideNone';}var $12=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $13=0;$13<$0;$13++){if(!$p0.markNeedsDraw($13,$12)){continue;}if($p0.getMarkState($13)!=='markStateNormal'){continue;}if($p0.get_isWrappedDomain()){var $14=$p0.getMarkBounds($13);var $15=$p0.pixelToDomainX($14.x);var $16=$p0.pixelToDomainX($14.x+$14.w);var $17=$p0.getMarkInstances($15,$16);for(var $18=$17.first;$18<=$17.second;++$18){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($18),0);this.$30($p0,$13,'normalOn',$3);if($p0.get_drawBorder()){this.$30($p0,$13,'border',$3);}this.get_currentContext().restore();}}else{this.$30($p0,$13,'normalOn',$3);if($p0.get_drawBorder()){this.$30($p0,$13,'border',$3);}}}break;case 'highlightedUnderPass':break;case 'highlightedOnPass':if($1||$2){$3='colorOverrideNone';var $19=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $1A=0;$1A<$0;$1A++){if(!$p0.markNeedsDraw($1A,$19)){continue;}if($p0.getMarkState($1A)!=='markStateHighlighted'){continue;}if($p0.get_isWrappedDomain()){var $1B=$p0.getMarkBounds($1A);var $1C=$p0.pixelToDomainX($1B.x);var $1D=$p0.pixelToDomainX($1B.x+$1B.w);var $1E=$p0.getMarkInstances($1C,$1D);for(var $1F=$1E.first;$1F<=$1E.second;++$1F){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($1F),0);this.$30($p0,$1A,'normalOn',$3);if($p0.get_drawBorder()){this.$30($p0,$1A,'border',$3);}this.get_currentContext().restore();}}else{this.$30($p0,$1A,'normalOn',$3);if($p0.get_drawBorder()){this.$30($p0,$1A,'border',$3);}}}}break;case 'selectedUnderPass':if($1||$2){$3='colorOverrideOpaque';var $20=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $21=0;$21<$0;$21++){if(!$p0.markNeedsDraw($21,$20)){continue;}if($p0.getMarkState($21)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $22=$p0.getMarkBounds($21);var $23=$p0.pixelToDomainX($22.x);var $24=$p0.pixelToDomainX($22.x+$22.w);var $25=$p0.getMarkInstances($23,$24);for(var $26=$25.first;$26<=$25.second;++$26){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($26),0);this.$30($p0,$21,'selectedUnder',$3);this.get_currentContext().restore();}}else{this.$30($p0,$21,'selectedUnder',$3);}}}break;case 'selectedOnPass':if($1||$2){$3='colorOverrideOpaque';var $27=tab.RectXYUtil.offsetRect(this.get_currentContext().get_dirtyRect(),this.get_renderOffset());for(var $28=0;$28<$0;$28++){if(!$p0.markNeedsDraw($28,$27)){continue;}if($p0.getMarkState($28)!=='markStateSelected'){continue;}if($p0.get_isWrappedDomain()){var $29=$p0.getMarkBounds($28);var $2A=$p0.pixelToDomainX($29.x);var $2B=$p0.pixelToDomainX($29.x+$29.w);var $2C=$p0.getMarkInstances($2A,$2B);for(var $2D=$2C.first;$2D<=$2C.second;++$2D){this.get_currentContext().save();this.get_currentContext().translate($p0.getWorldOffset($2D),0);this.$30($p0,$28,'normalOn',$3);if($p0.get_drawBorder()){this.$30($p0,$28,'border',$3);}this.get_currentContext().restore();}}else{this.$30($p0,$28,'normalOn',$3);if($p0.get_drawBorder()){this.$30($p0,$28,'border',$3);}}}}break;}this.get_currentContext().restore();},$30:function($p0,$p1,$p2,$p3){if(!$p0.isMarkVisible($p1)){return;}this.get_currentContext().save();if(!!$p0.get_clipCase()){this.clipRect($p0.get_clipCase(),$p0.getMarkProperty('cell_x',$p1),$p0.getMarkProperty('cell_y',$p1),$p0.getMarkProperty('clip_width',$p1),$p0.getMarkProperty('clip_height',$p1));}var $0=$p0.getMarkProperty('shape_id',$p1);switch($0){case 'shapeIDCircle':this.$31($p0,$p1,$p2,$p3);break;case 'shapeIDFilledCircle':this.$32($p0,$p1,$p2,$p3);break;case 'shapeIDUnscaledFilledCircle':this.$33($p0,$p1,$p2,$p3);break;case 'shapeIDSquare':this.$34($p0,$p1,$p2,$p3);break;case 'shapeIDFilledSquare':this.$35($p0,$p1,$p2,$p3);break;case 'shapeIDAsterisk':this.$36($p0,$p1,$p2,$p3);break;case 'shapeIDPlus':this.$37($p0,$p1,$p2,$p3);break;case 'shapeIDFilledPlus':this.$38($p0,$p1,$p2,$p3);break;case 'shapeIDTimes':this.$39($p0,$p1,$p2,$p3);break;case 'shapeIDFilledTimes':this.$3A($p0,$p1,$p2,$p3);break;case 'shapeIDDiamond':this.$3B($p0,$p1,$p2,$p3);break;case 'shapeIDFilledDiamond':this.$3C($p0,$p1,$p2,$p3);break;case 'shapeIDTriangle':this.$3D($p0,$p1,$p2,$p3);break;case 'shapeIDFilledTriangle':this.$3E($p0,$p1,$p2,$p3);break;case 'shapeIDDownTriangle':this.$3F($p0,$p1,$p2,$p3);break;case 'shapeIDFilledDownTriangle':this.$40($p0,$p1,$p2,$p3);break;case 'shapeIDLeftTriangle':this.$41($p0,$p1,$p2,$p3);break;case 'shapeIDFilledLeftTriangle':this.$42($p0,$p1,$p2,$p3);break;case 'shapeIDRightTriangle':this.$43($p0,$p1,$p2,$p3);break;case 'shapeIDFilledRightTriangle':this.$44($p0,$p1,$p2,$p3);break;case 'shapeIDFilledStar':this.$45($p0,$p1,$p2,$p3);break;default:break;}this.get_currentContext().restore();},$31:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-0.5/12));switch($p2){case 'normalUnder':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('halo_color',$p1))[$p3],4);this.get_currentContext().restore();break;case 'normalOn':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('color',$p1))[$p3],2);this.get_currentContext().restore();break;case 'selectedUnder':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4);this.get_currentContext().restore();break;default:break;}},$32:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-0.25/12));switch($p2){case 'normalUnder':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('halo_color',$p1))[$p3],4);this.get_currentContext().restore();break;case 'normalOn':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderFilledCircle(0,0,$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4);this.get_currentContext().restore();break;case 'border':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('border_color',$p1))[$p3],1);this.get_currentContext().restore();break;default:break;}},$33:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1);switch($p2){case 'normalUnder':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('halo_color',$p1))[$p3],4);this.get_currentContext().restore();break;case 'normalOn':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderFilledCircle(0,0,$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4);this.get_currentContext().restore();break;case 'border':this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.renderCircle(0,0,$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('border_color',$p1))[$p3],1);this.get_currentContext().restore();break;default:break;}},$34:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-1.25/12));switch($p2){case 'normalUnder':this.get_currentContext().save();this.renderRectangle($p0.getMarkProperty('x',$p1)+0,$p0.getMarkProperty('y',$p1)+0,$p0.getMarkProperty('width',$p1),$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('halo_color',$p1))[$p3],4);this.get_currentContext().restore();break;case 'normalOn':this.get_currentContext().save();this.renderRectangle($p0.getMarkProperty('x',$p1)+0,$p0.getMarkProperty('y',$p1)+0,$p0.getMarkProperty('width',$p1),$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('color',$p1))[$p3],2);this.get_currentContext().restore();break;case 'selectedUnder':this.get_currentContext().save();this.renderRectangle($p0.getMarkProperty('x',$p1)+0,$p0.getMarkProperty('y',$p1)+0,$p0.getMarkProperty('width',$p1),$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4);this.get_currentContext().restore();break;default:break;}},$35:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-0.75/12));switch($p2){case 'normalUnder':this.get_currentContext().save();this.renderRectangle($p0.getMarkProperty('x',$p1)+0,$p0.getMarkProperty('y',$p1)+0,$p0.getMarkProperty('width',$p1),$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('halo_color',$p1))[$p3],4);this.get_currentContext().restore();break;case 'normalOn':this.get_currentContext().save();this.renderFilledRectangle($p0.getMarkProperty('x',$p1)+0,$p0.getMarkProperty('y',$p1)+0,$p0.getMarkProperty('width',$p1),$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':this.get_currentContext().save();this.renderRectangle($p0.getMarkProperty('x',$p1)+0,$p0.getMarkProperty('y',$p1)+0,$p0.getMarkProperty('width',$p1),$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('selected_halo_color',$p1))[$p3],4);this.get_currentContext().restore();break;case 'border':this.get_currentContext().save();this.renderRectangle($p0.getMarkProperty('x',$p1)+0,$p0.getMarkProperty('y',$p1)+0,$p0.getMarkProperty('width',$p1),$p0.getMarkProperty('width',$p1),($p0.getMarkProperty('border_color',$p1))[$p3],1);this.get_currentContext().restore();break;default:break;}},$36:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-0.5/12));switch($p2){case 'normalUnder':var $1=$0/2;var $2=0.9*$1;var $3=$0/4;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $4=[];$4.add(0);$4.add(-$1);$4.add(0);$4.add($1);this.renderLine($4,4,($p0.getMarkProperty('halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $5=[];$5.add(-$2);$5.add(-$3);$5.add($2);$5.add($3);this.renderLine($5,4,($p0.getMarkProperty('halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $6=[];$6.add($2);$6.add(-$3);$6.add(-$2);$6.add($3);this.renderLine($6,4,($p0.getMarkProperty('halo_color',$p1))[$p3],true);this.get_currentContext().restore();break;case 'normalOn':var $7=$0/2;var $8=0.9*$7;var $9=$0/4;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $A=[];$A.add(0);$A.add(-$7);$A.add(0);$A.add($7);this.renderLine($A,2,($p0.getMarkProperty('color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $B=[];$B.add(-$8);$B.add(-$9);$B.add($8);$B.add($9);this.renderLine($B,2,($p0.getMarkProperty('color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $C=[];$C.add($8);$C.add(-$9);$C.add(-$8);$C.add($9);this.renderLine($C,2,($p0.getMarkProperty('color',$p1))[$p3],true);this.get_currentContext().restore();break;case 'selectedUnder':var $D=$0/2;var $E=0.9*$D;var $F=$0/4;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $10=[];$10.add(0);$10.add(-$D);$10.add(0);$10.add($D);this.renderLine($10,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $11=[];$11.add(-$E);$11.add(-$F);$11.add($E);$11.add($F);this.renderLine($11,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $12=[];$12.add($E);$12.add(-$F);$12.add(-$E);$12.add($F);this.renderLine($12,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],true);this.get_currentContext().restore();break;default:break;}},$37:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-1/12));switch($p2){case 'normalUnder':var $1=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $2=[];$2.add(0);$2.add(-$1);$2.add(0);$2.add($1);this.renderLine($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $3=[];$3.add(-$1);$3.add(0);$3.add($1);$3.add(0);this.renderLine($3,4,($p0.getMarkProperty('halo_color',$p1))[$p3],true);this.get_currentContext().restore();break;case 'normalOn':var $4=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $5=[];$5.add(0);$5.add(-$4);$5.add(0);$5.add($4);this.renderLine($5,2,($p0.getMarkProperty('color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $6=[];$6.add(-$4);$6.add(0);$6.add($4);$6.add(0);this.renderLine($6,2,($p0.getMarkProperty('color',$p1))[$p3],true);this.get_currentContext().restore();break;case 'selectedUnder':var $7=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $8=[];$8.add(0);$8.add(-$7);$8.add(0);$8.add($7);this.renderLine($8,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $9=[];$9.add(-$7);$9.add(0);$9.add($7);$9.add(0);this.renderLine($9,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],true);this.get_currentContext().restore();break;default:break;}},$38:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-0.75/12));switch($p2){case 'normalUnder':var $1=$0/2;var $2=$0/6;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $3=[];$3.add((-$2));$3.add((-$1));$3.add((-$2));$3.add((-$2));$3.add((-$1));$3.add((-$2));$3.add((-$1));$3.add($2);$3.add((-$2));$3.add($2);$3.add((-$2));$3.add($1);$3.add($2);$3.add($1);$3.add($2);$3.add($2);$3.add($1);$3.add($2);$3.add($1);$3.add((-$2));$3.add($2);$3.add((-$2));$3.add($2);$3.add((-$1));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($3,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $4=$0/2;var $5=$0/6;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $6=[];$6.add((-$5));$6.add((-$4));$6.add((-$5));$6.add((-$5));$6.add((-$4));$6.add((-$5));$6.add((-$4));$6.add($5);$6.add((-$5));$6.add($5);$6.add((-$5));$6.add($4);$6.add($5);$6.add($4);$6.add($5);$6.add($5);$6.add($4);$6.add($5);$6.add($4);$6.add((-$5));$6.add($5);$6.add((-$5));$6.add($5);$6.add((-$4));this.renderFilledPolygon($6,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $7=$0/2;var $8=$0/6;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $9=[];$9.add((-$8));$9.add((-$7));$9.add((-$8));$9.add((-$8));$9.add((-$7));$9.add((-$8));$9.add((-$7));$9.add($8);$9.add((-$8));$9.add($8);$9.add((-$8));$9.add($7);$9.add($8);$9.add($7);$9.add($8);$9.add($8);$9.add($7);$9.add($8);$9.add($7);$9.add((-$8));$9.add($8);$9.add((-$8));$9.add($8);$9.add((-$7));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($9,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$39:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-1.5/12));switch($p2){case 'normalUnder':var $1=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $2=[];$2.add(-$1);$2.add(-$1);$2.add($1);$2.add($1);this.renderLine($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $3=[];$3.add(-$1);$3.add($1);$3.add($1);$3.add(-$1);this.renderLine($3,4,($p0.getMarkProperty('halo_color',$p1))[$p3],true);this.get_currentContext().restore();break;case 'normalOn':var $4=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $5=[];$5.add(-$4);$5.add(-$4);$5.add($4);$5.add($4);this.renderLine($5,2,($p0.getMarkProperty('color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $6=[];$6.add(-$4);$6.add($4);$6.add($4);$6.add(-$4);this.renderLine($6,2,($p0.getMarkProperty('color',$p1))[$p3],true);this.get_currentContext().restore();break;case 'selectedUnder':var $7=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $8=[];$8.add(-$7);$8.add(-$7);$8.add($7);$8.add($7);this.renderLine($8,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],true);this.get_currentContext().restore();this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));this.get_currentContext().set_lineCap('square');var $9=[];$9.add(-$7);$9.add($7);$9.add($7);$9.add(-$7);this.renderLine($9,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3],true);this.get_currentContext().restore();break;default:break;}},$3A:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-0.75/12));switch($p2){case 'normalUnder':var $1=$0/2;var $2=$0/4;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $3=[];$3.add((-$2));$3.add((-$1));$3.add((-$1));$3.add((-$2));$3.add((-$2));$3.add((0));$3.add((-$1));$3.add($2);$3.add((-$2));$3.add($1);$3.add((0));$3.add($2);$3.add($2);$3.add($1);$3.add($1);$3.add($2);$3.add($2);$3.add((0));$3.add($1);$3.add((-$2));$3.add($2);$3.add((-$1));$3.add((0));$3.add((-$2));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($3,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $4=$0/2;var $5=$0/4;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $6=[];$6.add((-$5));$6.add((-$4));$6.add((-$4));$6.add((-$5));$6.add((-$5));$6.add((0));$6.add((-$4));$6.add($5);$6.add((-$5));$6.add($4);$6.add((0));$6.add($5);$6.add($5);$6.add($4);$6.add($4);$6.add($5);$6.add($5);$6.add((0));$6.add($4);$6.add((-$5));$6.add($5);$6.add((-$4));$6.add((0));$6.add((-$5));this.renderFilledPolygon($6,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $7=$0/2;var $8=$0/4;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $9=[];$9.add((-$8));$9.add((-$7));$9.add((-$7));$9.add((-$8));$9.add((-$8));$9.add((0));$9.add((-$7));$9.add($8);$9.add((-$8));$9.add($7);$9.add((0));$9.add($8);$9.add($8);$9.add($7);$9.add($7);$9.add($8);$9.add($8);$9.add((0));$9.add($7);$9.add((-$8));$9.add($8);$9.add((-$7));$9.add((0));$9.add((-$8));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($9,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$3B:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(0.5/12));switch($p2){case 'normalUnder':var $1=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $2=[];$2.add((0));$2.add((-$1));$2.add((-$1));$2.add((0));$2.add((0));$2.add($1);$2.add($1);$2.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $3=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $4=[];$4.add((0));$4.add((-$3));$4.add((-$3));$4.add((0));$4.add((0));$4.add($3);$4.add($3);$4.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($4,2,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $5=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $6=[];$6.add((0));$6.add((-$5));$6.add((-$5));$6.add((0));$6.add((0));$6.add($5);$6.add($5);$6.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($6,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$3C:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(0.5/12));switch($p2){case 'normalUnder':var $1=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $2=[];$2.add((0));$2.add((-$1));$2.add((-$1));$2.add((0));$2.add((0));$2.add($1);$2.add($1);$2.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $3=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $4=[];$4.add((0));$4.add((-$3));$4.add((-$3));$4.add((0));$4.add((0));$4.add($3);$4.add($3);$4.add((0));this.renderFilledPolygon($4,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $5=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $6=[];$6.add((0));$6.add((-$5));$6.add((-$5));$6.add((0));$6.add((0));$6.add($5);$6.add($5);$6.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($6,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$3D:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-1.25/12));switch($p2){case 'normalUnder':var $1=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $2=[];$2.add((0));$2.add((-$1));$2.add((-$1));$2.add($1);$2.add($1);$2.add($1);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $3=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $4=[];$4.add((0));$4.add((-$3));$4.add((-$3));$4.add($3);$4.add($3);$4.add($3);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($4,2,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $5=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $6=[];$6.add((0));$6.add((-$5));$6.add((-$5));$6.add($5);$6.add($5);$6.add($5);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($6,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$3E:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-1/12));switch($p2){case 'normalUnder':var $1=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $2=[];$2.add((0));$2.add((-$1));$2.add((-$1));$2.add($1);$2.add($1);$2.add($1);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $3=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $4=[];$4.add((0));$4.add((-$3));$4.add((-$3));$4.add($3);$4.add($3);$4.add($3);this.renderFilledPolygon($4,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $5=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $6=[];$6.add((0));$6.add((-$5));$6.add((-$5));$6.add($5);$6.add($5);$6.add($5);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($6,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$3F:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-1.25/12));switch($p2){case 'normalUnder':var $1=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $2=[];$2.add((0));$2.add($1);$2.add((-$1));$2.add((-$1));$2.add($1);$2.add((-$1));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $3=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $4=[];$4.add((0));$4.add($3);$4.add((-$3));$4.add((-$3));$4.add($3);$4.add((-$3));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($4,2,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $5=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $6=[];$6.add((0));$6.add($5);$6.add((-$5));$6.add((-$5));$6.add($5);$6.add((-$5));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($6,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$40:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-1/12));switch($p2){case 'normalUnder':var $1=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $2=[];$2.add((0));$2.add($1);$2.add((-$1));$2.add((-$1));$2.add($1);$2.add((-$1));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $3=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $4=[];$4.add((0));$4.add($3);$4.add((-$3));$4.add((-$3));$4.add($3);$4.add((-$3));this.renderFilledPolygon($4,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $5=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $6=[];$6.add((0));$6.add(($0/2));$6.add((-$5));$6.add((-$5));$6.add($5);$6.add((-$5));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($6,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$41:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-1.25/12));switch($p2){case 'normalUnder':var $1=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $2=[];$2.add((-$1));$2.add((0));$2.add($1);$2.add((-$1));$2.add($1);$2.add($1);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $3=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $4=[];$4.add((-$3));$4.add((0));$4.add($3);$4.add((-$3));$4.add($3);$4.add($3);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($4,2,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $5=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $6=[];$6.add((-$5));$6.add((0));$6.add($5);$6.add((-$5));$6.add($5);$6.add($5);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($6,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$42:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-1/12));switch($p2){case 'normalUnder':var $1=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $2=[];$2.add((-$1));$2.add((0));$2.add($1);$2.add((-$1));$2.add($1);$2.add($1);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $3=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $4=[];$4.add((-$3));$4.add((0));$4.add($3);$4.add((-$3));$4.add($3);$4.add($3);this.renderFilledPolygon($4,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $5=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $6=[];$6.add((-$5));$6.add((0));$6.add($5);$6.add((-$5));$6.add($5);$6.add($5);this.get_currentContext().set_lineJoin('miter');this.renderPolygon($6,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$43:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-1.25/12));switch($p2){case 'normalUnder':var $1=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $2=[];$2.add((-$1));$2.add((-$1));$2.add((-$1));$2.add($1);$2.add($1);$2.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $3=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $4=[];$4.add((-$3));$4.add((-$3));$4.add((-$3));$4.add($3);$4.add($3);$4.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($4,2,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $5=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $6=[];$6.add((-$5));$6.add((-$5));$6.add((-$5));$6.add($5);$6.add($5);$6.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($6,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$44:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(-1/12));switch($p2){case 'normalUnder':var $1=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $2=[];$2.add((-$1));$2.add((-$1));$2.add((-$1));$2.add($1);$2.add($1);$2.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($2,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $3=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $4=[];$4.add((-$3));$4.add((-$3));$4.add((-$3));$4.add($3);$4.add($3);$4.add((0));this.renderFilledPolygon($4,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $5=$0/2;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $6=[];$6.add((-$5));$6.add((-$5));$6.add((-$5));$6.add($5);$6.add($5);$6.add((0));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($6,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$45:function($p0,$p1,$p2,$p3){var $0=$p0.getMarkProperty('width',$p1)*(1+(1.1/12));switch($p2){case 'normalUnder':var $1=$0/2;var $2=$0*0.3877;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $3=[];$3.add((0));$3.add(((-$1)+($0*0.0246)));$3.add((-$1+($0*0.3817)));$3.add((-$1+$2));$3.add((-$1));$3.add((-$1+$2));$3.add((-$1+($0*0.3088)));$3.add((-$1+($0*0.612)));$3.add((-$1+($0*0.1909)));$3.add((-$1+($0*0.9751)));$3.add((0));$3.add((-$1+($0*0.7507)));$3.add((-$1+($0*0.8085)));$3.add((-$1+($0*0.9751)));$3.add((-$1+($0*0.6905)));$3.add((-$1+($0*0.612)));$3.add($1);$3.add((-$1+$2));$3.add((-$1+($0*0.6176)));$3.add((-$1+$2));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($3,4,($p0.getMarkProperty('halo_color',$p1))[$p3]);this.get_currentContext().restore();break;case 'normalOn':var $4=$0/2;var $5=$0*0.3877;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $6=[];$6.add((0));$6.add((-$4+($0*0.0246)));$6.add((-$4+($0*0.3817)));$6.add((-$4+$5));$6.add((-$4));$6.add((-$4+$5));$6.add((-$4+($0*0.3088)));$6.add((-$4+($0*0.612)));$6.add((-$4+($0*0.1909)));$6.add((-$4+($0*0.9751)));$6.add((0));$6.add((-$4+($0*0.7507)));$6.add((-$4+($0*0.8085)));$6.add((-$4+($0*0.9751)));$6.add((-$4+($0*0.6905)));$6.add((-$4+($0*0.612)));$6.add($4);$6.add((-$4+$5));$6.add((-$4+($0*0.6176)));$6.add((-$4+$5));this.renderFilledPolygon($6,($p0.getMarkProperty('color',$p1))[$p3]);this.get_currentContext().restore();break;case 'selectedUnder':var $7=$0/2;var $8=$0*0.3877;this.get_currentContext().save();this.get_currentContext().translate($p0.getMarkProperty('x',$p1),$p0.getMarkProperty('y',$p1));var $9=[];$9.add((0));$9.add((-$7+($0*0.0246)));$9.add((-$7+($0*0.3817)));$9.add((-$7+$8));$9.add((-$7));$9.add((-$7+$8));$9.add((-$7+($0*0.3088)));$9.add((-$7+($0*0.612)));$9.add((-$7+($0*0.1909)));$9.add((-$7+($0*0.9751)));$9.add((0));$9.add((-$7+($0*0.7507)));$9.add((-$7+($0*0.8085)));$9.add((-$7+($0*0.9751)));$9.add((-$7+($0*0.6905)));$9.add((-$7+($0*0.612)));$9.add($7);$9.add((-$7+$8));$9.add((-$7+($0*0.6176)));$9.add((-$7+$8));this.get_currentContext().set_lineJoin('miter');this.renderPolygon($9,4,($p0.getMarkProperty('selected_halo_color',$p1))[$p3]);this.get_currentContext().restore();break;default:break;}},$46:function($p0,$p1,$p2,$p3,$p4){switch($p2){case 'normalUnder':var $0=$p4.qrgbColor;if($p0.isTupleVisible($p4.tupleIds[$p1])){if((!$p1||!$p0.isTupleVisible($p4.tupleIds[$p1-1]))&&($p1+1>=$p4.upperEnd.length||!$p0.isTupleVisible($p4.tupleIds[$p1+1]))){var $1=(($p4.widths[$p1]/2)+2.5);if($p4.useYAxis){var $2=$p0.thisDomainToPixelY($p4.upperEnd[$p1]);var $3=$p0.thisDomainToPixelY($p4.lowerEnd[$p1]);var $4=$p0.thisDomainToPixelX($p4.oppositeAxis[$p1]);var $5=[($4-$1),$2,($4-$1),$3,($4+$1),$3,($4+$1),$2];this.renderFilledPolygon($5,$p0.getOneColor($0,$p3));}else{var $6=$p0.thisDomainToPixelX($p4.upperEnd[$p1]);var $7=$p0.thisDomainToPixelX($p4.lowerEnd[$p1]);var $8=$p0.thisDomainToPixelY($p4.oppositeAxis[$p1]);var $9=[$6,($8-$1),$7,($8-$1),$7,($8+$1),$6,($8+$1)];this.renderFilledPolygon($9,$p0.getOneColor($0,$p3));}}else{if($p1+1<$p4.tupleIds.length&&$p0.isTupleVisible($p4.tupleIds[$p1+1])){if($p4.useYAxis){var $A=$p0.thisDomainToPixelY($p4.upperEnd[$p1]);var $B=$p0.thisDomainToPixelY($p4.lowerEnd[$p1]);var $C=$p0.thisDomainToPixelY($p4.upperEnd[$p1+1]);var $D=$p0.thisDomainToPixelY($p4.lowerEnd[$p1+1]);var $E=$p0.thisDomainToPixelX($p4.oppositeAxis[$p1]);var $F=$p0.thisDomainToPixelX($p4.oppositeAxis[$p1+1]);var $10=[$E,$B,$F,$D,$F,$C,$E,$A];this.renderFilledPolygon($10,$p0.getOneColor($0,$p3));}else{var $11=$p0.thisDomainToPixelX($p4.upperEnd[$p1]);var $12=$p0.thisDomainToPixelX($p4.lowerEnd[$p1]);var $13=$p0.thisDomainToPixelX($p4.upperEnd[$p1+1]);var $14=$p0.thisDomainToPixelX($p4.lowerEnd[$p1+1]);var $15=$p0.thisDomainToPixelY($p4.oppositeAxis[$p1]);var $16=$p0.thisDomainToPixelY($p4.oppositeAxis[$p1+1]);var $17=[$12,$15,$14,$16,$13,$16,$11,$15];this.renderFilledPolygon($17,$p0.getOneColor($0,$p3));}}}}break;}},$47:function($p0,$p1,$p2,$p3){var $0='colorOverrideNone';if(!(Type.canCast($p2,Object))){return;}var $1=$p2;var $2=0;var $3=1;var $4=2;var $5=$2;var $enum1=ss.IEnumerator.getEnumerator($1.lineTupleIds);while($enum1.moveNext()){var $6=$enum1.current;if($p0.isTupleSelected($6)){$5=$4;break;}if($5!==$3&&$p0.isTupleHighlighted($6)){$5=$3;}}if($5!==$4){var $enum2=ss.IEnumerator.getEnumerator($1.tupleIds);while($enum2.moveNext()){var $7=$enum2.current;if($p0.isTupleSelected($7)){$5=$4;break;}if($5!==$3&&$p0.isTupleHighlighted($7)){$5=$3;}}}switch($p1){case 'normalUnderPass':if($5===$2&&$p3==='background'){if($p0.get_hasSelection()||$p0.get_hasBrushing()){$0='colorOverrideFog';}else{$0='colorOverrideNone';}var $8=$1.tupleIds.length;for(var $9=0;$9<$8;$9++){this.$46($p0,$9,'normalUnder',$0,$1);}}break;case 'highlightedUnderPass':if($5===$3&&$p3==='background'){var $A=$1.tupleIds.length;for(var $B=0;$B<$A;$B++){if($p0.isTupleHighlighted($1.tupleIds[$B])&&((!$B||!$p0.isTupleVisible($1.tupleIds[$B-1]))&&($B+1>=$1.upperEnd.length||!$p0.isTupleVisible($1.tupleIds[$B+1]))||($B+1<$1.tupleIds.length&&$p0.isTupleVisible($1.tupleIds[$B+1])&&$p0.isTupleHighlighted($1.tupleIds[$B+1])))){$0='colorOverrideNone';}else{$0='colorOverrideFog';}this.$46($p0,$B,'normalUnder',$0,$1);}}break;case 'selectedUnderPass':if($5===$4&&$p3==='background'){$0='colorOverrideNone';var $C=$1.tupleIds.length;for(var $D=0;$D<$C;$D++){this.$46($p0,$D,'normalUnder',$0,$1);}}break;}},$48:function($p0,$p1,$p2,$p3,$p4){switch($p2){case 'normalUnder':if($p0.isTupleVisible($p4.tupleIds[$p1])){var $0=parseInt(((($p4.widths[$p1])-1)/2));var $1=$p4.qrgbColors[$p1];if($p4.useYAxis){var $2=parseInt($p0.thisDomainToPixelX($p4.oppositeAxis[$p1]));var $3=parseInt($p0.thisDomainToPixelY($p4.upperEnd[$p1]));var $4=parseInt($p0.thisDomainToPixelY($p4.lowerEnd[$p1]));var $5=($3-0.5);var $6=($4+1.5);var $7=($2-0.5-$0);var $8=($2+1.5+$0);var $9=($3+1.5);var $A=($4-0.5);var $B=($2-0.5);var $C=($2+1.5);var $D=[$7,$5,$8,$5,$8,$9,$C,$9,$C,$A,$8,$A,$8,$6,$7,$6,$7,$A,$B,$A,$B,$9,$7,$9];this.renderLineLoop($D,1,$p0.getOneColor($p4.qrgbColor,$p3));var $E=[($2-$0),($3+0.5),($2+$0+1),($3+0.5)];this.renderLine($E,1,$p0.getOneColor($1,$p3),false);var $F=[($2-$0),($4+0.5),($2+$0+1),($4+0.5)];this.renderLine($F,1,$p0.getOneColor($1,$p3),false);var $10=[($2+0.5),($3+1),($2+0.5),$4];this.renderLine($10,1,$p0.getOneColor($1,$p3),false);}else{var $11=parseInt($p0.thisDomainToPixelY($p4.oppositeAxis[$p1]));var $12=parseInt($p0.thisDomainToPixelX($p4.lowerEnd[$p1]));var $13=parseInt($p0.thisDomainToPixelX($p4.upperEnd[$p1]));var $14=($11-0.5-$0);var $15=($11+1.5+$0);var $16=($12-0.5);var $17=($13+1.5);var $18=($11-0.5);var $19=($11+1.5);var $1A=($12+1.5);var $1B=($13-0.5);var $1C=[$16,$14,$1A,$14,$1A,$18,$1B,$18,$1B,$14,$17,$14,$17,$15,$1B,$15,$1B,$19,$1A,$19,$1A,$15,$16,$15];this.renderLineLoop($1C,1,$p0.getOneColor($p4.qrgbColor,$p3));var $1D=[($12+0.5),($11-$0),($12+0.5),($11+$0+1)];this.renderLine($1D,1,$p0.getOneColor($1,$p3),false);var $1E=[($13+0.5),($11-$0),($13+0.5),($11+$0+1)];this.renderLine($1E,1,$p0.getOneColor($1,$p3),false);var $1F=[($12+1),($11+0.5),$13,($11+0.5)];this.renderLine($1F,1,$p0.getOneColor($1,$p3),false);}}break;}},$49:function($p0,$p1,$p2,$p3){var $0='colorOverrideNone';if(!(Type.canCast($p2,Object))){return;}var $1=$p2;switch($p1){case 'normalUnderPass':if(!$1.renderOnTop&&$p3==='background'){if($p0.get_hasSelection()||$p0.get_hasBrushing()){$0='colorOverrideFog';}else{$0='colorOverrideNone';}var $2=$1.tupleIds.length;for(var $3=0;$3<$2;$3++){if(!$p0.isTupleHighlighted($1.tupleIds[$3])&&!$p0.isTupleSelected($1.tupleIds[$3])){this.$48($p0,$3,'normalUnder',$0,$1);}}}break;case 'normalOnPass':if($1.renderOnTop&&$p3==='underLabel'){if($p0.get_hasSelection()||$p0.get_hasBrushing()){$0='colorOverrideFog';}else{$0='colorOverrideNone';}var $4=$1.tupleIds.length;for(var $5=0;$5<$4;$5++){if(!$p0.isTupleHighlighted($1.tupleIds[$5])&&!$p0.isTupleSelected($1.tupleIds[$5])){this.$48($p0,$5,'normalUnder',$0,$1);}}}break;case 'selectedUnderPass':if(!$1.renderOnTop&&$p3==='background'){$0='colorOverrideNone';var $6=$1.tupleIds.length;for(var $7=0;$7<$6;$7++){if($p0.isTupleSelected($1.tupleIds[$7])){this.$48($p0,$7,'normalUnder',$0,$1);}}}break;case 'selectedOnPass':if($1.renderOnTop&&$p3==='underLabel'){$0='colorOverrideNone';var $8=$1.tupleIds.length;for(var $9=0;$9<$8;$9++){if($p0.isTupleSelected($1.tupleIds[$9])){this.$48($p0,$9,'normalUnder',$0,$1);}}}break;case 'highlightedUnderPass':if(!$1.renderOnTop&&$p3==='background'){$0='colorOverrideNone';var $A=$1.tupleIds.length;for(var $B=0;$B<$A;$B++){if($p0.isTupleHighlighted($1.tupleIds[$B])){this.$48($p0,$B,'normalUnder',$0,$1);}}}break;case 'highlightedOnPass':if($1.renderOnTop&&$p3==='underLabel'){$0='colorOverrideNone';var $C=$1.tupleIds.length;for(var $D=0;$D<$C;$D++){if($p0.isTupleHighlighted($1.tupleIds[$D])){this.$48($p0,$D,'normalUnder',$0,$1);}}}break;}}}
tab.BrowserViewport=function(dimensions){this.$1=dimensions;}
tab.BrowserViewport.get_$3=function(){return tab.Logger.lazyGetLogger(tab.BrowserViewport);}
tab.BrowserViewport.get_$4=function(){var $0=new tab.WindowHelper(window.self);return tab.$create_Rect($0.get_pageXOffset(),$0.get_pageYOffset(),$0.get_innerWidth(),$0.get_innerHeight());}
tab.BrowserViewport.get_$5=function(){try{var $0=new tab.WindowHelper(window.parent);return tab.$create_Rect($0.get_pageXOffset(),$0.get_pageYOffset(),$0.get_innerWidth(),$0.get_innerHeight());}catch($1){return tab.BrowserViewport.get_$4();}}
tab.BrowserViewport.getViewport=function(callback){tab.Param.verifyValue(callback,'callback');if(tab.DomUtil.isEmbeddedCrossDomain()){if(ss.isNullOrUndefined(tab.BrowserViewport.$2)){callback(new tab.BrowserViewport(tab.BrowserViewport.get_$4()));}else{tab.BrowserViewport.$0.clear();tab.BrowserViewport.$0.add(callback);tab.BrowserViewport.$9();}}else{callback(new tab.BrowserViewport(tab.BrowserViewport.get_$5()));}}
tab.BrowserViewport.$6=function($p0){if(tab.DomUtil.isEmbeddedCrossDomain()){if(ss.isValue(tab.BrowserViewport.$2)){$p0.y+=tab.BrowserViewport.$2.y;$p0.x+=tab.BrowserViewport.$2.x;}}else{try{var $0=window.self;while($0.frameElement!=null){var $1=$($0.frameElement).offset();$p0.y+=$1.top;$p0.x+=$1.left;$0=$0.parent;}}catch($2){}}}
tab.BrowserViewport.$7=function($p0){var $0=$p0.data;if(ss.isNullOrUndefined($0)){return;}var $1=$0.split(',');if(!ss.isValue($1)||$1.length<=0){return;}switch($1[0]){case 'layoutInfoResp':if($1.length===5){var $2=tab.$create_Rect(parseInt($1[1],10),parseInt($1[2],10),parseInt($1[3],10),parseInt($1[4],10));tab.BrowserViewport.$8($2);}break;case 'vizOffsetResp':if($1.length===3){tab.BrowserViewport.$2=tab.$create_Point(parseInt($1[1],10),parseInt($1[2],10));}break;}}
tab.BrowserViewport.$8=function($p0){var $0=new tab.BrowserViewport($p0);var $enum1=ss.IEnumerator.getEnumerator(tab.BrowserViewport.$0);while($enum1.moveNext()){var $1=$enum1.current;$1($0);}tab.BrowserViewport.$0.clear();}
tab.BrowserViewport.$9=function(){if(tab.BrowserSupport.get_postMessage()){window.parent.postMessage('layoutInfoReq','*');}else{tab.BrowserViewport.$8(tab.BrowserViewport.get_$4());}}
tab.BrowserViewport.prototype={$1:null,get_dimensions:function(){return this.$1;},translatePositionToViewport:function(p){var $0=tab.$create_Point(p.x,p.y);tab.BrowserViewport.$6($0);$0.y-=this.$1.t;$0.x-=this.$1.l;return $0;},getVisibleRoom:function(position,padding){padding=padding||0;var $0=this.translatePositionToViewport(position);var $1=function($p1_0){
return Math.max(0,$p1_0-padding);};var $2=$1(Math.min(this.get_dimensions().w-$0.x,($(window).width()+$(window).scrollLeft())-position.x));var $3=$1(Math.min($0.x,position.x));var $4=$1(Math.min($0.y,position.y));var $5=$1(Math.min(this.get_dimensions().h-$0.y,($(window).height()+$(window).scrollTop())-position.y));return tab.$create_VisibleRoom($4,$5,$3,$2);},getDocumentViewport:function(point){var $0=this.getVisibleRoom(point);return tab.$create_Rect(point.x-$0.roomLeft,point.y-$0.roomAbove,$0.roomLeft+$0.roomRight,$0.roomAbove+$0.roomBelow);}}
tab.ImageUtil=function(){}
tab.ImageUtil.scaleImage=function(img,newWidth,newHeight,oldWidth,oldHeight){var $0=document.createElement('canvas');$0.width=oldWidth;$0.height=oldHeight;var $1=$0.getContext('2d');$1.drawImage(img,0,0);var $2=$1.getImageData(0,0,oldWidth,oldHeight);var $3=document.createElement('canvas');$3.width=newWidth;$3.height=newHeight;var $4=$3.getContext('2d');var $5=$4.createImageData(newWidth,newHeight);tab.ImageUtil.bilinearDownSampleAlgorithm($2,$5);$4.putImageData($5,0,0);return $3;}
tab.ImageUtil.bilinearDownSampleAlgorithm=function(input,output){var $0=input.width/output.width;var $1=input.height/output.height;var $2=$0;var $3=$1;var $4=input.data;var $5=output.data;var $6=new Array($5.length);for(var $16=0;$16<$6.length;$16++){$6[$16]=0;}var $7=1/($0*$1);var $8=0;var $9=0;var $A=false;var $B,$C;$B=$C=0;var $D=$7;var $E=0;var $F=0;var $10=0;var $11=4*output.width;var $12,$13,$14,$15;for(var $17=0;$17<input.height;$17++){$2=$0;for(var $18=0;$18<input.width;$18++){$12=$4[$8];$13=$4[$8+1];$14=$4[$8+2];$15=$4[$8+3];$D=$7;if($A){$D=$B;$F=$C;if($2<1){$F*=$2;}$6[$9+$11]+=$12*$F;$6[$9+$11+1]+=$13*$F;$6[$9+$11+2]+=$14*$F;$6[$9+$11+3]+=$15*$F;}if($2<1){$E=$D*(1-$2);$D*=$2;if($A){$10=$C*(1-$2);$6[$9+$11+4]+=$12*$10;$6[$9+$11+5]+=$13*$10;$6[$9+$11+6]+=$14*$10;$6[$9+$11+7]+=$15*$10;}$6[$9+4]+=$12*$E;$6[$9+5]+=$13*$E;$6[$9+6]+=$14*$E;$6[$9+7]+=$15*$E;}$6[$9++]+=$12*$D;$6[$9++]+=$13*$D;$6[$9++]+=$14*$D;$6[$9++]+=$15*$D;$8+=4;$2-=1;if($2<tab.FloatUtil.epsilon){$2+=$0;}else{$9-=4;}}$3-=1;if($3<tab.FloatUtil.epsilon){$3+=$1;}else{$9-=$11;}if($3<1){$A=true;$B=$3/($0*$1);$C=(1-$3)/($0*$1);}else{$A=false;}}for(var $19=0;$19<$6.length;$19++){$5[$19]=$6[$19]+0.5;}}
tab.CanvasUtil=function(){}
tab.CanvasUtil.applyHighDPISupport=function(canvas,context){var $0=tab.RenderUtil.calculatePixelRatio();if($0!==1&&!tab.CanvasUtil.$0(canvas)){tab.CanvasUtil.densifyCanvasUsingRatio(canvas,$0);tab.CanvasUtil.scaleCanvasDrawing(context,$0);}}
tab.CanvasUtil.densifyCanvasUsingRatio=function(canvasEl,pixelRatio){if(ss.isValue(canvasEl)&&!tab.FloatUtil.isEqual(pixelRatio,1)){var $0=canvasEl.width;var $1=canvasEl.height;canvasEl.width=(canvasEl.width*pixelRatio);canvasEl.height=(canvasEl.height*pixelRatio);canvasEl.style.width=$0.toString()+'px';canvasEl.style.height=$1.toString()+'px';}}
tab.CanvasUtil.densifyCanvasUsingSize=function(canvasEl,actual,effective){if(ss.isValue(canvasEl)&&ss.isValue(actual)&&ss.isValue(effective)){canvasEl.width=actual.w;canvasEl.height=actual.h;canvasEl.style.width=tab.CanvasUtil.$1(effective.w);canvasEl.style.height=tab.CanvasUtil.$1(effective.h);}}
tab.CanvasUtil.scaleCanvasDrawing=function(context,pixelRatio){if(ss.isValue(context)){context.scale(pixelRatio,pixelRatio);}}
tab.CanvasUtil.isOverIpadRenderLimit=function(effectiveWidth,effectiveHeight,pixelRatio){var $0=Math.floor((pixelRatio*effectiveWidth*pixelRatio*effectiveHeight)+0.5);return $0>tabBootstrap.ViewerBootstrap.ipadImageSizeLimit;}
tab.CanvasUtil.$0=function($p0){return !!$p0.style.height&&$p0.style.height!==tab.CanvasUtil.$1($p0.height);}
tab.CanvasUtil.$1=function($p0){return $p0+'px';}
tab.Metrics=function(){}
tab.Metrics.get_scrollW=function(){return tab.Metrics.get_$0();}
tab.Metrics.get_minScrollWidth=function(){if(dojo.isSafari||tableau.util.isMac){return 60;}return tab.Metrics.get_scrollW()*2;}
tab.Metrics.get_scrollH=function(){return tab.Metrics.get_$0();}
tab.Metrics.get_minScrollHeight=function(){if(dojo.isSafari||tableau.util.isMac){return 60;}return tab.Metrics.get_scrollH()*2;}
tab.Metrics.get_scrollInterval=function(){if(!!dojo.isIE){if(dojo.isIE<9){return 7;}return 20;}if(dojo.isFF){return 10;}if(dojo.isSafari){return 40;}return 1;}
tab.Metrics.get_$0=function(){return tab.MiscUtil.lazyInitStaticField(tab.Metrics,'_scrollBarSize',function(){
return tabBootstrap.LayoutMetrics.getScrollbarSize();});}
tab.LocalSearch=function(){}
tab.LocalSearch.searchQueryMatchesText=function(query,text){var $0=query.length;var $1;if(query.charAt(0)==='"'&&query.charAt($0-1)==='"'){return query.substr(1,$0-2)===text;}else if(query.charAt(0)!=='*'&&query.charAt($0-1)==='*'){return !text.indexOf(query.substr(0,$0-1));}else if(query.charAt(0)==='*'&&query.charAt($0-1)!=='*'){$1=text.lastIndexOf(query.substr(1,$0-1));return $1>=0&&$1===text.length-($0-1);}else if(query.charAt(0)==='*'&&query.charAt($0-1)==='*'){return text.indexOf(query.substr(1,$0-2))>=0;}else{return text.indexOf(query)>=0;}}
tab.LocalSearch.findMatches=function(query,filter,tupleFormatter,uniqueIdBase,resultTransformer){var $0=query.toLowerCase();var $1=[];var $2=filter.table.tuples;if(ss.isNullOrUndefined(resultTransformer)){resultTransformer=function($p1_0,$p1_1,$p1_2){
return $p1_0;};}for(var $3=0;$3<$2.length;$3++){var $4=tupleFormatter($2[$3]);if(tab.LocalSearch.searchQueryMatchesText($0,$4.toLowerCase())){var $5=uniqueIdBase+'_'+$3.toString();$1.push(resultTransformer($2[$3],$4,$5));}}return $1;}
tab.DisplayList2DUtils=function(){}
tab.DisplayList2DUtils.rectXYFromDrawRect=function(points){return tab.$create_RectXY(points[0],points[1],points[2]-points[0],points[3]-points[1]);}
tab.GeometryUtil=function(){}
tab.GeometryUtil.isPointInPoly=function(poly,p){var $0=0;for(var $1=0;$1<poly.length;++$1){if(tab.GeometryUtil.$1(poly,$1).y<=p.y){if(tab.GeometryUtil.$1(poly,$1+1).y>p.y){if(tab.GeometryUtil.$0(tab.GeometryUtil.$1(poly,$1),tab.GeometryUtil.$1(poly,$1+1),p)>0){++$0;}}}else{if(tab.GeometryUtil.$1(poly,$1+1).y<=p.y){if(tab.GeometryUtil.$0(tab.GeometryUtil.$1(poly,$1),tab.GeometryUtil.$1(poly,$1+1),p)<0){--$0;}}}}if(!$0){return false;}return true;}
tab.GeometryUtil.isPointInMultipolygon=function(multipolygon,p){var $0=false;var $enum1=ss.IEnumerator.getEnumerator(multipolygon);while($enum1.moveNext()){var $1=$enum1.current;var $2=0;var $enum2=ss.IEnumerator.getEnumerator($1);while($enum2.moveNext()){var $3=$enum2.current;var $4=tab.GeometryUtil.$2($3);var $5=tab.GeometryUtil.isPointInPoly($4,p);if(!$2){if($5){$0=true;}else{break;}}else{if($5){$0=false;break;}}$2++;}if($0){return $0;}}return $0;}
tab.GeometryUtil.mulipolygonIntersectsRect=function(multipolygon,rect){var $enum1=ss.IEnumerator.getEnumerator(multipolygon);while($enum1.moveNext()){var $0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($0);while($enum2.moveNext()){var $1=$enum2.current;var $2=tab.GeometryUtil.$2($1);var $enum3=ss.IEnumerator.getEnumerator($2);while($enum3.moveNext()){var $4=$enum3.current;if(tab.RectXYUtil.inRectPointF(rect,$4)){return true;}}var $3=[];$3.add(tab.$create_PointF(rect.x,rect.y));$3.add(tab.$create_PointF(rect.x+rect.w,rect.y));$3.add(tab.$create_PointF(rect.x,rect.y+rect.h));$3.add(tab.$create_PointF(rect.x+rect.w,rect.y+rect.h));var $enum4=ss.IEnumerator.getEnumerator($3);while($enum4.moveNext()){var $5=$enum4.current;if(tab.GeometryUtil.isPointInPoly($2,$5)){return true;}}}}return false;}
tab.GeometryUtil.normalizeAngle=function(radians){var $0=radians%tab.GeometryUtil.twoPI;if($0<0){$0+=tab.GeometryUtil.twoPI;}return $0;}
tab.GeometryUtil.isInBetweenAngles=function(target,angle1,angle2){var $0=false;if(angle1>angle2){var $1=angle1;angle1=angle2;angle2=$1;$0=true;}if(angle1<=target&&angle2>=target){return !$0;}return $0;}
tab.GeometryUtil.isPointInCircle=function(p,center,diameter){var $0=Math.pow(p.x-center.x,2)+Math.pow(p.y-center.y,2);var $1=Math.pow(diameter/2,2);var $2=$0<$1;return $2;}
tab.GeometryUtil.isPointInWedge=function(p,center,radius,startangle,endangle){if(!tab.GeometryUtil.isPointInCircle(p,center,radius*2)){return false;}var $0=p.x-center.x;var $1=p.y-center.y;var $2=Math.atan2($1,$0);$2=tab.GeometryUtil.normalizeAngle($2);return tab.GeometryUtil.isInBetweenAngles($2,startangle,endangle);}
tab.GeometryUtil.areRectanglesIntersecting=function(rect1,rect2){return tab.RectXYUtil.intersectsWith(rect1,rect2);}
tab.GeometryUtil.$0=function($p0,$p1,$p2){return ((($p1.x-$p0.x)*($p2.y-$p0.y))-(($p2.x-$p0.x)*($p1.y-$p0.y)));}
tab.GeometryUtil.$1=function($p0,$p1){var $0=$p1%$p0.length;return $p0[$0];}
tab.GeometryUtil.$2=function($p0){var $0=[Math.floor($p0.length/2)];for(var $1=0;$1<$p0.length;$1=$1+2){$0.add(tab.$create_PointF($p0[$1],$p0[$1+1]));}return $0;}
tab.HitTestDebugger=function(){var $0=$('.tab-tvView .tabCanvas');this.$3=$0.get(0);this.$2=this.$3.style.position;this.$3.style.position='absolute';this.$4=document.createElement('canvas');this.$4.width=this.$3.width;this.$4.height=this.$3.height;this.$4.style.position='absolute';this.$5=this.$3.parentNode;this.$5.appendChild(this.$4);}
tab.HitTestDebugger.get_instance=function(){if(ss.isNullOrUndefined(tab.HitTestDebugger.$0)){tab.HitTestDebugger.$0=new tab.HitTestDebugger();}return tab.HitTestDebugger.$0;}
tab.HitTestDebugger.prototype={$2:null,$3:null,$4:null,$5:null,get_context2D:function(){return this.$4.getContext('2d');},debugDrawBoundingBoxesHierarchy:function(root){this.clear();this.$6(root);},debugDrawBoundingBoxesHierarchies:function(roots){this.clear();var $enum1=ss.IEnumerator.getEnumerator(roots);while($enum1.moveNext()){var $0=$enum1.current;this.$6($0);}},clear:function(){this.get_context2D().clearRect(0,0,this.$4.width,this.$4.height);},done:function(){this.$3.style.position=this.$2;this.$5.removeChild(this.$4);},$6:function($p0){var $0=[];$0.enqueue($p0);while($0.length>0){var $1=$0.dequeue();if($1.get_nodeType()===2){var $3=$1.get_boundingBox();this.get_context2D().save();if(!(tab.HitTestDebugger.$1%2)){this.get_context2D().fillStyle='rgba(120, 255, 20, 0.1)';}else{this.get_context2D().fillStyle='rgba(20, 255, 120, 0.1)';}this.get_context2D().fillRect($3.x,$3.y,$3.w,$3.h);this.get_context2D().restore();++tab.HitTestDebugger.$1;}if($1.get_nodeType()===3||$1.get_nodeType()===5){var $4=$1.get_boundingBox();this.get_context2D().save();this.get_context2D().fillStyle='rgba(255, 0, 0, 0.2)';this.get_context2D().fillRect($4.x,$4.y,$4.w,$4.h);this.get_context2D().restore();}if($1.get_nodeType()===4){var $5=$1.get_boundingBox();this.get_context2D().save();this.get_context2D().fillStyle='rgba(0, 0, 255, 0.2)';this.get_context2D().fillRect($5.x,$5.y,$5.w,$5.h);this.get_context2D().restore();}var $2=$1.get_children();$2.forEach(function($p1_0){
$0.enqueue($p1_0);});}}}
tab.VisualPartsHitTest=function(){}
tab.VisualPartsHitTest.hitTestRefLine=function(drawItems,selectionRect){var $0=tab.VisualPartsHitTest.$2(drawItems,'refpart-geom');var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $2=$enum1.current;var $3=$2;if(tab.VisualPartsHitTest.$0($3.drawItems,selectionRect)){return true;}}var $1=tab.VisualPartsHitTest.$2(drawItems,'refpart-text');var $enum2=ss.IEnumerator.getEnumerator($1);while($enum2.moveNext()){var $4=$enum2.current;var $5=$4;if(tab.VisualPartsHitTest.$1($5.drawItems,selectionRect)){return true;}}return false;}
tab.VisualPartsHitTest.hitTestTrendLines=function(trendLineHitTestStructures,selectionRect){var $enum1=ss.IEnumerator.getEnumerator(trendLineHitTestStructures);while($enum1.moveNext()){var $0=$enum1.current;var $1=new tab.HitTester($0);if($1.hitTestTrendLine(selectionRect)){return true;}}return false;}
tab.VisualPartsHitTest.$0=function($p0,$p1){var $0=1;var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.current;switch($1.type){case 'draw-pen':var $2=$1;if(ss.isValue($2.strokeWidth)){$0=$2.strokeWidth;}break;case 'draw-polyline':case 'draw-fill-rect':var $3=$1;var $4=tab.$create_PointF($3.points[0],$3.points[1]);var $5=tab.$create_PointF($3.points[2],$3.points[3]);var $6=tab.RectXYUtil.rectXYFromCorners($4,$5);if($1.type==='draw-polyline'){var $7=Math.ceil($0/2)+4;$6=tab.RectXYUtil.dialate($6,$7);}if(tab.RectXYUtil.intersectsWith($p1,$6)){return true;}break;default:break;}}return false;}
tab.VisualPartsHitTest.$1=function($p0,$p1){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;switch($0.type){case 'draw-fill-rect':var $1=$0;var $2=tab.DisplayList2DUtils.rectXYFromDrawRect($1.points);if(tab.RectXYUtil.intersectsWith($p1,$2)){return true;}break;default:break;}}return false;}
tab.VisualPartsHitTest.$2=function($p0,$p1){var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.current;if($1.type==='clip-rect'&&$p1==='refpart-clip-rect'){$0.add($1);}else if($1.type==='draw-group'){var $2=$1;var $3=_.find($2.drawItems,function($p1_0){
return $p1_0.type==='draw-text';});if($p1==='refpart-text'&&ss.isValue($3)){$0.add($1);}else if($p1==='refpart-geom'&&ss.isNullOrUndefined($3)){$0.add($1);}}}return $0;}
tab.LineMarkDrawState=function(){this.$0=[];}
tab.LineMarkDrawState.prototype={$0:null,get_lineAttributes:function(){return this.$0;},reCompute:function(paneDrawInfo){this.$0.clear();var $0=paneDrawInfo.get_markCount();var $1=new tab.LineAttribute(0);for(var $2=0;$2<$0;$2++){if(paneDrawInfo.get_isWrappedDomain()){var $3=paneDrawInfo.getMarkBounds($2);var $4=$3.x;var $5=$3.x+$3.w;$1.minXDomain=Math.min($1.minXDomain,paneDrawInfo.pixelToDomainX($4));$1.maxXDomain=Math.max($1.maxXDomain,paneDrawInfo.pixelToDomainX($5));}if(paneDrawInfo.isMarkSelected($2)){$1.selectedCount++;}if(paneDrawInfo.isMarkHighlighted($2)){$1.highlightedCount++;}if(paneDrawInfo.isMarkEndPrimitive($2)){$1.endIndex=$2;this.$0.add($1);$1=new tab.LineAttribute($2+1);}}}}
tab.LineAttribute=function(startIndex){this.startIndex=startIndex;this.endIndex=-1;this.selectedCount=0;this.highlightedCount=0;this.minXDomain=0;this.maxXDomain=0;}
tab.LineAttribute.prototype={startIndex:0,endIndex:0,selectedCount:0,highlightedCount:0,minXDomain:0,maxXDomain:0,get_allHighlighted:function(){return this.highlightedCount>=(this.endIndex-this.startIndex+1);},get_lineState:function(){if(this.selectedCount>0){return 'lineStateSelected';}else if(this.highlightedCount>0){return 'lineStateHighlighted';}else{return 'lineStateNormal';}}}
tab.EventUtil=function(){}
tab.EventUtil.bindWithDispose=function(element,eventName,handler){var $0=String.format('{0}.{1}',eventName,++tab.EventUtil.$0);element.bind($0,handler);return new tab.CallOnDispose(function(){
element.unbind($0);});}
tab.EventUtil.subscribeWithDispose=function(eventName,handler){var $0=dojo.subscribe(eventName,handler);return new tab.CallOnDispose(function(){
dojo.unsubscribe($0);});}
tab.EventUtil.createEventHandler=function(element,config){if(tsConfig.is_mobile){return new tab.TouchHandler(element, config);}else{return new tab.MouseHandler(element, config);}}
tab.HitTargetColliders=function(){}
tab.HitTargetNode=function(boundingBox,nodeType,labelBoundingBox,markIndex,worldOffset){this.$1=boundingBox;if(ss.isNullOrUndefined(labelBoundingBox)||tab.RectXYUtil.isEmpty(labelBoundingBox)){this.$4=null;}else{this.$4=labelBoundingBox;}if(ss.isNullOrUndefined(markIndex)){this.$3=-1;}else{this.$3=markIndex;}if(ss.isNullOrUndefined(worldOffset)){this.$5=-1;}else{this.$5=worldOffset;}this.$2=nodeType;this.$0=[];}
tab.HitTargetNode.findPaneNode=function(node){if(ss.isNullOrUndefined(node)){return null;}while(!!node.$2){if(node.get_nodeType()===1){return node;}node=node.get_parent();}return null;}
tab.HitTargetNode.createRootNode=function(){return new tab.HitTargetNode(tab.$create_RectXY(0,0,9999999,9999999),0);}
tab.HitTargetNode.prototype={$0:null,$1:null,$2:0,$3:0,$4:null,$5:0,$6:null,$7:null,get_markIndex:function(){return this.$3;},get_worldOffset:function(){return this.$5;},get_nodeType:function(){return this.$2;},get_boundingBox:function(){return this.$1;},get_labelBox:function(){return this.$4;},get_children:function(){return this.$0;},get_parent:function(){return this.$6;},set_parent:function(value){this.$6=value;return value;},get_paneKey:function(){return this.$7;},set_paneKey:function(value){this.$7=value;return value;},addNode:function(node){this.$0.add(node);node.set_parent(this);},addNodes:function(nodes){this.$0.addRange(nodes);var $enum1=ss.IEnumerator.getEnumerator(nodes);while($enum1.moveNext()){var $0=$enum1.current;$0.set_parent(this);}},resetChildren:function(){this.$0.clear();}}
tab.HitTester=function(root){this.$0=root;}
tab.HitTester.$1=function($p0,$p1,$p2,$p3,$p4){switch($p4){case 'line':return tab.MarksRenderer.$18($p0,$p1.x-$p3,$p1.y,$p2);case 'area':return tab.MarksRenderer.$F($p0,$p1.x-$p3,$p1.y,$p2);case 'pie':return tab.MarksRenderer.$13($p0,$p1.x-$p3,$p1.y,$p2);case 'multipolygon':return tab.MarksRenderer.$C($p0,$p1.x-$p3,$p1.y,$p2);case 'shape':return tab.MarksRenderer.$1C($p0,$p1.x-$p3,$p1.y,$p2);default:return true;}}
tab.HitTester.$2=function($p0,$p1,$p2,$p3,$p4){switch($p4){case 'line':return tab.MarksRenderer.$19($p0,$p1.x-$p3,$p1.y,$p2);case 'shape':return tab.MarksRenderer.$1D($p0,$p1.x-$p3,$p1.y,$p2);default:return false;}}
tab.HitTester.$3=function($p0,$p1,$p2,$p3,$p4){var $0=tab.$create_RectXY($p1.x-Math.round($p3),$p1.y,$p1.w,$p1.h);switch($p4){case 'line':return tab.MarksRenderer.$1A($p0,$0,$p2);case 'multipolygon':return tab.MarksRenderer.$D($p0,$0,$p2);default:return true;}}
tab.HitTester.prototype={$0:null,hitTestTrendLine:function(selectionRect){var $0=[];$0.push(this.$0);while($0.length>0){var $1=$0.pop();var $2=tab.RectXYUtil.intersectsWith($1.get_boundingBox(),selectionRect);if($2){if($1.get_nodeType()===4||!$1.get_nodeType()){var $3=$1.get_children();$3.forEach(function($p1_0){
$0.push($p1_0);});}else if($1.get_nodeType()===5){return true;}}}return false;},hitTestPanes:function(selectionRect){var $0=[];var $1=[];$1.push(this.$0);while($1.length>0){var $2=$1.pop();var $3=tab.RectXYUtil.intersectsWith($2.get_boundingBox(),selectionRect);if($3){if($2.get_nodeType()===1){$0.add($2.get_paneKey());}else{var $4=$2.get_children();$4.forEach(function($p1_0){
$1.push($p1_0);});}}}return $0;},hitTest:function(selectionRect,isSingleSelect,sceneInfo){var $0=selectionRect.x+(selectionRect.w/2);var $1=selectionRect.y+(selectionRect.h/2);var $2=this.$4(selectionRect,isSingleSelect);var $3=[];var $4=[];var $5={};var $6={};var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $7=$enum1.current;if($7.get_markIndex()<0){continue;}var $8=tab.HitTargetNode.findPaneNode($7);if(ss.isNullOrUndefined($8)){continue;}var $9=sceneInfo.getPaneDrawInfoFromKey($8.get_paneKey());var $A=$9.getWorldOffset($7.get_worldOffset());if(isSingleSelect){var $B=$9.getMarkProperty('tuple_id',$7.get_markIndex());var $C=tab.HitTester.$1($9,selectionRect,$7.get_markIndex(),$A,$9.get_markType());if($C){$4.add($B);$6[$B]=$9.getMarkState($7.get_markIndex());}else if(!$4.length){var $D=tab.HitTester.$2($9,selectionRect,$7.get_markIndex(),$A,$9.get_markType());if($D){var $E=$7.get_boundingBox().x+($7.get_boundingBox().w/2);var $F=$7.get_boundingBox().y+($7.get_boundingBox().h/2);var $10=$E-$0;var $11=$F-$1;$5[$B]=($10*$10)+($11*$11);$6[$B]=$9.getMarkState($7.get_markIndex());}else{}}}else{var $12=tab.HitTester.$3($9,selectionRect,$7.get_markIndex(),$A,$9.get_markType());if($12){$3.add($9.getMarkProperty('tuple_id',$7.get_markIndex()));}}}if(isSingleSelect){if($4.length>0){$3=this.$5($4,$6);}else{$3=this.$6($5,$6);}}return $3;},$4:function($p0,$p1){var $0=[];var $1=[];$1.push(this.$0);while($1.length>0){var $2=$1.pop();var $3=tab.RectXYUtil.intersectsWith($2.get_boundingBox(),$p0);if(!$3&&$p1&&ss.isValue($2.get_labelBox())){$3=tab.RectXYUtil.intersectsWith($2.get_labelBox(),$p0);}if($3){if($2.get_nodeType()===3){$0.add($2);}else{var $4=$2.get_children();$4.forEach(function($p1_0){
$1.push($p1_0);});}}}return $0;},$5:function($p0,$p1){var $0=null;var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.current;if(!Object.keyExists($p1,$1)){continue;}if($p1[$1]==='markStateInvisible'){continue;}if(ss.isNull($0)){$0=$1;}else if(this.$7($p1[$1])>this.$7($p1[$0])){$0=$1;}}return (ss.isNull($0))?[]:[$0];},$6:function($p0,$p1){var $0=null;var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0));while($enum1.moveNext()){var $1=$enum1.current;if(!Object.keyExists($p1,$1)){continue;}if($p1[$1]==='markStateInvisible'){continue;}if(ss.isNull($0)){$0=$1;}else if(this.$7($p1[$1])>this.$7($p1[$0])){$0=$1;}else if((this.$7($p1[$1])===this.$7($p1[$0]))&&($p0[$1]<$p0[$0])){$0=$1;}}return (ss.isNull($0))?[]:[$0];},$7:function($p0){switch($p0){case 'markStateInvisible':return 0;case 'markStateNormal':return 1;case 'markStateHighlighted':return 2;case 'markStateSelected':return 3;default:return -1;}}}
tab.HitTestStructureBuilder=function(){}
tab.HitTestStructureBuilder.buildBinnedHitTestStructure=function(sceneInfo,binCount){var $0=tab.HitTargetNode.createRootNode();var $1=sceneInfo.get_scene().panes;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;var $3=tab.HitTestStructureBuilder.$0($2);var $enum2=ss.IEnumerator.getEnumerator($3);while($enum2.moveNext()){var $4=$enum2.current;var $5=sceneInfo.getPaneDrawInfo($4);var $6=($5.get_mapExtents()||$5.get_paneRect());var $7=new tab.HitTargetNode($6,1);var $8=tab.SceneInfo.getPaneMarksKey($4);$7.set_paneKey($8);$0.addNode($7);var $9=Math.ceil($6.w/binCount);for(var $B=0;$B<binCount;++$B){var $C=($B*$9)+$6.x;var $D=$6.y;var $E=$9;var $F=$6.h;var $10=new tab.HitTargetNode(tab.$create_RectXY($C,$D,$E,$F),2);$7.addNode($10);}var $A=tab.HitTestStructureBuilder.buildMarkBounds($5);var $enum3=ss.IEnumerator.getEnumerator($A);while($enum3.moveNext()){var $11=$enum3.current;var $enum4=ss.IEnumerator.getEnumerator($7.get_children());while($enum4.moveNext()){var $12=$enum4.current;if(tab.RectXYUtil.intersectsWith($11.get_boundingBox(),$12.get_boundingBox())){$12.addNode($11);}}}}}return $0;}
tab.HitTestStructureBuilder.buildLinearHitTestStructure=function(sceneInfo){var $0=tab.HitTargetNode.createRootNode();var $1=sceneInfo.get_scene().panes;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;var $3=tab.HitTestStructureBuilder.$0($2);var $enum2=ss.IEnumerator.getEnumerator($3);while($enum2.moveNext()){var $4=$enum2.current;var $5=sceneInfo.getPaneDrawInfo($4);var $6=($5.get_mapExtents()||$5.get_paneRect());var $7=new tab.HitTargetNode($6,1);var $8=tab.SceneInfo.getPaneMarksKey($4);$7.set_paneKey($8);$0.addNode($7);var $9=tab.HitTestStructureBuilder.buildMarkBounds($5);$7.addNodes($9);}}return $0;}
tab.HitTestStructureBuilder.buildTrendLineHitTestStructure=function(trendLineDrawPath,lineWidth){var $0=trendLineDrawPath.pointsF;var $1=trendLineDrawPath.pathElements;var $2=Math.floor($0.length/2);if($2<2){return new tab.HitTargetNode(tab.$create_RectXY(0,0,0,0),0);}var $3=[];var $4=0;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $6=$enum1.current;switch($6){case 'moveto':$4+=2;break;case 'lineto':if(ss.isValue($0[$4+3])){var $7=[$0[$4],$0[$4+1],$0[$4+2],$0[$4+3]];var $8=Math.min($7[0],$7[2]);var $9=Math.min($7[1],$7[3]);var $A=Math.max($7[0],$7[2])-$8;var $B=Math.max($7[1],$7[3])-$9;var $C=tab.$create_RectXY($8,$9,$A,$B);$C=tab.RectXYUtil.dialate($C,parseInt(lineWidth));var $D=new tab.HitTargetNode($C,5);$3.add($D);}$4+=2;break;case 'curveto':$4+=6;break;default:break;}}var $5=tab.HitTestStructureBuilder.$1($3,4);return $5;}
tab.HitTestStructureBuilder.buildMarkBounds=function(paneDrawInfo){var $0=[];var $1=paneDrawInfo.get_markCount();for(var $2=0;$2<$1;++$2){var $3=paneDrawInfo.getMarkBounds($2);var $4=(paneDrawInfo.markHasLabel($2))?paneDrawInfo.getMarkLabelBounds($2):null;if(paneDrawInfo.get_isWrappedDomain()){var $5=paneDrawInfo.pixelToDomainX($3.x);var $6=paneDrawInfo.pixelToDomainX($3.x+$3.w);var $7=paneDrawInfo.getMarkInstances($5,$6);for(var $8=$7.first;$8<=$7.second;++$8){var $9=tab.$create_Point(parseInt(paneDrawInfo.getWorldOffset($8)),0);var $A=tab.RectXYUtil.offsetRect($3,$9);var $B=(ss.isValue($4))?tab.RectXYUtil.offsetRect($4,$9):null;$0.add(new tab.HitTargetNode($A,3,$B,$2,$8));}}else{$0.add(new tab.HitTargetNode($3,3,$4,$2,0));}}return $0;}
tab.HitTestStructureBuilder.print=function(node,lv){var $0='';var $1=lv;while($1>0){$0+=' ';--$1;}console.log($0 + node.get_markIndex());if(node.get_nodeType()!==3){node.get_children().forEach(function($p1_0){
tab.HitTestStructureBuilder.print($p1_0,lv+1);});}}
tab.HitTestStructureBuilder.$0=function($p0){var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p0.drawPane);while($enum1.moveNext()){var $1=$enum1.current;if($1.visualPart==='marks'){$0.add($1.paneMarks);}}return $0;}
tab.HitTestStructureBuilder.$1=function($p0,$p1){var $0=$p0;while($0.length>1){var $2=[];for(var $3=0;$3<$0.length;$3+=$p1){var $4=$p1;var $5=$0.length-$3;if($5<$p1){$4=$5;}var $6=[];var $7=null;for(var $9=0;$9<$4;++$9){var $A=$0[$3+$9];$6.add($A);if(!$9){$7=tab.$create_RectXY($A.get_boundingBox().x,$A.get_boundingBox().y,$A.get_boundingBox().w,$A.get_boundingBox().h);}else{$7=tab.RectXYUtil.union($7,$6[$9].get_boundingBox());}}var $8=new tab.HitTargetNode($7,4);$8.addNodes($6);$2.add($8);}$0=$2;}if($0.length!==1){}var $1=tab.HitTargetNode.createRootNode();$1.addNodes($0);return $1;}
tab.RectangleGeom=function(geom){this.$0=geom;}
tab.RectangleGeom.prototype={$0:null,get_type:function(){return 0;},get_geom:function(){return this.$0;}}
tab.ModifierKeyState=function(){this.$0=true;$(document).bind('keydown.ModifierKeyState keyup.ModifierKeyState mouseover.ModifierKeyState',ss.Delegate.create(this,this.$2));$(window).bind('focus.ModifierKeyState',ss.Delegate.create(this,function(){
this.focus();}));$(window).bind('blur.ModifierKeyState',ss.Delegate.create(this,function(){
this.blur();}));this.$1();}
tab.ModifierKeyState.prototype={$0:false,focus:function(){this.$3(true);},blur:function(){this.$3(false);},dispose:function(){$(document).unbind('.ModifierKeyState');$(window).unbind('.ModifierKeyState');},$1:function(){window.focus();},$2:function($p0){if(!this.$0&&!tab.BrowserSupport.get_isIE()){if(tab.BrowserSupport.get_isFF()&&ss.isValue(document.activeElement)){document.activeElement.blur();}this.$1();}dojo.publish(tab.EventMap.modifierKeysChanged,[$p0]);},$3:function($p0){if($p0===this.$0){return;}this.$0=$p0;}}
tab.MouseEventUtil=function(){}
tab.MouseEventUtil.get_clickEvent=function(){return (tsConfig.is_touch)?'touchstart':'click';}
tab.MouseEventUtil.getMouseButtonEnum=function(e){tab.MouseEventUtil.$3();var $0='none';var $1=e.which;if(!ss.isNullOrUndefined($1)){var $2=$1;if(Object.keyExists(tab.MouseEventUtil.$1,$2)){$0=tab.MouseEventUtil.$1[$2];}}else if(!ss.isNullOrUndefined(e.button)){var $3=e.button;if(Object.keyExists(tab.MouseEventUtil.$0,$3)){$0=tab.MouseEventUtil.$0[$3];}}return $0;}
tab.MouseEventUtil.$3=function(){if(!tab.MouseEventUtil.$2){tab.MouseEventUtil.$0={};tab.MouseEventUtil.$0[1]='left';tab.MouseEventUtil.$0[4]='middle';tab.MouseEventUtil.$0[2]='right';tab.MouseEventUtil.$1={};tab.MouseEventUtil.$1[1]='left';tab.MouseEventUtil.$1[2]='middle';tab.MouseEventUtil.$1[3]='right';tab.MouseEventUtil.$2=true;}}
tab.PaneDrawInfo=function(scene,pane,paneMarks,pdMarks,colorDict){this.$20={};this.$1F={};this.$1E=scene;this.$27=paneMarks;this.$32=false;this.$22=tab.RecordCast.rectJsonAsRectXY(pane.paneRect);this.$21=tab.PaneDrawInfo.$3C(pane);this.$24=pdMarks.markLayoutPrimitive;this.$26=tab.PaneDrawInfo.$3B(this.$27);this.$25=pdMarks.intMap['pane_flags'];var $0=tab.PaneDrawInfo.$3D(pdMarks);var $enum1=ss.IEnumerator.getEnumerator(Object.keys($0));while($enum1.moveNext()){var $3=$enum1.current;this.$1F[$3]=$0[$3];this.$20[$3]='';}this.$1C=Object.keyExists($0,'wrap_domain')&&$0['wrap_domain'][0];var $enum2=ss.IEnumerator.getEnumerator(Object.keys(pdMarks.encodingColumns));while($enum2.moveNext()){var $4=$enum2.current;this.$1F[$4]=tab.PaneDrawInfo.$41(pdMarks.encodingColumns[$4],this.$27.startIndex,this.get_markCount());}this.scaledMarks=this.scaleMarksInX()&&this.scaleMarksInY();var $1=tab.ColorModel.fromArgbInt(pdMarks.intMap['background_color']);this.$29=tab.PaneDrawInfo.getFogBlendFactor($1);this.$2A=tab.PaneDrawInfo.applyFogToBackgroundColor($1,this.$29);this.$49(this.$1F);this.$2B=tab.PaneDrawInfo.buildColorTable(colorDict,this.$1F,this.$2A,this.$29);this.$33={};if(this.$48()){this.$2C=tab.PaneDrawInfo.buildOpaqueColorTable(this.$2B);this.$44(this.$1F);}var $2=new Array(this.get_markCount());for(var $5=0;$5<$2.length;$5++){$2[$5]=-1;}this.$1F['label_index']=$2;if(this.get_markType()==='line'||this.get_markType()==='area'||this.get_markType()==='pie'){if(this.get_markType()==='line'||this.get_markType()==='area'){this.$4B();}this.$1D=new tab.LineMarkDrawState();}if(this.get_markType()==='line'){this.$50();}this.$4E(pdMarks,false);if(ss.isValue(this.$22)&&ss.isValue(this.$22.w)&&ss.isValue(this.$21)&&ss.isValue(this.$21.width)&&!!this.$21.width){this.$1B=this.$22.w/this.$21.width;}this.$28=this.$4D();this.$23=tab.PaneDrawInfo.$3A(paneMarks,this.$21,this.$22);this.$4C();}
tab.PaneDrawInfo.getFogBlendFactor=function(backgroundColor){var $0=0.185;var $1=0.275;var $2=75;var $3=backgroundColor.get_r()<=$2&&backgroundColor.get_g()<=$2&&backgroundColor.get_b()<=$2;return ($3)?$1:$0;}
tab.PaneDrawInfo.fogColorTransform=function(color,foggedBackgroundColor,fogBlendFactor){var $0=parseInt(foggedBackgroundColor.get_r()+(color.get_r()*fogBlendFactor));var $1=parseInt(foggedBackgroundColor.get_g()+(color.get_g()*fogBlendFactor));var $2=parseInt(foggedBackgroundColor.get_b()+(color.get_b()*fogBlendFactor));return new tab.ColorModel($0,$1,$2,color.get_a());}
tab.PaneDrawInfo.parseDataTable=function(encodingColumns){var $0={};var $enum1=ss.IEnumerator.getEnumerator(Object.keys(encodingColumns));while($enum1.moveNext()){var $1=$enum1.current;$0[$1]=encodingColumns[$1].dataValues;}return $0;}
tab.PaneDrawInfo.applyFogToBackgroundColor=function(backgroundColor,fogBlendFactor){var $0=245;if(backgroundColor.get_r()>=$0&&backgroundColor.get_g()>=$0&&backgroundColor.get_b()>=$0){backgroundColor=new tab.ColorModel($0,$0,$0,backgroundColor.get_a());}var $1=parseInt((1-fogBlendFactor)*backgroundColor.get_r());var $2=parseInt((1-fogBlendFactor)*backgroundColor.get_g());var $3=parseInt((1-fogBlendFactor)*backgroundColor.get_b());return new tab.ColorModel($1,$2,$3,backgroundColor.get_a());}
tab.PaneDrawInfo.buildColorTable=function(colorDict,markData,foggedBGColor,fogBlendFactor){if(ss.isNullOrUndefined(colorDict)||ss.isNullOrUndefined(markData)||!Object.keyExists(markData,tab.PaneDrawInfo.$B)){return null;}var $0=1;if(Object.keyExists(markData,'alpha')&&markData['alpha'].length===1){$0=markData['alpha'][0];}var $1=[];var $2={};var $3=markData[tab.PaneDrawInfo.$B];var $4=$3.length;for(var $5=0;$5<$4;$5++){var $6=$3[$5];if(Object.keyExists($2,$6)){$3[$5]=$2[$6];}else{var $7=tab.ColorModel.fromArgbInt(colorDict.colorList[$6]);$7=new tab.ColorModel($7.get_r(),$7.get_g(),$7.get_b(),$0);$1.add(tab.PaneDrawInfo.$42($7,foggedBGColor,fogBlendFactor));$3[$5]=$1.length-1;$2[$6]=$3[$5];}}return $1;}
tab.PaneDrawInfo.buildOpaqueColorTable=function(colorTable){if(ss.isNullOrUndefined(colorTable)){return null;}var $0=new Array(colorTable.length);for(var $1=0,$2=colorTable.length;$1<$2;$1++){$0[$1]=tab.PaneDrawInfo.$43(colorTable[$1]);}return $0;}
tab.PaneDrawInfo.$35=function($p0,$p1,$p2){return ((($p0-$p1.floatX)/$p1.width)*$p2.w)+$p2.x;}
tab.PaneDrawInfo.$36=function($p0,$p1,$p2){return ((($p0-$p1.floatY)/$p1.height)*$p2.h)+$p2.y;}
tab.PaneDrawInfo.$37=function($p0,$p1,$p2){return (($p0/$p1.width)*$p2.w);}
tab.PaneDrawInfo.$38=function($p0,$p1,$p2){return (($p0/$p1.height)*$p2.h);}
tab.PaneDrawInfo.$39=function($p0,$p1,$p2){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($0);while($enum2.moveNext()){var $1=$enum2.current;if($1.length<2){continue;}for(var $2=0;$2<$1.length;$2=$2+2){$1[$2]=tab.PaneDrawInfo.$35($1[$2],$p1,$p2);$1[$2+1]=tab.PaneDrawInfo.$36($1[$2+1],$p1,$p2);}}}}
tab.PaneDrawInfo.$3A=function($p0,$p1,$p2){var $0=$p0.mapDomainExtents;if(ss.isNullOrUndefined($0)||!$0.width||!$0.height){return null;}return tab.$create_RectXY(parseInt(tab.PaneDrawInfo.$35($0.floatX,$p1,$p2)),parseInt(tab.PaneDrawInfo.$36($0.floatY,$p1,$p2)),parseInt(tab.PaneDrawInfo.$37($0.width,$p1,$p2)),parseInt(tab.PaneDrawInfo.$38($0.height,$p1,$p2)));}
tab.PaneDrawInfo.$3B=function($p0){return $p0.endIndex-$p0.startIndex;}
tab.PaneDrawInfo.$3C=function($p0){if(ss.isValue($p0.drawPane)){var $enum1=ss.IEnumerator.getEnumerator($p0.drawPane);while($enum1.moveNext()){var $0=$enum1.current;var $1=$0.paneMarks;if(ss.isValue($1)&&ss.isValue($1.domainExtents)){return $1.domainExtents;}}}return null;}
tab.PaneDrawInfo.$3D=function($p0){var $0={};var $1=[$p0.intMap,$p0.floatMap,$p0.boolMap];var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;var $3=$2;if(ss.isValue($3)){var $enum2=ss.IEnumerator.getEnumerator(Object.keys($3));while($enum2.moveNext()){var $4=$enum2.current;$0[$4]=[$3[$4]];}}}return $0;}
tab.PaneDrawInfo.$3E=function($p0,$p1){var $0=new ss.StringBuilder();if(Object.keyExists($p0,'font_style')&&parseInt($p0['font_style'].dataValues[$p1])===1){$0.append('italic ');}if(Object.keyExists($p0,'font_weight')&&parseInt($p0['font_weight'].dataValues[$p1])===1){$0.append('bold ');}var $1=parseInt($p0['font_size'].dataValues[$p1]);var $2=$p0['font'].dataValues[$p1];$0.append($1+'pt '+$2);return $0.toString();}
tab.PaneDrawInfo.$3F=function($p0){var $0=0;if($p0===1){}else if($p0===2){$0=-Math.PI*0.5;}else if($p0===3){$0=Math.PI*0.5;}else{}return $0;}
tab.PaneDrawInfo.$40=function($p0,$p1,$p2){if(Object.keyExists($p1,$p0)){var $0=$p1[$p0];for(var $1=0;$1<$0.length;++$1){$0[$1]=$p2($0[$1]);}$p1[$p0]=$0;}}
tab.PaneDrawInfo.$41=function($p0,$p1,$p2){var $0=new Array($p2);for(var $1=0;$1<$p2;$1++){$0[$1]=$p0.dataValues[$p1+$1];}return $0;}
tab.PaneDrawInfo.$42=function($p0,$p1,$p2){var $0={};$0['colorOverrideOpaque']=$p0.toRgb();$0['colorOverrideNone']=$p0.toRgba();$0['colorOverrideFog']=tab.PaneDrawInfo.fogColorTransform($p0,$p1,$p2).toRgba();return $0;}
tab.PaneDrawInfo.$43=function($p0){var $0={};var $1;$1=tab.ColorModel.fromColorCode($p0['colorOverrideNone']);$0['colorOverrideNone']=$1.toRgb();$1=tab.ColorModel.fromColorCode($p0['colorOverrideFog']);$0['colorOverrideFog']=$1.toRgb();$1=tab.ColorModel.fromColorCode($p0['colorOverrideOpaque']);$0['colorOverrideOpaque']=$1.toRgb();return $0;}
tab.PaneDrawInfo.prototype={scaledMarks:false,$1B:0,$1C:false,$1D:null,$1E:null,$1F:null,$21:null,$22:null,$23:null,$24:null,$25:0,$26:0,$27:null,$28:0,$29:0,$2A:null,$2B:null,$2C:null,$2D:null,$2E:null,$2F:null,$30:null,$31:null,$32:false,$33:null,get_hasLabels:function(){return ss.isValue(this.$2D);},get_hasSelection:function(){return this.$1E.get_hasSelection();},get_hasBrushing:function(){return this.$1E.get_hasBrushing();},get_markCount:function(){return this.$26;},get_markType:function(){return this.$24;},get_lineDrawState:function(){this.$1D.reCompute(this);return this.$1D;},get_hasBackground:function(){return Object.keyExists(this.$1F,'pane_has_background')&&this.$1F['pane_has_background'][0];},get_hasHalos:function(){return Object.keyExists(this.$1F,'has_halos')&&this.$1F['has_halos'][0];},get_forceOpaqueColors:function(){return this.$32;},set_forceOpaqueColors:function(value){this.$32=value;return value;},get_hasHaloHighlightColor:function(){return Object.keyExists(this.$1F,'highlighted_halo_color')&&ss.isValue(this.$1F['highlighted_halo_color']);},get_hasFoldedAxis:function(){return Object.keyExists(this.$1F,'has_folded_axis')&&this.$1F['has_folded_axis'][0];},get_drawBorder:function(){return Object.keyExists(this.$1F,'draw_border')&&this.$1F['draw_border'][0];},get_borderColor:function(){return (Object.keyExists(this.$1F,'border_color'))?this.$1F['border_color'][0]:null;},get_minBarWidth:function(){return (Object.keyExists(this.$1F,'min_bar_width'))?this.$1F['min_bar_width'][0]:0;},get_minBarHeight:function(){return (Object.keyExists(this.$1F,'min_bar_height'))?this.$1F['min_bar_height'][0]:0;},get_textStyleColumns:function(){return this.$2F;},get_isWrappedDomain:function(){return this.$1C;},get_paneRect:function(){return this.$22;},get_mapExtents:function(){return this.$23;},get_clipCase:function(){return this.$28;},get_paneDescriptorKey:function(){return this.$27.paneDescrKey;},get_hasGlobalTransparency:function(){return this.get_globalAlpha()<1;},get_globalAlpha:function(){if(Object.keyExists(this.$1F,'alpha')&&this.$1F['alpha'].length===1){return this.$1F['alpha'][0];}else{return 1;}},addLabelInfo:function(pdMarksPM,paneMarksPM){this.$2D={};var $0=tab.PaneDrawInfo.$3D(pdMarksPM);var $enum1=ss.IEnumerator.getEnumerator(Object.keys($0));while($enum1.moveNext()){var $4=$enum1.current;this.$2D[$4]=$0[$4];}var $1=tab.PaneDrawInfo.$3B(paneMarksPM);var $enum2=ss.IEnumerator.getEnumerator(Object.keys(pdMarksPM.encodingColumns));while($enum2.moveNext()){var $5=$enum2.current;this.$2D[$5]=tab.PaneDrawInfo.$41(pdMarksPM.encodingColumns[$5],paneMarksPM.startIndex,$1);}this.$49(this.$2D);var $2=[];if(ss.isValue(this.$2D['tuple_id'])){var $6=this.$2D['tuple_id'];for(var $7=0;$7<$6.length;$7++){var $8=this.$1F['tuple_id'].indexOf($6[$7]);if($8!==-1){this.$1F['label_index'][$8]=$7;}$2.add($8);}}var $3={};for(var $9=0;$9<$2.length;++$9){$3[this.$47($2[$9])]=tab.MarksRenderer.$12(this,$2[$9]);}this.$1E.$D($3);this.$4E(pdMarksPM,true);},getTextRunProperty:function(columnName,index){if(!ss.isValue(this.$2E)||!ss.isValue(this.$2E[columnName])){return null;}return this.$2E[columnName][index];},markHasLabel:function(index){return this.$4F(index)!==-1;},getOneColor:function(color,mode){if(!Object.keyExists(this.$33,color)){var $1=tab.ColorModel.fromArgbInt(color);this.$33[color]=tab.PaneDrawInfo.$42($1,this.$2A,this.$29);}var $0=this.$33[color];return $0[mode];},getMarkColors:function(index){var $0;if(Object.keyExists(this.$1F,tab.PaneDrawInfo.$B)){var $1=this.$45(tab.PaneDrawInfo.$B,index);var $2;$2=(this.$32&&ss.isValue(this.$2C))?this.$2C:this.$2B;$0=$2[$1];}else{var $3=(this.$32&&Object.keyExists(this.$1F,'opaque_color'))?'opaque_color':'color';$0=this.$45($3,index);}if(this.isMarkFiltered(index)){var $4={};$4['colorOverrideFog']=$0['colorOverrideFog'];$4['colorOverrideNone']=$0['colorOverrideFog'];$4['colorOverrideOpaque']=$0['colorOverrideFog'];$0=$4;}return $0;},getMarkProperty:function(columnName,index){if(columnName==='color'){return this.getMarkColors(index);}return this.$45(columnName,index);},doesMarkHaveProperty:function(columnName){return ss.isValue(this.$1F)&&ss.isValue(this.$1F[columnName]);},isMarkPropertyConstant:function(columnName){if(columnName==='color'&&Object.keyExists(this.$1F,tab.PaneDrawInfo.$B)){columnName=tab.PaneDrawInfo.$B;}return Object.keyExists(this.$20,columnName);},markNeedsDraw:function(index,dirtyRect){if(!this.isMarkVisible(index)){return false;}if(this.get_markType()==='line'||this.get_markType()==='area'){return true;}var $0=this.getSloppyMarkBounds(index);var $1=this.getWorldOffsetMarkBounds($0);var $2=tab.RectXYUtil.intersectsWithAny(dirtyRect,$1);return $2;},markLabelNeedsDraw:function(index,dirtyRect){if(!this.isMarkVisible(index)){return false;}var $0=this.getSloppyMarkLabelBounds(index);var $1=this.getWorldOffsetMarkBounds($0);var $2=tab.RectXYUtil.intersectsWithAny(dirtyRect,$1);return $2;},getMarkState:function(index){if(this.get_markType()==='line'||this.get_markType()==='area'){var $enum1=ss.IEnumerator.getEnumerator(this.$1D.get_lineAttributes());while($enum1.moveNext()){var $0=$enum1.current;if($0.startIndex<=index&&index<=$0.endIndex){switch($0.get_lineState()){case 'lineStateHighlighted':return 'markStateHighlighted';case 'lineStateSelected':return 'markStateSelected';case 'lineStateNormal':return 'markStateNormal';}}}}if(!this.isMarkVisible(index)){return 'markStateInvisible';}if(this.isMarkSelected(index)){return 'markStateSelected';}if(this.isMarkHighlighted(index)){return 'markStateHighlighted';}return 'markStateNormal';},getMarkLabelProperty:function(columnName,markIndex){if(this.$24==='text'){return this.getMarkProperty(columnName,markIndex);}if(!ss.isValue(this.$1F['label_index'])||!ss.isValue(this.$2D)||!ss.isValue(this.$2D[columnName])){return null;}if(!this.markHasLabel(markIndex)){return null;}var $0=this.$4F(markIndex);var $1=this.$2D[columnName];if($1.length===1){return $1[0];}if($0<$1.length){return $1[$0];}return null;},getLeft:function(markIndex){return this.$30[markIndex];},getRight:function(markIndex){return this.$31[markIndex];},getMarkBounds:function(markIndex){return this.$1E.getMarkBoundingBox(this.$47(markIndex));},getMarkIndexFromTupleID:function(tupleId){return this.$1F['tuple_id'].indexOf(tupleId);},getSloppyMarkBounds:function(markIndex){return this.$1E.getSloppyMarkBoundingBox(this.$47(markIndex));},getMarkLabelBounds:function(markIndex){if(this.markHasLabel(markIndex)){return this.$1E.getLabelBoundingBox(this.$47(markIndex));}return tab.$create_RectXY(0,0,0,0);},getSloppyMarkLabelBounds:function(markIndex){if(this.markHasLabel(markIndex)){return this.$1E.getSloppyLabelBoundingBox(this.$47(markIndex));}return tab.$create_RectXY(0,0,0,0);},getInsetPaneClipRect:function(inset){return tab.RectXYUtil.dialate(this.$22,parseInt(-inset));},clippedByPane:function(x,y,width,height){var $0=tab.$create_RectXY(parseInt(x),parseInt(y),parseInt(width),parseInt(height));$0=tab.RectXYUtil.dialate($0,1);return !tab.RectXYUtil.completelyContains(this.$22,$0);},pixelToDomainX:function(pixelX){return (((pixelX-this.$22.x)/this.$22.w)*this.$21.width)+this.$21.floatX;},getWorldOffset:function(instance){return this.$1B*instance;},getMarkInstances:function(minXDomain,maxXDomain){var $0=0;var $1=0;if(this.get_isWrappedDomain()){var $2=this.$27.domainExtents.floatX;var $3=$2+this.$27.domainExtents.width;$0=$2-maxXDomain;$1=$3-minXDomain;}return new ss.Tuple(parseInt($0),parseInt($1));},getWorldOffsetMarkBounds:function(bounds){var $0=[];if(!this.get_isWrappedDomain()){$0.add(bounds);}else{var $1=this.pixelToDomainX(bounds.x);var $2=this.pixelToDomainX(bounds.x+bounds.w);var $3=this.getMarkInstances($1,$2);for(var $4=$3.first;$4<=$3.second;++$4){var $5=tab.$create_Point(parseInt(this.getWorldOffset($4)),0);var $6=tab.RectXYUtil.offsetRect(bounds,$5);$0.add($6);}}return $0;},scaleMarksInX:function(){return (!!(this.$25&tab.PaneDrawInfo.$18['enable-scale-x']));},scaleMarksInY:function(){return (!!(this.$25&tab.PaneDrawInfo.$18['enable-scale-y']));},useCellClipForSelection:function(){return (!!(this.$25&tab.PaneDrawInfo.$18['clip-to-cell-for-selection']));},isTupleSelected:function(tupleID){if(!this.get_hasSelection()){return false;}return tupleID!==-1&&this.$1E.isMarkSelected(tupleID);},isMarkSelected:function(index){if(!this.get_hasSelection()){return false;}var $0=this.$47(index);return this.isTupleSelected($0);},isMarkImpliedSelected:function(index){var $0=this.$47(index);return $0!==-1&&this.$1E.isMarkImpliedSelected($0);},isTupleHighlighted:function(tupleID){if(!this.get_hasBrushing()){return false;}return tupleID!==-1&&this.$1E.isMarkBrushed(tupleID);},isMarkHighlighted:function(index){if(!this.get_hasBrushing()){return false;}var $0=this.$47(index);return this.isTupleHighlighted($0);},isMarkVisible:function(index){var $0=this.$47(index);return this.isTupleVisible($0);},isTupleVisible:function(tupleID){return tupleID!==-1&&this.$1E.isMarkVisible(tupleID);},isMarkFiltered:function(index){var $0=this.$47(index);return $0!==-1&&this.$1E.isMarkFiltered($0);},isLineSegmentVisible:function(index0,index1){return this.isMarkVisible(index0)&&this.isMarkVisible(index1);},isLineSegmentFiltered:function(index0,index1){return this.isMarkFiltered(index0)||this.isMarkFiltered(index1);},isMarkEndPrimitive:function(index){var $0=this.$46(index);return (!!($0&tab.PaneDrawInfo.$19['endprimitive']));},isMarkEnd:function(index){var $0=this.$46(index);return (!!($0&tab.PaneDrawInfo.$19['end']));},isMarkClosedPrimitive:function(index){var $0=this.$46(index);return (!!($0&tab.PaneDrawInfo.$19['closedprimitive']));},isMarkDebug:function(index){var $0=this.$46(index);return (!!($0&tab.PaneDrawInfo.$19['debug']));},shouldShowMarker:function(index){var $0=this.$46(index);return (!!($0&tab.PaneDrawInfo.$19['marked']))||((!!($0&tab.PaneDrawInfo.$19['markediflabel']))&&this.markHasLabel(index));},$34:function($p0,$p1,$p2){var $0;if($p1>=0&&!this.isMarkPropertyConstant('color')&&this.get_markType()==='text'){$0=this.getMarkProperty('color',$p1);}else{$0=this.get_textStyleColumns()['text_style_color'][$p0];}if(this.isMarkFiltered($p1)){$p2='colorOverrideFog';}return $0[$p2];},thisDomainToPixelX:function(x){return tab.PaneDrawInfo.$35(x,this.$21,this.$22);},thisDomainToPixelY:function(y){return tab.PaneDrawInfo.$36(y,this.$21,this.$22);},$44:function($p0){if(Object.keyExists($p0,'color')){var $0=$p0['color'];var $1=new Array($0.length);for(var $2=0;$2<$0.length;++$2){$1[$2]=tab.PaneDrawInfo.$43($0[$2]);}$p0['opaque_color']=$1;}},$45:function($p0,$p1){var $0=this.$1F[$p0];if(ss.isNullOrUndefined($0)){return null;}if($0.length===1){$p1=0;}if($p1<$0.length){return $0[$p1];}return null;},$46:function($p0){return this.getMarkProperty('mark_flags',$p0);},$47:function($p0){var $0=this.$45('tuple_id',$p0);if(ss.isNullOrUndefined($0)){$0=-1;}return $0;},$48:function(){return (this.$24==='line')&&this.get_hasGlobalTransparency();},$49:function($p0){var $0=Object.keyExists($p0,'alpha')&&$p0['alpha'].length===1;var $1=1;if($0){$1=$p0['alpha'][0]/255;}_.each(tab.PaneDrawInfo.$13,ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=$0&&(String.equals($p1_0,'color',true)||String.equals($p1_0,'text_style_color',true));tab.PaneDrawInfo.$40($p1_0,$p0,ss.Delegate.create(this,function($p2_0){
var $2_0=tab.ColorModel.fromArgbInt($p2_0);if($1_0){$2_0=new tab.ColorModel($2_0.get_r(),$2_0.get_g(),$2_0.get_b(),$1);}return tab.PaneDrawInfo.$42($2_0,this.$2A,this.$29);}));}));tab.PaneDrawInfo.$40('shape_id',$p0,function($p1_0){
return tab.PaneDrawInfo.shapeMapping[$p1_0.toString()];});tab.PaneDrawInfo.$40('alpha',$p0,function($p1_0){
return $p1_0/255;});if(ss.isValue(this.$22)&&ss.isValue(this.$21)&&!!this.$21.width&&!!this.$21.height){tab.PaneDrawInfo.$40('geometry',$p0,ss.Delegate.create(this,function($p1_0){
var $1_0=tab.WKTParser.parse($p1_0);if(!ss.isNull($1_0)&&this.scaledMarks){tab.PaneDrawInfo.$39($1_0,this.$21,this.$22);}return $1_0;}));var $enum1=ss.IEnumerator.getEnumerator(Object.keys(tab.PaneDrawInfo.$1A));while($enum1.moveNext()){var $2=$enum1.current;var $3=1;var $4=0;var $5=$2+'_int';if(tab.PaneDrawInfo.$14.contains($2)){var $6=10*Math.max(1,this.$22.w);$3=this.$21.width/$6;$4=this.$21.floatX;}else if(tab.PaneDrawInfo.$16.contains($2)){var $7=10*Math.max(1,this.$22.h);$3=this.$21.height/$7;$4=this.$21.floatY;}else{$3=(tab.PaneDrawInfo.$1A[$2].y-tab.PaneDrawInfo.$1A[$2].x)/32767;$4=tab.PaneDrawInfo.$1A[$2].x;}tab.PaneDrawInfo.$40($5,$p0,function($p1_0){
return ($p1_0*$3)+$4;});if(Object.keyExists($p0,$5)){$p0[$2]=$p0[$5];delete $p0[$5];}}var $enum2=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.$14);while($enum2.moveNext()){var $8=$enum2.current;tab.PaneDrawInfo.$40($8,$p0,ss.Delegate.create(this,function($p1_0){
return tab.PaneDrawInfo.$35($p1_0,this.$21,this.$22);}));}var $enum3=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.$15);while($enum3.moveNext()){var $9=$enum3.current;tab.PaneDrawInfo.$40($9,$p0,ss.Delegate.create(this,function($p1_0){
return tab.PaneDrawInfo.$37($p1_0,this.$21,this.$22);}));}var $enum4=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.$16);while($enum4.moveNext()){var $A=$enum4.current;tab.PaneDrawInfo.$40($A,$p0,ss.Delegate.create(this,function($p1_0){
return tab.PaneDrawInfo.$36($p1_0,this.$21,this.$22);}));}var $enum5=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.$17);while($enum5.moveNext()){var $B=$enum5.current;tab.PaneDrawInfo.$40($B,$p0,ss.Delegate.create(this,function($p1_0){
return tab.PaneDrawInfo.$38($p1_0,this.$21,this.$22);}));}}},$4A:function($p0,$p1){var $0={};if(Object.keyExists($p0,'font')){var $1=$p0['font'];var $2=$1.dataValues.length;var $3=new Array($2);for(var $4=0;$4<$2;++$4){$3[$4]=tab.PaneDrawInfo.$3E($p0,$4);}$0['font']=$3;var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0));while($enum1.moveNext()){var $5=$enum1.current;if(!tab.PaneDrawInfo.$12.contains($5)){var $6=$p0[$5];var $7=new Array($6.dataValues.length);for(var $8=0;$8<$7.length;$8++){$7[$8]=$6.dataValues[$8];}$0[$5]=$7;}}if($p1){var $9=this.getMarkProperty('alpha',0);if(ss.isValue($9)){$0['alpha']=[$9*255];}}this.$49($0);tab.PaneDrawInfo.$40('text_orientation',$0,function($p1_0){
return tab.PaneDrawInfo.$3F($p1_0);});tab.PaneDrawInfo.$40('text_alignment',$0,function($p1_0){
var $1_0='start';var $1_1=$p1_0;if($1_1===2){$1_0='end';}return $1_0;});}return $0;},$4B:function(){this.$30=new Array(this.get_markCount());for(var $1=0;$1<this.$30.length;++$1){this.$30[$1]=-1;}this.$31=new Array(this.get_markCount());for(var $2=0;$2<this.$31.length;++$2){this.$31[$2]=-1;}var $0=0;for(var $3=0;$3<this.get_markCount();$3++){if(!this.isMarkEnd($3)){this.$31[$3]=$3+1;this.$30[$3+1]=$3;}if(this.isMarkClosedPrimitive($3)){this.$31[$3]=$0;this.$30[$0]=$3;}if(this.isMarkEndPrimitive($3)){$0=$3+1;}}},$4C:function(){var $0={};for(var $1=0;$1<this.get_markCount();++$1){$0[this.$47($1)]=tab.PaneTable2DRenderer.getMarkBoundingBox($1,this);}this.$1E.$C($0);if(this.get_markType()==='pie'){var $2={};var $3=this.get_lineDrawState();var $enum1=ss.IEnumerator.getEnumerator($3.get_lineAttributes());while($enum1.moveNext()){var $4=$enum1.current;var $5=tab.PaneTable2DRenderer.getMarkBoundingBox($4.startIndex,this);for(var $6=$4.startIndex+1;$6<=$4.endIndex;++$6){$5=tab.RectXYUtil.union($5,tab.PaneTable2DRenderer.getMarkBoundingBox($6,this));}for(var $7=$4.startIndex;$7<=$4.endIndex;++$7){$2[this.$47($7)]=$5;}}this.$1E.$E($2);}},$4D:function(){var $0=0;var $1=!!(this.$25&tab.PaneDrawInfo.$18['clip-to-cell-x']);var $2=!!(this.$25&tab.PaneDrawInfo.$18['clip-to-cell-y']);if($1&&$2){$0=3;}else if($1){$0=1;}else if($2){$0=2;}return $0;},$4E:function($p0,$p1){if(ss.isValue($p0.textRunColumns)){this.$2E={};var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0.textRunColumns));while($enum1.moveNext()){var $0=$enum1.current;var $1=$p0.textRunColumns[$0];var $2=new Array($1.dataValues.length);for(var $3=0;$3<$2.length;$3++){$2[$3]=$1.dataValues[$3];}this.$2E[$0]=$2;}this.$49(this.$2E);}if(ss.isValue($p0.textStyleColumns)){this.$2F=this.$4A($p0.textStyleColumns,!$p1);}},$4F:function($p0){return (Object.keyExists(this.$1F,'label_index'))?this.$1F['label_index'][$p0]:-1;},$50:function(){var $0=this.get_markCount();for(var $1=0;$1<$0;$1++){var $2=this.getRight($1);if($2!==-1){var $3=this.getMarkProperty('width',$1);var $4=this.getMarkProperty('width',$2);if(tab.FloatUtil.isEqual($3,$4)&&Math.round($3)%2===1){var $5=this.getMarkProperty('x',$1);var $6=this.getMarkProperty('y',$1);var $7=tab.$create_PointF($5,$6);var $8=this.getMarkProperty('x',$2);var $9=this.getMarkProperty('y',$2);var $A=tab.$create_PointF($8,$9);tab.CanvasRenderer.modifyLineEndpoints($7,$A,$3);this.$1F['x'][$1]=$7.x;this.$1F['y'][$1]=$7.y;if(this.getRight($2)===-1){this.$1F['x'][$2]=$A.x;this.$1F['y'][$2]=$A.y;}}}}}}
tab.CanvasRenderer=function(canvasElt,context){this.$0=canvasElt;this.$1=context;this.$4=false;this.$6=tab.$create_Point(0,0);if(tab.BrowserSupport.get_isSafari()&&!tab.BrowserSupport.get_isMobile()){this.$0.style['webkitFontSmoothing']='antialiased';}}
tab.CanvasRenderer.bBoxMultipolygon=function(scaledMarks,x,y,scale,placeholdersize,multipolygon){if(ss.isNull(multipolygon)){var $1=placeholdersize/2;var $2=Math.floor(placeholdersize+1);return tab.$create_RectXY(Math.floor(x-$1),Math.floor(y-$1),Math.floor($2),Math.floor($2));}var $0=tab.$create_BBoxRectF(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);tab.CanvasRenderer.boundsMultipolygon(multipolygon,$0);if(!scaledMarks){$0.minX=x+(scale*$0.minX);$0.minY=y+(scale*$0.minY);$0.maxX=x+(scale*$0.maxX);$0.maxY=y+(scale*$0.maxY);}return tab.RectXYUtil.rectXYFromBBoxRectF($0);}
tab.CanvasRenderer.modifyLineEndpoints=function(start,end,lineWidth){if(Math.round(lineWidth)%2===1){var $0=end.x-start.x;var $1=end.y-start.y;var $2=($0*$0)+($1*$1);$2=Math.sqrt($2);if(!!$2){var $3=Math.abs(0.5*($0/$2));var $4=Math.abs(0.5*($1/$2));start.x+=$4;start.y+=$3;end.x+=$4;end.y+=$3;}}}
tab.CanvasRenderer.$7=function($p0){return new tab.TabRenderContext2D($p0.getContext('2d'));}
tab.CanvasRenderer.addMultipolygonPath=function(ctx,multipolygon){var $enum1=ss.IEnumerator.getEnumerator(multipolygon);while($enum1.moveNext()){var $0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($0);while($enum2.moveNext()){var $1=$enum2.current;if($1.length<2){continue;}ctx.moveTo($1[0],$1[1]);for(var $2=2;$2<$1.length;$2=$2+2){ctx.lineTo($1[$2],$1[$2+1]);}ctx.lineTo($1[0],$1[1]);}}}
tab.CanvasRenderer.boundsMultipolygon=function(multipolygon,bounds){var $0=bounds.minX;var $1=bounds.minY;var $2=bounds.maxX;var $3=bounds.maxY;var $enum1=ss.IEnumerator.getEnumerator(multipolygon);while($enum1.moveNext()){var $4=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($4);while($enum2.moveNext()){var $5=$enum2.current;for(var $6=0;$6<$5.length;$6=$6+2){var $7=$5[$6];var $8=$5[$6+1];$0=Math.min($0,$7);$1=Math.min($1,$8);$2=Math.max($2,$7);$3=Math.max($3,$8);}}}bounds.minX=$0;bounds.minY=$1;bounds.maxX=$2;bounds.maxY=$3;}
tab.CanvasRenderer.fillPath=function(context,points,close){var $0=Math.floor(points.length/2);if($0<2){return;}context.beginPath();context.moveTo(points[0],points[1]);for(var $1=2;$1<($0*2);$1+=2){context.lineTo(points[$1],points[$1+1]);}if(close){context.closePath();}context.fill();}
tab.CanvasRenderer.strokePath=function(context,points,close,adjust){var $0=Math.floor(points.length/2);if($0<2){return;}context.beginPath();for(var $2=0;$2<($0*2)-2;$2+=2){var $3=tab.$create_PointF(points[$2],points[$2+1]);var $4=tab.$create_PointF(points[$2+2],points[$2+3]);if($0<=2&&adjust){tab.CanvasRenderer.modifyLineEndpoints($3,$4,context.get_lineWidth());}if(!$2){context.moveTo($3.x,$3.y);}tab.CanvasRenderer.$9(context,$3,$4);}if(close){context.closePath();var $5=$0*2;var $6=tab.$create_PointF(points[$5-2],points[$5-1]);var $7=tab.$create_PointF(points[0],points[1]);if($0<=2&&adjust){tab.CanvasRenderer.modifyLineEndpoints($6,$7,context.get_lineWidth());}tab.CanvasRenderer.$9(context,$6,$7);}var $1=context.get_lineCap();if(context.get_linePattern()==='dashed'||context.get_linePattern()==='dotted'){context.set_lineCap('butt');}context.stroke();if(context.get_linePattern()==='dashed'||context.get_linePattern()==='dotted'){context.set_lineCap($1);}}
tab.CanvasRenderer.toCanvasAngle=function(theta){return ((theta*tab.CanvasRenderer.twoPI)-tab.CanvasRenderer.halfPI);}
tab.CanvasRenderer.toCanvasLineCap=function(tableauCap){switch(tableauCap){case 'flat':return 'butt';case 'square':return 'square';case 'round':return 'round';case 'triangle':break;}return 'butt';}
tab.CanvasRenderer.toCanvasLineJoin=function(tableauJoin){switch(tableauJoin){case 'bevel':return 'bevel';case 'miter':return 'miter';case 'round':return 'round';}return 'miter';}
tab.CanvasRenderer.lineEdgeContains=function(hitX,hitY,x0,y0,width0,x1,y1,width1){var $0=[];tab.CanvasRenderer.$8(x0,y0,width0,x1,y1,width1,$0);return tab.GeometryUtil.isPointInPoly($0,tab.$create_PointF(hitX,hitY));}
tab.CanvasRenderer.boundLineEdge=function(bound,x0,y0,width0,x1,y1,width1){var $0=[];tab.CanvasRenderer.$8(x0,y0,width0,x1,y1,width1,$0);var $1=$0[0].x;var $2=$0[0].x;var $3=$0[0].y;var $4=$0[0].y;var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $5=$enum1.current;$1=Math.min($1,$5.x);$3=Math.min($3,$5.y);$2=Math.max($2,$5.x);$4=Math.max($4,$5.y);}return tab.RectXYUtil.union(bound,tab.$create_RectXY(parseInt($1),parseInt($3),parseInt(($2-$1))+1,parseInt(($4-$3))+1));}
tab.CanvasRenderer.boundWedge=function(x,y,radius,theta1,theta2){if(theta1>theta2){var $7=theta1;theta1=theta2;theta2=$7;}if(theta2-theta1>=1){var $8=Math.ceil(2*radius);return tab.$create_RectXY(Math.floor(x-radius),Math.floor(y-radius),$8,$8);}var $0=tab.CanvasRenderer.toCanvasAngle(theta1);var $1=tab.CanvasRenderer.toCanvasAngle(theta2);var $2=[];$2.add(tab.$create_PointF(x,y));$2.add(tab.$create_PointF(x+(radius*Math.cos($0)),y+(radius*Math.sin($0))));$2.add(tab.$create_PointF(x+(radius*Math.cos($1)),y+(radius*Math.sin($1))));$0=tab.GeometryUtil.normalizeAngle($0);$1=tab.GeometryUtil.normalizeAngle($1);if(tab.GeometryUtil.isInBetweenAngles(0,$0,$1)){$2.add(tab.$create_PointF(x+radius,y));}if(tab.GeometryUtil.isInBetweenAngles(tab.CanvasRenderer.halfPI,$0,$1)){$2.add(tab.$create_PointF(x,y+radius));}if(tab.GeometryUtil.isInBetweenAngles(tab.CanvasRenderer.onePI,$0,$1)){$2.add(tab.$create_PointF(x-radius,y));}if(tab.GeometryUtil.isInBetweenAngles(tab.CanvasRenderer.oneAndHalfPI,$0,$1)){$2.add(tab.$create_PointF(x,y-radius));}var $3=Number.POSITIVE_INFINITY;var $4=Number.POSITIVE_INFINITY;var $5=Number.NEGATIVE_INFINITY;var $6=Number.NEGATIVE_INFINITY;var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $9=$enum1.current;$3=Math.min($3,$9.x);$4=Math.min($4,$9.y);$5=Math.max($5,$9.x);$6=Math.max($6,$9.y);}return tab.RectXYUtil.rectXYFromMinAndMax($3,$4,$5,$6);}
tab.CanvasRenderer.roundStartAndExtent=function(start,extent,minSize){var $0=Math.round(start+extent+tab.FloatUtil.epsilon);start=Math.round(start);extent=Math.max(Math.abs($0-start),minSize);return new ss.Tuple(start,extent);}
tab.CanvasRenderer.$8=function($p0,$p1,$p2,$p3,$p4,$p5,$p6){var $0=Math.atan2($p4-$p1,$p3-$p0);var $1=Math.cos($0);var $2=Math.sin($0);$p2/=2;$p5/=2;var $3=$p2*$2;var $4=$p5*$2;var $5=$p2*$1;var $6=$p5*$1;$p6.add(tab.$create_PointF($p0+$3,$p1-$5));$p6.add(tab.$create_PointF($p3+$4,$p4-$6));$p6.add(tab.$create_PointF($p3-$4,$p4+$6));$p6.add(tab.$create_PointF($p0-$3,$p1+$5));}
tab.CanvasRenderer.$9=function($p0,$p1,$p2){if(tab.BrowserSupport.get_canvasLinePattern()){$p0.lineTo($p2.x,$p2.y);}else{switch($p0.get_linePattern()){case 'dashed':tab.CanvasRenderer.$A($p0,$p1,$p2,tab.TabRenderContext2D.defaultLineDashDashed[0],tab.TabRenderContext2D.defaultLineDashDashed[1]);break;case 'dotted':tab.CanvasRenderer.$A($p0,$p1,$p2,tab.TabRenderContext2D.defaultLineDashDotted[0],tab.TabRenderContext2D.defaultLineDashDotted[1]);break;case 'solid':default:$p0.lineTo($p2.x,$p2.y);break;}}}
tab.CanvasRenderer.$A=function($p0,$p1,$p2,$p3,$p4){var $0=$p0.get_lineWidth();$p3=$0*$p3;$p4=$0*$p4;$p0.moveTo($p1.x,$p1.y);var $1=false;var $2=$p3;var $3=$p1.x;var $4=$p1.y;var $5=$p2.x-$p1.x;var $6=$p2.y-$p1.y;var $7=($5*$5)+($6*$6);$7=Math.sqrt($7);var $8=$5/$7;var $9=$6/$7;while($7>0){var $A=($7>$2)?$2:$7;var $B=$3+($A*$8);var $C=$4+($A*$9);if($1){$p0.moveTo($B,$C);}else{$p0.lineTo($B,$C);}$7-=$A;$2-=$A;if(!$2){$1=!$1;$2=($1)?$p4:$p3;}$3=$B;$4=$C;}}
tab.CanvasRenderer.prototype={$0:null,$1:null,$2:null,$3:null,$4:false,$5:null,$6:null,get_renderOffset:function(){return this.$6;},set_renderOffset:function(value){this.$6=value;this.get_currentContext().translate(-this.$6.x,-this.$6.y);return value;},get_currentCanvas:function(){return (this.$4)?this.$2:this.$0;},get_currentContext:function(){return (this.$4)?this.$3:this.$1;},get_visibleRect:function(){return tab.$create_RectXY(this.get_renderOffset().x,this.get_renderOffset().y,this.get_currentCanvas().width,this.get_currentCanvas().height);},clear:function(){this.get_currentContext().clearRect(this.$6.x,this.$6.y,this.get_currentCanvas().width,this.get_currentCanvas().height);},reset:function(){this.$4=false;this.$3=null;this.$2=null;this.get_currentContext().reset();this.set_renderOffset(tab.$create_Point(0,0));this.clearPrevTextRunInfo();},setRenderOffsetNoTranslate:function(offset){this.$6=offset;},isRectVisible:function(rect){return tab.RectXYUtil.intersectsWith(rect,this.get_visibleRect());},beginOffScreenRender:function(){if(this.$4){return;}if(ss.isNullOrUndefined(this.$2)){this.$2=document.createElement('canvas');var $1=tab.$create_Size(this.$0.width,this.$0.height);var $2=tab.DomUtil.parseWidthFromStyle(this.$0.style);$2=(isNaN($2))?0:$2;var $3=tab.DomUtil.parseHeightFromStyle(this.$0.style);$2=(isNaN($3))?0:$2;var $4=tab.$create_Size($2,$3);tab.CanvasUtil.densifyCanvasUsingSize(this.$2,$1,$4);}if(ss.isNullOrUndefined(this.$3)){this.$3=tab.CanvasRenderer.$7(this.$2);}else{this.$3.reset();}var $0=tab.RenderUtil.calculatePixelRatio();if($0!==1){tab.CanvasUtil.scaleCanvasDrawing(this.$3,$0);}this.$3.translate(-this.get_renderOffset().x,-this.get_renderOffset().y);this.$4=true;this.clear();},endOffScreenRender:function(alpha){if(!this.$4){return;}this.$4=false;this.$1.save();this.$1.set_alpha(alpha);this.$1.setTransform(1,0,0,1,0,0);this.$1.drawImage1(this.$2,0,0);this.$1.restore();},renderBarOutline:function(x,y,width,height,color,strokeWidth,minWidth,minHeight){this.get_currentContext().set_lineWidth(strokeWidth);this.get_currentContext().set_strokeStyle(color);var $0=(!(Math.round(strokeWidth)%2))?0:0.5;var $1=tab.CanvasRenderer.roundStartAndExtent(y,height,minHeight);var $2=tab.CanvasRenderer.roundStartAndExtent(x,width,minWidth);this.get_currentContext().strokeRect($2.first+$0,$1.first+$0,$2.second,$1.second);},renderFilledBar:function(x,y,width,height,color,minWidth,minHeight){this.get_currentContext().set_shapeFillStyle(color);var $0=tab.CanvasRenderer.roundStartAndExtent(y,height,minHeight);var $1=tab.CanvasRenderer.roundStartAndExtent(x,width,minWidth);this.get_currentContext().fillRect($1.first,$0.first,$1.second,$0.second);},renderRectangle:function(x,y,width,height,color,strokeWidth){var $0=width/2;var $1=height/2;this.get_currentContext().set_lineJoin('miter');this.get_currentContext().set_lineWidth(strokeWidth);this.get_currentContext().set_strokeStyle(color);var $2=(!(Math.round(strokeWidth)%2))?0:0.5;this.get_currentContext().strokeRect(Math.round(x-$0)+$2,Math.round(y-$1)+$2,Math.round(width),Math.round(height));},renderFilledRectangle:function(x,y,width,height,color){var $0=width/2;var $1=height/2;this.get_currentContext().set_shapeFillStyle(color);this.get_currentContext().fillRect(Math.round(x-$0),Math.round(y-$1),Math.round(width),Math.round(height));},renderCircle:function(x,y,diameter,color,strokeWidth){this.get_currentContext().beginPath();this.get_currentContext().arc(x,y,diameter/2,0,tab.CanvasRenderer.twoPI,true);this.get_currentContext().closePath();this.get_currentContext().set_lineWidth(strokeWidth);this.get_currentContext().set_strokeStyle(color);this.get_currentContext().stroke();},renderFilledCircle:function(x,y,diameter,color){this.get_currentContext().beginPath();this.get_currentContext().arc(x,y,diameter/2,0,tab.CanvasRenderer.twoPI,true);this.get_currentContext().closePath();this.get_currentContext().set_shapeFillStyle(color);this.get_currentContext().fill();},renderWedge:function(x,y,radius,theta1,theta2,color,strokeWidth,anticlockwise){if(ss.isNullOrUndefined(anticlockwise)){anticlockwise=false;}this.get_currentContext().save();this.get_currentContext().beginPath();this.get_currentContext().moveTo(x,y);this.get_currentContext().arc(x,y,radius,tab.CanvasRenderer.toCanvasAngle(theta1),tab.CanvasRenderer.toCanvasAngle(theta2),anticlockwise);this.get_currentContext().closePath();this.get_currentContext().set_lineWidth(strokeWidth);this.get_currentContext().set_strokeStyle(color);this.get_currentContext().stroke();this.get_currentContext().restore();},renderFilledWedge:function(x,y,radius,theta1,theta2,color,anticlockwise){if(ss.isNullOrUndefined(anticlockwise)){anticlockwise=false;}this.get_currentContext().save();this.get_currentContext().beginPath();this.get_currentContext().moveTo(x,y);this.get_currentContext().arc(x,y,radius,tab.CanvasRenderer.toCanvasAngle(theta1),tab.CanvasRenderer.toCanvasAngle(theta2),anticlockwise);this.get_currentContext().closePath();this.get_currentContext().set_shapeFillStyle(color);this.get_currentContext().fill();this.get_currentContext().restore();},renderLine:function(points,strokeWidth,color,adjust){this.get_currentContext().save();this.get_currentContext().set_linePattern('solid');this.get_currentContext().set_lineWidth(strokeWidth);this.get_currentContext().set_strokeStyle(color);tab.CanvasRenderer.strokePath(this.get_currentContext(),points,false,adjust);this.get_currentContext().restore();},renderLineLoop:function(points,strokeWidth,color){this.get_currentContext().save();this.get_currentContext().set_linePattern('solid');this.get_currentContext().set_lineWidth(strokeWidth);this.get_currentContext().set_strokeStyle(color);tab.CanvasRenderer.strokePath(this.get_currentContext(),points,true,false);this.get_currentContext().restore();},renderLineEdge:function(x0,x1,y0,y1,width0,width1,haloColor,strokeWidth){this.get_currentContext().save();this.get_currentContext().set_linePattern('solid');this.get_currentContext().set_lineWidth(strokeWidth);this.get_currentContext().set_strokeStyle(haloColor);var $0=Math.atan2(y1-y0,x1-x0);var $1=Math.cos($0);var $2=Math.sin($0);width0/=2;width1/=2;var $3=width0*$2;var $4=width1*$2;var $5=width0*$1;var $6=width1*$1;this.get_currentContext().beginPath();this.get_currentContext().moveTo(x0+$3,y0-$5);this.get_currentContext().lineTo(x1+$4,y1-$6);this.get_currentContext().lineTo(x1-$4,y1+$6);this.get_currentContext().lineTo(x0-$3,y0+$5);this.get_currentContext().closePath();this.get_currentContext().stroke();this.get_currentContext().restore();},renderFilledLineEdge:function(x0,x1,y0,y1,width0,width1,color0,color1){var $0;this.get_currentContext().save();if(color0===color1){$0=color0;}else{var $1=this.get_currentContext().createLinearGradient(x0,y0,x1,y1);$1.addColorStop(0,color0);$1.addColorStop(1,color1);$0=$1;}if(width0===width1){this.get_currentContext().set_lineWidth(width0);this.get_currentContext().set_linePattern('solid');this.get_currentContext().set_strokeStyle($0);this.get_currentContext().beginPath();this.get_currentContext().moveTo(x0,y0);this.get_currentContext().lineTo(x1,y1);this.get_currentContext().closePath();this.get_currentContext().stroke();}else{var $2=Math.atan2(y1-y0,x1-x0);var $3=Math.cos($2);var $4=Math.sin($2);width0/=2;width1/=2;var $5=width0*$4;var $6=width1*$4;var $7=width0*$3;var $8=width1*$3;this.get_currentContext().beginPath();this.get_currentContext().moveTo(x0+$5,y0-$7);this.get_currentContext().lineTo(x1+$6,y1-$8);this.get_currentContext().lineTo(x1-$6,y1+$8);this.get_currentContext().lineTo(x0-$5,y0+$7);this.get_currentContext().closePath();this.get_currentContext().set_shapeFillStyle($0);this.get_currentContext().fill();}this.get_currentContext().restore();},renderPolygon:function(points,strokeWidth,color){this.get_currentContext().save();this.get_currentContext().set_lineWidth(strokeWidth);this.get_currentContext().set_strokeStyle(color);tab.CanvasRenderer.strokePath(this.get_currentContext(),points,true,true);this.get_currentContext().restore();},renderFilledPolygon:function(points,color){this.get_currentContext().save();this.get_currentContext().set_shapeFillStyle(color);tab.CanvasRenderer.fillPath(this.get_currentContext(),points,true);this.get_currentContext().restore();},setupContextForTextRendering:function(paneDrawInfo){var $0='black';if(ss.isValue(paneDrawInfo.get_textStyleColumns())&&Object.keyExists(paneDrawInfo.get_textStyleColumns(),'text_style_color')){$0=paneDrawInfo.$34(0,-1,'colorOverrideNone');}this.get_currentContext().set_shapeFillStyle($0);var $1=this.createStyleSettersAndSetDominantStyle(paneDrawInfo.get_textStyleColumns());return $1;},createStyleSettersAndSetDominantStyle:function(styleDict){if(ss.isNullOrUndefined(styleDict)){return function($p1_0){
};}var $0=[];var $enum1=ss.IEnumerator.getEnumerator(Object.keys(styleDict));while($enum1.moveNext()){var $2=$enum1.current;var $3=styleDict[$2];var $4=true;var $5=$3[0];for(var $6=1;$6<$3.length&&$4;++$6){if($5!==$3[$6]){$4=false;}}if($4){this.setTextStyleProprty($2,$5);}else{$0.add($2);}}$0.remove('text_style_color');var $1=ss.Delegate.create(this,function($p1_0){
var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1_0=$enum1.current;var $1_1=styleDict[$1_0];this.setTextStyleProprty($1_0,$1_1[$p1_0]);}});return $1;},setTextStyleProprty:function(styleKey,styleVal){switch(styleKey){case 'font':this.get_currentContext().set_font(styleVal);break;case 'text_orientation':this.get_currentContext().set_textAngle(styleVal);break;case 'text_alignment':this.get_currentContext().set_textAlign(styleVal);break;case 'alpha':case 'text_style_color':break;case 'text_decoration':this.get_currentContext().set_shouldUnderlineText(styleVal);break;default:break;}},renderText:function(text,x,y,maxWidth,color,multiRunText){if(multiRunText&&ss.isValue(this.$5)&&this.$5.$3(x,y)){var $0=this.$5.$4(x,y);x=$0.x;y=$0.y;}else{this.clearPrevTextRunInfo();}if(ss.isValue(color)){this.get_currentContext().set_textFillStyle(color);}if(maxWidth>0){if(!multiRunText){text=text.trimEnd();}this.get_currentContext().fillText2(text,x,y,maxWidth);}else{this.get_currentContext().fillText1(text,x,y);}if(multiRunText){var $1=this.get_currentContext().measureText(text).width;var $2=this.get_currentContext().get_textAlign()==='end';var $3=this.get_currentContext().get_isTextAngleHorizontal();this.$5=new tab.vqlui$B(x,y,$1,$2,$3);}else{this.clearPrevTextRunInfo();}},clearPrevTextRunInfo:function(){this.$5=null;},createMultipolygonPath:function(marksScaled,x,y,scale,placeholderSize,multipolygon){var $0=this.get_currentContext();$0.save();$0.beginPath();if(ss.isNull(multipolygon)){$0.arc(x,y,placeholderSize/2,0,tab.CanvasRenderer.twoPI,true);}else{if(!marksScaled){$0.translate(x,y);$0.scale(scale,scale);}tab.CanvasRenderer.addMultipolygonPath($0,multipolygon);}$0.closePath();$0.restore();},strokeCurrentPath:function(strokeWidth,color){var $0=this.get_currentContext();$0.save();$0.set_lineWidth(strokeWidth);$0.set_strokeStyle(color);$0.stroke();$0.restore();},fillCurrentPath:function(color){var $0=this.get_currentContext();$0.save();$0.set_shapeFillStyle(color);$0.fill();$0.restore();},clipRect:function(cellClipCase,x,y,width,height){var $0=100000;switch(cellClipCase){case 0:return;case 1:y=-$0;height=2*$0;break;case 2:x=-$0;width=2*$0;break;}var $1=tab.CanvasRenderer.roundStartAndExtent(y,height,0);var $2=tab.CanvasRenderer.roundStartAndExtent(x,width,0);this.get_currentContext().setClip(tab.$create_RectXY(parseInt($2.first),parseInt($1.first),parseInt($2.second),parseInt($1.second)));}}
tab.vqlui$B=function(x,y,width,rightAligned,isHorizontal){this.x=x;this.y=y;this.$0=width;this.$1=rightAligned;this.$2=isHorizontal;}
tab.vqlui$B.prototype={x:0,y:0,$0:0,$1:false,$2:false,$3:function($p0,$p1){var $0;if(this.$2){$0=Math.round(this.y)===Math.round($p1);}else{$0=Math.round(this.x)===Math.round($p0);}return $0;},$4:function($p0,$p1){var $0=this.$0;if(this.$1){$0=-$0;}var $1;var $2;if(this.$2){$1=this.x+$0;$2=$p1;}else{$1=$p0;$2=this.y+$0;}return tab.$create_PointF($1,$2);}}
tab.DisplayList2DRenderer=function(canvas,context){tab.DisplayList2DRenderer.initializeBase(this,[canvas,context]);}
tab.DisplayList2DRenderer.setTextProperties=function(context,textStyle,fontSize){context.set_textFillStyle(textStyle.color);var $0=new ss.StringBuilder();if(textStyle.fontStyle==='font-style-italic'){$0.append('italic ');}if(textStyle.fontWeight==='font-weight-bold'){$0.append('bold ');}if(ss.isNullOrUndefined(fontSize)||fontSize<=0){fontSize=textStyle.fontSize;}$0.append(fontSize+'pt '+textStyle.fontName);context.set_font($0.toString());context.set_textBaseline(tab.FormattingConverters.$4(textStyle.valign));}
tab.DisplayList2DRenderer.$13=function($p0,$p1){var $0=$p1;$p0.set_textFillStyle(tab.ColorModel.convertColorForCanvas($0.color));if(ss.isValue($0.angle)){var $5=$0.angle*Math.PI/180;$p0.set_textAngle($5);}else{$p0.set_textAngle(0);}var $1=new ss.StringBuilder();if($0.isItalics){$1.append('italic ');}if($0.isBold){$1.append('bold ');}if($0.isStrikeThrough){}var $2=tab.TabRenderContext2D.defaultTextAlign;if($p0.get_isTextAngleHorizontal()){var $6=($0.horizontalLabelAlignment||'h-align-left');if($6==='h-align-right'){$2='end';}}else{var $7=($0.verticalLabelAlignment||'v-align-top');if(($p0.get_textAngle()<0&&$7==='v-align-top')||($p0.get_textAngle()>0&&$7==='v-align-bottom')){$2='end';}}$p0.set_textAlign($2);$p0.set_shouldUnderlineText(($0.isUnderlined||false));var $3=($0.fontName||'Arial');var $4=($0.pointSize||8);$1.append($4+'pt '+$3);$p0.set_font($1.toString());}
tab.DisplayList2DRenderer.$14=function($p0,$p1,$p2){var $0=$p1;if($0.points.length!==4){return;}var $1=$0.points[2]-$0.points[0];var $2=$0.points[3]-$0.points[1];var $3=$0.points[0]+($1/2);var $4=$0.points[1]+($2/2);var $5=(($1<$2)?$1:$2)/2;var $6=($1<$2)?1:$1/$2;var $7=($2<$1)?1:$2/$1;$p0.save();$p0.beginPath();$p0.translate($3,$4);$p0.scale($6,$7);$p0.arc(0,0,$5,0,tab.CanvasRenderer.twoPI,false);$p0.closePath();if($p2){$p0.fill();}else{$p0.stroke();}$p0.restore();}
tab.DisplayList2DRenderer.$15=function($p0,$p1,$p2){var $0=$p1.pointsF;if(!$p2&&Math.round($p0.get_lineWidth())%2===1){$0=$0.clone();for(var $5=0,$6=$0.length;$5<$6;++$5){$0[$5]+=0.5;}}var $1=$p1.pathElements;var $2=Math.floor($0.length/2);if($2<2){return;}var $3=$p0.get_lineCap();if($p0.get_linePattern()!=='solid'){$p0.set_lineCap('butt');}$p0.beginPath();var $4=0;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $7=$enum1.current;switch($7){case 'moveto':$p0.moveTo($0[$4],$0[$4+1]);$4+=2;break;case 'lineto':$p0.lineTo($0[$4],$0[$4+1]);$4+=2;break;case 'curveto':$p0.bezierCurveTo($0[$4],$0[$4+1],$0[$4+2],$0[$4+3],$0[$4+4],$0[$4+5]);$4+=6;break;default:break;}}if($p2){$p0.fill();}else{$p0.stroke();}$p0.set_lineCap($3);}
tab.DisplayList2DRenderer.$16=function($p0){switch($p0.type){case 'draw-pen':case 'draw-solid-brush':case 'draw-gradient-brush':case 'clip-rect':case 'draw-text-props':case 'transform':case 'transform-pop':case 'transform-push':case 'draw-antialias':return true;}return false;}
tab.DisplayList2DRenderer.$17=function($p0,$p1){if(!$p1){return $p0;}var $0=tab.DisplayList2DRenderer.$18($p0);if(!$0.length){return $p0;}var $1=$p0.clone();var $2=function($p1_0,$p1_1){
var $1_0=$1[$p1_0];$1[$p1_0]=$1[$p1_1];$1[$p1_1]=$1_0;};var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $3=$enum1.current;for(var $4=0;$4<$3.length/2;++$4){var $5=$3.length-1-$4;$2($3[$4].first,$3[$5].first);$2($3[$4].second,$3[$5].second);}}return $1;}
tab.DisplayList2DRenderer.$18=function($p0){var $0=[];var $1=-99999999;var $2=false;var $3=-1;var $4=[];for(var $5=0;$5<$p0.length;$5++){var $6=$p0[$5];if($6.type==='draw-text-props'){var $7=$6;$2=ss.isValue($7.horizontalLabelAlignment)&&$7.horizontalLabelAlignment==='h-align-right';$3=$5;}else if($2&&$6.type==='draw-text'){var $8=$6;var $9=$8.points[1];if($9!==$1){if($4.length>=2){$0.add($4);}$4=[];}$4.add(new ss.Tuple($3,$5));$1=$9;}}if($4.length>=2){$0.add($4);}return $0;}
tab.DisplayList2DRenderer.prototype={renderVisualListHelper:function(vlvm,imageDict){var $0=vlvm.get_visualListPM().drawItems;this.renderDrawItems($0,vlvm,imageDict,null);},renderDrawItems:function(items,vlvm,imageDict,mapClipRect){var $0=this.get_currentContext();var $1=$0.get_numberSavedStates();var $2=4;for(var $3=0;$3<items.length;++$3){var $4=items[$3];if(true&&$3<$2&&$4.type==='transform'){}else if($4.type==='draw-group'){var $5=$4;this.$1B(vlvm,$5,imageDict,mapClipRect);}else{this.$1A($0,$4,imageDict,null,mapClipRect,false);}}while($0.get_numberSavedStates()>$1){$0.restore();}},renderVisualList:function(vlvm,imageDict){if(ss.isValue(vlvm.get_defaultBackgroundColor())){this.get_currentContext().set_shapeFillStyle(vlvm.get_defaultBackgroundColor());this.get_currentContext().fillRect(this.get_visibleRect().x,this.get_visibleRect().y,this.get_visibleRect().w,this.get_visibleRect().h);}this.renderVisualListHelper(vlvm,imageDict);},renderDrawItemList:function(items){this.renderDrawItems(items,null,null,null);},$12:function($p0){var $0=$p0.get_visualListPM().visualPart;var $enum1=ss.IEnumerator.getEnumerator($p0.get_visualListPM().drawItems);while($enum1.moveNext()){var $1=$enum1.current;if($1.type==='draw-pen'||($1.type==='draw-solid-brush')){this.$19(this.get_currentContext(),$1);}else if($1.type==='draw-polyline'){var $2=this.get_currentCanvas().width;var $3=this.get_currentCanvas().height;var $4=$1;var $5=$4.points;if(tab.DisplayList2DRenderer.$F.contains($0)){if(Math.abs($5[3]-$5[1])>=$3){var $6={};$6.type=$1.type;$6.points=[0,0,0,$3];this.$19(this.get_currentContext(),$6);$6.points[0]+=$2-1;$6.points[2]+=$2-1;this.$19(this.get_currentContext(),$6);return;}}else if(tab.DisplayList2DRenderer.$10.contains($0)){if(Math.abs($5[2]-$5[0])>=this.get_currentCanvas().width){var $7={};$7.type=$1.type;$7.points=[0,0,$2,0];this.$19(this.get_currentContext(),$7);$7.points[1]+=$3-1;$7.points[3]+=$3-1;this.$19(this.get_currentContext(),$7);return;}}}}},$19:function($p0,$p1){this.$1A($p0,$p1,null,null,null,false);},$1A:function($p0,$p1,$p2,$p3,$p4,$p5){if(!ss.isValue($p0)||!ss.isValue($p1)){return;}switch($p1.type){case 'draw-pen':var $0=$p1;$p0.set_lineJoin((ss.isValue($0.lineJoin))?tab.CanvasRenderer.toCanvasLineJoin($0.lineJoin):tab.TabRenderContext2D.defaultLineJoin);$p0.set_lineCap((ss.isValue($0.lineCap))?tab.CanvasRenderer.toCanvasLineCap($0.lineCap):tab.TabRenderContext2D.defaultLineCap);$p0.set_linePattern(($0.linePattern||tab.TabRenderContext2D.defaultLinePattern));$p0.set_strokeStyle((tab.ColorModel.convertColorForCanvas($0.color)||'rgb(0,0,0)'));$p0.set_lineWidth(($0.strokeWidth||1));break;case 'draw-solid-brush':var $1=$p1;$p0.set_shapeFillStyle(tab.ColorModel.convertColorForCanvas($1.color));break;case 'draw-gradient-brush':var $2=$p1;var $3=$2.pt1;var $4=$2.pt2;var $5=$p0.createLinearGradient($3.x,$3.y,$4.x,$4.y);$5.addColorStop(0,tab.ColorModel.convertColorForCanvas($2.color1));$5.addColorStop(1,tab.ColorModel.convertColorForCanvas($2.color2));$p0.set_shapeFillStyle($5);break;case 'draw-rect':var $6=$p1;if($6.points.length!==4){return;}var $7=tab.DisplayList2DUtils.rectXYFromDrawRect($6.points);$p0.strokeRect($7.x,$7.y,$7.w,$7.h);break;case 'draw-fill-rect':var $8=$p1;if($8.points.length!==4){return;}var $9=tab.DisplayList2DUtils.rectXYFromDrawRect($8.points);$p0.fillRect($9.x,$9.y,$9.w,$9.h);break;case 'draw-ellipse':tab.DisplayList2DRenderer.$14($p0,$p1,false);break;case 'draw-fill-ellipse':tab.DisplayList2DRenderer.$14($p0,$p1,true);break;case 'draw-polyline':var $A=$p1;var $B=$A.points;tab.CanvasRenderer.strokePath($p0,$B,false,true);break;case 'draw-polygon':var $C=$p1;tab.CanvasRenderer.strokePath($p0,$C.points,true,true);break;case 'draw-fill-polygon':var $D=$p1;tab.CanvasRenderer.fillPath($p0,$D.points,true);break;case 'draw-fill-path':tab.DisplayList2DRenderer.$15($p0,$p1,true);break;case 'draw-path':tab.DisplayList2DRenderer.$15($p0,$p1,false);break;case 'clip-rect':var $E=$p1;if($E.points.length===4){if(true&&$E.points[2]-$E.points[0]===2){break;}$p0.setClip(tab.$create_RectXY($E.points[0],$E.points[1],$E.points[2]-$E.points[0],$E.points[3]-$E.points[1]));}break;case 'draw-text':var $F=$p1;if($F.points.length!==2){return;}var $10=$F.points[0];var $11=$F.points[1];var $12=-1;if(ss.isValue($p3)){var $13;var $14;if($p0.get_isTextAngleHorizontal()){$13=($p3.x>$10)?$10:$10-$p3.x;$14=$p3.w;}else{$13=($p3.y>$11)?$11:$11-$p3.y;$14=$p3.h;}$12=Math.max($13,$14-$13);}this.renderText($F.text,$10,$11,$12,null,$p5);break;case 'draw-text-props':tab.DisplayList2DRenderer.$13($p0,$p1);break;case 'transform':var $15=$p1;if(ss.isValue($15.transformOffset)&&$15.transformOffset.length===2){$p0.translate($15.transformOffset[0],$15.transformOffset[1]);}if(ss.isValue($15.transformScale)&&$15.transformScale.length===2){$p0.scale($15.transformScale[0],$15.transformScale[1]);}if(ss.isValue($15.transformAngle)){$p0.rotate($15.transformAngle*Math.PI/180);}break;case 'transform-pop':var $16=new tab.vqlui$C($p0);$p0.restore();$16.$B($p0);break;case 'transform-push':$p0.save();break;case 'draw-antialias':var $17=$p1;$p0.set_shouldAntialias($17.state);break;case 'draw-image':var $18=$p1;if(ss.isValue($p2)&&Object.keyExists($p2,$18.imageHash)){var $19=$p2[$18.imageHash];if(ss.isValue($19)&&$19.complete){$p0.save();if(ss.isValue($p4)){$p0.setClip($p4);}$p0.set_alpha($18.alpha);$p0.drawImage4($19,$18.destBox[0],$18.destBox[1],$18.destBox[2]-$18.destBox[0],$18.destBox[3]-$18.destBox[1]);$p0.restore();}}else{}break;default:break;}},$1B:function($p0,$p1,$p2,$p3){var $0=ss.isValue($p0)&&$p0.get_visualListPM().visualPart==='annotations';this.clearPrevTextRunInfo();var $1=this.get_currentContext();var $2=false;if(ss.isValue($p1.pixelExtents)){var $8=tab.RecordCast.rectJsonAsRectXY($p1.pixelExtents);var $9=tab.RectXYUtil.offsetRect($1.get_dirtyRect(),this.get_renderOffset());if(!this.isRectVisible($8)||!tab.RectXYUtil.intersectsWith($9,$8)){$2=true;}}var $3=null;var $4=null;var $5=false;var $6='markStateNormal';if(!$2&&ss.isValue($p0)){if($p0.isSelected($p1)){$6='markStateSelected';}else if($p0.isBrushed($p1)){$6='markStateHighlighted';}$5=$6!=='markStateNormal';}if($5){$3=$1.get_shapeFillStyle();$4=$1.get_textFillStyle();var $A=$6==='markStateSelected';$1.set_textFillStyle(($A)?'rgb(255,255,255)':'rgb(0,0,0)');$1.set_shapeFillStyle(($A)?'rgb(46,106,197)':'rgb(255,255,204)');var $B=ss.isValue($p1.extentsOffset);if($B){$1.translate(-$p1.extentsOffset.x,-$p1.extentsOffset.y);}$1.fillRect($p1.pixelExtents.x,$p1.pixelExtents.y,$p1.pixelExtents.w,$p1.pixelExtents.h);if($B){$1.translate($p1.extentsOffset.x,$p1.extentsOffset.y);}}var $7=tab.DisplayList2DRenderer.$17($p1.drawItems,$0);var $enum1=ss.IEnumerator.getEnumerator($7);while($enum1.moveNext()){var $C=$enum1.current;if($5&&$C.type==='draw-solid-brush'){var $D=$C;$3=tab.ColorModel.convertColorForCanvas($D.color);}else{var $E=null;if($5&&$C.type==='draw-text-props'){var $F=$C;$4=tab.ColorModel.convertColorForCanvas($F.color);$E=$1.get_textFillStyle();}if(!$2||tab.DisplayList2DRenderer.$16($C)){this.$1A($1,$C,$p2,$p1.pixelExtents,$p3,$0);}if($E!=null){$1.set_textFillStyle($E);}}}if($5){$1.set_shapeFillStyle($3);$1.set_textFillStyle($4);}}}
tab.vqlui$C=function(context){this.$0=context.get_alpha();this.$3=context.get_lineJoin();this.$4=context.get_lineCap();this.$2=context.get_linePattern();this.$5=context.get_strokeStyle();this.$1=context.get_lineWidth();this.$8=context.get_textAngle();this.$9=context.get_font();this.$6=context.get_shapeFillStyle();this.$7=context.get_textFillStyle();this.$A=context.get_textAlign();}
tab.vqlui$C.prototype={$0:0,$1:0,$2:null,$3:null,$4:null,$5:null,$6:null,$7:null,$8:0,$9:null,$A:null,$B:function($p0){$p0.set_alpha(this.$0);$p0.set_lineJoin(this.$3);$p0.set_lineCap(this.$4);$p0.set_linePattern(this.$2);$p0.set_strokeStyle(this.$5);$p0.set_lineWidth(this.$1);$p0.set_textAngle(this.$8);$p0.set_font(this.$9);$p0.set_shapeFillStyle(this.$6);$p0.set_textFillStyle(this.$7);$p0.set_textAlign(this.$A);}}
tab.FontNormalizer=function(){this.normalizeFont=(tab.BrowserSupport.get_isIE())?tab.FontNormalizer.$2:tab.FontNormalizer.$3;}
tab.FontNormalizer.instance=function(){if(tab.FontNormalizer.$0==null){tab.FontNormalizer.$0=new tab.FontNormalizer();tab.FontNormalizer.$4();}return tab.FontNormalizer.$0;}
tab.FontNormalizer.$2=function($p0){var $0=$p0.split(' ');var $1;var $2=false;for(var $3=0;$3<$0.length;++$3){$1=tab.FontNormalizer.$1[$0[$3]];if(!ss.isUndefined($1)){$2=true;$0[$3]=$1;}}if($2){return $0.join(' ');}return $p0;}
tab.FontNormalizer.$3=function($p0){return $p0;}
tab.FontNormalizer.$4=function(){if(tab.FontNormalizer.$1!=null){return;}if(tab.BrowserSupport.get_isIE()){tab.FontNormalizer.$1={};tab.FontNormalizer.$1['\u83ef\u5eb7\u4e2d\u660e\u9ad4']='DLCMingMedium';tab.FontNormalizer.$1['\u83ef\u5eb7\u7c97\u660e\u9ad4']='DLCMingBold';tab.FontNormalizer.$1['\u7d30\u660e\u9ad4']='Ming Light';tab.FontNormalizer.$1['\u65b0\u7d30\u660e\u9ad4']='PMingLiU';tab.FontNormalizer.$1['\u7d30\u660e\u9ad4-ExtB']='MingLiU-ExtB';tab.FontNormalizer.$1['\u65b0\u7d30\u660e\u9ad4-ExtB']='PMingLiU-ExtB';tab.FontNormalizer.$1['MS\u5b8b\u4f53']='MS Song';tab.FontNormalizer.$1['\u65b0\u5b8b\u4f53']='NSimSun';tab.FontNormalizer.$1['\u4e2d\u6613\u5b8b\u4f53']='SimSun';tab.FontNormalizer.$1['\u5b8b\u4f53']='SimSun';tab.FontNormalizer.$1['\u5b8b\u4f53-18030']='SimSun-18030';tab.FontNormalizer.$1['\u65b0\u5b8b\u4f53-18030']='NSimSun-18030';tab.FontNormalizer.$1['\u5b8b\u4f53\u2013\u65b9\u6b63\u8d85\u5927\u5b57\u7b26\u96c6']='SimSun (Founder Extended)';tab.FontNormalizer.$1['\u5b8b\u9ad4ExtA']='SimSun-ExtA';tab.FontNormalizer.$1['\u5b8b\u9ad4ExtB']='SimSun-ExtB';tab.FontNormalizer.$1['\u534e\u6587\u5b8b\u4f53']='STSong';tab.FontNormalizer.$1['\u534e\u6587\u4e2d\u5b8b']='STZhongsong';tab.FontNormalizer.$1['\uff2d\uff33']='MS';tab.FontNormalizer.$1['\u660e\u671d']='Mincho';tab.FontNormalizer.$1['\uff30\u660e\u671d']='PMincho';tab.FontNormalizer.$1['\u5e73\u6210\u660e\u671d']='Heisei Minch\u014d';tab.FontNormalizer.$1['\u30ea\u30e5\u30a6\u30df\u30f3']='Ry\u00ad\u016bbund\u014d Minch\u014d';tab.FontNormalizer.$1['\u5c0f\u585a\u660e\u671d']='Kozuka Minch\u014d';tab.FontNormalizer.$1['\ubc14\ud0d5']='Batang';tab.FontNormalizer.$1['\ubc14\ud0d5\uccb4']='BatangChe';tab.FontNormalizer.$1['\uad81\uc11c']='Gungsuh';tab.FontNormalizer.$1['\uad81\uc11c\uccb4']='GungsuhChe';tab.FontNormalizer.$1['\u534e\u6587\u7ec6\u9ed1']='STHeiti Light';tab.FontNormalizer.$1['\u5fae\u8edf\u6b63\u9ed1\u9ad4']='Microsoft JhengHei';tab.FontNormalizer.$1['\u5fae\u8f6f\u96c5\u9ed1']='Microsoft YaHei';tab.FontNormalizer.$1['MS\u9ed1\u4f53']='MS Hei';tab.FontNormalizer.$1['\u8499\u7eb3\u9ed1\u4f53']='MHei';tab.FontNormalizer.$1['\u4e2d\u6613\u9ed1\u4f53']='SimHei';tab.FontNormalizer.$1['\u30e1\u30a4\u30ea\u30aa']='Meiryo';tab.FontNormalizer.$1['\u30b4\u30b7\u30c3\u30af']='Gothic';tab.FontNormalizer.$1['\uff30\u30b4\u30b7\u30c3\u30af']='PGothic';tab.FontNormalizer.$1['\ub3cb\uc6c0']='Dotum';tab.FontNormalizer.$1['\ub3cb\uc6c0\uccb4']='DotumChe';tab.FontNormalizer.$1['\uad74\ub9bc']='Gulim';tab.FontNormalizer.$1['\uad74\ub9bc\uccb4']='GulimChe';tab.FontNormalizer.$1['\ub9d1\uc740']='Malgun';tab.FontNormalizer.$1['\uace0\ub515']='Gothic';tab.FontNormalizer.$1['\uc0c8\uad74\ub9bc']='New Gulim';tab.FontNormalizer.$1['\u6a19\u6977\u9ad4']='KaiU';tab.FontNormalizer.$1['\u4e2d\u6613\u6977\u4f53']='SimKai';tab.FontNormalizer.$1['\u6977\u4f53_GB2312']='SimKai';tab.FontNormalizer.$1['\u534e\u6587\u6977\u4f53']='STKaiti';tab.FontNormalizer.$1['\u4e2d\u6613\u96b6\u4e66']='SimLi';tab.FontNormalizer.$1['\u96b6\u4e66']='SimLi';tab.FontNormalizer.$1['\u4e2d\u6613\u4eff\u5b8b']='SimFang';tab.FontNormalizer.$1['\u4eff\u5b8b']='SimFang';tab.FontNormalizer.$1['\u5e7c\u5706']='SimYou';tab.FontNormalizer.$1['\u534e\u6587\u884c\u6977']='HuaWen Xingkai';tab.FontNormalizer.$1['\u534e\u6587\u5f69\u4e91']='HuaWen CaiYun';tab.FontNormalizer.$1['\u65b9\u6b63\u8212\u4f53']='FangZheng ShuTi';tab.FontNormalizer.$1['\u65b9\u6b63\u542f\u4f53']='FangZheng QiTi';tab.FontNormalizer.$1['\u6c49\u4eea\u96ea\u541b\u4f53']='HanYi XueJun';tab.FontNormalizer.$1['\u83ef\u5eb7\u5c11\u5973\u9ad4']='HuaKang ShaoNu';tab.FontNormalizer.$1['\u83ef\u5eb7\u5a03\u5a03\u9ad4']='HuaKang WuaWua';}}
tab.FontNormalizer.prototype={normalizeFont:null}
tab.PaneTable2DRenderer=function(canvas,context){tab.PaneTable2DRenderer.initializeBase(this,[canvas,context]);this.$B=new tab.DisplayList2DRenderer(canvas,context);}
tab.PaneTable2DRenderer.getMarkBoundingBox=function(index,paneDrawInfo){var $0=tab.$create_RectXY(0,0,0,0);if(!ss.isValue(paneDrawInfo)||index<0){return $0;}var $1=paneDrawInfo.get_markType();switch($1){case 'shape':return tab.MarksRenderer.$1B(paneDrawInfo,index);case 'bar':case 'square':return tab.MarksRenderer.$16(paneDrawInfo,index);case 'pie':return tab.MarksRenderer.$14(paneDrawInfo,index);case 'text':return tab.MarksRenderer.$15(paneDrawInfo,index);case 'label':return tab.MarksRenderer.$12(paneDrawInfo,index);case 'line':return tab.MarksRenderer.$17(paneDrawInfo,index);case 'area':return tab.MarksRenderer.$E(paneDrawInfo,index);case 'multipolygon':return tab.MarksRenderer.$B(paneDrawInfo,index);}var $2=paneDrawInfo.getMarkProperty('x',index);var $3=paneDrawInfo.getMarkProperty('y',index);var $4=paneDrawInfo.getMarkProperty('width',index);var $5=paneDrawInfo.getMarkProperty('height',index);$0.x=Math.floor($2-($4/2)+0.5);$0.y=Math.floor($3-($5/2)+0.5);$0.w=Math.ceil($4);$0.h=Math.ceil($5);return $0;}
tab.PaneTable2DRenderer.getOverlayImageInfo=function(tupleId,sceneInfo){var $0=tab.MetricsLogger.get_instance().createContext('PaneTable2DRenderer::GetOverlayImageInfo');var $1=sceneInfo.getPaneDrawInfoFromTupleId(tupleId);if(ss.isNullOrUndefined($1)){return null;}if($1.get_markType()==='line'){var $2=tab.MarksRenderer.$2E($1,tupleId);$0.close();return $2;}else if($1.get_markType()==='area'){var $3=tab.MarksRenderer.$22($1,tupleId);$0.close();return $3;}$0.close();return null;}
tab.PaneTable2DRenderer.$D=function($p0,$p1,$p2){$p0[0]=$p1.x;$p0[1]=$p1.y;$p0[2]=$p2.x;$p0[3]=$p2.y;}
tab.PaneTable2DRenderer.prototype={$B:null,$C:null,renderScene:function(paneTableVm){this.$C=paneTableVm.get_scene();var $0=this.$C.get_scene();if(!ss.isValue($0)){return;}this.$B.setRenderOffsetNoTranslate(this.get_renderOffset());var $1=this.get_currentContext().get_numberSavedStates();this.$F(paneTableVm.get_vizRegionMap(),paneTableVm.get_drawFirstParts());this.$11($0.panes);this.$F(paneTableVm.get_vizRegionMap(),paneTableVm.get_drawLastParts());while(this.get_currentContext().get_numberSavedStates()>$1){this.get_currentContext().restore();}},renderViewportBorders:function(paneTableVm){this.$C=paneTableVm.get_scene();var $0=this.$C.get_scene();if(ss.isNullOrUndefined($0)){return;}var $1=this.$E($0.panes);if(ss.isNullOrUndefined($1)){return;}var $2=$1.drawItems.clone();var $3=this.get_currentCanvas().width-1;var $4=this.get_currentCanvas().height-1;var $5=tab.$create_Point(0,0);var $6=tab.$create_Point($3,0);var $7=tab.$create_Point(0,$4);var $8=tab.$create_Point($3,$4);var $9=false;var $A=false;for(var $B=$2.length-1;$B>=0;--$B){var $C=$2[$B];if($C.type==='clip-rect'||$C.type==='transform'){$2.removeAt($B);}else if($C.type==='draw-polyline'){var $D=$.extend(true,{},$C);$2[$B]=$D;if($D.points[1]===$D.points[3]){if($9){tab.PaneTable2DRenderer.$D($D.points,$7,$8);}else{tab.PaneTable2DRenderer.$D($D.points,$5,$6);}$9=true;}else{if($A){tab.PaneTable2DRenderer.$D($D.points,$6,$8);}else{tab.PaneTable2DRenderer.$D($D.points,$5,$7);}$A=true;}}}this.get_currentContext().save();this.$15($2,null);this.get_currentContext().restore();},renderAxisRulers:function(paneTableVm,docSize,scrollPos){var $0=paneTableVm.get_vizRegionMap()['axis-rules'];if(ss.isValue($0)){var $1=[];var $enum1=ss.IEnumerator.getEnumerator($0.get_visualListPM().drawItems);while($enum1.moveNext()){var $4=$enum1.current;if($4.type==='draw-pen'){$1.add($4);}}var $2=function($p1_0,$p1_1){
var $1_0={};$1_0.type='draw-polyline';$1_0.points=new Array(4);tab.PaneTable2DRenderer.$D($1_0.points,$p1_0,$p1_1);return $1_0;};var $3=this.get_currentCanvas().height-1;$1.add($2(tab.$create_Point(0,-scrollPos.y),tab.$create_Point(0,docSize.h-scrollPos.y)));$1.add($2(tab.$create_Point(-scrollPos.x,$3),tab.$create_Point(docSize.w-scrollPos.x,$3)));this.get_currentContext().save();this.$15($1,null);this.get_currentContext().restore();}},$E:function($p0){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($0.drawPane);while($enum2.moveNext()){var $1=$enum2.current;if($1.visualPart==='pane-borders'){return $1;}}}return null;},$F:function($p0,$p1){if(!ss.isValue($p0)){return;}var $enum1=ss.IEnumerator.getEnumerator($p1);while($enum1.moveNext()){var $0=$enum1.current;var $1=$p0[$0];if(!tab.PaneTableViewModel.blackListVisualParts.contains($0)&&$0!=='axis-rules'){if(ss.isValue($1)){this.get_currentContext().save();var $2=this.$C.get_imageDictionary();this.$B.renderVisualListHelper($1,$2);this.get_currentContext().restore();}}}},$10:function($p0,$p1){if(!ss.isValue($p0)){return;}this.get_currentContext().save();this.$15($p0.drawItems,$p1);this.get_currentContext().restore();},$11:function($p0){if(!ss.isValue($p0)){return;}this.$12($p0,'background');this.$14($p0);this.$12($p0,'foreground');},$12:function($p0,$p1){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;if(!this.$16($0)){continue;}var $enum2=ss.IEnumerator.getEnumerator($0.drawPane);while($enum2.moveNext()){var $1=$enum2.current;if($p1===this.$19($1.visualPart)){var $2=null;if($1.visualPart==='decoration'){var $3=this.$13($0);if(ss.isValue($3)){$2=$3.get_mapExtents();}}this.$10($1,$2);}}}},$13:function($p0){var $0=_.find($p0.drawPane,function($p1_0){
return $p1_0.visualPart==='marks';});if(ss.isValue($0)){return this.$C.getPaneDrawInfo($0.paneMarks);}return null;},$14:function($p0){var $enum1=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.renderPassOrder);while($enum1.moveNext()){var $0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.drawRoleOrder);while($enum2.moveNext()){var $1=$enum2.current;var $enum3=ss.IEnumerator.getEnumerator($p0);while($enum3.moveNext()){var $2=$enum3.current;if(!this.$16($2)){continue;}var $3=null;var $enum4=ss.IEnumerator.getEnumerator($2.drawPane);while($enum4.moveNext()){var $4=$enum4.current;if($4.visualPart==='marks'){$3=this.$C.getPaneDrawInfo($4.paneMarks);break;}}if($3==null){continue;}if($1==='marks'||$1==='label'){var $enum5=ss.IEnumerator.getEnumerator($2.drawPane);while($enum5.moveNext()){var $5=$enum5.current;if($5.visualPart==='marks'){if($1==='marks'){this.get_currentContext().save();var $6=($3.get_mapExtents()||$3.get_paneRect());this.get_currentContext().setClip($6);this.$17($3,$0);this.get_currentContext().restore();break;}else if($1==='label'){if($3.get_hasLabels()){this.get_currentContext().save();var $7=($3.get_mapExtents()||$3.get_paneRect());this.get_currentContext().setClip($7);this.$18($3,$0);this.get_currentContext().restore();break;}}}}}else{var $enum6=ss.IEnumerator.getEnumerator($2.renderNodes);while($enum6.moveNext()){var $8=$enum6.current;switch($8.type){case 'prediction-band':var $9=new tab.MarksRenderer(this.get_currentCanvas(),this.get_currentContext());$9.setRenderOffsetNoTranslate(this.get_renderOffset());$9.$47($3,$0,$8,$1);break;case 'prediction-whisker':var $A=new tab.MarksRenderer(this.get_currentCanvas(),this.get_currentContext());$A.setRenderOffsetNoTranslate(this.get_renderOffset());$A.$49($3,$0,$8,$1);break;}}}}}}},$15:function($p0,$p1){if(!ss.isValue($p0)){return;}var $0=this.$C.get_imageDictionary();this.$B.renderDrawItems($p0,null,$0,$p1);},$16:function($p0){return this.isRectVisible(tab.RecordCast.rectJsonAsRectXY($p0.paneRect));},$17:function($p0,$p1){if(!$p0.get_markCount()){return;}var $0=new tab.MarksRenderer(this.get_currentCanvas(),this.get_currentContext());$0.setRenderOffsetNoTranslate(this.get_renderOffset());var $1=$p0.get_markType();switch($1){case 'shape':$0.$2F($p0,$p1);break;case 'square':case 'bar':$0.$2A($p0,$p1);break;case 'pie':$0.$26($p0,$p1);break;case 'line':$0.$2C($p0,$p1);break;case 'area':$0.$20($p0,$p1);break;case 'text':$0.$28($p0,$p1);break;case 'multipolygon':$0.$1E($p0,$p1);break;}},$18:function($p0,$p1){if(!ss.isValue($p0)){return;}if(!$p0.get_markCount()){return;}var $0=new tab.MarksRenderer(this.get_currentCanvas(),this.get_currentContext());$0.setRenderOffsetNoTranslate(this.get_renderOffset());$0.$23($p0,$p1);},$19:function($p0){switch($p0){case 'background':case 'decoration':case 'ref-bands':case 'cell-borders':return 'background';case 'mark-trails':case 'marks':case 'mark-labels':return 'marks';case 'borders':case 'trend-lines':case 'ref-lines':case 'pane-borders':case 'annotations':case 'axis-rules':return 'foreground';}return 'background';}}
tab.RenderUtil=function(){}
tab.RenderUtil.calculatePixelRatio=function(forCanvas){var $0=1;if(ss.isValue(tsConfig.highDpi)&&tsConfig.highDpi){if(ss.isValue(tsConfig.pixelRatio)){$0=tsConfig.pixelRatio;}else{if(ss.isValue(forCanvas)&&!forCanvas){$0=tab.BrowserSupport.get_devicePixelRatio();}else{$0=tab.BrowserSupport.get_devicePixelRatio()/tab.BrowserSupport.get_backingStoragePixelRatio();}}}return $0;}
tab.TabRenderContext2D=function(baseContext){this.$1=baseContext;this.$2=[];this.$3=tab.FontNormalizer.instance();this.reset();this.clearDirtyRect();}
tab.TabRenderContext2D.$E=function($p0){var $0=$p0.split(' ');var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $1=$enum1.current;var $2=parseFloat($1);if(isFinite($2)){return $2;}}return 8;}
tab.TabRenderContext2D.prototype={$1:null,$2:null,$3:null,$4:null,$5:0,$6:null,$7:null,$8:false,$9:false,$A:0,$B:0,$C:null,get_textAngle:function(){return this.$5;},set_textAngle:function(value){this.$5=value;return value;},get_isTextAngleHorizontal:function(){return Math.abs(this.get_textAngle())<0.01;},get_numberSavedStates:function(){return this.$B;},get_alpha:function(){return this.$1.globalAlpha;},set_alpha:function(value){if(value!==this.$1.globalAlpha){this.$1.globalAlpha=value;}return value;},get_compositeOperation:function(){return this.$1.globalCompositeOperation;},set_compositeOperation:function(value){this.$1.globalCompositeOperation=value;return value;},get_font:function(){return this.$1.font;},set_font:function(value){var $0=this.$3.normalizeFont(value);if($0!==this.$1.font){this.$1.font=$0;}this.$A=tab.TabRenderContext2D.$E($0);return value;},get_lineCap:function(){return this.$1.lineCap;},set_lineCap:function(value){if(value!==this.$1.lineCap){this.$1.lineCap=value;}return value;},get_lineJoin:function(){return this.$1.lineJoin;},set_lineJoin:function(value){if(value!==this.$1.lineJoin){this.$1.lineJoin=value;}return value;},get_lineWidth:function(){return this.$1.lineWidth;},set_lineWidth:function(value){if(value!==this.$1.lineWidth){this.$1.lineWidth=value;this.$13();}return value;},get_linePattern:function(){return this.$4;},set_linePattern:function(value){if(value!==this.$4){this.$4=value;this.$13();}return value;},get_miterLimit:function(){return this.$1.miterLimit;},set_miterLimit:function(value){if(value!==this.$1.miterLimit){this.$1.miterLimit=value;}return value;},get_shadowBlur:function(){return this.$1.shadowBlur;},set_shadowBlur:function(value){this.$1.shadowBlur=value;return value;},get_shadowColor:function(){return this.$1.shadowColor;},set_shadowColor:function(value){this.$1.shadowColor=value;return value;},get_shadowOffsetX:function(){return this.$1.shadowOffsetX;},set_shadowOffsetX:function(value){this.$1.shadowOffsetX=value;return value;},get_shadowOffsetY:function(){return this.$1.shadowOffsetY;},set_shadowOffsetY:function(value){this.$1.shadowOffsetY=value;return value;},get_strokeStyle:function(){return this.$1.strokeStyle;},set_strokeStyle:function(value){if(value!==this.$1.strokeStyle){this.$1.strokeStyle=value;}return value;},get_shapeFillStyle:function(){return this.$6;},set_shapeFillStyle:function(value){this.$6=value;this.$12(value);return value;},get_shouldAntialias:function(){return this.$8;},set_shouldAntialias:function(value){this.$8=value;return value;},get_shouldUnderlineText:function(){return this.$9;},set_shouldUnderlineText:function(value){this.$9=value;return value;},get_textFillStyle:function(){return this.$7;},set_textFillStyle:function(value){this.$7=value;return value;},get_textAlign:function(){return this.$1.textAlign;},set_textAlign:function(value){this.$1.textAlign=value;return value;},get_textBaseline:function(){return this.$1.textBaseline;},set_textBaseline:function(value){this.$1.textBaseline=value;return value;},get_dirtyRect:function(){return this.$C;},set_dirtyRect:function(value){this.$C=value;return value;},get_$D:function(){var $0=this.$1.canvas;var $1=tab.$create_Size($0.width,$0.height);return $1;},clearDirtyRect:function(){this.set_dirtyRect(tab.$create_RectXY(0,0,0,0));},setDefaultPropertyValues:function(){this.set_alpha(1);this.set_strokeStyle('rgb(0,0,0)');this.set_linePattern(tab.TabRenderContext2D.defaultLinePattern);this.set_lineWidth(1);this.set_lineJoin(tab.TabRenderContext2D.defaultLineJoin);this.set_lineCap(tab.TabRenderContext2D.defaultLineCap);this.set_shapeFillStyle('rgb(0,0,0)');this.set_textFillStyle('rgb(0,0,0)');this.set_textBaseline(tab.TabRenderContext2D.defaultTextBaseline);this.set_textAlign(tab.TabRenderContext2D.defaultTextAlign);this.set_textAngle(0);this.set_font(8+'pt '+'Arial');this.$8=true;this.$9=false;},setClip:function(clipRect){this.beginPath();this.rect(clipRect.x,clipRect.y,clipRect.w,clipRect.h);this.$F();},arc:function(x,y,radius,startAngle,endAngle,anticlockwise){this.$1.arc(x,y,radius,startAngle,endAngle,anticlockwise);},arcTo:function(x1,y1,x2,y2,radius){this.$1.arcTo(x1,y1,x2,y2,radius);},beginPath:function(){this.$1.beginPath();},bezierCurveTo:function(cp1x,cp1y,cp2x,cp2y,x,y){this.$1.bezierCurveTo(cp1x,cp1y,cp2x,cp2y,x,y);},clearRect:function(x,y,w,h){this.$1.clearRect(x,y,w,h);},closePath:function(){this.$1.closePath();},createImageData1:function(imagedata){return this.$1.createImageData(imagedata);},createImageData2:function(sw,sh){return this.$1.createImageData(sw,sh);},createLinearGradient:function(x0,y0,x1,y1){return this.$1.createLinearGradient(x0,y0,x1,y1);},createPattern1:function(canvas,repetition){return this.$1.createPattern(canvas,repetition);},createPattern2:function(image,repetition){return this.$1.createPattern(image,repetition);},createRadialGradient:function(x0,y0,r0,x1,y1,r1){return this.$1.createRadialGradient(x0,y0,r0,x1,y1,r1);},drawImage1:function(image,dx,dy){this.$1.drawImage(image,dx,dy);},drawImage2:function(image,dx,dy){this.$1.drawImage(image,dx,dy);},drawImage3:function(image,dx,dy,dw,dh){this.$1.drawImage(image,dx,dy,dw,dh);},drawImage4:function(image,dx,dy,dw,dh){this.$1.drawImage(image,dx,dy,dw,dh);},drawImage5:function(image,sx,sy,sw,sh,dx,dy,dw,dh){this.$1.drawImage(image,sx,sy,sw,sh,dx,dy,dw,dh);},drawImage6:function(image,sx,sy,sw,sh,dx,dy,dw,dh){this.$1.drawImage(image,sx,sy,sw,sh,dx,dy,dw,dh);},fill:function(){this.$1.fill();},fillRect:function(x,y,w,h){this.$1.fillRect(x,y,w,h);},fillText1:function(text,x,y){if(this.$10()){var $0=ss.Delegate.create(this,function($p1_0){
this.$1.fillText($p1_0,0,0);});this.$11($0,text,x,y);}else{this.$1.fillText(text,x,y);}},fillText2:function(text,x,y,maxWidth){if(this.$10()){var $0=ss.Delegate.create(this,function($p1_0){
this.$1.fillText($p1_0,0,0,maxWidth);});this.$11($0,text,x,y);}else{this.$1.fillText(text,x,y,maxWidth);}},getImageData:function(sx,sy,sw,sh){return this.$1.getImageData(sx,sy,sw,sh);},isPointInPath:function(x,y){return this.$1.isPointInPath(x,y);},lineTo:function(x,y){this.$1.lineTo(x,y);},measureText:function(text){return this.$1.measureText(text);},moveTo:function(x,y){this.$1.moveTo(x,y);},putImageData1:function(imagedata,dx,dy){this.$1.putImageData(imagedata,dx,dy);},putImageData2:function(imagedata,dx,dy,dirtyX,dirtyY,dirtyWidth,dirtyHeight){this.$1.putImageData(imagedata,dx,dy,dirtyX,dirtyY,dirtyWidth,dirtyHeight);},quadraticCurveTo:function(cpx,cpy,x,y){this.$1.quadraticCurveTo(cpx,cpy,x,y);},rect:function(x,y,w,h){this.$1.rect(x,y,w,h);},reset:function(){while(this.$B>0){this.restore();}this.setDefaultPropertyValues();this.setTransform(1,0,0,1,0,0);this.save();},restore:function(){this.$1.restore();var $0=this.$2.pop();$0.$6(this);--this.$B;},rotate:function(angle){this.$1.rotate(angle);},save:function(){var $0=new tab.vqlui$D(this.$4,this.$5,this.$6,this.$7,this.$8,this.$9);this.$2.push($0);this.$1.save();++this.$B;},scale:function(x,y){this.$1.scale(x,y);},setTransform:function(m11,m12,m21,m22,dx,dy){this.$1.setTransform(m11,m12,m21,m22,dx,dy);},stroke:function(){this.$1.stroke();},strokeRect:function(x,y,w,h){this.$1.strokeRect(x,y,w,h);},strokeText1:function(text,x,y){},strokeText2:function(text,x,y,maxWidth){},transform:function(m11,m12,m21,m22,dx,dy){this.$1.transform(m11,m12,m21,m22,dx,dy);},translate:function(x,y){this.$1.translate(x,y);},$F:function(){this.$1.clip();},$10:function(){return !this.get_isTextAngleHorizontal()||this.$6==null||this.$6!==this.$7||this.$9;},$11:function($p0,$p1,$p2,$p3){this.$1.save();this.translate($p2,$p3);if(!this.get_isTextAngleHorizontal()){this.rotate(this.get_textAngle());}this.$12(this.$7);$p0($p1);if(this.$9){var $0=this.measureText($p1).width;var $1=Math.round(Math.max(1,(this.$A-5)/10));var $2=Math.round((this.$A-5)/10);var $3=0;if(this.get_textAlign()==='center'){$3-=$0/2;}else if(this.get_textAlign()==='end'){$3-=$0;}this.$1.fillRect($3,$2,$0,$1);}this.$1.restore();},$12:function($p0){if($p0!==this.$1.fillStyle){this.$1.fillStyle=$p0;}},$13:function(){var $0=null;switch(this.$4){case 'solid':$0=[];break;case 'dashed':$0=[tab.TabRenderContext2D.defaultLineDashDashed[0]*this.$1.lineWidth,tab.TabRenderContext2D.defaultLineDashDashed[1]*this.$1.lineWidth];break;case 'dotted':$0=[tab.TabRenderContext2D.defaultLineDashDotted[0]*this.$1.lineWidth,tab.TabRenderContext2D.defaultLineDashDotted[1]*this.$1.lineWidth];break;}if((typeof(this.$1.setLineDash)==='function')){this.$1.setLineDash($0);}else if(('mozDash' in this.$1)){this.$1.mozDash=$0;}else if(('webkitLineDash' in this.$1)){this.$1.webkitLineDash=$0;}}}
tab.vqlui$D=function(linePattern,textAngle,shapeFill,textFill,shouldAntialias,shouldUnderlineText){this.$0=linePattern;this.$1=textAngle;this.$2=shapeFill;this.$3=textFill;this.$4=shouldAntialias;this.$5=shouldUnderlineText;}
tab.vqlui$D.prototype={$0:null,$1:0,$2:null,$3:null,$4:false,$5:false,$6:function($p0){$p0.set_linePattern(this.$0);$p0.set_textAngle(this.$1);$p0.set_shapeFillStyle(this.$2);$p0.set_textFillStyle(this.$3);$p0.set_shouldAntialias(this.$4);$p0.set_shouldUnderlineText(this.$5);}}
tab.WKTParser=function(){}
tab.WKTParser.parse=function(wkt){var $0=null;wkt=wkt.replace(tab.WKTParser.$0,' ');var $1=tab.WKTParser.$1.exec(wkt);if(!ss.isNull($1)){var $2=$1[1].toLocaleLowerCase();var $3=$1[2];if($2==='polygon'){var $4=[];$4.add(tab.WKTParser.$7($3));$0=Array.toArray($4);}else if($2==='multipolygon'){$0=tab.WKTParser.$6($3);}}return $0;}
tab.WKTParser.$6=function($p0){var $0=[];var $1=$p0.trim().split(tab.WKTParser.$4);var $2;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $3=$enum1.current;$2=$3.replace(tab.WKTParser.$5,'$1');$0.add(tab.WKTParser.$7($2));}return Array.toArray($0);}
tab.WKTParser.$7=function($p0){var $0=[];var $1=$p0.trim().split(tab.WKTParser.$3);var $2;var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $3=$enum1.current;$2=$3.replace(tab.WKTParser.$5,'$1');$0.add(tab.WKTParser.$8($2));}return Array.toArray($0);}
tab.WKTParser.$8=function($p0){var $0=[];var $1=$p0.trim().split(',');var $enum1=ss.IEnumerator.getEnumerator($1);while($enum1.moveNext()){var $2=$enum1.current;var $3=$2.trim().split(tab.WKTParser.$2);$0.add(parseFloat($3[0]));$0.add(parseFloat($3[1]));}return Array.toArray($0);}
tab.SceneInfo=function(){this.$0={};this.$1={};this.$2={};this.$3={};this.$4={};this.$A={};this.$B={};}
tab.SceneInfo.getPaneMarksKey=function(paneMarksPM){var $0=paneMarksPM.paneId;return paneMarksPM.paneDescrKey+'_'+$0['columnIndex']+'_'+$0['rowIndex']+'_'+paneMarksPM.paneIndex;}
tab.SceneInfo.prototype={$5:null,$6:null,$7:false,$8:null,$9:null,get_scene:function(){return this.$5;},get_hasLabels:function(){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$1));while($enum1.moveNext()){var $0=$enum1.current;if(this.$1[$0].get_hasLabels()){return true;}}return false;},get_hasSelection:function(){return ss.isValue(this.$9)&&ss.isValue(this.$9.objectIds)&&this.$9.objectIds.length>0;},get_hasBrushing:function(){return this.$7||(ss.isValue(this.$6)&&ss.isValue(this.$6.objectIds)&&this.$6.objectIds.length>0)||(ss.isValue(this.$8)&&!tab.MiscUtil.isNullOrEmpty(this.$8.objectIds));},get_imageDictionary:function(){return this.$0;},get_hiddenTuples:function(){return this.$A;},set_hiddenTuples:function(value){this.$A=(value||{});return value;},get_filteredTuples:function(){return this.$B;},set_filteredTuples:function(value){this.$B=(value||{});return value;},get_brushing:function(){return this.$6;},set_brushing:function(value){this.$6=value;return value;},get_selection:function(){return this.$9;},set_selection:function(value){this.$9=value;return value;},get_impliedSelection:function(){return this.$8;},set_impliedSelection:function(value){this.$8=value;return value;},setSceneData:function(scenePM,selectionPM,impliedSelectionPM,brushingPM,colorDict,newHiddenTuples,newFilteredTuples){Object.clearKeys(this.$2);Object.clearKeys(this.$4);Object.clearKeys(this.$3);Object.clearKeys(this.$1);this.$5=scenePM;this.set_hiddenTuples(newHiddenTuples);this.set_filteredTuples(newFilteredTuples);if(ss.isValue(scenePM)&&ss.isValue(scenePM.panes)){var $enum1=ss.IEnumerator.getEnumerator(scenePM.panes);while($enum1.moveNext()){var $0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($0.drawPane);while($enum2.moveNext()){var $1=$enum2.current;if(ss.isValue($1.paneMarks)){var $2=$1.paneMarks;var $3=$2.paneDescrKey;var $4=this.$5.pdMarksMap[$3];var $5=new tab.PaneDrawInfo(this,$0,$2,$4,colorDict);var $6=tab.SceneInfo.getPaneMarksKey($2);this.$1[$6]=$5;}}}}if(ss.isValue(selectionPM)){this.setSelection(selectionPM,impliedSelectionPM);}if(ss.isValue(brushingPM)){this.set_brushing(brushingPM);}},getMarkBoundingBox:function(tupleID){if(Object.keyExists(this.$2,tupleID)){return this.$2[tupleID];}else{return tab.$create_RectXY(0,0,0,0);}},getSloppyMarkBoundingBox:function(tupleID){var $0=3;var $1=this.getMarkBoundingBox(tupleID);if(tab.RectXYUtil.isNull($1)){return $1;}return tab.RectXYUtil.outsetRect($1,$0,$0);},getLabelBoundingBox:function(tupleID){if(Object.keyExists(this.$3,tupleID)){return this.$3[tupleID];}else{return tab.$create_RectXY(0,0,0,0);}},getSloppyLabelBoundingBox:function(tupleID){var $0=1;var $1=this.getLabelBoundingBox(tupleID);if(tab.RectXYUtil.isNull($1)){return $1;}return tab.RectXYUtil.outsetRect($1,$0,$0);},getMarkInvalidationRects:function(tupleID){var $0=false;var $1=[];var $2=[];var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$1));while($enum1.moveNext()){var $3=$enum1.current;var $4=this.$1[$3].get_markType();if($4==='area'||$4==='line'){$0=true;}$2.add(this.$1[$3].get_paneRect());}if($0){$1.addRange($2);}else{var $5=this.$F(tupleID);var $6=this.getPaneDrawInfoFromTupleId(tupleID);var $7=$6.getWorldOffsetMarkBounds($5);$1.addRange($7);var $8=this.getSloppyLabelBoundingBox(tupleID);if(!tab.RectXYUtil.isNull($8)){$1.add($8);}}return $1;},updateImageMap:function(imageDictPM,imageLoadedCallback){if(ss.isValue(imageDictPM)&&ss.isValue(imageDictPM.imageMap)){var $dict1=imageDictPM.imageMap;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};var $1=$0.key;if(!Object.keyExists(this.$0,$1)){var $2=$0.value;var $3=document.createElement('img');$3.src='data:image/jpeg;base64,'+$2;this.$0[$1]=$3;var $4=null;$4=function(){
if(ss.isValue(imageLoadedCallback)){imageLoadedCallback();}$3.removeEventListener('load',$4,false);};$3.addEventListener('load',$4,false);}}var $enum3=ss.IEnumerator.getEnumerator(Object.keys(this.$0));while($enum3.moveNext()){var $5=$enum3.current;if(!Object.keyExists(imageDictPM.imageMap,$5)){delete this.$0[$5];}}}},isMarkSelected:function(tupleID){if(!this.get_hasSelection()){return false;}return this.$9.selectionType==='tuples'&&this.$9.objectIds.contains(tupleID);},isMarkBrushed:function(tupleID){if(!this.get_hasBrushing()){return false;}return (ss.isValue(this.$6)&&this.$6.selectionType==='tuples'&&this.$6.objectIds.contains(tupleID))||this.isMarkImpliedSelected(tupleID);},isMarkImpliedSelected:function(tupleId){return ss.isValue(this.$8)&&this.$8.objectIds.contains(tupleId);},isMarkVisible:function(tupleID){return !Object.keyExists(this.$A,tupleID.toString());},isMarkFiltered:function(tupleID){return Object.keyExists(this.$B,tupleID.toString());},setSelection:function(newSelection,newImpliedSelection){this.set_selection(newSelection);this.set_impliedSelection(newImpliedSelection);},setLabelInfo:function(labelPM){if(ss.isValue(labelPM)&&ss.isValue(labelPM.panes)){var $enum1=ss.IEnumerator.getEnumerator(labelPM.panes);while($enum1.moveNext()){var $0=$enum1.current;var $enum2=ss.IEnumerator.getEnumerator($0.drawPane);while($enum2.moveNext()){var $1=$enum2.current;if(ss.isValue($1.paneMarks)){var $2=$1.paneMarks;var $3=tab.SceneInfo.getPaneMarksKey($2);if(ss.isValue(Object.keyExists(this.$1,$3))){var $4=this.$1[$3];var $5=$2.paneDescrKey;var $6=labelPM.pdMarksMap[$5];$4.addLabelInfo($6,$2);}}}}}},getPaneDrawInfo:function(paneMarks){var $0=null;if(ss.isValue(paneMarks)){$0=this.$1[tab.SceneInfo.getPaneMarksKey(paneMarks)];}return $0;},getPaneDrawInfoFromKey:function(paneMarksKey){return this.$1[paneMarksKey];},getPaneDrawInfoFromTupleId:function(tupleId){var $0=-1;var $1='';var $2=this.$5.pdMarksMap;var $dict1=$2;for(var $key2 in $dict1){var $4={key:$key2,value:$dict1[$key2]};var $5=$4.value.encodingColumns['tuple_id'];var $6=$5.dataValues;$0=$6.indexOf(tupleId);if($0!==-1){$1=$4.key;break;}}var $3=null;if($0!==-1&&!tab.MiscUtil.isNullOrEmpty($1)){var $enum3=ss.IEnumerator.getEnumerator(this.$5.panes);while($enum3.moveNext()){var $7=$enum3.current;var $8=_.find($7.drawPane,function($p1_0){
return ss.isValue($p1_0.paneMarks);});if(ss.isValue($8)){var $9=$8.paneMarks;if($1===$9.paneDescrKey&&$0>=$9.startIndex&&$0<$9.endIndex){$3=$9;}}}}if(ss.isValue($3)){return this.getPaneDrawInfo($3);}return null;},setIsTargetOfBrushingAction:function(isTarget){this.$7=isTarget;},$C:function($p0){var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0));while($enum1.moveNext()){var $0=$enum1.current;this.$2[$0]=$p0[$0];}},$D:function($p0){var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0));while($enum1.moveNext()){var $0=$enum1.current;this.$3[$0]=$p0[$0];}},$E:function($p0){var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0));while($enum1.moveNext()){var $0=$enum1.current;this.$4[$0]=$p0[$0];}},$F:function($p0){var $0=3;var $1=this.$4[$p0];if(ss.isNullOrUndefined($1)){$1=this.getMarkBoundingBox($p0);}if(tab.RectXYUtil.isNull($1)){return $1;}return tab.RectXYUtil.outsetRect($1,$0,$0);}}
tab.ResolveSelectAction=function(){}
tab.ResolveSelectAction.fromNormalizedEvent=function(pseudoEvent,isMultiSelect){var $0=tableau.util.getSelectAction(pseudoEvent);if(!ss.isNullOrUndefined(isMultiSelect)&&isMultiSelect&&$0==='toggle'){$0='range';}return $0;}
tableau.util=function(){}
tableau.util.assetUrl=function(res,useLocal){var $0=(useLocal)?tsConfig.local_static_asset_prefix:tsConfig.external_static_asset_prefix;if(res.charAt(0)==='/'){var $1=$0.length-1;if($0.charAt($1)==='/'){return $0.substring(0,$1-1)+res;}else{return $0+res;}}else{return $0+'/'+res;}}
tableau.util.selectText=function(field,start,end){if(ss.isNullOrUndefined(field)){return;}if((typeof(field.createTextRange)==='function')){var $0=field.createTextRange();$0.collapse(true);$0.moveStart('character',start);$0.moveEnd('character',end-start);$0.select();}else if((typeof(field.setSelectionRange)==='function')){field.setSelectionRange(start,end);}else if((typeof(field.selectionStart)==='function')){field.selectionStart=start;field.selectionEnd=end;}field.focus();}
tableau.util.isPrintableNonNumericKeyPressed=function(e){return tableau.util.isPrintableNonNumericInput(e.which,e.shiftKey,e.ctrlKey);}
tableau.util.isPrintableNonNumericInput=function(charCode,shiftKey,ctlKey){var $0=(charCode>=91&&charCode<=105);var $1=(charCode>=112&&charCode<=123);var $2=charCode<47;var $3=!shiftKey&&!ctlKey&&(charCode>=48&&charCode<=57);return !$0&&!$2&&!$3&&!$1;}
tableau.util.preventNonNumericInput=function(e){if(tableau.util.isPrintableNonNumericKeyPressed(e)){e.preventDefault();e.stopPropagation();}}
tableau.util.isElementVisible=function(node){node=dojo.byId(node);return dojo.style(node,'display')!=='none';}
tableau.util.overElement=function(node,e){node=dojo.byId(node);var $0=tab.$create_Point(e.pageX,e.pageY);var $1=dojo.coords(node,true);var $2=$1.y;var $3=$2+$1.h;var $4=$1.x;var $5=$4+$1.w;return ($0.x>=$4&&$0.x<=$5&&$0.y>=$2&&$0.y<=$3);}
tableau.util.disableTextSelection=function(element){if((typeof(element.onselectstart)==='function')){var $0=function($p1_0){
dojo.stopEvent($p1_0);};element.onselectstart=$0;}else if(('MozUserSelect' in element.style)){element.style['MozUserSelect']='none';}element.style.cursor='default';}
tableau.util.getSelectAction=function(e){var $0='simple';var $1=tableau.util.isCtrlKey(e);if(e.shiftKey){$0='range';}if($1){$0='toggle';}return $0;}
tableau.util.isCtrlKey=function(e){return (tableau.util.isMac)?e.metaKey:e.ctrlKey;}
tableau.util.resize=function(node,bbox){if((typeof(node.resize)==='function')){node.resize(tab.$create_Rect(bbox.x,bbox.y,bbox.w,bbox.h));}else{if(('domNode' in node)){node=node.domNode;}dojo.marginBox(node,tab.$create_Rect(bbox.x,bbox.y,bbox.w,bbox.h));}}
tableau.util.findElementByTagName=function(rootNode,tagName,attrMap){rootNode=(rootNode||dojo.body());if(tableau.util.isNodeMatch(rootNode,tagName,attrMap)){return rootNode;}var $0=rootNode.getElementsByTagName(tagName);var $1=$0.length;for(var $2=0;$2<$1;$2+=1){if(tableau.util.isNodeMatch($0[$2],tagName,attrMap)){return $0[$2];}}return null;}
tableau.util.findDirectParentByClassName=function(startNode,className,endNode){if(ss.isNullOrUndefined(startNode)||tab.MiscUtil.isNullOrEmpty(className)){return null;}endNode=(endNode||document.body);var $0=startNode.parentNode;while(!ss.isNullOrUndefined($0)&&$0!==endNode){if(!tab.MiscUtil.isNullOrEmpty($0.className)){if($0.className.toLowerCase()===className.toLowerCase()){return $0;}$0=$0.parentNode;}}return null;}
tableau.util.isNodeMatch=function(node,tagName,attrMap){if(ss.isNullOrUndefined(node)||node.tagName.toLowerCase()!==tagName.toLowerCase()){return false;}if(ss.isNullOrUndefined(attrMap)){return true;}var $enum1=ss.IEnumerator.getEnumerator(Object.keys(attrMap));while($enum1.moveNext()){var $0=$enum1.current;if(($0 in attrMap)&&node[$0]!==attrMap[$0]){return false;}}return true;}
tableau.util.binarySearch=function(value,array,startIndex,endIndex,comparer){var $0=(tab.MiscUtil.isValidIndex(startIndex||-1,array))?startIndex:0;var $1=(tab.MiscUtil.isValidIndex(endIndex||-1,array))?endIndex:(array.length-1);if(ss.isNullOrUndefined(comparer)){comparer=tableau.util.$1;}var $2={};while($0<=$1){var $3=Math.floor($0+(($1-$0)/2));var $4=comparer(array[$3],value);if(!$4){$2.found=true;$2.index=$3;return $2;}else if($4<0){$0=$3+1;}else{$1=$3-1;}}$2.found=false;$2.index=$0;return $2;}
tableau.util.$1=function($p0,$p1){if($p0===$p1){return 0;}else if($p0 > $p1){return -1;}else{return 1;}}
tableau.util.showAlertDialog=function(content,title){var $0={};$0.content=content;$0.title=title;$0.buttons='None';var $1=new tableau.base.widget.Dialog($0);$1.show();$1.layout();}
tableau.util.showConfirmationDialog=function(content,title,onYes,onNo){var $0={};$0.content=content;$0.title=title;$0.buttons='YesNo';$0.onYes=onYes;$0.onNo=onNo;var $1=new tableau.base.widget.Dialog($0);$1.show();$1.layout();}
tableau.util.transform=function(node,spec){var $0='';var $1=tab.$create_TransformSpec();$1.scaleX=1;$1.scaleY=1;$1.translateX=0;$1.translateY=0;$1.time=0;spec=dojo.mixin($1,(spec||tab.$create_TransformSpec()));if(!!spec.scale){spec.scaleX=spec.scaleY=spec.scale;}if(tableau.util.has3D){$0=(['translate3d(',spec.translateX.toString(),'px,',spec.translateY.toString(),'px, 0px)']).join('');}else{$0=(['translate(',spec.translateX.toString(),'px,',spec.translateY.toString(),'px)']).join('');}$0+=([' scale(',spec.scaleX.toString(),', ',spec.scaleY.toString(),')']).join('');if(ss.isValue(dojo.isIE)){if(dojo.isIE>=9){node.style['msTransform']=$0;}else if(spec.scaleX===1&&spec.scaleY===1){dojo.marginBox(node,{t:spec.translateY,l:spec.translateX});}return;}node.style['webkitTransitionProperty']='-webkit-transform';node.style['webkitTransitionTimingFunction']='cubic-bezier(0, 0, 0.25, 1)';node.style['webkitTransitionDuration']=spec.time+'ms';node.style['webkitTransform']=$0;node.style['MozTransitionProperty']='-moz-transform';node.style['MozTransitionTimingFunction']='cubic-bezier(0, 0, 0.25, 1)';node.style['MozTransitionDuration']=spec.time+'ms';node.style['MozTransform']=$0;}
tableau.util.defer=function(action){if(!tableau.util.bIsAnimationShown){tableau.util.$0.add(action);}else{action();}}
tableau.util.performDeferredCalls=function(){var $0=tableau.util.$0.length;for(var $1=0;$1<$0;$1++){window.setTimeout(tableau.util.$0[$1],$1);}tableau.util.$0.clear();tableau.util.bIsAnimationShown=true;}
tableau.util.localizeDojoLabeledControls=function(controlStringKeyPairs){var $0=controlStringKeyPairs;var $1=$0.length;for(var $2=0;$2<$1;$2++){var $3=$0[$2].first;var $4=$0[$2].second;if(ss.isValue($3)){$3.attr('label',tab.Strings.getString($4));}}}
tableau.util.createCheckBox=function(clickHandler,label,checkClass,tabIndex,isChecked){var $0=$('<label>').addClass(checkClass).append($('<span>').text(label)).prepend($("<input type='checkbox' "+((isChecked)?'checked':'')+'>').attr('tabindex',tabIndex.toString()));tab.ClickHandler.targetAndClick($0,clickHandler);return $0;}
tableau.util.createMobileCheckBox=function(changeHandler,label,checkClass,tabIndex,isChecked){var $0=$('<label>').addClass(checkClass);var $1=$('<div>').addClass('tabAuthCheckbox');$1.toggleClass('checked',isChecked).attr('tabindex',tabIndex.toString());$0.append($1);tab.ClickHandler.targetAndClick($0,function($p1_0){
$1.toggleClass('checked');changeHandler($1.hasClass('checked'));});$0.append($('<span>').text(label));return $0;}
tableau.util.parseUri=function(uri){var $0=document.createElement('a');if(ss.isNullOrUndefined(uri)){return null;}$0.href=uri;var $1={href:uri,host:$0.host,hostname:$0.hostname,pathname:$0.pathname,port:$0.port,protocol:$0.protocol,search:$0.search};return $1;}
tableau.util.setupTitleEllipsis=function(domTitleBar){var $0=domTitleBar.find('div');var $1=$0.children('span');var $2=null;var $3=$0.width();var $4=10;$3-=$4;for(var $5=0;$5<$1.length;$5++){var $6=$1[$5];var $7=$($6).width();$2=$6;if($7>$3){break;}$3-=$7;}if(ss.isValue($2)){$0.css('font-family',$2.style.fontFamily);$0.css('font-size',$2.style.fontSize);$0.css('line-height',$2.style.lineHeight);$0.css('color',$2.style.color);$0.css('font-weight',$2.style.fontWeight);$0.css('font-style',$2.style.fontStyle);$0.css('text-decoration',$2.style.textDecoration);}$0.css('text-overflow','ellipsis');$0.css('overflow','hidden');}
tableau.util.NoClickDelay=function(el){this.$0=el;this.$2=this;if(tab.BrowserSupport.get_touch()){this.$0.addEventListener('touchstart',this.$2,false);}}
tableau.util.NoClickDelay.prototype={$0:null,$1:false,$2:null,handleEvent:function(e){switch(e.type){case 'touchstart':this.$3(e);break;case 'touchmove':this.$4(e);break;case 'touchend':this.$5(e);break;}},$3:function($p0){$p0.preventDefault();this.$1=false;this.$0.addEventListener('touchmove',this.$2,false);this.$0.addEventListener('touchend',this.$2,false);},$4:function($p0){this.$1=true;},$5:function($p0){this.$0.removeEventListener('touchmove',this.$2,false);this.$0.removeEventListener('touchend',this.$2,false);if(!this.$1){var $0=document.elementFromPoint($p0.changedTouches[0].clientX,$p0.changedTouches[0].clientY);if($0.nodeType===3){$0=$0.parentNode;}var $1=document.createEvent('MouseEvents');$1.initEvent('click',true,true);$0.dispatchEvent($1);}}}
tab.URIUtil=function(){}
tab.URIUtil.absolutizeURI=function(uri){if(ss.isValue(uri)){uri=uri.trim();}if(String.isNullOrEmpty(uri)){return uri;}var $0=new RegExp('^([a-zA-Z0-9]+):(?!\\d+(/|$))');var $1=uri.match($0);if(ss.isValue($1)&&$1[1]!=='http'&&$1[1]!=='https'){return uri;}var $2='http://';var $3=new RegExp('^https:|^/?/?[a-zA-Z0-9.-]+:443(/|$)');if($3.test(uri)){$2='https://';}var $4=new RegExp('^(https?:)?/?/?');uri=uri.replace($4,$2);return uri;}
tab.ViewState2=function(){}
tab.ViewState2.prototype={newActive:null,oldActive:null,data:null}
tab.ViewController=function(sheetName,session,id){this.id=-1;this.$0=new tab.DisposableHolder();this.sheetName=sheetName;this.viewSession=session;this.id=id;this.$5();}
tab.ViewController.prototype={controller:null,sheetName:'',viewSession:null,active:false,imageCacheVersion:0,viewModified:false,viewWidget:null,get_cacheVersion:function(){return this.imageCacheVersion;},get_viewWidget:function(){return this.viewWidget;},get_viewSession:function(){return this.viewSession;},get_sheetName:function(){return this.sheetName;},get_id:function(){return this.id;},dispose:function(){this.destroy();},destroy:function(){this.viewWidget=null;this.$0.dispose();},setTiledViewer:function(tv){this.viewWidget=tv;},$1:function($p0){if(ss.isNullOrUndefined($p0)){return;}var $0=$p0.layoutStatus;var $1=$p0.primarySheet;if(ss.isNullOrUndefined($0)){return;}if(ss.isValue($0.isViewModified)&&$1===this.sheetName){this.viewModified=$0.isViewModified;}this.incrementCacheVersion();var $2=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),this.sheetName);if($2.get_isVisualValid()){this.viewWidget.doTiledViewerRefreshImages($2.get_cacheUrlInfo());this.get_viewSession().fireRefreshLegacyLegendImages($2.get_cacheUrlInfo());}},$2:function($p0){if(!ss.isValue($p0)){return;}if(ss.isValue($p0.data)){if(ss.isValue($p0.data.layoutStatus)){if(ss.isValue($p0.data.layoutStatus.isViewModified)){this.viewModified=$p0.data.layoutStatus.isViewModified;}}else{}}if($p0.oldActive===this.viewWidget){this.active=false;}else if($p0.newActive===this.viewWidget){this.active=true;}},incrementCacheVersion:function(){this.imageCacheVersion+=1;},$3:function($p0){if(!ss.isValue($p0.type)){return;}window.setTimeout(ss.Delegate.create(this,function(){
this.viewSession.fireEvent('refreshFilterModel',$p0);}),1);},$4:function($p0){if(!ss.isValue($p0.get_filters())){return;}var $enum1=ss.IEnumerator.getEnumerator($p0.get_filters());while($enum1.moveNext()){var $0=$enum1.current;this.$3($0.get_filterPresModel());}},$5:function(){var $0=this.viewSession;this.$0.add(new tab.SubscriptionDisposable($0.registerEventListener('activeViewChanged',ss.Delegate.create(this,this.$2))));var $1=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),this.sheetName);if(ss.isValue($1)){$1.add_newFilters(ss.Delegate.create(this,this.$4));this.$0.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
$1.remove_newFilters(ss.Delegate.create(this,this.$4));})));this.$4($1);}this.$0.add(new tab.SubscriptionDisposable($0.registerEventListener('selectionChanged',ss.Delegate.create(this,this.$1))));}}
tab.ApplicationViewModel=function(skipInit,layoutSession){this._connections=[];this._subscriptions=[];tab.ApplicationViewModel.initializeBase(this,[$(null)]);this.session=layoutSession;this.skipInit=skipInit;var $0=tabBootstrap.ViewerBootstrap.get_instance();if(ss.isNullOrUndefined($0)){throw new Error('tabBootstrap.ViewerBootstrap is undefined');}this.ts=new Date().getTime();if($0.get_hasBootstrapCompleted()){tab.XhrUtil.set_currentTabName(tsConfig.current_sheet_name);}tab.XhrUtil.guid=tsConfig.guid;tab.XhrUtil.parentID=tsConfig.parentID;this.$1_25();this.$1_8=new tab.ViewingToolbarCommands(this);this.$1_E=false;this.enableTextSelection();}
tab.ApplicationViewModel.$1_1E=function($p0,$p1){var $0=tab.ZoneViewModel.calculateZoneZIndex($p0);$($p1).css('z-index',$0.toString());}
tab.ApplicationViewModel.prototype={session:null,skipInit:false,$1_0:null,$1_1:null,$1_2:null,$1_3:null,$1_4:null,ts:0,$1_5:null,$1_6:false,$1_7:null,$1_8:null,$1_9:null,$1_A:null,$1_B:null,$1_C:null,$1_D:0,$1_E:false,$1_F:false,orientation:0,$1_10:false,get_autoUpdate:function(){return tab.ApplicationModel.get_instance().get_autoUpdate();},set_autoUpdate:function(value){tab.ApplicationModel.get_instance().set_autoUpdate(value);return value;},get_isDashboard:function(){return this.get_dashboardViewModel().get_isDashboard();},get_vizSize:function(){return tab.ApplicationModel.get_instance().get_workbook().get_outerDashboardPortSize();},get_session:function(){return this.session;},get_vFilterList:function(){return null;},get_clientContentSize:function(){return tabBootstrap.ViewerBootstrap.get_instance().getWebClientContentSize();},get_applicationPresModel:function(){return tab.ApplicationModel.get_instance().get_appPresModel();},get_requestURI:function(){return tsConfig.requestURI;},get_viewControllers:function(){if(ss.isValue(this.get_dashboardViewModel())){return this.get_dashboardViewModel().viewControllersList;}return [];},get_toolbarDisplayed:function(){return tabBootstrap.ViewerBootstrap.get_instance().toolbarDisplayed;},set_toolbarDisplayed:function(value){tabBootstrap.ViewerBootstrap.get_instance().toolbarDisplayed=value;if(value){if(!ss.isValue(this.get_toolbarContainer())){this.$1_23();}this.get_toolbarContainer().show();}else{this.get_toolbarContainer().hide();}return value;},get_invalid:function(){return tab.ApplicationModel.get_instance().get_invalid();},set_invalid:function(value){tab.ApplicationModel.get_instance().set_invalid(value);return value;},get_skipInit:function(){return this.skipInit;},get_toolbarCommands:function(){return this.$1_8;},get_toolbar:function(){return this.$1_1;},get_customViewsViewModel:function(){return (ss.isValue(this.$1_1))?this.$1_1.get_$1():null;},get_dashboardViewModel:function(){if(ss.isValue(this.$1_A)){return this.$1_A.get_dashboardViewModel();}return null;},get_$1_11:function(){return tab.Logger.getLoggerWithName((tab.ApplicationViewModel).get_name()+tsConfig.layoutid.toString());},get_domNode:function(){return this.$1_B.get_dom().domNode;},get_$1_12:function(){return this.$1_B.get_dom().bottomToolbar;},get_$1_13:function(){return this.$1_B.get_dom().topToolbar;},get_$1_14:function(){return this.$1_B.get_dom().watermarkParent;},get_$1_15:function(){return this.$1_B.get_dom().publicNote;},get_$1_16:function(){return this.$1_B.get_dom().viewCount;},get_$1_17:function(){return this.$1_B.get_dom().interpunct;},get_$1_18:function(){return this.$1_B.get_dom().sharePerspective;},get_$1_19:function(){return this.$1_B.get_dom().placeholder;},get_$1_1A:function(){return this.$1_B.get_dom().watermarkLink;},get_$1_1B:function(){return this.$1_B.get_dom().watermarkImage;},get_$1_1C:function(){return this.$1_B.get_toolbarIsBottom();},get_toolbarContainer:function(){return this.$1_B.get_toolbarContainer();},get_containerNode:function(){return this.$1_B.get_containerNode();},getLegacyMenus:function(){return this.$1_0;},startup:function(){this.$1_A=new tab.ApplicationViewModelReal(tab.ApplicationModel.get_instance());this.$1_B=tab.ObjectRegistry.newView(tab.ApplicationView,this.$1_A);this.$1_A.add_applicationUpdate(ss.Delegate.create(this,this.$1_30));this._connections.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_A.remove_applicationUpdate(ss.Delegate.create(this,this.$1_30));})));this.$1_21();this.resize(false);},destroyRecursive:function(preserveDom){this.destroy(preserveDom);},destroy:function(preserveDom){if(ss.isValue(this.$1_5)){window.clearTimeout(this.$1_5);this.$1_5=null;}if(ss.isValue(this.$1_2)){this.$1_2.destroyRecursive(false);}if(ss.isValue(this.$1_1)){this.$1_1.dispose();this.$1_1=null;this.$1_8.dispose();this.$1_8=null;}var $enum1=ss.IEnumerator.getEnumerator(this._connections);while($enum1.moveNext()){var $0=$enum1.current;$0.dispose();}this._connections.clear();var $enum2=ss.IEnumerator.getEnumerator(this._subscriptions);while($enum2.moveNext()){var $1=$enum2.current;dojo.unsubscribe($1);}if(ss.isValue(this.$1_A)){this.$1_A.dispose();this.$1_A=null;}$('body').unbind(this.createNamespacedEventName('mouseenter')).unbind(this.createNamespacedEventName('mouseleave'));this.dispose();},showShareDialog:function(){this.$1_3.css({opacity:1});this.$1_2.show();},saveSharedView:function(button){if(!this.$1_38()){var $0={};$0.button=button;this.$1_29($0);return;}tab.XhrUtil.guid=null;if(tsConfig.statefulURL){var $1=this.$1_2C();if($1==='null'||$1==null){$1='';}this.get_session().saveSharedView(button,$1,ss.Delegate.create(this,this.$1_29));}},doResize:function(){if(tsConfig.is_mobile){this.$1_46();}else{this.$1_45(!this.$1_6);}},$1_1D:function(){return this.makeExportPdfDialog(this.get_session());},createTapToInteractTransition:function(animateTransition,initialDelay){},createTapToInteractTouchHandler:function(tapToInteractElem){},makeAuthorByline:function(){return new tab.AuthorByline(tsConfig.workbook_repo_url);},resize:function(forceUpdate){if(tableau.base.widget.FilterPanel.measuringMetrics){return;}if(!forceUpdate&&ss.isValue(this.$1_7)){var $0=tabBootstrap.ViewerBootstrap.get_instance().getWebClientContentSize();if($0.w===this.$1_7.w&&$0.h===this.$1_7.h){this.$1_10=false;return;}if(this.$1_10){this.$1_7=$0;this.$1_10=false;return;}this.$1_10=true;}else{this.$1_10=false;}this.doResize();},onOrientationChange:function(){this.orientation=Math.abs(parseInt(window.orientation.toString(),10))%180;tabBootstrap.Utility.applySafari7CSSHackFix();this.resize(true);},doMeasureMetrics:function(){},$1_1F:function(){tab.CommandController.get().resetInvalidationHandlers();tab.CommandController.get().add_onUrlActionsResponse(tab.ActionUtils.launchActionUrls);this._connections.add(new tab.CallOnDispose(function(){
tab.CommandController.get().remove_onUrlActionsResponse(tab.ActionUtils.launchActionUrls);}));tab.CommandController.get().add_onInvalidation(ss.Delegate.create(this,this.$1_44));this._connections.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
tab.CommandController.get().remove_onInvalidation(ss.Delegate.create(this,this.$1_44));})));tab.CommandController.get().add_onBootstrapSuccess(ss.Delegate.create(this,this.$1_43));this._connections.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
tab.CommandController.get().remove_onBootstrapSuccess(ss.Delegate.create(this,this.$1_43));})));},$1_20:function($p0){if(ss.isValue($p0.target)){if($p0.target===this.get_domNode().get(0)||$p0.target===this.get_containerNode().get(0)||(ss.isValue(this.$1_1)&&$p0.target===this.$1_1.get_element().get(0))||$($p0.target).hasClass('wcLayoutContainer')){tab.SelectionClientCommands.clearAllSelections(tab.ModelUtils.findActiveOrDefaultVisual().get_worksheetName());this.$1_34();$p0.preventDefault();}}},$1_21:function(){$('.tabbedNavigationWrapper').after(this.get_domNode());this.get_domNode().data('tabViewer',this);var $0=new tab.vqlui$0();this.get_domNode().bind(this.createNamespacedEventName('contextmenu'),ss.Delegate.create(this,this.$1_3D)).bind(this.createNamespacedEventName('mousedown'),ss.Delegate.create($0,$0.$7)).bind(this.createNamespacedEventName('mouseup'),ss.Delegate.create($0,$0.$8));$0.add_$5(ss.Delegate.create(this,this.$1_20));this._connections.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
$0.remove_$5(ss.Delegate.create(this,this.$1_20));})));this.$1_B.onAddedToDom();$('body').bind(this.createNamespacedEventName('mouseenter'),ss.Delegate.create(this,this.$1_26)).bind(this.createNamespacedEventName('mouseleave'),ss.Delegate.create(this,this.$1_27));this.session.get_waitHandler().unlock();this.doMeasureMetrics();this.$1_2=new tableau.base.widget.ShareDialog({id:'share_dialog'});this.$1_3=this.get_domNode().find('#share_dialog').replaceWith(this.$1_2.domNode);this.$1_23();this.$1_31();tab.BaseSession.linkTarget=tsConfig.linktarget;this._subscriptions.add(dojo.subscribe('onDoLaunchAuthoring',ss.Delegate.create(this,this.$1_28)));this._subscriptions.add(dojo.subscribe('newGuid',ss.Delegate.create(this,this.$1_29)));this.$1_1F();if(this.$1_22()){this.$1_24();}},$1_22:function(){return tsConfig.show_byline;},$1_23:function(){this.$1_B.get_unusedToolbarContainer().hide();if(this.get_toolbarDisplayed()){this.get_toolbarContainer().show();}else{this.get_toolbarContainer().hide();}this.get_toolbarContainer().addClass('tab-toolbar-container');this.get_toolbarContainer().css('visibility','hidden');this.$1_1=this.makeViewingToolbar(!this.get_$1_1C());this.$1_1.createItems();this.get_toolbarContainer().append(this.$1_1.get_element());this.$1_1.bindEvents();this._subscriptions.add(dojo.subscribe('modifiedSheetsChanged',ss.Delegate.create(this,this.$1_2F)));},$1_24:function(){this.$1_C=this.makeAuthorByline();this.get_$1_14().append(this.$1_C.get_element());},$1_25:function(){if(tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()){this._subscriptions.add(this.session.registerEventListener('activeViewChanged',ss.Delegate.create(this,this.$1_33)));}},$1_26:function($p0){this.get_domNode().addClass('mousePresent');},$1_27:function($p0){this.get_domNode().removeClass('mousePresent');},$1_28:function($p0){this.get_session().launchEditing(this.$1_9);},$1_29:function($p0){var $0=$p0;if(!ss.isValue($0)){return;}if($0.button==='link'){this.$1_3C();}else if($0.button==='facebook'){tab.Social.facebookPopup(tsConfig.facebookAppID,this.$1_39(),this.$1_2B(),tsConfig.shareDescription,tsConfig.facebookDescription,this.$1_2A());}else if($0.button==='twitter'){tab.Social.twitterPopup(this.$1_39(),tsConfig.shareDescription);}else if($0.button==='mail'){tab.Social.mailTo(this.$1_39(),tsConfig.shareDescription);}},$1_2A:function(){if(ss.isValue(tsConfig.facebookRedirectURI)){return tsConfig.facebookRedirectURI;}return 'http://facebook.com';},$1_2B:function(){var $0=tab.XhrUtil.guid;if(this.$1_38()&&ss.isValue($0)){var $1=this.$1_3B();var $2=$1.split('/');$2[$2.length-1]='thumb.png';var $3=$2.join('/');$3+='?vizqlid='+this.get_session().get_id();return $3;}return tsConfig.baseViewThumbLink;},$1_2C:function(){if(!String.isNullOrEmpty(tsConfig.primaryContentUrl)){return tsConfig.primaryContentUrl;}if(window.self===window.top){return null;}var $0=tableau.util.parseUri(document.referrer);if(!ss.isValue($0)||(ss.isValue($0['hostname'])&&$0['hostname']===window.location.hostname)){return null;}return document.referrer;},$1_2D:function(){return this.$1_1.areAnySheetModified(tab.ModelUtils.findContentDashboard().get_dashboardPresModel().modifiedSheets);},$1_2E:function(){if(!this.$1_38()||!this.$1_2D()){return;}if(this.$1_3F()){this.get_$1_17().css('display','');}if(this.$1_E){return;}this.$1_E=true;var $0='Share your perspective';this.get_$1_18().html($0);this.get_$1_18().fadeIn();},$1_2F:function($p0){if(this.$1_38()){this.$1_2E();}},$1_30:function(){if(ss.isNullOrUndefined(this.get_dashboardViewModel())){return;}if(this.$1_3F()){this.$1_40();}if(ss.isValue(this.get_dashboardViewModel())&&Object.getKeyCount(this.get_dashboardViewModel().viewControllersBySheet)===1){this.$1_35(0);}this.$1_31();var $0=tab.DomUtil.getContentBox(this.get_$1_19().get(0));this.$1_36($0);if(!this.get_skipInit()&&!this.$1_F){this.$1_3C();this.session.get_waitHandler().onNextHide(ss.Delegate.create(this,this.$1_49));this.session.performPostLoadOperations(tsConfig.current_sheet_name,ss.Delegate.create(this,this.$1_42));this.$1_32();}this.$1_F=true;this.resize(false);dojo.publish('layoutUpdated',null);},$1_31:function(){if(ss.isNullOrUndefined(this.get_dashboardViewModel())){return;}var $0=this.get_dashboardViewModel().get_dashboardModel().get_dashboardPresModel();this.$1_0=$0.legacyMenus;if(ss.isValue(this.$1_1)&&tsConfig.toolbarvis){this.$1_1.updateMenus(this.$1_0);this.$1_1.setAutoUpdate(this.get_autoUpdate());var $1=tab.DomUtil.getContentBox(this.get_$1_19().get(0));if(tsConfig.isPublic&&!tsConfig.showRefreshData){this.$1_1.hideRefreshButtons();}if(!this.get_$1_1C()&&this.$1_3E()){this.$1_1.setStyle('background-color','transparent');}else{this.$1_1.setStyles($0.cssAttrs);this.$1_1.setStyle('max-width',$1.w+'px');}this.$1_1.layout();}},$1_32:function(){if(tsConfig.showLytebox){$('#primaryContent').attr('src',this.$1_2C());}},$1_33:function($p0){if(tsConfig.is_authoring||tsConfig.isPublic){return;}var $0=$p0;if(this.get_viewControllers().length<=1){return;}this.$1_9=(ss.isValue($0)&&ss.isValue($0.newActive))?$0.newActive.get_sheetid():null;},$1_34:function(){if(this.get_viewControllers().length<=1){return;}this.$1_35();},$1_35:function($p0,$p1){var $0={data:$p1,oldActive:null,newActive:null};var $1=null;var $2=null;if(ss.isValue(this.$1_4)){$1=this.$1_4;$0['oldActive']=$1.get_viewWidget();}if(ss.isValue($p0)){$2=this.get_viewControllers()[$p0];$0['newActive']=$2.get_viewWidget();}if($2===$1){return;}this.$1_4=$2;if(ss.isValue(this.$1_1)){this.$1_1.updateActiveView((ss.isValue($2))?$2.get_viewSession():null);}if(this.get_autoUpdate()||!this.get_invalid()){var $3=$p1;if(ss.isValue($3)&&ss.isValue($3.layoutStatus)&&ss.isValue(this.$1_1)&&tsConfig.toolbarvis){this.$1_1.updateMenus($3.layoutStatus.legacyMenus);}this.session.fireEvent('activeViewChanged',$0);}},$1_36:function($p0){var $0=(ss.isValue(tabBootstrap.ViewerBootstrap.get_instance().location))?tabBootstrap.ViewerBootstrap.get_instance().location.toString():'';if(!tsConfig.watermarkdisplay){return;}this.get_$1_14().css({display:'block',width:$p0.w+'px'});this.get_$1_1A().prop('href',tsConfig.watermarklink+'?ref='+$0.split('?')[0]);this.get_$1_1B().prop('src',tsConfig.watermarklogo);if(ss.isValue(this.$1_C)&&this.$1_22()){this.$1_C.displayAuthorByline(this.get_$1_14().width());}},$1_37:function(){var $0=tab.$create_VizParameterInfo();$0.toolbar=tsConfig.toolbarvis;$0.toolbar_default=tsConfig.toolbarvisDefault;$0.show_tabs=this.$1_3E();$0.show_tabs_default=tsConfig.showTabsDefault;$0.show_view_count=this.$1_3F();$0.show_view_count_default=tsConfig.showViewCountDefault;return $0;},$1_38:function(){if(!tsConfig.isPublic||!tsConfig.statefulURL){return false;}if(tsConfig.fromWg||tsConfig.previewMode){return this.$1_2D();}return true;},$1_39:function(){return tab.ShareDialogUtil.getShareUrl(this.$1_3A(),this.$1_37());},$1_3A:function(){var $0=(tsConfig.single_frame)?window.location:window.parent.location;var $1=tab.XhrUtil.guid;var $2=$0.protocol+'//'+$0.hostname+'/shared/';if(this.$1_38()&&ss.isValue($1)){return $2+$1;}if(!tab.MiscUtil.isNullOrEmpty(tsConfig.guid)){return $2+tsConfig.guid;}return tsConfig.requestURI;},$1_3B:function(){var $0=tab.XhrUtil.guid;var $1=tsConfig.staticImage;if(!ss.isValue($1)){return '';}if(this.$1_38()&&ss.isValue($0)){var $2=$1.indexOf('/images/')+8;var $3=$1.substr(0,$2);$1=$3+$0.substr(0,2)+'/'+$0+'/1_rss.png';}return $1;},$1_3C:function(){var $0=tab.$create_ShareSettings();$0.request=this.$1_3A();$0.blog=this.$1_2C();$0.title=tsConfig.embeddedTitle;$0.beaker=tsConfig.isPublic;$0.search=tabBootstrap.ViewerBootstrap.get_instance().location.search;$0.static_image=this.$1_3B();$0.width=this.get_vizSize().w;$0.height=this.get_vizSize().h;$0.controller_id=tsConfig.repositoryUrl;$0.watermark_link=tsConfig.watermarklink;$0.toolbar_bottom=this.get_$1_1C();$0.watermark_image=tsConfig.watermarklogo;$0.server_name=tsConfig.serverName;$0.server_logo=tsConfig.serverLogo;$0.tabs_allowed=tsConfig.tabs_allowed;$0.is_stateful_url=this.$1_38();$0.api_url='/javascripts/api/viz_v1.js';$0.site_root=tsConfig.site_root;$0.vizParameterInfo=this.$1_37();tab.ShareDialogUtil.setupShareDialog($0);},$1_3D:function($p0){var $0=$($p0.target);if(!$0.filter('input[type=text]').length&&!$0.filter('textarea').length){$p0.preventDefault();$p0.stopPropagation();}},$1_3E:function(){return tabBootstrap.ViewerBootstrap.get_instance().shouldShowTabs();},$1_3F:function(){return tsConfig.isPublic&&tsConfig.showViewCount&&this.$1_D>tsConfig.viewCountThreshold;},$1_40:function(){var $0=tableau.format.formatIntAuto(this.$1_D,'t',',','3:0');this.get_$1_16().html($0+' views');},$1_41:function($p0){this.$1_D=$p0;if(this.$1_3F()){this.$1_40();this.$1_2E();}},$1_42:function($p0){var $0=$p0;if(ss.isValue($0['viewCount'])){this.$1_41(parseInt($0['viewCount'],10));}},$1_43:function($p0,$p1){tsConfig.layoutid=$p0.layoutId;var $0=$p0.newSessionId;if(!tab.MiscUtil.isNullOrEmpty($0)){tsConfig.sessionid=$0;}var $1=$p0.newClientNum;if(!tab.MiscUtil.isNullOrEmpty($1)){var $5=tab.MiscUtil.getLocationWindow();if(tab.BrowserSupport.get_historyApi()){tab.HistoryUtil.replaceState($5,null,null,'#'+$1);}else{$5.location.hash='#'+$1;}}this.session.set_layoutId($p0.layoutId.toString());this._subscriptions.add(this.session.registerEventListener('activeViewChanged',ss.Delegate.create(this,this.$1_33)));tsConfig.current_sheet_name=$p0.sheetName;tab.XhrUtil.set_currentTabName(tsConfig.current_sheet_name.toString());tsConfig.workbook_allow_subscriptions=$p0.allowSubscriptions;if(tsConfig.workbook_allow_subscriptions&&tsConfig.allow_subscriptions&&!tsConfig.is_guest){this.get_toolbar().showSubscribeButton();}var $2=$p0.worldUpdate.applicationPresModel;var $3=tab.ApplicationModel.get_instance();$3.update($2);$p1.checkpointAppPresModel();var $4=this.session.getBootstrapRequestLayoutModelSuccessFunction($p0.sheetName);$4($2);tab.Model.fireDeferredEvents(tab.CommandController.handleBootstrapException);},$1_44:function($p0){var $0=$p0.layoutStatus;if(ss.isValue($p0.primarySheet)){var $1=this.get_dashboardViewModel().viewControllersBySheet['v_'+$p0.primarySheet];if(ss.isValue($1)){this.$1_35($1.get_id(),$p0);}}this.set_invalid((ss.isNullOrUndefined($0.invalidatedLayout))?false:$0.invalidatedLayout);if(ss.isValue($0.vizStateList)&&$0.vizStateList.length>0){var $2=[];var $enum1=ss.IEnumerator.getEnumerator($0.vizStateList);while($enum1.moveNext()){var $3=$enum1.current;if(!$2.contains($3.sheet)&&$3.vizRegionRectList.length>0){$2.add($3.sheet);}}var $enum2=ss.IEnumerator.getEnumerator($2);while($enum2.moveNext()){var $4=$enum2.current;var $5=_.find(this.get_viewControllers(),function($p1_0){
return $p1_0.get_sheetName()===$4;});if(ss.isValue($5)){$5.get_viewSession().fireSelectionChanged($p0);}}}},$1_45:function($p0){var $0=($p0)?0:1000;if(ss.isValue(this.$1_5)){window.clearTimeout(this.$1_5);this.$1_5=null;}this.$1_5=window.setTimeout(ss.Delegate.create(this,this.$1_46),$0);},$1_46:function(){if(!this.session.get_waitHandler().isBusy()&&(!this.$1_6||ss.isValue(tsConfig.layoutid))&&ss.isValue(this.$1_A)){this.$1_47();return;}if(ss.isValue(this.$1_5)){window.clearTimeout(this.$1_5);this.$1_5=null;}this.$1_5=window.setTimeout(ss.Delegate.create(this,this.$1_46),100);},$1_47:function(){this.$1_7=tabBootstrap.ViewerBootstrap.get_instance().getWebClientContentSize();var $0=tabBootstrap.ViewerBootstrap.get_instance().getWebClientContentSize();var $1=tabBootstrap.ViewerBootstrap.get_instance().get_tabsHeight();var $2=tab.$create_Rect(0,$1,$0.w,$0.h);var $3=$1;if(!this.get_$1_1C()&&!tsConfig.is_authoring){$3+=tabBootstrap.ViewerBootstrap.get_instance().toolbarHeight;$2.t+=tabBootstrap.ViewerBootstrap.get_instance().toolbarHeight;}this.$1_B.positionDashboardView($2);tab.DomUtil.setContentBox(this.get_$1_19().get(0),$2);this.$1_48($2);tab.CommandController.get().refreshLayout();if(ss.isValue(this.$1_1)&&tsConfig.toolbarContainerVis){this.get_toolbarContainer().css('visibility','visible');if(this.get_$1_1C()||!this.$1_3E()){this.$1_1.setStyle('max-width',$2.w+'px');}}this.$1_36($2);this.$1_6=true;},$1_48:function($p0){if(!tabBootstrap.ViewerBootstrap.get_instance().get_hasBootstrapCompleted()||(this.skipInit&&!this.$1_6)){return;}var $0=$.extend(true,{},tabBootstrap.ViewerBootstrap.get_instance().metricsUsedForInitialLayout);var $1={};$1.x=$p0.w;$1.y=$p0.h;var $2={};$2.clientDashboardUiMetrics=$0.toPresModel();tab.SheetClientCommands.setPortSize($1,$2);},$1_49:function(){var $0=450;var $1=$('#staticImage');var $2=$('#loadingGlassPane');var $3=$('#loadingSpinner');var $4=$('#tapToInteract');this.createTapToInteractTouchHandler($4);if(tsConfig.animateTransition){$3.fadeOut($0);$1.fadeOut($0);$2.fadeOut($0,function(){
$(this).css('cursor','default');});if($2.size()>0){this.createTapToInteractTransition(tsConfig.animateTransition,$0);}}else{$3.css('display','none');$1.css('display','none');$2.css('display','none');this.createTapToInteractTransition(tsConfig.animateTransition,0);}}}
tab.vqlui$0=function(){}
tab.vqlui$0.prototype={$2:0,$3:0,$4:null,add_$5:function($p0){this.$6=ss.Delegate.combine(this.$6,$p0);},remove_$5:function($p0){this.$6=ss.Delegate.remove(this.$6,$p0);},$6:null,$7:function($p0){this.$4=Date.get_now();this.$2=$p0.pageX;this.$3=$p0.pageY;},$8:function($p0){this.$9($p0);},$9:function($p0){var $0=Date.get_now()-this.$4;var $1=Math.abs($p0.pageX-this.$2);var $2=Math.abs($p0.pageY-this.$3);if($0<=600&&$1<=10&&$2<=10&&ss.isValue(this.$6)){this.$6($p0);}}}
tab.ApplicationViewModelReal=function(applicationModel){tab.ApplicationViewModelReal.initializeBase(this);this.$1_0=applicationModel;this.$1_0.add_newWorkbook(ss.Delegate.create(this,this.handleNewWorkbook));if(ss.isValue(this.$1_0.get_workbook())){this.handleNewWorkbook(this.$1_0.get_workbook());}this.$1_0.add_applicationUpdate(ss.Delegate.create(this,this.handleApplicationUpdate));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_applicationUpdate(ss.Delegate.create(this,this.handleApplicationUpdate));})));}
tab.ApplicationViewModelReal.prototype={$1_0:null,$1_1:null,add_newDashboard:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_newDashboard:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,add_applicationUpdate:function(value){this.$1_3=ss.Delegate.combine(this.$1_3,value);},remove_applicationUpdate:function(value){this.$1_3=ss.Delegate.remove(this.$1_3,value);},$1_3:null,get_dashboardViewModel:function(){return this.$1_1.get_dashboardViewModel();},dispose:function(){this.$1_4();this.$1_0.remove_newWorkbook(ss.Delegate.create(this,this.handleNewWorkbook));tab.ApplicationViewModelReal.callBaseMethod(this, 'dispose');},handleNewWorkbook:function(workbookModel){this.$1_4();this.$1_1=new tab.WorkbookViewModel(workbookModel);this.$1_1.add_newDashboard(ss.Delegate.create(this,this.handleNewDashboard));this.handleNewDashboard();},$1_4:function(){if(ss.isValue(this.$1_1)){this.$1_1.remove_newDashboard(ss.Delegate.create(this,this.handleNewDashboard));this.$1_1.dispose();this.$1_1=null;}},handleApplicationUpdate:function(){this.raiseActionEvent(this.$1_3);},handleNewDashboard:function(){if(ss.isValue(this.$1_1.get_dashboardViewModel())){this.raiseActionEvent(this.$1_2);}}}
tab.ConfirmationViewModel=function(){this.$1_1=tab.Strings.ConfirmationButtonConfirm;this.$1_2=tab.Strings.ConfirmationButtonDeny;this.$1_3=tab.Strings.ConfirmationTitle;tab.ConfirmationViewModel.initializeBase(this);}
tab.ConfirmationViewModel.create=function(messageHtml,callback){var $0=new tab.ConfirmationViewModel();$0.set_messageHtml(messageHtml);$0.disposeOnHide();$0.add_hidden(callback);return $0;}
tab.ConfirmationViewModel.showConfirmation=function(messageHtml,callback){var $0=tab.ConfirmationViewModel.create(messageHtml,callback);$0.show();}
tab.ConfirmationViewModel.prototype={$1_0:null,$1_4:false,$1_5:null,add_shown:function(value){this.$1_6=ss.Delegate.combine(this.$1_6,value);},remove_shown:function(value){this.$1_6=ss.Delegate.remove(this.$1_6,value);},$1_6:null,add_hidden:function(value){this.$1_7=ss.Delegate.combine(this.$1_7,value);},remove_hidden:function(value){this.$1_7=ss.Delegate.remove(this.$1_7,value);},$1_7:null,get_messageHtml:function(){return this.$1_0;},set_messageHtml:function(value){this.$1_0=value;return value;},get_visible:function(){return this.$1_4;},get_confirmText:function(){return this.$1_1;},set_confirmText:function(value){this.$1_1=value;return value;},get_denyText:function(){return this.$1_2;},set_denyText:function(value){this.$1_2=value;return value;},get_titleText:function(){return this.$1_3;},set_titleText:function(value){this.$1_3=value;return value;},dispose:function(){this.$1_5=null;this.$1_6=null;this.$1_7=null;tab.ConfirmationViewModel.callBaseMethod(this, 'dispose');},show:function(){if(this.$1_4){return;}if(ss.isNullOrUndefined(this.$1_5)){this.$1_5=tab.ObjectRegistry.newView(tab.ConfirmationView,this);}this.$1_4=true;this.raiseActionEvent(this.$1_6);},disposeOnHide:function(){this.add_hidden(ss.Delegate.create(this,function(){
this.dispose();}));},confirm:function(){this.$1_8('confirm');},deny:function(){this.$1_8('deny');},cancel:function(){this.$1_8('cancel');},$1_8:function($p0){if(!this.$1_4){return;}this.$1_4=false;if(ss.isValue(this.$1_7)){this.$1_7($p0);}}}
tab.FlipboardNavigatorViewModel=function(flipboardNavigatorModel){tab.FlipboardNavigatorViewModel.initializeBase(this);this.$1_0=flipboardNavigatorModel;this.$1_0.add_newStoryPoint(ss.Delegate.create(this,this.handleNewStoryPoint));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_newStoryPoint(ss.Delegate.create(this,this.handleNewStoryPoint));})));}
tab.FlipboardNavigatorViewModel.prototype={$1_0:null,add_newStoryPoint:function(value){this.$1_1=ss.Delegate.combine(this.$1_1,value);},remove_newStoryPoint:function(value){this.$1_1=ss.Delegate.remove(this.$1_1,value);},$1_1:null,get_flipboardNavigatorModel:function(){return this.$1_0;},get_previousDisabled:function(){return this.getCurrentPointIndex()<=0;},get_nextDisabled:function(){return this.getCurrentPointIndex()>=this.$1_0.get_numberOfPoints()-1;},get_showArrows:function(){return this.get_numberOfPoints()>1;},get_numberOfPoints:function(){return this.$1_0.get_numberOfPoints();},getStoryPoints:function(){return this.$1_0.getStoryPoints();},getCurrentPointIndex:function(){for(var $0=0;$0<this.get_numberOfPoints();$0++){if(this.getStoryPoints()[$0].storyPointId===this.$1_0.get_currentPoint()){return $0;}}throw new Error('Current story point:'+this.$1_0.get_currentPoint()+' not found in list of story points.');},handleNewStoryPoint:function(){this.raiseActionEvent(this.$1_1);},clickNext:function(){if(this.get_nextDisabled()){return;}this.clickStoryPoint(this.getCurrentPointIndex()+1);},clickPrevious:function(){if(this.get_previousDisabled()){return;}this.clickStoryPoint(this.getCurrentPointIndex()-1);},clickStoryPoint:function(pointIndex){tab.StoryClientCommands.setActiveStoryPoint(this.getStoryPoints()[pointIndex].storyPointId,this.$1_0);}}
tab.FlipboardViewModel=function(flipboardModel){tab.FlipboardViewModel.initializeBase(this);this.$1_0=flipboardModel;this.$1_0.get_storyPointModel().add_newStoryPoint(ss.Delegate.create(this,this.handleNewStoryPoint));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.get_storyPointModel().remove_newStoryPoint(ss.Delegate.create(this,this.handleNewStoryPoint));})));this.$1_0.get_storyPointModel().add_dashboardDisposal(ss.Delegate.create(this,this.disposeDashboard));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.get_storyPointModel().remove_dashboardDisposal(ss.Delegate.create(this,this.disposeDashboard));})));if(ss.isValue(this.get_flipboardModel().get_dashboardModel())){this.handleNewStoryPoint();}}
tab.FlipboardViewModel.prototype={$1_0:null,$1_1:null,add_newStoryPoint:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_newStoryPoint:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,get_flipboardModel:function(){return this.$1_0;},get_dashboardViewModel:function(){return this.$1_1;},get_dashboardPresModel:function(){return this.get_flipboardModel().get_dashboardModel().get_dashboardPresModel();},handleNewStoryPoint:function(){this.disposeDashboard();if(ss.isValue(this.get_dashboardPresModel())){this.$1_1=new tab.DashboardViewModel(this.get_flipboardModel().get_dashboardModel());this.raiseActionEvent(this.$1_2);}},dispose:function(){this.disposeDashboard();this.get_flipboardModel().get_storyPointModel().remove_newStoryPoint(ss.Delegate.create(this,this.handleNewStoryPoint));tab.FlipboardViewModel.callBaseMethod(this, 'dispose');},disposeDashboard:function(){if(ss.isValue(this.get_dashboardViewModel())){this.$1_1.dispose();this.$1_1=null;}}}
tab.ParameterControlViewModel=function(parameterCtrlModel){tab.ParameterControlViewModel.initializeBase(this);this.$1_0=parameterCtrlModel;this.$1_0.add_newParameterCtrl(ss.Delegate.create(this,this.handleNewParameterControl));this.$1_0.get_zoneModel().add_resizeZone(ss.Delegate.create(this,this.handleParentZoneResized));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_newParameterCtrl(ss.Delegate.create(this,this.handleNewParameterControl));})));}
tab.ParameterControlViewModel.prototype={$1_0:null,add_newParameterControl:function(value){this.$1_1=ss.Delegate.combine(this.$1_1,value);},remove_newParameterControl:function(value){this.$1_1=ss.Delegate.remove(this.$1_1,value);},$1_1:null,add_resized:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_resized:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,get_parameterCtrlModel:function(){return this.$1_0;},get_frame:function(){return this.$1_0.get_frame();},get_zone:function(){return this.$1_0.get_zone();},get_viewSession:function(){return tab.ModelUtils.getViewSession(this.get_zone().sheet);},get_layoutSession:function(){return tab.CommandController.get().get_legacySession();},get_hasBorder:function(){return this.$1_0.get_zoneModel().get_hasBorder();},handleNewParameterControl:function(presModel){this.raiseActionEvent(this.$1_1);},handleParentZoneResized:function(){this.raiseActionEvent(this.$1_2);}}
tab.QuickFilterViewModel=function(quickFilterModel){tab.QuickFilterViewModel.initializeBase(this);this.$1_0=quickFilterModel;this.$1_0.add_newQuickFilter(ss.Delegate.create(this,this.handleNewQuickFilter));this.$1_0.get_zoneModel().add_resizeZone(ss.Delegate.create(this,this.handleParentZoneResized));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_newQuickFilter(ss.Delegate.create(this,this.handleNewQuickFilter));})));}
tab.QuickFilterViewModel.prototype={$1_0:null,add_newQuickFilter:function(value){this.$1_1=ss.Delegate.combine(this.$1_1,value);},remove_newQuickFilter:function(value){this.$1_1=ss.Delegate.remove(this.$1_1,value);},$1_1:null,add_resized:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_resized:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,get_quickFilterModel:function(){return this.$1_0;},get_frame:function(){return this.$1_0.get_frame();},get_zone:function(){return this.$1_0.get_zone();},get_quickFilterPresModel:function(){return this.$1_0.get_quickFilterPresModel();},get_viewSession:function(){return tab.ModelUtils.getViewSession(this.get_zone().sheet);},get_layoutSession:function(){return tab.CommandController.get().get_legacySession();},get_hasBorder:function(){return this.$1_0.get_zoneModel().get_hasBorder();},handleNewQuickFilter:function(presModel){this.raiseActionEvent(this.$1_1);},handleParentZoneResized:function(){this.raiseActionEvent(this.$1_2);}}
tab.QuantitativeColorLegendViewModel=function(quantColorLegendModel,worksheetId,zoneVM){tab.QuantitativeColorLegendViewModel.initializeBase(this,[worksheetId,zoneVM]);this.$1_9=quantColorLegendModel;this.$1_9.add_legendChanged(ss.Delegate.create(this,this.$1_B));}
tab.QuantitativeColorLegendViewModel.prototype={$1_9:null,get_quantColorLegendModel:function(){return this.$1_9;},get_quantColorLegendPresModel:function(){return this.$1_9.get_quantColorLegendPresModel();},get_titleInline:function(){var $0=this.get_$1_4();$0.h=Math.max(0,$0.h-(2*this.get_$1_A()));$0.w=Math.max(0,$0.w-(2*this.get_$1_A()));if(!this.get_quantColorLegendPresModel().quantitativeLegendLayout.titleInline&&!$0.h&&$0.w>0){return true;}else{return this.get_quantColorLegendPresModel().quantitativeLegendLayout.titleInline;}},get_rampColorSamplesAsColorModels:function(){var $0=new Array(0);var $1=this.get_quantColorLegendPresModel().rampColorSamples;if(ss.isValue($1)){var $2=this.get_quantColorLegendPresModel().colorTransparencyValue/255;$0=new Array($1.length);for(var $3=0;$3<$1.length;++$3){$0[$3]=tab.ColorModel.fromColorModelPlusAlpha(tab.ColorModel.fromColorCode($1[$3]),$2).toString();}}return $0;},get_$1_A:function(){var $0=this.get_quantColorLegendPresModel().styledBox.uw;if(this.get_quantColorLegendPresModel().styledBox.borderStyle==='bs-none'){$0=0;}return $0;},dispose:function(){this.$1_9.remove_legendChanged(ss.Delegate.create(this,this.$1_B));tab.QuantitativeColorLegendViewModel.callBaseMethod(this, 'dispose');},$1_B:function(){this.notifyPropertyChanged('ModelChanged');}}
tab.ImageZoneViewModel=function(imageZoneModel){tab.ImageZoneViewModel.initializeBase(this);this.$1_0=imageZoneModel;this.$1_0.add_newImageZone(ss.Delegate.create(this,this.handleNewImageZone));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_newImageZone(ss.Delegate.create(this,this.handleNewImageZone));})));}
tab.ImageZoneViewModel.prototype={$1_0:null,add_newImageZone:function(value){this.$1_1=ss.Delegate.combine(this.$1_1,value);},remove_newImageZone:function(value){this.$1_1=ss.Delegate.remove(this.$1_1,value);},$1_1:null,get_imageZoneModel:function(){return this.$1_0;},get_zonePresModel:function(){return this.$1_0.get_zone();},get_imageZonePresModel:function(){return this.$1_0.get_presModel();},get_imageUrl:function(){var $0=tab.CommandController.get().get_legacySession();var $1=$0.formatDashboardTempfileReference(this.get_imageZonePresModel().imageKey,true,false);return $1;},handleNewImageZone:function(){if(ss.isValue(this.$1_1)){this.$1_1();}}}
tab.LegendBaseViewModel=function(worksheetId,zoneVM){tab.LegendBaseViewModel.initializeBase(this);this.$1_0=worksheetId;this.$1_1=zoneVM;this.$1_1.add_propertyChanged(ss.Delegate.create(this,this.$1_7));this.$1_1.add_resizeZone(ss.Delegate.create(this,this.$1_8));this.$1_7(this.$1_1,new tab.PropertyChangedEventArgs('newZoneParent'));}
tab.LegendBaseViewModel.prototype={$1_0:null,$1_1:null,$1_2:null,get_$1_3:function(){var $0=null;if(ss.isValue(this.$1_1)){$0=tab.$create_Size(this.$1_1.get_width(),this.$1_1.get_height());}return $0;},get_$1_4:function(){var $0=null;if(ss.isValue(this.$1_1)){$0=this.$1_1.get_titleSize();}return $0;},get_$1_5:function(){return this.$1_0;},get_$1_6:function(){return this.$1_1.get_zoneId();},get_visualModel:function(){if(ss.isNullOrUndefined(this.$1_2)){this.$1_2=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),this.get_$1_5());}return this.$1_2;},get_parentZoneVM:function(){return this.$1_1;},dispose:function(){if(ss.isValue(this.$1_1)){this.$1_1.remove_propertyChanged(ss.Delegate.create(this,this.$1_7));this.$1_1.remove_resizeZone(ss.Delegate.create(this,this.$1_8));}tab.LegendBaseViewModel.callBaseMethod(this, 'dispose');},$1_7:function($p0,$p1){this.notifyPropertyChanged($p1.get_propertyName());},$1_8:function(){this.notifyPropertyChanged('ParentZoneSizeChanged');}}
tab.WebZoneViewModel=function(webZoneModel){tab.WebZoneViewModel.initializeBase(this);this.$1_0=webZoneModel;this.$1_0.add_newWebZone(ss.Delegate.create(this,this.handleNewWebZone));}
tab.WebZoneViewModel.prototype={$1_0:null,add_newWebZone:function(value){this.$1_1=ss.Delegate.combine(this.$1_1,value);},remove_newWebZone:function(value){this.$1_1=ss.Delegate.remove(this.$1_1,value);},$1_1:null,get_webZoneModel:function(){return this.$1_0;},handleNewWebZone:function(){this.$1_2();},$1_2:function(){if(ss.isValue(this.$1_1)){this.$1_1();}}}
tab.CategoricalLegendViewModel=function(catLegendModel,type,worksheetId,zoneVM){tab.CategoricalLegendViewModel.initializeBase(this,[worksheetId,zoneVM]);this.legendType=type;this.$1_B=catLegendModel;this.$1_B.add_legendChanged(ss.Delegate.create(this,this.$1_19));var $0=this.get_visualModel();this.$1_C=$0.get_selectionsModel().getLegendSelection(this.get_legendTypeEnum(),this.get_$1_F());this.$1_C.add_newSelection(ss.Delegate.create(this,this.$1_1A));this.$1_D=$0.get_brushingsModel().getLegendSelection(this.get_legendTypeEnum(),this.get_$1_F());this.$1_D.add_newSelection(ss.Delegate.create(this,this.$1_1A));this.$1_E=(this.legendType==='color')?tab.ColorModel.fromColorCode(this.get_$1_12().swatchBgColor):this.get_$1_11();}
tab.CategoricalLegendViewModel.prototype={legendType:null,$1_B:null,$1_C:null,$1_D:null,$1_E:null,get_catLegendModel:function(){return this.$1_B;},get_legendTypeEnum:function(){switch(this.legendType){case 'color':return 'color';case 'shape':return 'shape';case 'size':return 'size';case 'map':return 'map';}return 'color';},get_categoricalLegendPM:function(){return this.$1_B.get_catLegendPresModel();},get_numLegendItems:function(){var $0=this.get_catLegendModel().get_items();return (ss.isNullOrUndefined($0))?0:$0.length;},get_titleInline:function(){var $0=this.get_$1_4();$0.h=Math.max(0,$0.h-(2*this.get_$1_16()));$0.w=Math.max(0,$0.w-(2*this.get_$1_16()));if(!this.get_categoricalLegendPM().catLegendLayout.titleInline&&!$0.h&&$0.w>0){return true;}else{return this.get_categoricalLegendPM().catLegendLayout.titleInline;}},get_$1_F:function(){return this.get_catLegendModel().get_legendNames();},get_$1_10:function(){return (this.$1_E||new tab.ColorModel(255,255,255,1));},get_$1_11:function(){var $0=this.get_categoricalLegendPM().styledBox;return (ss.isValue($0.fillColor))?tab.ColorModel.fromColorCode($0.fillColor):tab.CategoricalLegendViewModel.$1_9;},get_$1_12:function(){return this.$1_B.get_catLegendPresModel();},get_$1_13:function(){return this.$1_B.get_catLegendPresModel();},get_$1_14:function(){return this.$1_B.get_catLegendPresModel();},get_$1_15:function(){var $0='color';switch(this.legendType){case 'color':$0='color';break;case 'size':$0='size';break;case 'shape':$0='shape';break;case 'map':$0='map';break;default:break;}return $0;},get_$1_16:function(){var $0=this.get_categoricalLegendPM().styledBox.uw;if(this.get_categoricalLegendPM().styledBox.borderStyle==='bs-none'){$0=0;}return $0;},get_$1_17:function(){return this.get_catLegendModel().get_isHighlightEnabled();},get_$1_18:function(){return this.get_catLegendModel().get_isHighlightAllowed();},dispose:function(){tab.CategoricalLegendViewModel.callBaseMethod(this, 'dispose');this.$1_B.remove_legendChanged(ss.Delegate.create(this,this.$1_19));this.$1_C.remove_newSelection(ss.Delegate.create(this,this.$1_1A));this.$1_D.remove_newSelection(ss.Delegate.create(this,this.$1_1A));},isGrayed:function(item){if(this.get_$1_17()){if(this.isSelected(item)){return false;}var $0=this.get_visualModel();if(ss.isNullOrUndefined($0)){return false;}if(this.get_catLegendModel().get_isOneWay()&&!this.hasSelection()){return false;}var $1=ss.isValue(this.$1_C)&&!this.$1_C.get_isEmpty();var $2=ss.isValue(this.$1_D)&&!this.$1_D.get_isEmpty();return ($1||$2)&&!this.isBrushed(item);}return false;},hasSelection:function(){return ss.isValue(this.$1_C)&&!this.$1_C.get_isEmpty();},isSelected:function(item){return ss.isValue(this.$1_C)&&this.$1_C.isLegendItemSelected(item);},isBrushed:function(item){return ss.isValue(this.$1_D)&&this.$1_D.isLegendItemSelected(item);},toggleHighlighting:function(){tab.SelectionClientCommands.toggleLegendHighlight(this.get_$1_6(),this.get_$1_5(),this.get_$1_15(),this.get_$1_F(),null);},selectItem:function(item,action){var $0=[];$0.add(item);tab.SelectionClientCommands.selectLegendItemsLocal(this.get_$1_6(),action,$0,this.get_$1_5(),this.get_catLegendModel(),this.get_legendTypeEnum());},selectNone:function(action){var $0=[];tab.SelectionClientCommands.selectLegendItemsLocal(this.get_$1_6(),action,$0,this.get_$1_5(),this.get_catLegendModel(),this.get_legendTypeEnum());},getLegendItem:function(itemIdx){var $0=this.get_catLegendModel().get_items();if(ss.isNullOrUndefined($0)||itemIdx<0||itemIdx>=$0.length){return null;}return $0[itemIdx];},$1_19:function(){this.notifyPropertyChanged(null);},$1_1A:function(){this.notifyPropertyChanged('Items');}}
tab.TextRegionViewModel=function(textRegionModel){tab.TextRegionViewModel.initializeBase(this);this.$1_0=textRegionModel;this.$1_0.add_newText(ss.Delegate.create(this,this.handleNewTextRegion));}
tab.TextRegionViewModel.prototype={$1_0:null,add_newTextRegion:function(value){this.$1_1=ss.Delegate.combine(this.$1_1,value);},remove_newTextRegion:function(value){this.$1_1=ss.Delegate.remove(this.$1_1,value);},$1_1:null,get_hAlign:function(){return this.$1_0.get_hAlign();},get_html:function(){return this.$1_0.get_html();},get_orientation:function(){return this.$1_0.get_orientation();},get_vAlign:function(){return this.$1_0.get_vAlign();},get_styledBox:function(){return this.$1_0.get_styledBox();},handleNewTextRegion:function(){this.$1_2();},hasPresModel:function(){return !ss.isNullOrUndefined(this.$1_0.get_presModel());},$1_2:function(){if(ss.isValue(this.$1_1)){this.$1_1();}}}
tab.PageViewModel=function(pageModel){tab.PageViewModel.initializeBase(this);this.$1_0=pageModel;this.$1_0.add_newPage(ss.Delegate.create(this,this.handleNewPage));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_0.remove_newPage(ss.Delegate.create(this,this.handleNewPage));})));}
tab.PageViewModel.prototype={$1_0:null,add_newPage:function(value){this.$1_1=ss.Delegate.combine(this.$1_1,value);},remove_newPage:function(value){this.$1_1=ss.Delegate.remove(this.$1_1,value);},$1_1:null,get_pageModel:function(){return this.$1_0;},get_frame:function(){return this.$1_0.get_frame();},get_viewSession:function(){return tab.ModelUtils.getViewSession(this.get_pageModel().get_zone().sheet);},get_layoutSession:function(){return tab.CommandController.get().get_legacySession();},handleNewPage:function(presModel){this.raiseActionEvent(this.$1_1);}}
tab.LegacyLegendViewModel=function(legacyLegendModel,worksheetId,zoneVM){tab.LegacyLegendViewModel.initializeBase(this,[worksheetId,zoneVM]);this.$1_A=legacyLegendModel;this.$1_A.add_newLegacyLegend(ss.Delegate.create(this,this.handleNewLegacyLegend));this.get_visualModel().add_urlInfoCacheChange(ss.Delegate.create(this,this.$1_12));zoneVM.add_validStateChanged(ss.Delegate.create(this,this.handleZoneValidStateChanged));}
tab.LegacyLegendViewModel.prototype={$1_A:null,add_newLegacyLegend:function(value){this.$1_B=ss.Delegate.combine(this.$1_B,value);},remove_newLegacyLegend:function(value){this.$1_B=ss.Delegate.remove(this.$1_B,value);},$1_B:null,add_validStateChanged:function(value){this.$1_C=ss.Delegate.combine(this.$1_C,value);},remove_validStateChanged:function(value){this.$1_C=ss.Delegate.remove(this.$1_C,value);},$1_C:null,get_frame:function(){return this.$1_A.get_frame();},get_viewId:function(){return tab.ModelUtils.findContentDashboard().getViewId(this.$1_A.get_sheetName());},get_sessionId:function(){return tab.CommandController.get().get_legacySession().get_id();},get_viewSession:function(){return tab.ModelUtils.getViewSession(this.$1_A.get_sheetName());},get_$1_D:function(){return this.get_visualModel().get_cacheUrlInfo();},get_$1_E:function(){return this.get_parentZoneVM().get_valid();},get_$1_F:function(){return this.get_parentZoneVM().get_model().borderWidth();},handleZoneValidStateChanged:function(){this.$1_11();},dispose:function(){this.$1_A.remove_newLegacyLegend(ss.Delegate.create(this,this.handleNewLegacyLegend));this.get_visualModel().remove_urlInfoCacheChange(ss.Delegate.create(this,this.$1_12));tab.LegacyLegendViewModel.callBaseMethod(this, 'dispose');},handleNewLegacyLegend:function(){this.$1_10();},$1_10:function(){if(ss.isValue(this.$1_B)){this.$1_B();}},$1_11:function(){if(ss.isValue(this.$1_C)){this.$1_C();}},$1_12:function(){this.notifyPropertyChanged('urlCacheInfo');}}
tab.DashboardViewModel=function(dashboardModel){this.$1_0={};this.viewControllersBySheet={};this.viewControllersList=[];tab.DashboardViewModel.initializeBase(this);this.$1_1=dashboardModel;this.$1_1.get_zonesModel().add_newZone(ss.Delegate.create(this,this.$1_6));this.$1_1.add_newDashboard(ss.Delegate.create(this,this.$1_A));this.$1_1.add_activeZoneChanged(ss.Delegate.create(this,this.$1_12));this.get_layoutSession().add_stateChanged(ss.Delegate.create(this,this.$1_10));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.get_layoutSession().remove_stateChanged(ss.Delegate.create(this,this.$1_10));})));tab.CommandController.get().add_renderModeChanged(ss.Delegate.create(this,this.$1_B));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
tab.CommandController.get().remove_renderModeChanged(ss.Delegate.create(this,this.$1_B));})));this.$1_F();this.$1_12();}
tab.DashboardViewModel.prototype={$1_1:null,$1_2:false,add_newDashboard:function(value){this.$1_3=ss.Delegate.combine(this.$1_3,value);},remove_newDashboard:function(value){this.$1_3=ss.Delegate.remove(this.$1_3,value);},$1_3:null,add_newZone:function(value){this.$1_4=ss.Delegate.combine(this.$1_4,value);},remove_newZone:function(value){this.$1_4=ss.Delegate.remove(this.$1_4,value);},$1_4:null,add_vizRebuildStart:function(value){this.$1_5=ss.Delegate.combine(this.$1_5,value);},remove_vizRebuildStart:function(value){this.$1_5=ss.Delegate.remove(this.$1_5,value);},$1_5:null,get_dashboardModel:function(){return this.$1_1;},get_zoneViewModels:function(){return this.$1_0;},get_layoutSession:function(){return tab.CommandController.get().get_legacySession();},get_formats:function(){return this.$1_1.get_formats();},get_renderMode:function(){return this.$1_1.get_renderMode();},get_portSize:function(){return this.$1_1.get_portSize();},get_isDashboard:function(){return this.$1_1.get_isDashboard();},get_handlingRenderModeChange:function(){return this.$1_2;},dispose:function(){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$1_0));while($enum1.moveNext()){var $0=$enum1.current;this.$1_0[$0].dispose();}Object.clearKeys(this.$1_0);var $enum2=ss.IEnumerator.getEnumerator(this.viewControllersList);while($enum2.moveNext()){var $1=$enum2.current;$1.get_viewSession().remove_sheetDataChanged(ss.Delegate.create(this,this.$1_11));$1.dispose();}this.viewControllersList.clear();Object.clearKeys(this.viewControllersBySheet);this.$1_1.get_zonesModel().remove_newZone(ss.Delegate.create(this,this.$1_6));this.$1_1.remove_newDashboard(ss.Delegate.create(this,this.$1_A));this.$1_1.remove_activeZoneChanged(ss.Delegate.create(this,this.$1_12));tab.DashboardViewModel.callBaseMethod(this, 'dispose');},$1_6:function($p0){if(Object.keyExists(this.$1_0,$p0.get_zoneId())){this.$1_E($p0.get_zoneId());}var $0;if($p0.get_zoneType()==='viz'){$0=this.$1_7($p0);}else{$0=this.$1_8($p0);}this.$1_9($0);},$1_7:function($p0){var $0;var $1=this.$1_13($p0.get_associatedSheet());$1.get_viewSession().add_sheetDataChanged(ss.Delegate.create(this,this.$1_11));$0=this.$1_8($p0);var $2=$0.get_zoneContentViewModel();$2.set_viewController($1);return $0;},$1_8:function($p0){var $0=new tab.ZoneViewModel($p0,$p0.get_dashboardModel());this.$1_0[$p0.get_zoneId()]=$0;return $0;},$1_9:function($p0){if(ss.isValue(this.$1_4)){this.$1_4($p0);}},$1_A:function(){this.$1_C(ss.Delegate.create(this,function($p1_0){
return !this.$1_1.hasZone($p1_0.get_zoneId())||!this.$1_1.isValidSheet($p1_0.get_model());}));this.raiseActionEvent(this.$1_3);},$1_B:function(){this.$1_2=true;try{this.raiseActionEvent(this.$1_5);this.$1_C(function($p1_0){
return $p1_0.get_zoneType()==='viz';});}finally{this.$1_2=false;}},$1_C:function($p0){var $0=[];var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$1_0));while($enum1.moveNext()){var $1=$enum1.current;var $2=this.$1_0[$1];if($p0($2)){$0.add($1);}}this.$1_D($0);this.$1_F();},$1_D:function($p0){var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;this.$1_E($0);}},$1_E:function($p0){var $0=this.$1_0[$p0];if(ss.isValue($0)){if($0.get_zoneType()==='viz'){var $1=this.viewControllersBySheet['v_'+$0.get_associatedSheet()];delete this.viewControllersBySheet['v_'+$0.get_associatedSheet()];this.viewControllersList.remove($1);$1.dispose();}$0.dispose();delete this.$1_0[$p0];}},$1_F:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$1_1.get_zoneModels());while($enum1.moveNext()){var $0=$enum1.current;if(!Object.keyExists(this.$1_0,$0.get_zoneId())&&this.$1_1.isValidSheet($0)){this.$1_6($0);}}},$1_10:function($p0){dojo.publish(tab.EventMap.closeMenus);if(this.get_dashboardModel().get_autoUpdate()){tab.CommandController.get().refreshLayout();}else{this.get_dashboardModel().set_invalid(true);}},$1_11:function(){dojo.publish(tab.EventMap.closeMenus);if(this.get_dashboardModel().get_autoUpdate()){tab.CommandController.get().refreshLayout();}else{this.get_dashboardModel().set_invalid(true);}},$1_12:function(){if(tsConfig.isPublic){return;}if(!tab.ModelUtils.getSheetInfoPresModel(tab.ApplicationModel.get_instance(),tsConfig.current_sheet_name).isDashboard){return;}var $0=this.$1_1.get_activeZoneID();var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$1_0));while($enum1.moveNext()){var $1=$enum1.current;var $2=this.$1_0[$1];$2.set_$1_A($2.get_zoneId()===$0);}},$1_13:function($p0){var $0=new tab.ViewController($p0,this.get_dashboardModel().getViewSession($p0),Object.getKeyCount(this.viewControllersBySheet));this.viewControllersBySheet['v_'+$p0]=$0;this.viewControllersList.add($0);return $0;}}
tab.LogOnViewModel=function(){tab.LogOnViewModel.initializeBase(this);}
tab.LogOnViewModel.logOnAndTransitionSession=function(newLocation){var $0=new tab.LogOnViewModel();$0.showLogOn();$0.add_logOnCompleted(function(){
$0.dispose();tab.SaveServerCommands.transitionSessionAfterLogon(function(){
tabBootstrap.ViewerBootstrap.get_instance().disableClearSessionOnBrowserUnload();tab.WindowHelper.setLocationHref(window.self,newLocation);});});$0.add_logOnCanceled(function(){
$0.dispose();});}
tab.LogOnViewModel.prototype={add_shown:function(value){this.$1_0=ss.Delegate.combine(this.$1_0,value);},remove_shown:function(value){this.$1_0=ss.Delegate.remove(this.$1_0,value);},$1_0:null,add_hidden:function(value){this.$1_1=ss.Delegate.combine(this.$1_1,value);},remove_hidden:function(value){this.$1_1=ss.Delegate.remove(this.$1_1,value);},$1_1:null,add_logOnCanceled:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_logOnCanceled:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,add_logOnCompleted:function(value){this.$1_3=ss.Delegate.combine(this.$1_3,value);},remove_logOnCompleted:function(value){this.$1_3=ss.Delegate.remove(this.$1_3,value);},$1_3:null,get_logOnUrl:function(){var $0=String.format('{0}/login_complete',tsConfig.site_root);var $1=String.format('force_login=y&destination={0}&:from=authoring',encodeURIComponent($0));return String.format('/auth?{0}',$1);},dispose:function(){this.$1_0=null;this.$1_1=null;this.$1_2=null;this.$1_3=null;tab.LogOnViewModel.callBaseMethod(this, 'dispose');},showLogOn:function(){tab.ObjectRegistry.newView(tab.LogOnView,this);if(ss.isValue(this.$1_0)){this.$1_0();}},cancel:function(){if(ss.isValue(this.$1_1)){this.$1_1();}if(ss.isValue(this.$1_2)){this.$1_2();}},logOnComplete:function(){if(ss.isValue(this.$1_1)){this.$1_1();}if(ss.isValue(this.$1_3)){this.$1_3();}}}
tab.NotificationViewModel=function(){tab.NotificationViewModel.initializeBase(this);}
tab.NotificationViewModel.showNotification=function(message,timeout){var $0=new tab.NotificationViewModel();$0.set_message(message);if(ss.isValue(timeout)){$0.set_autoHideTimeout(timeout);}tab.ObjectRegistry.newView(tab.NotificationView,$0);$0.disposeOnHide();$0.show();}
tab.NotificationViewModel.prototype={$1_0:null,$1_1:false,$1_2:5000,$1_3:0,add_shown:function(value){this.$1_4=ss.Delegate.combine(this.$1_4,value);},remove_shown:function(value){this.$1_4=ss.Delegate.remove(this.$1_4,value);},$1_4:null,add_hidden:function(value){this.$1_5=ss.Delegate.combine(this.$1_5,value);},remove_hidden:function(value){this.$1_5=ss.Delegate.remove(this.$1_5,value);},$1_5:null,get_message:function(){return this.$1_0;},set_message:function(value){this.$1_0=value;return value;},get_visible:function(){return this.$1_1;},get_autoHideTimeout:function(){return this.$1_2;},set_autoHideTimeout:function(value){this.$1_2=value;return value;},show:function(){if(this.$1_1){return;}this.$1_1=true;if(this.$1_2>0){this.$1_3=window.setTimeout(ss.Delegate.create(this,this.hide),this.$1_2);}this.raiseActionEvent(this.$1_4);},disposeOnHide:function(){this.add_hidden(ss.Delegate.create(this,function(){
this.dispose();}));},hide:function(){if(!this.$1_1){return;}this.$1_1=false;window.clearTimeout(this.$1_3);this.raiseActionEvent(this.$1_5);}}
tab.PaneTableViewModel=function(model,sheetId){this.$1_0={};this.$1_3=new tab.SceneInfo();tab.PaneTableViewModel.initializeBase(this);this.$1_1=model;this.$1_2=sheetId;this.$1_5=[];if(ss.isValue(model)){if(ss.isValue(model.get_selectionsModel().get_tupleSelection())){model.get_selectionsModel().get_tupleSelection().add_newSelection(ss.Delegate.create(this,this.$1_C));}model.get_impliedSelectionModel().add_newSelection(ss.Delegate.create(this,this.$1_C));if(ss.isValue(model.get_brushingsModel().get_tupleSelection())){model.get_brushingsModel().get_tupleSelection().add_newSelection(ss.Delegate.create(this,this.$1_D));}if(ss.isValue(model.get_sceneModel())){model.get_sceneModel().add_newSceneModel(ss.Delegate.create(this,this.$1_14));this.$1_14();}if(ss.isValue(model.get_labelsModel())){model.get_labelsModel().add_newSceneModel(ss.Delegate.create(this,this.$1_14));}model.add_newHiddenTuples(ss.Delegate.create(this,this.$1_F));model.add_newFilteredTuples(ss.Delegate.create(this,this.$1_10));model.add_brushingFromActionChanged(ss.Delegate.create(this,this.$1_E));model.add_colorDictionaryChanged(ss.Delegate.create(this,this.$1_11));model.add_newVisual(ss.Delegate.create(this,this.$1_15));model.add_newVisual(ss.Delegate.create(this,this.handleNewPaneTable));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_1.remove_newVisual(ss.Delegate.create(this,this.handleNewPaneTable));})));}this.$1_17();}
tab.PaneTableViewModel.$1_A=function($p0,$p1){var $0=$.extend(true,{},$p0);var $1=$.extend(true,{},$p1);var $2=[];var $enum1=ss.IEnumerator.getEnumerator(Object.keys($0));while($enum1.moveNext()){var $3=$enum1.current;if(!Object.keyExists($1,$3)){$2.add($0[$3]);}else{delete $1[$3];}}var $enum2=ss.IEnumerator.getEnumerator(Object.keys($1));while($enum2.moveNext()){var $4=$enum2.current;$2.add($1[$4]);}return $2;}
tab.PaneTableViewModel.$1_B=function($p0,$p1){var $0={};var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $2=$enum1.current;$0[$2.toString()]=$2;}var $1={};var $enum2=ss.IEnumerator.getEnumerator($p1);while($enum2.moveNext()){var $3=$enum2.current;$1[$3.toString()]=$3;}return tab.PaneTableViewModel.$1_A($0,$1);}
tab.PaneTableViewModel.prototype={$1_1:null,$1_2:null,$1_4:null,$1_5:null,$1_6:false,add_vizRegionMapChange:function(value){this.$1_7=ss.Delegate.combine(this.$1_7,value);},remove_vizRegionMapChange:function(value){this.$1_7=ss.Delegate.remove(this.$1_7,value);},$1_7:null,add_newPaneTable:function(value){this.$1_8=ss.Delegate.combine(this.$1_8,value);},remove_newPaneTable:function(value){this.$1_8=ss.Delegate.remove(this.$1_8,value);},$1_8:null,get_scene:function(){return this.$1_3;},get_vizRegionMap:function(){return this.$1_0;},get_refLineVisualLists:function(){return this.get_$1_9().get_refLineVisualLists();},get_trendLineVisualLists:function(){return this.get_$1_9().get_trendLineVisualLists();},get_drawFirstParts:function(){return this.get_$1_9().get_drawFirstParts();},get_drawLastParts:function(){return this.get_$1_9().get_drawLastParts();},get_layoutSession:function(){return tab.CommandController.get().get_legacySession();},get_zone:function(){return this.$1_1.get_zone();},get_zonePresModel:function(){return this.$1_1.get_zone().get_zonePresModel();},get_viewController:function(){return this.$1_4;},set_viewController:function(value){this.$1_4=value;return value;},get_sheetId:function(){return this.$1_2;},get_sortIndicators:function(){return this.$1_1.get_sortIndicatorsModel().get_sortIndicatorsPresModel();},get_selectionsModel:function(){return this.$1_1.get_selectionsModel();},get_cacheUrlInfo:function(){return this.$1_1.get_cacheUrlInfo();},get_hasTitle:function(){return this.get_zonePresModel().hasTitle;},get_hasCaption:function(){return this.get_zonePresModel().hasCaption;},get_visualModel:function(){return this.$1_1;},get_$1_9:function(){return this.$1_1.get_sceneModel();},dispose:function(){if(ss.isValue(this.$1_1)){if(ss.isValue(this.$1_1.get_selectionsModel().get_tupleSelection())){this.$1_1.get_selectionsModel().get_tupleSelection().remove_newSelection(ss.Delegate.create(this,this.$1_C));}this.$1_1.get_impliedSelectionModel().remove_newSelection(ss.Delegate.create(this,this.$1_C));if(ss.isValue(this.$1_1.get_brushingsModel().get_tupleSelection())){this.$1_1.get_brushingsModel().get_tupleSelection().remove_newSelection(ss.Delegate.create(this,this.$1_D));}if(ss.isValue(this.get_$1_9())){this.get_$1_9().remove_newSceneModel(ss.Delegate.create(this,this.$1_14));}if(ss.isValue(this.$1_1.get_labelsModel())){this.$1_1.get_labelsModel().remove_newSceneModel(ss.Delegate.create(this,this.$1_14));}this.$1_1.remove_newHiddenTuples(ss.Delegate.create(this,this.$1_F));this.$1_1.remove_newFilteredTuples(ss.Delegate.create(this,this.$1_10));this.$1_1.remove_brushingFromActionChanged(ss.Delegate.create(this,this.$1_E));this.$1_1.remove_colorDictionaryChanged(ss.Delegate.create(this,this.$1_11));this.$1_1.remove_newVisual(ss.Delegate.create(this,this.$1_15));}tab.PaneTableViewModel.callBaseMethod(this, 'dispose');},getAndClearInvalidationRects:function(){var $0=this.$1_5;this.$1_5=[];return $0;},$1_C:function(){var $0=this.$1_3.get_selection().objectIds;var $1=this.$1_1.get_selectionsModel().get_tupleSelection().get_selectionPresModel().objectIds;var $2=this.$1_3.get_impliedSelection().objectIds;var $3=this.$1_1.get_impliedSelectionModel().get_selectionPresModel().objectIds;var $4=(!!($0.length+$2.length))!==(!!($1.length+$3.length));if(!$4){var $5=tab.PaneTableViewModel.$1_B($0,$1);var $6=tab.PaneTableViewModel.$1_B($2,$3);var $7=[];$7.addRange($5);$7.addRange($6);if(!$7.length){return;}var $8=this.$1_13($7);this.$1_12($8);}this.$1_3.setSelection(this.$1_1.get_selectionsModel().get_tupleSelection().get_selectionPresModel(),this.$1_1.get_impliedSelectionModel().get_selectionPresModel());this.notifyPropertyChanged('selection');},$1_D:function(){var $0=this.$1_3.get_brushing().objectIds;var $1=this.$1_1.get_brushingsModel().get_tupleSelection().get_selectionPresModel().objectIds;var $2=(!!$0.length)!==(!!$1.length);if(!$2){var $3=tab.PaneTableViewModel.$1_B($0,$1);if(!$3.length){return;}var $4=this.$1_13($3);this.$1_12($4);}this.$1_3.set_brushing(this.$1_1.get_brushingsModel().get_tupleSelection().get_selectionPresModel());this.notifyPropertyChanged('brushing');},$1_E:function(){this.$1_3.setIsTargetOfBrushingAction(this.$1_1.get_isBrushedFromAction());this.notifyPropertyChanged('brushing');},$1_F:function(){var $0=tab.PaneTableViewModel.$1_A(this.$1_1.get_hiddenTuples(),this.$1_3.get_hiddenTuples());if(!$0.length){return;}var $1=this.$1_13($0);this.$1_12($1);this.$1_3.set_hiddenTuples(this.$1_1.get_hiddenTuples());this.notifyPropertyChanged('scene');},$1_10:function(){var $0=tab.PaneTableViewModel.$1_A(this.$1_1.get_filteredTuples(),this.$1_3.get_filteredTuples());if(!$0.length){return;}var $1=this.$1_13($0);this.$1_12($1);this.$1_3.set_filteredTuples(this.$1_1.get_filteredTuples());this.notifyPropertyChanged('scene');},$1_11:function(){this.$1_6=true;},$1_12:function($p0){this.$1_5.addRange($p0);},$1_13:function($p0){var $0=[];var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $1=$enum1.current;var $2=this.$1_3.getMarkInvalidationRects($1);$0.addRange($2);}return $0;},$1_14:function(){if(!tab.ApplicationModel.get_instance().get_isLocalRenderMode()){return;}var $0=false;var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.get_$1_9().get_visualListModels()));while($enum1.moveNext()){var $3=$enum1.current;if(Object.keyExists(this.$1_0,$3)){}else{var $4=this.get_$1_9().get_visualListModels()[$3];if(tab.PaneTableViewModel.blackListVisualParts.contains($3)){this.$1_0[$3]=new tab.VisualListViewModel($4,this.$1_2,tab.ModelUtils.visualPartToRegionMap[$3],this.$1_1.get_selectionsModel(),this.$1_1.get_brushingsModel());}else{this.$1_0[$3]=new tab.VisualListViewModel($4,this.$1_2,tab.ModelUtils.visualPartToRegionMap[$3],null,null);}this.disposables.add(this.$1_0[$3]);$0=true;}}var $1=Object.keys(this.$1_0);var $enum2=ss.IEnumerator.getEnumerator($1);while($enum2.moveNext()){var $5=$enum2.current;if(!Object.keyExists(this.get_$1_9().get_visualListModels(),$5)){delete this.$1_0[$5];$0=true;}}var $2=this.get_$1_9().get_backgroundColor().toString();var $enum3=ss.IEnumerator.getEnumerator(Object.keys(this.$1_0));while($enum3.moveNext()){var $6=$enum3.current;this.$1_0[$6].set_defaultBackgroundColor($2);}if($0){this.$1_16();}this.$1_6=true;},$1_15:function(){if(this.$1_6){this.$1_17();this.notifyPropertyChanged('scene');}this.$1_6=false;},$1_16:function(){if(ss.isValue(this.$1_7)){this.$1_7();}},$1_17:function(){var $0=(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_visualPresModel()))?this.$1_1.get_visualPresModel().colorDictionary:null;var $1=(ss.isValue(this.get_$1_9()))?this.get_$1_9().get_presModel():null;var $2=(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_selectionsModel().get_tupleSelection()))?this.$1_1.get_selectionsModel().get_tupleSelection().get_selectionPresModel():null;var $3=(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_impliedSelectionModel()))?this.$1_1.get_impliedSelectionModel().get_selectionPresModel():null;var $4=(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_brushingsModel().get_tupleSelection()))?this.$1_1.get_brushingsModel().get_tupleSelection().get_selectionPresModel():null;var $5=(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_labelsModel()))?this.$1_1.get_labelsModel().get_presModel():null;var $6=(ss.isValue(this.$1_1))?this.$1_1.get_hiddenTuples():{};var $7=(ss.isValue(this.$1_1))?this.$1_1.get_filteredTuples():{};this.$1_3.setSceneData($1,$2,$3,$4,$0,$6,$7);this.$1_3.setLabelInfo($5);this.$1_3.setIsTargetOfBrushingAction(this.$1_1.get_isBrushedFromAction());if(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_visualPresModel())&&ss.isValue(this.$1_1.get_visualPresModel().imageDictionary)){this.$1_3.updateImageMap(this.$1_1.get_visualPresModel().imageDictionary,ss.Delegate.create(this,function(){
this.notifyPropertyChanged('images');}));}},isInvalidSheet:function(){return this.$1_1.get_invalidSheets().contains(this.$1_2);},handleNewPaneTable:function(){this.raiseActionEvent(this.$1_8);}}
tab.SubscribeViewModel=function(top){tab.SubscribeViewModel.initializeBase(this);this.top=top;tab.WorkgroupServerCommands.getSchedules(ss.Delegate.create(this,function($p1_0){
this.set_schedules($p1_0.filter(function($p2_0){
return $p2_0.get_action()===tab.Schedule.subscription;}));}));this.$1_3=tsConfig.current_user_email;}
tab.SubscribeViewModel.prototype={top:false,$1_0:false,$1_1:0,$1_2:null,$1_3:null,$1_4:null,$1_5:null,add_shown:function(value){this.$1_6=ss.Delegate.combine(this.$1_6,value);},remove_shown:function(value){this.$1_6=ss.Delegate.remove(this.$1_6,value);},$1_6:null,add_hidden:function(value){this.$1_7=ss.Delegate.combine(this.$1_7,value);},remove_hidden:function(value){this.$1_7=ss.Delegate.remove(this.$1_7,value);},$1_7:null,add_modeChange:function(value){this.$1_8=ss.Delegate.combine(this.$1_8,value);},remove_modeChange:function(value){this.$1_8=ss.Delegate.remove(this.$1_8,value);},$1_8:null,add_schedulesChanged:function(value){this.$1_9=ss.Delegate.combine(this.$1_9,value);},remove_schedulesChanged:function(value){this.$1_9=ss.Delegate.remove(this.$1_9,value);},$1_9:null,add_emailChanged:function(value){this.$1_A=ss.Delegate.combine(this.$1_A,value);},remove_emailChanged:function(value){this.$1_A=ss.Delegate.remove(this.$1_A,value);},$1_A:null,add_emailValidationChanged:function(value){this.$1_B=ss.Delegate.combine(this.$1_B,value);},remove_emailValidationChanged:function(value){this.$1_B=ss.Delegate.remove(this.$1_B,value);},$1_B:null,add_sheetSelectionChanged:function(value){this.$1_C=ss.Delegate.combine(this.$1_C,value);},remove_sheetSelectionChanged:function(value){this.$1_C=ss.Delegate.remove(this.$1_C,value);},$1_C:null,add_subjectValidationChanged:function(value){this.$1_D=ss.Delegate.combine(this.$1_D,value);},remove_subjectValidationChanged:function(value){this.$1_D=ss.Delegate.remove(this.$1_D,value);},$1_D:null,get_isTop:function(){return this.top;},get_mode:function(){return this.$1_1;},get_schedules:function(){return this.$1_2;},set_schedules:function(value){if(this.$1_2===value){return;}this.$1_2=value;if(ss.isValue(this.$1_9)){this.$1_9();}return value;},get_sheetSelectionIsWorkbook:function(){return this.$1_0;},set_sheetSelectionIsWorkbook:function(value){if(this.$1_0===value){return;}this.$1_0=value;if(ss.isValue(this.$1_C)){this.$1_C();}return value;},get_validSheets:function(){if(tsConfig.tabs_allowed){return ['SubscribeSheet','SubscribeWorkbook'];}else{return ['SubscribeSheet'];}},get_defaultSubject:function(){return tsConfig.current_sheet_name;},get_email:function(){return this.$1_3;},set_email:function(value){if(this.$1_3===value){return;}this.$1_3=value;if(ss.isValue(this.$1_A)){this.$1_A();}return value;},get_intermediateEmail:function(){return this.$1_4;},set_intermediateEmail:function(value){if(this.$1_4===value){return;}var $0=this.$1_4;this.$1_4=value;if(ss.isValue(this.$1_B)){if(this.$1_E($0)!==this.$1_E(this.$1_4)){this.$1_B();}}return value;},get_intermediateEmailValid:function(){return this.$1_E(this.get_intermediateEmail());},get_intermediateSubject:function(){return this.$1_5;},set_intermediateSubject:function(value){if(this.$1_5===value){return;}var $0=this.$1_5;this.$1_5=value;if(ss.isValue(this.$1_D)){if(this.$1_F($0)!==this.$1_F(this.$1_5)){this.$1_D();}}return value;},get_intermediateSubjectValid:function(){return this.$1_F(this.get_intermediateSubject());},show:function(){if(!this.$1_F(this.get_intermediateSubject())){this.$1_5=this.get_defaultSubject();}this.$1_1=(this.$1_E(this.$1_3))?tab.SubscribeViewModel.modeSubscribe:tab.SubscribeViewModel.modeEmail;if(ss.isValue(this.$1_6)){this.$1_6();}},hide:function(){if(ss.isValue(this.$1_7)){this.$1_7();}},startSubscribe:function(){this.$1_10(tab.SubscribeViewModel.modeSubscribe);},submitEmail:function(email,success,failure){var $0=ss.Delegate.create(this,function(){
this.set_email(email);success();});tab.WorkgroupServerCommands.setUserEmail(email,$0,failure);},createSubscription:function(subject,schedule,successMessage,failureMessage){var $0=function(){
tab.NotificationViewModel.showNotification(successMessage);};var $1=function(){
tab.NotificationViewModel.showNotification(failureMessage);};tab.WorkgroupServerCommands.createSubscription(subject,this.get_sheetSelectionIsWorkbook(),schedule,$0,$1);},$1_E:function($p0){var $0=new RegExp('^[^\\s"(),:;<>@[\\]]+@([-a-z0-9]+\\.)+[a-z0-9]{2,}$','i');return $0.test($p0);},$1_F:function($p0){return !String.isNullOrEmpty($.trim($p0));},$1_10:function($p0){if(this.$1_1!==$p0){this.$1_1=$p0;this.$1_8();}}}
tab.UberPopupViewModel=function(){this.$1_1=0;tab.UberPopupViewModel.initializeBase(this);}
tab.UberPopupViewModel.createForContent=function(content){var $0=new tab.UberPopupViewModel();$0.set_content(content);$0.disposeOnHide();tab.ObjectRegistry.newView(tab.UberPopupView,$0);return $0;}
tab.UberPopupViewModel.prototype={$1_0:null,add_shown:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_shown:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,add_hidden:function(value){this.$1_3=ss.Delegate.combine(this.$1_3,value);},remove_hidden:function(value){this.$1_3=ss.Delegate.remove(this.$1_3,value);},$1_3:null,get_mode:function(){return this.$1_1;},set_mode:function(value){if(this.$1_1===value){return;}this.$1_1=value;this.notifyPropertyChanged('mode');return value;},get_content:function(){return this.$1_0;},set_content:function(value){this.$1_0=value;if(ss.isValue(this.$1_0)){this.$1_0.updateUberPopupViewModel(this);}this.notifyPropertyChanged('content');return value;},disposeOnHide:function(){this.add_hidden(ss.Delegate.create(this,function(){
this.dispose();}));},show:function(options){if(ss.isNullOrUndefined(this.$1_2)){return;}this.$1_2(options);},hide:function(){if(ss.isNullOrUndefined(this.$1_3)){return;}this.$1_3();}}
tab.UberPopupShowOptions=function(relativeElement,horizontalAlign){this.relativeElement=relativeElement;if(ss.isValue(horizontalAlign)){this.horizontalAlign=horizontalAlign;}else{this.horizontalAlign=2;}}
tab.UberPopupShowOptions.prototype={relativeElement:null,horizontalAlign:0}
tab.ViewingToolbarCommands=function(app){this.$1=app;}
tab.ViewingToolbarCommands.prototype={$1:null,$2:null,dispose:function(){if(ss.isValue(this.$2)){this.$2.dispose();}},exportImage:function(){var $0=tableau.types.ExportDialogType['ExportImage'];if(this.$1.get_isDashboard()){var $1={};var $2={};var $3=this.$1.get_viewControllers();if(ss.isValue($3)){$.each($3,function($p1_0,$p1_1){
var $1_0=$p1_1.get_viewWidget().get_scrollPositionX();var $1_1=$p1_1.get_viewWidget().get_scrollPositionY();if(!!$1_0||!!$1_1){$2[$p1_1.get_sheetName()+'-x']=$1_0;$2[$p1_1.get_sheetName()+'-y']=$1_1;}});this.$1.get_session().openDownload(this.$1.get_session().formatExportURL($0.mimeType,$1,$2),$0);}}else{tab.ExportServerCommands.exportImage(tsConfig.current_sheet_name,$0);}},exportData:function(sheetName){if(ss.isNullOrUndefined(sheetName)){sheetName=tab.ModelUtils.findActiveOrDefaultVisual().get_worksheetName();}var $0=tab.ModelUtils.findContentDashboard().getViewSession(sheetName);if(ss.isValue($0)){window.open($0.formatUnderlyingDataURL(null),$0.getWindow('vud'),'scrollbars,resizable');}},exportCrosstab:function(sheetName){if(ss.isNullOrUndefined(sheetName)){sheetName=tab.ModelUtils.findActiveOrDefaultVisual().get_worksheetName();}var $0=tab.ModelUtils.findContentDashboard().getViewSession(sheetName);if(ss.isValue($0)){var $1=tableau.types.ExportDialogType['ExportCrosstab'];$0.openDownload($0.formatExportCrossTabURL('utf16'),$1);}},exportPdf:function(){if(ss.isValue(this.$2)){this.$2.dispose();}this.$2=this.$1.$1_1D();this.$2.showModal();},$3:function($p0){this.$1.get_session().launchEditing($p0);},$4:function(){tab.WorksheetServerCommands.revert();},$5:function(){if(this.$1.get_autoUpdate()){this.$8();}},$6:function(){if(!this.$1.get_autoUpdate()){this.$8();}},$7:function(){return this.$1.get_autoUpdate();},$8:function(){this.$1.set_autoUpdate(!this.$1.get_autoUpdate());if(ss.isValue(this.$1.get_toolbar())&&tsConfig.toolbarvis){this.$1.get_toolbar().setAutoUpdate(this.$1.get_autoUpdate());}tab.ToolbarServerCommands.setAutoUpdate(this.$1.get_autoUpdate());tab.BaseSession.autoUpdate=this.$1.get_autoUpdate();if(this.$1.get_autoUpdate()&&this.$1.get_invalid()){tab.CommandController.get().refreshLayout();}},$9:function(){return (!tsConfig.previewMode&&!String.isNullOrEmpty(tsConfig.downloadURI))||tsConfig.is_metrics_view;},$A:function(){var $0;if(tsConfig.is_metrics_view){$0=this.$1.get_session().metricsViewDownloadUrl();}else{$0=this.$11(tsConfig.downloadURI);}window.open($0);},$B:function($p0){var $0;if(tsConfig.is_metrics_view){$0=this.$1.get_session().metricsViewDownloadUrl();}else{$0=this.$11($p0);}window.open($0);},$C:function(){tab.ToolbarServerCommands.refreshData();},$D:function(){this.$1.get_session().saveAndOpenMetricsView();},$E:function(){this.$1.showShareDialog();this.$1.saveSharedView('link');},$F:function(){},$10:function(){},$11:function($p0){if(ss.isValue($p0)){var $0=$p0.match(tab.ViewingToolbarCommands.$0);if(ss.isValue($0)&&$0.length>=2){return tabBootstrap.ViewerBootstrap.get_instance().location.protocol+'//'+tabBootstrap.ViewerBootstrap.get_instance().location.host+$0[1];}}return $p0;}}
tab.VisualListViewModel=function(visualListModel,worksheetId,regionPart,selModel,brushModel){tab.VisualListViewModel.initializeBase(this);this.$1_0=visualListModel;this.$1_1=worksheetId;this.$1_2=regionPart;this.$1_0.add_newVisualList(ss.Delegate.create(this,this.handleModelChange));if(ss.isValue(selModel)){this.$1_3=selModel.get_nodeSelection();this.$1_3.add_newSelection(ss.Delegate.create(this,this.$1_6));}if(ss.isValue(brushModel)){this.$1_4=brushModel.get_nodeSelection();this.$1_4.add_newSelection(ss.Delegate.create(this,this.$1_6));}if(ss.isValue(selModel)||ss.isValue(brushModel)){this.$1_6();}}
tab.VisualListViewModel.prototype={$1_0:null,$1_1:null,$1_2:null,$1_3:null,$1_4:null,$1_5:null,get_groupItemNodes:function(){return this.$1_0.get_groupItemNodes();},get_visualListPM:function(){return this.$1_0.get_visualListPresModel();},get_defaultBackgroundColor:function(){return this.$1_5;},set_defaultBackgroundColor:function(value){this.$1_5=value;return value;},isSelected:function(node){return ss.isValue(this.$1_3)&&this.$1_3.isNodeSelected(node);},isBrushed:function(node){return ss.isValue(this.$1_4)&&this.$1_4.isNodeSelected(node);},selectNode:function(coords,selectedNode,action){tab.SelectionClientCommands.selectNodeLocal(this.$1_2,coords,action,this.$1_0,selectedNode,this.$1_1);},handleModelChange:function(){this.notifyPropertyChanged('visualList');},dispose:function(){this.$1_0.remove_newVisualList(ss.Delegate.create(this,this.handleModelChange));if(ss.isValue(this.$1_3)){this.$1_3.remove_newSelection(ss.Delegate.create(this,this.$1_6));}if(ss.isValue(this.$1_4)){this.$1_4.remove_newSelection(ss.Delegate.create(this,this.$1_6));}tab.VisualListViewModel.callBaseMethod(this, 'dispose');},$1_6:function(){this.notifyPropertyChanged('selection');}}
tab.WorkbookViewModel=function(workbookModel){tab.WorkbookViewModel.initializeBase(this);this.$1_0=workbookModel;this.$1_0.addNewDashboardHandler(ss.Delegate.create(this,this.handleNewDashboard));}
tab.WorkbookViewModel.prototype={$1_0:null,$1_1:null,add_newDashboard:function(value){this.$1_2=ss.Delegate.combine(this.$1_2,value);},remove_newDashboard:function(value){this.$1_2=ss.Delegate.remove(this.$1_2,value);},$1_2:null,get_dashboardViewModel:function(){return this.$1_1;},dispose:function(){if(ss.isValue(this.$1_1)){this.$1_1.dispose();}this.$1_0.remove_newDashboard(ss.Delegate.create(this,this.handleNewDashboard));tab.WorkbookViewModel.callBaseMethod(this, 'dispose');},handleNewDashboard:function(dashboardModel){if(ss.isValue(this.$1_1)){this.$1_1.dispose();}this.$1_1=new tab.DashboardViewModel(dashboardModel);this.raiseActionEvent(this.$1_2);}}
tab.ZoneViewModel=function(zoneModel,dashboardModel){tab.ZoneViewModel.initializeBase(this);this.$1_4=true;this.$1_0=zoneModel;this.$1_1=dashboardModel;this.$1_0.add_updateZone(ss.Delegate.create(this,this.$1_C));this.$1_0.add_resizeZone(ss.Delegate.create(this,this.$1_D));this.$1_0.add_newZoneContent(ss.Delegate.create(this,this.$1_F));this.$1_0.add_removeZoneContent(ss.Delegate.create(this,this.$1_10));this.$1_B();this.$1_E();if(ss.isValue(zoneModel)&&ss.isValue(zoneModel.get_model())){this.$1_F(zoneModel.get_model());}}
tab.ZoneViewModel.calculateZoneZIndex=function(zone){return 10+zone.get_relativeZoneZIndex();}
tab.ZoneViewModel.prototype={$1_0:null,$1_1:null,$1_2:null,$1_3:null,$1_4:false,$1_5:false,add_updateZone:function(value){this.$1_6=ss.Delegate.combine(this.$1_6,value);},remove_updateZone:function(value){this.$1_6=ss.Delegate.remove(this.$1_6,value);},$1_6:null,add_resizeZone:function(value){this.$1_7=ss.Delegate.combine(this.$1_7,value);},remove_resizeZone:function(value){this.$1_7=ss.Delegate.remove(this.$1_7,value);},$1_7:null,add_newZoneContent:function(value){this.$1_8=ss.Delegate.combine(this.$1_8,value);},remove_newZoneContent:function(value){this.$1_8=ss.Delegate.remove(this.$1_8,value);},$1_8:null,add_validStateChanged:function(value){this.$1_9=ss.Delegate.combine(this.$1_9,value);},remove_validStateChanged:function(value){this.$1_9=ss.Delegate.remove(this.$1_9,value);},$1_9:null,get_zoneContentViewModel:function(){return this.$1_2;},get_zoneType:function(){return this.$1_0.get_zoneType();},get_height:function(){return (this.$1_0.get_height()-(2*this.$1_0.borderWidth()));},get_width:function(){return (this.$1_0.get_width()-(2*this.$1_0.borderWidth()));},get_x:function(){return this.$1_0.get_x();},get_y:function(){return this.$1_0.get_y();},get_model:function(){return this.$1_0;},get_titleSize:function(){return tab.$create_Size(this.$1_0.get_zonePresModel().titleWidth,this.$1_0.get_zonePresModel().titleHeight);},get_valid:function(){return this.$1_4;},get_zoneZIndex:function(){return tab.ZoneViewModel.calculateZoneZIndex(this.$1_0);},get_zoneId:function(){return this.$1_0.get_zoneId();},get_associatedSheet:function(){return this.$1_0.get_associatedSheet();},get_backgroundColor:function(){var $0;var $1=tab.FeatureParamsLookup.getBoolDefaultTrue(tab.FeatureParam.transparentBackground);if(ss.isValue($1)&&$1){$0=(this.$1_0.get_backgroundColor()||'rgba(0,0,0,0)');}else{if(ss.isValue(this.$1_0.get_backgroundColor())){$0=tab.ColorModel.alphaCompositeSolidDest(tab.ColorModel.fromColorCode(this.$1_0.get_backgroundColor()),tab.ColorModel.fromColorCode(this.$1_1.get_backgroundColor())).toRgb();}else{$0=this.$1_1.get_backgroundColor();}}if((this.get_zoneType()==='shape')||(this.get_zoneType()==='color')||(this.get_zoneType()==='size')||(this.get_zoneType()==='map')){if((!tab.ApplicationModel.get_instance().get_isLocalRenderMode())||(Type.canCast(this.$1_2,tab.LegacyLegendViewModel))){return (this.$1_0.get_backgroundColor()||$0);}}return $0;},get_$1_A:function(){return this.$1_5;},set_$1_A:function($p0){if(this.$1_5!==$p0){this.$1_5=$p0;this.notifyPropertyChanged('isActiveZone');}return $p0;},dispose:function(){if(ss.isValue(this.$1_2)){this.$1_2.dispose();this.$1_2=null;}if(ss.isValue(this.$1_3)){this.$1_3.remove_visualValidStateChanged(ss.Delegate.create(this,this.$1_E));}this.$1_0.remove_updateZone(ss.Delegate.create(this,this.$1_C));this.$1_0.remove_resizeZone(ss.Delegate.create(this,this.$1_D));this.$1_0.remove_newZoneContent(ss.Delegate.create(this,this.$1_F));this.$1_0.remove_removeZoneContent(ss.Delegate.create(this,this.$1_10));tab.ZoneViewModel.callBaseMethod(this, 'dispose');},$1_B:function(){var $0=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),this.$1_0.get_associatedSheet());if(this.$1_3!==$0){if(ss.isValue(this.$1_3)){this.$1_3.remove_visualValidStateChanged(ss.Delegate.create(this,this.$1_E));}this.$1_3=$0;if(ss.isValue(this.$1_3)){this.$1_3.add_visualValidStateChanged(ss.Delegate.create(this,this.$1_E));}}},$1_C:function(){this.$1_B();this.$1_E();this.raiseActionEvent(this.$1_6);},$1_D:function(){this.raiseActionEvent(this.$1_7);},$1_E:function(){var $0=true;if(this.$1_0.get_isDependentOnViz()&&ss.isValue(this.$1_3)){$0=this.$1_3.get_isVisualValid();}if($0!==this.$1_4){this.$1_4=$0;this.raiseActionEvent(this.$1_9);}},$1_F:function($p0){var $0=this.$1_0.get_zoneType();var $1=this.$1_0.get_worksheetName();switch($0){case 'title':case 'text':this.$1_2=new tab.TextRegionViewModel($p0);break;case 'color':case 'size':case 'shape':case 'map':if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(Type.canCast($p0,tab.CategoricalLegendModel)){this.$1_2=new tab.CategoricalLegendViewModel($p0,$0,$1,this);}else if(Type.canCast($p0,tab.QuantitativeColorLegendModel)){this.$1_2=new tab.QuantitativeColorLegendViewModel($p0,$1,this);}}else{this.$1_2=new tab.LegacyLegendViewModel($p0,$1,this);}break;case 'current-page':this.$1_2=new tab.PageViewModel($p0);break;case 'web':this.$1_2=new tab.WebZoneViewModel($p0);break;case 'bitmap':this.$1_2=new tab.ImageZoneViewModel($p0);break;case 'flipboard-nav':this.$1_2=new tab.FlipboardNavigatorViewModel($p0);break;case 'flipboard':this.$1_2=new tab.FlipboardViewModel($p0);break;case 'filter':this.$1_2=new tab.QuickFilterViewModel($p0);break;case 'paramctrl':this.$1_2=new tab.ParameterControlViewModel($p0);break;case 'viz':var $2=this.$1_0.get_associatedSheet();this.$1_2=new tab.PaneTableViewModel($p0,$2);break;case 'layout-basic':return;default:return;}this.$1_11(this.$1_2);},$1_10:function(){this.dispose();},$1_11:function($p0){if(ss.isValue(this.$1_8)){this.$1_8($p0);}}}
tab.ContinuousSliderViewModel=function(rangeModel){tab.ContinuousSliderViewModel.initializeBase(this);this.$1_2=rangeModel;this.$1_3=rangeModel.getCurrentFraction();this.$1_2.add_sliderFractionUpdated(ss.Delegate.create(this,this.$1_9));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$1_2.remove_sliderFractionUpdated(ss.Delegate.create(this,this.$1_9));})));this.$1_4=200;}
tab.ContinuousSliderViewModel.prototype={$1_2:null,$1_3:0,$1_4:0,$1_5:0,$1_6:'',add_intermediateChange:function(value){this.$1_7=ss.Delegate.combine(this.$1_7,value);},remove_intermediateChange:function(value){this.$1_7=ss.Delegate.remove(this.$1_7,value);},$1_7:null,add_sliderValueChange:function(value){this.$1_8=ss.Delegate.combine(this.$1_8,value);},remove_sliderValueChange:function(value){this.$1_8=ss.Delegate.remove(this.$1_8,value);},$1_8:null,get_sliderClassName:function(){return this.$1_6;},set_sliderClassName:function(value){this.$1_6=value;return value;},get_pixelWidth:function(){return this.$1_4;},set_pixelWidth:function(value){this.$1_4=value;return value;},get_ruleTickCount:function(){return this.$1_5;},set_ruleTickCount:function(value){this.$1_5=value;return value;},get_currentFraction:function(){return this.$1_3;},set_currentFraction:function(value){this.$1_3=value;this.$1_8(this.get_currentFraction());return value;},get_sliderCurrentValue:function(){return this.get_currentFraction()*1000;},set_sliderCurrentValue:function(value){this.set_currentFraction(value/1000);return value;},get_sliderMinimumValue:function(){return 0;},get_sliderMaximumValue:function(){return 1000;},get_rangeModel:function(){return this.$1_2;},applyIntermediateChange:function(value){this.$1_3=value/1000;if(ss.isValue(this.$1_7)){this.$1_7(this.$1_3);}},$1_9:function($p0){this.set_currentFraction($p0);}}
tab.AccordionView=function(viewModel,t){tab.AccordionView.initializeBase(this,[viewModel,t]);this.$2_1=viewModel;this.t=t;this.update();}
tab.AccordionView.prototype={$2_1:null,t:null,onViewModelPropertyChanged:function(sender,e){tab.AccordionView.callBaseMethod(this, 'onViewModelPropertyChanged',[sender,e]);switch(e.get_propertyName()){case 'AllItems':this.update();break;case 'ActiveItem':this.$2_3(this.$2_1.get_activeItem());break;}},update:function(){var $enum1=ss.IEnumerator.getEnumerator(tab.Widget.getWidgets(this.t.domRoot.children()));while($enum1.moveNext()){var $0=$enum1.current;$0.dispose();}this.t.itemsContainer.children().remove();var $enum2=ss.IEnumerator.getEnumerator(this.$2_1.get_items());while($enum2.moveNext()){var $1=$enum2.current;var $2=tab.AccordionItemTemplate.createDefault();$2.header.bind((tsConfig.is_touch)?'touchstart':'click',this.$2_2($1));$2.domRoot.data('tabAccordionItem',$1);$2.title.text($1.get_title());$2.title.attr('title',$1.get_title());if(ss.isValue($1.get_iconClass())){$2.icon.addClass($1.get_iconClass());}if(ss.isValue($1.get_iconClassTwo())){$2.iconTwo.addClass($1.get_iconClassTwo());}$2.content.hide();var $3=tab.ObjectRegistry.newView($1.get_content().get_viewType(),$1.get_content().get_viewModel());$2.content.append($3.get_element());this.t.itemsContainer.append($2.domRoot);tab.DragDropManager.attachDropTarget($2.header,this.$2_1.createItemDropTarget($1));}if(ss.isValue(this.$2_1.get_activeItem())){this.$2_3(this.$2_1.get_activeItem());}},$2_2:function($p0){return ss.Delegate.create(this,function(){
this.$2_1.set_activeItem($p0);});},$2_3:function($p0){var $0=this.t.domRoot.find('.tabAccordionActive').length>0;var $enum1=ss.IEnumerator.getEnumerator(this.t.get_allItems().get());while($enum1.moveNext()){var $1=$enum1.current;var $2=$($1);var $3=new tab.AccordionItemTemplate($2);var $4=$2.data('tabAccordionItem')===$p0;$3.domRoot.toggleClass('tabAccordionActive',$4);$3.domRoot.toggleClass('tabAccordionNotActive',!$4);if($4){if($0){$3.content.slideDown('fast');}else{$3.content.show();}}else if($3.content.is(':visible')){if($0){$3.content.slideUp('fast');}else{$3.content.hide();}}}}}
tab.AccordionTemplate=function(){tab.AccordionTemplate.initializeBase(this,[$("<div class='tabAccordion'><div class='tabAccordionItems'/></div>")]);this.itemsContainer=this.getElementBySelector('.tabAccordionItems');}
tab.AccordionTemplate.prototype={itemsContainer:null,get_allItems:function(){return this.getElementsBySelector('.tabAccordionItem');}}
tab.AccordionItemTemplate=function(root){tab.AccordionItemTemplate.initializeBase(this,[root]);this.title=this.getElementBySelector('.tabAccordionItemTitle');this.content=this.getElementBySelector('.tabAccordionItemContent');this.icon=this.getElementBySelector('.tabAccordionItemIcon');this.iconTwo=this.getElementBySelector('.tabAccordionItemIconTwo');this.header=this.getElementBySelector('.tabAccordionItemHeader');}
tab.AccordionItemTemplate.createDefault=function(){return new tab.AccordionItemTemplate($("<div class='tabAccordionItem'>\n        <div class='tabAccordionItemHeader'><span class='tabAccordionItemTitle'/><span class='tabAccordionItemIconTwo'/><div class='tabAccordionItemIcon'/></div>\n        <div class='tabAccordionItemContent'/>\n        </div>"));}
tab.AccordionItemTemplate.prototype={title:null,content:null,icon:null,iconTwo:null,header:null}
tab.AccordionViewModel=function(){this.$1_0=[];tab.AccordionViewModel.initializeBase(this);}
tab.AccordionViewModel.prototype={$1_1:null,$1_2:false,get_allowDragOverExpand:function(){return this.$1_2;},set_allowDragOverExpand:function(value){this.$1_2=value;return value;},get_items:function(){return this.$1_0;},get_activeItem:function(){return this.$1_1;},set_activeItem:function(value){if(this.$1_1===value){return;}if(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_content())){this.$1_1.get_content().set_active(false);}this.$1_1=value;if(ss.isValue(this.$1_1)&&ss.isValue(this.$1_1.get_content())){this.$1_1.get_content().set_active(true);}this.notifyPropertyChanged('ActiveItem');return value;},updateItems:function(newItems){this.$1_0.clear();this.$1_0.addRange(newItems);if(!this.$1_0.contains(this.$1_1)){this.set_activeItem(null);}this.notifyPropertyChanged('AllItems');},createItemDropTarget:function(item){if(this.get_allowDragOverExpand()){return new tab.vqlui$1(item,this);}return null;}}
tab.AccordionItem=function(title,iconClass,content){this.$0=title;this.$1=iconClass;this.$2=null;this.$3=content;}
tab.AccordionItem.prototype={$0:null,$1:null,$2:null,$3:null,get_title:function(){return this.$0;},set_title:function(value){this.$0=value;return value;},get_iconClass:function(){return this.$1;},set_iconClass:function(value){this.$1=value;return value;},get_iconClassTwo:function(){return this.$2;},set_iconClassTwo:function(value){this.$2=value;return value;},get_content:function(){return this.$3;},set_content:function(value){this.$3=value;return value;}}
tab.vqlui$1=function(item,viewModel){this.$0=item;this.$1=viewModel;}
tab.vqlui$1.prototype={$0:null,$1:null,$2:0,dragOver:function($p0){this.$2=window.setTimeout(ss.Delegate.create(this,this.$3),800);return this;},acceptDrop:function($p0){return false;},dragExit:function($p0){window.clearTimeout(this.$2);},$3:function(){this.$1.set_activeItem(this.$0);}}
tab.CanvasView=function(viewModel){tab.CanvasView.initializeBase(this,[viewModel,new tab.CanvasTemplate()]);this.canvasElt=(this.get_template()).canvasElt.get(0);this.scrollOffset=tab.$create_Point(0,0);this.$2_1=false;this.context=tab.CanvasRenderer.$7(this.canvasElt);this.$2_0=tab.RenderUtil.calculatePixelRatio();}
tab.CanvasView.prototype={canvasElt:null,context:null,scrollOffset:null,$2_0:0,$2_1:false,$2_2:null,$2_3:null,get_canScrollX:function(){return (this.get_docSize().w-this.get_effectiveViewSize().w)>0;},get_canScrollY:function(){return (this.get_docSize().h-this.get_effectiveViewSize().h)>0;},get_actualViewSize:function(){if(!ss.isValue(this.canvasElt)){return tab.$create_Size(0,0);}return tab.$create_Size(this.canvasElt.width,this.canvasElt.height);},set_actualViewSize:function(value){if(!ss.isValue(this.canvasElt)){return;}if(tab.CanvasUtil.isOverIpadRenderLimit(value.w,value.h,this.get_pixelRatio())){this.$2_0=1;}if(this.get_effectiveViewSize().w!==value.w||this.get_effectiveViewSize().h!==value.h){this.$2_3=tab.$create_Size(value.w,value.h);this.canvasElt.width=value.w;this.canvasElt.height=value.h;tab.CanvasUtil.densifyCanvasUsingRatio(this.canvasElt,this.get_pixelRatio());this.invalidate(false);}return value;},get_effectiveViewSize:function(){if(ss.isValue(this.$2_3)){return this.$2_3;}else{return this.get_actualViewSize();}},get_pixelRatio:function(){return this.$2_0;},get_needsRedraw:function(){return !tab.RectXYUtil.isEmpty(this.get_dirtyRect());},get_scrollPos:function(){return this.scrollOffset;},set_scrollPos:function(value){if(!tab.PointUtil.equals(this.scrollOffset,value)){var $0=tab.PointUtil.subtract(value,this.scrollOffset);this.scrollOffset=value;if(!tab.RectXYUtil.isEmpty(this.get_dirtyRect())){var $1=tab.$create_Point(-$0.x,-$0.y);var $2=tab.RectXYUtil.offsetRect(this.get_dirtyRect(),$1);this.set_dirtyRect($2);}if(!!$0.x&&!!$0.y){this.invalidate(true);}else{var $3=this.get_effectiveViewSize().w-Math.abs($0.x);var $4=($0.x>0)?$0.x:0;var $5=($0.x>0)?0:-$0.x;$3=($3*this.get_pixelRatio());$4=($4*this.get_pixelRatio());$5=($5*this.get_pixelRatio());var $6=this.get_effectiveViewSize().h-Math.abs($0.y);var $7=($0.y>0)?$0.y:0;var $8=($0.y>0)?0:-$0.y;$6=($6*this.get_pixelRatio());$7=($7*this.get_pixelRatio());$8=($8*this.get_pixelRatio());if($3<=0||$6<=0){this.invalidate(true);}else{this.context.reset();this.context.drawImage5(this.canvasElt,$4,$7,$3,$6,$5,$8,$3,$6);var $9=tab.$create_RectXY(0,0,this.get_effectiveViewSize().w,this.get_effectiveViewSize().h);if($0.x>0){$9.x=$9.w-$0.x;}else if($0.x<0){$9.w=-$0.x;}if($0.y>0){$9.y=$9.h-$0.y;}else if($0.y<0){$9.h=-$0.y;}if(!$0.x){$9.h=Math.abs($0.y);}if(!$0.y){$9.w=Math.abs($0.x);}$9=tab.RectXYUtil.dialate($9,3);this.invalidateRect($9,true);}}}return value;},get_dirtyRect:function(){return (ss.isValue(this.context))?this.context.get_dirtyRect():tab.$create_RectXY(0,0,0,0);},set_dirtyRect:function(value){if(ss.isValue(this.context)){this.context.set_dirtyRect(value);}return value;},dispose:function(){if(ss.isValue(this.$2_2)){window.clearTimeout(this.$2_2);var $0=tab.CommandController.get().get_legacySession().get_waitHandler();$0.release();this.$2_2=null;}tab.CanvasView.callBaseMethod(this, 'dispose');},clearDirty:function(){this.set_dirtyRect(tab.$create_RectXY(0,0,0,0));},invalidate:function(immediateRedraw){this.set_dirtyRect(tab.$create_RectXY(0,0,this.get_effectiveViewSize().w,this.get_effectiveViewSize().h));this.triggerRedraw(immediateRedraw);},invalidateRect:function(rect,immediateRedraw){var $0;if(tab.RectXYUtil.isEmpty(this.get_dirtyRect())){$0=$.extend(true,{},rect);}else{$0=tab.RectXYUtil.union(this.get_dirtyRect(),rect);}if($0.x<0){$0.x=0;}if(($0.x+$0.w)>this.get_effectiveViewSize().w){$0.w=this.get_effectiveViewSize().w-$0.x;}if($0.y<0){$0.y=0;}if(($0.y+$0.h)>this.get_effectiveViewSize().h){$0.h=this.get_effectiveViewSize().h-$0.y;}this.set_dirtyRect($0);this.triggerRedraw(immediateRedraw);},setXPos:function(xPos){this.set_scrollPos(tab.$create_Point(xPos,this.get_scrollPos().y));},setYPos:function(yPos){this.set_scrollPos(tab.$create_Point(this.get_scrollPos().x,yPos));},triggerRedraw:function(immediate){if(ss.isNullOrUndefined(immediate)){immediate=false;}var $0=tab.CommandController.get().get_legacySession().get_waitHandler();if(immediate){$0.addref(false);this.redraw();$0.release();if(ss.isValue(this.$2_2)){window.clearTimeout(this.$2_2);this.$2_2=null;$0.release();}this.$2_1=false;}else if(!this.$2_1){$0.addref(false);this.$2_1=true;this.$2_2=window.setTimeout(ss.Delegate.create(this,function(){
this.redraw();this.$2_1=false;this.$2_2=-1;$0.release();}),0);}}}
tab.CanvasTemplate=function(){tab.CanvasTemplate.initializeBase(this,[$("<canvas class='tabCanvas'></canvas>")]);this.canvasElt=this.domRoot;}
tab.CanvasTemplate.prototype={canvasElt:null}
tab.ConfirmationView=function(viewModel){tab.ConfirmationView.initializeBase(this,[viewModel,tab.Template.fromHtml("<div class='tabConfirmation'>")]);this.confirmViewModel=viewModel;this.confirmViewModel.add_shown(ss.Delegate.create(this,this.$2_6));this.confirmViewModel.add_hidden(ss.Delegate.create(this,this.$2_5));this.buildDom();}
tab.ConfirmationView.prototype={confirmViewModel:null,$2_0:null,$2_1:null,$2_2:null,dispose:function(){this.confirmViewModel.remove_shown(ss.Delegate.create(this,this.$2_6));this.confirmViewModel.remove_hidden(ss.Delegate.create(this,this.$2_5));this.$2_0.dispose();this.$2_0=null;tab.ConfirmationView.callBaseMethod(this, 'dispose');},buildDom:function(){this.$2_1=tab.StyledButton.createStyledButton(ss.Delegate.create(this,this.$2_4),this.confirmViewModel.get_denyText(),'tabConfirmationDenyButton',1);this.$2_2=tab.StyledButton.createStyledButton(ss.Delegate.create(this,this.$2_3),this.confirmViewModel.get_confirmText(),'tabConfirmationConfirmButton',2);this.get_element().append($('<div>').addClass('tabConfirmationMessage').html(this.confirmViewModel.get_messageHtml()));this.get_element().append($('<div>').addClass('tabConfirmationButtons').append(this.$2_2).append(this.$2_1));this.$2_0=new tab.Dialog(this.confirmViewModel.get_titleText(),this.get_element());this.$2_0.add_closed(ss.Delegate.create(this,function(){
this.confirmViewModel.cancel();}));},$2_3:function($p0){this.confirmViewModel.confirm();},$2_4:function($p0){this.confirmViewModel.deny();},$2_5:function($p0){if(ss.isNullOrUndefined(this.$2_0)){return;}this.$2_0.close();},$2_6:function(){if(ss.isNullOrUndefined(this.$2_0)){return;}this.$2_0.showModal();}}
tab.ApplicationView=function(viewModel){tab.ApplicationView.initializeBase(this,[viewModel,new tab.ApplicationTemplate()]);this.$2_0=viewModel;this.$2_0.add_newDashboard(ss.Delegate.create(this,this.$2_3));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newDashboard(ss.Delegate.create(this,this.$2_3));})));}
tab.ApplicationView.prototype={$2_0:null,$2_1:null,$2_2:null,get_dom:function(){return this.get_template();},get_containerNode:function(){return this.$2_1.get_containerNode();},get_toolbarIsBottom:function(){return ((tsConfig.isPublic||tsConfig.embedded)&&!tsConfig.forceToolbarTop);},get_toolbarContainer:function(){if(this.get_toolbarIsBottom()){return this.get_dom().bottomToolbar;}else{return this.get_dom().topToolbar;}},get_unusedToolbarContainer:function(){if(this.get_toolbarIsBottom()){return this.get_dom().topToolbar;}else{return this.get_dom().bottomToolbar;}},onAddedToDom:function(){tab.ApplicationView.callBaseMethod(this, 'onAddedToDom');this.$2_3();},$2_3:function(){if(ss.isValue(this.$2_0.get_dashboardViewModel())){this.$2_1=tab.ObjectRegistry.newView(tab.DashboardView,this.$2_0.get_dashboardViewModel());this.$2_1.addToDom(this.get_dom().domNode);if(ss.isValue(this.$2_2)){this.positionDashboardView(this.$2_2);}this.get_dom().domNode.css('visibility','visible');}},positionDashboardView:function(newBounds){if(ss.isValue(this.$2_1)){this.$2_1.positionDomScroll(newBounds);}this.$2_2=newBounds;}}
tab.ApplicationTemplate=function(){tab.ApplicationTemplate.initializeBase(this,[$("\n<div id='tabViewer' class='wcBody' style='visibility:hidden;'\n  ><div class='wcVizPlaceholder' dojoAttachPoint='domPlaceholder'></div\n  ><div id=\"share_dialog\"></div\n  ><div class='bottom_toolbar'></div\n    ><div class='wcWatermark'\n      ><div class='wcPublicNote' dojoAttachPoint='domPublicNote'>\n          <span id='domViewCount'></span>\n          <span id='interpunct' style='display:none'>&nbsp;&#183;&nbsp;</span>\n          <span id='domSharePerspective'></span></div\n      ><div\n        ><a id='domWatermarkLink' target='_blank'\n          ><img dojoAttachPoint='domWatermarkImage' alt='Tableau Public' border='0'\n          /></a\n      ></div\n    ></div\n></div>")]);this.domNode=this.domRoot;this.publicNote=this.getElementBySelector('.wcPublicNote');this.viewCount=this.getElementBySelector('#domViewCount');this.sharePerspective=this.getElementBySelector('#domSharePerspective');this.interpunct=this.getElementBySelector('#interpunct');this.watermarkParent=this.getElementBySelector('.wcWatermark');this.watermarkLink=this.getElementBySelector('#domWatermarkLink');this.watermarkImage=this.getElementBySelector('img');this.topToolbar=$('#top_toolbar');this.bottomToolbar=this.getElementBySelector('.bottom_toolbar');this.placeholder=this.getElementBySelector('.wcVizPlaceholder');}
tab.ApplicationTemplate.prototype={domNode:null,publicNote:null,viewCount:null,sharePerspective:null,interpunct:null,watermarkParent:null,watermarkLink:null,watermarkImage:null,topToolbar:null,bottomToolbar:null,placeholder:null}
tab.DashboardView=function(viewModel){tab.DashboardView.initializeBase(this,[viewModel,new tab.DashboardTemplate()]);this.$2_0=viewModel;this.$2_0.add_newDashboard(ss.Delegate.create(this,this.$2_2));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newDashboard(ss.Delegate.create(this,this.$2_2));})));this.$2_0.add_newZone(ss.Delegate.create(this,this.$2_3));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newZone(ss.Delegate.create(this,this.$2_3));})));this.$2_0.add_vizRebuildStart(ss.Delegate.create(this,this.$2_4));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_vizRebuildStart(ss.Delegate.create(this,this.$2_4));})));}
tab.DashboardView.prototype={$2_0:null,get_$2_1:function(){return this.get_template();},get_containerNode:function(){return this.get_$2_1().containerNode;},$2_2:function(){this.get_$2_1().containerNode.height(this.$2_0.get_portSize().y).width(this.$2_0.get_portSize().x);if(ss.isValue(this.$2_0.get_formats())){this.get_$2_1().containerNode.css(this.$2_0.get_formats());var $0=this.$2_0.get_formats()['color'];if(ss.isNullOrUndefined($0)||$0==='#000000'){this.get_$2_1().containerNode.addClass('lightBackground');}else{this.get_$2_1().containerNode.addClass('darkBackground');}}},$2_3:function($p0){var $0=tab.ObjectRegistry.newView(tab.ZoneView,$p0);$0.addToDom(this.get_$2_1().containerNode);},addToDom:function(parent){parent.prepend(this.get_template().domRoot);this.onAddedToDom();},onAddedToDom:function(){if(!this.addedToDom){this.$2_2();var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$2_0.get_zoneViewModels()));while($enum1.moveNext()){var $0=$enum1.current;this.$2_3(this.$2_0.get_zoneViewModels()[$0]);}}tab.DashboardView.callBaseMethod(this, 'onAddedToDom');},positionDomScroll:function(newBounds){this.get_$2_1().domScroll.css('top',newBounds.t+'px');tab.DomUtil.setContentBox(this.get_$2_1().domScroll.get(0),newBounds);},$2_4:function(){if(this.$2_0.get_renderMode()==='render-mode-client'){var $1=this.get_$2_1().containerNode.find('img');var $2=$1.length;for(var $3=0;$3<$2;$3++){var $4=$1[$3];if(ss.isNullOrUndefined($4)||!$4.naturalHeight||!$4.naturalWidth){continue;}var $5=document.createElement('canvas');$5.width=$4.naturalWidth;$5.height=$4.naturalHeight;var $6=$5.getContext('2d');$6.drawImage($4,0,0);try{var $7=$5.toDataURL('image/png');$4.src=$7;}catch($8){}}}var $0=this.get_$2_1().containerNode.clone(false,false);$0.addClass('facadedom');if(this.$2_0.get_renderMode()==='render-mode-server'){var $9=this.get_$2_1().containerNode.find('canvas');var $A=$0.find('canvas');var $B=$9.length;for(var $C=0;$C<$B;$C++){var $D=$9[$C];var $E=$A[$C];if(!ss.isValue($E)){continue;}var $F=$E.getContext('2d');if(ss.isValue($D)&&$D.width>0&&$D.height>0&&ss.isValue($F)){$F.drawImage($D,0,0);}}}this.get_$2_1().domScroll.append($0);}}
tab.DashboardTemplate=function(){tab.DashboardTemplate.initializeBase(this,[$("<div class='wcVizContainer' dojoAttachPoint='domScroll'>\n    <div class='wcVizDisplay'>\n    </div>\n</div>")]);this.domScroll=this.domRoot;this.containerNode=this.getElementBySelector('.wcVizDisplay');}
tab.DashboardTemplate.prototype={domScroll:null,containerNode:null}
tab.FlipboardNavigatorView=function(viewModel){tab.FlipboardNavigatorView.initializeBase(this,[viewModel,new tab.FlipboardNavigatorTemplate()]);this.$2_0=viewModel;this.$2_1=this.get_template();this.$2_5();this.$2_2();if(this.$2_0.get_showArrows()){this.$2_3();}else{this.$2_1.previous.hide();this.$2_1.next.hide();}this.$2_0.add_newStoryPoint(ss.Delegate.create(this,this.handleNewStoryPoint));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newStoryPoint(ss.Delegate.create(this,this.handleNewStoryPoint));})));}
tab.FlipboardNavigatorView.prototype={$2_0:null,$2_1:null,get_domRoot:function(){return this.get_template().domRoot;},$2_2:function(){this.disposables.add(tab.ClickHandler.targetAndClick(this.$2_1.points,ss.Delegate.create(this,function($p1_0){
var $1_0=$($p1_0.target);if($1_0.hasClass('tabContent')){$1_0=$1_0.parent();}this.$2_0.clickStoryPoint($1_0.data()['tabnavindex']);})));},$2_3:function(){this.disposables.add(tab.ClickHandler.targetAndClick(this.$2_1.previous,ss.Delegate.create(this,function($p1_0){
this.$2_0.clickPrevious();})));this.disposables.add(tab.ClickHandler.targetAndClick(this.$2_1.next,ss.Delegate.create(this,function($p1_0){
this.$2_0.clickNext();})));},dispose:function(){tab.FlipboardNavigatorView.callBaseMethod(this, 'dispose');},onAddedToDom:function(){tab.FlipboardNavigatorView.callBaseMethod(this, 'onAddedToDom');if(ss.isValue(this.$2_0.get_flipboardNavigatorModel())){this.handleNewStoryPoint();}},handleNewStoryPoint:function(){this.$2_1.points.empty();this.$2_5();this.$2_4(this.$2_0.getCurrentPointIndex()).addClass('tabCurrent');this.$2_1.previous.toggleClass('tabDisabled',this.$2_0.get_previousDisabled());this.$2_1.next.toggleClass('tabDisabled',this.$2_0.get_nextDisabled());},$2_4:function($p0){return this.$2_1.points.find("[data-tabnavindex='"+$p0+"']");},$2_5:function(){var $0=this.$2_0.getStoryPoints();for(var $1=0;$1<$0.length;$1++){if($0[$1].isCaptured){this.$2_1.points.append("<span class='tabFlipboardNavPoint' data-tabnavindex='"+$1+"'>\n                            <div class='tabContent'>"+$0[$1].storyPointCaption+'</div>\n                        </span>');}}}}
tab.FlipboardNavigatorTemplate=function(){tab.FlipboardNavigatorTemplate.initializeBase(this,[$("<div class='tabFlipboardNav'>\n    <span class='tabFlipboardNavPrevious'><div class='tabStoryLeftArrow'/></span><span class='tabFlipboardNavPoints'/><span class='tabFlipboardNavNext'><div class='tabStoryRightArrow'/></span>\n</div>")]);this.previous=this.getElementBySelector('.tabFlipboardNavPrevious');this.points=this.getElementBySelector('.tabFlipboardNavPoints');this.next=this.getElementBySelector('.tabFlipboardNavNext');}
tab.FlipboardNavigatorTemplate.prototype={previous:null,points:null,next:null}
tab.FlipboardView=function(viewModel){tab.FlipboardView.initializeBase(this,[viewModel,new tab.FlipboardTemplate()]);this.$2_0=viewModel;this.$2_0.add_newStoryPoint(ss.Delegate.create(this,this.handleNewStoryPoint));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newStoryPoint(ss.Delegate.create(this,this.handleNewStoryPoint));})));}
tab.FlipboardView.prototype={$2_0:null,onAddedToDom:function(){tab.FlipboardView.callBaseMethod(this, 'onAddedToDom');if(ss.isValue(this.$2_0.get_dashboardViewModel())){this.handleNewStoryPoint();}},handleNewStoryPoint:function(){var $0=tab.ObjectRegistry.newView(tab.DashboardView,this.$2_0.get_dashboardViewModel());$0.addToDom(this.get_template().domRoot);}}
tab.FlipboardTemplate=function(){tab.FlipboardTemplate.initializeBase(this,[$("<div class='tabFlipboard'></div>")]);}
tab.PaneTableView=function(paneTableVM,template){this.regions={};this.$2_1=-1;this.$2_2=-1;this.$2_A=[];tab.PaneTableView.initializeBase(this,[paneTableVM,template]);this.dom=template;this.$2_16();this.paneTableVM=paneTableVM;this.paneTableVM.get_viewController().setTiledViewer(this);this.$2_0=new Date().getTime();this.overlayImages=[];this.get_dom().view.attr('id','view'+tab.ModelUtils.findContentDashboard().getViewId(this.get_sheetid()));this.get_dom().title.css('display',(this.paneTableVM.get_hasTitle())?'':'none');this.get_dom().caption.css('display',(this.paneTableVM.get_hasCaption())?'':'none');tab.ModelUtils.withVisualModel(this.get_sheetid(),ss.Delegate.create(this,function($p1_0){
if(this.paneTableVM.get_hasTitle()){var $1_0=new tab.TextRegionViewModel($p1_0.get_titleModel());this.$2_C=new tab.TextRegionView($1_0);this.$2_C.addToDom(this.dom.title);}if(this.paneTableVM.get_hasCaption()){var $1_1=new tab.TextRegionViewModel($p1_0.get_captionModel());this.$2_D=new tab.TextRegionView($1_1);this.$2_D.addToDom(this.dom.caption);}this.isMap=$p1_0.get_isMap();}));this.paneTableVM.add_newPaneTable(ss.Delegate.create(this,this.handleNewVisual));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.paneTableVM.remove_newPaneTable(ss.Delegate.create(this,this.handleNewVisual));})));}
tab.PaneTableView.prototype={dom:null,scrollPosX:0,scrollPosY:0,ftv:null,isMap:false,overlayImages:null,geometry:null,visibleGeometry:null,tooltip:null,zoomToolbar:null,paneTableVM:null,tooltipRID:0,$2_0:null,$2_3:0,$2_4:null,$2_5:null,$2_6:0,$2_7:0,$2_8:0,$2_9:null,$2_B:null,$2_C:null,$2_D:null,$2_E:false,get_geometry:function(){return this.geometry;},get_visibleGeometry:function(){return this.visibleGeometry;},get_sortIndicators:function(){return this.paneTableVM.get_sortIndicators();},get_posTVx:function(){return this.$2_6;},get_posTVy:function(){return this.$2_7;},get_dom:function(){return this.dom;},get_sheetid:function(){return this.paneTableVM.get_sheetId();},get_layoutSession:function(){return this.paneTableVM.get_layoutSession();},get_session:function(){return this.get_controller().get_viewSession();},get_tlspacerAreaX:function(){return this.$2_4;},get_tlspacerAreaY:function(){return this.$2_5;},get_blspacerArea:function(){return this.$2_B;},get_titleHeight:function(){return this.$2_3;},get_scrollPositionX:function(){return this.scrollPosX;},get_scrollPositionY:function(){return this.scrollPosY;},get_controller:function(){return this.paneTableVM.get_viewController();},init:function(){this.$2_17();this.makeConnections();this.makeRegions();this.makeInputHandlers();this.tooltip=this.makeTooltip(this.get_element(),this.get_layoutSession());this.tooltip.add_closed(ss.Delegate.create(this,this.onTooltipClosed));this.$2_9=new tab.Ubertip(this.tooltip);this.$2_9.add_commandExecuted(ss.Delegate.create(this,this.onCommandExecuted));this.$2_9.add_actionExecuted(ss.Delegate.create(this,this.onActionExecuted));this.setupDrilling();this.setupSortIndicators();this.makeRegionContentProviders();},dispose:function(){this.$2_E=true;this.destroyInputHandlers();this.destroyRegions();this.disposables.dispose();this.visibleGeometry=null;this.disposeOfOverlayImages();if(ss.isValue(this.paneTableVM)){this.paneTableVM.remove_vizRegionMapChange(ss.Delegate.create(this,this.$2_13));if(ss.isValue(this.regions['viz'])){this.paneTableVM.remove_propertyChanged(ss.Delegate.create(this.regions['viz'],this.regions['viz'].$4));}}if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.dispose();}if(ss.isValue(this.$2_C)){this.$2_C.dispose();}if(ss.isValue(this.$2_D)){this.$2_D.dispose();}if(ss.isValue(this.tooltip)){this.tooltip.remove_closed(ss.Delegate.create(this,this.onTooltipClosed));this.tooltip.dispose();}if(ss.isValue(this.$2_9)){this.$2_9.remove_commandExecuted(ss.Delegate.create(this,this.onCommandExecuted));this.$2_9.remove_actionExecuted(ss.Delegate.create(this,this.onActionExecuted));this.$2_9.dispose();}tab.PaneTableView.callBaseMethod(this, 'dispose');},addDisposable:function(d){this.disposables.add(d);},resize:function(marginBox){tab.DomUtil.setMarginBoxJQ(this.get_element(),marginBox);this.layout();},zoomHome:function(){this.get_session().restoreSheetAxes();},doTiledViewerRefreshImages:function(cacheInfo){this.refreshImages(cacheInfo);},makeRegionContentProvidersHelper:function(vizRegionDomNode,onQueueComplete){var $0=this.listNonVizRegions();if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.paneTableVM.add_vizRegionMapChange(ss.Delegate.create(this,this.$2_13));var $1=new tab.PaneTableCanvasView(this.paneTableVM,this.getDomNodeForContentRegion(vizRegionDomNode));var $2=$('.tvimagesContainer',vizRegionDomNode);$2.get(0).appendChild($1.get_element().get(0));this.regions['viz'].set_contentProvider($1);this.paneTableVM.add_propertyChanged(ss.Delegate.create(this.regions['viz'],this.regions['viz'].$4));this.$2_13();var $enum1=ss.IEnumerator.getEnumerator(Object.keys($0));while($enum1.moveNext()){var $3=$enum1.current;var $4=$0[$3];$4.css('background-color',this.paneTableVM.get_scene().get_scene().bgColor);}}else{var $enum2=ss.IEnumerator.getEnumerator(Object.keys($0));while($enum2.moveNext()){var $5=$enum2.current;var $6=$0[$5];var $7=this.makeTiledWindow($6,this.get_session(),this.get_controller(),ss.Delegate.create(this,this.$2_14),null);this.regions[$5].set_contentProvider($7);}this.regions['viz'].set_contentProvider(this.makeTiledWindow(vizRegionDomNode,this.get_session(),this.get_controller(),ss.Delegate.create(this,this.$2_14),onQueueComplete));}},makeTiledWindowHelper:function(domNode,sessionRef,controllerRef,getRID,optionalCallback,scrollDomNode){var $0=new tab.TiledWindow(this.getDomNodeForContentRegion(domNode),sessionRef,controllerRef,getRID,scrollDomNode);if(ss.isValue(optionalCallback)){$0.add_loadComplete(optionalCallback);this.disposables.add(new tab.CallOnDispose(function(){
$0.remove_loadComplete(optionalCallback);}));}return $0;},listNonVizRegions:function(){var $0={};$0['yheader']=this.dom.yLabel;$0['leftaxis']=this.dom.leftAxis;$0['rightaxis']=this.dom.rightAxis;$0['xheader']=this.dom.xLabel;$0['bottomaxis']=this.dom.bottomAxis;$0['topaxis']=this.dom.topAxis;return $0;},listAllRegions:function(){var $0=this.listNonVizRegions();$0['viz']=this.dom.view;return $0;},destroyRegions:function(){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.regions));while($enum1.moveNext()){var $0=$enum1.current;if(ss.isValue(this.regions[$0])){this.regions[$0].destroy();}}},onTooltipClosed:function(senderTooltip,args){this.disposeOfOverlayImages();},onCommandExecuted:function(senderUbertip,args){this.tooltip.close();if(args.command.commandType===7){this.get_session().executeCommand(args.command);}else{tab.UberTipClientCommands.executeUbertipCommand(args.command);}},onActionExecuted:function(senderUbertip,args){this.tooltip.close();var $0=function(){
(senderUbertip).hideSpinner();};var $1=function($p1_0){
(senderUbertip).hideSpinner();};this.get_session().executeAction(args.action,$1,$0);},$2_F:function(){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.regions['viz'].reset();}},clearSelection:function(){tab.SelectionClientCommands.clearAllSelections(this.get_sheetid());},refreshImages:function(cacheInfo){this.$2_8+=1;var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.regions));while($enum1.moveNext()){var $0=$enum1.current;this.regions[$0].refreshImages(cacheInfo);}if(this.$2_A.length>0){var $1=this.$2_A.length;for(var $2=0;$2<$1;$2++){var $3=this.$2_A[$2]['element'];if(ss.isValue($3)){var $4=this.get_session().formatRegionTileURL(cacheInfo,this.$2_A[$2]['name'],this.$2_14());var $5=$3.children().first();var $6=tab.RenderUtil.calculatePixelRatio(false);if(tab.FloatUtil.isGreaterThan($6,1)){$5.css('width',$3.width().toString()+'px');}$5.attr('src',$4);}}}},layout:function(){var $0=this.get_element().outerWidth();var $1=this.get_element().outerHeight();if(this.$2_2===$1&&this.$2_1===$0){return;}this.$2_2=$1;this.$2_1=$0;},setGeometry:function(g,containerBox){var $0=0,$1=0;var $2=0,$3=0;var $4=0,$5=0;var $6=0,$7=0,$8=0;var $9=0,$A=0;var $B=0,$C=0;var $D,$E,$F,$10,$11,$12,$13;var $14,$15,$16,$17;this.$2_A=[];this.$2_8+=1;this.visibleGeometry=tab.$create_VisibleGeometry();var $18=this.visibleGeometry;var $19=tab.$create_GeometryWithRegions();$.extend(true,$19,g);this.geometry=$19;var $1A=$19.ri.length;for(var $24=0;$24<$1A;$24++){($19)[$19.ri[$24].r]=$19.ri[$24];}var $1B=containerBox.w;var $1C=containerBox.h;if(this.$2_1!==-1){$1B=this.$2_1;}if(this.$2_2!==-1){$1C=this.$2_2;}if(ss.isValue($19.title)){$3+=$19.title.h;}if(ss.isValue($19.xheader)){$6=$19.xheader.x;$4=$19.xheader.w;$3+=$19.xheader.h;}if(ss.isValue($19.bottomaxis)){$6=$19.bottomaxis.x;$4=$19.bottomaxis.w;$3+=$19.bottomaxis.h;}if(ss.isValue($19.topaxis)){$3+=$19.topaxis.h;}if(ss.isValue($19.viz)){$6=$19.viz.x;$4=$19.viz.w;$3+=$19.viz.h;}if(ss.isValue($19.caption)){$3+=$19.caption.h;}if(ss.isValue($19.yheader)){$8=$19.yheader.y;$5=$19.yheader.h;$2+=$19.yheader.w;}if(ss.isValue($19.leftaxis)){$8=$19.leftaxis.y;$5=$19.leftaxis.h;$2+=$19.leftaxis.w;}if(ss.isValue($19.rightaxis)){$2+=$19.rightaxis.w;}if(ss.isValue($19.viz)){$8=$19.viz.y;$5=$19.viz.h;$2+=$19.viz.w;}if($5>0&&$3>$1C){$9=tab.Metrics.get_scrollW();}if($4>0&&$2>$1B){$A=tab.Metrics.get_scrollH();}if($.browser.msie&&$9>0){$9+=1;}if($.browser.msie&&$A>0){$A+=1;}if($5>0){var $25=$3-$5;$C=$1C-$25-$A;$C=Math.min($5,$C);$1=$5-$C;}if($4>0){var $26=$2-$4;$B=$1B-$26-$9;$B=Math.min($4,$B);$0=$4-$B;}var $1D=Math.min($3-$1,$1C);var $1E=Math.min($2-$0,$1B);$7=$1D;if(ss.isValue($19.caption)){$7-=$19.caption.h;}var $1F=tab.ApplicationModel.get_instance().get_isLocalRenderMode();var $20=($1F&&ss.isValue($19.bottomaxis))?1:0;var $21=($1F&&ss.isValue($19.rightaxis))?1:0;if($1F){var $27=[$19.yheader,$19.rightaxis,$19.leftaxis,$19.viz];var $enum1=ss.IEnumerator.getEnumerator($27);while($enum1.moveNext()){var $29=$enum1.current;if(ss.isValue($29)){$29.h+=$20;}}var $28=[$19.xheader,$19.bottomaxis,$19.topaxis,$19.viz];var $enum2=ss.IEnumerator.getEnumerator($28);while($enum2.moveNext()){var $2A=$enum2.current;if(ss.isValue($2A)){$2A.w+=$21;}}}if($C<0){$C=0;}if($B<0){$B=0;}this.$2_3=0;if(ss.isValue($19.title)&&this.dom.title.css('display')!=='none'){var $2B=tab.$create_Rect(0,$19.title.y,$19.title.w,$19.title.h);var $2C=tab.DomUtil.getMarginBoxJQ(this.dom.title);if(!_.isEqual($2B,$2C)){tab.DomUtil.setMarginBoxJQ(this.dom.title,$2B);this.$2_C.handleNewTextRegion();this.$2_3=$19.title.h;$7=Math.max($7,$19.title.h+$19.title.y);}}$E=function(){
return tab.$create_Rect($19.yheader.x,$19.yheader.y,Math.min($19.yheader.w,$1B-$9),$C+$20);};$18.yheaderArea=this.setRegionAndContentGeometry($19.yheader,this.dom.yLabel,$E,'yheader',$19.ts);$F=function(){
return tab.$create_Rect($19.leftaxis.x,$19.leftaxis.y,$19.leftaxis.w,$C+$20);};$18.leftaxisArea=this.setRegionAndContentGeometry($19.leftaxis,this.dom.leftAxis,$F,'leftaxis',$19.ts);$10=function(){
return tab.$create_Rect($19.rightaxis.x-$0,$19.rightaxis.y,$19.rightaxis.w,$C+$20);};$18.rightaxisArea=this.setRegionAndContentGeometry($19.rightaxis,this.dom.rightAxis,$10,'rightaxis',$19.ts);$11=function(){
return tab.$create_Rect($19.xheader.x,$19.xheader.y,$B+$21,$19.xheader.h);};$18.xheaderArea=this.setRegionAndContentGeometry($19.xheader,this.dom.xLabel,$11,'xheader',$19.ts);$12=function(){
return tab.$create_Rect($19.bottomaxis.x,$19.bottomaxis.y-$1,$B+$21,$19.bottomaxis.h);};$18.bottomaxisArea=this.setRegionAndContentGeometry($19.bottomaxis,this.dom.bottomAxis,$12,'bottomaxis',$19.ts);$13=function(){
return tab.$create_Rect($19.topaxis.x,$19.topaxis.y,$B+$21,$19.topaxis.h);};$18.topaxisArea=this.setRegionAndContentGeometry($19.topaxis,this.dom.topAxis,$13,'topaxis',$19.ts);if(ss.isValue($19.caption)&&this.dom.caption.css('display')!=='none'){var $2D=tab.$create_Rect($19.caption.x,$19.caption.y-$1,$19.caption.w,$19.caption.h);var $2E=tab.DomUtil.getMarginBoxJQ(this.dom.caption);if(!_.isEqual($2D,$2E)){tab.DomUtil.setMarginBoxJQ(this.dom.caption,$2D);this.$2_D.handleNewTextRegion();}}var $22=null;if($1F){var $2F=this.paneTableVM.get_vizRegionMap()['background'];if(ss.isValue($2F)){$22=$2F.get_visualListPM().drawItems;}}$14=function(){
return tab.$create_Rect($19.uleft.x,$19.uleft.y,Math.min($19.uleft.w,$1B-$9),$19.uleft.h);};$18.uleftArea=this.setRegionGeometry($19.uleft,this.dom.tlSpacer,$14);if(ss.isValue($19.uleft)){this.$2_10(this.dom.tlSpacer,'uleft',$22,$19.uleft);this.$2_5=$.extend({},$18.uleftArea);if(ss.isValue($19.di)&&$19.uleft.h>=40){this.$2_5.t=$19.uleft.y+$19.uleft.h-40;this.$2_5.h=40;}this.$2_4=null;if(ss.isValue($19.di)&&ss.isValue($19.di.xy)&&ss.isValue($19.di.xy[0])){var $30=18;var $31=$19.xheader;if(ss.isValue($31)&&$31.h>$19.di.xs){$1A=$19.di.xy.length;for(var $32=0;$32<$1A;$32++){if($19.di.xy[$32][1]>0){this.$2_4=tab.$create_Rect(this.$2_5.l+this.$2_5.w-$30,$19.uleft.y,$30,$19.uleft.h);this.$2_5.w=this.$2_4.l;break;}}}}}else{this.$2_5=null;this.$2_4=null;}$15=function(){
return tab.$create_Rect($19.uright.x-$0,$19.uright.y,Math.min($19.uright.w,$1B-$9),$19.uright.h);};this.setRegionGeometry($19.uright,this.dom.trSpacer,$15);if(ss.isValue($19.uright)){this.$2_10(this.dom.trSpacer,'uright',$22,$19.uright);}$16=function(){
return tab.$create_Rect($19.lleft.x,$19.lleft.y-$1,$19.lleft.w,$19.lleft.h);};this.$2_B=this.setRegionGeometry($19.lleft,this.dom.blSpacer,$16);if(ss.isValue($19.lleft)){this.$2_10(this.dom.blSpacer,'lleft',$22,$19.lleft);}$17=function(){
return tab.$create_Rect($19.lright.x-$0,$19.lright.y-$1,$19.lright.w,$19.lright.h);};this.setRegionGeometry($19.lright,this.dom.brSpacer,$17);if(ss.isValue($19.lright)){this.$2_10(this.dom.brSpacer,'lright',$22,$19.lright);}$D=function(){
return tab.$create_Rect($19.viz.x,$19.viz.y,$B+$21,$C+$20);};this.setRegionAndContentGeometry($19.viz,this.dom.view,$D,'viz',$19.ts);this.setGeometryForWebScrollbars($C,$B,$9,$A,$8,$1E,$7,$6,$5,$4);this.refreshScrollingAndDrilling();var $23=this.dom.domRoot.offset();this.$2_6=$23.left;this.$2_7=$23.top;},$2_10:function($p0,$p1,$p2,$p3){if(ss.isValue($p2)){var $0=this.$2_11($p0,'canvas');var $1=tab.CanvasRenderer.$7($0);var $2=$p0.width();var $3=$p0.height();$0.width=$2;$0.height=$3;var $4=new tab.DisplayList2DRenderer($0,$1);tab.CanvasUtil.applyHighDPISupport($0,$1);$1.setDefaultPropertyValues();$4.set_renderOffset(tab.$create_Point($p3.x,$p3.y));var $5=null;if(ss.isValue(this.paneTableVM)&&ss.isValue(this.paneTableVM.get_scene())){$5=this.paneTableVM.get_scene().get_imageDictionary();}$4.renderDrawItems($p2,null,$5,null);}else{this.$2_11($p0,'img');this.$2_A.add({name:$p1,element:$p0});}},$2_11:function($p0,$p1){var $0=$p0.get(0).firstChild;if($0.tagName!==$p1){$0=document.createElement($p1);$p0.children().first().replaceWith($0);}return $0;},setRegionAndContentGeometry:function(rect,domNode,boxFunc,regionKey,tileSize){var $0=this.setRegionGeometry(rect,domNode,boxFunc);if(ss.isValue(rect)){var $1=boxFunc();this.regions[regionKey].setGeometry(rect,$1,tileSize);}return $0;},resolvePane:function(point){var $0,$1;var $2=this.geometry.pi;var $3=tab.$create_Point(point.x,point.y);var $4=tab.$create_PaneInfo($2.hasXQAxis,$2.hasYQAxis,0,0,0,0);$1=$2.xWidths.length;for($0=0;$0<$1;$0++){if($3.x<$4.x+$2.xWidths[$0]){$4.tx=$0;$4.w=$2.xWidths[$0];break;}$4.x=$4.x+$2.xWidths[$0];}$1=$2.yHeights.length;for($0=0;$0<$1;$0++){if($3.y<$4.y+$2.yHeights[$0]){$4.ty=$0;$4.h=$2.yHeights[$0];break;}$4.y=$4.y+$2.yHeights[$0];}return $4;},allowPanZoom:function(){if(ss.isNullOrUndefined(this.geometry)){return false;}var $0=this.geometry.pi.hasXQAxis;var $1=this.geometry.pi.hasYQAxis;return ($0||$1)&&tsConfig.allow_filter;},isOneVisiblePane:function(){if(ss.isValue(this.geometry)){var $0,$1;var $2=this.geometry.viz.w;var $3=this.geometry.viz.h;var $4=this.geometry.pi.xWidths;var $5=this.geometry.pi.yHeights;$1=$4.length;for($0=0;$0<$1;$0++){if(Math.abs($2-$4[$0])>1){return false;}}$1=$5.length;for($0=0;$0<$1;$0++){if(Math.abs($3-$5[$0])>1){return false;}}}return true;},hideTooltip:function(){this.tooltip.close();},tooltipFailureCallback:function(){this.$2_9.handleRemoteFailure();},showTooltipCallback:function(rid,anchorOverride,region,ubertipModel,overlayImageSource){if((ss.isValue(rid)&&this.tooltipRID.toString()!==rid)||ss.isNullOrUndefined(ubertipModel)||(region.get_regionPart()==='viz'&&tab.MiscUtil.isNullOrEmpty(ubertipModel.selectionHtml)&&tab.MiscUtil.isNullOrEmpty(ubertipModel.tooltipHtml))){return;}var $0=$.extend({},anchorOverride);if(ubertipModel.isUpdate){this.$2_9.updateFromRemote(ubertipModel);}else{this.showTooltip(region,ubertipModel,$0);}this.maybeShowOverlayImages(ubertipModel,overlayImageSource);},showTooltip:function(region,ubertipModel,position){var $0=tab.PointUtil.add(position,tab.RecordCast.dojoCoordsAsPoint(region.getLocalOffset()));if(this.tooltip.get_isShown()&&tab.PointUtil.equals(this.tooltip.get_location(),$0)){return;}this.tooltip.tupleId=ubertipModel.tupleId;if(ss.isValue(ubertipModel.interactedTupleId)){this.tooltip.interactedTupleId=ubertipModel.interactedTupleId;}else{this.tooltip.interactedTupleId=-1;}if(ss.isValue(ubertipModel.tooltipOffset)){if(ss.isValue(ubertipModel.tooltipOffset.x)){this.tooltip.set_horizontalOffset(ubertipModel.tooltipOffset.x);}if(ss.isValue(ubertipModel.tooltipOffset.y)){this.tooltip.set_verticalOffset(ubertipModel.tooltipOffset.y);}}else{this.tooltip.set_horizontalOffset(0);this.tooltip.set_verticalOffset(16);}this.$2_9.set_model(ubertipModel);this.tooltip.show(this.$2_9.get_element(),$0);},createOverlayImageFromDataUri:function(imageDataUri){var $0=new tab.OverlayImage(this.dom.view.get(0).firstChild.firstChild,'data:image/png;base64,'+imageDataUri);return $0;},createOverlayImageFromFile:function(uri){var $0=new tab.OverlayImage(this.dom.view.get(0).firstChild.firstChild,this.get_session().formatSessionTempfileReference(uri,false,false));return $0;},showOverlayImages:function(overlayImage,overlayAnchors){if(ss.isValue(overlayAnchors)&&ss.isValue(overlayImage)){this.disposeOfOverlayImages();var $enum1=ss.IEnumerator.getEnumerator(overlayAnchors);while($enum1.moveNext()){var $0=$enum1.current;var $1=overlayImage.clone();this.overlayImages.add($1);$1.show($0);}overlayImage.dispose();}},clickTitle:function(e){},clickCaption:function(e){},setupDrilling:function(){},setupSortIndicators:function(){},setGeometryForWebScrollbars:function(viewHeight,viewWidth,scrollWidth,scrollHeight,scrollYTop,overallWidth,scrollXTop,scrollXLeft,scrollableHeight,scrollableWidth){},disposeOfOverlayImages:function(){if(ss.isValue(this.overlayImages)){var $enum1=ss.IEnumerator.getEnumerator(this.overlayImages);while($enum1.moveNext()){var $0=$enum1.current;if(ss.isValue($0)){$0.dispose();}}this.overlayImages.clear();}},updateRegionContentProvider:function(regionKey,canvasView){this.regions[regionKey].set_contentProvider(canvasView);},handleNewVisual:function(){var $0={top:'0px',left:'0px',right:'0px',bottom:'0px'};this.get_template().domRoot.css($0);if(this.paneTableVM.isInvalidSheet()){$('<div/>').text(tab.Strings.BaseClientInvalidSheet(this.paneTableVM.get_sheetId())).addClass('wcInvalidSheet').appendTo(this.get_template().domRoot).get(0);return;}if(this.$2_E){return;}var $1=this.paneTableVM.get_visualModel();if(ss.isNullOrUndefined($1)){return;}this.isMap=$1.get_isMap();var $2=$1.get_floatingToolbarVisibility();if(this.ftv!==$2){this.$2_15($2);}if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.setZoomHomePossibility($1.get_hasModifiedAxes());}var $3=$1.get_geometryModel().get_presModel();this.setGeometry($3,$1.get_containerGeometry());},$2_12:function(){var $0=this.paneTableVM.get_cacheUrlInfo();this.refreshImages($0);},$2_13:function(){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var $0=this.listNonVizRegions();this.regions['viz'].get_contentProvider().set_scrollPos(tab.$create_Point(0,0));var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.paneTableVM.get_vizRegionMap()));while($enum1.moveNext()){var $1=$enum1.current;var $2=tab.ModelUtils.visualPartToRegionMap[$1];if(ss.isValue($2)&&ss.isValue(this.regions[$2])){if(ss.isNullOrUndefined(this.regions[$2].get_contentProvider())){var $3=$0[$2];if($3!=null){var $4=this.paneTableVM.get_vizRegionMap()[$1];var $5=new tab.SimpleRegionCanvasView($4,this.getDomNodeForContentRegion($3),this.paneTableVM);$3.find('.tvimagesContainer').append($5.get_element());this.updateRegionContentProvider($2,$5);}}else{this.regions[$2].get_contentProvider().set_scrollPos(tab.$create_Point(0,0));}}}var $enum2=ss.IEnumerator.getEnumerator(Object.keys(tab.ModelUtils.visualPartToRegionMap));while($enum2.moveNext()){var $6=$enum2.current;var $7=tab.ModelUtils.visualPartToRegionMap[$6];if(!Object.keyExists(this.paneTableVM.get_vizRegionMap(),$6)&&ss.isValue(this.regions[$7])&&ss.isValue(this.regions[$7].get_contentProvider())){this.regions[$7].get_contentProvider().destroy();this.regions[$7].set_contentProvider(null);}}}},$2_14:function(){return this.$2_0.toString()+'Z'+this.$2_8.toString();},$2_15:function($p0){if(tsConfig.allow_filter){if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.dispose();this.zoomToolbar=null;}this.ftv=$p0;this.zoomToolbar=this.makeFloatingZoomToolbar(this.dom.view);}},$2_16:function(){var $0=ss.Delegate.create(this,function($p1_0){
var $1_0=tab.$create_EventHandleSpec();$1_0.tap=ss.Delegate.create(this,function($p2_0){
$p2_0.stopPropagation();$p2_0.preventDefault();this.clearSelection();});this.disposables.add(tab.EventUtil.createEventHandler($p1_0.get(0),$1_0));});$0(this.dom.tlSpacer);$0(this.dom.trSpacer);$0(this.dom.blSpacer);$0(this.dom.brSpacer);$0(this.dom.title);$0(this.dom.caption);},$2_17:function(){this.disposables.add(new tab.SubscriptionDisposable(this.get_session().registerEventListener('selectionChanged',ss.Delegate.create(this,this.$2_F))));},onAddedToDom:function(){tab.PaneTableView.callBaseMethod(this, 'onAddedToDom');this.handleNewVisual();var $0=(tab.Application.get_instance().get_client()).get_dashboardViewModel();if(ss.isNullOrUndefined($0)||!$0.get_handlingRenderModeChange()){if(this.paneTableVM.get_visualModel().get_isVisualValid()){this.$2_12();}}}}
tab.PaneTableTemplate=function(root){tab.PaneTableTemplate.initializeBase(this,[root]);var $0=ss.Delegate.create(this,this.getElementBySelector);this.enclosingDiv=$0('.tab-clip');this.yLabel=$0('.tab-tvYLabel');this.leftAxis=$0('.tab-tvLeftAxis');this.rightAxis=$0('.tab-tvRightAxis');this.xLabel=$0('.tab-tvXLabel');this.bottomAxis=$0('.tab-tvBottomAxis');this.topAxis=$0('.tab-tvTopAxis');this.view=$0('.tab-tvView');this.title=$0('.tab-tvTitle');this.caption=$0('.tab-tvCaption');this.tlSpacer=$0('.tab-tvTLSpacer');this.trSpacer=$0('.tab-tvTRSpacer');this.blSpacer=$0('.tab-tvBLSpacer');this.brSpacer=$0('.tab-tvBRSpacer');}
tab.PaneTableTemplate.prototype={enclosingDiv:null,yLabel:null,leftAxis:null,rightAxis:null,xLabel:null,bottomAxis:null,topAxis:null,view:null,title:null,caption:null,tlSpacer:null,trSpacer:null,blSpacer:null,brSpacer:null}
tab.ParameterControlView=function(viewModel){tab.ParameterControlView.initializeBase(this,[viewModel,new tab.ParameterControlTemplate()]);this.$2_0=viewModel;this.$2_0.add_newParameterControl(ss.Delegate.create(this,this.handleNewParameterControl));this.$2_0.add_resized(ss.Delegate.create(this,this.updateSize));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newParameterControl(ss.Delegate.create(this,this.handleNewParameterControl));})));if(this.$2_0.get_hasBorder()){this.get_template().domRoot.addClass('tabBordered');}}
tab.ParameterControlView.prototype={$2_0:null,$2_1:null,get_zonePresModel:function(){return this.$2_0.get_zone();},get_domRoot:function(){return this.get_template().domRoot;},get_$2_3:function(){return this.$2_0.get_frame();},dispose:function(){if(ss.isValue(this.$2_1)){this.$2_1.destroyRecursive(false);this.$2_1=null;}tab.ParameterControlView.callBaseMethod(this, 'dispose');},onAddedToDom:function(){tab.ParameterControlView.callBaseMethod(this, 'onAddedToDom');if(ss.isValue(this.$2_0.get_parameterCtrlModel())){this.handleNewParameterControl();}},handleNewParameterControl:function(){if(ss.isNullOrUndefined(this.$2_1)){this.$2_1=this.createParameterControl();this.get_template().domRoot.append(this.$2_1.domNode);this.$2_1.startup();tab.DomUtil.resize(this.$2_1,tab.ZoneView.viewRect(this.get_zonePresModel()));}else{this.$2_1.updateTitle();this.$2_1.refreshState(this.get_$2_3().attributes);}this.$2_1.layout();},updateSize:function(){tab.DomUtil.resize(this.$2_1,tab.ZoneView.viewRect(this.get_zonePresModel()));this.$2_1.layout();},createParameterControl:function(){var $0={};$0.session=this.$2_0.get_layoutSession();$0.zid=this.get_zonePresModel().zoneId.toString();$0.field=this.get_$2_3().param;if(ss.isValue(this.get_zonePresModel().styledBox.fillColor)){$0.backgroundColor=this.get_zonePresModel().styledBox.fillColor;}$0.titleH=this.get_$2_3().titleH;$0.titleW=this.get_$2_3().titleW;if(ss.isValue(this.get_zonePresModel().zoneTitle)){$0.titleHTML=this.get_zonePresModel().zoneTitle.html;var $1=this.get_zonePresModel().zoneTitle.w;$0.titleW=(!$0.titleW)?0:$1;}if(ss.isValue(this.get_$2_3().format)){$0.format=this.get_$2_3().format;}if(ss.isValue(this.get_$2_3().attributes)){$0.attributes=this.get_$2_3().attributes;}this.$2_1=this.makeParameterControl($0);return this.$2_1;},makeParameterControl:function(oProps){return new tableau.base.widget.ParameterControl(oProps);}}
tab.ParameterControlTemplate=function(){tab.ParameterControlTemplate.initializeBase(this,[$("<div class='tab-parameter'></div>")]);}
tab.QuickFilterView=function(viewModel){tab.QuickFilterView.initializeBase(this,[viewModel,new tab.QuickFilterTemplate()]);this.$2_0=viewModel;this.$2_0.add_newQuickFilter(ss.Delegate.create(this,this.handleNewQuickFilter));this.$2_0.add_resized(ss.Delegate.create(this,this.updateSize));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newQuickFilter(ss.Delegate.create(this,this.handleNewQuickFilter));})));if(this.$2_0.get_hasBorder()){this.get_template().domRoot.addClass('tabBordered');}}
tab.QuickFilterView.prototype={$2_0:null,$2_1:null,get_zonePresModel:function(){return this.$2_0.get_zone();},get_domRoot:function(){return this.get_template().domRoot;},get_$2_3:function(){return this.$2_0.get_frame();},dispose:function(){if(ss.isValue(this.$2_1)){this.$2_1.destroyRecursive(false);this.$2_1=null;}tab.QuickFilterView.callBaseMethod(this, 'dispose');},onAddedToDom:function(){tab.QuickFilterView.callBaseMethod(this, 'onAddedToDom');if(ss.isValue(this.$2_0.get_quickFilterModel())){this.handleNewQuickFilter();}},handleNewQuickFilter:function(){this.$2_1=this.createFilterPanel();this.get_template().domRoot.append(this.$2_1.domNode);this.$2_1.startup();this.updateSize();},updateSize:function(){tab.DomUtil.resize(this.$2_1,tab.ZoneView.viewRect(this.get_zonePresModel()));var $0=this.$2_0.get_quickFilterPresModel().quickFilterTitle.h;if(this.$2_0.get_hasBorder()){$0+=3;}$0=Math.max($0,15);var $1=this.$2_0.get_quickFilterPresModel().quickFilterTitle.w;this.$2_1.setTitleSize((!this.get_zonePresModel().titleHeight)?0:$0,(!this.get_zonePresModel().titleWidth)?0:$1);},createFilterPanel:function(){if(ss.isValue(this.$2_1)){return this.$2_1;}var $0=this.$2_0.get_layoutSession();var $1=this.$2_0.get_zone().sheet;var $2={};$2.sessionid=$0.get_id();$2.urlRoot=$0.get_urlRoot();$2.layoutSession=$0;$2.sheetid=$1;$2.zid=this.get_$2_3().key.zid;$2.titleHTML=this.$2_0.get_quickFilterModel().get_quickFilterTitle().html;$2.session=this.$2_0.get_viewSession();$2.field=this.get_$2_3().param;$2.viewModel=this.$2_0;if(ss.isValue(this.get_$2_3().format)){$2.format=this.get_$2_3().format;}if(ss.isValue(this.get_$2_3().attributes)){$2.attributes=this.get_$2_3().attributes;}if(ss.isValue(this.get_$2_3().w)){$2.width=this.get_$2_3().w;}var $3=ss.Delegate.create(this,function($p1_0,$p1_1){
this.$2_4(this.get_$2_3().param,$1,$p1_0,$p1_1);});$2.requestSetAttributes=$3;$2.textStyle=this.$2_0.get_quickFilterPresModel().textStyle;if(ss.isValue(this.get_zonePresModel().styledBox)){$2.backgroundColor=this.get_zonePresModel().styledBox.fillColor;}var $4=this.makeFilterPanel($2);return $4;},makeFilterPanel:function(oProps){return new tableau.base.widget.FilterPanel(oProps);},$2_4:function($p0,$p1,$p2,$p3){if(Object.keyExists($p2,'mode')){tab.FilterClientCommands.setCategoricalQuickFilterMode($p1,$p0,$p2['mode']);}else if(Object.keyExists($p2,'values')){tab.FilterClientCommands.setCategoricalQuickFilterDomain($p1,$p0,$p2['values']);}}}
tab.QuickFilterTemplate=function(){tab.QuickFilterTemplate.initializeBase(this,[$("<div class='tab-quick-filter'></div>")]);}
tab.QuantitativeColorLegendView=function(viewModel){tab.QuantitativeColorLegendView.initializeBase(this,[viewModel,new tab.QuantitativeColorLegendTemplate()]);}
tab.QuantitativeColorLegendView.setDomNodeStyleSize=function(domNode,width,height){domNode.css('width',width+'px');domNode.css('height',height+'px');}
tab.QuantitativeColorLegendView.prototype={get_$2_1:function(){return this.get_viewModel();},get_$2_2:function(){return this.get_template();},onAddedToDom:function(){tab.QuantitativeColorLegendView.callBaseMethod(this, 'onAddedToDom');this.$2_4();},onViewModelPropertyChanged:function(sender,e){if(e.get_propertyName()==='isActiveZone'){}else if(e.get_propertyName()==='ParentZoneSizeChanged'){var $0=this.get_$2_1().get_$1_3();if($0.w===this.get_$2_2().panel.width()&&$0.h===this.get_$2_2().panel.height()){}else{this.$2_3();}}else if(e.get_propertyName()==='ModelChanged'){this.$2_3();}},$2_3:function(){this.$2_4();},$2_4:function(){var $0=this.get_$2_1().get_quantColorLegendPresModel();var $1=$0.styledBox;var $2=$1.uw;var $3=this.get_$2_1().get_$1_3().w;var $4=this.get_$2_1().get_$1_3().h;tab.QuantitativeColorLegendView.setDomNodeStyleSize(this.get_$2_2().panel,$3,$4);var $5=$0.quantitativeLegendLayout.rectTitle;this.get_$2_2().titleArea.html($0.titleHtml);var $6=this.get_$2_1().get_$1_4();$6.h=Math.max(0,$6.h-(2*$2));$6.w=Math.max(0,$6.w-(2*$2));var $7=tab.FormattingConverters.$3($5);this.get_$2_2().titleArea.css($7);if(this.get_$2_1().get_titleInline()){this.get_$2_2().titleArea.css('display','inline-block');this.get_$2_2().titleArea.css('vertical-align','middle');}else{this.get_$2_2().titleArea.width($3);this.get_$2_2().titleArea.height($6.h);}tableau.util.setupTitleEllipsis(this.get_$2_2().titleArea);var $9=$0.quantitativeLegendLayout.rectRamp;var $A=this.get_$2_2().ramp;$A.css('left',$9.x.toString()+'px');$A.css('top',$9.y.toString()+'px');var $B=$9.w+1;var $C=$9.h+1;$A.css('width',$B+'px');$A.css('height',$C+'px');var $D=$A.get(0);$D.width=$B;$D.height=$C;var $E=new tab.TabRenderContext2D($D.getContext('2d'));$E.save();tab.CanvasUtil.applyHighDPISupport($D,$E);var $F=this.get_$2_1().get_rampColorSamplesAsColorModels();var $10=$F.length;if($0.isColorStepped){var $11=0;var $12=Math.round($B/$10);for(var $14=0;$14<$10-1;++$14){$E.set_shapeFillStyle($F[$14]);$E.fillRect($11,0,$12+1,$C);$11+=$12;}var $13=$D.width-$11;$E.set_shapeFillStyle($F[$10-1]);$E.fillRect($11,0,$13,$C);}else{var $15=$E.createLinearGradient(0,0,$B,0);var $16=1/($10-1);for(var $17=0;$17<$10;++$17){var $18=$17*$16;$15.addColorStop($18,$F[$17]);}$E.set_shapeFillStyle($15);$E.fillRect(0,0,$B,$C);}$E.restore();var $19=tab.FormattingConverters.$2($0.rampBorderStyledBox);$A.css($19);if($0.isColorDiverging){this.get_$2_2().centerMark.css('visibility','visible');var $1A=$0.quantitativeLegendLayout.centerMarkLineBegin.x;var $1B=$0.quantitativeLegendLayout.centerMarkLineBegin.y;var $1C=$0.quantitativeLegendLayout.centerMarkLineEnd.y;var $1D=$1C-$1B;this.get_$2_2().centerMark.css('left',$1A.toString()+'px');this.get_$2_2().centerMark.css('top',$1B.toString()+'px');this.get_$2_2().centerMark.width(1);this.get_$2_2().centerMark.height($1D);this.get_$2_2().centerMark.css('background-color','black');}else{this.get_$2_2().centerMark.css('visibility','hidden');}var $1E=$0.quantitativeLegendLayout.rectMinLabel;var $1F=this.get_$2_2().minLabel;$1F.css('left',$1E.x.toString()+'px');$1F.css('top',$1E.y.toString()+'px');$1F.css('width',$1E.w.toString()+'px');$1F.css('height',$1E.h.toString()+'px');$1F.css('text-align',($0.quantitativeLegendLayout.isSingleLabel)?'center':'left');var $20=$0.labelTextStyle;$1F.css(tab.FormattingConverters.$1($20,null));$1F.text($0.minLabel);var $8=this.get_$2_2().maxLabel;if($0.quantitativeLegendLayout.isSingleLabel){$8.css('visibility','hidden');}else{$8.css('visibility','show');var $21=$0.quantitativeLegendLayout.rectMaxLabel;$8.css('left',$21.x.toString()+'px');$8.css('top',$21.y.toString()+'px');$8.css('width',$21.w.toString()+'px');$8.css('height',$21.h.toString()+'px');$8.css('text-align','right');var $22=$0.labelTextStyle;$8.css(tab.FormattingConverters.$1($22,null));$8.text($0.maxLabel);}}}
tab.QuantitativeColorLegendTemplate=function(){tab.QuantitativeColorLegendTemplate.initializeBase(this,[$("\n            <div class='tabLegendPanel' style='position: relative; overflow: hidden'>\n                <div class='tabLegendTitle' style='position: absolute'></div>\n                <canvas class='tabLegendRamp' style='position: absolute'></canvas>\n                <div class='tabLegendCenterMark' style='position: absolute'></div>\n                <div class='tabLegendMinLabel' style='position: absolute'></div>\n                <div class='tabLegendMaxLabel' style='position: absolute'></div>\n            </div>")]);this.panel=this.domRoot;this.titleArea=this.getElementBySelector('.tabLegendTitle');this.ramp=this.getElementBySelector('.tabLegendRamp');this.centerMark=this.getElementBySelector('.tabLegendCenterMark');this.minLabel=this.getElementBySelector('.tabLegendMinLabel');this.maxLabel=this.getElementBySelector('.tabLegendMaxLabel');}
tab.QuantitativeColorLegendTemplate.prototype={panel:null,titleArea:null,ramp:null,centerMark:null,minLabel:null,maxLabel:null}
tab.ImageZoneView=function(viewModel,parentZoneViewModel){tab.ImageZoneView.initializeBase(this,[viewModel,new tab.ImageZoneTemplate()]);this.$2_0=viewModel;this.$2_1=parentZoneViewModel;this.$2_0.add_newImageZone(ss.Delegate.create(this,this.handleNewImageZone));this.$2_1.add_resizeZone(ss.Delegate.create(this,this.$2_7));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newImageZone(ss.Delegate.create(this,this.handleNewImageZone));this.$2_1.remove_resizeZone(ss.Delegate.create(this,this.$2_7));})));}
tab.ImageZoneView.prototype={$2_0:null,$2_1:null,$2_2:null,$2_3:null,get_domRoot:function(){return this.get_template().domRoot;},get_image:function(){return this.$2_2;},onAddedToDom:function(){tab.ImageZoneView.callBaseMethod(this, 'onAddedToDom');this.handleNewImageZone();},handleNewImageZone:function(){this.createImageZoneView();},createImageZoneView:function(){var $0={position:'absolute',overflow:'hidden',top:'0px',left:'0px',right:'0px',bottom:'0px'};this.get_template().domRoot.css($0);if(!this.$2_4()){this.$2_2=this.$2_5();}else{this.$2_8();}},$2_4:function(){var $0=this.get_image();if(ss.isNullOrUndefined($0)||$0.attr('src')!==this.$2_0.get_imageUrl()){return false;}else{var $1=$0.get(0).width;var $2=$0.get(0).height;if(!$1&&!$2){return false;}}return true;},$2_5:function(){var $0=$('<img>');var $1=ss.Delegate.create(this,function(){
if(this.$2_2==null){window.setTimeout(ss.Delegate.create(this,function(){
this.$2_3=$0.get(0);this.$2_8();}),1);}else{this.$2_3=$0.get(0);this.$2_8();}});$0.load($1);var $2=this.$2_0.get_imageUrl();$0.css('border','none').attr('src',$2);if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<7){$0.css('position','absolute');}return $0;},$2_6:function($p0){this.get_template().domRoot.empty();this.get_template().domRoot.append($p0);},$2_7:function(){this.$2_8();},$2_8:function(){var $0=this.$2_0.get_imageZonePresModel();if($0.isScaled){this.$2_B();}var $1=this.$2_A();this.$2_6($1);if($0.isCentered){this.$2_C($1);}return $1;},$2_9:function(){var $0=this.$2_0.get_zonePresModel();var $1=this.$2_0.get_imageZonePresModel();var $2=tab.URIUtil.absolutizeURI($1.url);var $3=($0.zoneType==='bitmap'&&!tab.MiscUtil.isNullOrEmpty($1.imageKey)&&!tab.MiscUtil.isNullOrEmpty($2));if($3){return $('<a/>').attr('href',$2).attr('target','_blank').css({position:'absolute',outline:'none'});}else{return $('<div/>');}},$2_A:function(){var $0=this.get_image();var $1=this.$2_9();$1.append($0);return $1;},$2_B:function(){var $0=this.$2_0.get_zonePresModel();var $1=this.$2_3.width;var $2=this.$2_3.height;if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()>8){$1=this.$2_3.naturalWidth;$2=this.$2_3.naturalHeight;}var $3=0;var $4=0;var $5;if($1/$0.w>=$2/$0.h){$5={width:$0.w.toString()+'px',height:'auto'};$3=$0.w;$4=parseInt((($0.w/$1)*$2));}else{$5={height:$0.h.toString()+'px',width:'auto'};$4=$0.h;$3=parseInt((($0.h/$2)*$1));}if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()>8){if($3/$1<0.75&&$1<500&&$2<500){var $6=this.$2_2.get(0).getAttribute('src');var $7=tab.ImageUtil.scaleImage(this.$2_3,$3,$4,$1,$2);this.$2_2=$($7);this.$2_2.get(0).setAttribute('src',$6);$5={width:$3+'px',height:$4+'px'};}else{this.$2_2=$(this.$2_3);}}this.$2_2.css($5);},$2_C:function($p0){var $0=this.$2_0.get_zonePresModel();var $1=($0.h-this.get_image().height())/2;var $2=($0.w-this.get_image().width())/2;$p0.css({position:'absolute',top:$1.toString()+'px',left:$2.toString()+'px'});}}
tab.ImageZoneTemplate=function(){tab.ImageZoneTemplate.initializeBase(this,[$("<div class='tab-image'></div>")]);}
tab.LegendPanel=function(props){this.format={};this.bodyOffset=tab.$create_Point(0,0);this.$1_1=[];this.disposables=new tab.DisposableHolder();tab.LegendPanel.initializeBase(this);}
tab.LegendPanel.prototype={field_name_id:'',forceRefreshAll:false,isContainer:true,widgetsInTemplate:true,tooltipRID:0,scroll_cnt:0,region:null,session:null,rid:0,lTitle:'',titleHeight:0,titleWidth:0,field_name:'',manualYDisplayOffset:0,manualXDisplayOffset:0,timestamp:0,eventHandler:null,categorical:null,visually_cat:null,inline:null,vertical_layout:null,highlight_on:null,column_width:1,regionHeight:0,regionWidth:0,borderWidth:0,domTitleBar:null,domBox:null,layoutSession:null,domHighlighter:null,domContent:null,domContentImageWrapper:null,highlight_enabled:false,toolTip:null,uberTip:null,tooltipIsOpen:null,bodySize:null,domTitleImage:null,domImageBody:null,sheetid:null,domHorizScrollButtonHolder:null,$1_2:null,get_format:function(){return this.format;},allowHover:function(){},disallowHover:function(){},postCreate:function(){this.timestamp=new Date().getTime();dojo.attr(this.domTitleBar,'title',this.lTitle);this.$1_4();this.eventHandler=this.makeViewerInputHandler(this.session,this.domContent);this.$1_1.add(this.session.registerEventListener('refreshLegacyLegendImages',ss.Delegate.create(this,this.refreshImages)));this.$1_1.add(this.session.registerEventListener('refreshVisualModel',ss.Delegate.create(this,this.refreshImages)));this.$1_1.add(this.session.registerEventListener('selectionChanged',ss.Delegate.create(this,this.onSelectionChanged)));this.$1_2=new tab.IteratorButtons($(this.domContent),true,12);if(ss.isValue(this.domHorizScrollButtonHolder)){$(this.domHorizScrollButtonHolder).append(this.$1_2.get_domRoot());dojo.style(this.domHorizScrollButtonHolder,'visibility','hidden');}this.updateHighlightStatus();this.hideControls();this.doConnections();this.tooltipRID=0;this.toolTip=this.makeTooltip(this.domNode,this.layoutSession);this.disposables.add(this.toolTip);this.uberTip=new tab.Ubertip(this.toolTip);this.disposables.add(this.uberTip);this.uberTip.add_commandExecuted(ss.Delegate.create(this,this.onCommandExecuted));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.uberTip.remove_commandExecuted(ss.Delegate.create(this,this.onCommandExecuted));})));this.$1_3();},doConnections:function(){},cancelHover:function(){},dispose:function(){this.disposables.dispose();if(ss.isValue(this.eventHandler)){this.eventHandler.dispose();this.eventHandler=null;}this.$1_2.dispose();},destroy:function(preserveDom){dojo.forEach(this.$1_1,dojo.unsubscribe);this.dispose();this.inherited(arguments);},resize:function(marginBox){dojo.marginBox(this.domNode,marginBox);this.layout();},onCommandExecuted:function(ubertip,args){this.toolTip.close();tab.UberTipClientCommands.executeUbertipCommand(args.command);},hideControls:function(){dojo.style(this.domHighlighter.domNode,'visibility','hidden');dojo.removeClass(this.domNode,'tvmodeSelect');},updateHighlightStatus:function(){if(this.highlight_on!=null&&this.highlight_on){dojo.addClass(this.domNode,'LegendHighlightOn');}else{dojo.removeClass(this.domNode,'LegendHighlightOn');}},refreshImages:function(cacheInfo){this.rid+=1;this.bodySize=null;var $0=this.rid+'Z'+this.timestamp;if(!this.lTitle.length){dojo.style(this.domTitleImage,'display','none');dojo.marginBox(this.domTitleBar,{h:0});}else if(String.isNullOrEmpty(this.domTitleImage.src)||this.forceRefreshAll){this.domTitleImage.src=this.session.formatLegendRegionTileURL(cacheInfo,this.region+'-title',this.field_name,this.field_name_id,$0);}this.domImageBody.src=this.session.formatLegendRegionTileURL(cacheInfo,this.region+'-body',this.field_name,this.field_name_id,$0);this.disallowHover();dojo.addClass(this.domBox,'LegendBusy');this.forceRefreshAll=false;},onSelectionChanged:function(oSelectionInfo){if(ss.isNullOrUndefined(oSelectionInfo)){return;}this.allowHover();},getDocumentPoint:function(pseudoEvent){return tab.$create_Point(pseudoEvent.pageX,pseudoEvent.pageY);},documentPointToContentPoint:function(documentPoint){var $0=dojo.coords(this.domContent,true);return tab.$create_Point(documentPoint.x-$0.x+this.domContent.scrollLeft+this.bodyOffset.x,documentPoint.y-$0.y+this.domContent.scrollTop+this.bodyOffset.y);},onHover:function(pseudoEvent){var $0=this.getDocumentPoint(pseudoEvent);var $1=this.documentPointToContentPoint($0);var $2=tab.$create_RectXY($1.x,$1.y,0,0);if('map'!==this.region){var $3=ss.Delegate.create(this,function($p1_0,$p1_1){
this.showTooltip($0,$p1_0);});var $4=new tab.LocalUbertipInfo(null,null,null,true);tab.UberTipClientCommands.getUberTip(this.region,this.sheetid,$2,$4,$3,null);}},handleStateChange:function(currentHighlightState,currentRegionWidth,currentRegionHeight){this.highlight_on=currentHighlightState;this.regionWidth=currentRegionWidth;this.regionHeight=currentRegionHeight;this.updateHighlightStatus();this.$1_3();},toggleHighlight:function(){this.highlight_on=!this.highlight_on;this.updateHighlightStatus();this.session.toggleHighlight(this.region,this.field_name);},setTitleSize:function(){var $0=tab.RenderUtil.calculatePixelRatio(false);if(tab.FloatUtil.isGreaterThan($0,1)){var $2=$(this.domTitleImage);if(ss.isValue(this.titleHeight)){$2.css('height',this.titleHeight+'px');}else if(!!this.inline&&ss.isValue(this.titleWidth)){$2.css('width',this.titleWidth+'px');}}var $1=dojo.marginBox(this.domTitleImage);dojo.marginBox(this.domTitleBar,tab.$create_Size($1.w,$1.h));this.layout();},setBodySize:function(){this.allowHover();dojo.removeClass(this.domBox,'LegendBusy');this.bodySize=tab.$create_Size(this.domImageBody.offsetWidth,this.domImageBody.offsetHeight);this.layout();},layout:function(){if(!!!this.bodySize){return;}dojo.removeClass(this.domNode,'LegendHorizontal');dojo.removeClass(this.domNode,'LegendInlineTitle');dojo.style(this.domHighlighter.domNode,'right','');this.manualXDisplayOffset=0;this.manualYDisplayOffset=0;var $0=dojo.marginBox(this.domTitleImage);var $1=tab.DomUtil.getContentBox(this.domNode);var $2=tab.$create_Size($1.w,$1.h);this.bodyOffset=tab.$create_Point(0,0);if(!!this.lTitle.length){if(!!this.inline){$2.w=$1.w-$0.w;dojo.addClass(this.domNode,'LegendInlineTitle');this.manualXDisplayOffset=$0.w;this.bodyOffset.x=$0.w;}else{$2.h=$1.h-$0.h;dojo.removeClass(this.domNode,'LegendInlineTitle');this.manualYDisplayOffset=$0.h;this.bodyOffset.y=$0.h;}}if(dojo.isSafari||this.visually_cat!=='true'){dojo.style(this.domContent,'overflow','hidden');}var $3=tab.Metrics.get_minScrollHeight();if(!!!this.vertical_layout&&$2.h<$3&&$2.h>1){dojo.addClass(this.domNode,'LegendHorizontal');var $4=this.bodySize.w;if($4>$2.w&&this.visually_cat==='true'){$2.w-=tab.LegendBaseViewModel.horizontalIteratorButtonHolderWidth;if((!!this.inline||(!this.lTitle.length&&!$0.w&&!$0.h))){$2.w-=18;dojo.style(this.domHighlighter.domNode,'right',(tab.LegendBaseViewModel.horizontalIteratorButtonHolderWidth+4)+'px');}this.$1_2.set_scrollIncrement((this.column_width||this.domContent.clientWidth/2||120));dojo.style(this.domHorizScrollButtonHolder,'visibility','visible');var $5=(!!this.inline)?0:$0.h;dojo.style(this.domHorizScrollButtonHolder,'top',$5+'px');}else{dojo.style(this.domHorizScrollButtonHolder,'visibility','hidden');}}dojo.marginBox(this.domContent,tab.$create_Size($2.w,$2.h));this.$1_2.updateButtonState();if(dojo.isSafari&&this.visually_cat==='true'){dojo.style(this.domContent,'overflow','');}if(!!!this.vertical_layout){this.domContent.style.overflowY='hidden';}},getFieldNameVec:function(){if(ss.isValue(this.field_name)){return this.field_name.toString().split('\n');}return null;},$1_3:function(){var $0=2*this.borderWidth;var $1=$(this.domImageBody);if(!!!this.vertical_layout){var $2=this.regionHeight;if(!!!this.inline&&ss.isValue(this.titleHeight)){$2-=this.titleHeight;}this.domContentImageWrapper.style.height=($2-$0)+'px';$1.css('height',$2+'px');}else{$1.css('width',this.regionWidth+'px');}this.domContentImageWrapper.style.width=(this.regionWidth-$0)+'px';},showTooltip:function(documentPoint,ubertipModel){if(!!!ubertipModel){return;}if(this.toolTip.get_isShown()&&ss.isValue(ubertipModel.tupleId)&&this.toolTip.tupleId===ubertipModel.tupleId){return;}this.tooltipIsOpen=true;this.uberTip.set_model(ubertipModel);if(!!ubertipModel.tooltipOffset){if(!!ubertipModel.tooltipOffset.x&&!!ubertipModel.tooltipOffset.x){this.toolTip.set_horizontalOffset(ubertipModel.tooltipOffset.x);}if(!!ubertipModel.tooltipOffset.y&&!!ubertipModel.tooltipOffset.y){this.toolTip.set_verticalOffset(ubertipModel.tooltipOffset.y);}}else{this.toolTip.set_horizontalOffset(0);this.toolTip.set_verticalOffset(16);}this.toolTip.show(this.uberTip.get_element(),documentPoint);this.toolTip.tupleId=ubertipModel.tupleId;},$1_4:function(){if(!!this.domHighlighter){this.domHighlighter.attr('title',tab.Strings.LegendPanelHighlightSelectedItems);}}}
tab.QuantitativeDateFilter=function(props){tab.QuantitativeDateFilter.initializeBase(this,[props]);}
tab.QuantitativeDateFilter.prototype={$1_E:false,$1_F:null,$1_10:null,$1_11:false,postCreate:function(){this.inherited(arguments);var $0=this.oFilter.date_format;var $1=$0.locale_formatting_strings;var $2=this.oFilter.editing_format;var $3=$1.narrowDay;$3.shift();var $4=this.oFilter.first_day_of_week;if(ss.isValue($4)){$4=$4-1;}var $5=new Date();var $6=new Date(Date.UTC($5.getFullYear(),$5.getMonth(),$5.getDate()));this.$1_F=new tab.DatePicker(new tab.DatePickerSettings($6,$6,null,null,$4,$3,$1.todayFormatTemplate,function($p1_0){
return tableau.format.formatCustomJSDateTime($p1_0,tableau.format.mapIcuToOleFormat($0.yearMonthFormat),false,tableau.types.DataType.DT_DATE,$0.locale,null,null,$1,0,1);},function($p1_0){
return tableau.format.formatCustomJSDateTime($p1_0,$2.format,false,tableau.types.DataType.DT_DATE,$2.locale,null,null,$1,0,1);}));this.$1_F.get_element().on('dateSelected',ss.Delegate.create(this,this.$1_13)).bind('mousedown',ss.Delegate.create(this,this.$1_15)).appendTo(document.body);this.$1_11=false;},destroy:function(preserveDom){this.$1_F.dispose();this.inherited(arguments);},showFullDateTimes:function(val){var $0=tableau.format.isDateTimeWithNonMidnightTime;if(!this.$1_E){this.$1_E=$0(this.oCurrentMin)||$0(this.oCurrentMax)||$0(this.oRangeMin)||$0(this.oRangeMax)||(ss.isValue(val)&&$0(val));if(this.oRangeMin.t===tableau.types.DataType.DT_TIMESTAMP||this.oRangeMin.t===tableau.types.DataType.DT_DATE){this.$1_E=this.$1_E&&this.oFilter.date_format.isAutoFormat;}}return this.$1_E;},getValueFromInput:function(oNode){var $0=oNode.value;var $1=tableau.format.formatToJSCompliantFormat($0,this.oFilter.editing_format,this.showFullDateTimes(),this.oRangeMin.t);return tableau.types.OleDateFromJsDate(Date.parseDate($1+' GMT').getTime());},speciallyFormatDataValueForQuantitativeQF:function(val){return tableau.format.formatDataValue(val,this.oFilter.role,this.oFilter.date_format,null,this.showFullDateTimes(val));},showInput:function(e,val,oInput){this.inherited(arguments);if(this.get_presModel().aggregation==='trunc-month'||this.get_presModel().aggregation==='trunc-year'){tab.QuantitativeDateFilter.callBaseMethod(this, 'showInput',[e,val,oInput]);}else if(this.$1_10!==oInput||this.$1_F.get_element().is(':hidden')){var $0=new Date(tableau.types.JsDateFromOleDate(val.v));this.$1_F.show($0,$0);this.$1_10=oInput;this.$1_12();}},layout:function(){this.inherited(arguments);this.$1_12();},$1_12:function(){if(ss.isNullOrUndefined(this.$1_10)){return;}var $0=$((this.$1_10===this.domLowerInput)?this.domLowerBound:this.domUpperBound);this.$1_F.positionCalendarByElement($0);},$1_13:function($p0,$p1){this.$1_F.hide();var $0=tableau.types.OleDateFromJsDate($p1.getTime());var $1=(this.$1_10===this.domLowerInput);var $2=($1)?this.oCurrentMin:this.oCurrentMax;var $3=($1)?this.domLowerBound:this.domUpperBound;this.applyInputValue($2,this.$1_10,$3,$0,ss.Delegate.create(this,function(){
this.$1_14($1,$0);}));},$1_14:function($p0,$p1){if($p0){this.updateMinAndMax($p1,this.oCurrentMax.v);}else{this.updateMinAndMax(this.oCurrentMin.v,$p1);}},$1_15:function($p0){this.$1_11=true;},hideLowerInput:function(e){this.$1_16(e,this.domLowerInput,ss.Delegate.create(this,function($p1_0){
tab.QuantitativeDateFilter.callBaseMethod(this, 'hideLowerInput',[$p1_0]);}));},hideUpperInput:function(e){this.$1_16(e,this.domUpperInput,ss.Delegate.create(this,function($p1_0){
tab.QuantitativeDateFilter.callBaseMethod(this, 'hideUpperInput',[$p1_0]);}));},$1_16:function($p0,$p1,$p2){if(this.$1_11){$p0.preventDefault();$p0.stopPropagation();this.$1_11=false;window.setTimeout(function(){
if($($p1).is(':visible')){$p1.focus();}},0);}else{$p2($p0);this.$1_F.hide();if(this.$1_10===$p1){this.$1_10=null;}}}}
tab.QuantitativeFilter=function(props){this.templateString="<div class='QuantitativeFilter'>"+"<div class='QuantitativeFilterBox' dojoAttachPoint='domBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='QFTitle' dojoAttachPoint='domTitleBar'></div>"+"<div dojoType='dijit.form.Button' class='QFButton QFDomainButton' showlabel='false'"+"dojoAttachPoint='domainButton' dojoAttachEvent='onClick:toggleDomain'"+"iconClass='wcIconDomainAll'>Show Smaller Range</div>"+"<div dojoType='dijit.form.Button' class='QFButton QFMenuButton' name='type' dojoAttachPoint='menuButton'"+"dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'></div>"+'</div>'+"<div class='QFContent' dojoAttachPoint='domContent'>"+"<div class='QFReadout QFLowerBound tab-ctrl-formatted-border-hover' dojoAttachEvent='onclick:showLowerInput' dojoAttachPoint='domLowerBound'>"+"<span class='readoutText tab-ctrl-formatted-fixedsize' dojoAttachPoint='domLowerText'></span>"+"<input type='text' dojoAttachPoint='domLowerInput'></input>"+'</div>'+"<div class='QFReadout QFUpperBound tab-ctrl-formatted-border-hover' dojoAttachEvent='onclick:showUpperInput' dojoAttachPoint='domUpperBound'>"+"<span class='readoutText tab-ctrl-formatted-fixedsize' dojoAttachPoint='domUpperText'></span>"+"<input type='text' dojoAttachPoint='domUpperInput'></input>"+'</div>'+"<div dojoAttachPoint='domBar' class='QFSlider QFBar'>"+"<div dojoAttachPoint='domRange' class='QFRange' dojoAttachEvent='onmousedown:startRangeCapture'>"+"<div dojoAttachPoint='domHighlight' class='QFRangeHighlight'></div>"+'</div>'+'</div>'+"<span dojoAttachPoint='domLowerImg' class='QFSlider QFImg QFIconFilterLeft' dojoAttachEvent='onmousedown:startLowerCapture'></span>"+"<span dojoAttachPoint='domUpperImg' class='QFSlider QFImg QFIconFilterRight' dojoAttachEvent='onmousedown:startUpperCapture'></span>"+'</div>'+'</div>'+'</div>';this.attributes={};this.format={};tab.QuantitativeFilter.initializeBase(this);}
tab.QuantitativeFilter.prototype={getContextMenuCommands:null,requestSetAttributes:null,widgetsInTemplate:true,global:false,templateRoot:null,session:null,field:'',oFilter:null,presModel:null,$1_0:200,$1_1:null,$1_2:10,rid:0,timestamp:0,domNode:null,domContent:null,domControls:null,domTitleBar:null,domLowerText:null,domUpperText:null,domLowerInput:null,domUpperInput:null,domBar:null,domRange:null,domHighlight:null,domLowerImg:null,domUpperImg:null,domLowerBound:null,domUpperBound:null,menuButton:null,domainButton:null,lastLowerOffset:0,lastUpperOffset:0,classQF:'QF',classQFButtonR:'QFButtonR',classQFButtonHide:'QFButtonHide',classQFDisabled:'QFDisabled',classQFCenterText:'QFCenterText',classQFHideButtons:'QFHideButtons',classQFHideSlider:'QFHideSlider',classQFHideReadout:'QFHideReadout',oCurrentMin:null,oCurrentMax:null,oRangeMin:null,oRangeMax:null,oDataMin:null,oDataMax:null,valMinOverride:null,valMaxOverride:null,previousMinVal:0,previousMaxVal:0,titleHTML:null,backgroundColor:null,metricsOnly:false,oMetrics:null,titleH:0,titleW:0,$1_3:null,precision:0,captureInfo:null,showInputStartValue:null,mode:null,showContextMenu:null,get_attributes:function(){return this.attributes;},get_presModel:function(){return this.presModel;},postCreate:function(){var $0=0;dojo.style(this.domLowerInput,'display','none');dojo.style(this.domUpperInput,'display','none');$(this.domLowerInput).bind('blur',ss.Delegate.create(this,this.hideLowerInput)).bind('keydown',ss.Delegate.create(this,this.lowerInputKeyDown)).bind('keypress',ss.Delegate.create(this,this.checkLowerEnter));$(this.domUpperInput).bind('blur',ss.Delegate.create(this,this.hideUpperInput)).bind('keydown',ss.Delegate.create(this,this.upperInputKeyDown)).bind('keypress',ss.Delegate.create(this,this.checkUpperEnter));$(document.body).bind('mousedown.'+this.domNode.id,ss.Delegate.create(this,function($p1_0){
if($p1_0.target!==this.domLowerInput){this.domLowerInput.blur();}if($p1_0.target!==this.domUpperInput){this.domUpperInput.blur();}}));this.timestamp=new Date().getTime();this.localize();var $1=tableau.format.formatColumnDisplayName(this.oFilter,false);dojo.attr(this.domTitleBar,'title',$1);this.setTitle();if(!this.metricsOnly){var $2=ss.Delegate.create(this,function($p1_0,$p1_1){
if($p1_1){dojo.addClass($p1_0.domNode,this.classQFButtonHide);}else{$0+=1;dojo.addClass($p1_0.domNode,this.classQFButtonR+$0);}});$2(this.menuButton,this.shouldHideContextMenu());$2(this.domainButton,this.shouldHideDomainButton());dojo.addClass(this.domControls,this.classQF+$0+'Button');$(this.menuButton.domNode).css('background-color',this.backgroundColor);$(this.domainButton.domNode).css('background-color',this.backgroundColor);}},postMixInProperties:function(){this.inherited(arguments);this.templateRoot=dojo.moduleUrl('tableau.base.widget','templates').toString();},destroy:function(preserveDom){if(ss.isValue(this.$1_3)){this.$1_3.dispose();}$(this.domLowerInput).unbind('blur').unbind('keydown').unbind('keypress');$(this.domUpperInput).unbind('blur').unbind('keydown').unbind('keypress');$(document.body).unbind('mousedown.'+this.domNode.id);this.inherited(arguments);},$1_4:function(){var $0=dojo.marginBox(this.domLowerImg);var $1=dojo.marginBox(this.domLowerBound);var $2=tab.$create_QFMetrics();$2.$3=tab.$create_Size(0,0);$2.$2=tab.$create_Size(0,0);$2.$1=tab.$create_Size(0,$0.h+4);$2.$0=tab.$create_Size(0,$1.h+4);return $2;},showFullDateTimes:function(val){return false;},getPrecision:function(){return this.precision;},isLowerEnabled:function(){return ss.isValue(this.oCurrentMin.v);},isUpperEnabled:function(){return ss.isValue(this.oCurrentMax.v);},getRangeMin:function(){return (ss.isValue(this.valMinOverride))?this.valMinOverride:this.oRangeMin.v;},getRangeMax:function(){return (ss.isValue(this.valMaxOverride))?this.valMaxOverride:this.oRangeMax.v;},getRange:function(){return this.getRangeMax()-this.getRangeMin();},hasDataMin:function(){return ss.isValue(this.oDataMin)&&ss.isValue(this.oDataMin.v);},hasDataMax:function(){return ss.isValue(this.oDataMax)&&ss.isValue(this.oDataMax.v);},getDataMin:function(){return this.oDataMin.v;},getDataMax:function(){return this.oDataMax.v;},getCurMin:function(){return this.oCurrentMin.v;},getCurMax:function(){return this.oCurrentMax.v;},getMinText:function(){return this.speciallyFormatDataValueForQuantitativeQF(this.oCurrentMin);},getMaxText:function(){return this.speciallyFormatDataValueForQuantitativeQF(this.oCurrentMax);},getLowerPos:function(){return this.domLowerImg.offsetLeft-this.oMetrics.absOffset+(this.$1_2-1);},setLowerPos:function(val){dojo.style(this.domLowerImg,'left',(val+this.oMetrics.absOffset-(this.$1_2-1))+'px');},$1_5:function(){return this.lastLowerOffset!==this.domLowerImg.offsetLeft;},$1_6:function(){return this.domUpperImg.offsetLeft-this.oMetrics.absOffset;},setUpperPos:function(val){dojo.style(this.domUpperImg,'left',(val+this.oMetrics.absOffset)+'px');},$1_7:function(){return this.lastUpperOffset!==this.domUpperImg.offsetLeft;},isRange:function(){switch(this.oFilter.table.included){case 'include-all':case 'include-null':case 'include-non-null':return false;default:return true;}},shouldHideDomainButton:function(){return this.hideEmptyTitlebar()||this.attributes['show-domain']==='false';},shouldHideContextMenu:function(){return this.hideEmptyTitlebar()||!this.getContextMenuCommands().commandItems.length;},computePrecision:function(pixelRange){var $0=(ss.isValue(this.getRange()))?this.getRange()/pixelRange:1;var $1=Math.log($0)/Math.log(10);this.precision=($1>0)?Math.ceil($1):Math.floor($1);if(this.precision===Number.NEGATIVE_INFINITY||isNaN(this.precision)){this.precision=5;}},$1_8:function($p0,$p1,$p2){var $0;var $1=$p0*this.getRange()/$p1;if(this.precision>=0){return Math.round($p2+$1);}$0=Math.pow(10,-this.precision);return Math.round(($p2+$1)*$0)/$0;},clearDataRange:function(){if(ss.isValue(this.oDataMin)){this.oDataMin=null;}if(ss.isValue(this.oDataMax)){this.oDataMax=null;}dojo.style(this.domHighlight,'visibility','hidden');},setMinValue:function(v){if(this.isUpperEnabled()&&v>this.oCurrentMax.v){v=this.oCurrentMax.v;}if(this.oCurrentMin.t===tableau.types.DataType.DT_INTEGER){this.oCurrentMin.v=Math.round(v);}else{this.oCurrentMin.v=v;}dojox.data.dom.textContent(this.domLowerText,this.getMinText());if(this.getCurMin()<this.getRangeMin()){this.valMinOverride=this.getCurMin();}},setMaxValue:function(v){if(this.isLowerEnabled()&&v<this.oCurrentMin.v){v=this.oCurrentMin.v;}if(this.oCurrentMax.t===tableau.types.DataType.DT_INTEGER){this.oCurrentMax.v=Math.round(v);}else{this.oCurrentMax.v=v;}dojox.data.dom.textContent(this.domUpperText,this.getMaxText());if(this.getCurMax()>this.getRangeMax()){this.valMaxOverride=this.getCurMax();}},resetRange:function(){this.valMinOverride=null;this.valMaxOverride=null;},getValueFromInput:function(oNode){var $0=oNode.value;switch(this.oCurrentMin.t){case tableau.types.DataType.DT_INTEGER:return parseInt($0.replace(new RegExp(',','g'),''),10);case tableau.types.DataType.DT_REAL:return parseFloat($0.replace(new RegExp(',','g'),''));}return 0;},speciallyFormatDataValueForQuantitativeQF:function(val){return tableau.format.formatDataValue(val,this.oFilter.role,this.oFilter.format,null,false);},initValues:function(){this.oRangeMin=dojo.mixin({},this.oFilter.range.min);this.oRangeMax=dojo.mixin({},this.oFilter.range.max);this.oDataMin=dojo.mixin({},this.oFilter.data.min);this.oDataMax=dojo.mixin({},this.oFilter.data.max);if(this.isRange()&&!(ss.isNullOrUndefined(this.oFilter.table.min.v)&&ss.isNullOrUndefined(this.oFilter.table.max.v))){this.oCurrentMin=dojo.mixin({},this.oFilter.table.min);this.oCurrentMax=dojo.mixin({},this.oFilter.table.max);}else{this.oCurrentMin=dojo.mixin({},this.oFilter.range.min);this.oCurrentMax=dojo.mixin({},this.oFilter.range.max);}this.oMetrics=tab.$create_QFMetrics();this.domLowerInput.value=tableau.format.formatDataValue(this.oCurrentMin,this.oFilter.role,this.oFilter.editing_format,null,this.showFullDateTimes());this.domUpperInput.value=tableau.format.formatDataValue(this.oCurrentMax,this.oFilter.role,this.oFilter.editing_format,null,this.showFullDateTimes());},hideEmptyTitlebar:function(){return String.isNullOrEmpty(tableau.format.formatColumnDisplayName(this.oFilter,false));},setTitleSize:function(newH,newW){this.titleH=newH;this.titleW=newW;},resize:function($p0){dojo.marginBox(this.domNode,$p0);this.layout();},setTitle:function(){if(this.hideEmptyTitlebar()){dojo.style(this.domTitleBar,'display','none');dojo.marginBox(this.domTitleBar,{h:0});}else{this.domTitleBar.innerHTML=this.titleHTML;}},layout:function(){var $0=200;this.initValues();if(this.isLowerEnabled()){dojox.data.dom.textContent(this.domLowerText,this.getMinText());dojo.removeClass(this.domLowerText.parentNode,this.classQFDisabled);dojo.addClass(this.domLowerText.parentNode,'tab-ctrl-formatted-border-hover');}else{dojox.data.dom.textContent(this.domLowerText,this.speciallyFormatDataValueForQuantitativeQF(this.oRangeMin));dojo.addClass(this.domLowerText.parentNode,this.classQFDisabled);dojo.removeClass(this.domLowerText.parentNode,'tab-ctrl-formatted-border-hover');}if(this.isUpperEnabled()){dojox.data.dom.textContent(this.domUpperText,this.getMaxText());dojo.removeClass(this.domUpperText.parentNode,this.classQFDisabled);dojo.addClass(this.domUpperText.parentNode,'tab-ctrl-formatted-border-hover');}else{dojox.data.dom.textContent(this.domUpperText,this.speciallyFormatDataValueForQuantitativeQF(this.oRangeMax));dojo.addClass(this.domUpperText.parentNode,this.classQFDisabled);dojo.removeClass(this.domUpperText.parentNode,'tab-ctrl-formatted-border-hover');}dojo.addClass(this.domNode,this.classQFHideButtons);dojo.removeClass(this.domNode,this.classQFCenterText);var $1=dojo.marginBox(this.domTitleBar);if(this.titleH>0){$1.h=this.titleH;dojo.marginBox(this.domTitleBar,{h:$1.h});}if(this.titleW>0){$1.w=this.titleW;dojo.marginBox(this.domTitleBar,{w:$1.w});}tableau.util.setupTitleEllipsis($(this.domTitleBar));var $2=dojo.contentBox(this.domNode);var $3=tab.$create_Size($2.w,$2.h);if(!this.metricsOnly){if(!this.hideEmptyTitlebar()){if(this.titleW>0){$3.w=$2.w-$1.w;dojo.style(this.domContent,'top','');dojo.style(this.domContent,'left',$1.w+'px');}else{dojo.removeClass(this.domNode,this.classQFHideButtons);$3.h=$2.h-$1.h;dojo.style(this.domContent,'top',$1.h+'px');dojo.style(this.domContent,'left','');}}}dojo.marginBox(this.domContent,{w:$3.w,h:$3.h});if(this.attributes['show-slider']!=='false'&&this.attributes['show-readout']!=='false'){dojo.removeClass(this.domNode,this.classQFHideReadout);dojo.removeClass(this.domNode,this.classQFHideSlider);var $6=dojo.contentBox(this.domLowerBound).h+dojo.contentBox(this.domLowerImg).h+8;if($3.h<$6&&$3.w>200){dojo.addClass(this.domNode,this.classQFCenterText);var $7=this.contentBox(this.domLowerText).w;var $8=this.contentBox(this.domUpperText).w;dojo.style(this.domLowerBound,'width','');dojo.style(this.domUpperBound,'width','');dojo.style(this.domLowerBound,'top','2px');dojo.style(this.domUpperBound,'top','2px');var $9=$3.w-($7+dojo.contentBox(this.domLowerImg).w)-($8+dojo.contentBox(this.domUpperImg).w)-(2*8);dojo.marginBox(this.domBar,{w:$9});dojo.style(this.domBar,'top','7px');dojo.style(this.domBar,'left',($7+tab.DomUtil.getContentBox(this.domLowerImg).w+8)+'px');dojo.style(this.domLowerInput,'width',$7+'px');dojo.style(this.domUpperInput,'width',$8+'px');}else{var $A=Math.min($0,Math.floor(($3.w/2)-4));dojo.marginBox(this.domLowerBound,{w:$A});dojo.marginBox(this.domUpperBound,{w:$A});dojo.style(this.domLowerInput,'width',dojo.contentBox(this.domLowerBound).w+'px');dojo.style(this.domUpperInput,'width',dojo.contentBox(this.domUpperBound).w+'px');var $B=this.domLowerBound.offsetTop+this.domLowerBound.offsetHeight+6;dojo.marginBox(this.domBar,{w:$3.w-24});dojo.style(this.domBar,'top',$B+'px');dojo.style(this.domBar,'left','12px');}}else if(this.attributes['show-slider']!=='false'){dojo.addClass(this.domNode,this.classQFHideReadout);dojo.removeClass(this.domNode,this.classQFHideSlider);dojo.marginBox(this.domBar,{w:$3.w-24});dojo.style(this.domBar,'left','12px');}else if(this.attributes['show-readout']!=='false'){dojo.removeClass(this.domNode,this.classQFHideReadout);dojo.addClass(this.domNode,this.classQFHideSlider);var $C=Math.min($0,Math.floor(($3.w/2)-4));dojo.marginBox(this.domLowerBound,{w:$C});dojo.marginBox(this.domUpperBound,{w:$C});dojo.style(this.domLowerInput,'width',tab.DomUtil.getContentBox(this.domLowerBound).w+'px');dojo.style(this.domUpperInput,'width',tab.DomUtil.getContentBox(this.domUpperBound).w+'px');}else{dojo.addClass(this.domNode,this.classQFHideSlider);dojo.addClass(this.domNode,this.classQFHideReadout);}this.oMetrics.top=this.domBar.offsetTop;this.oMetrics.absOffset=this.domBar.offsetLeft;this.oMetrics.left=0;this.oMetrics.right=this.domBar.offsetWidth;if(this.isLowerEnabled()){dojo.style(this.domLowerImg,'top',(this.oMetrics.top-4)+'px');dojo.style(this.domLowerImg,'visibility','visible');}else{dojo.style(this.domLowerImg,'visibility','hidden');}if(this.isUpperEnabled()){dojo.style(this.domUpperImg,'top',(this.oMetrics.top-4)+'px');dojo.style(this.domUpperImg,'visibility','visible');}else{dojo.style(this.domUpperImg,'visibility','hidden');}var $4=(this.shouldShowDomContent())?'visible':'hidden';dojo.style(this.domContent,'visibility',$4);this.oMetrics.width=this.oMetrics.right-this.oMetrics.left;this.computePrecision(this.oMetrics.width);var $5=(this.hasDataMin()||this.hasDataMax());dojo.style(this.domHighlight,'visibility',($5)?'visible':'hidden');this.updateMinAndMax(this.oCurrentMin.v,this.oCurrentMax.v);this.updateDomainButton();},shouldShowDomContent:function(){return this.isUpperEnabled()||this.isLowerEnabled();},updateFromIcons:function(){var $0,$1;var $2;if(this.isLowerEnabled()&&this.$1_5()){var $3=this.getLowerPos();$0=$3-this.oMetrics.left;if(!$0){$2=this.getRangeMin();}else if($0===this.oMetrics.width){$2=this.getRangeMax();}else if(this.isUpperEnabled()&&this.getLowerPos()===this.$1_6()){$2=this.getCurMax();}else{$2=this.$1_8($0,this.oMetrics.width,this.getRangeMin());}this.setMinValue($2);this.lastLowerOffset=this.domLowerImg.offsetLeft;dojo.style(this.domRange,'left',$3+'px');}if(this.isLowerEnabled()){$1=this.getLowerPos();}else{$1=this.oMetrics.left;}if(this.isUpperEnabled()){var $4=this.$1_6()-$1;if(this.$1_7()){$0=this.oMetrics.right-this.$1_6();if(!$0){$2=this.getRangeMax();}else if($0===this.oMetrics.width){$2=this.getRangeMin();}else if(this.isLowerEnabled()&&this.getLowerPos()===this.$1_6()){$2=this.getCurMin();}else{$2=this.$1_8(-$0,this.oMetrics.width,this.getRangeMax());}this.setMaxValue($2);this.lastUpperOffset=this.domUpperImg.offsetLeft;}dojo.style(this.domRange,'width',$4+'px');}else{dojo.style(this.domRange,'width',(this.oMetrics.right-$1)+'px');}this.updateDataBar();},doMenu:function(){this.showContextMenu(this.menuButton.domNode);},updateFromOneInput:function($p0){var $0,$1;if($p0===this.domLowerInput){$0=(this.isLowerEnabled())?this.getValueFromInput(this.domLowerInput):-Number.MAX_VALUE;$1=this.oCurrentMax.v;}else{$0=this.oCurrentMin.v;$1=(this.isUpperEnabled())?this.getValueFromInput(this.domUpperInput):Number.MAX_VALUE;}this.updateMinAndMax($0,$1);},updateMinAndMax:function(valMin,valMax){var $0;if(ss.isValue(valMin)&&ss.isValue(valMax)){if(valMin>valMax){var $1=valMin;valMin=valMax;valMax=$1;}}this.resetRange();if(this.isLowerEnabled()&&!isNaN(valMin)){this.setMinValue(valMin);}if(this.isUpperEnabled()&&!isNaN(valMax)){this.setMaxValue(valMax);}$0=this.oMetrics.left;if(this.isLowerEnabled()){var $2=(ss.isValue(this.getRange()))?Math.round((this.getCurMin()-this.getRangeMin())*this.oMetrics.width/this.getRange()):0;if(this.oMetrics.left+$2>this.oMetrics.width){$2=this.oMetrics.left+this.oMetrics.width;}this.setLowerPos(this.oMetrics.left+$2);this.lastLowerOffset=this.domLowerImg.offsetLeft;dojo.style(this.domRange,'left',(this.oMetrics.left+$2)+'px');$0=this.getLowerPos();}else{dojo.style(this.domRange,'left',$0+'px');}if(this.isUpperEnabled()){var $3=(this.isLowerEnabled())?this.getCurMin():this.getRangeMin();var $4=(ss.isValue(this.getRange()))?Math.round((this.getCurMax()-$3)*this.oMetrics.width/this.getRange()):this.oMetrics.width;this.setUpperPos($0+$4);this.lastUpperOffset=this.domUpperImg.offsetLeft;dojo.style(this.domRange,'width',Math.max($4,0)+'px');}else{dojo.style(this.domRange,'width',Math.max(this.oMetrics.right-$0,0)+'px');}this.updateDataBar();},updateDataBar:function(){var $0=0;var $1;var $2=(this.isLowerEnabled())?this.getCurMin():this.getRangeMin();var $3;if(this.hasDataMin()&&ss.isValue(this.getRange())){$0=Math.round((this.getDataMin()-$2)*this.oMetrics.width/this.getRange());}dojo.style(this.domHighlight,'left',$0+'px');$3=(this.isLowerEnabled())?this.getLowerPos():this.oMetrics.left;$1=((this.isUpperEnabled())?this.$1_6():this.oMetrics.right)-$3;if(this.hasDataMax()&&ss.isValue(this.getRange())){var $4=(this.hasDataMin())?this.getDataMin():this.getRangeMin();$1=Math.round((this.getDataMax()-$4)*this.oMetrics.width/this.getRange());$1=Math.max($1,2);}dojo.style(this.domHighlight,'width',Math.max($1,0)+'px');},startUpperCapture:function($p0){this.startCapture($p0,false,this.domUpperImg);},startLowerCapture:function($p0){this.startCapture($p0,false,this.domLowerImg);},startRangeCapture:function($p0){if(this.isLowerEnabled()&&this.isUpperEnabled()){this.startCapture($p0,true,this.domRange);}},startCapture:function($p0,$p1,$p2){this.savePreviousMinAndMaxVals();var $0=($p1)?ss.Delegate.create(this,this.$1_9):ss.Delegate.create(this,this.onMouseMove);dojo.stopEvent($p0);if(!ss.isValue(this.getRange())||tab.FloatUtil.isEqual(this.getRange(),0)){return;}this.captureInfo=tab.$create_vqlui$2($p0.pageX,$p0.pageY,$p2.offsetLeft,$p1,$p2);if($p1){this.captureInfo.$3=this.getLowerPos();this.captureInfo.$4=this.$1_6();}if(ss.isValue(this.$1_3)){this.$1_3.dispose();}this.$1_3=new tab.DisposableHolder();this.$1_3.add(tab.EventUtil.bindWithDispose($(document),'mousemove',$0));this.$1_3.add(tab.EventUtil.bindWithDispose($(document),'mouseup',ss.Delegate.create(this,this.$1_A)));},onMouseMove:function($p0){var $0=(this.isLowerEnabled())?this.getLowerPos():this.oMetrics.left;var $1=(this.isUpperEnabled())?this.$1_6():this.oMetrics.right;var $2=(this.captureInfo.$2===this.domLowerImg)?this.oMetrics.left-this.$1_2:$0;var $3=(this.captureInfo.$2===this.domUpperImg)?this.oMetrics.right:$1-this.$1_2;var $4=($p0.pageX-this.captureInfo.x)+this.captureInfo.$0-this.oMetrics.absOffset;$p0.stopPropagation();$p0.preventDefault();$4=Math.min($3,Math.max($2,$4));if(this.captureInfo.$2===this.domLowerImg){this.setLowerPos($4+this.$1_2);}else{this.setUpperPos($4);}this.updateFromIcons();this.applyQuantFilter(this.oCurrentMin.v,this.oCurrentMax.v);},applyQuantFilter:function(minVal,maxVal){if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){var $0=new tab.QuantitativeFilterData(this.oFilter.targetSheets,this.field,minVal,maxVal,this.previousMinVal,this.previousMaxVal);tab.FilterClientCommands.updateQuantitativeFilter($0);}},savePreviousMinAndMaxVals:function(){this.previousMinVal=this.oCurrentMin.v;this.previousMaxVal=this.oCurrentMax.v;},$1_9:function($p0){var $0=this.captureInfo.x-(this.captureInfo.$3-this.oMetrics.left);var $1=this.captureInfo.x+(this.oMetrics.right-this.captureInfo.$4);var $2=$p0.pageX;$2=Math.min($1,Math.max($0,$2));$p0.stopPropagation();$p0.preventDefault();this.setLowerPos(this.captureInfo.$3+($2-this.captureInfo.x));this.setUpperPos(this.captureInfo.$4+($2-this.captureInfo.x));tab.ModelUtils.invalidateVisuals(this.oFilter.targetSheets);this.updateFromIcons();},$1_A:function($p0){if(ss.isValue(this.$1_3)){this.$1_3.dispose();}this.$1_3=null;$p0.stopPropagation();$p0.preventDefault();if(this.captureInfo.x!==$p0.pageX){this.resetRange();this.updateFromIcons();this.notifyChange();}},showLowerInput:function($p0){if(!this.isLowerEnabled()){return;}this.showInput($p0,this.oCurrentMin,this.domLowerInput);dojo.addClass(this.domLowerBound,'active');this.savePreviousMinAndMaxVals();},showUpperInput:function($p0){if(!this.isUpperEnabled()){return;}this.showInput($p0,this.oCurrentMax,this.domUpperInput);dojo.addClass(this.domUpperBound,'active');this.savePreviousMinAndMaxVals();},showInput:function(e,val,oInput){dojo.stopEvent(e);if(dojo.style(oInput,'display')!=='none'){return;}oInput.value=tableau.format.formatDataValue(val,this.oFilter.role,this.oFilter.editing_format,null,this.showFullDateTimes());this.showInputStartValue=this.getValueFromInput(oInput);$(oInput).show().siblings('.readoutText').hide();oInput.focus();oInput.select();},lowerInputKeyDown:function($p0){this.$1_B($p0,this.domLowerInput);},upperInputKeyDown:function($p0){this.$1_B($p0,this.domUpperInput);},$1_B:function($p0,$p1){if($p0.which===27){$($p1).val('');$p1.blur();}},checkLowerEnter:function($p0){this.$1_C($p0,this.domLowerInput);},checkUpperEnter:function($p0){this.$1_C($p0,this.domUpperInput);},$1_C:function($p0,$p1){if($p0.keyCode === dojo.keys.ENTER){dojo.stopEvent($p0);$p1.blur();}},hideLowerInput:function(e){this.$1_D(e,this.oCurrentMin,this.domLowerInput,this.domLowerBound);},hideUpperInput:function(e){this.$1_D(e,this.oCurrentMax,this.domUpperInput,this.domUpperBound);},$1_D:function($p0,$p1,$p2,$p3){var $0=this.getValueFromInput($p2);$p0.stopPropagation();$p0.preventDefault();this.applyInputValue($p1,$p2,$p3,$0,ss.Delegate.create(this,function(){
this.updateFromOneInput($p2);}));},applyInputValue:function(oldDV,oInput,inputContainer,newValue,updateFilter){var $0={};$0=Type.safeCast(dojo.mixin({},oldDV),Object);var $1=null;if(isNaN(newValue)){newValue=this.showInputStartValue;}else{$0.v=newValue;$1=this.speciallyFormatDataValueForQuantitativeQF($0);}var $2=$(oInput).hide().siblings('.readoutText').show();if(newValue!=null&&(this.showInputStartValue!=null&&!tab.FloatUtil.isEqual(this.showInputStartValue,newValue))){$2.text($1);updateFilter();this.notifyChange();}this.showInputStartValue=null;dojo.removeClass(inputContainer,'active');},applyChanges:function(){var $0=false;var $1=$.extend(false,{},this.oFilter.table);if(this.isLowerEnabled()&&$1.min.v!==this.getCurMin()){$0=true;$1.min=Type.safeCast(dojo.mixin({},this.oCurrentMin),Object);}if(this.isUpperEnabled()&&$1.max.v!==this.getCurMax()){$0=true;$1.max=Type.safeCast(dojo.mixin({},this.oCurrentMax),Object);}if(!$0){tab.ModelUtils.validateVisuals(this.oFilter.targetSheets);return;}this.clearDataRange();++this.rid;if(!this.isRange()){$1.included='include-range';}tab.FilterClientCommands.setQuantitativeFilterRange(this.session.get_sheetName(),this.field,$1.min.v,$1.max.v,$1.included);},updateDomainButton:function(){if(!ss.isValue(this.oFilter.domains)||this.oFilter.domains.length<=1){dojo.style(this.domainButton.domNode,'display','none');return;}dojo.removeClass(this.domainButton.iconNode,'wcIconDomainAll');dojo.removeClass(this.domainButton.iconNode,'wcIconDomainContext');dojo.removeClass(this.domainButton.iconNode,'wcIconDomainRelevant');var $0=this.attributes['values'];if($0==='relevant'){this.domainButton.attr('label',tab.Strings.QuickFilterShowLargerRange);dojo.addClass(this.domainButton.iconNode,'wcIconDomainRelevant');}else if($0==='context'){this.domainButton.attr('label',tab.Strings.QuickFilterShowSmallerRange);dojo.addClass(this.domainButton.iconNode,'wcIconDomainContext');}else{this.domainButton.attr('label',tab.Strings.QuickFilterShowSmallerRange);dojo.addClass(this.domainButton.iconNode,'wcIconDomainAll');}},toggleDomain:function(){var $0=function($p1_0){
return $p1_0==='context';};var $1;var $2=this.attributes['values'];if($2==='relevant'){$1='all';}else if($2==='context'){$1='relevant';}else if(dojo.some(this.oFilter.domains,$0)){$1='context';}else{$1='relevant';}this.doRequestSetAttributes({values:$1},false);},doRequestSetAttributes:function($p0,$p1){var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0));while($enum1.moveNext()){var $0=$enum1.current;this.attributes[$0]=$p0[$0];}if(!tab.BaseSession.autoUpdate){this.initFromState();}this.requestSetAttributes($p0,$p1);},notifyChange:function(){if(ss.isNullOrUndefined(this.$1_1)){window.clearTimeout(this.$1_1);this.$1_1=null;}this.$1_1=window.setTimeout(ss.Delegate.create(this,this.applyChanges),this.$1_0);},initFromState:function(){this.setTitle();this.layout();},localize:function(){},contentBox:function(node){var $0=dojo.style(node,'display');if($0==='none'){dojo.style(node,'display','');}var $1=dojo.contentBox(node);dojo.style(node,'display',$0);return $1;}}
tab.WebZoneView=function(viewModel,parentZoneViewModel){tab.WebZoneView.initializeBase(this,[viewModel,new tab.PageTemplate()]);this.$2_0=viewModel;this.$2_1=parentZoneViewModel;this.$2_0.add_newWebZone(ss.Delegate.create(this,this.handleNewWebZone));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_0.remove_newWebZone(ss.Delegate.create(this,this.handleNewWebZone));})));this.$2_1.add_resizeZone(ss.Delegate.create(this,this.$2_3));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.$2_1.remove_resizeZone(ss.Delegate.create(this,this.handleNewWebZone));})));}
tab.WebZoneView.prototype={$2_0:null,$2_1:null,$2_2:null,get_zonePresModel:function(){return this.$2_0.get_webZoneModel().get_zone();},get_webZonePresModel:function(){return this.$2_0.get_webZoneModel().get_presModel();},get_domRoot:function(){return this.get_template().domRoot;},onAddedToDom:function(){tab.WebZoneView.callBaseMethod(this, 'onAddedToDom');this.handleNewWebZone();},handleNewWebZone:function(){if(ss.isValue(this.$2_2)){this.updateWebZone();}else{this.createWebZone();this.get_template().domRoot.append(this.$2_2);}},updateIFrameFromViewModel:function(iframeNode){if(this.get_webZonePresModel().url!==this.$2_2.children().first().prop('original_url')){var $0=tab.URIUtil.absolutizeURI(this.get_webZonePresModel().url);iframeNode.prop('src',$0);iframeNode.prop('original_url',this.get_webZonePresModel().url);}tab.DomUtil.resize(iframeNode.get(0),tab.$create_Rect(this.get_zonePresModel().x,this.get_zonePresModel().y,this.get_zonePresModel().w,this.get_zonePresModel().h));},updateWebZone:function(){var $0=this.$2_2.children().first();this.updateIFrameFromViewModel($0);},createWebZone:function(){var $0='frame_'+this.get_zonePresModel().zoneId.toString();var $1;this.$2_2=$('<div>');if(tsConfig.is_mobile){if(tab.BrowserSupport.get_isSafari()){this.$2_2.css('-webkit-overflow-scrolling','touch');}this.$2_2.css('overflow','auto');}if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){$1=$('<iframe name="'+$0+'" frameborder="0"></iframe>');if(tab.BrowserSupport.get_browserVersion()<7){$1.css('position','absolute');}}else{$1=$('<iframe/>');$1.prop('name',$0);}$1.css('border','0px none');this.$2_2.append($1);this.updateIFrameFromViewModel($1);},$2_3:function(){this.updateWebZone();}}
tab.WebZoneTemplate=function(){tab.WebZoneTemplate.initializeBase(this,[$("<div class='tab-web'></div>")]);}
tab.WebZoneTemplate.prototype={content:null}
tab.CategoricalLegendView=function(viewModel,template){this.$2_6=[];tab.CategoricalLegendView.initializeBase(this,[viewModel,template]);this.setHighlightButtonVisibility(false);}
tab.CategoricalLegendView.setDomNodeStyleSize=function(domNode,width,height){domNode.css('width',width+'px');domNode.css('height',height+'px');}
tab.CategoricalLegendView.$2_B=function($p0,$p1){if($p1){$p0.show();}else{$p0.hide();}}
tab.CategoricalLegendView.prototype={viewportWidth:0,viewportHeight:0,bodyOffset:null,$2_7:null,$2_8:null,$2_9:0,$2_A:null,get_docSize:function(){return tab.RecordCast.pointJsonAsSize(this.get_catLegendViewModel().get_categoricalLegendPM().catLegendLayout.legendSize);},get_catLegendViewModel:function(){return this.get_viewModel();},get_catLegendTemplate:function(){return this.get_template();},get_scrollOffset:function(){var $0=this.get_catLegendTemplate().columnsHolder.scrollLeft();var $1=this.get_catLegendTemplate().columnsHolder.scrollTop();return tab.$create_Point($0,$1);},set_scrollOffset:function(value){this.get_catLegendTemplate().columnsHolder.scrollLeft(value.x);this.get_catLegendTemplate().columnsHolder.scrollTop(value.y);return value;},onAddedToDom:function(){tab.CategoricalLegendView.callBaseMethod(this, 'onAddedToDom');this.$2_7=this.makeTooltip();this.$2_8=new tab.Ubertip(this.$2_7);this.$2_8.add_commandExecuted(ss.Delegate.create(this,this.$2_15));this.drawLegend();},dispose:function(){if(ss.isValue(this.$2_7)){this.$2_7.dispose();}if(ss.isValue(this.$2_8)){this.$2_8.remove_commandExecuted(ss.Delegate.create(this,this.$2_15));this.$2_8.dispose();}tab.CategoricalLegendView.callBaseMethod(this, 'dispose');},onViewModelPropertyChanged:function(sender,e){if(e.get_propertyName()==='isActiveZone'){}else if(e.get_propertyName()==='Items'){if(this.get_catLegendViewModel().get_categoricalLegendPM().catLegendLayout.colCount===this.$2_6.length){this.$2_E();this.$2_D();}}else if(e.get_propertyName()==='ParentZoneSizeChanged'){var $0=this.get_catLegendViewModel().get_$1_3();if($0.w===this.get_catLegendTemplate().panel.width()&&$0.h===this.get_catLegendTemplate().panel.height()){}else{this.resetLegend();}}else{this.resetLegend();}},getLegendItemFromEvent:function(pseudoEvent){var $0=$(pseudoEvent.target);if($0.hasClass('tabLegendItemLabelHolder')||$0.hasClass('tabLegendItem')){return null;}return $0.parents('.tabLegendItem').andSelf().first().data('tabLegendItem');},resetLegend:function(){this.drawLegend();},getViewportPosition:function(pseudoEvent){var $0=pseudoEvent.get_gestureInfo();var $1=tab.$create_Point($0.pageX,$0.pageY);return $1;},getDocumentPosition:function(viewportPosition){var $0=tab.$create_Point(viewportPosition.x,viewportPosition.y);var $1=tab.DomUtil.getDojoCoordsJQ(this.get_catLegendTemplate().columnsHolder);$0.x+=this.get_catLegendTemplate().columnsHolder.scrollLeft()+this.bodyOffset.x-$1.x;$0.y+=this.get_catLegendTemplate().columnsHolder.scrollTop()+this.bodyOffset.y-$1.y;return $0;},performSelectOnItem:function(item,action,viewportCoords,contentSelRect){if(this.get_catLegendViewModel().get_legendTypeEnum()!=='map'){this.get_catLegendViewModel().selectItem(item,action);this.$2_C(viewportCoords,contentSelRect);}},performHoverOnItem:function(viewportCoords,contentSelRect){if(this.get_catLegendViewModel().get_legendTypeEnum()!=='map'){this.$2_C(viewportCoords,contentSelRect);}},setContentSize:function(viewportHeightParam,viewportWidthParam){tab.CategoricalLegendView.setDomNodeStyleSize(this.get_catLegendTemplate().columnsHolder,viewportWidthParam,viewportHeightParam);},onLegendHighlighterTapped:function(){this.get_catLegendViewModel().toggleHighlighting();},setHighlightButtonVisibility:function(isVisible){isVisible=isVisible&&this.get_catLegendViewModel().get_$1_18();if(isVisible){this.get_catLegendTemplate().legendHighlighter.show();}else{this.get_catLegendTemplate().legendHighlighter.hide();}},showTooltip:function(coords,ubertipModel){if(this.$2_7.get_isShown()&&ss.isValue(ubertipModel.tupleId)&&this.$2_7.tupleId===ubertipModel.tupleId&&_.isEqual(this.$2_8.get_model().commands,ubertipModel.commands)){return;}this.$2_8.set_model(ubertipModel);if(ss.isValue(ubertipModel.tooltipOffset)){if(ss.isValue(ubertipModel.tooltipOffset.x)){this.$2_7.set_horizontalOffset(ubertipModel.tooltipOffset.x);}if(ss.isValue(ubertipModel.tooltipOffset.y)){this.$2_7.set_verticalOffset(ubertipModel.tooltipOffset.y);}}else{this.$2_7.set_horizontalOffset(0);this.$2_7.set_verticalOffset(16);}this.$2_7.show(this.$2_8.get_element(),coords);this.$2_7.tupleId=ubertipModel.tupleId;},drawLegend:function(){var $0=this.get_catLegendViewModel().get_categoricalLegendPM();var $1=$0.catLegendLayout;var $enum1=ss.IEnumerator.getEnumerator(this.$2_6);while($enum1.moveNext()){var $10=$enum1.current;$10.domRoot.remove();}this.$2_6.clear();var $2=this.get_catLegendViewModel().get_$1_3().w;var $3=this.get_catLegendViewModel().get_$1_3().h;tab.CategoricalLegendView.setDomNodeStyleSize(this.get_catLegendTemplate().panel,$2,$3);var $4='tableau_base_legend_'+this.get_catLegendViewModel().get_$1_15()+((this.get_catLegendViewModel().get_$1_18())?'_q_':'_')+encodeURIComponent((this.get_catLegendViewModel().get_$1_5()));this.get_catLegendTemplate().panel.get(0).id=$4;tab.CategoricalLegendView.$2_B(this.get_catLegendTemplate().titleArea,true);this.viewportWidth=$2;this.viewportHeight=$3;this.bodyOffset=tab.$create_Point(0,0);this.get_catLegendTemplate().titleArea.html($0.titleHtml);var $5=this.get_catLegendViewModel().get_$1_16();var $6=this.get_catLegendViewModel().get_$1_4();$6.h=Math.max(0,$6.h-(2*$5));$6.w=Math.max(0,$6.w-(2*$5));if(this.get_catLegendViewModel().get_titleInline()){var $11=$1.rowHeight;this.get_catLegendTemplate().titleArea.width($6.w);this.get_catLegendTemplate().titleArea.css('display','inline-block');this.get_catLegendTemplate().titleArea.css('height',$11+'px');this.get_catLegendTemplate().titleArea.css('line-height',$11+'px');this.get_catLegendTemplate().titleArea.css('vertical-align','top');this.get_catLegendTemplate().columnsHolder.css('display','inline-block');this.viewportWidth-=$6.w;this.bodyOffset.x+=$6.w;}else{this.get_catLegendTemplate().titleArea.height($6.h);this.viewportHeight-=$6.h;this.bodyOffset.y+=$6.h;}tableau.util.setupTitleEllipsis(this.get_catLegendTemplate().titleArea);this.setContentSize(this.viewportHeight,this.viewportWidth);this.set_scrollOffset(tab.RecordCast.pointJsonAsPoint($0.scrollOffset));var $7=$1.areaSize.x;var $8=$1.areaSize.y;var $9=$1.imageSize.x;var $A=$1.imageSize.y;var $B=Math.ceil(($7-$9)/2);var $C=Math.ceil(($8-$A)/2);var $D=tab.$create_Size($7,$8);var $E=null;var $F=false;if(this.get_catLegendViewModel().legendType==='color'||this.get_catLegendViewModel().legendType==='map'){$E=tab.$create_Rect($B,$C,$9,$A);$F=ss.isValue(this.get_catLegendViewModel().get_$1_12().swatchBorderColor);}for(var $12=0;$12<$1.colCount;++$12){var $13=new tab.CategoricalLegendColumnHtmlTemplate($1.rowCount,$1.colWidth,$1.rowHeight,$D,$E,$F);this.$2_6.add($13);$13.column.width($1.colWidth);this.get_catLegendTemplate().columnHolder.append($13.domRoot);}this.$2_D();this.$2_E();},$2_C:function($p0,$p1){this.$2_9+=1;var $0=this.$2_9;var $1=ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=(ss.isValue($0)&&this.$2_9===$0);if(ss.isValue($p1_0)&&$1_0){this.showTooltip($p0,$p1_0);}});var $2=ss.Delegate.create(this,function(){
this.$2_8.handleRemoteFailure();});var $3=new tab.LocalUbertipInfo(null,null,null,true);tab.UberTipClientCommands.getUberTip(this.get_catLegendViewModel().get_$1_15(),this.get_catLegendViewModel().get_$1_5(),$p1,$3,$1,$2);},$2_D:function(){this.get_catLegendTemplate().legendHighlighter.toggleClass('tabHighlightEnabled',this.get_catLegendViewModel().get_$1_17());this.get_catLegendTemplate().legendHighlighter.toggleClass('tabHighlightDisabled',!this.get_catLegendViewModel().get_$1_17());},$2_E:function(){var $0=this.get_catLegendViewModel().get_categoricalLegendPM();var $1=$0.catLegendLayout;var $2=this.get_catLegendViewModel().get_numLegendItems();var $3=0;for(var $4=0;$4<$1.colCount&&$3<$2;++$4){var $5=this.$2_6[$4];for(var $6=0;$6<$1.rowCount&&$3<$2&&$6<$5.get_legendItems().length;++$6){var $7=$5.get_legendItems()[$6];var $8=this.$2_F($3,$7);if(ss.isValue($8)){this.$2_14($8,$0,$7);$7.domRoot.data('tabLegendItem',$8);}++$3;}}},$2_F:function($p0,$p1){var $0=null;if(ss.isValue($p1.canvasElt)&&ss.isValue($p1.renderContext)){tab.CanvasUtil.applyHighDPISupport($p1.canvasElt,$p1.renderContext);}switch(this.get_catLegendViewModel().legendType){case 'color':case 'map':$0=this.$2_11($p0,$p1);break;case 'size':$0=this.$2_13($p0,$p1);break;case 'shape':$0=this.$2_12($p0,$p1);break;default:break;}return $0;},$2_10:function($p0,$p1){var $0=tab.PaneDrawInfo.getFogBlendFactor($p1);var $1=tab.PaneDrawInfo.applyFogToBackgroundColor($p1,$0);return tab.PaneDrawInfo.fogColorTransform($p0,$1,$0);},$2_11:function($p0,$p1){var $0=this.get_catLegendViewModel().get_$1_12();var $1=$0.colorLegendItems[$p0];var $2=this.get_catLegendViewModel().get_$1_10();var $3=tab.ColorModel.fromColorCode($1.color);$3=tab.ColorModel.alphaComposite($3,$2);var $4=this.get_catLegendViewModel().isGrayed($1);if($4){$3=this.$2_10($3,$2);}var $5=$3.toString();$p1.itemSwatch.css('background-color',$5);$p1.itemSwatch.get(0).id=$5;if(ss.isValue($0.swatchBorderColor)){$p1.itemSwatch.css('border-style','solid');var $6=tab.ColorModel.fromColorCode($0.swatchBorderColor);if($4){$6=this.$2_10($6,$2);}$p1.itemSwatch.css('border-color',$6.toString());}return $1;},$2_12:function($p0,$p1){var $0=this.get_catLegendViewModel().get_$1_13();var $1=$0.shapeLegendItems[$p0];var $2=$0.catLegendLayout.areaSize.x;var $3=$0.catLegendLayout.areaSize.y;var $4=$p1.renderContext;$4.clearRect(0,0,$2,$3);if(this.$2_A==null){var $5=this.get_catLegendViewModel().get_$1_10();var $6=2;var $7=$0.catLegendLayout.imageSize.x-(2*$6);var $8=$0.catLegendLayout.imageSize.y-(2*$6);this.$2_A=new tab.vqlui$F($p1,$2/2,$3/2,$7,$8,$5);}this.$2_A.$4D($4,$1.shapeId,this.get_catLegendViewModel().isGrayed($1));$p1.itemSwatch.get(0).id=$1.shapeId.toString();return $1;},$2_13:function($p0,$p1){var $0=this.get_catLegendViewModel().get_$1_14();var $1=$0.sizeLegendItems[$p0];var $2=$0.catLegendLayout.areaSize.x;var $3=$0.catLegendLayout.areaSize.y;var $4=$0.catLegendLayout.imageSize.y;var $5=Math.ceil(($3-$4)/2);var $6=$p1.renderContext;$6.save();var $7=tab.CategoricalLegendView.$2_4;var $8=tab.CategoricalLegendView.$2_5;if(this.get_catLegendViewModel().isGrayed($1)){var $C=this.get_catLegendViewModel().get_$1_10();$7=this.$2_10($7,$C);$8=this.$2_10($8,$C);}$6.set_shapeFillStyle($7.toString());$6.set_strokeStyle($8.toString());$6.set_lineWidth(2);var $9=$2/2;var $A=$3/2;var $B=$1.size/2;$6.clearRect(0,0,$2,$3);$6.setClip(tab.$create_RectXY(0,1,$2,$3-2));switch($0.primitiveType){case 'shape':case 'circle':case 'pie':$6.beginPath();$6.arc($9,$A,$B,0,Math.PI*2,false);$6.closePath();$6.fill();$6.beginPath();$6.arc($9,$A,$B,0,Math.PI*2,false);$6.closePath();$6.stroke();break;case 'line':case 'gantt':case 'bar':$6.fillRect($9-$B,$5,$1.size,$4);break;case 'square':var $D=$9-$B;var $E=$A-$B;$6.fillRect($D,$E,$1.size,$1.size);$6.strokeRect($D,$E,$1.size,$1.size);break;case 'text':var $F=$0.swatchTextStyle;if(ss.isUndefined($F)){$F=$0.textStyle;}tab.DisplayList2DRenderer.setTextProperties($6,$F,$1.size);$6.set_textAlign('center');$6.fillText1(tab.Strings.SizeLegendTextMarkSwatch,$9,$A);break;default:break;}$6.restore();$p1.itemSwatch.get(0).id=$0.primitiveType+'_'+$1.size.toString();return $1;},$2_14:function($p0,$p1,$p2){var $0=$p1.textStyle;var $1=null;var $2='';if(this.get_catLegendViewModel().isSelected($p0)){$0=$p1.selectedTextStyleModel;$2=$p1.selectBgColor;}else if(this.get_catLegendViewModel().isGrayed($p0)){var $7=this.get_catLegendViewModel().get_$1_10();$1=this.$2_10(tab.ColorModel.fromColorCode($0.color),$7).toString();}var $3=$p1.catLegendLayout.textOrigin.y;var $4=$p1.catLegendLayout.textOrigin.x;var $5='left';var $6=$p1.catLegendLayout.colWidth-$4;if($0.halign==='h-align-right'||$p1.catLegendLayout.rightJustify){$5='right';$p2.itemLabelHolder.css('overflow','inherit');var $8=Math.max($p1.catLegendLayout.colWidth-$4-$p1.catLegendLayout.maxItemSpan,0);$p2.itemLabelHolder.css('right',$8+'px');$6=$p1.catLegendLayout.colWidth-$8;}else{$p2.itemLabelHolder.css('left',$4+'px');}$p2.itemLabelHolder.css('top',$3+'px');$p2.itemLabelHolder.css('width',$6+'px');$p2.itemLabelHolder.css('bottom','0px');$p2.itemLabelHolder.css('text-align',$5);$p2.itemLabel.css('background-color',$2);$p2.itemLabel.css(tab.FormattingConverters.$1($0,$1));$p2.itemLabel.text($p0.text);},$2_15:function($p0,$p1){this.$2_7.close();tab.UberTipClientCommands.executeUbertipCommand($p1.command);}}
tab.CategoricalLegendColumnHtmlTemplate=function(numRows,itemWidth,itemHeight,swatchArea,swatchRect,accountForColorBorder){tab.CategoricalLegendColumnHtmlTemplate.initializeBase(this,[$("<span class='tabLegendItemColumn'/>")]);this.column=this.domRoot;this.$1_1=new Array(numRows);for(var $0=0;$0<numRows;++$0){this.$1_1[$0]=new tab.CategoricalLegendItemHtmlTemplate(swatchArea,swatchRect,accountForColorBorder);tab.CategoricalLegendView.setDomNodeStyleSize(this.$1_1[$0].domRoot,itemWidth,itemHeight);this.$1_1[$0].itemLabel.width(itemWidth);this.column.append(this.$1_1[$0].domRoot);}}
tab.CategoricalLegendColumnHtmlTemplate.prototype={column:null,$1_1:null,get_legendItems:function(){return this.$1_1;}}
tab.CategoricalLegendItemHtmlTemplate=function(swatchArea,swatchRect,accountForColorBorder){tab.CategoricalLegendItemHtmlTemplate.initializeBase(this,[$("<div class='tabLegendItem'><span class='tabLegendItemSwatchHolder'></span><span class='tabLegendItemLabelHolder'><span class='tabLegendItemLabel' /></span></div>")]);this.item=this.domRoot;var $0=this.getElementBySelector('.tabLegendItemSwatchHolder');this.itemLabel=this.getElementBySelector('.tabLegendItemLabel');this.itemLabelHolder=this.getElementBySelector('.tabLegendItemLabelHolder');tab.CategoricalLegendView.setDomNodeStyleSize($0,swatchArea.w,swatchArea.h);var $1=(ss.isValue(swatchRect))?"<span class='tabLegendItemSwatch' />":"<canvas class='tabLegendItemSwatch' />";$0.append($($1));this.itemSwatch=this.getElementBySelector('.tabLegendItemSwatch');if(ss.isNullOrUndefined(swatchRect)){var $2=this.itemSwatch.get(0);$2.width=swatchArea.w;$2.height=swatchArea.h;this.renderContext=tab.CanvasRenderer.$7($2);this.canvasElt=$2;}else{var $3=tab.$create_Rect(swatchRect.l,swatchRect.t,swatchRect.w,swatchRect.h);if(accountForColorBorder){var $4=1;$3.w-=2*$4;$3.h-=2*$4;this.itemSwatch.css('border-width',$4+'px');this.itemSwatch.css('border-style','none');}tab.CategoricalLegendView.setDomNodeStyleSize(this.itemSwatch,$3.w,$3.h);this.itemSwatch.css('top',$3.t+'px');this.itemSwatch.css('left',$3.l+'px');this.renderContext=null;}}
tab.CategoricalLegendItemHtmlTemplate.prototype={item:null,itemSwatch:null,itemLabelHolder:null,itemLabel:null,renderContext:null,canvasElt:null}
tab.CategoricalLegendTemplate=function(template){tab.CategoricalLegendTemplate.initializeBase(this,[template]);this.panel=this.domRoot;this.panel.append($("<div class='tabLegendHighlighter'/>"));this.titleArea=this.getElementBySelector('.tabLegendTitle');this.columnsHolder=this.getElementBySelector('.tabLegendContentHolder');this.columnHolder=this.getElementBySelector('.tabLegendColumnHolder');this.legendHighlighter=this.getElementBySelector('.tabLegendHighlighter');this.legendHighlighter.attr('title',tab.Strings.LegendPanelHighlightSelectedItems);}
tab.CategoricalLegendTemplate.prototype={panel:null,titleArea:null,columnsHolder:null,columnHolder:null,legendHighlighter:null}
tab.vqlui$F=function(itemTemplate,xPos,yPos,swatchWidth,swatchHeight,swatchBgColor){tab.vqlui$F.initializeBase(this,[itemTemplate.canvasElt,itemTemplate.renderContext]);this.$4B={};var $0={};$0.dataValues=new Array(Object.getKeyCount(tab.PaneDrawInfo.shapeMapping));var $1={};$1.dataValues=new Array(Object.getKeyCount(tab.PaneDrawInfo.shapeMapping));var $2=0;var $enum1=ss.IEnumerator.getEnumerator(Object.keys(tab.PaneDrawInfo.shapeMapping));while($enum1.moveNext()){var $6=$enum1.current;this.$4B[$6]=$2;$1.dataValues[$2]=$6;$0.dataValues[$2]=$2.toString();++$2;}var $3={};$3.encodingColumns={};$3.encodingColumns['shape_id']=$1;$3.encodingColumns['tuple_id']=$0;$3.intMap={};$3.intMap['width']=swatchWidth;$3.intMap['height']=swatchHeight;$3.intMap['x']=Math.floor(xPos);$3.intMap['y']=Math.floor(yPos);$3.intMap['color']=new tab.ColorModel(0,0,0,1).toArgbInt();$3.intMap['background_color']=swatchBgColor.toArgbInt();$3.floatMap={};var $4={};$4.paneRect={x:0,y:0,w:swatchWidth,h:swatchHeight};var $5={};$5.startIndex=0;$5.endIndex=$2;this.$4A=new tab.PaneDrawInfo(new tab.SceneInfo(),$4,$5,$3,null);}
tab.vqlui$F.prototype={$4A:null,$4B:null,$4C:null,get_currentContext:function(){if(this.$4C!=null){return this.$4C;}return tab.vqlui$F.callBaseMethod(this, 'get_currentContext');},$4D:function($p0,$p1,$p2){this.$4C=$p0;var $0=($p2)?'colorOverrideFog':'colorOverrideOpaque';this.$30(this.$4A,this.$4B[$p1.toString()],'normalOn',$0);}}
tab.LegacyLegendView=function(viewModel){this.$2_1=[];tab.LegacyLegendView.initializeBase(this,[viewModel,new tab.LegacyLegendTemplate()]);this.$2_0=viewModel;this.$2_0.add_newLegacyLegend(ss.Delegate.create(this,this.handleNewLegacyLegend));this.$2_0.add_validStateChanged(ss.Delegate.create(this,this.handleValidStateChanged));this.handleNewLegacyLegend();this.$2_6();}
tab.LegacyLegendView.prototype={$2_0:null,$2_2:null,$2_3:null,get_domRoot:function(){return this.get_template().domRoot;},get_$2_4:function(){return this.$2_0.get_viewId();},get_$2_5:function(){return this.$2_0.get_sessionId();},dispose:function(){if(ss.isValue(this.$2_2)){this.$2_2.destroyRecursive(false);this.$2_2=null;}this.$2_0.remove_newLegacyLegend(ss.Delegate.create(this,this.handleNewLegacyLegend));var $enum1=ss.IEnumerator.getEnumerator(this.$2_1);while($enum1.moveNext()){var $0=$enum1.current;dojo.unsubscribe($0);}tab.LegacyLegendView.callBaseMethod(this, 'dispose');},handleNewLegacyLegend:function(){var $0=this.$2_0.get_frame();if(ss.isValue(this.$2_2)&&this.$2_2.field_name_id===$0.field_name_id&&_.isEqual(this.$2_2.get_format(),$0.format)){this.$2_2.handleStateChange($0.highlight_on,$0.regionWidth,$0.regionHeight);}else{if(ss.isValue(this.$2_2)){this.$2_2.destroyRecursive(false);this.$2_2=null;}this.$2_2=this.createLegendPanel(this.$2_0.get_frame());this.get_template().domRoot.append(this.$2_2.domNode);this.$2_2.refreshImages(this.$2_0.get_$1_D());}},handleValidStateChanged:function(){if(!!this.$2_0.get_$1_E()){this.$2_2.forceRefreshAll=true;}},createLegendPanel:function(frame){var $0={};$0.sessionid=this.get_$2_5();$0.viewid=this.get_$2_4();$0.sheetid=frame.name;$0.region=frame.r;$0.categorical=frame.categorical;$0.highlight_enabled=frame.highlight_enabled;$0.inline=frame.inline;$0.highlight_on=frame.highlight_on;$0.column_width=frame.column_width;$0.lTitle=frame.title;$0.titleHeight=frame.titleH;$0.titleWidth=frame.titleW;$0.regionHeight=frame.regionHeight;$0.regionWidth=frame.regionWidth;$0.visually_cat=frame.visually_cat;$0.field_name=frame.param;$0.session=this.$2_0.get_viewSession();$0.field_name_id=frame.field_name_id;$0.vertical_layout=frame.vertical_layout;$0.borderWidth=this.$2_0.get_$1_F();if(ss.isValue(frame.format)){$0.format=frame.format;}return this.instantiateLegendPanel($0);},onViewModelPropertyChanged:function(sender,e){if(String.equals(e.get_propertyName(),'urlCacheInfo',false)){}else if(String.equals(e.get_propertyName(),'ParentZoneSizeChanged',false)){this.$2_6();}},$2_6:function(){var $0=this.$2_0.get_$1_3();if(ss.isValue($0)&&!tab.SizeUtil.equals($0,this.$2_3)){var $1=this.get_template().domRoot.find('.LegendPanel');$1.css({width:$0.w+'px',height:$0.h+'px'});this.$2_3=$0;}}}
tab.LegacyLegendTemplate=function(){tab.LegacyLegendTemplate.initializeBase(this,[$("<div class='tab-legacyLegend'></div>")]);}
tab.PageView=function(viewModel){tab.PageView.initializeBase(this,[viewModel,new tab.PageTemplate()]);this.pageViewModel=viewModel;this.pageViewModel.add_newPage(ss.Delegate.create(this,this.handleNewPage));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
this.pageViewModel.remove_newPage(ss.Delegate.create(this,this.handleNewPage));})));}
tab.PageView.prototype={pageViewModel:null,$2_0:null,get_zonePresModel:function(){return this.pageViewModel.get_pageModel().get_zone();},get_domRoot:function(){return this.get_template().domRoot;},dispose:function(){if(ss.isValue(this.$2_0)){this.$2_0.destroyRecursive(false);this.$2_0=null;}tab.PageView.callBaseMethod(this, 'dispose');},onAddedToDom:function(){tab.PageView.callBaseMethod(this, 'onAddedToDom');if(ss.isValue(this.pageViewModel.get_pageModel())){this.handleNewPage();}},handleNewPage:function(){if(ss.isNullOrUndefined(this.$2_0)&&ss.isValue(this.pageViewModel.get_pageModel())&&ss.isValue(this.pageViewModel.get_pageModel().get_pagePresModel())){var $0=this.pageViewModel.get_pageModel().get_pagePresModel();this.$2_0=this.createCurrentPagePanel($0);this.get_template().domRoot.append(this.$2_0.domNode);this.$2_0.startup();this.$2_0.refreshLayout($0.pageNames,$0.currentPage,$0.pageTrailOptions.state);var $1=tab.$create_RectXY(0,0,this.get_zonePresModel().w,this.get_zonePresModel().h);tab.DomUtil.resize(this.$2_0,tab.RectXYUtil.toRect($1));}},createCurrentPagePanel:function(presModel){var $0={};$0.cpHeight=this.get_zonePresModel().h;$0.sheetid=this.get_zonePresModel().sheet;$0.zid=this.get_zonePresModel().zoneId;$0.enable=presModel.pageTrailOptions.state;$0.show_slider=presModel.showPageSlider;$0.show_toggle=presModel.showHistoryControls;$0.show_dropdown=presModel.showPageReadout;$0.current_page=presModel.currentPage;$0.pages=presModel.pageNames;$0.session=this.pageViewModel.get_viewSession();$0.layoutSession=this.pageViewModel.get_layoutSession();$0.lTitle=this.pageViewModel.get_pageModel().get_title();$0.titleHtml=presModel.titleHtml;$0.zoneTitleHeight=this.get_zonePresModel().titleHeight;$0.zoneTitleWidth=this.get_zonePresModel().titleWidth;$0.isDashboard=true;$0.pageViewModel=this.pageViewModel;return this.instantiateCurrentPagePanel($0);},instantiateCurrentPagePanel:function(props){return new tableau.base.widget.CurrentPagePanel(props);}}
tab.PageTemplate=function(){tab.PageTemplate.initializeBase(this,[$("<div class='tab-page'></div>")]);}
tab.SimpleRegionCanvasView=function(viewModel,domNode,paneTableVM){tab.SimpleRegionCanvasView.initializeBase(this,[viewModel,domNode]);this.renderer=new tab.DisplayList2DRenderer(this.canvasElt,this.context);this.$2_6=paneTableVM;}
tab.SimpleRegionCanvasView.prototype={$2_6:null,get_displayListRenderer:function(){return this.renderer;},get_visualListVM:function(){return this.get_viewModel();},performRender:function(){this.get_displayListRenderer().clear();this.get_displayListRenderer().renderVisualList(this.get_visualListVM(),this.$2_6.get_scene().get_imageDictionary());},postRenderFinalPass:function(){this.get_displayListRenderer().$12(this.get_visualListVM());}}
tab.LogOnView=function(viewModel){tab.LogOnView.initializeBase(this,[viewModel,tab.Template.fromHtml("<div class='tabLogin'>")]);this.logOnViewModel=viewModel;var $0=$('<div>');if(tsConfig.is_mobile){$0.css('overflow','auto');}var $1=$("<iframe name='tabLoginFrame' frameborder='0'></iframe>");$1.css('border','0px none');$1.prop('src',this.logOnViewModel.get_logOnUrl());$1.prop('width','550');$1.prop('height','270');this.get_element().append($1);this.logOnViewModel.add_shown(ss.Delegate.create(this,this.$2_3));this.logOnViewModel.add_hidden(ss.Delegate.create(this,this.$2_4));this.$2_1=new tab.Dialog(tab.Strings.LogOnTitle,this.get_element());this.$2_1.get_dialogElement().addClass('tabLoginDialog');this.$2_1.add_closed(ss.Delegate.create(this,function(){
this.logOnViewModel.cancel();}));tab.LogOnView.$2_0=ss.Delegate.create(this,this.$2_2);}
tab.LogOnView.fireLogOnComplete=function(){if(ss.isValue(tab.LogOnView.$2_0)){tab.LogOnView.$2_0();}}
tab.LogOnView.prototype={logOnViewModel:null,$2_1:null,dispose:function(){tab.LogOnView.$2_0=null;this.logOnViewModel.remove_shown(ss.Delegate.create(this,this.$2_3));this.logOnViewModel.remove_hidden(ss.Delegate.create(this,this.$2_4));this.$2_1.dispose();tab.LogOnView.callBaseMethod(this, 'dispose');},onViewModelPropertyChanged:function(sender,e){this.updateContent();},updateContent:function(){},$2_2:function(){this.logOnViewModel.logOnComplete();},$2_3:function(){this.$2_1.showModal();},$2_4:function(){this.$2_1.dispose();}}
tab.NotificationView=function(viewModel){tab.NotificationView.initializeBase(this,[viewModel,tab.Template.fromHtml("<div class='tabNotification'>")]);this.notificationViewModel=viewModel;this.$2_0=$('<div>').addClass('tabNotificationMessage').appendTo(this.get_element());this.updateContent();this.$2_1=tab.ClickHandler.targetAndClick($('<div>').addClass('tabNotificationClose').html('\u00d7'),ss.Delegate.create(this,this.$2_5)).get_target();this.$2_1.appendTo(this.get_element());this.notificationViewModel.add_shown(ss.Delegate.create(this,this.shown));this.notificationViewModel.add_hidden(ss.Delegate.create(this,this.hidden));}
tab.NotificationView.prototype={notificationViewModel:null,$2_0:null,$2_1:null,$2_2:false,$2_3:false,dispose:function(){if(this.$2_3){this.$2_2=true;return;}this.notificationViewModel.remove_shown(ss.Delegate.create(this,this.shown));this.notificationViewModel.remove_hidden(ss.Delegate.create(this,this.hidden));tab.NotificationView.callBaseMethod(this, 'dispose');},onViewModelPropertyChanged:function(sender,e){this.updateContent();},updateContent:function(){this.$2_0.text(this.notificationViewModel.get_message());},hidden:function(){this.get_element().fadeOut('slow',ss.Delegate.create(this,this.$2_4));},shown:function(){this.$2_3=true;this.get_element().css('display','none');this.get_element().appendTo($('body'));this.get_element().css('margin-left','-'+(this.get_element().outerWidth(true)/2)+'px');this.get_element().fadeIn('fast');},$2_4:function(){this.$2_3=false;if(this.$2_2){this.dispose();}else{this.get_element().detach();}},$2_5:function($p0){this.hidden();}}
tab.PaneTableCanvasView=function(viewModel,domNode){tab.PaneTableCanvasView.initializeBase(this,[viewModel,domNode]);this.renderer=new tab.PaneTable2DRenderer(this.canvasElt,this.context);if(this.containers.length>1){var $0=new tab.CanvasTemplate();this.$2_6=$0.canvasElt.get(0);this.$2_7=tab.CanvasRenderer.$7(this.$2_6);this.containers.eq(1).append($0.domRoot);}var $enum1=ss.IEnumerator.getEnumerator(Object.keys(viewModel.get_vizRegionMap()));while($enum1.moveNext()){var $1=$enum1.current;if(!tab.PaneTableViewModel.blackListVisualParts.contains($1)){viewModel.get_vizRegionMap()[$1].add_propertyChanged(ss.Delegate.create(this,this.onViewModelPropertyChanged));}}}
tab.PaneTableCanvasView.prototype={$2_6:null,$2_7:null,get_paneTableVM:function(){return this.get_viewModel();},get_paneTableRenderer:function(){return this.renderer;},performRender:function(){var $0=tab.MetricsLogger.get_instance().createContext('PaneTableView::PerformRender');this.renderer.clear();this.get_paneTableRenderer().renderScene(this.get_paneTableVM());if(this.$2_6!=null){if(this.get_actualViewSize().w!==this.$2_6.width||this.get_actualViewSize().h!==this.$2_6.height){tab.CanvasUtil.densifyCanvasUsingSize(this.$2_6,this.get_actualViewSize(),this.get_effectiveViewSize());}this.$2_7.clearRect(0,0,this.$2_6.width,this.$2_6.height);this.copyContent(this.$2_7);}$0.close();},onViewModelPropertyChanged:function(sender,e){var $0=this.get_paneTableVM().getAndClearInvalidationRects();if(!$0.length){this.invalidate(false);}else{var $1=tab.$create_RectXY(0,0,0,0);var $enum1=ss.IEnumerator.getEnumerator($0);while($enum1.moveNext()){var $3=$enum1.current;$1=tab.RectXYUtil.union($1,$3);}var $2=tab.$create_Point(-this.get_scrollPos().x,-this.get_scrollPos().y);$1=tab.RectXYUtil.offsetRect($1,$2);this.invalidateRect($1,false);}},postRenderFinalPass:function(){this.get_paneTableRenderer().renderViewportBorders(this.get_paneTableVM());this.get_paneTableRenderer().renderAxisRulers(this.get_paneTableVM(),this.get_docSize(),this.get_scrollPos());}}
tab.SubscribeView=function(viewModel,toolbarButton){tab.SubscribeView.initializeBase(this,[viewModel,tab.Template.fromHtml("<div class='tabSubscribe'>")]);viewModel.add_shown(ss.Delegate.create(this,this.$2_E));viewModel.add_hidden(ss.Delegate.create(this,this.$2_C));viewModel.add_modeChange(ss.Delegate.create(this,this.layout));viewModel.add_emailChanged(ss.Delegate.create(this,this.handleEmailUpdated));viewModel.add_schedulesChanged(ss.Delegate.create(this,this.handleSchedulesUpdated));viewModel.add_emailValidationChanged(ss.Delegate.create(this,this.$2_B));viewModel.add_subjectValidationChanged(ss.Delegate.create(this,this.$2_A));this.comboBoxViewModel=new tab.ComboBoxViewModel();this.comboBoxView=tab.ObjectRegistry.newView(tab.ComboBoxView,this.comboBoxViewModel);this.toolbarButton=toolbarButton;this.overlayPanel=new tab.OverlayPanel();this.panel=this.get_element();this.buildDom();this.panel.hide();$('body').append(this.panel);this.enableTextSelection();}
tab.SubscribeView.prototype={overlayPanel:null,toolbarButton:null,panel:null,emailPanel:null,subscribePanel:null,sheetButtonWorksheet:null,sheetButtonWorkbook:null,comboBoxView:null,comboBoxViewModel:null,get_defaultPanelWidth:function(){return 300;},get_$2_0:function(){return this.get_viewModel();},dispose:function(){this.get_$2_0().remove_shown(ss.Delegate.create(this,this.$2_E));this.get_$2_0().remove_hidden(ss.Delegate.create(this,this.$2_C));this.get_$2_0().remove_modeChange(ss.Delegate.create(this,this.layout));this.get_$2_0().remove_emailChanged(ss.Delegate.create(this,this.handleEmailUpdated));this.get_$2_0().remove_schedulesChanged(ss.Delegate.create(this,this.handleSchedulesUpdated));this.get_$2_0().remove_emailValidationChanged(ss.Delegate.create(this,this.$2_B));this.get_$2_0().remove_subjectValidationChanged(ss.Delegate.create(this,this.$2_A));this.comboBoxViewModel.dispose();this.overlayPanel.dispose();tab.SubscribeView.callBaseMethod(this, 'dispose');},buildDom:function(){this.get_element().append($('<div>').addClass('tabSubscribeTitleContainer').append($('<span>').addClass('tabSubscribeTitle').text(tab.Strings.SubscribeTitle)));this.get_element().append($('<div>').addClass('tabSubscribeModePanel'));},layout:function(){if(this.get_$2_0().get_mode()===tab.SubscribeViewModel.modeEmail){this.layoutEmailSetup();}else{this.layoutSubscribeSetup();}},layoutEmailSetup:function(){var $0=this.get_element().find('.tabSubscribeModePanel').first();if(ss.isValue(this.subscribePanel)){this.subscribePanel.detach();}if(!ss.isValue(this.emailPanel)){var $1=tab.StyledButton.createStyledButton(ss.Delegate.create(this,this.$2_4),tab.Strings.SubscribeNext,'tabSubscribeNextButton',1);var $2=tab.StyledButton.createStyledButton(ss.Delegate.create(this,this.$2_6),tab.Strings.SubscribeCancel,'tabSubscribeCancelButton',2);$1.addClass('tab-disabled');this.emailPanel=$('<div>');this.emailPanel.append($('<div>').addClass('tabSubscribeEmailContainer').append($('<div>').addClass('tabSubscribeLabel').text(tab.Strings.SubscribeEnterAddress)).append($('<input>').attr({type:'text',id:'tabSubscribeAddress'}).addClass('tabSubscribeTextbox').keyup(ss.Delegate.create(this,this.$2_9))));this.emailPanel.append($('<div>').addClass('tabSubscribeButtonContainer').append($1).append($2));}$0.append(this.emailPanel);},layoutSubscribeSetup:function(){var $0=this.get_element().find('.tabSubscribeModePanel').first();if(ss.isValue(this.emailPanel)){this.emailPanel.detach();}if(!ss.isValue(this.subscribePanel)){var $1=tab.StyledButton.createStyledButton(ss.Delegate.create(this,this.$2_5),tab.Strings.SubscribeSubscribe,'tabSubscribeSubscribeButton',1);var $2=tab.StyledButton.createStyledButton(ss.Delegate.create(this,this.$2_6),tab.Strings.SubscribeCancel,'tabSubscribeCancelButton',2);this.subscribePanel=$('<div>');this.subscribePanel.append($('<div>').addClass('tabSubscribeEmailContainer').append($('<div>').addClass('tabSubscribeLabel').text(tab.Strings.SubscribeTo)).append($('<div>').addClass('tabSubscribeEmailAddress'))).append($('<div>').addClass('tabSubscribeLabel').text(tab.Strings.SubscribeSubject)).append($('<input>').attr({type:'text',id:'tabSubscribeSubject'}).addClass('tabSubscribeTextbox').val(this.get_$2_0().get_defaultSubject()).keyup(ss.Delegate.create(this,this.$2_8)));this.subscribePanel.append($('<div>').addClass('tabSubscribeLabel').text(tab.Strings.SubscribeSchedule)).append($('<div>').addClass('tabSubscribeSchedules').append(this.$2_1()));this.subscribePanel.append($('<div>').addClass('tabSubscribeLabel').text(tab.Strings.SubscribeContent)).append(this.$2_2());this.subscribePanel.append($('<div>').addClass('tabSubscribeButtonContainer').append($1).append($2));}this.subscribePanel.find('.tabSubscribeEmailAddress').text(this.get_$2_0().get_email());$0.append(this.subscribePanel);},handleEmailUpdated:function(){if(ss.isValue(this.subscribePanel)){var $0=this.subscribePanel.find('.tabSubscribeEmailAddress');if(ss.isValue($0)){$0.text(this.get_$2_0().get_email());}}},handleSchedulesUpdated:function(){this.comboBoxViewModel.clearItems();var $0=true;var $enum1=ss.IEnumerator.getEnumerator(this.get_$2_0().get_schedules());while($enum1.moveNext()){var $1=$enum1.current;var $2=new tab.ComboBoxItem(null,$1.get_name(),$1,null);this.comboBoxViewModel.addItem($2);if($0){this.comboBoxViewModel.set_selectedItem($2);$0=false;}}},place:function(){var $0=$(document.body);var $1=this.get_defaultPanelWidth();var $2=this.toolbarButton.offset();var $3=this.toolbarButton.outerWidth();var $4=$0.width();var $5=$0.height();var $6=$2.left+$3;var $7=$4-$6;if($7<10){var $9=10-$7;$6=$6-$9;}$6=($6>$1)?$6-$1:0;var $8={left:$6+'px',width:$1+'px'};if(this.get_$2_0().get_isTop()){var $A=$2.top+this.toolbarButton.outerHeight();$8['top']=$A+'px';}else{var $B=$5-$2.top;$8['bottom']=$B+'px';}this.panel.css($8);},$2_1:function(){this.comboBoxViewModel.clearItems();var $0=true;var $enum1=ss.IEnumerator.getEnumerator(this.get_$2_0().get_schedules());while($enum1.moveNext()){var $1=$enum1.current;var $2=new tab.ComboBoxItem(null,$1.get_name(),$1,null);this.comboBoxViewModel.addItem($2);if($0){this.comboBoxViewModel.set_selectedItem($2);$0=false;}}return this.comboBoxView.get_element();},$2_2:function(){var $0=$('<div>').addClass('tabSubscribeSheetButtonContainer');this.sheetButtonWorksheet=this.$2_3(ss.Delegate.create(this,function($p1_0){
this.sheetButtonWorkbook.removeClass('tabSubscribeSheetButtonSelected');this.sheetButtonWorksheet.addClass('tabSubscribeSheetButtonSelected');this.get_$2_0().set_sheetSelectionIsWorkbook(false);}),tab.Strings.SubscribeSheet,'tabSubscribeSheetButtonLeft','tab-subscribe-icon-worksheet');this.sheetButtonWorkbook=this.$2_3(ss.Delegate.create(this,function($p1_0){
this.sheetButtonWorksheet.removeClass('tabSubscribeSheetButtonSelected');this.sheetButtonWorkbook.addClass('tabSubscribeSheetButtonSelected');this.get_$2_0().set_sheetSelectionIsWorkbook(true);}),tab.Strings.SubscribeWorkbook,'tabSubscribeSheetButtonRight','tab-subscribe-icon-workbook');$0.append(this.sheetButtonWorksheet);$0.append(this.sheetButtonWorkbook);this.sheetButtonWorksheet.addClass('tabSubscribeSheetButtonSelected');return $0;},$2_3:function($p0,$p1,$p2,$p3){return tab.ClickHandler.targetAndClick($('<button>').addClass('tabSubscribeSheetButton').addClass($p2).append($('<span>').addClass('tabSubscribeSheetButtonIcon').addClass($p3)).append($('<div>').addClass('tabSubscribeSheetButtonLabel').text($p1)),$p0).get_target();},$2_4:function($p0){if(this.get_$2_0().get_intermediateEmailValid()&&ss.isValue(this.emailPanel)){var $0=$('#tabSubscribeAddress').val();var $1=ss.Delegate.create(this,function(){
this.$2_10();this.emailPanel.detach();this.get_$2_0().startSubscribe();});var $2=ss.Delegate.create(this,function($p1_0){
this.$2_F($p1_0);});this.get_$2_0().submitEmail($0,$1,$2);}},$2_5:function($p0){if(this.get_$2_0().get_intermediateSubjectValid()){var $0=$('#tabSubscribeSubject').val();var $1=this.comboBoxViewModel.get_selectedItem().get_data();this.get_$2_0().createSubscription($0,$1,tab.Strings.SubscribeSuccess,tab.Strings.SubscribeFailure);this.get_$2_0().hide();}},$2_6:function($p0){this.get_$2_0().hide();},$2_7:function($p0){this.$2_6($p0);},$2_8:function($p0){this.get_$2_0().set_intermediateSubject($($p0.target).val());},$2_9:function($p0){this.get_$2_0().set_intermediateEmail($($p0.target).val());},$2_A:function(){var $0=$('.tabSubscribeSubscribeButton').first();if(this.get_$2_0().get_intermediateSubjectValid()){$0.removeClass('tab-disabled');}else{$0.addClass('tab-disabled');}},$2_B:function(){var $0=$('.tabSubscribeNextButton').first();if(this.get_$2_0().get_intermediateEmailValid()){$0.removeClass('tab-disabled');}else{$0.addClass('tab-disabled');}},$2_C:function(){this.overlayPanel.hide();this.get_element().fadeOut('fast',ss.Delegate.create(this,this.$2_D));},$2_D:function(){if(ss.isValue(this.emailPanel)){this.emailPanel.detach();}if(ss.isValue(this.subscribePanel)){this.subscribePanel.detach();}},$2_E:function(){this.overlayPanel.show();this.overlayPanel.bind(tab.MouseEventUtil.get_clickEvent(),ss.Delegate.create(this,this.$2_7));this.layout();this.place();this.get_element().fadeIn('fast');},$2_F:function($p0){if(ss.isValue(this.emailPanel)&&!(this.emailPanel.find('.tabSubscribeError').size()>0)){var $0=this.emailPanel.find('.tabSubscribeEmailContainer');$0.append($('<div>').addClass('tabSubscribeError').text($p0));}},$2_10:function(){if(ss.isValue(this.emailPanel)){this.emailPanel.find('.tabSubscribeError').remove();}}}
tab.UberPopupView=function(viewModel,t){this.$2_0=new tab.OverlayPanel();tab.UberPopupView.initializeBase(this,[viewModel,t]);this.dom=t;this.popupViewModel=viewModel;this.popupViewModel.add_shown(ss.Delegate.create(this,this.shown));this.popupViewModel.add_hidden(ss.Delegate.create(this,this.hidden));this.$2_0.get_element().addClass('tabUberPopupOverlayPanel');this.$2_0.bind(tab.MouseEventUtil.get_clickEvent(),ss.Delegate.create(this,this.overlayPanelClicked));}
tab.UberPopupView.prototype={dom:null,popupViewModel:null,$2_1:null,$2_2:false,dispose:function(){if(ss.isValue(this.$2_1)){(this.$2_1).dispose();}this.popupViewModel.remove_shown(ss.Delegate.create(this,this.shown));this.popupViewModel.remove_hidden(ss.Delegate.create(this,this.hidden));this.$2_0.get_element().detach();this.$2_0.dispose();tab.UberPopupView.callBaseMethod(this, 'dispose');},updateMode:function(){if(!this.$2_2){return;}if(!this.popupViewModel.get_mode()){this.$2_0.show();}else if(this.popupViewModel.get_mode()===1){this.$2_0.hide();}},onViewModelPropertyChanged:function(sender,e){if(e.get_propertyName()==='mode'){this.updateMode();}else{this.updateContent();}},hidden:function(){this.$2_2=false;this.$2_0.hide();this.dom.domRoot.hide();this.dom.domRoot.detach();},shown:function(options){this.updateContent();this.$2_2=true;this.updateMode();tab.BrowserViewport.getViewport(ss.Delegate.create(this,function($p1_0){
this.dom.domRoot.appendTo('body');if(Type.canCast(this.$2_1,tab.BaseView)){(this.$2_1).onAddedToDom();}this.positionPopup($p1_0,options);this.dom.domRoot.show();}));},overlayPanelClicked:function(e){this.popupViewModel.hide();},positionPopup:function(viewport,options){var $0=options.relativeElement;var $1=options.horizontalAlign;var $2=tab.PointUtil.fromPosition($0.offset());var $3=this.dom.domRoot.outerHeight(true);var $4=this.dom.domRoot.outerWidth(true);var $5=$0.outerHeight(true);var $6=$2.x;if(!$1){var $A=$6+$0.outerWidth(true);$6=$A-$4;}else if($1===1){var $B=$6+($0.outerWidth(true)/2);$6=$B-($4/2);}var $7=tab.$create_Point($6,0);var $8=viewport.getVisibleRoom($2);if($8.roomBelow>=($3+$5+this.get_uberPopupShadowHeight())){$7.y=$2.y+$5;}else if($8.roomAbove>$3+this.get_uberPopupShadowHeight()){$7.y=$2.y-$3;}else if($8.roomBelow>=$8.roomAbove){$7.y=$2.y-($3-$8.roomBelow+this.get_uberPopupShadowHeight());}else{$7.y=$2.y-$8.roomAbove+this.get_uberPopupShadowHeight();}if($8.roomRight<$4){$7.x-=($4-$8.roomRight);}var $9={};$9['top']=$7.y+'px';$9['left']=$7.x+'px';this.dom.domRoot.css($9);},updateContent:function(){if(ss.isValue(this.$2_1)){(this.$2_1).dispose();}this.dom.content.children().detach();this.$2_1=tab.ObjectRegistry.newView(this.popupViewModel.get_content().get_viewType(),this.popupViewModel.get_content().get_viewModel());this.dom.content.append(this.$2_1.get_element());if(this.$2_2&&Type.canCast(this.$2_1,tab.BaseView)){(this.$2_1).onAddedToDom();}}}
tab.UberPopupTemplate=function(){tab.UberPopupTemplate.initializeBase(this,[$("<div class='tabUberPopup'><div class='tabUberPopupContent'/></div>")]);this.content=this.getElementBySelector('.tabUberPopupContent');}
tab.UberPopupTemplate.prototype={content:null}
tab.VisualRegionCanvasView=function(viewModel,domNode){this.completeDocSize=tab.$create_Size(0,0);tab.VisualRegionCanvasView.initializeBase(this,[viewModel]);this.$2_4=domNode;this.containers=$('.tvimagesContainer',this.$2_4);}
tab.VisualRegionCanvasView.prototype={renderer:null,containers:null,$2_4:null,add_loadComplete:function(value){this.$2_5=ss.Delegate.combine(this.$2_5,value);},remove_loadComplete:function(value){this.$2_5=ss.Delegate.remove(this.$2_5,value);},$2_5:null,get_docSize:function(){return this.completeDocSize;},destroy:function(){this.dispose();},dispose:function(){this.renderer=null;tab.VisualRegionCanvasView.callBaseMethod(this, 'dispose');},refreshImages:function(newCacheInfo){},reset:function(newGeometry,newTileSize){if(ss.isNullOrUndefined(newGeometry)){return;}var $0=tab.$create_Size(newGeometry.w,newGeometry.h);if(ss.isValue(this.completeDocSize)&&!tab.SizeUtil.equals($0,this.completeDocSize)){var $1=this.get_effectiveViewSize();var $2=tab.$create_Point(Math.min($0.w-$1.w,this.scrollOffset.x),Math.min($0.h-$1.h,this.scrollOffset.y));this.set_scrollPos($2);}this.completeDocSize=$0;this.containers.width(newGeometry.w);this.containers.height(newGeometry.h);},copyContent:function(destContext){destContext.drawImage1(this.canvasElt,0,0);},redraw:function(){if(!this.get_needsRedraw()||ss.isNullOrUndefined(this.renderer)){return;}this.renderer.reset();this.context.save();tab.CanvasUtil.scaleCanvasDrawing(this.context,this.get_pixelRatio());this.context.setClip(this.get_dirtyRect());this.renderer.set_renderOffset(this.scrollOffset);this.performRender();this.context.restore();this.postRenderFinalPass();this.clearDirty();this.raiseLoadComplete();},raiseLoadComplete:function(){if(ss.isValue(this.$2_5)){this.$2_5(this,ss.EventArgs.Empty);}},onViewModelPropertyChanged:function(sender,e){this.invalidate(false);}}
tab.ZoneView=function(zoneViewModel){tab.ZoneView.initializeBase(this,[zoneViewModel,new tab.ZoneTemplate()]);this.$2_2=zoneViewModel;this.$2_2.add_updateZone(ss.Delegate.create(this,this.$2_9));this.$2_2.add_resizeZone(ss.Delegate.create(this,this.$2_A));this.$2_2.add_newZoneContent(ss.Delegate.create(this,this.$2_C));this.$2_2.add_validStateChanged(ss.Delegate.create(this,this.$2_B));}
tab.ZoneView.viewRect=function(zonePresModel){var $0=0;if(ss.isValue(zonePresModel.styledBox)&&zonePresModel.styledBox.borderStyle!=='bs-none'&&ss.isValue(zonePresModel.styledBox.uw)){$0=zonePresModel.styledBox.uw;}var $1=tab.$create_RectXY(0,0,zonePresModel.w-(2*$0),zonePresModel.h-(2*$0));return tab.RectXYUtil.toRect($1);}
tab.ZoneView.prototype={$2_2:null,$2_3:null,$2_4:null,get_$2_5:function(){return this.$2_3;},set_$2_5:function($p0){this.$2_3=$p0;this.get_template().domRoot.append(this.$2_3.get_template().domRoot);this.$2_3.onAddedToDom();return $p0;},dispose:function(){this.$2_2.remove_updateZone(ss.Delegate.create(this,this.$2_9));this.$2_2.remove_resizeZone(ss.Delegate.create(this,this.$2_A));this.$2_2.remove_newZoneContent(ss.Delegate.create(this,this.$2_C));this.$2_2.remove_validStateChanged(ss.Delegate.create(this,this.$2_B));if(ss.isValue(this.$2_4)){this.$2_4.dispose();}tab.ZoneView.callBaseMethod(this, 'dispose');},onViewModelPropertyChanged:function(sender,e){if(e.get_propertyName()==='isActiveZone'){this.$2_6();}},$2_6:function(){var $0=(this.$2_2.get_$1_A())?'visible':'hidden';(this.get_template()).highlightBorders.css('visibility',$0);},$2_7:function(){if(!this.get_template().domRoot.get(0).offsetHeight||!this.get_template().domRoot.get(0).offsetWidth){return;}if(!ss.isValue(this.$2_4)){this.$2_4=new tab.OverlayPanel(this.get_template().domRoot.get(0));this.$2_4.get_element().removeClass().addClass('wcAQGlassPane').addClass('tab-fill');}this.$2_4.show();},$2_8:function(){if(ss.isValue(this.$2_4)){this.$2_4.hide();}},onAddedToDom:function(){tab.ZoneView.callBaseMethod(this, 'onAddedToDom');if(ss.isNullOrUndefined(this.get_$2_5())){this.$2_9();this.$2_A();if(ss.isValue(this.$2_2.get_zoneContentViewModel())){this.$2_C(this.$2_2.get_zoneContentViewModel());}this.$2_6();this.$2_B();}},$2_9:function(){this.get_template().domRoot.css('z-index',this.$2_2.get_zoneZIndex().toString());var $0=tab.FeatureParamsLookup.getBoolDefaultTrue(tab.FeatureParam.transparentBackground);var $1=ss.isValue($0)&&$0;if($1&&tab.ZoneView.$2_1.contains(this.$2_2.get_zoneType())){}else{this.get_template().domRoot.css('background-color',this.$2_2.get_backgroundColor());}if(this.$2_2.get_zoneType()==='layout-flow'||this.$2_2.get_zoneType()==='layout-free-form'||this.$2_2.get_zoneType()==='empty'){this.get_template().domRoot.addClass('wcLayoutContainer');}var $2=['layout-flow','map','color','size','shape','filter','paramctrl'];if($2.contains(this.$2_2.get_zoneType())){var $3=tab.FormattingConverters.$0(this.$2_2.get_model().get_zonePresModel().styledBox,$1);this.get_template().domRoot.css($3);}this.$2_B();},$2_A:function(){this.get_template().domRoot.css('width',this.$2_2.get_width().toString()+'px');this.get_template().domRoot.css('height',this.$2_2.get_height().toString()+'px');this.get_template().domRoot.css('top',this.$2_2.get_y().toString()+'px');this.get_template().domRoot.css('left',this.$2_2.get_x().toString()+'px');},$2_B:function(){if(!this.$2_2.get_valid()){this.$2_7();}else{this.$2_8();}},$2_C:function($p0){var $0=this.$2_2.get_zoneType();switch($0){case 'title':case 'text':this.set_$2_5(new tab.TextRegionView($p0));break;case 'size':case 'shape':case 'color':case 'map':if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(Type.canCast($p0,tab.CategoricalLegendViewModel)){this.set_$2_5(tab.ObjectRegistry.newView(tab.CategoricalLegendView,$p0));}else if(Type.canCast($p0,tab.QuantitativeColorLegendViewModel)){this.set_$2_5(new tab.QuantitativeColorLegendView($p0));}}else{var $1=tab.ObjectRegistry.newView(tab.LegacyLegendView,$p0);this.set_$2_5($1);}break;case 'current-page':this.set_$2_5(tab.ObjectRegistry.newView(tab.PageView,$p0));break;case 'filter':this.set_$2_5(tab.ObjectRegistry.newView(tab.QuickFilterView,$p0));break;case 'paramctrl':this.set_$2_5(tab.ObjectRegistry.newView(tab.ParameterControlView,$p0));break;case 'flipboard-nav':this.set_$2_5(tab.ObjectRegistry.newView(tab.FlipboardNavigatorView,$p0));break;case 'flipboard':this.set_$2_5(tab.ObjectRegistry.newView(tab.FlipboardView,$p0));break;case 'web':this.set_$2_5(new tab.WebZoneView($p0,this.$2_2));break;case 'bitmap':this.set_$2_5(new tab.ImageZoneView($p0,this.$2_2));break;case 'viz':this.set_$2_5(tab.ObjectRegistry.newView(tab.PaneTableView,$p0));break;default:break;}}}
tab.ZoneTemplate=function(){tab.ZoneTemplate.initializeBase(this,[$(tab.ZoneTemplate.$1_0)]);this.highlightBorders=this.getElementsBySelector('.wcHighlight');}
tab.ZoneTemplate.prototype={highlightBorders:null}
tab.ActionExecutedEventArgs=function(){tab.ActionExecutedEventArgs.initializeBase(this);}
tab.ActionExecutedEventArgs.prototype={action:null}
tab.TextRegionView=function(viewModel){this.$2_2=['transform','-ms-transform','-webkit-transform','-moz-transform','-o-transform'];tab.TextRegionView.initializeBase(this,[viewModel,new tab.TextRegionTemplate()]);this.$2_1=viewModel;this.$2_1.add_newTextRegion(ss.Delegate.create(this,this.handleNewTextRegion));this.$2_0=this.get_template();}
tab.TextRegionView.prototype={$2_0:null,$2_1:null,onAddedToDom:function(){tab.TextRegionView.callBaseMethod(this, 'onAddedToDom');this.handleNewTextRegion();},handleNewTextRegion:function(){if(!this.$2_1.hasPresModel()){return;}var $0={overflow:'hidden',position:'absolute',top:'0px',left:'0px',right:'0px',bottom:'0px'};this.$2_0.domRoot.css($0);this.$2_3(this.$2_0.contentElem);this.$2_5(this.$2_0.backgroundElem);},$2_3:function($p0){$p0.html(this.$2_1.get_html());var $0={position:'absolute',top:'auto',left:'auto',right:'auto',bottom:'auto','margin-top':'auto'};if(this.$2_6(this.$2_1.get_orientation())||this.$2_7(this.$2_1.get_orientation())){var $1=$p0.parent().width();var $2=$p0.parent().height();$0['width']=$2.toString()+'px';$p0.css($0);var $3='0%';if(this.$2_6(this.$2_1.get_orientation())){if(!(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9)){$0['bottom']='100%';}$3='100%';}else if(this.$2_7(this.$2_1.get_orientation())){if(!(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9)){$0['top']='100%';}$3='0%';}$0['left']=this.$2_9($1,$p0.height(),this.$2_1.get_hAlign());this.$2_8($p0,'0% '+$3,this.$2_1.get_orientation().toString());}else{$0['width']='100%';var $4=$p0.parent().height();if($4<=$p0.height()&&!this.$2_4($p0,$4)){$0['top']='0%';}else{if(this.$2_1.get_vAlign()==='v-align-center'){$0['top']='50%';$0['margin-top']=(-$p0.height()/2).toString()+'px';}else if(this.$2_1.get_vAlign()==='v-align-bottom'){$0['bottom']='0%';}else if(this.$2_1.get_vAlign()==='v-align-top'){$0['top']='0%';}}}$p0.css($0);},$2_4:function($p0,$p1){var $0=false;$p0.find('span').each(function($p1_0,$p1_1){
if(!$0&&ss.isValue($p1_1.style.lineHeight)){$0=parseInt($p1_1.style.lineHeight)>$p1;}});return $0;},$2_5:function($p0){var $0=this.$2_1.get_styledBox();var $1=tab.FormattingConverters.getCSSBorderStyle($0.borderStyle);var $2=2*$0.uw;if($1==='none'){$2=0;}var $3={position:'absolute',width:($p0.parent().width()-$2).toString()+'px',height:($p0.parent().height()-$2).toString()+'px','border-width':$0.uw.toString()+'px','border-color':$0.borderColor,'border-style':$1};if(this.$2_1.get_styledBox().hasFill){var $4=tab.FeatureParamsLookup.getBoolDefaultTrue(tab.FeatureParam.transparentBackground);if(ss.isValue($4)&&$4){if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){var $5=tab.ColorModel.fromColorCode(this.$2_1.get_styledBox().fillColor).toArgbHex();var $6='progid:DXImageTransform.Microsoft.gradient('+'startColorStr='+$5+','+'endColorStr='+$5+')';$3['background']='transparent';$3['filter']=$6;$3['-ms-filter']=$6;$3['zoom']=1;}else{$3['background-color']=tab.ColorModel.convertColorForCanvas(this.$2_1.get_styledBox().fillColor);}}else{if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){$3['background-color']=tab.ColorModel.fromColorCode(this.$2_1.get_styledBox().fillColor).toRgb();}else{$3['background-color']=this.$2_1.get_styledBox().fillColor;}}}$p0.css($3);},$2_6:function($p0){return Math.round($p0)===90;},$2_7:function($p0){return Math.round($p0)===-90;},$2_8:function($p0,$p1,$p2){var $0={};if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){var $1=($p2==='90')?1:($p2==='-90')?3:0;if(!!$1){var $2='white';var $3='white';if(this.$2_1.get_styledBox().hasFill){var $7=tab.ColorModel.fromColorCode(this.$2_1.get_styledBox().fillColor);var $8=tab.FeatureParamsLookup.getBoolDefaultTrue(tab.FeatureParam.transparentBackground);if(ss.isValue($8)&&$8){var $9='white';var $A=tab.ModelUtils.findContentDashboard();if(ss.isValue($A)){$9=($A.get_backgroundColor()||'white');}var $B=tab.ColorModel.alphaComposite($7,tab.ColorModel.fromColorCode($9));$7=new tab.ColorModel($B.get_r(),$B.get_g(),$B.get_b(),1);}$2=$7.toRgb();$3=$7.toArgbHex();}var $4="progid:DXImageTransform.Microsoft.Chroma(color='"+$3+"')";var $5='progid:DXImageTransform.Microsoft.BasicImage(rotation='+$1+')';var $6=$4+' '+$5;$0['-ms-filter']=$6;$0['filter']=$6;$0['background-color']=$2;}}else{var $enum1=ss.IEnumerator.getEnumerator(this.$2_2);while($enum1.moveNext()){var $C=$enum1.current;$0[$C+'-origin']=$p1;$0[$C]='rotate('+$p2+'deg)';}}$p0.css($0);},$2_9:function($p0,$p1,$p2){var $0=0;if($p1>$p0){$p2='h-align-left';}if($p2==='h-align-left'){$0=0;}else if($p2==='h-align-right'){$0=$p0-$p1;}else if($p2==='h-align-center'){$0=($p0/2)-($p1/2);}return $0.toString()+'px';}}
tab.TextRegionTemplate=function(){tab.TextRegionTemplate.initializeBase(this,[$("<div class='tab-textRegion'><div class='tab-textRegion-background'></div><div class='tab-textRegion-content'></div></div>")]);var $0=ss.Delegate.create(this,this.getElementBySelector);this.backgroundElem=$0('.tab-textRegion-background');this.contentElem=$0('.tab-textRegion-content');}
tab.TextRegionTemplate.prototype={backgroundElem:null,contentElem:null}
tab.Button=function(isLink){tab.Button.initializeBase(this,[$((isLink)?"<a href='#' class='tab-lnkbutton'><span class='label hide'></span><span class='icon'></span></a>":"<button class='tab-button'><span class='icon'></span><span class='label hide'></span></button>")]);this.get_element().click(function($p1_0){
$p1_0.preventDefault();});this.$1_2=(isLink||false);var $0=tab.$create_EventHandleSpec();tab.TableauEventHandler.setHandler($0,'potentialTap',ss.Delegate.create(this,this.$1_6));this.$1_3=tab.EventUtil.createEventHandler(this.get_element()[0],$0);}
tab.Button.prototype={$1_2:false,$1_3:null,$1_4:null,add_clicked:function(value){this.$1_5=ss.Delegate.combine(this.$1_5,value);},remove_clicked:function(value){this.$1_5=ss.Delegate.remove(this.$1_5,value);},$1_5:null,get_labelElement:function(){return this.get_element().find('.label');},get_disabled:function(){return this.get_element()[0].disabled;},set_disabled:function(value){this.get_element()[0].disabled=value;return value;},get_tooltip:function(){return this.get_element().attr('title');},set_tooltip:function(value){this.get_element().attr('title',value);return value;},get_label:function(){return this.get_labelElement().text();},set_label:function(value){this.get_labelElement().text(value);if(String.isNullOrEmpty(value)){this.get_labelElement().addClass('hide');}else{this.get_labelElement().removeClass('hide');}return value;},get_context:function(){return this.$1_4;},set_context:function(value){this.$1_4=value;return value;},get_isLink:function(){return this.$1_2;},dispose:function(){this.$1_3.dispose();tab.Button.callBaseMethod(this, 'dispose');},setLabelContents:function(element){if(ss.isValue(element)){this.get_labelElement().html(element);this.get_labelElement().removeClass('hide');}else{this.get_labelElement().html('');this.get_labelElement().addClass('hide');}},onClicked:function(args){if(ss.isValue(this.$1_5)){this.$1_5(this,args);}},$1_6:function($p0){if(this.get_disabled()){return;}$p0.preventDefault();$p0.stopPropagation();this.onClicked(ss.EventArgs.Empty);}}
tab.TiledImageViewModel=function(){tab.TiledImageViewModel.initializeBase(this);}
tab.TiledImageView=function(viewModel){tab.TiledImageView.initializeBase(this,[viewModel,new tab.TiledImageTemplate()]);}
tab.TiledImageView.prototype={get_canScrollX:function(){return (this.get_docSize().w-this.get_actualViewSize().w)>0;},get_canScrollY:function(){return (this.get_docSize().h-this.get_actualViewSize().h)>0;},get_docSize:function(){return tab.$create_Size(this.get_element().width(),this.get_element().height());},get_actualViewSize:function(){return tab.$create_Size(0,0);},get_effectiveViewSize:function(){return this.get_actualViewSize();},get_scrollPos:function(){return tab.$create_Point(this.get_element().scrollLeft(),this.get_element().scrollTop());},set_scrollPos:function(value){this.setXPos(value.x);this.setYPos(value.y);return value;},setXPos:function(xPos){this.get_element().scrollLeft(xPos);},setYPos:function(yPos){this.get_element().scrollTop(yPos);}}
tab.TiledImageTemplate=function(){tab.TiledImageTemplate.initializeBase(this,[$("<div class='tvimagesContainer'></div>")]);this.container=this.getElementBySelector('.tvimagesContainer');}
tab.TiledImageTemplate.prototype={container:null}
tab.ComboBoxView=function(viewModel,dom){tab.ComboBoxView.initializeBase(this,[viewModel,dom]);this.$2_1=viewModel;this.$2_2=dom;this.$2_1.add_selectedItemChanged(ss.Delegate.create(this,this.$2_5));this.clickHandler=tab.ClickHandler.targetAndClick(this.$2_2.domRoot,ss.Delegate.create(this,function(){
if(this.$2_1.get_showDropdownIcon()){this.$2_2.icon.addClass('tabComboBoxNoIconPressed');}this.$2_1.comboClicked(this.$2_2.domRoot);}));this.$2_2.domRoot.keydown(ss.Delegate.create(this,this.$2_4));this.$2_2.domRoot.addClass((!this.$2_1.get_theme())?'tabComboStdTheme':'tabComboCompactTheme');this.$2_1.add_menuHidden(ss.Delegate.create(this,this.$2_3));this.$2_5(this.$2_1.get_selectedItem());}
tab.ComboBoxView.prototype={clickHandler:null,$2_1:null,$2_2:null,$2_3:function(){this.$2_2.icon.removeClass('tabComboBoxNoIconPressed');},$2_4:function($p0){var $0=0;switch($p0.which){case 40:$0=1;break;case 38:$0=-1;break;default:return;}$p0.preventDefault();$p0.stopPropagation();var $1=this.$2_1.get_items().indexOf(this.$2_1.get_selectedItem());if($1<0){return;}$1+=$0;if($1>=0&&$1<this.$2_1.get_items().length){this.$2_1.set_selectedItem(this.$2_1.get_items()[$1]);}},$2_5:function($p0){if(Type.canCast($p0,tab.CustomComboBoxItem)){return;}this.$2_2.icon.remove();if(ss.isNullOrUndefined($p0)){var $0=(ss.isValue(this.$2_1.get_summary()))?this.$2_1.get_summary():'&nbsp;';this.$2_2.name.html($0);return;}this.$2_2.icon=$('<span/>').addClass('tabComboBoxIcon').addClass($p0.get_iconClass()).appendTo(this.$2_2.domRoot);if(!ss.isValue($p0.get_iconClass())){this.$2_2.domRoot.addClass('tabComboBoxNoIcon');}this.$2_2.name.text($p0.get_name());}}
tab.ComboBoxTemplate=function(){tab.ComboBoxTemplate.initializeBase(this,[$("<span class='tabComboBox tab-ctrl-formatted-widget'>\n    <span class='tabComboBoxIcon'/>\n    <div class='tabComboBoxNameContainer tab-ctrl-formatted-fixedsize'><span class='tabComboBoxName'/></div>\n    <span class='tabComboBoxButton'/>\n</span>")]);this.icon=this.getElementBySelector('.tabComboBoxIcon');this.name=this.getElementBySelector('.tabComboBoxName');this.button=this.getElementBySelector('.tabComboBoxButton');}
tab.ComboBoxTemplate.prototype={icon:null,name:null,button:null}
tab.ComboBoxViewModel=function(){this.$1_0=[];this.$1_4=0;this.$1_5=0;tab.ComboBoxViewModel.initializeBase(this);}
tab.ComboBoxViewModel.prototype={$1_1:null,$1_2:null,$1_3:null,$1_6:true,$1_7:false,$1_8:true,add_itemsChanged:function(value){this.$1_9=ss.Delegate.combine(this.$1_9,value);},remove_itemsChanged:function(value){this.$1_9=ss.Delegate.remove(this.$1_9,value);},$1_9:null,add_selectedItemChanged:function(value){this.$1_A=ss.Delegate.combine(this.$1_A,value);},remove_selectedItemChanged:function(value){this.$1_A=ss.Delegate.remove(this.$1_A,value);},$1_A:null,add_menuHidden:function(value){this.$1_B=ss.Delegate.combine(this.$1_B,value);},remove_menuHidden:function(value){this.$1_B=ss.Delegate.remove(this.$1_B,value);},$1_B:null,get_theme:function(){return this.$1_4;},set_theme:function(value){this.$1_4=value;return value;},get_menuTheme:function(){return this.$1_5;},set_menuTheme:function(value){this.$1_5=value;return value;},get_items:function(){return this.$1_0;},get_selectedItem:function(){return this.$1_1;},set_selectedItem:function(value){if(this.$1_1===value){return;}this.$1_1=value;if(ss.isValue(this.$1_A)){this.$1_A(this.$1_1);}return value;},get_summary:function(){return this.$1_2;},set_summary:function(value){this.$1_2=value;return value;},get_showSelectedItem:function(){return this.$1_6;},set_showSelectedItem:function(value){this.$1_6=value;return value;},get_showDropdownIcon:function(){return this.$1_7;},set_showDropdownIcon:function(value){this.$1_7=value;return value;},get_enabled:function(){return this.$1_8;},set_enabled:function(value){this.$1_8=value;return value;},dispose:function(){tab.ComboBoxViewModel.callBaseMethod(this, 'dispose');if(ss.isValue(this.$1_3)){this.$1_3.dispose();this.$1_3=null;}},setItems:function(newItems){this.$1_0.clear();var $enum1=ss.IEnumerator.getEnumerator(newItems);while($enum1.moveNext()){var $0=$enum1.current;this.$1_0.add($0);}this.$1_F();},addItem:function(item){this.$1_0.add(item);this.$1_F();},clearItems:function(){this.$1_0.clear();this.$1_F();this.set_selectedItem(null);},updateCurrentMenu:function(){if(!this.$1_0.length||!this.$1_8||!ss.isValue(this.$1_3)){return;}var $0=this.$1_C();this.$1_3.set_menu(new tab.Menu($0));},comboClicked:function(relativeTo){if(!this.$1_0.length||!this.$1_8){return;}var $0=this.$1_C();this.$1_3=tab.MenuViewModel.createForMenu(new tab.Menu($0),ss.Delegate.create(this,this.$1_10),this.$1_D());this.$1_3.add_hidden(ss.Delegate.create(this,this.$1_E));this.$1_3.show(tab.ShowMenuOptions.create(relativeTo,false,relativeTo.outerWidth(false)));},$1_C:function(){var $0=[];if(ss.isNull(this.$1_0)){return $0;}var $enum1=ss.IEnumerator.getEnumerator(this.$1_0);while($enum1.moveNext()){var $1=$enum1.current;if(this.$1_6||$1!==this.$1_1){$0.add($1.asMenuItem());}}return $0;},$1_D:function(){switch(this.$1_5){case 0:return new tab.ComboBoxMenuTheme();case 1:return new tab.ComboBoxDropdownMenuTheme();default:return new tab.ComboBoxMenuTheme();}},$1_E:function(){if(ss.isValue(this.$1_B)){this.$1_B();}},$1_F:function(){if(ss.isValue(this.$1_9)){this.$1_9();}},$1_10:function($p0){var $0=$p0.get_data();this.set_selectedItem($0);}}
tab.ComboBoxItem=function(iconClass,name,data,description){this.$0=iconClass;this.$1=name;this.$2=data;this.$3=description;}
tab.ComboBoxItem.prototype={$0:null,$1:null,$2:null,$3:null,get_iconClass:function(){return this.$0;},get_name:function(){return this.$1;},get_data:function(){return this.$2;},get_description:function(){return this.$3;},asMenuItem:function(){return tab.MenuItem.newItemWithIconAndDescription(this,this.get_name(),this.get_iconClass(),this.get_description());}}
tab.CustomComboBoxItem=function(domRoot,iconClass,name,data,description){tab.CustomComboBoxItem.initializeBase(this,[iconClass,name,data,description]);this.$4=domRoot;}
tab.CustomComboBoxItem.prototype={$4:null,get_domRoot:function(){return this.$4;},asMenuItem:function(){return tab.CustomMenuItem.newCustomMenuItem(this.get_domRoot());}}
tab.ComboBoxMenuTheme=function(){tab.ComboBoxMenuTheme.initializeBase(this);this.itemClass='tabMenuItemComboTheme';this.menuClass='tabMenuComboTheme';}
tab.ComboBoxDropdownMenuTheme=function(){tab.ComboBoxDropdownMenuTheme.initializeBase(this);this.itemClass='tabMenuItemComboDropdownTheme';this.menuClass='tabMenuComboDropdownTheme';}
tab.MenuView=function(viewModel,template){this.menuStack=[];this.overlayPanel=new tab.OverlayPanel();this.$2_7=new tab.DisposableHolder();tab.MenuView.initializeBase(this,[viewModel,template]);this.menuViewModel=viewModel;this.dom=template;this.menuStack[0]=this.dom;this.menuViewModel.add_menuChanged(ss.Delegate.create(this,this.updateMenu));this.menuViewModel.add_shown(ss.Delegate.create(this,this.shown));this.menuViewModel.add_hidden(ss.Delegate.create(this,this.hidden));this.get_element().addClass(this.menuViewModel.get_theme().menuClass);}
tab.MenuView.getMenuItem=function(menuItemDom){return menuItemDom.data('tabMenuMenuItem');}
tab.MenuView.getMenuItemLevel=function(menuItemDom){return menuItemDom.data('tabMenuMenuItemLevel');}
tab.MenuView.prototype={dom:null,menuViewModel:null,dispose:function(){this.menuViewModel.remove_menuChanged(ss.Delegate.create(this,this.updateMenu));this.menuViewModel.remove_shown(ss.Delegate.create(this,this.shown));this.menuViewModel.remove_hidden(ss.Delegate.create(this,this.hidden));this.$2_7.dispose();var $enum1=ss.IEnumerator.getEnumerator(this.menuStack);while($enum1.moveNext()){var $0=$enum1.current;$0.domRoot.remove();}this.menuStack.clear();this.overlayPanel.get_element().detach();this.overlayPanel.dispose();tab.MenuView.callBaseMethod(this, 'dispose');},onAddedToDom:function(){tab.MenuView.callBaseMethod(this, 'onAddedToDom');if(!this.dom.domRoot.hasClass('tabMenuHasIconTwo')){return;}var $0=this.dom.domRoot.find('.tabMenuItemNameArea').outerWidth();var $1=this.$2_B(this.dom.domRoot,'.tabMenuItemIconTwo');var $2=this.dom.domRoot.find('.tabMenuItemName');var $3=$2.outerWidth(true)-$2.outerWidth(false);$2.css('maxWidth',($0-$3-$1)+'px');$2.css('marginRight','2px');},updateMenu:function(){this.dom.content.children().remove();this.$2_7.dispose();this.$2_7=new tab.DisposableHolder();this.buildMenu(this.dom,this.menuViewModel.get_menu());},hidden:function(){this.dom.domRoot.detach();this.overlayPanel.hide();},shown:function(options){this.dom.domRoot.appendTo($('body'));if(ss.isValue(options.minWidth)){var $1=this.dom.domRoot.outerWidth(true)-this.dom.domRoot.width();this.dom.domRoot.css('min-width',(options.minWidth-$1)+'px');}var $0=989;if(options.relativeDom.length>0){var $2=tab.DomUtil.getComputedZIndex(options.relativeDom[0]);if($2>$0){$0=Math.max(1000,$2+1);}}this.overlayPanel.get_element().css('z-index',($0-1).toString());this.overlayPanel.show();this.overlayPanel.bind(tab.MouseEventUtil.get_clickEvent(),ss.Delegate.create(this,this.overlayPanelClicked));this.dom.domRoot.css('z-index',$0.toString());if(ss.isValue(options.additionalMenuClass)){this.dom.domRoot.addClass(options.additionalMenuClass);}tab.BrowserViewport.getViewport(ss.Delegate.create(this,function($p1_0){
this.positionMenu($p1_0,options,this.dom);this.onAddedToDom();this.dom.domRoot.show();}));},overlayPanelClicked:function(e){e.stopPropagation();e.preventDefault();this.overlayPanel.hide();this.menuViewModel.hide();},activateSubmenu:function(mi,relativeObj){var $0=relativeObj.data('tabMenuMenuItemLevel');if(ss.isValue($0)&&$0<this.menuStack.length){return;}var $1=new tab.MenuTemplate("<div class='tabMenu'><div class='tabMenuContent'/></div>");$1.domRoot.addClass(this.menuViewModel.get_theme().menuClass);this.menuStack.add($1);this.buildMenu($1,mi.get_subMenu());relativeObj.data('tabMenuSubMenu',$1);this.showSubmenu(mi,relativeObj,$1);},getContentMaxWith:function(menu){var $0=menu.content.outerWidth(true);if(menu.domRoot.hasClass(this.menuViewModel.get_theme().noDescClass)&&!menu.domRoot.hasClass('tabMenuHasIconTwo')){return $0;}else{var $1=menu.content.width();var $2=$0-$1;var $3=this.$2_B(menu.domRoot,'.tabMenuItemNameArea');var $4=(menu.domRoot.hasClass('tabMenuHasIconTwo'))?this.$2_B(menu.domRoot,'.tabMenuItemIconTwo'):0;var $5=(menu.domRoot.hasClass(this.menuViewModel.get_theme().noDescClass))?0:this.$2_B(menu.domRoot,'.tabMenuItemDesc');return $3+$4+$5+$2+20;}},positionMenu:function(viewport,options,menu){var $0=5;var $1=tab.PointUtil.fromPosition(options.relativeDom.offset());var $2=this.getContentMaxWith(menu);var $3=menu.domRoot.outerWidth(false)-menu.domRoot.width();var $4=$2+$3;var $5=$(window).width()-(2*$0);var $6=$(window).scrollLeft()+$0;var $7=$6+$5;var $8=menu.domRoot.outerHeight(false);var $9=$8-menu.domRoot.height();var $A=options.relativeDom.outerWidth(false);var $B=options.relativeDom.outerHeight(false);var $C,$D;var $E=viewport.getVisibleRoom($1);var $F=-1;if($E.roomBelow>=($8+$B)){$D=$1.y+$B;}else if($E.roomAbove>$8){$D=$1.y-$8;}else{if($E.roomBelow-$B>=$E.roomAbove){$D=$1.y+$B;$F=$E.roomBelow-$B-$9-$0;}else{$D=$1.y-$E.roomAbove+$0;$F=$E.roomAbove-$9-$0;}}if($4>$5){$4=$5;$2=$4-$3;}if(options.preferLeft){$C=$1.x+$A-$4;}else{$C=$1.x;}$C=Math.max($C,$6);if($C+$4>$7){$C=$7-$4;}var $10={};$10['top']=$D+'px';$10['left']=$C+'px';if($F!==-1){$10['max-height']=$F+'px';}$10['width']=$2+'px';menu.domRoot.css($10);},buildMenu:function(root,m){var $0=null;var $1=false;var $2=false;var $enum1=ss.IEnumerator.getEnumerator(m.get_menuItems());while($enum1.moveNext()){var $3=$enum1.current;if($3.get_isDivider()){root.content.append(new tab.MenuItemDividerTemplate().domRoot.addClass(this.menuViewModel.get_theme().dividerClass));}else{if(ss.isValue($0)&&!$0.get_isDivider()){root.content.append($("<div class='tabMenuItemSpacer'/>"));}if($3.get_isTextInput()){var $4=this.$2_A($3);root.content.append($4.domRoot);}else if(Type.canCast($3,tab.CustomMenuItem)){root.content.append(($3).get_domRoot());}else{var $5=new tab.MenuItemTemplate();$5.domRoot.addClass(this.menuViewModel.get_theme().itemClass);if(ss.isValue($3.get_itemClass())){$5.domRoot.addClass($3.get_itemClass());}$5.name.text($3.get_name());if(!$3.get_enabled()){$5.domRoot.addClass('tabDisabled');}if(ss.isValue($3.get_description())){$5.description.text($3.get_description());$2=true;}switch($3.get_checkState()){case 1:$5.icon.addClass('tabMenuItemCheckIcon');$1=true;break;case 2:$5.icon.addClass('tabMenuItemRadioIcon');$1=true;break;default:if(ss.isValue($3.get_iconClass())){$5.icon.addClass($3.get_iconClass());$1=true;}break;}if(ss.isValue($3.get_iconClassTwo())){$5.iconTwo.addClass($3.get_iconClassTwo());this.dom.domRoot.addClass('tabMenuHasIconTwo');}if(ss.isValue($3.get_subMenu())){$5.subMenuIcon.css('display','block');}this.$2_7.add(tab.ClickHandler.targetAndClick($5.domRoot,this.$2_8($3,$5)));$5.domRoot.data('tabMenuMenuItem',$3);$5.domRoot.data('tabMenuMenuItemLevel',this.menuStack.length);root.content.append($5.domRoot);}}$0=$3;}if(!$1){root.domRoot.addClass(this.menuViewModel.get_theme().noIconClass);}if(!$2){root.domRoot.addClass(this.menuViewModel.get_theme().noDescClass);}},$2_8:function($p0,$p1){if(ss.isValue($p0.get_subMenu())){return ss.Delegate.create(this,function(){
this.activateSubmenu($p0,$p1.domRoot);});}return ss.Delegate.create(this,function(){
this.menuViewModel.clickMenuItem($p0);});},$2_9:function($p0){if($p0.which===13){var $0=$p0.data['callback'];if($.isFunction($0)){($0)($($p0.target).val());}}},$2_A:function($p0){var $0=new tab.MenuItemTextInputTemplate();$0.textInput.bind('keydown',{callback:$p0.get_data()},ss.Delegate.create(this,this.$2_9));this.disposables.add(new tab.CallOnDispose(function(){
$0.textInput.unbind('keydown');}));return $0;},$2_B:function($p0,$p1){var $0=0;$p0.find($p1).each(function($p1_0,$p1_1){
var $1_0=$($p1_1).outerWidth(true);if($1_0>$0){$0=$1_0;}});return $0;}}
tab.MenuTemplate=function(html){tab.MenuTemplate.initializeBase(this,[$(html)]);this.content=this.getElementBySelector('.tabMenuContent');}
tab.MenuTemplate.prototype={content:null}
tab.MenuItemTemplate=function(){tab.MenuItemTemplate.initializeBase(this,[$("\n<div class='tabMenuItem'>\n  <div class='tabMenuItemIcon' />\n  <div class='tabMenuItemNameArea'>\n    <span class='tabMenuItemName'/><span class='tabMenuItemIconTwo'/><div class='tabMenuItemDesc'/>\n  </div>\n  <div class='tabMenuItemSubMenuIcon'/></div>")]);this.icon=this.getElementBySelector('.tabMenuItemIcon');this.iconTwo=this.getElementBySelector('.tabMenuItemIconTwo');this.name=this.getElementBySelector('.tabMenuItemName');this.description=this.getElementBySelector('.tabMenuItemDesc');this.subMenuIcon=this.getElementBySelector('.tabMenuItemSubMenuIcon');}
tab.MenuItemTemplate.prototype={icon:null,iconTwo:null,description:null,name:null,subMenuIcon:null}
tab.MenuItemTextInputTemplate=function(){tab.MenuItemTextInputTemplate.initializeBase(this,[$("\n<div class='tabMenuItemTextInputPanel'>\n  <div class='tabMenuItemTextInputHolder'>\n    <input class='tabMenuItemTextInput' type='text'>\n  </div>\n</div>")]);this.textInput=this.getElementBySelector('.tabMenuItemTextInput');}
tab.MenuItemTextInputTemplate.prototype={textInput:null}
tab.MenuItemDividerTemplate=function(){tab.MenuItemDividerTemplate.initializeBase(this,[$("<div class='tabMenuItemDivider'/>")]);}
tab.MenuViewModel=function(){this.$1_2=new tab.MenuViewTheme();tab.MenuViewModel.initializeBase(this);}
tab.MenuViewModel.createForMenu=function(m,clickHandler,theme){var $0=new tab.MenuViewModel();$0.set_menu(m);if(ss.isValue(clickHandler)){$0.add_menuItemClicked(clickHandler);}$0.disposeOnHide();$0.set_theme((theme||new tab.MenuViewTheme()));tab.ObjectRegistry.newView(tab.MenuView,$0);return $0;}
tab.MenuViewModel.prototype={$1_0:null,$1_1:false,add_shown:function(value){this.$1_3=ss.Delegate.combine(this.$1_3,value);},remove_shown:function(value){this.$1_3=ss.Delegate.remove(this.$1_3,value);},$1_3:null,add_hidden:function(value){this.$1_4=ss.Delegate.combine(this.$1_4,value);},remove_hidden:function(value){this.$1_4=ss.Delegate.remove(this.$1_4,value);},$1_4:null,add_menuChanged:function(value){this.$1_5=ss.Delegate.combine(this.$1_5,value);},remove_menuChanged:function(value){this.$1_5=ss.Delegate.remove(this.$1_5,value);},$1_5:null,add_menuItemClicked:function(value){this.$1_6=ss.Delegate.combine(this.$1_6,value);},remove_menuItemClicked:function(value){this.$1_6=ss.Delegate.remove(this.$1_6,value);},$1_6:null,get_visible:function(){return this.$1_1;},get_menu:function(){return this.$1_0;},set_menu:function(value){if(_.isEqual(this.$1_0,value)){return;}this.$1_0=value;if(ss.isValue(this.$1_5)){this.$1_5();}return value;},get_theme:function(){return this.$1_2;},set_theme:function(value){this.$1_2=value;return value;},show:function(options){if(this.$1_1){return;}this.$1_1=true;if(ss.isValue(this.$1_3)){this.$1_3(options);}},dispose:function(){this.hide();tab.MenuViewModel.callBaseMethod(this, 'dispose');},disposeOnHide:function(){this.add_hidden(ss.Delegate.create(this,function(){
this.dispose();}));},hide:function(){if(!this.$1_1){return;}this.$1_1=false;this.raiseActionEvent(this.$1_4);},clickMenuItem:function(mi){if(!mi.get_enabled()){return;}this.hide();if(ss.isValue(this.$1_6)){this.$1_6(mi);}}}
tab.ShowMenuOptions=function(relativeDom,preferUp,minWidth){this.relativeDom=relativeDom;this.preferUp=preferUp;this.preferLeft=false;this.minWidth=minWidth;this.additionalMenuClass=null;}
tab.ShowMenuOptions.create=function(relativeDom,preferUp,minWidth){return new tab.ShowMenuOptions(relativeDom,preferUp,minWidth);}
tab.ShowMenuOptions.preferDownAndLeft=function(relativeDom,minWidth){var $0=new tab.ShowMenuOptions(relativeDom,false,minWidth);$0.preferLeft=true;return $0;}
tab.ShowMenuOptions.prototype={relativeDom:null,preferUp:false,preferLeft:false,minWidth:null,additionalMenuClass:null}
tab.MenuViewTheme=function(){}
tab.MenuViewTheme.prototype={menuClass:'tabMenuBaseTheme',itemClass:'tabMenuItemBaseTheme',dividerClass:'tabMenuItemDividerBaseTheme',noIconClass:'tabMenuNoIcons',noDescClass:'tabMenuNoDesc'}
tab.Menu=function(items){this.$0=items;}
tab.Menu.prototype={$0:null,get_menuItems:function(){return this.$0;}}
tab.MenuItem=function(){}
tab.MenuItem.newDivider=function(){var $0=new tab.MenuItem();$0.set_isDivider(true);$0.$5=false;return $0;}
tab.MenuItem.newTextInput=function(action){var $0=new tab.MenuItem();$0.set_isTextInput(true);$0.set_data(action);return $0;}
tab.MenuItem.newFromCommands=function(items,c,createItemData){if(ss.isNullOrUndefined(c)){return;}var $enum1=ss.IEnumerator.getEnumerator(c.commandItems);while($enum1.moveNext()){var $0=$enum1.current;var $1=null;switch($0.commandsType){case 'item':$1=tab.MenuItem.newItem(createItemData($0),$0.name);$1.set_description($0.description);break;case 'separator':$1=tab.MenuItem.newDivider();break;case 'subcommands':var $2=[];tab.MenuItem.newFromCommands($2,$0.commands,createItemData);$1=tab.MenuItem.newItem(null,$0.name,0,new tab.Menu($2));break;}if(ss.isValue($1)){$1.set_enabled(!ss.isValue($0.state)||$0.state);if($0.isRadioOn){$1.set_checkState(2);}else if($0.isChecked){$1.set_checkState(1);}items.add($1);}}}
tab.MenuItem.newActionItem=function(name,action){var $0=new tab.MenuItem();$0.set_name(name);if(ss.isValue(action)){$0.set_data(action);$0.set_enabled(true);}return $0;}
tab.MenuItem.newItemWithIcon=function(data,name,iconClass){var $0=new tab.MenuItem();$0.set_data(data);$0.set_name(name);$0.set_iconClass(iconClass);$0.set_iconClassTwo(null);$0.set_enabled(true);return $0;}
tab.MenuItem.newItemWithIconAndDescription=function(data,name,iconClass,description){var $0=new tab.MenuItem();$0.set_data(data);$0.set_name(name);$0.set_iconClass(iconClass);$0.set_enabled(true);$0.set_description(description);return $0;}
tab.MenuItem.newItem=function(data,name,checkState,subMenu){var $0=new tab.MenuItem();$0.set_data(data);$0.set_name(name);if(ss.isValue(checkState)){$0.$2=checkState;}if(ss.isValue(subMenu)){$0.$8=subMenu;}$0.set_enabled(true);return $0;}
tab.MenuItem.prototype={$0:null,$1:null,$2:0,$3:null,$4:null,$5:false,$6:false,$7:false,$8:null,$9:null,$A:null,get_name:function(){return this.$0;},set_name:function(value){this.$0=value;return value;},get_description:function(){return this.$1;},set_description:function(value){this.$1=value;return value;},get_iconClass:function(){return this.$3;},set_iconClass:function(value){this.$3=value;return value;},get_iconClassTwo:function(){return this.$4;},set_iconClassTwo:function(value){this.$4=value;return value;},get_itemClass:function(){return this.$A;},set_itemClass:function(value){this.$A=value;return value;},get_checkState:function(){return this.$2;},set_checkState:function(value){this.$2=value;return value;},get_enabled:function(){return this.$5;},set_enabled:function(value){this.$5=value;return value;},get_isDivider:function(){return this.$6;},set_isDivider:function(value){this.$6=value;return value;},get_isTextInput:function(){return this.$7;},set_isTextInput:function(value){this.$7=value;return value;},get_subMenu:function(){return this.$8;},set_subMenu:function(value){this.$8=value;return value;},get_data:function(){return this.$9;},set_data:function(value){this.$9=value;return value;}}
tab.CustomMenuItem=function(){tab.CustomMenuItem.initializeBase(this);}
tab.CustomMenuItem.newCustomMenuItem=function(domRoot){var $0=new tab.CustomMenuItem();$0.set_domRoot(domRoot);return $0;}
tab.CustomMenuItem.prototype={$B:null,get_domRoot:function(){return this.$B;},set_domRoot:function(value){this.$B=value;return value;}}
tab.AuthorByline=function(repositoryUrl){this.$0=repositoryUrl;this.authorBylineElement=$('<div>').addClass('wcAuthorByline');this.authorBylineText=$('<span>');this.authorBylineElement.append(this.authorBylineText);}
tab.AuthorByline.prototype={authorBylineElement:null,authorBylineText:null,$0:null,get_element:function(){return this.authorBylineElement;},displayAuthorByline:function(domWatermarkParentWidth){var $0=((domWatermarkParentWidth-this.authorBylineElement.width())/2)+'px';this.authorBylineElement.css('left',$0);var $1=this.$1();var $2=String.format('<a target="_blank" href="{0}">{1}</a>',tableau.format.escapeHTML($1),tableau.format.escapeHTML(tab.Strings.AuthorBylineText));this.authorBylineText.html($2);},dispose:function(){if(ss.isValue(this.authorBylineElement)){this.authorBylineElement.remove();}},$1:function(){var $0=window.location;return String.format('{0}//{1}/profile/rdr/repo?workbook={2}',$0.protocol,$0.hostname,this.$0);}}
tab.CategoricalFilter=function(props){this.attributes={};this.format={};tab.CategoricalFilter.initializeBase(this);}
tab.CategoricalFilter.$1_6=function($p0,$p1){if(ss.isNullOrUndefined($p0)){return true;}var $0=$p0.table.tuples;var $1=$p1.table.tuples;if($0.length!==$1.length){return true;}for(var $2=0,$3=$0.length;$2<$3;$2++){if($0[$2].t[0].v!==$1[$2].t[0].v){return true;}}return false;}
tab.CategoricalFilter.prototype={widgetsInTemplate:true,getContextMenuCommands:null,requestSetAttributes:null,session:null,field:'',oFilter:null,presModel:null,backgroundColor:null,applyDelay:1000,isTypeInList:false,domTitleBar:null,domContent:null,domBox:null,searchDiv:null,domainButton:null,menuButton:null,stateId:0,$1_0:null,singleSelectMenuItem:null,multiSelectMenuItem:null,inclusiveMenuItem:null,exclusiveMenuItem:null,getSID:null,mode:null,metricsOnly:false,searchButton:null,domControls:null,titleH:0,titleW:0,width:0,titleHTML:null,modeContents:null,domHorizScroll:null,conditionals:null,showContextMenu:null,$1_1:null,get_asMixin:function(){return this;},get_isTypeInList:function(){return this.isTypeInList;},get_oFilter:function(){return this.oFilter;},get_dijitDeclaredClass:function(){return this.declaredClass;},get_mode:function(){return this.mode;},set_mode:function(value){this.mode=value;return value;},get_session:function(){return this.session;},set_session:function(value){this.session=value;return value;},get_attributes:function(){return this.attributes;},set_attributes:function(value){this.attributes=value;return value;},get_field:function(){return this.field;},get_stateId:function(){return this.stateId;},set_stateId:function(value){this.stateId=value;return value;},get_modeContents:function(){return this.modeContents;},get_domContent:function(){return this.domContent;},set_domContent:function(value){this.domContent=value;return value;},get_dijitDomNode:function(){return this.domNode;},set_dijitDomNode:function(value){this.domNode=value;return value;},get_domain:function(){var $0=null;if(!!this.get_attributes()['values']){$0=this.get_attributes()['values'];}return $0;},get_searchWidget:function(){return this.$1_0;},set_searchWidget:function(value){this.$1_0=value;return value;},get_presModel:function(){return this.presModel;},get_backgroundColor:function(){return this.backgroundColor;},get_$1_2:function(){return this.$1_1;},set_$1_2:function($p0){this.$1_1=$p0;return $p0;},getCheckDropdownCatmodeClass:function(){return tableau.base.widget.catmode.CheckDropdown;},getChecklistCatmodeClass:function(){return tableau.base.widget.catmode.Checklist;},getRadiolistCatmodeClass:function(){return tableau.base.widget.catmode.Radiolist;},getSliderCatmodeClass:function(){return tableau.base.widget.catmode.Slider;},getDropdownCatmodeClass:function(){return tableau.base.widget.catmode.SimpleDropdown;},getPatternCatmodeClass:function(){return tableau.base.widget.catmode.Pattern;},getTypeInListCatmodeClass:function(){return tableau.base.widget.catmode.TypeIn;},makeSmallSearchWidget:function(props,hostDiv){return new tableau.base.widget.SmallSearchWidget(props,hostDiv);},makeSearchWidget:function(props,hostDiv){return new tableau.base.widget.SearchWidget(props,hostDiv);},makeFilteringSearchWidget:function(props){return new tableau.base.widget.FilteringSearchWidget(props);},makePendingChangesManager:function(){return new tab.PendingChangesManager(this.get_modeContents(),this.oFilter.table.actual_size,this.oFilter.exclude);},postCreate:function(){var $0,$1;this.getSID=ss.Delegate.create(this,function(){
return this.get_stateId();});this.$1_5();this.$1_10();if(this.mode!=='pattern'){tableau.util.disableTextSelection(this.get_domContent());}var $2=tab.$create_SearchWidgetQfProperty();$2.qf=this;if(this.mode==='slider'){this.set_searchWidget(this.makeSmallSearchWidget($2,this.searchDiv));}else if(this.$1_9()){this.set_searchWidget(this.makeFilteringSearchWidget($2));}else{this.set_searchWidget(this.makeSearchWidget($2,this.searchDiv));}this.get_searchWidget().startup();if(!this.metricsOnly){$1=(this.mode==='checkdropdown'||this.mode==='dropdown'||this.mode==='pattern'||this.mode==='typeinlist'||this.shouldHideSearchButton());$0=(this.mode==='pattern'||this.mode==='typeinlist'||this.shouldHideDomainButton());this.processControlButtons($1,$0,this.shouldHideContextMenu());}this.initFromState(true,false);},processControlButtons:function(hideSearchButton,hideDomainButton,hideMenuButton){var $0=0;var $1=function($p1_0,$p1_1){
if($p1_1){dojo.addClass($p1_0.domNode,'CFButtonHide');}else{$0+=1;dojo.addClass($p1_0.domNode,'CFButtonR'+$0);}};$1(this.menuButton,hideMenuButton);$1(this.domainButton,hideDomainButton);$1(this.searchButton,hideSearchButton);dojo.addClass(this.domControls,'CF'+$0+'Button');$(this.menuButton.domNode).css('background-color',this.backgroundColor);$(this.domainButton.domNode).css('background-color',this.backgroundColor);$(this.searchButton.domNode).css('background-color',this.backgroundColor);},$1_3:function(){return String.isNullOrEmpty(tableau.format.formatColumnDisplayName(this.get_oFilter(),false));},setTitleSize:function(newH,newW){this.titleH=newH;this.titleW=newW;},shouldDeferChanges:function(){var $0=this.get_attributes()['show-apply']==='true';return $0&&(this.get_mode()==='checklist'||this.get_mode()==='checkdropdown');},shouldHideSearchButton:function(){return this.$1_3()||this.get_attributes()['show-search']==='false';},shouldHideDomainButton:function(){return this.$1_3()||this.get_attributes()['show-domain']==='false';},shouldHideContextMenu:function(){return this.$1_3()||!this.getContextMenuCommands().commandItems.length;},$1_4:function(){return dojo.hasClass(this.domNode,'CFInlineTitle');},resize:function(marginBox){dojo.marginBox(this.domNode,marginBox);this.layout();},destroy:function(preserveDom){if(ss.isValue(this.get_modeContents())&&(typeof(this.get_modeContents().destroy)==='function')){this.get_modeContents().destroy();this.modeContents=null;}if(ss.isValue(this.get_searchWidget())){this.get_searchWidget().destroy();this.set_searchWidget(null);}this.get_domContent().innerHTML='';this.inherited(arguments);},getMetrics:function(){var $0=dojo.marginBox(this.domNode);var $1;if(!this.$1_F()){$1=1;var $2=dojo.contentBox(this.get_domContent());var $3=this.get_domContent().childNodes.length;if(dojo.isFF&&tableau.util.isMac){$1+=4;}return {fixed:{w:0,h:$0.h-$2.h+$1},item:{w:0,h:$2.h/$3}};}else{return {fixed:{w:0,h:$0.h}};}},$1_5:function(){this.mode=this.get_oFilter().mode||'checklist';if(ss.isValue(this.get_oFilter().pattern)){this.mode='pattern';}this.isTypeInList=(this.mode==='typeinlist');},initFromState:function(suppressLayout,suppressSearchUpdate,fromClientSide){var $0;var $1;var $2;var $3;var $4;var $5;var $6=tableau.format.formatColumnDisplayName(this.get_oFilter(),false);var $7=0;var $8='';var $9=this.get_oFilter().showFacets&&this.width>100;var $A;var $B=0;var $C=0;var $D=ss.isValue(this.get_modeContents())&&this.$1_9();if(ss.isValue(this.get_modeContents())&&ss.isValue(this.get_modeContents().get_scrollNode())&&this.get_modeContents().get_scrollNode().scrollTop>0){$B=this.get_modeContents().get_scrollNode().scrollTop;}$3=this.get_oFilter().all;if($3||this.get_oFilter().allNotChecked){dojo.addClass(this.domNode,'CFAll');}else{dojo.removeClass(this.domNode,'CFAll');}if(this.get_oFilter().exclude){dojo.addClass(this.domNode,'CFExclusive');}else{dojo.removeClass(this.domNode,'CFExclusive');}this.updateDomainButton();if(ss.isValue(this.get_modeContents())&&this.get_modeContents().shouldNotReinstantiate()){var $E=tab.CategoricalFilter.$1_6(this.get_$1_2(),this.get_oFilter());var $F=this.get_$1_2().exclude!==this.get_oFilter().exclude;this.set_$1_2(this.get_oFilter());if((ss.isValue(this.get_oFilter().domains)&&this.get_oFilter().domains.contains('relevant')&&$E)||$F){this.updateSearch();}return;}this.set_$1_2(this.get_oFilter());this.$1_5();if(this.get_oFilter().exclude){$6=tab.Strings.QuickFilterTitleBarExclusive($6);}dojo.attr(this.domTitleBar,'title',$6);if(this.$1_3()){dojo.style(this.domTitleBar,'display','none');dojo.marginBox(this.domTitleBar,{h:0});}else{this.domTitleBar.innerHTML=this.titleHTML;}if(this.get_oFilter().catIsHier&&this.mode!=='typeinlist'&&this.mode!=='pattern'){$4=true;for($1=0,$2=this.get_oFilter().table.actual_size;$1<$2;$1++){if(!this.get_oFilter().table.tuples[$1].s){$4=false;break;}}if($4){this.get_oFilter().rangeType='all';this.get_oFilter().all=true;for($1=0;$1<$2;$1++){this.get_oFilter().table.tuples[$1].s=false;}}}if(!$D){this.get_domContent().innerHTML='';}$5='FI_'+this.get_oFilter().name;if(ss.isValue(this.get_session())){$5+=this.get_session().get_viewId();}$0=(this.mode==='pattern')?this.get_oFilter().pattern:this.get_oFilter().table.tuples;if($9&&(this.mode==='slider'||this.mode==='checklist'||this.mode==='checkdropdown'||this.mode==='radiolist'||this.mode==='dropdown')){$A=this.get_oFilter().table.tuples;for($1=0;$1<$A.length;$1++){$7+=parseInt($A[$1].f[0].v,10);}$8=$7.toString();}if($D){if(!fromClientSide&&ss.isValue(this.modeContents.pendingManager)){this.get_modeContents().pendingManager.resetFilterInfo(this.get_oFilter().table.actual_size,this.get_oFilter().exclude);this.get_modeContents().pendingManager.resetPendingChanges();}this.get_modeContents().resetContent($0,$5,$3,this.get_oFilter().role,$8,$9);}else{if(ss.isValue(this.get_modeContents())&&(typeof(this.get_modeContents().destroy)==='function')){this.get_modeContents().destroy();this.modeContents=null;}this.$1_8();this.get_modeContents().instantiate($0,$5,$3,this.get_oFilter().role,$8,$9);}this.get_asMixin().refreshRangeAnchorAndSelection();this.conditionals.init(this.get_oFilter().condition,this.get_oFilter().limit);if(!suppressLayout){this.layout();}if((!suppressSearchUpdate&!this.$1_9())===1){this.updateSearch();}if(ss.isValue(this.get_modeContents())&&ss.isValue(this.get_modeContents().get_scrollNode())){$C=this.get_modeContents().get_scrollNode().scrollHeight-this.get_modeContents().get_scrollNode().clientHeight;this.get_modeContents().get_scrollNode().scrollTop=Math.min($B,$C);}},$1_7:function(){var $0=null;if(this.mode==='checkdropdown'){$0=this.getCheckDropdownCatmodeClass();}else if(this.mode==='checklist'){$0=this.getChecklistCatmodeClass();}else if(this.mode==='radiolist'){$0=this.getRadiolistCatmodeClass();}else if(this.mode==='slider'){$0=this.getSliderCatmodeClass();}else if(this.mode==='dropdown'){$0=this.getDropdownCatmodeClass();}else if(this.mode==='pattern'){$0=this.getPatternCatmodeClass();}else if(this.mode==='typeinlist'){$0=this.getTypeInListCatmodeClass();}if($0==null){return;}this.modeContents=new $0(this,this.get_domContent(),this.get_attributes());},$1_8:function(){this.$1_7();},updateSearch:function(){this.get_searchWidget().updateSearch();},applyChanges:function(){this.get_modeContents().applyChanges();},applyChangesByChangelist:function(changelist){if(this.shouldDeferChanges()){this.get_modeContents().pendingManager.processChanges(changelist);if(ss.isValue(this.get_modeContents().pendingManager.get_allItemCheckState())){if(this.get_modeContents().pendingManager.get_allItemCheckState()){dojo.addClass(this.domNode,'CFAll');}else{dojo.removeClass(this.domNode,'CFAll');}}}else{this.get_modeContents().applyChangesByChangelist(changelist,this.mode);}},applyPendingChangesByChangelist:function(source,args){if(this.get_modeContents().pendingManager.isSelectAll()){this.$1_C(true);}else if(this.get_modeContents().pendingManager.isDeSelectAll()){this.$1_C(false);}else{var $0=this.get_modeContents().pendingManager.get_pendingChangelist();this.get_modeContents().applyChangesByChangelist($0,this.mode);}this.get_modeContents().pendingManager.resetPendingChanges();},cancelPendingChangesByChangelist:function(source,args){this.get_modeContents().pendingManager.resetPendingChanges();this.initFromState(false,true,true);},$1_9:function(){return this.mode==='checklist'||this.mode==='radiolist'||this.mode==='checkdropdown'||this.mode==='dropdown';},filterBySearchResults:function(data){if(data==null){this.initFromState(false,true,true);}else if(this.$1_9()){this.modeContents.updateContent(data);}},updateStateFromSearch:function(changed){var $0=false;var $1=this.get_isTypeInList();if(this.get_isTypeInList()){this.$1_A(changed);}this.initFromState($0,$1);},$1_A:function($p0){var $0;var $1={};var $2;var $3;var $4;var $5;var $6=this.get_oFilter().table.tuples;for($2=0;$2<$6.length;$2++){$3=tab.$create_CatFilterContentItem();$3.node=this.fetchChildNodeByIndex($2);$3.tuple=$6[$2];$1[$6[$2].d||$6[$2].t[0].v]=$3;}for($2=0;$2<$p0.tuples.length;$2++){$5=$p0.tuples[$2];$0=$1[$5.d||$5.t[0].v];if(ss.isValue($0)&&ss.isValue($0.node)){tableau.FilterItem.setChecked($0.node,$5.s,$0.tuple);}else{$4=tableau.util.binarySearch($5,$6,0,null,ss.Delegate.create(this,this.$1_B));if(!$4.found){$6.splice($4.index,0,$5);}}}},$1_B:function($p0,$p1){var $0=tableau.format.formatTupleDisplayName($p0);var $1=tableau.format.formatTupleDisplayName($p1);if($0===$1){return 0;}else if(String.compare($0,$1)<0){return -1;}else{return 1;}},fetchChildNodeByIndex:function(index){return this.get_modeContents().fetchChildNodeByIndex(index);},isSingleSelect:function(){return this.mode!=='checklist'&&this.mode!=='checkdropdown'&&this.mode!=='typeinlist';},updateDomainButton:function(){if(ss.isNullOrUndefined(this.get_oFilter().domains)||this.get_oFilter().domains.length<=1){dojo.style(this.domainButton.domNode,'display','none');return;}dojo.removeClass(this.domainButton.iconNode,'wcIconDomainAll');dojo.removeClass(this.domainButton.iconNode,'wcIconDomainContext');dojo.removeClass(this.domainButton.iconNode,'wcIconDomainRelevant');if(this.get_attributes()['values']===tableau.types.QFDomain.QFD_RELEVANT){this.domainButton.attr('label',tab.Strings.QuickFilterDomainShowMoreValues);dojo.addClass(this.domainButton.iconNode,'wcIconDomainRelevant');}else if(this.get_attributes()['values']===tableau.types.QFDomain.QFD_CONTEXT){this.domainButton.attr('label',tab.Strings.QuickFilterDomainShowFewerValues);dojo.addClass(this.domainButton.iconNode,'wcIconDomainContext');}else{this.domainButton.attr('label',tab.Strings.QuickFilterDomainShowFewerValues);dojo.addClass(this.domainButton.iconNode,'wcIconDomainAll');}},doMenu:function(){this.showContextMenu(this.menuButton.domNode);},toggleDomain:function(){var $0=function($p1_0){
return $p1_0===tableau.types.QFDomain.QFD_CONTEXT;};if(this.get_attributes()['values']===tableau.types.QFDomain.QFD_RELEVANT){this.$1_E({values:tableau.types.QFDomain.QFD_ALL},false);}else if(this.get_attributes()['values']===tableau.types.QFDomain.QFD_CONTEXT){this.$1_E({values:tableau.types.QFDomain.QFD_RELEVANT},false);}else if(dojo.some(this.get_oFilter().domains,$0)){this.$1_E({values:tableau.types.QFDomain.QFD_CONTEXT},false);}else{this.$1_E({values:tableau.types.QFDomain.QFD_RELEVANT},false);}},getTheAllItemNode:function(){return this.get_modeContents().fetchAllItem();},doSelectAll:function(turnOn){if(this.shouldDeferChanges()){this.get_modeContents().pendingManager.processAll(turnOn);if(turnOn){dojo.addClass(this.domNode,'CFAll');}else{dojo.removeClass(this.domNode,'CFAll');}}else{this.$1_C(turnOn);}},$1_C:function($p0){var $0,$1;var $2;var $3;var $4;var $5;var $6=[];if(this.mode==='checklist'||this.mode==='checkdropdown'){if($(this.get_domContent()).find('.tiledContent').length>0){$1=this.get_oFilter().table.actual_size;var $7=(this.get_oFilter().exclude)?!$p0:$p0;for($0=0;$0<$1;++$0){$4=this.fetchChildNodeByIndex($0);if(ss.isValue($4)){tableau.FilterItem.setChecked($4,$7);}}}else{$4=this.getTheAllItemNode();for(;$4!=null;$4=$4.nextSibling){tableau.FilterItem.setChecked($4,$p0);}}}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){$5=new tab.CategoricalFilterData(this.get_oFilter().targetSheets,this.get_field(),this.get_oFilter().exclude,null);if($p0){$5.set_includeAll(true);}tab.FilterClientCommands.updateCategoricalFilter($5);}if($p0){tab.FilterClientCommands.setCategoricalFilterValues(this.get_session().get_sheetName(),this.get_field(),'filter-all',null);}else if(this.mode==='checklist'||this.mode==='checkdropdown'){$3={};$3.schema=this.get_oFilter().table.schema;$3.tuples=new Array(0);if(this.get_oFilter().exclude){if($(this.get_domContent()).find('.tiledContent').length>0){this.$1_D();return;}else{$2=this.get_oFilter().table.tuples;$4=this.getTheAllItemNode();if(tableau.FilterItem.isAllItem($4)){$4=$4.nextSibling;}for($0=0,$1=$2.length;$0<$1&&$4!=null;$0++,$4=$4.nextSibling){($3.tuples).push(tableau.FilterItem.setChecked($4,true,$2[$0]));}}}tab.FilterClientCommands.setCategoricalFilterValues(this.get_session().get_sheetName(),this.get_field(),'filter-replace',$6);}},$1_D:function(){var $0;var $1,$2=0,$3=this.get_oFilter().table.actual_size-1;var $4=new tab.Changelist();var $5=new tab.RawChange();for($1=$2;$1<=$3;$1++){$0=this.get_modeContents().fetchChildNodeByIndex($1);if(ss.isValue($0)){tableau.FilterItem.setChecked($0,true);}}$5.setRange(new tab.IntegerRange($2,$3),true);$4.addChange($5);this.get_modeContents().applyChangesByChangelist($4,this.mode);},toggleSearchUI:function(){this.get_searchWidget().toggleUI();},$1_E:function($p0,$p1){var $dict1=$p0;for(var $key2 in $dict1){var $0={key:$key2,value:$dict1[$key2]};if(tab.MiscUtil.hasOwnProperty($p0,$0.key)){this.get_attributes()[$0.key]=$p0[$0.key];}}if(!tab.BaseSession.autoUpdate){this.initFromState(false,false);}this.requestSetAttributes($p0,$p1);},doscrollHoriz:function(){this.get_domContent().scrollLeft=this.domHorizScroll.scrollLeft;},$1_F:function(){return this.mode==='slider'||this.mode==='dropdown'||this.mode==='checkdropdown'||this.mode==='pattern';},getTitleOffset:function(){if(dojo.hasClass(this.domNode,'CFInlineTitle')){return 0;}else{return dojo.marginBox(this.domTitleBar).h;}},_getSearchWidgetDim:function(){var $0=this.get_searchWidget().get_dijitDomNode();if(dojo.style($0,'display')==='none'||this.$1_9()){var $1=tab.$create_DojoCoords();$1.h=0;$1.l=0;$1.t=0;$1.w=0;return $1;}else{return dojo.marginBox($0);}},layoutVertical:function(notTitleSize){var $0;var $1={h:0};var $2={h:0};this._layoutSearchWidget(notTitleSize);$2=this._getSearchWidgetDim();$0=notTitleSize.h-$1.h-$2.h;this.get_modeContents().layout(tab.$create_Size(notTitleSize.w,$0),false);},_getContentFloatingElement:function(){return (this.get_isTypeInList())?this.get_searchWidget().get_dijitDomNode():this.get_domContent();},_layoutSearchWidget:function(notTitleSize){var $0;var $1;if(this.get_searchWidget().get_isVisible()){$1={h:0};$0=notTitleSize.h-$1['h'];this.get_searchWidget().layout($0);}},_layoutTypeInList:function(notTitleSize){if(this.$1_4()){dojo.marginBox(this.get_searchWidget().get_dijitDomNode(),notTitleSize);}else{dojo.style(this.get_searchWidget().get_dijitDomNode(),{width:'auto',height:'auto'});}this.layoutVertical(notTitleSize);},_layoutCompactFilter:function(notTitleSize){dojo.addClass(this.domNode,'CFHorizontal');this._layoutSearchWidget(notTitleSize);this.get_modeContents().layout(tab.$create_Size(notTitleSize.w,notTitleSize.h),false);},layout:function(){var $0;var $1,$2;var $3;if(ss.isNullOrUndefined(this.domNode.parentNode)){return;}dojo.removeClass(this.domNode,'CFHorizontal');dojo.removeClass(this.domNode,'CFInlineTitle');dojo.style(this.domHorizScroll,'display','none');$1=dojo.marginBox(this.domTitleBar);if(this.titleH>0){$1.h=this.titleH;dojo.marginBox(this.domTitleBar,{h:$1.h});}if(this.titleW>0){$1.w=this.titleW;dojo.marginBox(this.domTitleBar,{w:$1.w});}tableau.util.setupTitleEllipsis($(this.domTitleBar));$2=dojo.contentBox(this.domNode);$3=tab.$create_Size($2.w,$2.h);if(!this.metricsOnly){if(!this.$1_3()){$0=this._getContentFloatingElement();if(this.titleW>0){$3.w=$2.w-$1.w;dojo.style(this.domTitleBar,'float','left');dojo.style($0,'float','left');dojo.addClass(this.domNode,'CFInlineTitle');}else{$3.h=$2.h-$1.h;dojo.style(this.domTitleBar,'float','none');dojo.style($0,'float','none');}}}if(this.$1_F()){this._layoutCompactFilter($3);}else{if(this.get_isTypeInList()){this._layoutTypeInList($3);}else{this.layoutVertical($3);}}},$1_10:function(){tableau.util.localizeDojoLabeledControls([new ss.Tuple(this.searchButton,'QuickFilterSearch'),new ss.Tuple(this.domainButton,'QuickFilterDomainShowFewerValues')]);}}
tab.BaseDropdown=function(parent,div,attrs){tab.BaseDropdown.initializeBase(this,[parent,div,attrs]);this.searchBox=parent.get_searchWidget();this.searchBox.setStyle(1);}
tab.BaseDropdown.prototype={dropdown:null,menuNode:null,dropdownLabelContainer:null,fillListElement:null,searchBox:null,hideMenu:null,currentlySelected:0,multimode:false,$1_3:false,get_scrollNode:function(){var $0=null;if(ss.isValue(this.menuNode)){$0=this.menuNode.children('.CFInnerContainer').get(0);}return $0;},instantiate:function(t,itemName,isAll,fieldRole,facet,shouldShowFacets){this.fillListElement=ss.Delegate.create(this,function($p1_0){
this.createListElement($p1_0,isAll,itemName,facet,shouldShowFacets,t,fieldRole);});var $0=isAll||this.parent.get_oFilter().allChecked;this.dropdown=$('<span>').addClass('tabComboBox').addClass('tab-ctrl-formatted-widget').addClass('tabComboStdTheme').addClass('tabComboBoxNoIcon').addClass('tiledContent').bind('click',ss.Delegate.create(this,this.onDropdownClicked));this.dropdownLabelContainer=$('<div>').addClass('tabComboBoxNameContainer').addClass('tab-ctrl-formatted-fixedsize').appendTo(this.dropdown);$('<span>').addClass('tabComboBoxName').text(this.getLabelText(t,$0,fieldRole)).appendTo(this.dropdownLabelContainer);$('<span>').addClass('tabComboBoxButton').appendTo(this.dropdown);this.div.appendChild(this.dropdown.get(0));if(ss.isValue(this.menuNode)){this.menuNode.children('.tiledContent').remove();this.fillMenu(this.menuNode);}var $1=(this.shouldUseAllItem())?1:0;if(t.length+$1<=5){this.searchBox.hideUI();}else{this.searchBox.showUI();}},updateContent:function(data){if(tab.BrowserSupport.get_isIE()){this.menuNode.css('box-shadow','none');}var $0=(data.length>0)?data.join(''):this.searchBox.get_noMatchHtml();var $1=this.menuNode.children('.tiledContent');if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null;}$1.html($0);if(this.$1_3){var $2=this.dropdown.offset();this.menuNode.css('top',($2.top-this.menuNode.outerHeight())+'px');}if(tab.BrowserSupport.get_isIE()){this.menuNode.css('box-shadow','2px 2px 2px #adadad');}},resetContent:function(tuples,itemName,isAll,fieldRole,facet,shouldShowFacets){this.fillListElement=ss.Delegate.create(this,function($p1_0){
this.createListElement($p1_0,isAll,itemName,facet,shouldShowFacets,tuples,fieldRole);});var $0=isAll||this.parent.get_oFilter().allChecked;this.dropdownLabelContainer.children().text(this.getLabelText(tuples,$0,fieldRole));if(ss.isValue(this.searchBox)&&this.searchBox.isShowingResults()){return;}if(ss.isValue(this.menuNode)){if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null;}this.menuNode.children().remove();tab.BrowserViewport.getViewport(ss.Delegate.create(this,function($p1_0){
this.$1_5($p1_0,this.menuNode);}));}},shouldNotReinstantiate:function(){return false;},layout:function(contentSize,horizontalLayout){this.inherited(arguments);var $0=dojo.marginBox(this.div);var $1=$0.w;if($1>8){$(this.div.firstChild).css({width:($1-8)+'px','margin-left':'3px'});}if(ss.isValue(this.tiledWidget)){this.tiledWidget.updateViewport(contentSize.w,contentSize.h);}},destroy:function(){this.dispose();if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();}this.tiledWidget=null;},fetchAllItem:function(){if(!this.shouldUseAllItem()){return null;}else{return this.menuNode.children('.CFInnerContainer').children('.FIItem').get(0);}},fetchChildNodeByIndex:function(index){if(ss.isValue(this.tiledWidget)){return this.tiledWidget.getElement(index);}else{return null;}},getLabelText:function($p0,$p1,$p2){this.currentlySelected=-1;this.multimode=false;var $0=$p0.length;if(!$0){if(!$p1){}return tab.Strings.QuickFilterAll;}for(var $1=0;$1<$0;$1++){if($p0[$1].s&&!$p1){if(this.currentlySelected>-1){this.multimode=true;break;}this.currentlySelected=$1;}}if($p1&&($0>1)){return tab.Strings.QuickFilterAll;}else if(this.multimode){return tab.Strings.QuickFilterMultipleValues;}else if(this.currentlySelected===-1&&this.hasSummaryText()){return this.getSummaryText();}else{var $2=(this.currentlySelected>-1)?this.currentlySelected:0;return tableau.format.formatTupleDisplayName($p0[$2]||'',true,$p2);}},onDropdownClicked:function($p0){tab.BrowserViewport.getViewport(ss.Delegate.create(this,this.$1_4));},$1_4:function($p0){var $0=this.dropdown.offset();var $1=this.dropdown.outerHeight();var $2=document.body;var $3=$('<div>').css({position:'absolute',top:0,left:0,bottom:0,right:0,'z-index':899}).appendTo($2);this.menuNode=$('<div>').attr('id',this.parent.id+'_menu').addClass('CFOuterContainer').addClass('tabMenuComboDropdownTheme').addClass('tab-ctrl-formatted-widget').css({position:'absolute',top:($0.top+$1-1)+'px',left:$0.left+'px','max-height':(30*this.get_lineHeight())+'px','z-index':900,visibility:'hidden'}).appendTo($2);tab.WidgetStyle.applyFormatting(this.menuNode.get(0),this.parent.get_presModel().textStyle,this.parent.get_backgroundColor(),this.get_lineHeight());this.hideMenu=ss.Delegate.create(this,function(){
this.searchBox.clearSearch();$3.remove();this.menuNode.remove();this.menuNode=null;});$3.bind('click',this.hideMenu);this.searchBox.startupNoAppend();this.$1_5($p0,this.menuNode);dojo.toggleClass(this.menuNode.get(0),'QFDropdownMenuAbove',this.$1_3);},$1_5:function($p0,$p1){this.fillMenu(this.menuNode);this.$1_3=this.$1_7($p0,this.menuNode);if(this.$1_3){$(this.searchBox.domNode).appendTo($p1);}else{$(this.searchBox.domNode).insertBefore($p1.children().first());}this.$1_6($p0,$p1);if(this.searchBox.get_isVisible()){this.searchBox.showUI();}},$1_6:function($p0,$p1){var $0=this.dropdown.offset();var $1=this.dropdown.outerWidth();var $2=document.body;var $3=$p1.find('.tile').eq(0);var $4=$3.css('right');$3.css('right','auto');var $5=$3.width()+20;$3.css('right',$4);$5=Math.max($5,$1);var $6=$($2).width();$5=Math.min($5,$6);$p1.width($5);var $7=$p1.offset();var $8=$7.left+$p1.outerWidth();var $9=$($2).offset();var $A=$9.left+$6;var $B=$8-$A;if($B>0){var $13=$7.left-$B;$13=Math.max($13,0);$p1.css('left',$13+'px');}var $C=30*this.get_lineHeight();var $D=3*this.get_lineHeight();var $E=$p0.getVisibleRoom(tab.PointUtil.fromPosition($0));var $F=((this.$1_3)?$E.roomAbove:$E.roomBelow-2)-20;$F=$F-parseInt($p1.css('border-bottom-width'));$F=Math.min($F,$C);$F=Math.max($F,$D);$p1.css('max-height',$F+'px');if(this.$1_3){if($E.roomAbove>($F-1)){$p1.css('top',($0.top-$p1.outerHeight())+'px');}else{$p1.css('top',($0.top-$E.roomAbove)+'px');}}var $10=(ss.isValue(this.searchBox)&&this.searchBox.get_isVisible())?dojo.marginBox(this.searchBox.domNode).h:0;var $11=0;var $12=$p1.children('.CFInnerContainer');if(this.parent.shouldDeferChanges()&&ss.isValue(this.apply)&&!this.menuNode.hasClass('CFDropdownNoItems')){$11=dojo.marginBox(this.apply.get_element().get(0)).h;this.layoutApplyButton($12);}if(ss.isValue($12)){$12.css('max-height',($p1.get(0).clientHeight-$10-$11)+'px');this.tiledWidget.updateViewport($12.height(),0);}$p1.css('visibility','visible');},$1_7:function($p0,$p1){var $0=this.dropdown.offset();var $1=30*this.get_lineHeight();var $2=$p0.getVisibleRoom(tab.PointUtil.fromPosition($0));var $3=Math.min($p1.outerHeight(),$1)>$2.roomBelow&&$2.roomAbove>$2.roomBelow;return $3;},fillMenu:function(menu){if(this.parent.get_oFilter().all||this.parent.get_oFilter().allNotChecked){menu.addClass('CFAll');}else{menu.removeClass('CFAll');}if(this.parent.get_oFilter().exclude){menu.addClass('CFExclusive');}else{menu.removeClass('CFExclusive');}var $0=$('<div>').addClass('CFInnerContainer').addClass('tab-ctrl-formatted-text');menu.append($0);this.fillListElement($0.get(0));}}
tab.BaseMode=function(parent,div,attrs){this.disposables=new tab.DisposableHolder();tab.BaseMode.initializeBase(this);this.disposables=new tab.DisposableHolder();this.parent=parent;this.div=div;this.attributes={};if(ss.isValue(attrs)){this.attributes=attrs;}}
tab.BaseMode.prototype={isAll:false,div:null,parent:null,attributes:null,pendingManager:null,apply:null,cancel:null,tiledWidget:null,get_lineHeight:function(){return this.parent.get_presModel().lineHeight;},get_scrollNode:function(){return null;},instantiate:function(t,itemName,isAll,fieldRole,facet,shouldShowFacets){alert(tab.Strings.noLoc('Error: Unimplemented functionality'));},shouldNotReinstantiate:function(){return false;},updateContent:function(data){alert(tab.Strings.noLoc('Error: Unimplemented functionality'));},resetContent:function(tuples,itemName,isAll,fieldRole,facet,shouldShowFacets){alert(tab.Strings.noLoc('Error: Unimplemented functionality'));},setUpForPendingChanges:function(){if(this.parent.shouldDeferChanges()){this.pendingManager=this.parent.makePendingChangesManager();this.pendingManager.add_onPendingChanges(ss.Delegate.create(this,this.enableApplyButton));this.pendingManager.add_onNoPendingChanges(ss.Delegate.create(this,this.disableApplyButton));this.$1_0();}},$1_0:function(){this.apply=new tab.Button(false);this.apply.set_label(tab.Strings.QuickFilterApply);this.apply.add_clicked(ss.Delegate.create(this,function(){
this.resetPendingVisuals(false);}));this.apply.add_clicked(ss.Delegate.create(this.parent,this.parent.applyPendingChangesByChangelist));this.cancel=new tab.Button(false);this.cancel.set_label(tab.Strings.QuickFilterCancel);this.cancel.add_clicked(ss.Delegate.create(this,function(){
this.resetPendingVisuals(true);}));this.cancel.add_clicked(ss.Delegate.create(this.parent,this.parent.cancelPendingChangesByChangelist));this.disableApplyButton();},appendApplyButton:function(node){if(this.parent.shouldDeferChanges()){node.addClass('CFApplyButtonContainer');node.append(this.cancel.get_element());node.append(this.apply.get_element());}},layoutApplyButton:function(container){if(ss.isValue(container)){var $0=container.width();var $1=parseInt(this.apply.get_element().css('margin-right'));var $2=Math.floor(($0/2)-$1);this.apply.get_element().css('max-width',$2+'px');this.cancel.get_element().css('max-width',$2+'px');}},enableApplyButton:function(){this.apply.set_disabled(false);this.cancel.set_disabled(false);},disableApplyButton:function(){this.apply.set_disabled(true);this.cancel.set_disabled(true);},resetPendingVisuals:function(resetCheckState){},applyChanges:function(){alert(tab.Strings.noLoc('Error: Unimplemented functionality'));},layout:function(contentSize,horizontalLayout){dojo.marginBox(this.div,contentSize);},fetchChildNodeByIndex:function(index){if(ss.isNullOrUndefined(index)||index<0){return null;}if(tableau.FilterItem.isAllItem(this.div.firstChild)){index+=1;}return this.div.childNodes[index];},fetchAllItem:function(){return this.div.childNodes[0];},shouldUseAllItem:function(){return this.attributes['show-all']!=='false';},countIfAll:function(tuples){var $0=(this.parent.get_mode()==='checklist')?1:0;for(var $1=0;$1<tuples.length;$1++){if(tuples[$1].s){$0+=1;}}return $0===tuples.length;},getSummaryText:function(){return (this.hasSummaryText())?this.parent.get_oFilter().summary:'';},formatTuple:function(tuple){return tableau.format.formatTupleDisplayName(tuple,true,this.parent.get_oFilter().role);},formatFacet:function(tuple){return tableau.format.formatTupleDisplayFacet(tuple,true,this.parent.get_oFilter().role);},onSmallSearchUI:function(searchIsOn,searchDiv){},hasSummaryText:function(){var $0=this.parent.get_mode()==='slider';var $1=this.parent.get_mode()==='dropdown'||this.parent.get_mode()==='checkdropdown';var $2=this.parent.get_oFilter().summary;var $3=$2!==tab.Strings.QuickFilterAll;return ss.isValue($2)&&($0||($1&&$3));},applyChangesByChangelist:function(changelist,filterType){var $0=this.attributes['values']||'';var $1=[];var $2=[];var $3=[];if(filterType==='checklist'||filterType==='checkdropdown'||filterType==='typeinlist'){var $4=changelist.compileForChecklist($0);var $5;for(var $6=0;$6<$4.select.length;$6++){$5=$4.select[$6];$1.add($5);}for(var $7=0;$7<$4.deselect.length;$7++){$5=$4.deselect[$7];$2.add($5);}tab.FilterClientCommands.modifyCategoricalFilterValuesByIndex(this.parent.get_session().get_sheetName(),this.parent.get_field(),$1,$2);}else if(filterType==='radiolist'){var $8=changelist.compileForRadiolist($0);$3.add($8.index);tab.FilterClientCommands.setCategoricalFilterValuesByIndex(this.parent.get_session().get_sheetName(),this.parent.get_field(),'filter-replace',$3);}},dispose:function(){if(ss.isValue(this.apply)){this.apply.remove_clicked(ss.Delegate.create(this,function(){
this.resetPendingVisuals(false);}));this.apply.remove_clicked(ss.Delegate.create(this.parent,this.parent.applyPendingChangesByChangelist));this.apply.dispose();}if(ss.isValue(this.cancel)){this.cancel.remove_clicked(ss.Delegate.create(this,function(){
this.resetPendingVisuals(true);}));this.cancel.remove_clicked(ss.Delegate.create(this.parent,this.parent.cancelPendingChangesByChangelist));this.cancel.dispose();}this.disposables.dispose();}}
tab.CheckDropdown=function(parent,div,attrs){tab.CheckDropdown.initializeBase(this,[parent,div,attrs]);}
tab.CheckDropdown.prototype={instantiate:function(t,itemName,isAll,fieldRole,facet,shouldShowFacets){this.setUpForPendingChanges();this.inherited(arguments);},fillMenu:function(menu){this.inherited(arguments);var $0=$('<div>');this.appendApplyButton($0);if($0.children().length>0){menu.append($0);$0.css('height',this.apply.get_element().outerHeight(true)+'px');}},createListElement:function(div,isAll,itemName,facet,showFacets,t,fieldRole){var $0=tab.Checklist.shouldCheckAll(this.parent.get_oFilter());if(ss.isValue(this.pendingManager)&&ss.isValue(this.pendingManager.get_allItemCheckState())){$0=this.pendingManager.get_allItemCheckState();}tab.Checklist.setupAllItem($(div),t,itemName,isAll,facet,showFacets,this.shouldUseAllItem(),$0);var $1=this.parent.get_domain();var $2=this.parent.get_oFilter().exclude&&isAll;var $3=new tab.TiledWidgetParams(t,this.parent.get_oFilter().table.actual_size,this.parent.get_oFilter().isTiled,div,itemName,$2,showFacets,isAll,this.parent.get_session(),$1,this.parent.get_field(),fieldRole,this.pendingManager,this.get_lineHeight());if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();}this.tiledWidget=tab.TiledWidgetFactory.createChecklist($3);var $4=tab.EventUtil.bindWithDispose($(div),'click',ss.Delegate.create(this.parent.get_asMixin(),this.parent.get_asMixin().onListItemClick));this.disposables.add($4);dojo.toggleClass(div.parentNode,'CFDropdownNoItems',!t.length);if(!t.length){$(div).text(tab.Strings.QuickFilterNoItems);}},resetPendingVisuals:function(resetCheckState){var $0;if(ss.isValue(this.searchBox)&&this.searchBox.isShowingResults()){$0=this.menuNode.children('.tiledContent');}else{$0=this.menuNode.find('.tile');}if(ss.isNullOrUndefined($0)){return;}var $enum1=ss.IEnumerator.getEnumerator($0.children().get());while($enum1.moveNext()){var $1=$enum1.current;if(tableau.FilterItem.isPending($1)){tableau.FilterItem.togglePendingState($1);if(resetCheckState){tableau.FilterItem.setChecked($1,!tableau.FilterItem.isChecked($1));}}}}}
tab.Checklist=function(parent,div,attrs){tab.Checklist.initializeBase(this,[parent,div,attrs]);}
tab.Checklist.setupAllItem=function(catModeDiv,t,itemName,isAll,facet,showFacets,shouldUseAllItem,shouldCheckAll){var $0=tableau.FilterItem.ALL;var $1=tableau.FilterItem.checkboxArray;if(shouldUseAllItem&&t.length>0){var $2=tableau.FilterItem.getCheckboxHTML($1,itemName+'_'+$0,$0,false,isAll,facet,showFacets);catModeDiv.append($($2).addClass('tab-ctrl-formatted-text'));}if(ss.isValue(catModeDiv.get(0))&&shouldUseAllItem&&ss.isValue(shouldCheckAll)){tableau.FilterItem.setChecked(catModeDiv.get(0),shouldCheckAll);}}
tab.Checklist.shouldCheckAll=function(ofilter){var $0=ofilter.allChecked;var $1=ofilter.allNotChecked;var $2=($0&&!ofilter.exclude)||($1&&ofilter.exclude);return $2;}
tab.Checklist.prototype={checkListContainer:null,$1_1:null,get_scrollNode:function(){return this.checkListContainer;},instantiate:function(t,itemName,isAll,fieldRole,facet,shouldShowFacets){this.div.innerHTML='';this.$1_1=this.parent.get_searchWidget();this.$1_1.setStyle(2);var $0=$(this.div);this.$1_1.startupAndAppendTo($0);this.$1_1.hideUI();var $1=$('<div>').addClass('CFInnerContainer').addClass('tab-ctrl-formatted-text');dojo.addClass(this.div,'CFOuterContainer');$0.append($1);this.checkListContainer=$1.get(0);this.setUpForPendingChanges();this.$1_2(this.checkListContainer,t,itemName,isAll,fieldRole,facet,shouldShowFacets);$0.children('.FIItem').focus();var $2=tab.EventUtil.bindWithDispose($(this.div),'click',ss.Delegate.create(this.parent.get_asMixin(),this.parent.get_asMixin().onListItemClick));this.disposables.add($2);this.appendApplyButton($(this.div));},resetContent:function(tuples,itemName,isAll,fieldRole,facet,shouldShowFacets){var $0=$(this.checkListContainer);$0.empty();if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null;}this.$1_2(this.checkListContainer,tuples,itemName,isAll,fieldRole,facet,shouldShowFacets);this.appendApplyButton($(this.div));},updateContent:function(data){var $0=(data.length>0)?data.join(''):this.$1_1.get_noMatchHtml();var $1=$(this.checkListContainer);if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null;}$1.html($0);},shouldNotReinstantiate:function(){return ss.isValue(this.$1_1)&&this.$1_1.isShowingResults();},layout:function(contentSize,horizontalLayout){this.inherited(arguments);if(ss.isValue(this.tiledWidget)){this.tiledWidget.updateViewport(contentSize.w,contentSize.h);}var $0=(ss.isValue(this.$1_1)&&this.$1_1.get_isVisible())?dojo.marginBox(this.$1_1.domNode).h:0;var $1=0;if(this.parent.shouldDeferChanges()){$1=dojo.marginBox(this.apply.get_element().get(0)).h;this.layoutApplyButton($(this.checkListContainer));}if(ss.isValue(this.checkListContainer)){dojo.style(this.checkListContainer,'height',(this.div.clientHeight-$0-$1)+'px');}},destroy:function(){this.dispose();if(ss.isValue(this.$1_1)){this.$1_1.destroy();}if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();}this.tiledWidget=null;},fetchChildNodeByIndex:function(index){if(ss.isValue(this.tiledWidget)){return this.tiledWidget.getElement(index);}else{return null;}},$1_2:function($p0,$p1,$p2,$p3,$p4,$p5,$p6){var $0=tab.Checklist.shouldCheckAll(this.parent.get_oFilter());if(ss.isValue(this.pendingManager)&&ss.isValue(this.pendingManager.get_allItemCheckState())){$0=this.pendingManager.get_allItemCheckState();}tab.Checklist.setupAllItem($($p0),$p1,$p2,$p3,$p5,$p6,this.shouldUseAllItem(),$0);var $1=this.parent.get_domain();var $2=this.parent.get_oFilter().exclude&&$p3;var $3=new tab.TiledWidgetParams($p1,this.parent.get_oFilter().table.actual_size,this.parent.get_oFilter().isTiled,$p0,$p2,$2,$p6,$p3,this.parent.get_session(),$1,this.parent.get_field(),$p4,this.pendingManager,this.get_lineHeight());if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();}this.tiledWidget=tab.TiledWidgetFactory.createChecklist($3);},fetchAllItem:function(){if(ss.isValue(this.checkListContainer)){return this.checkListContainer.firstChild;}else{return null;}},resetPendingVisuals:function(resetCheckState){var $0;if(ss.isValue(this.$1_1)&&this.$1_1.isShowingResults()){$0=$(this.checkListContainer);}else{$0=$(this.checkListContainer).find('.tile');}if(ss.isNullOrUndefined($0)){return;}var $enum1=ss.IEnumerator.getEnumerator($0.children().get());while($enum1.moveNext()){var $1=$enum1.current;if(tableau.FilterItem.isPending($1)){tableau.FilterItem.togglePendingState($1);if(resetCheckState){tableau.FilterItem.setChecked($1,!tableau.FilterItem.isChecked($1));}}}}}
tab.HierarchicalFilter=function(props){this.templateString="<div class='HierarchicalFilter'>"+"<div dojoAttachPoint='domBox' class='HierarchicalFilterBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='FilterTitle' dojoAttachPoint='domTitleBar'></div>"+"<div dojoType='dijit.form.Button' class='HFButton HFSearchButton' showlabel='false'"+"dojoAttachPoint='searchButton' dojoAttachEvent='onClick:toggleSearchUI'"+"iconClass='wcIconSearch'>Search</div>"+"<div dojoType='dijit.form.Button' class='HFButton HFMenuButton' dojoAttachPoint='menuButton'"+"name='type' dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'>"+'</div>'+'</div>'+"<div dojoAttachPoint='searchDiv'></div>"+"<div class='HFLevels tab-ctrl-formatted-coloronly' dojoAttachPoint='domLevelBox'>"+"<table cellspacing='2'><tr dojoAttachPoint='domLevelContainer'></tr></table></div>"+"<div class='HFSelection tab-ctrl-formatted-text' dojoAttachPoint='domContent'></div>"+"<div dojoType='tableau.base.widget.ConditionalsWidget' dojoAttachPoint='conditionals'></div>"+'</div>'+'</div>';this.$1_0=[];this.attributes={};this.format={};tab.HierarchicalFilter.initializeBase(this);}
tab.HierarchicalFilter.prototype={widgetsInTemplate:true,session:null,field:'',oFilter:null,$1_1:500,stateId:0,$1_2:0,$1_3:0,domBox:null,domTitleBar:null,domLevelBox:null,domContent:null,domControls:null,searchDiv:null,searchButton:null,RANGE_START:'minValue',RANGE_END:'maxValue',$1_4:null,$1_5:null,tree:null,_applyTimer:null,searchWidget:null,menuButton:null,conditionals:null,domLevelContainer:null,metricsOnly:false,titleHTML:null,backgroundColor:null,getContextMenuCommands:null,showContextMenu:null,requestSetAttributes:null,get_isTypeInList:function(){return false;},get_oFilter:function(){return this.oFilter;},get_dijitDeclaredClass:function(){return this.declaredClass;},get_mode:function(){return this.$1_5;},set_mode:function(value){alert(tab.Strings.noLoc('Bad interface call to set HierarchicalFilter.Mode'));return value;},get_session:function(){return this.session;},set_session:function(value){this.session=value;return value;},get_attributes:function(){return this.attributes;},set_attributes:function(value){this.attributes=value;return value;},get_field:function(){return this.field;},get_stateId:function(){return this.stateId;},set_stateId:function(value){this.stateId=value;return value;},get_modeContents:function(){alert(tab.Strings.noLoc('Bad interface call on HierarchicalFilter.ModeContents'));return null;},get_domContent:function(){return this.domContent;},set_domContent:function(value){this.domContent=value;return value;},get_dijitDomNode:function(){return this.domNode;},set_dijitDomNode:function(value){this.domNode=value;return value;},applyChangesByChangelist:function(changelist){alert(tab.Strings.noLoc('Bad interface call on HierarchicalFilter.ApplyChangesByChangelist'));},postCreate:function(){var $0=0;this.$1_4=ss.Delegate.create(this,function(){
return this.stateId;});var $1=tab.$create_SearchWidgetQfProperty();$1.qf=this;this.searchWidget=new tableau.base.widget.SearchWidget($1,this.searchDiv);this.searchWidget.startup();this.initFromState(true);this.$1_E();var $2=this.tree;dojo.forEach((this.tree.rootNode.getChildren()),function($p1_0){
if($p1_0.isExpandable){$2._expandNode($p1_0);}});if(!this.metricsOnly){var $3=ss.Delegate.create(this,function($p1_0,$p1_1){
if(!this._hasDomNode($p1_0)){return;}if($p1_1){dojo.addClass($p1_0.domNode,'HFButtonHide');}else{$0+=1;dojo.addClass($p1_0.domNode,'HFButtonR'+$0);}$($p1_0.domNode).css('background-color',this.backgroundColor);});$3(this.menuButton,this.shouldHideContextMenu());$3(this.searchButton,this.shouldHideSearchButton());dojo.addClass(this.domControls,'HF'+$0+'Button');}},$1_6:function(){if(!!dojo.isIE){dojo.style(this.domContent,'zoom','1');var $0=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2,$p1_3){
var $1_0=$p1_0;var $1_1=$p1_1;var $1_2=$p1_2;var $1_3=1000/$p1_3;var $1_4=null;$1_4=ss.Delegate.create(this,function(){
if(ss.isValue(this.domContent)){if($1_0>$1_1){return;}dojo.style(this.domContent,'filter','alpha(opacity='+$1_0+')');dojo.style(this.domContent,'opacity',($1_0/100).toString());$1_0+=$1_2;$1_3+=$1_3;window.setTimeout($1_4,$1_3);}});window.setTimeout($1_4,$1_3);});$0(96,100,1,8);}},shouldHideLevelButtons:function(){return (this.attributes['show-levels']==='false');},shouldHideSearchButton:function(){return this.hideEmptyTitlebar()||(this.attributes['show-search']==='false');},shouldHideContextMenu:function(){return this.hideEmptyTitlebar()||!this.getContextMenuCommands().commandItems.length;},resize:function($p0){dojo.marginBox(this.domNode,$p0);this.layout();},getMetrics:function(){var $0=this.tree.rootNode.getChildren().length;var $1=dojo.contentBox(this.tree.domNode);var $2=dojo.marginBox(this.domNode);return {fixed:{w:0,h:$2.h-$1.h+1},item:{w:0,h:Math.max($1.h/$0,20)}};},isSingleSelect:function(){return (this.$1_5!=='checklist');},initMode:function(){this.$1_5=this.$1_7();},$1_7:function(){var $0='checklist';if(Object.keyExists(this.attributes,'mode')){$0=this.attributes['mode'];}return $0;},createTreeDom:function(){var $0=new tableau.base.widget.hsm.TreeModel(this.session,this.field,this.oFilter.levels.length,this.isSingleSelect());$0.onChildrenChange($0.root,$0.itemsFromTable(this.oFilter.table[0],0));var $1={};$1.model=$0;$1.showRoot=false;this.tree=new tableau.base.widget.hsm.Tree($1);this.tree.add_notifyChangeCalled(ss.Delegate.create(this,this.$1_B));this.connect(this.tree,'_onTreeFocus',ss.Delegate.create(this,this.updateRangeAnchor));this.domContent.appendChild(this.tree.domNode);},hideEmptyTitlebar:function(){return String.isNullOrEmpty(tableau.format.formatColumnDisplayName(this.oFilter));},setTitleSize:function(newH,newW){this.$1_2=newH;this.$1_3=newW;},initFromState:function(suppressRefresh){if(this.$1_7()!==this.$1_5){dojox.data.dom.removeChildren(this.domContent);}if(!this.domContent.hasChildNodes()){this.initMode();this.createTreeDom();}var $0=tableau.format.formatColumnDisplayName(this.oFilter);dojo.attr(this.domTitleBar,'title',$0);if(this.hideEmptyTitlebar()){dojo.style(this.domTitleBar,'display','none');dojo.marginBox(this.domTitleBar,{h:0});}else{this.domTitleBar.innerHTML=this.titleHTML;}if(ss.isValue(this.domLevelContainer)){dojox.data.dom.removeChildren(this.domLevelContainer);}if(this.shouldHideLevelButtons()){if(ss.isValue(this.domLevelBox)){dojo.attr(this.domLevelBox,'display','none');}}else{this.$1_8();}if(!suppressRefresh){this.tree.model.refresh(this.oFilter.table);}if(ss.isValue(this.tree.anchor)){dojo.addClass(this.tree.anchor.labelNode,'anchorSelection');}else{this.tree.anchor=null;}this.conditionals.init(this.oFilter.condition,this.oFilter.limit);this.layout();if(ss.isValue(this.searchWidget)){this.searchWidget.updateSearch();}},$1_8:function(){var $0;if(ss.isNullOrUndefined(this.domLevelBox)){return;}$0=document.createElement('td');$0.appendChild(document.createTextNode('\u00a0'));dojo.addClass($0,'HFLevelSpacer');for(var $1=0;$1<this.oFilter.levels.length;$1++){$0=document.createElement('td');$0.appendChild(document.createTextNode($1.toString()));this.domLevelContainer.appendChild($0);if(this.$1_5!=='radiolist'){if(!this.oFilter.levels[$1]){dojo.addClass($0,'HFLevelAllSelected');}else if(this.oFilter.levels[$1]===1){dojo.addClass($0,'HFLevelNoneSelected');}else{dojo.addClass($0,'HFLevelSomeSelected');}}if(!$1){dojo.addClass($0,'HFLevelFirst');}else{if($1<this.oFilter.levels.length-1){dojo.addClass($0,'HFLevelNonLeaf');}else{dojo.addClass($0,'HFLevelLast');}}this.connect($0,'onclick',ss.Delegate.create(this,this.onLevelClick));}},doMenu:function(){this.showContextMenu(this.menuButton.domNode);},$1_9:function(){var $0=[];var $1=[];var $2=[].concat(this.tree.rootNode.getChildren());var $3='filter-delta';var $4=[];var $5=[];if(!$2.length){return;}do{var $7=$2.shift();var $8=$7.item.tuple;if($7.item.schema.length>$0.length){$0=$7.item.schema;}if($7.isChecked&&!$8.s){$8.s=true;$1.push($8);if(this.isSingleSelect()){$3='filter-replace';break;}}else if(!$7.isChecked&&$8.s){delete $8.s;$1.push($8);}$2=$2.concat($7.getChildren());}while(!!$2.length);var $6=$1;if(!!$6.length){for(var $9=0;$9<$6.length;$9++){var $A=$6[$9].t.length-1;var $B=$6[$9].t[$A].v;if($6[$9].s){$4.push($B);}else{$5.push($B);}}tab.FilterClientCommands.doMemberHierarchialFilter(this.session.get_sheetName(),this.field,$4,$5,$3);}},$1_A:function($p0,$p1){if(ss.isNullOrUndefined($p0)||ss.isNullOrUndefined($p1)){return;}var $0=this.tree.getDepth($p1);var $1=this.tree.findEarlierNode($p1,$p0,$0);var $2=($1===$p1)?$p0:$p1;var $3=$1.item.tuple.t;var $4=$2.item.tuple.t;var $5=$3[$3.length-1].v;var $6=$4[$4.length-1].v;var $7={};var $8={};var $9='filter-delta';if($p0.isChecked){$7[this.RANGE_START]=$5;$7[this.RANGE_END]=$6;}else{$8[this.RANGE_START]=$5;$8[this.RANGE_END]=$6;}tab.FilterClientCommands.doRangeHierarchialFilter(this.session.get_sheetName(),this.field,$7,$8,$9);},updateStateFromSearch:function(changed){var $0={};var $1=changed.tuples;for(var $3=0;$3<$1.length;$3++){$0[$1[$3].d]=(!!$1[$3].s);}var $2=[].concat(this.tree.rootNode.getChildren());while(!!$2.length){var $4=$2.shift();var $5=$4.item.tuple;var $6=$0[$5.d];if(ss.isValue($6)){if($6!==$5.s){if($6){$4.isChecked=true;($4.labelNode.firstChild).checked=true;$5.s=true;}else{$4.isChecked=false;($4.labelNode.firstChild).checked=false;delete $5.s;}}}else if(this.isSingleSelect()&&$5.s){$4.isChecked=false;($4.labelNode.firstChild).checked=false;delete $5.s;}$2=$2.concat($4.getChildren());}},updateRangeAnchor:function($p0){if(this.isSingleSelect()){return;}if(this.tree.anchor===$p0){return;}if(ss.isValue(this.tree.anchor)){dojo.removeClass(this.tree.anchor.labelNode,'anchorSelection');dojo.removeClass(this.tree.anchor.labelNode,'dijitTreeLabelFocused');this.tree.prev_anchor=this.tree.anchor;}this.tree.anchor=$p0;dojo.addClass(this.tree.anchor.labelNode,'anchorSelection');},$1_B:function($p0){if($p0.target.tagName.toLowerCase()==='input'){if(ss.isValue(this._applyTimer)){window.clearTimeout(this._applyTimer);this._applyTimer=null;}this.stateId++;var $0=dijit.getEnclosingWidget($p0.target.parentNode);if(this.tree.anchor!==$0){this.updateRangeAnchor($0);}if(!!$p0.shiftKey&&ss.isValue(this.tree.prev_anchor)&&this.tree.getDepth(this.tree.prev_anchor)===this.tree.getDepth(this.tree.anchor)&&!this.isSingleSelect()){this.updateCheckboxRange(this.tree.anchor,this.tree.prev_anchor);this.$1_A(this.tree.anchor,this.tree.prev_anchor);}else{this._applyTimer=window.setTimeout(ss.Delegate.create(this,this.$1_9),this.$1_1);}}},updateCheckboxRange:function(anchor,prevAnchor){var $0=this.tree.getDepth(prevAnchor);var $1=this.tree.findEarlierNode(prevAnchor,anchor,$0);var $2=($1===prevAnchor)?anchor:prevAnchor;var $3=anchor.isChecked;var $4=$1;this.tree.anchorIsStart=($1!==prevAnchor);while(ss.isValue($4)&&$4.isTreeNode&&$4!==$2){($4.labelNode.firstChild).checked=$3;$4.isChecked=$3;$4=this.$1_C($4,$0);}($2.labelNode.firstChild).checked=$3;$2.isChecked=$3;},$1_C:function($p0,$p1){var $0=$p1;var $1=$p0;var $2=$p0.getNextSibling();if(ss.isValue($2)){return $2;}while(ss.isNullOrUndefined($2)&&$0>=0){$1=$1.getParent();$0-=1;$2=$1.getNextSibling();while(ss.isValue($2)){var $3=this.$1_D($2,$0,$p1);if(ss.isValue($3)){return $3;}$2=$2.getNextSibling();}}if($0>=0){return $2;}return null;},$1_D:function($p0,$p1,$p2){if(ss.isNullOrUndefined($p0)){return null;}if($p1<0){return null;}if($p1>$p2){return null;}if($p1===$p2){return $p0;}if($p0.hasChildren()){var $0=$p0.getChildren();var $1=$0.length;for(var $2=0;$2<$1;$2++){var $3=this.$1_D($0[$2],$p1+1,$p2);if(ss.isValue($3)){return $3;}}}return null;},toggleSearchUI:function(){if(ss.isValue(this.searchWidget)){this.searchWidget.toggleUI();}},onLevelClick:function($p0){var $0=$p0.target;var $1;var $2=[];var $3=[];if($0.tagName.toLowerCase()!=='td'){return;}dojo.stopEvent($p0);if(this.isSingleSelect()){return;}var $4=parseInt(dojox.data.dom.textContent($0),10);if(!this.oFilter.levels[$4]){$1=false;dojo.removeClass($0,'HFLevelAllSelected');dojo.removeClass($0,'HFLevelSomeSelected');dojo.addClass($0,'HFLevelNoneSelected');this.oFilter.levels[$4]=1;}else{$1=true;dojo.removeClass($0,'HFLevelNoneSelected');dojo.removeClass($0,'HFLevelSomeSelected');dojo.addClass($0,'HFLevelAllSelected');this.oFilter.levels[$4]=0;}if($1){$2.push($4);}else{$3.push($4);}if($2.length>0||$3.length>0){tab.FilterClientCommands.doLevelHierarchialFilter(this.session.get_sheetName(),this.field,$2,$3,'filter-delta');}},layout:function(){dojo.removeClass(this.domNode,'HFHorizontal');var $0=dojo.contentBox(this.domNode);var $1=dojo.marginBox(this.domTitleBar);var $2=(ss.isValue(this.domLevelBox))?dojo.marginBox(this.domLevelBox):{w:0,h:0};var $3=dojo.marginBox(this.conditionals.domNode);var $4={h:0};if(this.$1_2>0){$1.h=this.$1_2;dojo.marginBox(this.domTitleBar,{h:$1.h});}if(this.$1_3>0){$1.w=this.$1_3;dojo.marginBox(this.domTitleBar,{w:$1.w});}tableau.util.setupTitleEllipsis($(this.domTitleBar));var $5=$1.h;var $6=$0.w;if(!this.hideEmptyTitlebar()&&this.$1_3>0){dojo.addClass(this.domNode,'HFHorizontal');dojo.style(this.domTitleBar,'float','left');if(ss.isValue(this.domLevelBox)){dojo.style(this.domLevelBox,'float','left');}if(this._hasDomNode(this.menuButton)){dojo.addClass(this.menuButton.domNode,'HFButtonHide');}if(this._hasDomNode(this.searchButton)){dojo.addClass(this.searchButton.domNode,'HFButtonHide');}$6-=$1.w;$5=0;}else{if(!this.shouldHideContextMenu()&&this._hasDomNode(this.menuButton)){dojo.removeClass(this.menuButton.domNode,'HFButtonHide');}if(!this.shouldHideSearchButton()&&this._hasDomNode(this.searchButton)){dojo.removeClass(this.searchButton.domNode,'HFButtonHide');}dojo.style(this.domTitleBar,'float','none');if(ss.isValue(this.domLevelBox)){dojo.style(this.domLevelBox,'float','none');}}if(ss.isValue(this.searchWidget)&&this.searchWidget.get_isVisible()){var $8=$0.h-$5-$2.h-$3.h;this.searchWidget.layout($8);$4=dojo.marginBox(this.searchWidget.get_dijitDomNode());}var $7=$0.h-$5-$2.h-$3.h-$4.h;if(ss.isValue(this.domLevelBox)){dojo.marginBox(this.domLevelBox,{w:$6});}dojo.marginBox(this.domContent,{h:$7,w:$6});this.$1_6();},_hasDomNode:function($p0){return ss.isValue($p0)&&ss.isValue($p0.domNode);},$1_E:function(){tableau.util.localizeDojoLabeledControls([new ss.Tuple(this.searchButton,'QuickFilterSearch')]);}}
tab.Pattern=function(parent,div,attrs){tab.Pattern.initializeBase(this,[parent,div,attrs]);}
tab.Pattern.prototype={widget:null,instantiate:function(pattern,itemName){this.widget=new tableau.base.widget.ui.TypeIn(this.div,ss.Delegate.create(this,this.doChange),'Pattern');this.widget.instantiate(pattern,itemName);},destroy:function(){this.widget.destroy();},layout:function(contentSize,horizontalLayout){this.inherited(arguments);this.widget.layout();},doChange:function(newPattern){this.parent.set_stateId(this.parent.get_stateId()+1);this.parent.get_session().setPatternFilterState(newPattern,this.parent);this.parent.get_oFilter().pattern=newPattern;}}
tab.SimpleDropdown=function(parent,div,attrs){tab.SimpleDropdown.initializeBase(this,[parent,div,attrs]);}
tab.SimpleDropdown.prototype={createListElement:function(div,isAll,itemName,facet,showFacets,t,fieldRole){tab.SimpleListUtil.setupAllItem($(div),t,itemName,facet,showFacets,this.shouldUseAllItem());var $0=this.parent.get_domain();isAll=isAll||this.parent.get_oFilter().allChecked;var $1=this.parent.get_oFilter().exclude&&isAll;var $2=new tab.TiledWidgetParams(t,this.parent.get_oFilter().table.actual_size,this.parent.get_oFilter().isTiled,div,itemName,$1,showFacets,isAll,this.parent.get_session(),$0,this.parent.get_field(),fieldRole,this.pendingManager,this.get_lineHeight());if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();}this.tiledWidget=tab.TiledWidgetFactory.createSimpleList($2);var $3=tab.EventUtil.bindWithDispose($(div),'click',ss.Delegate.create(this,this.$1_8));this.disposables.add($3);dojo.toggleClass(div.parentNode,'CFDropdownNoItems',!t.length);if(!t.length){$(div).text(tab.Strings.QuickFilterNoItems);}},$1_8:function($p0){var $0=tableau.FilterItem.getNodeFromEvent($p0);if(!!!$0){return;}var $1=tableau.FilterItem.getIndex($0);if($1!==this.currentlySelected){if($1===-1){this.parent.doSelectAll(true);this.hideMenu(null);return;}if($1>=this.parent.get_oFilter().table.actual_size||$1<0){return;}if($1!==this.currentlySelected){this.parent.set_stateId(this.parent.get_stateId()+1);var $2=[];$2.push($1);tab.FilterClientCommands.setCategoricalFilterValuesByIndex(this.parent.get_session().get_sheetName(),this.parent.get_field(),'filter-replace',$2);this.hideMenu(null);}}}}
tab.SimpleListUtil=function(){}
tab.SimpleListUtil.setupAllItem=function(listDiv,t,itemName,facet,showFacets,shouldUseAllItem){var $0=tableau.FilterItem.ALL;if(shouldUseAllItem&&t.length>0){var $1=tab.SimpleListContentFormatter.getter(tab.SimpleListContentFormatter.simpleListTemplate,itemName+'_'+$0,$0,facet,showFacets,true);listDiv.append($($1));}}
tab.SliderCatmode=function(parent,div,attrs){tab.SliderCatmode.initializeBase(this,[parent,div,attrs]);}
tab.SliderCatmode.prototype={$1_1:null,$1_2:null,instantiate:function(t,itemName,isAll,fieldRole,facet,shouldShowFacets){this.$1_1=t;isAll=isAll||this.parent.get_oFilter().allChecked;if(this.shouldUseAllItem()){var $0=[];$0.push(tab.$create_TupleStruct(tab.Strings.QuickFilterAll,isAll,[tab.$create_DataValueStruct('i',facet)]));this.$1_1=$.merge($0,t);}else{isAll=false;}this.$1_2=new tableau.base.widget.ui.Slider(this.div,this.attributes,isAll,ss.Delegate.create(this,this.updateViz),ss.Delegate.create(this.parent,this.parent.getTitleOffset),ss.Delegate.create(this,this.getCurrentText),ss.Delegate.create(this,this.onIntermediateChange),ss.Delegate.create(this,this.getCurrentFacet),shouldShowFacets);this.$1_2.instantiateFromTuples(this.$1_1,this.getSummaryText());},destroy:function(){this.$1_2.destroy();},layout:function(contentSize,horizontalLayout){this.inherited(arguments);this.$1_2.layout();},showOrHide:function($p0,$p1){dojo.style($p0,'display',(($p1)?'':'none'));},onSmallSearchUI:function(searchIsOn,searchDiv){var $0=!searchIsOn;var $1=this.$1_2;if($1.styleid===2||$1.styleid===4){this.showOrHide($1.slider.decrementButton,$0);this.showOrHide($1.slider.incrementButton,$0);}if($1.styleid===3){this.showOrHide($1.div,$0);dojo.style(searchDiv,'marginBottom','2px');}else if($1.styleid<3){this.showOrHide($1.readout,$0);}else{this.showOrHide($1.slider.tableauSlider,$0);}},getRealIndex:function(index){if(ss.isUndefined(index)||isNaN(index)){return 0;}var $0=parseInt(index.toString(),10);if($0<0){$0=0;}return $0;},updateViz:function(index){var $0={};$0.schema=this.parent.get_oFilter().table.schema;$0.tuples=[];var $1=this.getRealIndex(index);var $2=new Array(0);if(this.shouldUseAllItem()&&!$1){this.parent.doSelectAll(true);return;}this.$1_1[$1].s=true;$0.tuples.push(this.$1_1[$1]);this.parent.set_stateId(this.parent.get_stateId()+1);var $3=(this.$1_1[$1].d||this.$1_1[$1].t[0].v);$2.push($3);tab.FilterClientCommands.setCategoricalFilterValues(this.parent.get_session().get_sheetName(),this.parent.get_field(),'filter-replace',$2);},onIntermediateChange:function(){if(this.parent.get_searchWidget().get_isVisible()){this.parent.get_searchWidget().toggleUI();}},getCurrentText:function(index){var $0=this.getRealIndex(index);var $1=this.$1_1[$0];return tableau.format.formatTupleDisplayName($1,true,this.parent.get_oFilter().role);},getCurrentFacet:function(index){var $0=this.getRealIndex(index);var $1=this.$1_1[$0];return tableau.format.formatTupleDisplayFacet($1,true,this.parent.get_oFilter().role);}}
tab.TypeInCatmode=function(parent,div,attrs){tab.TypeInCatmode.initializeBase(this,[parent,div,attrs]);}
tab.TypeInCatmode.prototype={isContainer:true,$1_1:null,instantiate:function(t,itemName,isAll,fieldRole,facet,shouldShowFacets){this.$1_1=new tableau.base.widget.TypeInFilterContents({parentFilter:this.parent,tuples:t,itemName:itemName,role:fieldRole});this.div.appendChild(this.$1_1.domNode);this.$1_1.startup();this.$1_2();this.isAll=isAll;},$1_2:function(){var $0=ss.Delegate.create(this,function($p1_0){
var $1_0=(this.parent.get_searchWidget()).domResults;if($1_0===$p1_0.target||tab.DomUtil.isAncestorOf($1_0,$p1_0.target)){return;}if($p1_0.target===this.parent.get_searchWidget().get_domXButton()){this.parent.get_searchWidget().clearSearch();}else{this.parent.get_searchWidget().clearSearch(true,true);}});this.disposables.add(tab.EventUtil.bindWithDispose($(document.body),'mousedown',$0));},destroy:function(){this.dispose();if(ss.isValue(this.$1_1)){this.$1_1.destroyRecursive(false);}this.$1_1=null;},layout:function(contentSize,horizontalLayout){this.inherited(arguments);this.$1_1.layout(contentSize,horizontalLayout);},fetchChildNodeByIndex:function(index){var $0=this.$1_1.domItemsList.childNodes;if(!tab.MiscUtil.isValidIndex(index,$0)){return null;}return $0[index];},applyChanges:function(){var $0=this.$1_3();var $1=this.$1_1.getUIState();var $2=this.$1_4($1,$0);var $3=this.$1_4($0,$1);if($2.length>0||$3.length>0){this.parent.set_stateId(this.parent.get_stateId()+1);tab.FilterClientCommands.modifyCategoricalFilterValues(this.parent.get_session().get_sheetName(),this.parent.get_field(),$2,$3);}},$1_3:function(){var $0=this.parent.get_oFilter().table.tuples;var $1={};var $2=$0.length;for(var $3=0;$3<$2;$3++){var $4=$0[$3];$1[this.$1_1.getFormattedAlias($4)]=$4.s;}return $1;},$1_4:function($p0,$p1){var $0=[];var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0));while($enum1.moveNext()){var $1=$enum1.current;if(tab.MiscUtil.hasOwnProperty($p0,$1)){if($p0[$1]&&!$p1[$1]){$0.push($1);}}}return $0;}}
tab.Radiolist=function(parent,div,attrs){tab.Radiolist.initializeBase(this,[parent,div,attrs]);}
tab.Radiolist.prototype={$1_1:null,$1_2:null,role:null,get_scrollNode:function(){return this.$1_2;},instantiate:function(t,itemName,isAll,fieldRole,facet,shouldShowFacets){this.$1_1=this.parent.get_searchWidget();this.$1_1.setStyle(2);var $0=$(this.div).addClass('CFOuterContainer');this.$1_1.startupAndAppendTo($0);this.$1_1.hideUI();var $1=$('<div>').addClass('CFInnerContainer').addClass('tab-ctrl-formatted-text');$0.append($1);this.$1_2=$1.get(0);this.resetContent(t,itemName,isAll,fieldRole,facet,shouldShowFacets);this.disposables.add(tab.EventUtil.bindWithDispose($(this.div),'click',ss.Delegate.create(this.parent.get_asMixin(),this.parent.get_asMixin().onListItemClick)));},resetContent:function(tuples,itemName,isAll,fieldRole,facet,shouldShowFacets){var $0=tableau.FilterItem.ALL;var $1=tableau.FilterItem.radioArray;var $2=tableau.FilterItem.getRadioHTML;var $3=null;this.role=fieldRole;var $4=$(this.$1_2);$4.empty();if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null;}if(ss.isValue(this.parent.get_attributes()['values'])){$3=this.parent.get_attributes()['values'];}isAll=isAll||this.parent.get_oFilter().allChecked;if(this.shouldUseAllItem()&&tuples.length>0){var $5=$2($1,itemName+'_'+$0,itemName,$0,false,isAll,facet,shouldShowFacets);$4.append($($5).addClass('tab-ctrl-formatted-text'));}else{isAll=false;}this.$1_3(tuples,this.$1_2,itemName,shouldShowFacets,isAll,$3);},updateContent:function(data){var $0=(data.length>0)?data.join(''):this.$1_1.get_noMatchHtml();var $1=$(this.$1_2);if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();this.tiledWidget=null;}$1.html($0);},shouldNotReinstantiate:function(){return ss.isValue(this.$1_1)&&this.$1_1.isShowingResults();},$1_3:function($p0,$p1,$p2,$p3,$p4,$p5){var $0=this.parent.get_oFilter().table.actual_size;var $1=(this.parent.get_oFilter().isTiled)?tsConfig.filterTileSize:$0;dojo.style($p1,'position','relative');var $2=$0*this.get_lineHeight();var $3=(!!$1)?Math.ceil($0/$1):0;var $4=new tab.FilterListUI($p1,$2,$3);var $5=dojo.marginBox($p1);var $6=new tab.ListGridModel($0,this.get_lineHeight(),$1,$5.h);var $7=new tab.FilterContentFetcher(this.parent.get_session(),this.parent.get_field(),$p5);var $8=new tab.RadiolistContentFormatter($p2,$p3,$p4);var $9=$p0.slice(0,$1);this.tiledWidget=new tab.TiledWidget($7,$6,$4,$8,$9,false,this.role);},layout:function(contentSize,horizontalLayout){this.inherited(arguments);if(ss.isValue(this.tiledWidget)){this.tiledWidget.updateViewport(contentSize.w,contentSize.h);}var $0=(ss.isValue(this.$1_1)&&this.$1_1.get_isVisible())?dojo.marginBox(this.$1_1.domNode).h:0;dojo.style(this.$1_2,'height',(this.div.clientHeight-$0)+'px');},destroy:function(){this.dispose();if(ss.isValue(this.$1_1)){this.$1_1.destroy();}if(ss.isValue(this.tiledWidget)){this.tiledWidget.destroy();}this.tiledWidget=null;},fetchChildNodeByIndex:function(index){if(ss.isValue(this.tiledWidget)){return this.tiledWidget.getElement(index);}else{return null;}},fetchAllItem:function(){if(this.shouldUseAllItem()&&ss.isValue(this.$1_2)){return this.$1_2.firstChild;}else{return null;}}}
tab.CommandExecutedEventArgs=function(){tab.CommandExecutedEventArgs.initializeBase(this);}
tab.CommandExecutedEventArgs.prototype={command:null}
tab.ConditionalsWidget=function(){this.templateString="<div class='ConditionalsWidget tab-ctrl-formatted-text'>"+"<div class='Conditional' dojoAttachPoint='domCondition'>"+"<span dojoAttachPoint='domConditionTitle' class='ConditionalTitle'>Condition</span><br/>"+"<span dojoAttachPoint='domConditionText'></span></div>"+"<div class='Conditional' dojoAttachPoint='domLimit'>"+"<span dojoAttachPoint='domLimitTitle' class='ConditionalTitle'>Limit</span><br/>"+"<span dojoAttachPoint='domLimitText'></span></div>"+'</div>';tab.ConditionalsWidget.initializeBase(this);}
tab.ConditionalsWidget.prototype={isContainer:false,domCondition:null,domConditionTitle:null,domConditionText:null,domLimit:null,domLimitTitle:null,domLimitText:null,init:function(condition,limit){if(!tab.MiscUtil.isNullOrEmpty(condition)){this.domConditionText.innerHTML=condition;this.domCondition.title=condition;}else{dojo.style(this.domCondition,'display','none');}if(!tab.MiscUtil.isNullOrEmpty(limit)){this.domLimitText.innerHTML=limit;this.domLimit.title=limit;}else{dojo.style(this.domLimit,'display','none');}if(!tab.MiscUtil.isNullOrEmpty(condition)&&!tab.MiscUtil.isNullOrEmpty(limit)){dojo.style(this.domLimit,'borderTop','solid 1px #FAFAFA');}},postCreate:function(){this.$1_0();},$1_0:function(){this.domConditionTitle.innerHTML=tableau.format.escapeHTML(tab.Strings.QuickFilterConditionalsCondition);this.domLimitTitle.innerHTML=tableau.format.escapeHTML(tab.Strings.QuickFilterConditionalsLimit);}}
tab.ContinuousSlider=function(viewModel){tab.ContinuousSlider.initializeBase(this,[viewModel,new tab.vqlui$E()]);this.viewModel=viewModel;this.get_template().domRoot.addClass(this.viewModel.get_sliderClassName());}
tab.ContinuousSlider.prototype={viewModel:null,applyChanges:function(index){this.viewModel.set_sliderCurrentValue(index);},dispose:function(){tab.ContinuousSlider.callBaseMethod(this, 'dispose');this.viewModel=null;}}
tab.vqlui$E=function(){tab.vqlui$E.initializeBase(this,[$("<div class='tabHorizontalSlider'>\n</div>'")]);}
tab.CurrentPagePanel=function(oProps){this.templateString="<div dojoAttachPoint='containerNode'\u009d baseClass='currentPagePanel'>"+"<div dojoAttachPoint='_titlePane' style='border:0; float:left; width:100%; overflow:hidden;'></div>"+"<div dojoType='dijit.layout.SplitContainer' persist='false' dojoAttachPoint='innerWrapper' orientation='${cpOrientation}' sizerWidth='0' dragRestriction='true' activeSizing='false' style='float:left;'>"+"<div dojoType='dijit.layout.LayoutContainer' sizeShare='24' sizeMin='24' style='display:${display_dropdown};' dojoAttachPoint='buttonsContainer' >"+"<button dojoAttachEvent='onClick:prevPage' dojoType='dijit.form.Button' layoutAlign='left' style='margin:0; margin-right:2px;' iconClass='dijitIcon cpLeftArrowBlack' showLabel='false' dojoAttachPoint='_leftBtn'></button>"+"<select dojoAttachEvent='onChange:onSelection' dojoType='tableau.base.widget.ui.iDropDownSelect' dojoAttachPoint='_dropdown' layoutAlign='client' autoWidth='true' minSize='100' hasDownArrow='true' popupExtraClass='${popupClass}'></select>"+"<button dojoAttachEvent='onClick:nextPage' dojoType='dijit.form.Button' layoutAlign='right' style='clear: left; margin:0; margin-left:2px;' iconClass='dijitIcon cpRightArrowBlack' showLabel='false' dojoAttachPoint='_rightBtn'></button>"+'</div>'+"<div dojoType='dijit.layout.ContentPane' sizeShare='24' sizeMin='24' style='display:${display_slider}; padding:6px 0 0 0; border:0; overflow:hidden;' dojoAttachPoint='sliderPane'>"+"<div dojoAttachEvent='onChange:onSliderChange' dojoType='dijit.form.HorizontalSlider' slideDuration='0'"+"pageIncrement='1' minimum='0' maximum='${maximum}' discreteValues='${discrete_values}' intermediateChanges='false' showButtons='false'"+"dojoAttachPoint='_slider'></div>"+"<div dojoAttachPoint='_horizontalRuleNode'></div>"+'</div>'+'</div>'+"<div dojoType='dijit.layout.ContentPane' dojoAttachPoint='_checkboxPane' style='padding:0; height:16px; width:110px; display:${display_toggle}; border:0; position:relative; float:left;'>"+"<input dojoAttachEvent='onChange:onCheckboxChange' dojoType='dijit.form.CheckBox' dojoAttachPoint='_showHistoryCb'/>"+'</div>'+'</div>';tab.CurrentPagePanel.initializeBase(this);}
tab.CurrentPagePanel.prototype={baseClass:'currentPagePanel',widgetsInTemplate:true,_subscriptions:null,zid:0,sliderPane:null,show_toggle:false,show_dropdown:false,show_slider:false,sheetid:null,session:null,lTitle:null,titleHtml:null,isDashboard:false,pageViewModel:null,innerWrapper:null,cpHeight:0,buttonsContainer:null,_started:false,_slider:null,_showHistoryCb:null,_rightBtn:null,_leftBtn:null,_horizontalRuleNode:null,_dropdown:null,_checkboxPane:null,rid:0,timestamp:0,_horizontalRule:null,oldSize:0,containerNode:null,titleSize:null,zoneTitleHeight:0,zoneTitleWidth:0,_titlePane:null,pages:null,current_page:0,refreshed:false,enable:false,cpOrientation:null,display_dropdown:null,display_slider:null,display_toggle:null,maximum:0,discrete_values:0,show_ruler:null,ruler_count:0,popupClass:null,requestTimeout:null,BUTTONS_HEIGHT:26,ONLY_BUTTONS:24,SLIDER_HEIGHT:16,ONLY_SLIDER:15,TOGGLE_HEIGHT:16,TOGGLE_WIDTH_OFFSET:90,RULE_OFFSET:5,DOM_OFFSET:4,WIDGET_SPACE:8,SCROLL_PAGES:14,startup:function(){this.containerNode=this.domNode;this.titleSize=tab.$create_Size(0,0);this.inherited(arguments);this.innerWrapper.startup();this.buttonsContainer.startup();this.refreshLayout(this.pages,this.current_page);if(this.show_toggle){var $1=document.createElement('label');$1.innerHTML=tableau.format.escapeHTML(tab.Strings.CurrentPagePanelShowHistory);dojo.attr($1,'for',this._showHistoryCb.id);dojo.place($1,this._checkboxPane.domNode);}this.refreshWidget(this.current_page);var $0=this.pageViewModel.get_pageModel();$0.add_newPage(ss.Delegate.create(this,this.onPageChanged));},onPageChanged:function($p0){this.refreshLayout($p0.pageNames,$p0.currentPage,$p0.pageTrailOptions.state);},layout:function(){var $0=0;var $1=0;var $2=0;if(ss.isNullOrUndefined(this.titleSize)||(ss.isValue(this.lTitle)&&!this.titleSize.w)){return;}var $3=dojo.marginBox(this.containerNode);var $4=$3.w-this.DOM_OFFSET;var $5=0;if(this.titleSize.w<$3.w){if($3.h<this.getWidgetOffset()){this.cpOrientation='horizontal';}else{this.cpOrientation='vertical';}$4-=this.titleSize.w;$0=this.titleSize.w;}else{if($3.h-this.titleSize.h<this.getWidgetOffset()){this.cpOrientation='horizontal';}else{this.cpOrientation='vertical';}$1=this.titleSize.h/2;}if(this.cpOrientation==='horizontal'){if(this.show_toggle){$4-=this.TOGGLE_WIDTH_OFFSET;}$5=(this.show_dropdown)?this.BUTTONS_HEIGHT:this.SLIDER_HEIGHT;}else{$5=(this.show_slider)?this.SLIDER_HEIGHT:0;$5+=(this.show_dropdown)?this.BUTTONS_HEIGHT:0;$2=(this.show_toggle)?this.TOGGLE_HEIGHT/2:0;}this.innerWrapper.isHorizontal=this.cpOrientation==='horizontal';dojo.marginBox(this.innerWrapper.domNode,{w:$4,h:$5});this.innerWrapper.resize();var $6=dojo.marginBox(this.sliderPane.domNode);if(this._horizontalRule!=null&&$6.w>0){dojo.marginBox(this._horizontalRule.domNode,{w:$6.w-this.RULE_OFFSET});if(this.pages.length*2>$6.w-this.RULE_OFFSET){dojo.style(this._horizontalRule.domNode,'display','none');}else{dojo.style(this._horizontalRule.domNode,'display','');}}var $7=Math.min((($3.h-$5)/2)-$1-$2,6);var $8=$7+(2*$1);dojo.style(this.innerWrapper.domNode,{top:Math.max($8,0)+'px',position:'absolute',left:($0+(this.DOM_OFFSET/2))+'px'});if(this.cpOrientation==='vertical'){dojo.style(this.buttonsContainer.domNode,{height:this.ONLY_BUTTONS+'px',position:'relative',top:'',left:'',padding:'0 0 2px 0'});this.buttonsContainer.resize();dojo.style(this.sliderPane.domNode,{height:this.SLIDER_HEIGHT+'px',position:'relative',top:'',left:''});dojo.style(this._checkboxPane.domNode,{width:Math.max($3.w-1,0)+'px',top:Math.max($8,0)+$5+$7+'px',position:'absolute',left:$0+'px'});}else{dojo.marginBox(this.sliderPane.domNode,{w:$6.w-this.WIDGET_SPACE});if(this._horizontalRule!=null){dojo.marginBox(this._horizontalRule.domNode,{w:$6.w-this.WIDGET_SPACE-this.RULE_OFFSET});}var $A=dojo.marginBox(this._dropdown.domNode);dojo.marginBox(this._dropdown.domNode,{w:$A.w-this.WIDGET_SPACE});dojo.marginBox(this._rightBtn.domNode,{l:$A.l+$A.w-this.WIDGET_SPACE});dojo.style(this.buttonsContainer.domNode,{height:this.ONLY_BUTTONS+'px',position:'',top:'',left:'',padding:'0 0 2px 0'});this.buttonsContainer.resize();dojo.style(this.sliderPane.domNode,{height:this.SLIDER_HEIGHT+'px',position:'',top:'',left:(($4+this.DOM_OFFSET)/2)+'px'});dojo.style(this._checkboxPane.domNode,{top:Math.max($8,0)+'px',position:'absolute',left:$0+$4+(this.DOM_OFFSET/2)+'px'});}var $9=parseInt(dojo.style(this._dropdown.domNode,'width'))-24;dojo.marginBox(this._dropdown.containerNode,{w:$9});},getWidgetOffset:function(){var $0=(this.show_dropdown)?this.BUTTONS_HEIGHT:0;$0+=(this.show_slider)?this.SLIDER_HEIGHT:0;$0+=(this.show_toggle)?this.TOGGLE_HEIGHT:0;return $0;},postMixInProperties:function(){this.display_dropdown=(this.show_dropdown)?'block':'none';this.display_slider=(this.show_slider)?'block':'none';this.display_toggle=(this.show_toggle)?'block':'none';var $0=this.pages.length;this.maximum=$0-1;this.discrete_values=$0;this.show_ruler=(this.show_slider)?'block':'none';this.ruler_count=$0;this.popupClass=($0>this.SCROLL_PAGES)?'cpPopupEx':'cpPopup';this.cpOrientation=(this.cpHeight<this.getWidgetOffset())?'horizontal':'vertical';},postCreate:function(){this.inherited(arguments);this.timestamp=new Date().getTime();if(!this.show_dropdown){this.innerWrapper.removeChild(this.buttonsContainer);}if(!this.show_slider){this.innerWrapper.removeChild(this.sliderPane);}if(this.show_toggle&&('attr' in this._showHistoryCb)){this._showHistoryCb.attr('checked',this.enable);}},$2_0:function($p0,$p1){this.$2_1();this.requestTimeout=window.setTimeout(ss.Delegate.create(this,function(){
this.$2_2($p0,$p1);}),500);},$2_1:function(){if(ss.isValue(this.requestTimeout)){window.clearTimeout(this.requestTimeout);this.requestTimeout=null;}},$2_2:function($p0,$p1){this.$2_1();if(this.isDashboard){tab.PageServerCommands.syncedChangePage(tsConfig.current_sheet_name,this.zid,$p0);}else{tab.PageServerCommands.changePage($p0,this.sheetid);}},destroy:function(preserveDom){this.pageViewModel.get_pageModel().remove_newPage(ss.Delegate.create(this,this.onPageChanged));dojo.forEach(this._subscriptions,dojo.unsubscribe);this.$2_1();this.inherited(arguments);},setTitle:function(){this._titlePane.innerHTML=this.titleHtml;this.setTitleSize();},setTitleSize:function(){var $0=dojo.marginBox(this._titlePane);if(!this.zoneTitleWidth){$0.w=dojo.marginBox(this.containerNode).w;}else{$0.w=this.zoneTitleWidth;dojo.marginBox(this._titlePane,$0);}this.titleSize=$0;dojo.style(this._titlePane,{height:this.titleSize.h+'px'});this.layout();tableau.util.setupTitleEllipsis($(this._titlePane));},refreshLayout:function(newPages,page,newEnable){var $0=false;this.refreshed=false;this.current_page=page;this.pages=newPages;if(this.show_dropdown){var $1=this.pages.length;$0=false;if($1!==this._dropdown.options.length){$0=true;}else{for(var $2=0;$2<$1;$2++){var $3=this._dropdown.options[$2].label;if(this.pages[$2]!==$3){$0=true;break;}}}if($0){this._dropdown.options=[];var $4=[];for(var $5=0,$6=newPages.length;$5<$6;$5++){$4.add({label:newPages[$5],value:$5.toString(10),selected:$5===this.current_page});}this._dropdown.addOption($4);this._dropdown.popupExtraClass=(newPages.length>this.SCROLL_PAGES)?'cpPopupEx':'cpPopup';this._dropdown.startup();}else{this._dropdown.setValue(this.current_page);}}if(this.show_slider){if(this._horizontalRule!=null){this._horizontalRule.destroy(false);this._horizontalRule=null;}this._slider.maximum=this.pages.length-1;this._slider.discreteValues=this.pages.length;dijit.setWaiState(this._slider.focusNode,'valuemax',this.pages.length);if(this.pages.length<1200){var $7={style:'width:100%; height:3px; margin-left:4px;',count:this.pages.length};this._horizontalRule=new dijit.form.HorizontalRule($7,this._horizontalRuleNode);this._horizontalRule.placeAt(this.sliderPane.domNode,2);this._horizontalRule.startup();}this._slider.startup();}if(this.show_toggle&&arguments.length>2){this._showHistoryCb.attr('value',newEnable);this.enable=newEnable;}this.setTitle();this.layout();this.refreshed=true;this.refreshWidget(this.current_page);},refreshWidget:function(page){if(this.show_dropdown&&this._dropdown!=null){this._dropdown.setValue(this.current_page);this._rightBtn.setAttribute('disabled',this.current_page===(this.pages.length-1));this._rightBtn.attr('iconClass','dijitIcon cpRightArrow'+((this.current_page===(this.pages.length-1))?'Grey':'Black'));this._leftBtn.setAttribute('disabled',!this.current_page);this._leftBtn.attr('iconClass','dijitIcon cpLeftArrow'+((!this.current_page)?'Grey':'Black'));}if(this.show_slider&&this._slider!=null){this._slider.setValue(this.current_page);}},prevPage:function(e){if(!this.current_page){return;}this.$2_0(this.current_page-1,this.current_page);this.refreshWidget(this.current_page-1);},nextPage:function(e){if(this.current_page===(this.pages.length-1)){return;}this.$2_0(this.current_page+1,this.current_page);this.refreshWidget(this.current_page+1);},onCheckboxChange:function(){if(!this.refreshed){return;}this.enable=!this.enable;tab.PageServerCommands.toggleTrails(this.sheetid);},onSelection:function(selectedPage,propagate){var $0=parseInt(selectedPage);if(($0===this.current_page)||!this._started||!this.refreshed){return;}this.$2_2($0,this.current_page);this.refreshWidget($0);},onSliderChange:function($p0){var $0=parseInt($p0);if($0===this.current_page||!this.refreshed){return;}this.$2_0($0,this.current_page);this.refreshWidget($0);}}
tab.CustomViewsPanel=function(viewModel,toolbarButton){tab.CustomViewsPanel.initializeBase(this,[$(tab.CustomViewsPanel.constructHtml())]);this.viewModel=viewModel;this.viewModel.add_panelVisbilityChanged(ss.Delegate.create(this,this.handleVisiblityChanged));this.viewModel.add_modeChanged(ss.Delegate.create(this,this.handleModeChanged));this.viewModel.add_customViewListChanged(ss.Delegate.create(this,this.handleCustomViewListChanged));this.viewModel.add_defaultCustomViewChanged(ss.Delegate.create(this,this.handleDefaultCustomViewChanged));this.viewModel.add_startManageEnabledChanged(ss.Delegate.create(this,this.handleStartManageEnabledChanged));this.viewModel.add_applyManageEnabledChanged(ss.Delegate.create(this,this.handleApplyManageEnabledChanged));this.viewModel.add_manageListItemsChanged(ss.Delegate.create(this,this.handleManageListItemsChanged));this.toolbarButton=toolbarButton;this.overlayPanel=new tab.OverlayPanel();this.panelWidth=this.get_defaultPanelWidth();this.panelHeight=this.get_defaultPanelHeight();this.body=$(document.body);this.panel=this.get_element();this.headerPanel=this.panel.find('.tab-cv-header-panel');this.rememberPanel=this.panel.find('.tab-cv-remember-panel');this.rememberNameHolder=this.rememberPanel.find('.tab-cv-remember-name-holder');this.rememberNameInput=this.rememberPanel.find('.tab-cv-remember-name-input');this.rememberNamePlaceholder=this.rememberPanel.find('.tab-cv-remember-name-placeholder');this.rememberButton=this.rememberPanel.find('.tab-cv-remember-button');this.makeDefaultPanel=this.panel.find('.tab-cv-make-default-panel');this.makeDefaultButton=this.makeDefaultPanel.find('.tab-cv-make-default-button');this.listPanel=this.panel.find('.tab-cv-list-panel');this.listMyCustomViews=this.listPanel.find('.tab-cv-list-my');this.listMyCustomViewsHeader=this.listPanel.find('.tab-cv-list-my-header');this.listOtherCustomViews=this.listPanel.find('.tab-cv-list-other');this.listOtherCustomViewsHeader=this.listPanel.find('.tab-cv-list-other-header');this.startManagePanel=this.panel.find('.tab-cv-start-manage-panel');this.startManageButton=this.startManagePanel.find('.tab-cv-start-manage-button');this.finishManagePanel=this.panel.find('.tab-cv-finish-manage-panel');this.applyManageButton=this.finishManagePanel.find('.tab-cv-apply-manage-button');this.cancelManageButton=this.finishManagePanel.find('.tab-cv-cancel-manage-button');this.resizeHandle=this.panel.find('.tab-cv-resize-handle');this.rememberButton.find('.tab-cv-styled-button-middle').text(tab.Strings.CustomViewsRemember);this.makeDefaultButton.text(tab.Strings.CustomViewsCurrentDefaultIs(tab.Strings.CustomViewsOriginalView));this.listMyCustomViewsHeader.text(tab.Strings.CustomViewsMyCustomViews);this.listOtherCustomViewsHeader.text(tab.Strings.CustomViewsOtherCustomViews);this.startManageButton.find('.tab-cv-start-manage-button-text').text(tab.Strings.CustomViewsStartManage);this.applyManageButton.find('.tab-cv-styled-button-middle').text(tab.Strings.CustomViewsDone);this.cancelManageButton.find('.tab-cv-styled-button-middle').text(tab.Strings.CustomViewsCancel);this.panel.hide();this.panel.appendTo(document.body);this.panel.remove();}
tab.CustomViewsPanel.constructHtml=function(){var $0=new ss.StringBuilder();$0.append('<div class="tab-cv-panel tab-unselectable" unselectable="on">');$0.append('<div class="tab-cv-header-panel" unselectable="on">');$0.append('<span class="tab-cv-header-text" unselectable="on"></span>');$0.append('</div>');$0.append('<div class="tab-cv-remember-panel" unselectable="on">');$0.append('<div class="tab-cv-remember-name-holder" unselectable="on">');$0.append('<input type="text" maxlength="255"');$0.append(' class="tab-cv-remember-name-input tab-selectable" tabindex="1">');$0.append('<div class="tab-cv-remember-name-placeholder">');$0.append(tab.Strings.CustomViewsNameYourCustomView).append('</div>');$0.append('</div>');$0.append('<div class="tab-cv-remember-button tab-cv-styled-button" unselectable="on" tabindex="2">');$0.append('<span class="tab-cv-styled-button-left" unselectable="on"></span>');$0.append('<span class="tab-cv-styled-button-middle" unselectable="on"></span>');$0.append('<span class="tab-cv-styled-button-right" unselectable="on"></span>');$0.append('</div>');$0.append('</div>');$0.append('<div class="tab-cv-make-default-panel" unselectable="on">');$0.append('<div class="tab-cv-make-default-button tab-disabled" unselectable="on" tabindex="3"></div>');$0.append('</div>');$0.append('<div class="tab-cv-list-panel" unselectable="on">');$0.append('<div class="tab-cv-list-panel-scroller" unselectable="on">');$0.append('<div class="tab-cv-list-my-header" unselectable="on"></div>');$0.append('<div class="tab-cv-list-my" unselectable="on"></div>');$0.append('<div class="tab-cv-list-other-header" unselectable="on"></div>');$0.append('<div class="tab-cv-list-other" unselectable="on"></div>');$0.append('</div>');$0.append('</div>');$0.append('<div class="tab-cv-start-manage-panel" unselectable="on">');$0.append('<div class="tab-cv-start-manage-top-border" unselectable="on"></div>');$0.append('<div class="tab-cv-start-manage-button" unselectable="on" tabindex="4">');$0.append('<span class="tab-cv-start-manage-button-icon tab-icon-cv-manage" unselectable="on"></span>');$0.append('<span class="tab-cv-start-manage-button-text" unselectable="on"></span>');$0.append('</div>');$0.append('</div>');$0.append('<div class="tab-cv-finish-manage-panel" unselectable="on">');$0.append('<div class="tab-cv-apply-manage-button tab-cv-styled-button" unselectable="on" tabindex="3">');$0.append('<span class="tab-cv-styled-button-left" unselectable="on"></span>');$0.append('<span class="tab-cv-styled-button-middle" unselectable="on"></span>');$0.append('<span class="tab-cv-styled-button-right" unselectable="on"></span>');$0.append('</div>');$0.append('<div class="tab-cv-cancel-manage-button tab-cv-styled-button" unselectable="on" tabindex="4">');$0.append('<span class="tab-cv-styled-button-left" unselectable="on"></span>');$0.append('<span class="tab-cv-styled-button-middle" unselectable="on"></span>');$0.append('<span class="tab-cv-styled-button-right" unselectable="on"></span>');$0.append('</div>');$0.append('</div>');$0.append('<div class="tab-cv-resize-handle" unselectable="on">');$0.append('<div class="tab-cv-resize-handle-icon" unselectable="on">');$0.append('</div>');$0.append('</div>');$0.append('</div>');return $0.toString();}
tab.CustomViewsPanel.prototype={viewModel:null,toolbarButton:null,overlayPanel:null,panelWidth:0,panelHeight:0,resizing:false,resizeStartPanelWidth:0,resizeStartPanelHeight:0,resizeStartX:0,resizeStartY:0,body:null,panel:null,headerPanel:null,rememberPanel:null,rememberNameHolder:null,rememberNameInput:null,rememberNamePlaceholder:null,rememberButton:null,makeDefaultPanel:null,makeDefaultButton:null,listPanel:null,listMyCustomViews:null,listMyCustomViewsHeader:null,listOtherCustomViews:null,listOtherCustomViewsHeader:null,startManagePanel:null,startManageButton:null,finishManagePanel:null,applyManageButton:null,cancelManageButton:null,resizeHandle:null,dispose:function(){this.overlayPanel.dispose();tab.CustomViewsPanel.callBaseMethod(this, 'dispose');},handleVisiblityChanged:function(sender,e){if(this.viewModel.get_isPanelVisible()){this.show();}else{this.hide();}},handleModeChanged:function(sender,e){if(this.viewModel.get_isPanelVisible()){this.layout();this.updateControls();this.updateCustomViewsList();}},handleCustomViewListChanged:function(sender,e){this.updateMakeDefaultButton();this.updateStartManageButton();this.updateCustomViewsList();},handleDefaultCustomViewChanged:function(sender,e){this.updateMakeDefaultButton();this.updateCustomViewsList();},handleStartManageEnabledChanged:function(sender,e){this.updateStartManageButton();},handleApplyManageEnabledChanged:function(sender,e){this.updateApplyManageButton();},handleManageListItemsChanged:function(sender,e){this.updateManageListItems();},show:function(){this.overlayPanel.show();this.overlayPanel.bind(this.get_clickEventName(),ss.Delegate.create(this,this.overlayPanelClicked));this.panel.appendTo(document.body);this.panel.fadeIn('fast');this.layout();this.place();this.bindControls();this.updateControls();},hide:function(){this.overlayPanel.hide();this.panel.fadeOut('fast',ss.Delegate.create(this,this.remove));},overlayPanelClicked:function(e){this.viewModel.hide();},remove:function(){this.panel.remove();},layout:function(){if(this.viewModel.get_mode()===tab.CustomViewsViewModel.modeSelect){this.layoutSelectMode();}else if(this.viewModel.get_mode()===tab.CustomViewsViewModel.modeManage){this.layoutManageMode();}},layoutSelectMode:function(){var $0=this.get_panelBorder();var $1=this.get_panelBorder();var $2=this.get_panelBorder();if(tsConfig.allow_custom_view_save){this.headerPanel.hide();this.rememberPanel.show();this.startManagePanel.show();var $3=this.rememberPanel.outerHeight();var $4=this.startManagePanel.outerHeight();$1+=$3;$2+=$4;$0+=$3;this.listPanel.removeClass('tab-cv-list-panel-bottom');var $5=this.rememberButton.outerWidth();var $6=3+7+$5+7;this.rememberNameHolder.css('right',$6+'px');}else{this.headerPanel.show();this.rememberPanel.hide();this.startManagePanel.hide();this.headerPanel.find('.tab-cv-header-text').text(tab.Strings.CustomViewsSelectCustomView);var $7=this.headerPanel.outerHeight();$1+=$7;$0+=$7;this.listPanel.addClass('tab-cv-list-panel-bottom');}if(tsConfig.allow_custom_view_default){this.makeDefaultPanel.show();this.makeDefaultPanel.css('top',$0+'px');var $8=this.makeDefaultPanel.outerHeight();$1+=$8;}else{this.makeDefaultPanel.hide();}this.finishManagePanel.hide();this.listPanel.css({top:$1+'px',bottom:$2+'px'});},layoutManageMode:function(){var $0=this.get_panelBorder();var $1=this.get_panelBorder();this.headerPanel.show();this.rememberPanel.hide();this.headerPanel.find('.tab-cv-header-text').text(tab.Strings.CustomViewsManageCustomViews);var $2=this.headerPanel.outerHeight();$0+=$2;this.makeDefaultPanel.hide();this.startManagePanel.hide();this.finishManagePanel.show();var $3=this.finishManagePanel.outerHeight();$1+=$3;var $4=this.cancelManageButton.outerWidth();var $5=7+$4+7;this.applyManageButton.css('right',$5+'px');this.listPanel.css({top:$0+'px',bottom:$1+'px'});},place:function(){var $0=this.toolbarButton.offset();var $1=this.body.width();var $2=this.body.height();var $3=$0.left;if($1-($3+this.panelWidth)<10){this.panelWidth=$1-$3-10;}var $4={left:$3+'px',width:this.panelWidth+'px'};if(this.viewModel.get_isTop()){var $5=$0.top+this.toolbarButton.outerHeight();$4['top']=$5+'px';var $6=$2-($5+this.panelHeight);if($6<10){$6=10;this.panelHeight=$2-($5+$6);}}else{var $7=$2-$0.top;$4['bottom']=$7+'px';var $8=$2-($7+this.panelHeight);if($8<10){$8=10;this.panelHeight=$2-($8+$7);}}$4['height']=this.panelHeight+'px';this.panel.css($4);},bindControls:function(){this.rememberNameInput.unbind('keydown');this.rememberNameInput.keydown(ss.Delegate.create(this,this.rememberNameInputKeydown));this.rememberNameInput.unbind('keyup');this.rememberNameInput.keyup(ss.Delegate.create(this,this.rememberNameInputKeyup));this.rememberNamePlaceholder.unbind('click');this.rememberNamePlaceholder.bind('click',ss.Delegate.create(this,this.rememberNamePlaceholderClicked));this.rememberButton.unbind(this.get_clickEventName());this.rememberButton.bind(this.get_clickEventName(),ss.Delegate.create(this,this.rememberButtonClicked));this.startManageButton.unbind(this.get_clickEventName());this.startManageButton.bind(this.get_clickEventName(),ss.Delegate.create(this,this.startManageButtonClicked));this.applyManageButton.unbind(this.get_clickEventName());this.applyManageButton.bind(this.get_clickEventName(),ss.Delegate.create(this,this.applyManageButtonClicked));this.cancelManageButton.unbind(this.get_clickEventName());this.cancelManageButton.bind(this.get_clickEventName(),ss.Delegate.create(this,this.cancelManageButtonClicked));},updateControls:function(){if(this.viewModel.get_mode()===tab.CustomViewsViewModel.modeSelect){this.updateRememberControls();this.updateMakeDefaultButton();this.updateStartManageButton();}else if(this.viewModel.get_mode()===tab.CustomViewsViewModel.modeManage){this.updateApplyManageButton();}},updateRememberControls:function(){this.rememberNameInput.val((ss.isValue(this.viewModel.get_currentCustomView()))?this.viewModel.get_currentCustomView().name:'');this.updateRememberButton();},updateRememberButton:function(){var $0=this.rememberNameInput.val();if(!$0.length){this.rememberNamePlaceholder.show();}else{this.rememberNamePlaceholder.hide();}if(!$0.trim().length){this.rememberButton.addClass('tab-disabled');}else{this.rememberButton.removeClass('tab-disabled');}},updateMakeDefaultButton:function(){var $0=this.viewModel.get_currentCustomView();var $1;var $2;if(ss.isValue($0)){if(this.viewModel.isDefault($0)){$1=tab.Strings.CustomViewsCurrentDefaultIs($0.name);$2=false;}else{$1=tab.Strings.CustomViewsChangeDefaultTo($0.name);$2=true;}}else{if(ss.isValue(tsConfig.current_custom_view_id)){$1=tab.Strings.CustomViewsCannotChangeDefault;$2=false;}else{if(this.viewModel.isDefault($0)){$1=tab.Strings.CustomViewsCurrentDefaultIs(tab.Strings.CustomViewsOriginalView);$2=false;}else{$1=tab.Strings.CustomViewsChangeDefaultTo(tab.Strings.CustomViewsOriginalView);$2=true;}}}this.makeDefaultButton.unbind(this.get_clickEventName());if($2){this.makeDefaultButton.removeClass('tab-disabled');this.makeDefaultButton.bind(this.get_clickEventName(),ss.Delegate.create(this,this.makeDefaultButtonClicked));}else{this.makeDefaultButton.addClass('tab-disabled');}this.makeDefaultButton.text($1);},updateStartManageButton:function(){if(this.viewModel.get_startManageEnabled()){this.startManageButton.removeClass('tab-disabled');}else{this.startManageButton.addClass('tab-disabled');}},updateApplyManageButton:function(){this.applyManageButton.removeClass('tab-disabled');if(!this.viewModel.get_applyManageEnabled()){this.applyManageButton.addClass('tab-disabled');}},updateCustomViewsList:function(){if(this.viewModel.get_mode()===tab.CustomViewsViewModel.modeSelect){if(this.viewModel.get_myCustomViews().length>0){this.listMyCustomViewsHeader.show();this.listMyCustomViews.show();this.listOtherCustomViewsHeader.show();this.listMyCustomViewsHeader.text(tab.Strings.CustomViewsMyCustomViews);var $3=true;var $4=new ss.StringBuilder();var $enum1=ss.IEnumerator.getEnumerator(this.viewModel.get_myCustomViews());while($enum1.moveNext()){var $6=$enum1.current;if($3){$3=false;}else{this.appendListItemSeparatorHtml($4);}this.appendSelectListItemHtml($4,$6,false);}this.listMyCustomViews.html($4.toString());var $5=this.listMyCustomViews.find('.tab-cv-select-list-item');$5.each(ss.Delegate.create(this,function($p1_0,$p1_1){
this.bindListItem($($p1_1),this.viewModel.get_myCustomViews()[$p1_0]);}));}else{if(tsConfig.allow_custom_view_save){this.listMyCustomViewsHeader.show();this.listMyCustomViews.show();this.listOtherCustomViewsHeader.show();this.listMyCustomViewsHeader.text(tab.Strings.CustomViewsMyCustomViews);var $7=new ss.StringBuilder();$7.append("<div class='tab-cv-text-list-item'>");$7.append(tab.Strings.CustomViewsAddYourOwnCustomView);$7.append('</div>');this.listMyCustomViews.html($7.toString());}else{this.listMyCustomViewsHeader.hide();this.listMyCustomViews.hide();this.listOtherCustomViewsHeader.hide();}}this.listOtherCustomViews.show();var $0=new ss.StringBuilder();this.appendSelectListItemHtml($0,null,false);var $enum2=ss.IEnumerator.getEnumerator(this.viewModel.get_otherCustomViews());while($enum2.moveNext()){var $8=$enum2.current;this.appendListItemSeparatorHtml($0);this.appendSelectListItemHtml($0,$8,true);}this.listOtherCustomViews.html($0.toString());var $1=this.listOtherCustomViews.find('.tab-cv-select-list-item-original');this.bindListItem($1,null);var $2=this.listOtherCustomViews.find('.tab-cv-select-list-item-customized');$2.each(ss.Delegate.create(this,function($p1_0,$p1_1){
this.bindListItem($($p1_1),this.viewModel.get_otherCustomViews()[$p1_0]);}));}else if(this.viewModel.get_mode()===tab.CustomViewsViewModel.modeManage){this.listMyCustomViewsHeader.show();this.listMyCustomViews.show();this.listMyCustomViewsHeader.text(tab.Strings.CustomViewsManageHeader);var $9=true;var $A=new ss.StringBuilder();var $enum3=ss.IEnumerator.getEnumerator(this.viewModel.get_changes());while($enum3.moveNext()){var $C=$enum3.current;if($9){$9=false;}else{this.appendListItemSeparatorHtml($A);}this.appendManageListItemHtml($A,$C);}this.listMyCustomViews.html($A.toString());this.updateManageListItems();var $B=this.listMyCustomViews.find('.tab-cv-manage-list-item');$B.each(ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0={change:this.viewModel.get_changes()[$p1_0]};var $1_1=$($p1_1);if(tsConfig.allow_custom_view_share){var $1_6=$1_1.find('.tab-cv-manage-list-item-advertise-button');$1_6.bind(this.get_clickEventName(),$1_0,ss.Delegate.create(this,this.manageListItemAdvertiseButtonClicked));}var $1_2=$1_1.find('.tab-cv-manage-list-item-name-input');$1_2.val(this.viewModel.get_changes()[$p1_0].get_name());$1_2.keyup($1_0,ss.Delegate.create(this,this.manageListItemNameChanged));var $1_3=$1_1.find('.tab-cv-manage-list-item-delete-button');$1_3.bind(this.get_clickEventName(),$1_0,ss.Delegate.create(this,this.manageListItemDeleteButtonClicked));var $1_4=$1_1.find('.tab-cv-manage-list-item-undo-button');$1_4.text(tab.Strings.CustomViewsUndo);$1_4.bind(this.get_clickEventName(),$1_0,ss.Delegate.create(this,this.manageListItemUndoButtonClicked));var $1_5=$1_1.find('.tab-cv-manage-list-item-name-deleted');$1_5.css('right',($1_4.outerWidth()+7+2)+'px');}));this.listOtherCustomViewsHeader.hide();this.listOtherCustomViews.hide();}},appendListItemSeparatorHtml:function(sb){},appendSelectListItemHtml:function(sb,cv,showOwner){var $0;var $1;var $2;var $3;var $4=this.viewModel.isDefault(cv);if(ss.isValue(cv)){$0='tab-cv-select-list-item-customized';$1=tableau.format.escapeHTML(cv.name);$2=(showOwner)?tableau.format.escapeHTML(cv.owner.friendlyName):null;$3=(cv.isPublic)?'tab-icon-cv-advertise-on':'tab-icon-cv-advertise-off';}else{$0='tab-cv-select-list-item-original';$1=tab.Strings.CustomViewsOriginalView;$2=tableau.format.escapeHTML(tsConfig.workbook_owner_friendly_name);$3='tab-icon-cv-advertise-on';}sb.append('<div unselectable="on" class="').append('tab-cv-select-list-item ').append($0);if(this.viewModel.get_currentCustomView()===cv){sb.append(' ').append('tab-cv-select-list-item-current');}sb.append('" title="').append($1);if($4){sb.append(' (').append(tab.Strings.CustomViewsDefault).append(')');}if(ss.isValue($2)){sb.append(' (').append($2).append(')');}sb.append('">');sb.append('<span unselectable="on" class="tab-cv-select-list-item-advertise-icon ').append($3).append('"></span>');this.appendSelectListItemNameAndAuthorHtml(sb,$1,$2,$4);sb.append('</div>');},appendManageListItemHtml:function(sb,change){var $0=tab.Strings.CustomViewsOriginalName(tableau.format.escapeHTML(change.get_original().name));var $1=(tsConfig.allow_custom_view_share)?'tab-cv-manage-list-item-name-can-advertise':'tab-cv-manage-list-item-name-cannot-advertise';sb.append("<div class='tab-cv-manage-list-item'>");if(tsConfig.allow_custom_view_share){sb.append("<div unselectable='on' class='tab-cv-manage-list-item-advertise-button'>");sb.append("<div unselectable='on' class='tab-cv-manage-list-item-advertise-icon'></div>");sb.append('</div>');}sb.append("<div class='tab-cv-manage-list-item-name-input-holder ").append($1).append("'>");sb.append("<input type='text' maxlength='255' class='tab-cv-manage-list-item-name-input tab-selectable'");sb.append(" title='").append($0).append("'>");sb.append('</div>');sb.append("<div unselectable='on' class='tab-cv-manage-list-item-name-deleted ");sb.append($1);if($.browser.msie){sb.append(' ie');}sb.append("' title='").append($0).append("'></div>");sb.append("<div unselectable='on' class='tab-cv-manage-list-item-delete-button'>");sb.append("<div unselectable='on' class='tab-cv-manage-list-item-delete-icon tab-icon-cv-delete'></div>");sb.append('</div>');sb.append("<div unselectable='on' class='tab-cv-manage-list-item-undo-button'></div>");sb.append('</div>');},updateManageListItems:function(){var $0=this.listMyCustomViews.find('.tab-cv-manage-list-item');$0.each(ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=$($p1_1);var $1_1=this.viewModel.get_changes()[$p1_0];var $1_2=$1_0.find('.tab-cv-manage-list-item-advertise-button');var $1_3=$1_0.find('.tab-cv-manage-list-item-advertise-icon');var $1_4=$1_0.find('.tab-cv-manage-list-item-name-input-holder');var $1_5=$1_0.find('.tab-cv-manage-list-item-name-input');var $1_6=$1_0.find('.tab-cv-manage-list-item-name-deleted');var $1_7=$1_0.find('.tab-cv-manage-list-item-delete-button');var $1_8=$1_0.find('.tab-cv-manage-list-item-undo-button');if($1_1.get_isPublic()){$1_3.removeClass('tab-icon-cv-advertise-off');$1_3.addClass('tab-icon-cv-advertise-on');}else{$1_3.removeClass('tab-icon-cv-advertise-on');$1_3.addClass('tab-icon-cv-advertise-off');}if($1_1.get_markedForDeletion()){$1_2.removeClass('tab-enabled');$1_2.addClass('tab-opacity-50');$1_4.hide();$1_6.show();$1_7.hide();$1_8.show();$1_6.text($1_1.get_name());}else{$1_2.addClass('tab-enabled');$1_2.removeClass('tab-opacity-50');$1_4.show();$1_6.hide();$1_7.show();$1_8.hide();if(!this.viewModel.isChangeValid($1_1)){$1_5.addClass('tab-invalid');}else{$1_5.removeClass('tab-invalid');}if($1_1.get_name()!==$1_1.get_original().name){$1_5.addClass('tab-changed');}else{$1_5.removeClass('tab-changed');}}}));},bindListItem:function(item,cv){item.bind(this.get_clickEventName(),{cv:cv},ss.Delegate.create(this,this.listItemClicked));},listItemClicked:function(e){var $0=e.data['cv'];this.viewModel.select($0);},rememberNameInputKeydown:function(e){if(e.which===13){this.saveCustomView();}},rememberNameInputKeyup:function(e){this.updateRememberButton();},rememberNamePlaceholderClicked:function(e){this.rememberNameInput.focus();},rememberButtonClicked:function(e){this.saveCustomView();},saveCustomView:function(){var $0=this.rememberNameInput.val().trim();if($0.length>0){this.viewModel.save($0);}},makeDefaultButtonClicked:function(e){this.viewModel.makeCurrentDefault();},startManageButtonClicked:function(e){this.viewModel.startManage();},applyManageButtonClicked:function(e){this.viewModel.applyManage();},cancelManageButtonClicked:function(e){this.viewModel.cancelManage();},manageListItemAdvertiseButtonClicked:function(e){var $0=e.data['change'];if(!$0.get_markedForDeletion()){$0.toggleIsPublic();}},manageListItemNameChanged:function(e){var $0=e.data['change'];if(!$0.get_markedForDeletion()){var $1=$(e.currentTarget);var $2=$1.val();$0.changeName($2);}},manageListItemDeleteButtonClicked:function(e){var $0=e.data['change'];if(!$0.get_markedForDeletion()){$0.toggleMarkForDeletion();}},manageListItemUndoButtonClicked:function(e){var $0=e.data['change'];if($0.get_markedForDeletion()){$0.toggleMarkForDeletion();}},startResize:function(e){if(!this.resizing){this.resizing=true;this.resizeStartPanelWidth=this.panelWidth;this.resizeStartPanelHeight=this.panelHeight;this.resizeStartX=e.pageX;this.resizeStartY=e.pageY;this.startDrag();e.preventDefault();}},continueResize:function(e){if(this.resizing){var $0=(e.pageX-this.resizeStartX);var $1=(this.viewModel.get_isTop())?(e.pageY-this.resizeStartY):(this.resizeStartY-e.pageY);this.panelWidth=Math.max(this.resizeStartPanelWidth+$0,200);this.panelHeight=Math.max(this.resizeStartPanelHeight+$1,200);this.place();e.preventDefault();}},endResize:function(e){if(this.resizing){this.resizing=false;this.endDrag();e.preventDefault();}},startDrag:function(){},endDrag:function(){}}
tab.CustomViewsViewModel=function(session,isTop){this.$5=tab.CustomViewsViewModel.modeSelect;this.$6=[];this.$7=[];this.$A=[];this.$C={};this.$10=[];this.$1=session;this.$2=isTop;this.$4=tsConfig.allow_custom_views;if(tsConfig.allow_custom_views){tab.StartupUtils.callAfterBootstrap(ss.Delegate.create(this,function(){
this.$22();}));this.$10.add(dojo.subscribe('modifiedSheetsChanged',ss.Delegate.create(this,function($p1_0){
var $1_0=$p1_0;this.$21($1_0.length>0);})));}}
tab.CustomViewsViewModel.$1B=function($p0,$p1){return String.compare(($p0).name,($p1).name);}
tab.CustomViewsViewModel.prototype={$1:null,$2:false,$3:false,$4:false,$8:null,$9:null,$B:0,$D:false,$E:0,$F:false,$11:false,add_panelVisbilityChanged:function(value){this.$12=ss.Delegate.combine(this.$12,value);},remove_panelVisbilityChanged:function(value){this.$12=ss.Delegate.remove(this.$12,value);},$12:null,add_modeChanged:function(value){this.$13=ss.Delegate.combine(this.$13,value);},remove_modeChanged:function(value){this.$13=ss.Delegate.remove(this.$13,value);},$13:null,add_customViewListChanged:function(value){this.$14=ss.Delegate.combine(this.$14,value);},remove_customViewListChanged:function(value){this.$14=ss.Delegate.remove(this.$14,value);},$14:null,add_defaultCustomViewChanged:function(value){this.$15=ss.Delegate.combine(this.$15,value);},remove_defaultCustomViewChanged:function(value){this.$15=ss.Delegate.remove(this.$15,value);},$15:null,add_customViewDestroyed:function(value){this.$16=ss.Delegate.combine(this.$16,value);},remove_customViewDestroyed:function(value){this.$16=ss.Delegate.remove(this.$16,value);},$16:null,add_startManageEnabledChanged:function(value){this.$17=ss.Delegate.combine(this.$17,value);},remove_startManageEnabledChanged:function(value){this.$17=ss.Delegate.remove(this.$17,value);},$17:null,add_applyManageEnabledChanged:function(value){this.$18=ss.Delegate.combine(this.$18,value);},remove_applyManageEnabledChanged:function(value){this.$18=ss.Delegate.remove(this.$18,value);},$18:null,add_manageListItemsChanged:function(value){this.$19=ss.Delegate.combine(this.$19,value);},remove_manageListItemsChanged:function(value){this.$19=ss.Delegate.remove(this.$19,value);},$19:null,add_dirtyChanged:function(value){this.$1A=ss.Delegate.combine(this.$1A,value);},remove_dirtyChanged:function(value){this.$1A=ss.Delegate.remove(this.$1A,value);},$1A:null,get_isTop:function(){return this.$2;},get_isToolbarButtonVisible:function(){return this.$4;},get_isPanelVisible:function(){return this.$3;},get_mode:function(){return this.$5;},get_myCustomViews:function(){return this.$6;},get_otherCustomViews:function(){return this.$7;},get_currentCustomView:function(){return this.$8;},get_defaultCustomViewId:function(){return this.$9;},get_changes:function(){return this.$A;},get_startManageEnabled:function(){return tsConfig.allow_custom_view_save&&this.$6.length>0&&!this.$E;},get_applyManageEnabled:function(){return this.$B>0&&!this.$D;},get_dirty:function(){return this.$11;},dispose:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$10);while($enum1.moveNext()){var $0=$enum1.current;dojo.unsubscribe($0);}},isDefault:function(cv){if(tsConfig.allow_custom_view_default){if(ss.isValue(cv)){return ss.isValue(this.$9)&&this.$9===cv.id;}else{return ss.isNullOrUndefined(this.$9);}}else{return false;}},show:function(){if(!this.$3){this.$22();this.$3=true;this.$35();}},hide:function(){if(this.$3){this.$3=false;this.$35();}},save:function(name,onSuccess,onError){var $0=null;var $enum1=ss.IEnumerator.getEnumerator(this.$6);while($enum1.moveNext()){var $1=$enum1.current;if($1.name===name){$0=$1;}}if(!ss.isValue($0)){$0=new tab.CustomizedView();$0.name=name;}this.$1.saveCustomizedView($0,ss.Delegate.create(this,function($p1_0){
this.$23($p1_0);if(ss.isValue(onSuccess)){onSuccess($p1_0);}}),ss.Delegate.create(this,function($p1_0){
this.$24($p1_0);if(ss.isValue(onError)){onError($p1_0);}}));},select:function(cv){if(ss.isValue(cv)){this.$1.navigateToCustomizedView(cv);}else{this.$1.navigateToOriginalView();}},destroy:function(cv,onSuccess,onError){this.$E+=1;this.$1C(cv,onSuccess,onError);},update:function(cv,onSuccess,onError){this.$E+=1;this.$1D(cv,onSuccess,onError);},buildUrl:function(cv){return tab.CustomizedViewSession.buildUrl(cv);},makeCurrentDefault:function(onSuccess,onError){this.$1.setDefaultCustomizedView(this.$8,ss.Delegate.create(this,function($p1_0){
this.$25($p1_0);if(ss.isValue(onSuccess)){onSuccess($p1_0);}}),ss.Delegate.create(this,function($p1_0){
this.$26($p1_0);if(ss.isValue(onError)){onError($p1_0);}}));},startManage:function(){if(this.$5===tab.CustomViewsViewModel.modeSelect&&this.get_startManageEnabled()){this.$1F();var $enum1=ss.IEnumerator.getEnumerator(this.$6);while($enum1.moveNext()){var $0=$enum1.current;var $1=new tab.CustomizedViewChange($0,ss.Delegate.create(this,this.$2D),ss.Delegate.create(this,this.$2E),ss.Delegate.create(this,this.$2F));this.$A.add($1);this.$20($1.get_original().name)[$1.get_original().urlId]=$1;this.$20($1.get_name())[$1.get_original().urlId]=$1;}this.$1E(tab.CustomViewsViewModel.modeManage);}},applyManage:function(){if(this.$5===tab.CustomViewsViewModel.modeManage&&this.get_applyManageEnabled()){var $0=[];var $1=[];var $enum1=ss.IEnumerator.getEnumerator(this.$A);while($enum1.moveNext()){var $2=$enum1.current;if($2.get_markedForDeletion()){$0.add($2.get_original());}else if($2.get_isPublic()!==$2.get_original().isPublic||$2.get_name()!==$2.get_original().name){var $3=new tab.CustomizedView();$3.id=$2.get_original().id;$3.isPublic=$2.get_isPublic();$3.name=$2.get_name();$3.owner=$2.get_original().owner;$3.startViewId=$2.get_original().startViewId;$3.urlId=$2.get_original().urlId;$1.add($3);}}this.$1F();this.$E=$0.length+$1.length;var $enum2=ss.IEnumerator.getEnumerator($0);while($enum2.moveNext()){var $4=$enum2.current;this.$1C($4);}var $enum3=ss.IEnumerator.getEnumerator($1);while($enum3.moveNext()){var $5=$enum3.current;this.$1D($5);}this.$1E(tab.CustomViewsViewModel.modeSelect);}},cancelManage:function(){if(this.$5===tab.CustomViewsViewModel.modeManage){this.$1F();this.$1E(tab.CustomViewsViewModel.modeSelect);}},updateCustomizedViews:function(onSuccess,onError){this.$22(onSuccess,onError);},isChangeValid:function(change){return change.get_name().length>0&&Object.getKeyCount(this.$20(change.get_name()))<=1;},$1C:function($p0,$p1,$p2){this.$F=true;this.$1.destroyCustomizedView($p0,ss.Delegate.create(this,function(){
this.$29();if(ss.isValue($p1)){$p1();}}),ss.Delegate.create(this,function($p1_0){
this.$2C($p1_0);if(ss.isValue($p2)){$p2($p1_0);}}));},$1D:function($p0,$p1,$p2){this.$1.updateCustomizedView($p0,ss.Delegate.create(this,function($p1_0){
this.$2B($p1_0);if(ss.isValue($p1)){$p1($p1_0);}}),ss.Delegate.create(this,function($p1_0){
this.$2C($p1_0);if(ss.isValue($p2)){$p2($p1_0);}}));},$1E:function($p0){this.$5=$p0;this.$36();},$1F:function(){this.$A.clear();this.$B=0;Object.clearKeys(this.$C);this.$D=false;},$20:function($p0){var $0=this.$C[$p0];if(ss.isNullOrUndefined($0)){$0={};this.$C[$p0]=$0;}return $0;},$21:function($p0){if(this.$11!==$p0){this.$11=$p0;this.$3D();}},$22:function($p0,$p1){this.$1.getCustomizedViews(ss.Delegate.create(this,function($p1_0,$p1_1){
this.$27($p1_0,$p1_1);if(ss.isValue($p0)){$p0($p1_0,$p1_1);}}),ss.Delegate.create(this,function($p1_0){
this.$28($p1_0);if(ss.isValue($p1)){$p1($p1_0);}}));},$23:function($p0){if(tab.DomUtil.isEmbeddedCrossDomain()||(ss.isValue(this.$8)&&this.$8.id===$p0.id)){this.hide();this.$11=false;if(tab.DomUtil.isEmbeddedCrossDomain()){var $0;if(ss.isValue($p0.owner)&&$p0.owner.id===tsConfig.current_user_id){for($0=0;$0<this.$6.length;$0++){if(this.$6[$0].name===$p0.name){this.$6[$0]=$p0;break;}}if($0>=this.$6.length){this.$6.add($p0);this.$6.sort(tab.CustomViewsViewModel.$1B);}}else{for($0=0;$0<this.$7.length;$0++){if(this.$7[$0].name===$p0.name){this.$7[$0]=$p0;break;}}if($0>=this.$7.length){this.$7.add($p0);this.$7.sort(tab.CustomViewsViewModel.$1B);}}}this.$8=$p0;this.$3D();}else{this.$1.navigateToCustomizedView($p0);}},$24:function($p0){},$25:function($p0){this.$9=((ss.isValue($p0))?$p0.id:null);this.$38();},$26:function($p0){},$27:function($p0,$p1){this.$6.clear();this.$7.clear();this.$8=null;var $enum1=ss.IEnumerator.getEnumerator($p0);while($enum1.moveNext()){var $0=$enum1.current;if(ss.isValue($0.owner)&&$0.owner.id===tsConfig.current_user_id){this.$6.add($0);}else{this.$7.add($0);}if(ss.isValue(tsConfig.current_custom_view_id)&&tsConfig.current_custom_view_id===$0.id){this.$8=$0;}}this.$6.sort(tab.CustomViewsViewModel.$1B);this.$7.sort(tab.CustomViewsViewModel.$1B);this.$9=$p1;this.$37();},$28:function($p0){},$29:function(){this.$34();},$2A:function($p0){this.$34();},$2B:function($p0){this.$34();},$2C:function($p0){this.$34();},$2D:function($p0){if($p0.get_isPublic()!==$p0.get_original().isPublic){this.$32();}else{this.$33();}this.$3C();},$2E:function($p0,$p1){var $0=this.$20($p1);var $1=this.$20($p0.get_name());var $2=this.$20($p0.get_original().name);if($0!==$2){delete $0[$p0.get_original().urlId];}$1[$p0.get_original().urlId]=$p0;if($p1===$p0.get_original().name){this.$32();}else if($p0.get_name()===$p0.get_original().name){this.$33();}this.$31();this.$3C();},$2F:function($p0){var $0=this.$20($p0.get_name());var $1=this.$20($p0.get_original().name);if($p0.get_markedForDeletion()){if($0!==$1){delete $0[$p0.get_original().urlId];}this.$32();}else{$0[$p0.get_original().urlId]=$p0;this.$33();}this.$31();this.$3C();},$30:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$A);while($enum1.moveNext()){var $0=$enum1.current;if(!this.isChangeValid($0)){return true;}}return false;},$31:function(){var $0=this.$30();if(this.$D!==$0){this.$D=$0;this.$3B();}},$32:function(){this.$B+=1;if(this.$B===1){this.$3B();}},$33:function(){this.$B-=1;if(!this.$B){this.$3B();}},$34:function(){this.$E-=1;if(!this.$E){this.$3A();this.$22();}},$35:function(){if(ss.isValue(this.$12)){this.$12(this,ss.EventArgs.Empty);}},$36:function(){if(ss.isValue(this.$13)){this.$13(this,ss.EventArgs.Empty);}},$37:function(){if(ss.isValue(this.$14)){this.$14(this,ss.EventArgs.Empty);}if(this.$F){this.$39();this.$F=false;}},$38:function(){if(ss.isValue(this.$15)){this.$15(this,ss.EventArgs.Empty);}},$39:function(){if(ss.isValue(this.$16)){this.$16(this,ss.EventArgs.Empty);}},$3A:function(){if(ss.isValue(this.$17)){this.$17(this,ss.EventArgs.Empty);}},$3B:function(){if(ss.isValue(this.$18)){this.$18(this,ss.EventArgs.Empty);}},$3C:function(){if(ss.isValue(this.$19)){this.$19(this,ss.EventArgs.Empty);}},$3D:function(){if(ss.isValue(this.$1A)){this.$1A(this,ss.EventArgs.Empty);}}}
tab.CustomizedViewChange=function(cv,isPublicAction,nameAction,markedForDeletionAction){this.$0=cv;this.$1=isPublicAction;this.$2=nameAction;this.$3=markedForDeletionAction;this.$4=cv.isPublic;this.$5=cv.name;this.$6=false;}
tab.CustomizedViewChange.prototype={$0:null,$1:null,$2:null,$3:null,$4:false,$5:null,$6:false,get_original:function(){return this.$0;},get_isPublic:function(){return this.$4;},get_name:function(){return this.$5;},get_markedForDeletion:function(){return this.$6;},toggleIsPublic:function(){this.$4=!this.$4;this.$1(this);},changeName:function(newName){if(newName!==this.$5){var $0=this.$5;this.$5=newName;this.$2(this,$0);}},toggleMarkForDeletion:function(){this.$6=!this.$6;this.$3(this);}}
tab.DatePicker=function(settings){tab.DatePicker.initializeBase(this,[$('<span>')]);this.$1_0=settings.firstDayOfWeek;this.$1_1=settings.shortDayOfWeekNames;this.$1_10=settings.todayFormatTemplate;this.$1_2=settings.monthYearFormatter;this.$1_3=settings.fullDateFormatter;this.$1_11=false;var $0=new Date();this.$1_5=tab.DatePicker.$1_14((tab.DatePicker.$1_12(settings.monthToShow)||$0));this.$1_6=tab.DatePicker.$1_12(settings.dateToSelect);this.setDateRange(settings.minDate,settings.maxDate);this.get_element().addClass('tab-datepicker');this.$1_17().appendTo(this.get_element());var $1=$('<div>').addClass('tab-datepicker-month-table-wrapper').append($('<div>').addClass('tab-datepicker-week-shade')).append(this.$1_19());$1.appendTo(this.get_element());this.$1_18().appendTo(this.get_element());this.get_element().prop('unselectable','on');this.get_element().find('*').prop('unselectable','on');this.$1_21();}
tab.DatePicker.$1_12=function($p0){return (!!$p0)?new Date($p0.getUTCFullYear(),$p0.getUTCMonth(),$p0.getUTCDate()):null;}
tab.DatePicker.$1_13=function($p0){return (!!$p0)?new Date(Date.UTC($p0.getFullYear(),$p0.getMonth(),$p0.getDate())):null;}
tab.DatePicker.$1_14=function($p0){return (!!$p0)?new Date($p0.getFullYear(),$p0.getMonth(),1):null;}
tab.DatePicker.$1_16=function($p0,$p1,$p2,$p3){if($p0+$p1>$p3){$p0=$p3-$p1;if($p0<$p2){$p0+=Math.ceil(($p2-$p0)/2);}}return $p0;}
tab.DatePicker.$1_28=function($p0,$p1){return ($p0+$p1+14)%7;}
tab.DatePicker.$1_29=function($p0,$p1){return ($p0.getFullYear()===$p1.getFullYear()&&$p0.getMonth()===$p1.getMonth()&&$p0.getDate()===$p1.getDate());}
tab.DatePicker.prototype={$1_0:0,$1_1:null,$1_2:null,$1_3:null,$1_5:null,$1_6:null,$1_7:null,$1_8:null,$1_9:null,$1_A:null,$1_B:null,$1_C:null,$1_D:null,$1_E:null,$1_F:null,$1_10:null,$1_11:false,setDateRange:function(newMinDate,newMaxDate){this.$1_7=tab.DatePicker.$1_12(newMinDate);this.$1_9=tab.DatePicker.$1_12(newMaxDate);this.$1_8=tab.DatePicker.$1_14(this.$1_7);this.$1_A=tab.DatePicker.$1_14(this.$1_9);},show:function(newMonthToShow,newSelectedDate){this.$1_5=tab.DatePicker.$1_14(tab.DatePicker.$1_12(newMonthToShow));this.$1_6=tab.DatePicker.$1_12((newSelectedDate||newMonthToShow));this.$1_21();return this.get_element().show().width(this.get_element().width());},hide:function(){this.$1_11=false;this.get_element().height('auto');return this.get_element().hide();},positionCalendarByElement:function(element){tab.BrowserViewport.getViewport(ss.Delegate.create(this,function($p1_0){
var $1_0=element.offset();var $1_1=this.get_element().outerWidth();var $1_2=this.getMaxHeight();var $1_3=element.outerHeight();$1_0=this.$1_15($p1_0,$1_3,$1_0,$1_1,$1_2);this.get_element().offset($1_0);}));},$1_15:function($p0,$p1,$p2,$p3,$p4){var $0=$p0.getDocumentViewport(tab.$create_Point($p2['left'],$p2['top']));var $1=$0.l+$0.w;var $2=$0.t+$0.h;if($p2['top']+$p1-1+$p4<=$2){$p2['top']+=$p1-1;$p2['left']=tab.DatePicker.$1_16($p2['left'],$p3,$0.l,$1);}else if($p2['top']-($p4-1)>$0.t){this.useMaxHeight();$p2['top']-=($p4-1);$p2['left']=tab.DatePicker.$1_16($p2['left'],$p3,$0.l,$1);}else if($p2['left']-($p3-1)>$0.l){$p2['left']-=($p3-1);$p2['top']=tab.DatePicker.$1_16($p2['top'],$p4,$0.t,$2);}else{var $3=$p2['left'];$p2['left']=$0.l;$p2['left']=tab.DatePicker.$1_16($p2['left'],$p3,$0.l,$3);$p2['top']=tab.DatePicker.$1_16($p2['top'],$p4,$0.t,$2);}return $p2;},getMaxHeight:function(){var $0=this.get_element().find('.tab-datepicker-month-table tbody tr');return this.get_element().outerHeight()+Math.round($0.outerHeight()*(6-$0.length));},useMaxHeight:function(){if(!this.$1_11){this.$1_11=true;this.$1_21();this.get_element().height(this.get_element().height());}},$1_17:function(){var $0=$('<div>').addClass('tab-datepicker-header');this.$1_B=$('<span>').addClass('tab-datepicker-header-text').appendTo($0);this.$1_C=$('<span>').addClass('tab-datepicker-header-button').addClass('tab-datepicker-prev-month-button').appendTo($0).click(ss.Delegate.create(this,this.$1_1C));this.$1_D=$('<span>').addClass('tab-datepicker-header-button').addClass('tab-datepicker-next-month-button').appendTo($0).click(ss.Delegate.create(this,this.$1_1D));return $0;},$1_18:function(){var $0=$('<div>').addClass('tab-datepicker-footer');$('<span>').addClass('tab-datepicker-today-label').html(String.format(this.$1_10,"<span class='tab-datepicker-today-date'></span>")).appendTo($0);this.$1_F=$('.tab-datepicker-today-date',$0).click(ss.Delegate.create(this,this.$1_20));return $0;},$1_19:function(){this.$1_E=$('<table>').addClass('tab-datepicker-month-table');this.$1_E.on('click','.tab-datepicker-day-cell',ss.Delegate.create(this,this.$1_1A));return this.$1_E;},$1_1A:function($p0){var $0=$($p0.target);if(!$0.hasClass('tab-disabled')){this.$1_1B($0);}},$1_1B:function($p0){this.$1_E.find('.tab-datepicker-day-cell-selected').removeClass('tab-datepicker-day-cell-selected');$p0.addClass('tab-datepicker-day-cell-selected');var $0=$p0.data();this.$1_6=new Date($0['year'],$0['month'],$0['dayOfMonth']);var $1=new Date(Date.UTC($0['year'],$0['month'],$0['dayOfMonth']));this.get_element().trigger('dateSelected',[$1]);},$1_1C:function($p0){if(this.$1_1E()){if(!this.$1_5.getMonth()){if(this.$1_5.getFullYear()>1){this.$1_5.setMonth(11);this.$1_5.setFullYear(this.$1_5.getFullYear()-1);}}else{this.$1_5.setMonth(this.$1_5.getMonth()-1);}this.$1_21();}},$1_1D:function($p0){if(this.$1_1F()){if(this.$1_5.getMonth()===11){this.$1_5.setMonth(0);this.$1_5.setFullYear(this.$1_5.getFullYear()+1);}else{this.$1_5.setMonth(this.$1_5.getMonth()+1);}this.$1_21();}},$1_1E:function(){return ss.isNullOrUndefined(this.$1_8)||this.$1_5>this.$1_8;},$1_1F:function(){return ss.isNullOrUndefined(this.$1_A)||this.$1_5<this.$1_A;},$1_20:function($p0){var $0=tab.DatePicker.$1_14(new Date());if(!this.$1_26($0)){this.$1_5=$0;this.$1_21();}},$1_21:function(){this.$1_22();this.$1_27();this.$1_23();this.get_element().trigger('calendarUpdated');},$1_22:function(){this.$1_B.text(this.$1_2(tab.DatePicker.$1_13(this.$1_5)));this.$1_C.toggleClass('tab-disabled',!this.$1_1E());this.$1_D.toggleClass('tab-disabled',!this.$1_1F());},$1_23:function(){this.$1_F.text(this.$1_3(tab.DatePicker.$1_13(new Date())));this.$1_F.toggleClass('tab-disabled',this.$1_26(tab.DatePicker.$1_14(new Date())));},$1_24:function($p0){return $('<td>').addClass('tab-datepicker-day-cell').text($p0.getDate().toString()).data({year:$p0.getFullYear(),month:$p0.getMonth(),dayOfMonth:$p0.getDate()}).toggleClass('tab-datepicker-day-cell-today',tab.DatePicker.$1_29($p0,new Date())).toggleClass('tab-datepicker-day-cell-selected',!!this.$1_6&&tab.DatePicker.$1_29($p0,this.$1_6)).toggleClass('tab-datepicker-day-cell-othermonth',$p0.getMonth()!==this.$1_5.getMonth()).toggleClass('tab-disabled',this.$1_25($p0));},$1_25:function($p0){return (ss.isValue(this.$1_7)&&$p0<this.$1_7)||(ss.isValue(this.$1_9)&&$p0>this.$1_9);},$1_26:function($p0){return (ss.isValue(this.$1_8)&&$p0<this.$1_8)||(ss.isValue(this.$1_A)&&$p0>this.$1_A);},$1_27:function(){var $0=new Date(this.$1_5.getFullYear(),this.$1_5.getMonth(),1).getDay();var $1;var $2,$3;var $4,$5,$6;this.$1_E.html('');$4=$('<thead>').appendTo(this.$1_E);$6=$('<tr>').appendTo($4);$1=this.$1_0;do{$('<th>').addClass('tab-datepicker-header-cell').text(this.$1_1[$1]).appendTo($6);$1=tab.DatePicker.$1_28($1,1);}while($1!==this.$1_0);$5=$('<tbody>').appendTo(this.$1_E);$6=$('<tr>').appendTo($5);$2=new Date(this.$1_5.getFullYear(),this.$1_5.getMonth(),1);$2.setDate($2.getDate()-tab.DatePicker.$1_28($0,-this.$1_0));$3=new Date(this.$1_5.getFullYear(),this.$1_5.getMonth()+1,1);$3.setDate($3.getDate()+tab.DatePicker.$1_28(this.$1_0,-$3.getDay()));while(!tab.DatePicker.$1_29($2,$3)){this.$1_24($2).appendTo($6);$2.setDate($2.getDate()+1);if($2.getDay()===this.$1_0&&!tab.DatePicker.$1_29($2,$3)){$6=$('<tr>').appendTo($5);}}if(this.$1_11){var $7=$5.find('tr');if($7.length<6){var $8=$7.height();for(var $9=$7.length;$9<6;++$9){$("<tr><td class='tab-datepicker-day-cell'></td></tr>").height($8).insertAfter($7.last());}}}}}
tab.DatePickerSettings=function(initialMonthToShow,initialDateToSelect,minDate,maxDate,initialFirstDayOfWeek,initialShortDayOfWeekNames,initialTodayFormatTemplate,initialMonthYearFormatter,initialFullDateFormatter){this.monthToShow=(ss.isNullOrUndefined(initialMonthToShow))?null:new Date(initialMonthToShow.getTime());this.dateToSelect=(ss.isNullOrUndefined(initialDateToSelect))?null:new Date(initialDateToSelect.getTime());this.minDate=(ss.isNullOrUndefined(minDate))?null:new Date(minDate.getTime());this.maxDate=(ss.isNullOrUndefined(maxDate))?null:new Date(maxDate.getTime());this.firstDayOfWeek=(ss.isNullOrUndefined(initialFirstDayOfWeek))?0:initialFirstDayOfWeek;this.shortDayOfWeekNames=(ss.isNullOrUndefined(initialShortDayOfWeekNames))?['S','M','T','W','T','F','S']:initialShortDayOfWeekNames.clone();this.todayFormatTemplate=(ss.isNullOrUndefined(initialTodayFormatTemplate))?'Today: {0}':initialTodayFormatTemplate;this.monthYearFormatter=(ss.isNullOrUndefined(initialMonthYearFormatter))?function($p1_0){
return tab.DatePicker.$1_12($p1_0).localeFormat('MMMM yyyy');}:initialMonthYearFormatter;this.fullDateFormatter=(ss.isNullOrUndefined(initialFullDateFormatter))?function($p1_0){
return tab.DatePicker.$1_12($p1_0).localeFormat('MMMM d, yyyy');}:initialFullDateFormatter;}
tab.DatePickerSettings.prototype={monthToShow:null,dateToSelect:null,minDate:null,maxDate:null,firstDayOfWeek:0,shortDayOfWeekNames:null,todayFormatTemplate:null,monthYearFormatter:null,fullDateFormatter:null}
tab.DojoWidgets=function(){}
tableau.FilterItem=function(){}
tableau.FilterItem.getSearchResultHTML=function(mode,arr,id,name,dname,isChecked,isAll,facet,showFacets,isPending){switch(mode){case 'checklist':case 'checkdropdown':case 'typeinlist':return tableau.FilterItem.getCheckboxHTML(arr,id,dname,isChecked,isAll,facet,showFacets,isPending);case 'radiolist':return tableau.FilterItem.getRadioHTML(arr,id,name,dname,isChecked,isAll,facet,showFacets);case 'dropdown':return tab.SimpleListContentFormatter.getter(arr,id,dname,facet,showFacets,true);}return '';}
tableau.FilterItem.getSelectHTML=function(arr,id,dname,isChecked,isAll){arr[1]=tableau.format.escapeHTML(id);arr[3]=(isChecked&&!isAll)?'SELECTED':'';arr[5]=tableau.format.escapeHTML(dname);return arr.join('');}
tableau.FilterItem.getCheckboxHTML=function(arr,id,dname,isChecked,isAll,facet,showFacets,isPending){var $0=(isPending)?'FIItem FIPending':'FIItem';arr[1]=$0;arr[3]=arr[7]=tableau.format.escapeHTML(id);arr[9]='';arr[11]=arr[13]=tableau.format.escapeHTML(dname);arr[5]=(showFacets)?facet:'';if(((isAll||isChecked)&&!isPending)||(!(isAll||isChecked)&&isPending)){arr[1]+=' FIChecked';arr[9]+=' checked="checked" ';}return arr.join('');}
tableau.FilterItem.getRadioHTML=function(arr,id,name,dname,isChecked,isAll,facet,showFacets){arr[1]='FIItem';arr[3]=tableau.format.escapeHTML(id);arr[7]=tableau.format.escapeHTML(name);arr[9]='';arr[11]=arr[13]=tableau.format.escapeHTML(dname);arr[5]=(showFacets)?facet:'';if(isAll||isChecked){arr[1]+=' FIChecked';arr[9]+=' checked="checked" ';}return arr.join('');}
tableau.FilterItem.getTypeInListHTML=function(arr,id,dname){arr[1]=tableau.format.escapeHTML(id);arr[3]=arr[5]=tableau.format.escapeHTML(dname);return arr.join('');}
tableau.FilterItem.getCssNode=function(node){if(ss.isNullOrUndefined(node)){return null;}if(!dojo.hasClass(node,'FIItem')){node=dojo.query('.FIItem',node.parentNode);}return node;}
tableau.FilterItem.isPending=function(node){var $0=tableau.FilterItem.getCssNode(node);return ss.isValue($0)&&dojo.hasClass($0,'FIPending');}
tableau.FilterItem.togglePendingState=function(node){var $0=tableau.FilterItem.getCssNode(node);$($0).toggleClass('FIPending');}
tableau.FilterItem.setChecked=function(node,isChecked,tuple){var $0=tableau.FilterItem.getCssNode(node);if(ss.isValue($0)){if(isChecked){dojo.addClass($0,'FIChecked');}else{dojo.removeClass($0,'FIChecked');}}var $1=tableau.FilterItem.getCheckboxOrRadio(node);if(ss.isValue($1)){$1.checked=!!isChecked;}if(ss.isValue(tuple)){tuple.s=(!!isChecked);}return tuple;}
tableau.FilterItem.isChecked=function(node){var $0=tableau.FilterItem.getCssNode(node);return ss.isValue($0)&&dojo.hasClass($0,'FIChecked');}
tableau.FilterItem.syncCssToCheckState=function(node){var $0=tableau.FilterItem.getCheckboxOrRadio(node);if(ss.isValue($0)){tableau.FilterItem.setChecked(node,$0.checked,null);}}
tableau.FilterItem.setSelected=function(node,selected){var $0=tableau.FilterItem.getCssNode(node);if(selected){dojo.addClass($0,'FISelected');}else{dojo.removeClass($0,'FISelected');}}
tableau.FilterItem.isSelected=function(node){var $0=tableau.FilterItem.getCssNode(node);return ss.isValue($0)&&dojo.hasClass($0,'FISelected');}
tableau.FilterItem.isTiled=function(node){var $0=node.parentNode;if(ss.isValue($0)){return dojo.hasClass($0,'tile');}return false;}
tableau.FilterItem.getNodeFromEvent=function(evt){if(ss.isNullOrUndefined(evt)||ss.isNullOrUndefined(evt.target)){return null;}var $0=evt.target;while(ss.isValue($0)&&$0.tagName!=='OPTION'&&!dojo.hasClass($0,'FIItem')){$0=$0.parentNode;}return $0;}
tableau.FilterItem.getIndex=function(node){return tableau.FilterItem.getIndexFromString(node.id);}
tableau.FilterItem.getIndexFromString=function(str){var $0=str.split('_');var $1=parseInt($0[$0.length-1],10);if(isNaN($1)){return -1;}return $1;}
tableau.FilterItem.isTypeInListItem=function(node){var $0=tableau.FilterItem.getCssNode(node);return ss.isValue($0)&&dojo.hasClass($0,'FITypeInItem');}
tableau.FilterItem.isAllItem=function(node){if(ss.isNullOrUndefined(node)||tableau.FilterItem.isTypeInListItem(node)){return false;}return tableau.FilterItem.hasAll(node.id);}
tableau.FilterItem.hasAll=function(s){var $0=s.split('_');var $1=$0[$0.length-1];return $1===tableau.FilterItem.ALL;}
tableau.FilterItem.getCheckboxOrRadio=function(node){var $0=tableau.util.findElementByTagName(node,'input',{type:'checkbox'});if(ss.isValue($0)){return $0;}return tableau.util.findElementByTagName(node,'input',{type:'radio'});}
tab.FilterPanel=function(oProps){this.templateString="<div class='FilterPanel' dojoAttachPoint='containerNode' dojoAttachEvent='onmousedown:onMouseDown'>"+'</div>';this.format={};this.attributes={};tab.FilterPanel.initializeBase(this);this.$2_1=[];this.$2_0=new tab.DisposableHolder();}
tab.FilterPanel.prototype={session:null,field:'',filter:null,width:0,metricsOnly:false,layoutSession:null,zid:0,viewModel:null,$2_0:null,$2_1:null,requestSetAttributes:null,titleHTML:null,$2_2:0,$2_3:0,$2_4:null,textStyle:null,backgroundColor:null,get_$2_5:function(){return this.viewModel.get_quickFilterModel();},get_getFilterModeMatrix:function(){if(ss.isValue(this.get_$2_5())&&ss.isValue(this.get_$2_5().get_quickFilterModeMatrix())){return this.get_$2_5().get_quickFilterModeMatrix();}else{return null;}},postCreate:function(){if(this.metricsOnly){return;}this.$2_1.add(this.session.registerEventListener('refreshFilterModel',ss.Delegate.create(this,this.$2_6)));},dispose:function(){this.$2_0.dispose();},destroy:function(){dojo.forEach(this.$2_1,dojo.unsubscribe);this.dispose();this.inherited(arguments);},makeQuantitativeFilter:function(filterProps){return new tableau.base.widget.QuantitativeFilter(filterProps);},makeQuantitativeDateFilter:function(filterProps){return new tableau.base.widget.QuantitativeDateFilter(filterProps);},makeHierarchicalFilter:function(filterProps){return new tableau.base.widget.HierarchicalFilter(filterProps);},makeCategoricalFilter:function(filterProps){return new tableau.base.widget.CategoricalFilter(filterProps);},makeRelativeDateFilter:function(filterProps){return new tableau.base.widget.RelativeDateFilter(filterProps);},makeRelativeDatePickFilter:function(filterProps){return new tableau.base.widget.RelativeDatePickFilter(filterProps);},setupEventHandlers:function(){var $0=$(this.filter.domNode);this.$2_0.add(tab.EventUtil.bindWithDispose($0,'mouseenter',ss.Delegate.create(this,this.$2_7)));this.$2_0.add(tab.EventUtil.bindWithDispose($0,'mouseleave',ss.Delegate.create(this,this.$2_8)));},$2_6:function($p0){if(this.field!==tableau.format.formatQualifiedName($p0.name)){return;}if(!!this.filter&&((this.filter.oFilter.type!==$p0.type)||($p0.type==='RD'&&$p0.showRelDatePick!==this.filter.oFilter.showRelDatePick)||($p0.type==='C'&&$p0.mode!==this.filter.oFilter.mode))){this.filter.destroy(false);this.filter=null;}if(ss.isNullOrUndefined(this.filter)){var $0={};$0.presModel=this.get_$2_5().get_quickFilterPresModel();if(tab.BrowserSupport.get_isIE()&&tab.BrowserSupport.get_browserVersion()<9){$0.backgroundColor=tab.ColorModel.fromColorCode(this.get_$2_5().get_zone().styledBox.fillColor).toRgb();}else{$0.backgroundColor=this.get_$2_5().get_zone().styledBox.fillColor;}$0.field=this.field;$0.oFilter=$p0;$0.layoutSession=this.layoutSession;$0.zid=this.zid;$0.format=this.format;$0.attributes=this.attributes||{};$0.requestSetAttributes=this.requestSetAttributes;$0.titleH=this.$2_2;$0.titleW=this.$2_3;$0.titleHTML=this.titleHTML;$0.width=this.width;$0.getContextMenuCommands=ss.Delegate.create(this,function(){
return this.getContextMenuCommands();});$0.showContextMenu=ss.Delegate.create(this,function($p1_0){
if(this.get_getFilterModeMatrix()==null){this.showContextMenu($p1_0);}else{this.showFilterPicker();}});if(this.session!=null){$0.session=this.session;}else{$0.metricsOnly=true;}switch($p0.type){case 'Q':if(tab.FilterModel.isQuantitativeDateFilter($p0)){this.filter=this.makeQuantitativeDateFilter($0);}else{this.filter=this.makeQuantitativeFilter($0);}break;case 'H':this.filter=this.makeHierarchicalFilter($0);break;case 'C':this.filter=this.makeCategoricalFilter($0);break;case 'RD':if($p0.showRelDatePick){this.filter=this.makeRelativeDatePickFilter($0);}else{this.filter=this.makeRelativeDateFilter($0);}break;default:dojo.style(this.domNode,'display','none');return;}var $1=this.get_$2_5().get_quickFilterPresModel().lineHeight;tab.WidgetStyle.applyFormatting(this.domNode,this.textStyle,this.backgroundColor,$1);this.addChild(this.filter);this.setupEventHandlers();if(!$0.metricsOnly){dojo.marginBox(this.filter.domNode,dojo.contentBox(this.domNode));}this.filter.layout();}else{this.filter.attributes=(ss.isNullOrUndefined(this.attributes))?{}:this.attributes;this.filter.oFilter=$p0;this.filter.setTitleSize(this.$2_2,this.$2_3);this.filter.initFromState();}this.hideControls();},$2_7:function($p0){dojo.removeClass(this.filter.domControls,'HideControls');},hideControls:function(){dojo.addClass(this.filter.domControls,'HideControls');},$2_8:function($p0){var $0=dojo.coords(this.filter.domNode,true);if($0.x>$p0.pageX||($0.x+$0.w)<=$p0.pageX||$0.y>$p0.pageY||($0.y+$0.h)<=$p0.pageY){this.hideControls();}},$2_9:function(){},setTitleSize:function(newH,newW){this.$2_2=newH;this.$2_3=newW;},resize:function(changeSize,resultSize){this.$2_4=dojo.marginBox(this.domNode);this.inherited(arguments);},layout:function(){if(!!this.filter){var $0=dojo.marginBox(this.domNode);var $1=_.isEqual(this.$2_4,$0);if(!$1){dojo.marginBox(this.filter.domNode,dojo.contentBox(this.domNode));this.filter.setTitleSize(this.$2_2,this.$2_3);this.filter.layout();}}},$2_A:function($p0){this.$2_6($p0);if(this.filter==null){var $0={fixed:{w:0,h:0},item:{w:0,h:0}};return $0;}else{return this.filter.getMetrics();}},getContextMenuCommands:function(){if(ss.isValue(this.get_$2_5())&&ss.isValue(this.get_$2_5().get_quickFilterCommands())){return this.get_$2_5().get_quickFilterCommands();}else{return {};}},showContextMenu:function(domNode){var $0=this.getContextMenuCommands();var $1=[];tab.MenuItem.newFromCommands($1,$0,function($p1_0){
return function(){
var $2_0=tab.CommandSerializer.deserialize($p1_0.command);tab.ServerCommands.executeServerCommand($2_0,'immediately');};});var $2=function($p1_0){
var $1_0=$p1_0.get_data();$1_0();};var $3=tab.MenuViewModel.createForMenu(new tab.Menu($1),$2);var $4=new tab.ShowMenuOptions($(domNode),false,0);$3.show($4);},showFilterPicker:function(){}}
tab.FloatingZoomToolbar=function(containerDiv,zoomFuncs,useAllButtons){this.parent=$(containerDiv);this.api=zoomFuncs;this.fullToolbar=useAllButtons;this.canZoomHome=false;this.makeDOM();this.setActiveState(false);}
tab.FloatingZoomToolbar.prototype={parent:null,domNode:null,zoomInNode:null,zoomOutNode:null,zoomModeNode:null,zoomHomeNode:null,tapZone:null,finishTapTimeout:null,api:null,oneShotZoomMode:false,buttonNodes:null,fullToolbar:false,canZoomHome:false,dispose:function(){try{if(this.fullToolbar){this.zoomInNode.remove();this.zoomOutNode.remove();this.zoomModeNode.remove();}this.zoomHomeNode.remove();this.domNode.remove();}catch($0){}this.api=null;this.domNode=null;this.zoomInNode=null;this.zoomOutNode=null;this.zoomModeNode=null;this.zoomHomeNode=null;if(ss.isValue(this.finishTapTimeout)){window.clearTimeout(this.finishTapTimeout);this.finishTapTimeout=null;}},setZoomHomePossibility:function(state){this.canZoomHome=state;if(!this.fullToolbar){this.setActiveState(this.canZoomHome);}},setActiveState:function(isVisible){if(!this.fullToolbar&&!this.canZoomHome){this.domNode.css('display','none');}else{this.domNode.css('display',(isVisible)?'':'none');}},exitZoomMode:function(){if(this.oneShotZoomMode){this.api.setZoomMode(false);this.oneShotZoomMode=false;this.zoomModeNode.attr('class',this.zoomModeNode.attr('class').replace(new RegExp('Active'),''));}},makeDOM:function(){this.domNode=$(document.createElement('div'));this.domNode.attr('class','FloatingZoomToolbar');this.buttonNodes=[];if(this.fullToolbar){this.zoomInNode=this.addButton('buttonZoomInNormal',this.domNode);this.zoomOutNode=this.addButton('buttonZoomOutNormal',this.domNode);this.zoomModeNode=this.addButton('buttonZoomModeNormal',this.domNode);this.zoomHomeNode=this.addButton('buttonZoomHomeNormal',this.domNode);this.buttonNodes.add(this.zoomInNode);this.buttonNodes.add(this.zoomOutNode);this.buttonNodes.add(this.zoomModeNode);this.buttonNodes.add(this.zoomHomeNode);}else{this.zoomHomeNode=this.addButton('buttonZoomOnlyHomeNormal',this.domNode);this.buttonNodes.add(this.zoomHomeNode);}this.parent.append(this.domNode);},addButton:function(klass,buttonParent){var $0=$(document.createElement('div'));$0.attr('class',klass);buttonParent.append($0);return $0;},onMouseOver:function(e){if(e.target===this.zoomHomeNode.get(0)&&!this.canZoomHome){return;}e.target.className=e.target.className.replace(new RegExp('Normal'),'Hover');},onMouseOut:function(e){e.target.className=e.target.className.replace(new RegExp('Hover'),'Normal');},toggleZoomMode:function(){var $0=this.zoomModeNode;this.oneShotZoomMode=!this.oneShotZoomMode;this.api.setZoomMode(this.oneShotZoomMode);if(this.oneShotZoomMode){$0.attr('class',$0.attr('class').replace(new RegExp('ZoomMode'),'ZoomModeActive'));}else{$0.attr('class',$0.attr('class').replace(new RegExp('Active'),''));}},clickZoomHome:function(){if(this.canZoomHome){this.api.zoomHome();}if(!this.fullToolbar){if(tsConfig.is_mobile){this.zoomHomeNode.attr('class',this.zoomHomeNode.attr('class').replace(new RegExp('Normal'),'Hover'));this.finishTapTimeout=window.setTimeout(ss.Delegate.create(this,this.finishMobileTap),800);}else{this.setActiveState(false);}}},finishMobileTap:function(){this.zoomHomeNode.attr('class',this.zoomHomeNode.attr('class').replace(new RegExp('Hover'),'Normal'));this.setActiveState(false);}}
tab.IteratorButtons=function(scrollContents,horizontal,buttonSize){this.$5=new tab.DisposableHolder();this.$3=scrollContents;if(horizontal){this.$4=new tab.HorizontalIteratorButtonTemplate();}else{this.$4=new tab.VerticalIteratorButtonTemplate();}this.$7=100;this.$6=horizontal;this.$4.$1_0();this.$4.nextButton.width(buttonSize).height(buttonSize).css('line-height',buttonSize+'px');this.$4.prevButton.width(buttonSize).height(buttonSize).css('line-height',buttonSize+'px');this.$5.add(tab.EventUtil.bindWithDispose(this.$4.nextButton,'click',ss.Delegate.create(this,this.$B)));this.$5.add(tab.EventUtil.bindWithDispose(this.$4.prevButton,'click',ss.Delegate.create(this,this.$A)));this.updateButtonState();}
tab.IteratorButtons.prototype={$3:null,$4:null,$6:false,$7:0,get_domRoot:function(){return this.$4.domRoot;},get_scrollIncrement:function(){return this.$7;},set_scrollIncrement:function(value){this.$7=value;return value;},get_$8:function(){return (this.$6)?this.$3.scrollLeft():this.$3.scrollTop();},set_$8:function($p0){if(this.$6){this.$3.scrollLeft($p0);}else{this.$3.scrollTop($p0);}return $p0;},get_$9:function(){if(this.$6){return this.$3.children()[0].scrollWidth-this.$3.width();}else{return this.$3.children()[0].scrollHeight-this.$3.height();}},reset:function(){if(this.$6){this.$3.scrollLeft(0);}else{this.$3.scrollTop(0);}this.updateButtonState();},dispose:function(){this.$5.dispose();},$A:function($p0){this.set_$8(Math.max(0,this.get_$8()-this.$7));this.updateButtonState();},$B:function($p0){this.set_$8(Math.min(this.get_$9(),this.get_$8()+this.$7));this.updateButtonState();},updateButtonState:function(){this.$E(this.$4.prevButton,this.$C());this.$E(this.$4.nextButton,this.$D());},$C:function(){return this.get_$8()>0;},$D:function(){return this.get_$8()<this.get_$9();},$E:function($p0,$p1){($p0).toggleClass('tabIterButtonDisabled',!$p1);}}
tab.IteratorButtonTemplate=function(htmlTemplate){tab.IteratorButtonTemplate.initializeBase(this,[$(htmlTemplate)]);this.prevButton=this.getElementBySelector('.tabCatLegendScrollPrev');this.nextButton=this.getElementBySelector('.tabCatLegendScrollNext');}
tab.IteratorButtonTemplate.prototype={prevButton:null,nextButton:null}
tab.HorizontalIteratorButtonTemplate=function(){tab.HorizontalIteratorButtonTemplate.initializeBase(this,[tab.HorizontalIteratorButtonTemplate.$1_1]);}
tab.HorizontalIteratorButtonTemplate.prototype={$1_0:function(){this.prevButton.addClass('tabCatLegendScrollLeft');this.nextButton.addClass('tabCatLegendScrollRight');}}
tab.VerticalIteratorButtonTemplate=function(){tab.VerticalIteratorButtonTemplate.initializeBase(this,[tab.VerticalIteratorButtonTemplate.$1_1]);}
tab.VerticalIteratorButtonTemplate.prototype={$1_0:function(){this.prevButton.addClass('tabCatLegendScrollUp');this.nextButton.addClass('tabCatLegendScrollDown');}}
tab.HoverAddClassBehavior=function(){}
tab.HoverAddClassBehavior.attach=function(widget,classToAdd,childSelector){classToAdd=classToAdd||'hover';return new tab.HoverBehavior(widget,childSelector,function($p1_0){
tab.HoverAddClassBehavior.$0($p1_0,classToAdd);},function($p1_0){
tab.HoverAddClassBehavior.$1($p1_0,classToAdd);});}
tab.HoverAddClassBehavior.$0=function($p0,$p1){$($p0.currentTarget).addClass($p1);}
tab.HoverAddClassBehavior.$1=function($p0,$p1){$($p0.currentTarget).removeClass($p1);}
tab.HoverBehavior=function(widget,childSelector,onEnter,onExit){this.$3=widget;this.$0=childSelector;this.$1=onEnter;this.$2=onExit;this.$3.add_disposed(ss.Delegate.create(this,this.$7));if(ss.isValue(childSelector)){this.$3.get_element().delegate(childSelector,'mouseenter'+this.get_$4(),ss.Delegate.create(this,this.$5));this.$3.get_element().delegate(childSelector,'mouseleave'+this.get_$4(),ss.Delegate.create(this,this.$6));}else{this.$3.get_element().bind('mouseenter'+this.get_$4(),ss.Delegate.create(this,this.$5));this.$3.get_element().bind('mouseleave'+this.get_$4(),ss.Delegate.create(this,this.$6));}}
tab.HoverBehavior.prototype={$0:null,$1:null,$2:null,$3:null,get_$4:function(){return String.format('.{0}',Type.getInstanceType(this).get_fullName().replaceAll('.','_'));},dispose:function(){if(this.$3==null){return;}if(ss.isValue(this.$0)){this.$3.get_element().undelegate(this.$0,this.get_$4());}else{this.$3.get_element().unbind(this.get_$4());}this.$3=null;},$5:function($p0){if(ss.isValue(this.$1)){this.$1($p0);}},$6:function($p0){if(ss.isValue(this.$2)){this.$2($p0);}},$7:function($p0,$p1){this.dispose();}}
tab.IDropDownSelect=function(){tab.IDropDownSelect.initializeBase(this);}
tab.IDropDownSelect.prototype={_getMenuItemForOption:function($p0){if(String.isNullOrEmpty($p0.value)){return new dijit.MenuSeparator();}else{var $0=ss.Delegate.create(this,function(){
this._setValueAttr($p0);});var $1={};$1.option=$p0;$1.label=$p0.label;$1.onClick=$0;$1.disabled=($p0.disabled||false);return new tableau.base.widget.ui.iMenuItem($1);}}}
tab.DownloadQueue=function(){this.$1=[];this.$3=[];}
tab.DownloadQueue.prototype={$1:null,$2:0,$3:null,add_complete:function(value){this.$4=ss.Delegate.combine(this.$4,value);},remove_complete:function(value){this.$4=ss.Delegate.remove(this.$4,value);},$4:null,add_imageLoaded:function(value){this.$5=ss.Delegate.combine(this.$5,value);},remove_imageLoaded:function(value){this.$5=ss.Delegate.remove(this.$5,value);},$5:null,add_imageTimedOut:function(value){this.$6=ss.Delegate.combine(this.$6,value);},remove_imageTimedOut:function(value){this.$6=ss.Delegate.remove(this.$6,value);},$6:null,addImage:function(image){if(!ss.isValue(image)){return;}for(var $0=0,$1=this.$1.length;$0<$1;$0++){if(!this.$1[$0].get_$7()){this.$2++;this.$1[$0].$9(image);return;}}if(this.$1.length<2){var $2=new tab.vqlui$3(this.$1.length);$2.add_$3(ss.Delegate.create(this,this.onWorkerFinished));$2.add_$5(ss.Delegate.create(this,this.onWorkerTimedOut));this.$1.add($2);this.$2++;$2.$9(image);}else{this.$3.enqueue(image);}},clear:function(){this.$3.clear();},destroy:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$1);while($enum1.moveNext()){var $0=$enum1.current;$0.$8();}this.$3.clear();this.$5=null;this.$6=null;this.$4=null;},onWorkerFinished:function(sender,e){if(ss.isValue(this.$5)){this.$5(this,new tab.ImageLoadedEventArgs(e.get_image()));}this.$7(e.get_workerID());},onWorkerTimedOut:function(sender,e){if(ss.isValue(this.$6)){this.$6(this,ss.EventArgs.Empty);}this.$7(e.get_workerID());},$7:function($p0){this.$2--;if(!this.$3.length){if(!this.$2){if(ss.isValue(this.$4)){this.$4(this,ss.EventArgs.Empty);}}}else{this.$1[$p0].$9(this.$3.dequeue());this.$2++;}}}
tab.vqlui$3=function(id){this.$0=-1;this.id=id;this.$0=-1;this.$2=true;}
tab.vqlui$3.prototype={id:0,$1:null,$2:true,add_$3:function($p0){this.$4=ss.Delegate.combine(this.$4,$p0);},remove_$3:function($p0){this.$4=ss.Delegate.remove(this.$4,$p0);},$4:null,add_$5:function($p0){this.$6=ss.Delegate.combine(this.$6,$p0);},remove_$5:function($p0){this.$6=ss.Delegate.remove(this.$6,$p0);},$6:null,get_$7:function(){return !this.$2;},$8:function(){this.$A();},$9:function($p0){if(ss.isNullOrUndefined($p0)){this.$D();return;}if(this.$0!==-1){window.clearTimeout(this.$0);this.$0=-1;}this.$1=$p0;this.$2=false;this.$A();var $0=true;var $1=$p0.get_imageNode();var $2=$($1);if(ss.isNullOrUndefined($1)){$1=$p0.set_imageNode(document.createElement('img'));$2=$($1);}else{$0=$2.width()!==$p0.get_bounds().w||$2.height()!==$p0.get_bounds().h;}if($0){$($1).css({left:$p0.get_bounds().l+'px',top:$p0.get_bounds().t+'px'});}$2.bind('load',ss.Delegate.create(this,this.$B));$2.bind('error',ss.Delegate.create(this,this.$B));$2.bind('abort',ss.Delegate.create(this,this.$B));this.$0=window.setTimeout(ss.Delegate.create(this,function(){
this.$C();}),60000);var $3=$2.attr('src');if(!tab.BrowserSupport.get_imageLoadIsSynchronous()){$2.attr('src',$p0.get_src());}else{window.setTimeout(function(){
$2.attr('src',$p0.get_src());},0);}if($p0.get_src()===$3&&!tab.BrowserSupport.get_raisesEventOnImageReassignment()){window.setTimeout(ss.Delegate.create(this,function(){
this.$B(null);}),0);}},$A:function(){if(ss.isValue(this.$1)&&ss.isValue(this.$1.get_imageNode())){var $0=$(this.$1.get_imageNode());if(ss.isValue($0)){$0.unbind('load',ss.Delegate.create(this,this.$B));$0.unbind('error',ss.Delegate.create(this,this.$B));$0.unbind('abort',ss.Delegate.create(this,this.$B));}}},$B:function($p0){window.clearTimeout(this.$0);this.$0=-1;if(this.$2){return;}this.$2=true;this.$D();},$C:function(){this.$2=true;this.$0=-1;this.$A();this.$E();},$D:function(){if(ss.isValue(this.$4)){this.$4(this,new tab.WorkerDoneEventArgs(this.id,this.$1));}},$E:function(){if(ss.isValue(this.$6)){this.$6(this,new tab.WorkerTimeoutEventArgs(this.id));}}}
tab.ImageDownloaderImageData=function(imgNode,idx,src,bounds,version){this.$0=imgNode;this.$1=idx;this.$2=src;this.$3=bounds;this.$4=version;}
tab.ImageDownloaderImageData.prototype={$0:null,$1:0,$2:null,$3:null,$4:0,get_imageNode:function(){return this.$0;},set_imageNode:function(value){this.$0=value;return value;},get_index:function(){return this.$1;},get_src:function(){return this.$2;},get_bounds:function(){return this.$3;},get_version:function(){return this.$4;}}
tab.ImageLoadedEventArgs=function(image){tab.ImageLoadedEventArgs.initializeBase(this);this.$1_0=image;}
tab.ImageLoadedEventArgs.prototype={$1_0:null,get_image:function(){return this.$1_0;}}
tab.WorkerDoneEventArgs=function(id,image){tab.WorkerDoneEventArgs.initializeBase(this);this.$1_0=id;this.$1_1=image;}
tab.WorkerDoneEventArgs.prototype={$1_0:0,$1_1:null,get_workerID:function(){return this.$1_0;},get_image:function(){return this.$1_1;}}
tab.WorkerTimeoutEventArgs=function(id){tab.WorkerTimeoutEventArgs.initializeBase(this);this.$1_0=id;}
tab.WorkerTimeoutEventArgs.prototype={$1_0:0,get_workerID:function(){return this.$1_0;}}
tab.DialogUnderlay=function(){tab.DialogUnderlay.initializeBase(this);}
tab.DialogUnderlay.prototype={layout:function(){var $0=tabBootstrap.ViewerBootstrap.get_instance().getViewport();var $1=this.node.style;var $2=this.domNode.style;$2.top=0+'px';$2.left=0+'px';$1.width=$0.w+'px';$1.height=$0.h+'px';var $3=tabBootstrap.ViewerBootstrap.get_instance().getViewport();if($0.w!==$3.w){$1.width=$3.w+'px';}if($0.h!==$3.h){$1.height=$3.h+'px';}}}
tab.LegacyDialog=function(){this.buttons='None';this.onYes=function () { };this.onNo=function () { };tab.LegacyDialog.initializeBase(this);}
tab.LegacyDialog.prototype={title:'',$3_0:null,$3_1:null,postCreate:function(){this.inherited(arguments);dojo.style(this.domNode,'display','none');if(this.buttons==='YesNo'){var $1={};$1.label=tab.Strings.DialogYesButtonText;$1.onClick=ss.Delegate.create(this,this.$3_3);this.$3_0=new dijit.form.Button($1);$1.label=tab.Strings.DialogNoButtonText;$1.onClick=ss.Delegate.create(this,this.$3_4);this.$3_1=new dijit.form.Button($1);var $2=this.containerNode;$2.appendChild(document.createElement('br'));$2.appendChild(this.$3_0.domNode);$2.appendChild(this.$3_1.domNode);}var $0=function($p1_0){
$p1_0.stopPropagation();};$(this.domNode).bind('touchstart',$0).bind('touchcancel',$0).bind('touchend',$0).bind('touchmove',$0).bind('click',$0).bind('mousedown',$0).bind('mousemove',$0).bind('mouseup',$0);},show:function(){this.inherited(arguments);dojo.style(this.domNode,'display','');},hide:function(){this.inherited(arguments);dojo.style(this.domNode,'display','none');},_setup:function(){var $0=this.domNode;if(!!this.titleBar&&this.draggable){var $4={};$4.handle=this.titleBar;$4.timeout=0;this._moveable=(dojo.isIE===6)?new dojo.dnd.TimedMoveable($0,$4):new dojo.dnd.Moveable($0,$4);dojo.subscribe('/dnd/move/stop',ss.Delegate.create(this,this._endDrag));}else{dojo.addClass($0,'dijitDialogFixed');}var $1={};$1['id']=this.id+'_underlay';$1['class']=dojo.map(this.$3_2(),function($p1_0){
return $p1_0+'_underlay';}).join(' ');this._underlay=new tableau.base.widget.DialogUnderlay($1);var $2=this._underlay;var $3={};$3.node=$0;$3.duration=this.duration;$3.onBegin=ss.Delegate.create($2,$2.show);this._fadeIn=dojo.fadeIn($3);$3={};$3.node=$0;$3.duration=this.duration;$3.onEnd=function(){
$0.style.visibility='hidden';$0.style.top='-9999px';$2.hide();};this._fadeOut=dojo.fadeOut($3);},uninitialize:function(){if(!!this.$3_0){this.$3_0.destroyRecursive();}if(!!this.$3_1){this.$3_1.destroyRecursive();}this.$3_0=this.$3_1=null;this.inherited(arguments);},_position:function(){if(!dojo.hasClass(dojo.body(),'dojoMove')){var $0=this.domNode;var $1=tabBootstrap.ViewerBootstrap.get_instance().getViewport();var $2=this._relativePosition;var $3=(ss.isValue($2))?null:dojo.marginBox($0);var $4=0;var $5=0;dojo.style($0,{left:Math.floor($4+((ss.isValue($2))?$2.l:($1.w-$3.w)/2))+'px',top:Math.floor($5+((ss.isValue($2))?$2.t:($1.h-$3.h)/2))+'px'});}},onHide:function(){this.inherited(arguments);window.setTimeout(ss.Delegate.create(this,this.destroyRecursive),500);},$3_2:function(){return ((this)['class']).split(new RegExp('\\s'));},$3_3:function($p0){this.$3_5(true,$p0);},$3_4:function($p0){this.$3_5(false,$p0);},$3_5:function($p0,$p1){dojo.stopEvent($p1);this.hide();if($p0){if(ss.isValue(this.onYes)){this.onYes();}}else{if(ss.isValue(this.onNo)){this.onNo();}}}}
tab.FilteringSearchWidget=function(r){this.templateString="<div class='Search FilteringSearch'>"+"<div class='SearchBox' dojoAttachPoint='domQuerySection'>"+"<textarea rows='1' class='QueryBox' spellcheck='false'"+"dojoAttachPoint='domQueryBox'"+"dojoAttachEvent='onkeydown:onQueryBoxKeyDown,onclick:focusQueryBox,onfocus:focusQueryBox,onblur:blurQueryBox'></textarea>"+"<span class='wcSearchX' title='${XBUTTON_CLOSE_TOOLTIP}'"+"dojoAttachPoint='domXButton'"+"dojoAttachEvent='onclick:onXButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span>"+'</div>'+'</div>';this.$1_4=0;tab.FilteringSearchWidget.initializeBase(this);}
tab.FilteringSearchWidget.prototype={domQueryBox:null,domSearchButton:null,domSearchBusyImg:null,$1_1:100,$1_2:null,get_noMatchHtml:function(){return this.NO_MATCHES;},get_$1_5:function(){return this.get_qf();},setStyle:function(s){this.$1_4=s;if(this.$1_4===1){dojo.addClass(this.domNode,'FilteringDropdown');dojo.addClass(this.domNode,'SearchCleared');}else if(this.$1_4===2){dojo.addClass(this.domNode,'FilteringInline');}},get_applyDelay:function(){return 0;},startupAndAppendTo:function(container){container.append(this.domNode);this.startupNoAppend();},startupNoAppend:function(){this.startup();},layout:function(listHeight){},hideUI:function(){dojo.style(this.domNode,'display','none');tab.FilteringSearchWidget.callBaseMethod(this, 'hideUI');},showUI:function(){tab.FilteringSearchWidget.callBaseMethod(this, 'showUI');this.focusQueryBox();},focusQueryBox:function(){this.domQueryBox.focus();},blurQueryBox:function(){this.domQueryBox.blur();},getQuery:function(){return this.domQueryBox.value;},setQuery:function(value){this.domQueryBox.value=value;},onXButtonClick:function(evt){if(this.$1_4===1){this.clearSearch();dojo.removeClass(this.get_domXButton(),'Hover');}else{tab.FilteringSearchWidget.callBaseMethod(this, 'onXButtonClick',[evt]);}},updateSearch:function(){if(this.get_isVisible()){this.searchWithQuery(this.getQuery());}},searchWithQuery:function(query){if(query.length<=0){this.clearSearch();}else if(this.get_qf().get_oFilter().isTiled&&this.get_qf().get_dijitDeclaredClass().indexOf('CategoricalFilterMobile')<0){this.doRemoteSearch(query,true);}else{this.$1_7(this.doCategoricalSearch(query));}},doCategoricalSearch:function(query){var $0;var $1=this.get_qf().get_oFilter();var $2=this.isSingleSelect();var $3=this.makeUniqueSearchItemIdPrefix();if($2){if(this.get_qf().get_mode()==='dropdown'){$0=([]).concat(tab.SimpleListContentFormatter.simpleListTemplate);}else{$0=([]).concat(tableau.FilterItem.radioArray);}}else{$0=([]).concat(tableau.FilterItem.checkboxArray);}var $4=($2)?false:(this.get_qf().get_oFilter().all&&!this.get_qf().get_oFilter().exclude)||this.get_qf().get_oFilter().allChecked;var $5=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
var $1_0=tableau.FilterItem.getIndexFromString($p1_2);var $1_1=ss.isValue(this.get_qf().get_modeContents().pendingManager)&&this.get_qf().get_modeContents().pendingManager.isPending($p1_0,$1_0);return tableau.FilterItem.getSearchResultHTML(this.get_qf().get_mode(),$0,$p1_2,($2)?$3:$p1_2,$p1_1,$p1_0.s||$4,false,'',false,$1_1);});return tab.LocalSearch.findMatches(query,$1,ss.Delegate.create(this,this.formatTuple),$3,$5);},doRemoteSearch:function(query,shouldGetIndex){this.doAjaxRemoteSearch(query,this.$1_1,shouldGetIndex,ss.Delegate.create(this,this.$1_7),ss.Delegate.create(this,this.$1_9));},getOnQueryBoxKeyDownBehavior:function(keyEvent){var $0;$0=this.inherited(arguments);switch(keyEvent.keyCode){case dojo.keys.ESCAPE:if(dojo.isFF){$0.functionToCall=ss.Delegate.create(this,this.onXButtonClick);}break;case dojo.keys.ENTER:$0.stopEvent=true;$0.functionToCall=ss.Delegate.create(this,this.$1_6);break;}return $0;},clearSearch:function(){if(this.resultCount===tab.SearchWidgetBase.noSearchPerformed){return;}dojo.addClass(this.domNode,'SearchCleared');tab.FilteringSearchWidget.callBaseMethod(this, 'clearSearch');this.get_$1_5().filterBySearchResults(null);this.resultCount=tab.SearchWidgetBase.noSearchPerformed;},handleNonCommandKeyDown:function(evt){var $0=500;dojo.removeClass(this.domNode,'SearchCleared');tab.FilteringSearchWidget.callBaseMethod(this, 'handleNonCommandKeyDown',[evt]);switch(this.domQueryBox.value.length){case 1:$0=Math.round($0*1.5);break;case 2:$0=Math.round($0*1.25);break;}if(!!this.$1_2){window.clearTimeout(this.$1_2);this.$1_2=null;}this.$1_2=window.setTimeout(ss.Delegate.create(this,this.updateSearch),$0);},$1_6:function($p0){this.updateSearch();},$1_7:function($p0){if(ss.isValue($p0.length)){this.resultCount=$p0.length;}else if(ss.isValue($p0.tuples)){this.resultCount=$p0.tuples.length;$p0=this.$1_8($p0);}this.get_$1_5().filterBySearchResults($p0);},$1_8:function($p0){var $0;var $1=this.isSingleSelect();var $2=this.makeUniqueSearchItemIdPrefix();if($1){if(this.get_qf().get_mode()==='dropdown'){$0=([]).concat(tab.SimpleListContentFormatter.simpleListTemplate);}else{$0=([]).concat(tableau.FilterItem.radioArray);}}else{$0=([]).concat(tableau.FilterItem.checkboxArray);}var $3=($1)?false:(this.get_qf().get_oFilter().all&&!this.get_qf().get_oFilter().exclude)||this.get_qf().get_oFilter().allChecked;var $4=$p0.tuples;var $5=$p0.indices;var $6=[];for(var $7=0;$7<$4.length;$7++){var $8=ss.isValue(this.get_qf().get_modeContents().pendingManager)&&this.get_qf().get_modeContents().pendingManager.isPending($4[$7],$5[$7]);var $9=this.formatTuple($4[$7]);var $A=$2+'_'+$5[$7].toString();$6.push(tableau.FilterItem.getSearchResultHTML(this.get_qf().get_mode(),$0,$A,($1)?$2:$A,$9,$4[$7].s||$3,false,'',false,$8));}return $6;},$1_9:function($p0){}}
tab.OverlayImage=function(parent,imageSource){tab.OverlayImage.initializeBase(this,[$("<img class='tab-overlayImage'/>")]);this.$1_1=$(parent);this.get_element().bind('load',ss.Delegate.create(this,function(){
this.$1_3();}));this.get_element().attr('src',imageSource);}
tab.OverlayImage.prototype={$1_1:null,$1_2:null,get_location:function(){return this.$1_2;},set_location:function(value){this.$1_2=value;this.$1_3();return value;},clone:function(){return new tab.OverlayImage(this.$1_1.get(0),this.get_element().attr('src'));},show:function(showLocation){this.$1_2=showLocation;this.$1_3();},hide:function(){this.get_element().detach();},$1_3:function(){if(this.get_element().parent()[0]!==this.$1_1[0]){this.$1_1.append(this.get_element());}if(this.$1_2==null){return;}var $0=this.$1_2.y;var $1=this.$1_2.x;this.get_element().css({top:$0+'px',left:$1+'px'});}}
tab.OverlayPanel=function(parentElt){tab.OverlayPanel.initializeBase(this,[$('<div class="tab-overlay-panel tab-opacity-01"></div>')]);if(ss.isValue(parentElt)){this.$1_1=parentElt;}this.get_element().css('display','none');}
tab.OverlayPanel.prototype={$1_1:null,show:function(){if(ss.isNullOrUndefined(this.$1_1)){this.get_element().appendTo(document.body);}else{this.get_element().appendTo(this.$1_1);}this.get_element().css('filter','alpha(opacity=01)');this.get_element().fadeIn('fast');},hide:function(){this.get_element().fadeOut('fast',ss.Delegate.create(this,this.$1_2));},bind:function(eventName,handler){this.get_element().bind(eventName,handler);},$1_2:function(){this.get_element().remove();}}
tab.ParameterControl=function(oProps){this.format={};this.$1_2={};tab.ParameterControl.initializeBase(this);this.session=oProps.session;this.$1_1=oProps.field;this.$1_5=oProps.titleH;this.$1_6=oProps.titleW;this.$1_7=oProps.titleHTML;this.format=oProps.format;this.backgroundColor=oProps.backgroundColor;this.$1_2=oProps.attributes;this.$1_3=this.$1_2['model'];}
tab.ParameterControl.prototype={$1_0:true,domBox:null,domControls:null,getSID:null,session:null,$1_1:'',stateId:0,$1_3:null,ui:null,domTitleBar:null,domContent:null,$1_4:null,$1_5:0,$1_6:0,$1_7:null,backgroundColor:null,postCreate:function(){this.getSID=ss.Delegate.create(this,function(){
return this.stateId;});this.$1_4=[];this.$1_8();},destroy:function(preserveDom){dojo.forEach(this.$1_4,dojo.unsubscribe);if(ss.isValue(this.ui)){this.ui.destroy();}this.domContent.innerHTML='';this.inherited(arguments);},getTypeInParamClass:function(){return tableau.base.widget.paramui.TypeIn;},getTypeInDateFieldParamClass:function(){return tableau.base.widget.paramui.TypeInDateField;},getCompactParamClass:function(){return tableau.base.widget.paramui.Compact;},getListParamClass:function(){return tableau.base.widget.paramui.List;},getSliderParamClass:function(){return tableau.base.widget.paramui.Slider;},$1_8:function(){var $0=null;if(ss.isNullOrUndefined(this.$1_3.legacyPresModel)){return;}dojo.attr(this.domTitleBar,'title',(this.$1_3.legacyPresModel).title);switch(this.$1_A()){case 'type_in':$0=this.getTypeInParamClass();break;case 'compact':$0=this.getCompactParamClass();break;case 'list':$0=this.getListParamClass();break;case 'slider':$0=this.getSliderParamClass();break;case 'datetime':$0=this.getTypeInDateFieldParamClass();break;}if($0==null){return;}if(ss.isValue(this.ui)){this.ui.destroy();this.ui=null;}this.ui=new $0(this,this.domContent,this.$1_1,this.$1_2);this.ui.instantiate(false);this.$1_9();tab.WidgetStyle.applyFormatting(this.domNode,this.$1_3.textStyle,this.backgroundColor,this.$1_3.lineHeight);},$1_9:function(){this.domTitleBar.innerHTML=this.$1_7;$(this.domTitleBar).find('div').css({'text-overflow':'ellipsis',overflow:'hidden'});},updateTitle:function(){this.$1_9();},refreshState:function(newAttributes){if(_.isEqual(newAttributes,this.$1_2)){return;}this.$1_2=newAttributes;if(ss.isValue(this.ui)){this.ui.refreshState(this.$1_2);}},$1_A:function(){return this.$1_2['mode'];},$1_B:function(){return false;},getTitleOffset:function(){return (dojo.hasClass(this.domNode,'PCInlineTitle'))?0:dojo.marginBox(this.domTitleBar).h;},layout:function(){if(ss.isNullOrUndefined(this.domNode.parentNode)||ss.isNullOrUndefined(this.ui)){return;}dojo.removeClass(this.domNode,'PCInlineTitle');var $0=tab.$create_DojoCoords();if(this.$1_5>0){$0.h=this.$1_5;dojo.marginBox(this.domTitleBar,{h:$0.h});}if(this.$1_6>0){$0.w=this.$1_6;dojo.marginBox(this.domTitleBar,{w:$0.w});}tableau.util.setupTitleEllipsis($(this.domTitleBar));var $1=dojo.contentBox(this.domNode);var $2=tab.$create_Size($1.w,$1.h);if(!this.$1_B()){if(this.$1_6>0){$2.w=$1.w-$0.w;dojo.style(this.domTitleBar,'float','left');dojo.style(this.domContent,'float','left');dojo.addClass(this.domNode,'PCInlineTitle');}else{$2.h=$1.h-$0.h;dojo.style(this.domTitleBar,'float','none');dojo.style(this.domContent,'float','none');}}this.ui.layout($2);}}
tab.ParamUIBase=function(parent,div,field,attrs){tab.ParamUIBase.initializeBase(this);this.disposables=new tab.DisposableHolder();this.parent=parent;this.div=div;this.field=field;this.attributes=attrs;this.model=attrs['model'];this.legacyModel=this.model.legacyPresModel;this.newValInFlight=null;}
tab.ParamUIBase.prototype={disposables:null,legacyModel:null,model:null,parent:null,field:null,newValInFlight:null,div:null,attributes:null,refreshState:function(attrs){this.attributes=attrs;this.model=attrs['model'];this.legacyModel=this.model.legacyPresModel;this.setNewState();},dispose:function(){this.disposables.dispose();},destroy:function(preserveDom){this.dispose();this.div.innerHTML='';},layout:function(contentSize){dojo.marginBox(this.div,contentSize);},formatTuple:function($p0){return tableau.format.formatTupleDisplayName($p0,true,null);}}
tab.ParamUITypeIn=function(parent,div,field,attrs){tab.ParamUITypeIn.initializeBase(this,[parent,div,field,attrs]);}
tab.ParamUITypeIn.prototype={widget:null,getWidgetClass:function(){return tableau.base.widget.ui.TypeIn;},instantiate:function(isUpdate){var $0=this.getWidgetClass();this.widget=new $0(this.div,ss.Delegate.create(this,this.$1_0),'TypeIn');this.widget.instantiate(this.legacyModel.alias,this.field,this.legacyModel.value,this.legacyModel.min,this.legacyModel.max,this.legacyModel.date_format,this.legacyModel.editing_format,this.model.firstDayOfWeek);if(this.legacyModel.is_list_domain){this.widget.$10(this.legacyModel.domain,ss.Delegate.create(this.parent.session,this.parent.session.getAutocompleteInfo));}},setNewState:function(){this.widget.setNewState(this.legacyModel.alias,this.legacyModel.domain,this.legacyModel.value,this.legacyModel.min,this.legacyModel.max);},destroy:function(){if(ss.isValue(this.widget)){this.widget.destroy();}this.inherited(arguments);},layout:function(contentSize){this.inherited(arguments);this.widget.layout();},$1_0:function($p0){if(this.newValInFlight===$p0){return;}this.newValInFlight=$p0;tab.ParameterServerCommands.setParameterValue(this.field,$p0,ss.Delegate.create(this,this.$1_2),ss.Delegate.create(this,this.$1_1));},$1_1:function($p0){this.widget.queryBox.value=this.legacyModel.alias;this.newValInFlight=null;this.setNewState();},$1_2:function($p0){this.newValInFlight=null;_.defer(ss.Delegate.create(this,this.setNewState));},updateCallback:function($p0){if(!!$p0.success){if(ss.isValue($p0.newval)){this.widget.queryBox.value=$p0.newval;this.legacyModel.alias=$p0.newval;this.widget.$2=$p0.newval;if(ss.isValue($p0.newdatavalue)){this.legacyModel.value=$p0.newdatavalue;this.widget.$3=$p0.newdatavalue;}}}else{this.widget.queryBox.value=this.legacyModel.alias;}}}
tab.ParamUITypeInDateField=function(parent,div,field,attrs){tab.ParamUITypeInDateField.initializeBase(this,[parent,div,field,attrs]);}
tab.ParamUITypeInDateField.prototype={getWidgetClass:function(){return tableau.base.widget.ui.TypeInDateField;}}
tab.ParamUICompact=function(parent,div,field,attrs){tab.ParamUICompact.initializeBase(this,[parent,div,field,attrs]);}
tab.ParamUICompact.prototype={instantiate:function(isUpdate){var $0=[];$0.add('<select id="pc_c_'+this.field+'" class="Dropdown tab-ctrl-formatted-fixedsize tab-ctrl-formatted-widget">');var $1=this.legacyModel.domain;var $2=$1.length;for(var $3=0;$3<$2;$3++){var $4=(this.legacyModel.alias===$1[$3])?'SELECTED ':'';$0.add('<option class="tab-ctrl-formatted-text"'+$4+'value="'+$3+'">'+tableau.format.escapeHTML($1[$3])+'</option>');}$0.add('</select>');this.div.innerHTML=$0.join('');$(this.div.firstChild).bind('change',ss.Delegate.create(this,this.$1_0));this.disposables.add(new tab.CallOnDispose(ss.Delegate.create(this,function(){
$(this.div.firstChild).unbind('change',ss.Delegate.create(this,this.$1_0));})));},setNewState:function(){this.instantiate(true);},$1_0:function($p0){var $0=parseInt(($p0.target).value,10);var $1=this.legacyModel.domain;if($0>=$1.length||$0<0||tab.MiscUtil.isNullOrEmpty($1)){return;}if($1[$0]===this.legacyModel.alias){return;}var $2=$1[$0];tab.ParameterServerCommands.setParameterValue(this.field,$2);},layout:function(contentSize){this.inherited(arguments);var $0=dojo.marginBox(this.div).w;if($0>4){dojo.style(this.div.firstChild,'width',($0-4)+'px');}}}
tab.ParamUIList=function(parent,div,field,attrs){tab.ParamUIList.initializeBase(this,[parent,div,field,attrs]);}
tab.ParamUIList.prototype={instantiate:function(isUpdate){var $0=tableau.FilterItem.radioArray;var $1=tableau.FilterItem.getRadioHTML;var $2=this.field;var $3=this.legacyModel.alias;var $4=[];var $5=this.legacyModel.domain;var $6=$5.length;for(var $7=0;$7<$6;$7++){var $8=([$2,'_',$7.toString()]).join('');$4.add($1($0,$8,$2,$5[$7],$3===$5[$7],false));}this.div.innerHTML=$4.join('');$(this.div).addClass('tab-ctrl-formatted-text');if(!isUpdate){this.disposables.add(tab.EventUtil.bindWithDispose($(this.div),'click',ss.Delegate.create(this,this.$1_0)));}},setNewState:function(){this.instantiate(true);},$1_0:function($p0){var $0=$p0.target.tagName.toLowerCase();if($0!=='input'){return;}var $1=tableau.FilterItem.getIndex($p0.target.parentNode.parentNode);var $2=this.legacyModel.domain[$1];tab.ParameterServerCommands.setParameterValue(this.field,$2);}}
tab.ParamUISlider=function(parent,div,field,attrs){tab.ParamUISlider.initializeBase(this,[parent,div,field,attrs]);}
tab.ParamUISlider.prototype={slider:null,instantiate:function(isUpdate){var $0=this.legacyModel;var $1=this.legacyModel.domain;var $2=this.legacyModel.alias;var $3=1;var $4=1;this.slider=new tableau.base.widget.ui.Slider(this.div,this.attributes,false,ss.Delegate.create(this,this.doUpdateViz),ss.Delegate.create(this.parent,this.parent.getTitleOffset),ss.Delegate.create(this,this.getCurrentText),null,null,false);if($0.fake_continuous){this.attributes['show-step-btns']='false';this.attributes['show-ticks']='false';}var $5=ss.Delegate.create(this,function(){
this.slider.instantiateFromDomain($1,$2);});var $6=ss.Delegate.create(this,function(){
$3=Number.POSITIVE_INFINITY;$4=this.percentageOfRange($0.value.v)*100;this.attributes['show-step-btns']='false';this.slider.instantiate($3,$4,$2);});var $7=ss.Delegate.create(this,function(){
$3=this.numPeriods();$4=this.indexInDateRange($0.value.v);$2=this.formatValue($0.value.v);this.slider.instantiate($3,$4,$2);});var $8=ss.Delegate.create(this,function(){
$3=this.sizeOfDiscreteRange();$4=this.indexInRange($0.value.v);this.slider.instantiate($3,$4,$2);});this.behaviorPicker($5,$6,$7,$8);},behaviorPicker:function(list,continuousRange,discreteDateRange,discreteOtherRange){if(this.$1_0()){return list();}else if(this.$1_1()){if(this.$1_2()){return continuousRange();}else{if(this.$1_3()){return discreteDateRange();}else{return discreteOtherRange();}}}return null;},setNewState:function(){var $0=this.legacyModel.domain;var $1=this.legacyModel.alias;var $2=function(){
var $1_0=$0.length;for(var $1_1=0;$1_1<$1_0;$1_1++){if($0[$1_1]===$1){return new ss.Tuple($1,$1_1);}}return null;};var $3=ss.Delegate.create(this,function(){
return new ss.Tuple($1,(this.percentageOfRange(this.legacyModel.value.v)*100));});var $4=ss.Delegate.create(this,function(){
return new ss.Tuple(this.formatValue(this.legacyModel.value.v),this.indexInDateRange(this.legacyModel.value.v));});var $5=ss.Delegate.create(this,function(){
return new ss.Tuple($1,this.indexInRange(this.legacyModel.value.v));});var $6=this.behaviorPicker($2,$3,$4,$5);this.slider.setNewState($6.second);this.slider.updateReadout($6.first);},refreshSliderMarksForIE:function(){this.slider.refreshSliderMarksForIE();},doUpdateViz:function(indexVal){var $0=ss.Delegate.create(this,function(){
return new ss.Tuple(this.legacyModel.domain[indexVal],null);});var $1=ss.Delegate.create(this,function(){
return new ss.Tuple(null,this.$1_D(this.$1_9(indexVal)));});var $2=ss.Delegate.create(this,function(){
return new ss.Tuple(null,this.$1_D(this.$1_B(indexVal)));});var $3=ss.Delegate.create(this,function(){
return new ss.Tuple(null,this.$1_D(this.$1_A(indexVal)));});var $4=this.behaviorPicker($0,$1,$2,$3);var $5=null;if(ss.isValue($4.first)){$5=$4.first;}else if(ss.isValue($4.second)){$5=tableau.format.formatDataValue($4.second);}tab.ParameterServerCommands.setParameterValue(this.field,$5);},updateCallback:function($p0){if(!!$p0.success){if(ss.isValue($p0.newval)){this.slider.updateReadout(this.formatValue(parseFloat($p0.newval)));}}},destroy:function(){if(ss.isValue(this.slider)&&(typeof(this.slider.destroy)==='function')){this.slider.destroy();}this.inherited(arguments);},layout:function(contentSize){this.inherited(arguments);if(ss.isValue(this.slider)&&(typeof(this.slider.layout)==='function')){this.slider.layout();}},getCurrentText:function(indexVal){var $0=ss.Delegate.create(this,function(){
return this.legacyModel.domain[indexVal];});var $1=ss.Delegate.create(this,function(){
return this.formatValue(this.$1_9(indexVal));});var $2=ss.Delegate.create(this,function(){
return this.formatValue(this.$1_B(indexVal));});var $3=ss.Delegate.create(this,function(){
return this.formatValue(this.$1_A(indexVal));});return this.behaviorPicker($0,$1,$2,$3);},$1_0:function(){return ss.isValue(this.legacyModel.domain);},$1_1:function(){return (ss.isValue(this.legacyModel.granularity)&&ss.isValue(this.legacyModel.min)&&ss.isValue(this.legacyModel.max));},$1_2:function(){return this.legacyModel.granularity.s===tableau.types.DataSpecial.DS_NULL;},$1_3:function(){return ss.isValue(this.legacyModel.date_period_type);},$1_4:function(){return this.legacyModel.min.v;},$1_5:function(){return this.legacyModel.max.v;},$1_6:function(){return this.legacyModel.granularity.v;},$1_7:function(){return this.legacyModel.date_period_type;},numPeriods:function(){var $0=this.legacyModel.num_periods/this.$1_6();if(Math.ceil($0)>Math.floor($0)){$0=$0+1;}return Math.floor($0)+1;},$1_8:function(){return this.$1_5()-this.$1_4();},percentageOfRange:function(val){return (val-this.$1_4())/this.$1_8();},$1_9:function($p0){return ($p0/100*this.$1_8())+this.$1_4();},sizeOfDiscreteRange:function(){return Math.floor(this.$1_8()/this.$1_6())+1;},indexInRange:function(val){return Math.floor((val-this.$1_4())/this.$1_6());},$1_A:function($p0){return ($p0*this.$1_6())+this.$1_4();},indexInDateRange:function(val){return Math.floor(((val-this.$1_4())/this.$1_C()/this.$1_6())+0.01);},$1_B:function($p0){$p0=$p0*this.$1_6();if($p0>this.legacyModel.num_periods){$p0=this.legacyModel.num_periods;}var $0=tab.DateUtil.adjustDateByPeriodInUTC(new Date(tableau.types.JsDateFromOleDate(this.$1_4())),this.$1_7(),$p0);return tableau.types.OleDateFromJsDate($0.getTime());},$1_C:function(){switch(this.legacyModel.date_period_type){case 'year':return 365;case 'quarter':return 365/4;case 'month':return 30;case 'week':return 7;case 'day':return 1;case 'hour':return 1/24;case 'minute':return 1/(24*60);case 'second':return 1/(24*60*60);}return 0;},formatValue:function(val){var $0=(this.legacyModel.date_format||this.legacyModel.format);return tableau.format.formatDataValue(this.$1_D(val),null,$0,null,true);},$1_D:function($p0){return tab.$create_DataValueStruct(this.legacyModel.min.t,$p0.toString());}}
tab.PendingChangesManager=function(parent,domainActualSize,exclusive){this.parent=parent;this.$0=domainActualSize;this.$1=exclusive;this.resetPendingChanges();}
tab.PendingChangesManager.prototype={$0:0,$1:false,$2:null,$3:false,$4:false,$5:null,$6:null,parent:null,add_onPendingChanges:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_onPendingChanges:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,add_onNoPendingChanges:function(value){this.$8=ss.Delegate.combine(this.$8,value);},remove_onNoPendingChanges:function(value){this.$8=ss.Delegate.remove(this.$8,value);},$8:null,get_allItemCheckState:function(){return this.$6;},set_allItemCheckState:function(value){this.$6=value;return value;},get_pendingChangelist:function(){return this.$2;},set_pendingChangelist:function(value){this.$2=value;return value;},resetFilterInfo:function(domainSize,exclude){this.$0=domainSize;this.$1=exclude;},resetPendingChanges:function(){this.$2=new tab.Changelist();this.$5=[];this.$3=false;this.$4=false;this.$6=null;this.$B();},processChanges:function(changelist){this.get_pendingChangelist().appendChangelist(changelist);this.$9();},processAll:function(select){this.$2=new tab.Changelist();var $0=new tab.RawChange();$0.setRange(new tab.IntegerRange(0,this.$0),this.isSelectAll());this.get_pendingChangelist().addChange($0);this.$5=[];this.$3=true;this.$4=select;this.$9();},isSelectAll:function(){return this.$3&&!this.$5.length&&this.$4;},isDeSelectAll:function(){return this.$3&&!this.$5.length&&!this.$4;},handleAllItemClicked:function(isChecked){var $0=(this.$1)?!isChecked:isChecked;this.set_allItemCheckState(isChecked);var $1=0;while(this.hasItemAtIndex($1)){if($0){if(!this.isChecked($1)){this.togglePendingCss($1,-1);}this.setChecked($1,true);}else{if(this.isChecked($1)){this.togglePendingCss($1,-1);}this.setChecked($1,false);}$1++;}this.$3=true;this.$4=$0;this.$5=[];},handleItemClicked:function(index,node,rowNum){if(index===-1){this.handleAllItemClicked(this.isChecked(index));return;}if(!this.isChecked(index,node)){if(this.hasAllItem()){this.setAllItemChecked(false);if(this.$1){var $0=true;var $1=0;while($0&&this.hasItemAtIndex($1)){if(this.isChecked($1)){$0=false;}$1++;}this.setAllItemChecked($0);}}}else{if(this.hasAllItem()){var $2=true;var $3=0;while($2&&this.hasItemAtIndex($3)){if(!this.isChecked($3)){$2=false;}$3++;}this.setAllItemChecked($2);}}this.togglePendingCss(index,rowNum,node);this.$C(index);},hasAllItem:function(){var $0=this.parent.fetchAllItem();return ss.isValue($0)&&tableau.FilterItem.isAllItem($0);},hasItemAtIndex:function(index){return index<this.$0&&ss.isValue(this.parent.fetchChildNodeByIndex(index));},setAllItemChecked:function(isChecked){var $0=this.parent.fetchAllItem();if(ss.isValue($0)){tableau.FilterItem.setChecked($0,isChecked);this.set_allItemCheckState(isChecked);}},togglePendingCss:function(index,rowNum,node){var $0=(ss.isValue(node))?node:this.parent.fetchChildNodeByIndex(index);if(ss.isValue($0)){tableau.FilterItem.togglePendingState($0);}},setChecked:function(index,isChecked){var $0=this.parent.fetchChildNodeByIndex(index);if(ss.isValue($0)){tableau.FilterItem.setChecked($0,isChecked);}},isChecked:function(index,node){var $0;if(index===-1){$0=this.parent.fetchAllItem();}else{$0=(ss.isValue(node))?node:this.parent.fetchChildNodeByIndex(index);}return tableau.FilterItem.isChecked($0);},isPending:function(t,index){if(this.$3){if(this.$5.contains(index)){return t.s===this.$4;}else{return t.s!==this.$4;}}else{return this.$5.contains(index);}},$9:function(){if(this.$3||this.$5.length>0){this.$A();}else{this.$B();}},$A:function(){if(ss.isValue(this.$7)){this.$7();}},$B:function(){if(ss.isValue(this.$8)){this.$8();}},$C:function($p0){if(this.$5.contains($p0)){this.$5.remove($p0);}else{this.$5.add($p0);}}}
tab.RelativeDateFilter=function(props){this.templateString="<div class='RelativeDateFilter'>"+"<div class='RelativeDateFilterBox' dojoAttachPoint='domBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='FilterTitle' dojoAttachPoint='domTitleBar'></div>"+"<div dojoType='dijit.form.Button' class='RDFButton RDFMenuButton' name='type' dojoAttachPoint='menuButton'"+"dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'></div></div>"+"<div dojoType='dijit.form.DropDownButton' dojoAttachPoint='domDropdownButton'>"+"<span class='RDText'>date description</span>"+"<div dojoType='dijit.TooltipDialog' dojoAttachPoint='domTooltipDialog'>"+"<div class='RelativeDateFilterDialog' dojoAttachPoint='domDialog'>"+"<div class='RangeButtonsBar'>"+"<div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPYear'"+"dojoAttachPoint='buttonYear' name='year'>Years</div>"+"<div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPQuarter'"+"dojoAttachPoint='buttonQuarter' name='quarter'>Quarters</div>"+"<div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPMonth'"+"dojoAttachPoint='buttonMonth' name='month'>Months</div>"+"<div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPWeek'"+"dojoAttachPoint='buttonWeek' name='week'>Weeks</div>"+"<div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPDay'"+"dojoAttachPoint='buttonDay' name='day'>Days</div>"+"<div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPHour'"+"dojoAttachPoint='buttonHour' name='hour'>Hours</div>"+"<div dojotype='dijit.form.ToggleButton' dojoAttachEvent='onClick:setPMinute'"+"dojoAttachPoint='buttonMinute' name='minute'>Minutes</div>"+'</div>'+"<div class='vertSpacer topHR'></div>"+"<div class='radioLine'>"+"<div class='column1'>"+"<input class='rradio' type='radio' name='radio-${field}' value='last'"+"dojoAttachPoint='radioLast' dojoAttachEvent='onclick:setRLast'></input>"+"<span class='rlabel' dojoAttachPoint='textLast' dojoAttachEvent='onclick:setRLast'></span>"+'</div>'+"<div class='column2'>"+"<input class='rradio' type='radio' name='radio-${field}' value='lastn'"+"dojoAttachPoint='radioLastn' dojoAttachEvent='onclick:setRLastn'></input>"+"<span class='rlabel alignLN' dojoAttachPoint='textLastn1' dojoAttachEvent='onclick:setRLastn'></span>"+"<input class='rtext' type='text' size='2' dojoAttachPoint='inputLastn' value='3'"+"dojoAttachEvent='onkeyup:onTypingLast'></input>"+"<span class='spinner' dojoAttachPoint='lastSpinner'>"+"<div class='spinnerElement spinnerUp' dojoAttachPoint='lastUp'"+"dojoAttachEvent='onmouseover:overLastUp,onmouseout:outLastUp,onclick:upLast'></div>"+"<div class='spinnerElement spinnerDown' dojoAttachPoint='lastDown'"+"dojoAttachEvent='onmouseover:overLastDown,onmouseout:outLastDown,onclick:downLast'></div>"+'</span>'+"<span class='rlabel' dojoAttachPoint='textLastn2' dojoAttachEvent='onclick:setRLastn'></span>"+'</div>'+'</div>'+"<div class='radioLine'>"+"<div class='column1'>"+"<input class='rradio' type='radio' name='radio-${field}' value='curr'"+"dojoAttachPoint='radioCurr' dojoAttachEvent='onclick:setRCurr'></input>"+"<span class='rlabel' dojoAttachPoint='textCurr' dojoAttachEvent='onclick:setRCurr'></span>"+'</div>'+"<div class='column2'>"+"<input class='rradio' type='radio' name='radio-${field}' value='nextn'"+"dojoAttachPoint='radioNextn' dojoAttachEvent='onclick:setRNextn'></input>"+"<span class='rlabel alignLN' dojoAttachPoint='textNextn1' dojoAttachEvent='onclick:setRNextn'></span>"+"<input class='rtext' type='text' size='2' dojoAttachPoint='inputNextn' value='3'"+"dojoAttachEvent='onkeyup:onTypingNext'></input>"+"<span class='spinner' dojoAttachPoint='nextSpinner'>"+"<div class='spinnerElement spinnerUp' dojoAttachPoint='nextUp'"+"dojoAttachEvent='onmouseover:overNextUp,onmouseout:outNextUp,onclick:upNext'></div>"+"<div class='spinnerElement spinnerDown' dojoAttachPoint='nextDown'"+"dojoAttachEvent='onmouseover:overNextDown,onmouseout:outNextDown,onclick:downNext'></div>"+'</span>'+"<span class='rlabel' dojoAttachPoint='textNextn2' dojoAttachEvent='onclick:setRNextn'></span>"+'</div>'+'</div>'+"<div class='radioline'>"+"<div class='column1'>"+"<input class='rradio' type='radio' name='radio-${field}' value='next'"+"dojoAttachPoint='radioNext' dojoAttachEvent='onclick:setRNext'></input>"+"<span class='rlabel' dojoAttachPoint='textNext' dojoAttachEvent='onclick:setRNext'></span>"+'</div>'+"<div class='column2'>"+"<input class='rradio' type='radio' name='radio-${field}' value='todate'"+"dojoAttachPoint='radioTodate' dojoAttachEvent='onclick:setRTodate'></input>"+"<span class='rlabel' dojoAttachPoint='textTodate' dojoAttachEvent='onclick:setRTodate'></span>"+'</div>'+'</div>'+"<div class='vertSpacer bottomHR'></div>"+"<div class='preview'>"+"<span dojoAttachPoint='domPreview'></span>"+'</div>'+'</div>'+'</div>'+'</div>'+'</div>'+'</div>';this.format={};this.$1_0=new Date(1753,0,1);this.$1_1=new Date(9999,11,31);this.$1_3=[];this.$1_4=new Array(0);this.anchorDateTime=0;this.$1_C=new tab.DisposableHolder();tab.RelativeDateFilter.initializeBase(this);}
tab.RelativeDateFilter.get_anchoredDescriptions=function(){if(ss.isNullOrUndefined(tab.RelativeDateFilter.$1_E)){tab.RelativeDateFilter.$1_10();}return tab.RelativeDateFilter.$1_E;}
tab.RelativeDateFilter.get_nonAnchoredDescriptions=function(){if(ss.isNullOrUndefined(tab.RelativeDateFilter.$1_F)){tab.RelativeDateFilter.$1_10();}return tab.RelativeDateFilter.$1_F;}
tab.RelativeDateFilter.$1_10=function(){tab.RelativeDateFilter.$1_E={};tab.RelativeDateFilter.$1_F={};var $0=tab.Strings;var $1=tab.RelativeDateFilterPeriodType;var $2=tab.RelativeDateFilterRangeType;var $dict1=$1;for(var $key2 in $dict1){var $3={key:$key2,value:$dict1[$key2]};var $4={};var $5={};var $dict3=$2;for(var $key4 in $dict3){var $6={key:$key4,value:$dict3[$key4]};var $7=String.format('RelDateAnchored_{0}_{1}',$6.key,$3.key);$4[$6.key]=$0[$7];$7=String.format('RelDate_{0}_{1}',$6.key,$3.key);$5[$6.key]=$0[$7];}tab.RelativeDateFilter.$1_E[$3.key]=$4;tab.RelativeDateFilter.$1_F[$3.key]=$5;}}
tab.RelativeDateFilter.prototype={widgetsInTemplate:true,session:null,field:'',oFilter:null,$1_2:0,rid:0,timestamp:0,periodType:null,rangeType:null,rangeN:0,fy:0,$1_5:1,titleH:0,titleW:0,layoutSession:null,getContextMenuCommands:null,showContextMenu:null,zid:0,$1_7:0,$1_8:0,$1_9:true,domTitleBar:null,domText:null,domDropdownButton:null,domDialog:null,buttonYear:null,buttonQuarter:null,buttonMonth:null,buttonWeek:null,buttonDay:null,buttonHour:null,buttonMinute:null,radioLast:null,radioCurr:null,radioNext:null,radioLastn:null,radioNextn:null,radioTodate:null,textLast:null,textCurr:null,textNext:null,textLastn1:null,textLastn2:null,textNextn1:null,textNextn2:null,textTodate:null,inputLastn:null,inputNextn:null,lastSpinner:null,nextSpinner:null,lastUp:null,lastDown:null,nextUp:null,nextDown:null,domPreview:null,domNode:null,domTooltipDialog:null,menuButton:null,titleHTML:null,backgroundColor:null,$1_A:'RDFButtonR',$1_B:'RDFButtonHide',getSID:null,$1_D:null,attributes:null,requestSetAttributes:null,postCreate:function(){var $0=0;this.$1_28();this.getSID=ss.Delegate.create(this,function(){
return this.$1_2;});if(ss.isValue(this.oFilter.fy)){this.fy=this.oFilter.fy-1;}if(ss.isValue(this.oFilter.start_of_week)){this.$1_5=this.oFilter.start_of_week;}this.timestamp=new Date().getTime();this.$1_3=[this.buttonYear,this.buttonQuarter,this.buttonMonth,this.buttonWeek,this.buttonDay];if(this.oFilter.noTime){dojo.style(this.buttonHour.domNode,'display','none');dojo.style(this.buttonMinute.domNode,'display','none');}else{this.$1_3.push(this.buttonHour);this.$1_3.push(this.buttonMinute);}this.connect(this.domTooltipDialog,'onOpen',ss.Delegate.create(this,this.$1_15));this.initFromState();var $1=ss.Delegate.create(this,function($p1_0,$p1_1){
if($p1_1){dojo.addClass($p1_0.domNode,this.$1_B);}else{$0+=1;dojo.addClass($p1_0.domNode,this.$1_A+$0);}});$1(this.menuButton,this.shouldHideContextMenu());$(this.menuButton.domNode).css('background-color',this.backgroundColor);},shouldHideContextMenu:function(){return this.hideEmptyTitlebar()||!this.getContextMenuCommands().commandItems.length;},shouldHideDomainButton:function(){return true;},hideEmptyTitlebar:function(){return String.isNullOrEmpty(tableau.format.formatColumnDisplayName(this.oFilter,false));},setTitleSize:function(newH,newW){this.titleH=newH;this.titleW=newW;},dispose:function(){this.$1_C.dispose();},destroy:function(preserveDom){this.dispose();if(ss.isValue(this.domText)){this.domText.innerHTML='';}this.inherited(arguments);},layout:function(){dojo.removeClass(this.domNode,'RDFHorizontal');var $0=dojo.marginBox(this.domDialog);if(!ss.isValue($0)||!ss.isValue($0.w)||!$0.w){return;}var $1=dojo.marginBox(this.domTitleBar);if(this.titleH>0){$1.h=this.titleH;dojo.marginBox(this.domTitleBar,{h:$1.h});}if(this.titleW>0){$1.w=this.titleW;dojo.marginBox(this.domTitleBar,{w:$1.w});}tableau.util.setupTitleEllipsis($(this.domTitleBar));var $2=dojo.contentBox(this.domNode);var $3=$2.w-4;dojo.query('.dijitButtonNode',this.domDropdownButton.domNode).addClass('tab-ctrl-formatted-widget');dojo.query('.dijitButtonText',this.domDropdownButton.domNode).addClass('tab-ctrl-formatted-fixedsize');if(!this.hideEmptyTitlebar()&&this.titleW>0){dojo.addClass(this.domNode,'RDFHorizontal');dojo.style(this.domTitleBar,'float','left');dojo.style(this.domDropdownButton.domNode,'float','left');$3=$2.w-$1.w-6;}else{dojo.style(this.domTitleBar,'float','none');dojo.style(this.domDropdownButton.domNode,'float','none');}if($3>29){dojo.style(this.domDropdownButton.domNode,'width',$3+'px');dojo.style(this.domDropdownButton.domNode.firstChild,'width',($3-4)+'px');$3=$3-25;var $5=this.domDropdownButton.domNode.firstChild.firstChild.firstChild.childNodes[1];if(ss.isValue($5)){dojo.style($5,'width',$3+'px');}}var $4=Math.floor(($0.w-10)/this.$1_3.length);var $enum1=ss.IEnumerator.getEnumerator(this.$1_3);while($enum1.moveNext()){var $6=$enum1.current;dojo.style($6.titleNode,'width',($4-5)+'px');}},getMetrics:function(){var $0=dojo.marginBox(this.domNode);return {fixed:{w:0,h:$0.h}};},initFromState:function(){var $0=this.oFilter.table;this.domDropdownButton.attr('label',this.oFilter.text);this.periodType=$0.periodType;this.rangeType=$0.rangeType;this.rangeN=$0.rangeN;if(!ss.isUndefined($0.anchor)){var $2=$0.anchor;this.anchorDateTime=new Date($2.year,$2.month-1,$2.day,$2.hour,$2.minute,$2.second);}this.$1_26(this.rangeType,this.rangeN);var $1=tableau.format.formatColumnDisplayName(this.oFilter,false);dojo.attr(this.domTitleBar,'title',$1);if(this.hideEmptyTitlebar()){dojo.style(this.domTitleBar,'display','none');dojo.marginBox(this.domTitleBar,{h:0});}else{this.domTitleBar.innerHTML=this.titleHTML;}},$1_11:function(){var $0={};$0.periodType=this.periodType;$0.rangeType=this.rangeType;$0.rangeN=this.rangeN;this.$1_2+=1;var $1=tableau.util.findDirectParentByClassName(this.domDialog,'dijitPopup',dojo.body());if(!ss.isNullOrUndefined($1)){dojo.style($1,'zIndex','980');}tab.FilterClientCommands.doRelativeDateQuickFilter(this.session.get_sheetName(),this.field,this.periodType,this.rangeType,this.rangeN);},doMenu:function(){this.showContextMenu(this.menuButton.domNode);},$1_12:function(){var $0=(ss.isValue(this.oFilter))?this.oFilter.default_format:null;return (ss.isValue($0)&&$0.length===3)?$0[0]:'*M/d/yyyy';},$1_13:function(){var $0=(ss.isValue(this.oFilter))?this.oFilter.default_format:null;return (ss.isValue($0)&&$0.length===3)?$0[1].substr(1):'hh:nn:ss ampm';},$1_14:function(){var $0=(ss.isValue(this.oFilter))?this.oFilter.default_format:null;return (ss.isValue($0)&&$0.length===3)?$0[2]:'en_US';},$1_15:function(){this.$1_1A(this.periodType);this.$1_18(this.rangeType,this.rangeN);this.$1_1B();},onTypingLast:function(){this.$1_16(this.inputLastn);},onTypingNext:function(){this.$1_16(this.inputNextn);},$1_16:function($p0){if(ss.isValue(this.$1_D)){window.clearTimeout(this.$1_D);this.$1_D=null;}$p0.value=$p0.value.replace(new RegExp('[^0-9]','g'),'');if($p0.value.length>0&&$p0.value!==this.oFilter.rangeN){this.rangeN=$p0.value;this.rangeType=($p0===this.inputLastn)?'lastn':'nextn';this.$1_26(this.rangeType,this.rangeN);this.$1_D=window.setTimeout(ss.Delegate.create(this,this.$1_11),800);}this.$1_1B();},setRLast:function(){this.$1_17('last');},setRCurr:function(){this.$1_17('curr');},setRNext:function(){this.$1_17('next');},setRLastn:function(){this.$1_17('lastn',this.inputLastn.value);},setRNextn:function(){this.$1_17('nextn',this.inputNextn.value);},setRTodate:function(){this.$1_17('todate');},$1_17:function($p0,$p1){$p1=$p1||0;if(ss.isValue(this.$1_D)){window.clearTimeout(this.$1_D);this.$1_D=null;}if($p0!==this.rangeType){this.rangeType=$p0;this.$1_26($p0,$p1);this.$1_18($p0,$p1);this.$1_D=window.setTimeout(ss.Delegate.create(this,this.$1_11),800);}this.$1_1B();},$1_18:function($p0,$p1){this.inputLastn.disabled=true;this.inputNextn.disabled=true;dojo.style(this.lastSpinner,'display','none');dojo.removeClass(this.radioLastn,'spinnerBugFix');dojo.style(this.nextSpinner,'display','none');dojo.removeClass(this.radioNextn,'spinnerBugFix');switch($p0){case 'last':this.radioLast.checked=true;break;case 'curr':this.radioCurr.checked=true;break;case 'next':this.radioNext.checked=true;break;case 'lastn':this.radioLastn.checked=true;this.rangeN=$p1;this.inputLastn.value=this.rangeN.toString();this.inputLastn.disabled=false;dojo.style(this.lastSpinner,'display','');dojo.addClass(this.radioLastn,'spinnerBugFix');break;case 'nextn':this.radioNextn.checked=true;this.rangeN=$p1;this.inputNextn.value=this.rangeN.toString();this.inputNextn.disabled=false;dojo.style(this.nextSpinner,'display','');dojo.addClass(this.radioNextn,'spinnerBugFix');break;case 'todate':this.radioTodate.checked=true;break;}},setPYear:function(){this.$1_19('year');},setPQuarter:function(){this.$1_19('quarter');},setPMonth:function(){this.$1_19('month');},setPWeek:function(){this.$1_19('week');},setPDay:function(){this.$1_19('day');},setPHour:function(){this.$1_19('hour');},setPMinute:function(){this.$1_19('minute');},setPSecond:function(){this.$1_19('second');},$1_19:function($p0){if(ss.isValue(this.$1_D)){window.clearTimeout(this.$1_D);this.$1_D=null;}if($p0!==this.periodType){if(this.oFilter.noTime&&$p0==='day'){dojo.style(this.radioTodate,'display','none');dojo.style(this.textTodate,'display','none');}else{dojo.style(this.radioTodate,'display','');dojo.style(this.textTodate,'display','');}this.periodType=$p0;this.$1_1B();this.$1_1A($p0);this.$1_D=window.setTimeout(ss.Delegate.create(this,this.$1_11),800*2);}},$1_1A:function($p0){var $0;var $1=this.$1_3.length;for(var $6=0;$6<$1;$6++){this.$1_3[$6].attr('checked',this.$1_3[$6].name===$p0);}if(!this.anchorDateTime){$0=tab.RelativeDateFilter.get_nonAnchoredDescriptions()[$p0];}else{$0=tab.RelativeDateFilter.get_anchoredDescriptions()[$p0];}this.textLast.innerHTML=$0['last'];this.textCurr.innerHTML=$0['curr'];this.textNext.innerHTML=$0['next'];var $2=$0['lastn'].split('%');this.textLastn1.innerHTML=$2[0];this.textLastn2.innerHTML=$2[1];var $3=$0['nextn'].split('%');this.textNextn1.innerHTML=$3[0];this.textNextn2.innerHTML=$3[1];this.textTodate.innerHTML=$0['todate'];var $4=dojo.style(this.textLastn1,'width');var $5=dojo.style(this.textNextn1,'width');if($4>$5){dojo.style(this.textNextn1,'width',$4+'px');}else if($4<$5){dojo.style(this.textLastn1,'width',$5+'px');}},$1_1B:function(){this.domPreview.innerHTML=this.$1_1C();},$1_1C:function(){var $0=this.$1_1E();var $1=this.$1_12();var $2=this.$1_14();var $3=this.$1_13();var $4;var $5=0;var $6=1;var $7=this.$1_1F($0);var $8=this.$1_20($7);var $9=$1+' '+$3;var $A=this.$1_21($0,$7);$8=new Date(Date.UTC($8.getFullYear(),$8.getMonth(),$8.getDate(),$8.getHours(),$8.getMinutes(),$8.getSeconds()));$A=new Date(Date.UTC($A.getFullYear(),$A.getMonth(),$A.getDate(),$A.getHours(),$A.getMinutes(),$A.getSeconds()));if(this.$1_1D($8,$A)){var $B=tableau.format.formatCustomJSDateTime($8,$1,false,null,$2,null,null,null,$5,$6);var $C=tableau.format.formatCustomJSDateTime($A,$1,false,null,$2,null,null,null,$5,$6);if(this.periodType==='hour'||this.periodType==='minute'||this.periodType==='second'||(this.periodType==='day'&&!this.$1_9)){var $D=$9;var $E=($B===$C)?$3:$9;$B=tableau.format.formatCustomJSDateTime($8,$D,false,null,$2,null,null,null,$5,$6);$C=tableau.format.formatCustomJSDateTime($A,$E,false,null,$2,null,null,null,$5,$6);}$4=tab.Strings.RelDateFilterPreview($B,$C);}else{$4='Invalid relative date';if(ss.isValue(this.$1_D)){window.clearTimeout(this.$1_D);this.$1_D=null;}}return $4;},$1_1D:function($p0,$p1){var $0=true;if(isNaN($p0)||isNaN($p1)){$0=false;}else if(this.$1_7>this.$1_8||(this.$1_7>0&&!this.$1_9)){$0=false;}else if(!ss.isValue($p0)||!ss.isValue($p1)){$0=false;}else if($p0<this.$1_0||$p1>this.$1_1){$0=false;}return $0;},$1_1E:function(){return (!this.anchorDateTime)?new Date():this.anchorDateTime;},$1_1F:function($p0){return this.$1_22($p0,this.fy,this.$1_5);},$1_20:function($p0){return tab.DateUtil.adjustDateByPeriod($p0,this.periodType,this.$1_7);},$1_21:function($p0,$p1){var $0=tab.DateUtil.adjustDateByPeriod($p1,this.periodType,this.$1_8+1);var $1=this.$1_23($0);if(!this.$1_9){$1=Math.min($p0.getTime(),$1.getTime());}return new Date($1);},$1_22:function($p0,$p1,$p2){var $0=$p0.getMonth();var $1=$p0.getFullYear();switch(this.periodType){case 'year':if($0<$p1){$1-=1;}return new Date($1,$p1,1);case 'quarter':var $2;if($0>=$p1){$2=Math.floor(($0-$p1)/3);$0=$p1+($2*3);}else{$2=Math.floor(($0+12-$p1)/3);var $5=($p1+($2*3))%12;if(!$5){$5=12;}if($5>$0){--$1;}$0=$5;}return new Date($1,$0,1);case 'month':return new Date($1,$0,1);case 'week':var $3=(7+(1+$p0.getDay())-$p2)%7;var $4=new Date($1,$0,$p0.getDate());return new Date($4.getTime()-($3*tab.DateUtil.oneDay));case 'day':return new Date($1,$0,$p0.getDate());case 'hour':return new Date($1,$0,$p0.getDate(),$p0.getHours());case 'minute':return new Date($1,$0,$p0.getDate(),$p0.getHours(),$p0.getMinutes());case 'second':return new Date($1,$0,$p0.getDate(),$p0.getHours(),$p0.getMinutes(),$p0.getSeconds());}return null;},$1_23:function($p0){var $0=null;switch(this.periodType){case 'year':case 'quarter':case 'month':case 'week':case 'day':$0=new Date($p0.getFullYear(),$p0.getMonth(),$p0.getDate());$0=new Date($0.getTime()-tab.DateUtil.oneSecond);break;case 'hour':case 'minute':case 'second':$0=new Date($p0.getTime()-tab.DateUtil.oneSecond);break;}return $0;},$1_24:function(){var $0=this.$1_9;var $1=this.$1_7;var $2=this.$1_8;var $3;if(!$1&&!$2&&$0){$3='curr';}else if(!$1&&!$2&&!$0){$3='todate';}else if($1===-1&&$2===-1&&$0){$3='last';}else if($1===1&&$2===1&&$0){$3='next';}else if($1<0&&!$2&&$0){$3='lastn';}else if(!$1&&$2>0&&$0){$3='nextn';}else if($1>0&&$2>0&&!$0){$3='invalid';}else if($1>$2){$3='invalid';}else if($1===$2){$3='other';}else{$3='othern';}return $3;},$1_25:function(){return this.$1_8-this.$1_7+1;},$1_26:function($p0,$p1){var $0;var $1;var $2;switch($p0){case 'curr':$0=0;$1=0;$2=true;break;case 'todate':$0=0;$1=0;$2=false;break;case 'last':$0=-1;$1=-1;$2=true;break;case 'next':$0=1;$1=1;$2=true;break;case 'lastn':$0=(1-$p1);$1=0;$2=true;break;case 'nextn':$0=0;$1=($p1-1);$2=true;break;default:return;}this.$1_7=$0;this.$1_8=$1;this.$1_9=$2;},overLastUp:function(){dojo.addClass(this.lastUp,'hover');},outLastUp:function(){dojo.removeClass(this.lastUp,'hover');},overLastDown:function(){dojo.addClass(this.lastDown,'hover');},outLastDown:function(){dojo.removeClass(this.lastDown,'hover');},overNextUp:function(){dojo.addClass(this.nextUp,'hover');},outNextUp:function(){dojo.removeClass(this.nextUp,'hover');},overNextDown:function(){dojo.addClass(this.nextDown,'hover');},outNextDown:function(){dojo.removeClass(this.nextDown,'hover');},$1_27:function($p0,$p1){var $0=parseInt($p0.value,10)+(($p1)?1:-1);if($0<1){return;}$p0.value=$0.toString();this.$1_16($p0);},upLast:function(){this.$1_27(this.inputLastn,true);},downLast:function(){this.$1_27(this.inputLastn,false);},upNext:function(){this.$1_27(this.inputNextn,true);},downNext:function(){this.$1_27(this.inputNextn,false);},$1_28:function(){tableau.util.localizeDojoLabeledControls([new ss.Tuple(this.buttonYear,'RelDateFilterYears'),new ss.Tuple(this.buttonQuarter,'RelDateFilterQuarters'),new ss.Tuple(this.buttonMonth,'RelDateFilterMonths'),new ss.Tuple(this.buttonWeek,'RelDateFilterWeeks'),new ss.Tuple(this.buttonDay,'RelDateFilterDays'),new ss.Tuple(this.buttonHour,'RelDateFilterHours'),new ss.Tuple(this.buttonMinute,'RelDateFilterMinutes')]);}}
tab.RelativeDatePickFilter=function(oProps){this.templateString="<div class='RelativeDatePickFilter'>"+"<div dojoAttachPoint='domBox' class='RelativeDatePickFilterBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='FilterTitle' dojoAttachPoint='domTitleBar'></div>"+"<div dojoType='dijit.form.Button' class='RDFButton RDFMenuButton' name='type' dojoAttachPoint='menuButton'"+"dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'></div>"+"<div class='PicklistContentDiv tab-ctrl-formatted-coloronly' dojoAttachPoint='domPicker'></div>"+'</div>'+'</div>'+'</div>';tab.RelativeDatePickFilter.initializeBase(this);}
tab.RelativeDatePickFilter.prototype={widgetsInTemplate:true,session:null,field:'',stateId:0,rid:0,timestamp:0,currentRange:null,$1_0:0,$1_1:0,layoutSession:null,zid:0,oFilter:null,currentAbbrev:null,showContextMenu:null,disposables:null,getContextMenuCommands:null,periodType:null,rangeType:null,rangeN:0,domTitleBar:null,domPicker:null,titleHTML:null,backgroundColor:null,getSID:null,$1_4:null,menuButton:null,postCreate:function(){var $0=0;this.disposables=new tab.DisposableHolder();this.getSID=ss.Delegate.create(this,function(){
return this.stateId;});this.timestamp=new Date().getMilliseconds();this.initFromState();var $1=function($p1_0,$p1_1){
if($p1_1){dojo.addClass($p1_0.domNode,'RDFButtonHide');}else{$0+=1;dojo.addClass($p1_0.domNode,'RDFButtonR'+$0);}};$1(this.menuButton,this.shouldHideContextMenu());$(this.menuButton.domNode).css('background-color',this.backgroundColor);},shouldHideDomainButton:function(){return true;},shouldHideContextMenu:function(){return this.hideEmptyTitlebar()||!this.getContextMenuCommands().commandItems.length;},dispose:function(){this.disposables.dispose();},destroy:function(preserveDom){this.dispose();this.domPicker.innerHTML='';this.inherited(arguments);},getMetrics:function(){var $0=dojo.marginBox(this.domNode);return {fixed:tab.$create_Size(0,$0.h)};},initFromState:function(){this.currentRange=this.oFilter.table;this.currentAbbrev=this.toAbbrev(this.currentRange);this.domPicker.innerHTML='';var $0=tableau.format.formatColumnDisplayName(this.oFilter,false);dojo.attr(this.domTitleBar,'title',$0);if(this.hideEmptyTitlebar()){dojo.style(this.domTitleBar,'display','none');dojo.marginBox(this.domTitleBar,{h:0});}else{this.domTitleBar.innerHTML=this.titleHTML;}_.each(tab.RelativeDatePickFilter.pickerStrings,ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=document.createElement('div');$1_0.innerHTML=tableau.format.escapeHTML($p1_0);dojo.addClass($1_0,'PickLabel');dojo.addClass($1_0,'tab-ctrl-formatted-border-hover');this.domPicker.appendChild($1_0);var $1_1=$($1_0);var $1_2=ss.Delegate.create(this,function($p2_0){
this.onClick($p1_1,$p2_0);});this.disposables.add(tab.EventUtil.bindWithDispose($1_1,'click',$1_2));if(this.currentAbbrev===tab.RelativeDatePickFilter.pickerDurations[$p1_1]){this.$1_5($1_0);this.$1_4=$1_0;}}));this.layout();},$1_5:function($p0){dojo.addClass($p0,'Selected');dojo.addClass($p0,'tab-ctrl-formatted-widget');},$1_6:function($p0){dojo.removeClass($p0,'Selected');dojo.removeClass($p0,'tab-ctrl-formatted-widget');},formatTuple:function($p0){return tableau.format.formatTupleDisplayName($p0,true,this.oFilter.role);},toAbbrev:function(rangeHash){var $0=rangeHash.rangeN.toString();var $1='';switch(rangeHash.rangeType){case 'curr':$1='0';break;case 'lastn':$1='-'+$0;break;case 'nextn':$1=$0;break;default:return '';}switch(rangeHash.periodType){case 'year':$1+='y';break;case 'quarter':$1+='q';break;case 'month':$1+='m';break;case 'week':$1+='w';break;case 'day':$1+='d';break;case 'hour':$1+='h';break;default:return '';}return $1;},onClick:function(pickedIndex,e){var $0=tab.RelativeDatePickFilter.pickerDurationsInteger[pickedIndex];if(e.target!==this.$1_4){if(ss.isValue(this.$1_4)){this.$1_6(this.$1_4);}this.$1_5(e.target);tab.FilterClientCommands.doRelativeDateQuickFilter(this.session.get_sheetName(),this.field,'day','lastn',$0);}},hideEmptyTitlebar:function(){return String.isNullOrEmpty(tableau.format.formatColumnDisplayName(this.oFilter,false));},doMenu:function(){this.showContextMenu(this.menuButton.domNode);},setTitleSize:function($p0,$p1){this.$1_0=$p0;this.$1_1=$p1;},adjustLabelPickWidth:function(totalWidth){var $0=Math.floor((totalWidth-1)/tab.RelativeDatePickFilter.pickerDurations.length);dojo.forEach(this.domPicker.childNodes,function($p1_0){
dojo.style($p1_0,'width',($0-3)+'px');});},layout:function(){var $0;dojo.removeClass(this.domNode,'RDPFHorizontal');var $1=dojo.marginBox(this.domPicker);if(!ss.isValue($1)||!ss.isValue($1.w)||!$1.w){return;}var $2=dojo.marginBox(this.domTitleBar);if(this.$1_0>0){$2.h=this.$1_0;dojo.marginBox(this.domTitleBar,{h:$2.h});}if(this.$1_1>0){$2.w=this.$1_1;dojo.marginBox(this.domTitleBar,{w:$2.w});}tableau.util.setupTitleEllipsis($(this.domTitleBar));var $3=dojo.contentBox(this.domNode);$0=$3.w;if(!this.hideEmptyTitlebar()&&this.$1_1>0){dojo.addClass(this.domNode,'RDPFHorizontal');dojo.style(this.domTitleBar,'float','left');dojo.style(this.domPicker,'float','left');$0=$3.w-$2.w;}else{dojo.style(this.domTitleBar,'float','none');dojo.style(this.domPicker,'float','none');}dojo.contentBox(this.domPicker,{w:$0});this.adjustLabelPickWidth($0);}}
tab.SearchWidgetBase=function(){this.CANCEL_SEARCH_TOOLTIP=tab.Strings.QuickFilterSearchCancel;this.SEARCH_TOOLTIP=tab.Strings.QuickFilterSearchTooltip;this.ADD_ITEM_CTRL_ENTER=tab.Strings.QuickFilterSearchAddItemCtrlEnter;this.ADD_ITEM_ENTER=tab.Strings.QuickFilterSearchAddItemEnter;this.XBUTTON_CLOSE_TOOLTIP=tab.Strings.QuickFilterSearchCloseTooltip;this.XBUTTON_CLEAR_TOOLTIP=tab.Strings.QuickFilterSearchClearTooltip;this.NO_MATCHES=tab.Strings.QuickFilterSearchNoMatches;this.resultCount=tab.SearchWidgetBase.noSearchPerformed;tab.SearchWidgetBase.initializeBase(this);}
tab.SearchWidgetBase.prototype={isContainer:false,domXButton:null,isVisible:false,qf:null,oResults:null,searchDelay:400,busy_gif_url:null,_isTypeInList:false,get_domXButton:function(){return this.domXButton;},get_isVisible:function(){return this.isVisible;},set_isVisible:function(value){this.isVisible=value;return value;},get_qf:function(){return this.qf;},set_qf:function(value){this.qf=value;return value;},get_dijitDomNode:function(){return this.domNode;},get_oResults:function(){return this.oResults;},set_oResults:function(value){this.oResults=value;return value;},get_dijitClassName:function(){return this.declaredClass;},postMixInProperties:function(){this.inherited(arguments);this.busy_gif_url=tableau.util.assetUrl('/images/busy.gif');},postCreate:function(){this._isTypeInList=!!this.get_qf()&&this.get_qf().get_isTypeInList();},resize:function($p0){dojo.marginBox(this.domNode,$p0);this.layout();},onQueryBoxKeyDown:function(evt){var $0=this.getOnQueryBoxKeyDownBehavior(evt);if(!!$0){if($0.stopEvent){dojo.stopEvent(evt);}if(!!$0.functionToCall){window.setTimeout($0.functionToCall,10);}}},getOnQueryBoxKeyDownBehavior:function(keyEvent){var $0={};$0.functionToCall=null;$0.stopEvent=false;switch(keyEvent.keyCode){case dojo.keys.ENTER:$0.stopEvent=true;break;case dojo.keys.ESCAPE:this.onXButtonClick(null);$0.stopEvent=true;break;default:$0.functionToCall=ss.Delegate.create(this,this.handleNonCommandKeyDown);break;}return $0;},handleNonCommandKeyDown:function(evt){this.$1_0();},onXButtonClick:function(evt){if(!this._isTypeInList){var $0=this.getQuery();this.hideUI();if(!!$0){this.showUI();}}else{this.clearSearch();}},onButtonHover:function($p0){dojo.addClass($p0.target,'Hover');},onButtonUnhover:function($p0){dojo.removeClass($p0.target,'Hover');},toggleUI:function(){if(this.get_isVisible()){this.hideUI();}else{this.showUI();}},isShowingResults:function(){return this.isVisible&&this.resultCount>0;},showUI:function(noLayout){if(this.get_isVisible()){return;}dojo.style(this.domNode,'display','block');this.isVisible=true;if(!noLayout){this.get_qf().layout();}this.focusQueryBox();},hideUI:function(){if(!this.get_isVisible()){return;}this.clearSearch(false,true);dojo.style(this.domNode,'display','none');this.blurQueryBox();this.isVisible=false;this.get_qf().layout();},clearSearch:function(preserveQueryBoxText,noFocus){if(this.resultCount===tab.SearchWidgetBase.noSearchPerformed){return;}if(!preserveQueryBoxText){this.setQuery('');this.$1_0();}this.resultCount=0;this.get_qf().layout();if(!noFocus){this.focusQueryBox();}},$1_0:function(){if(String.isNullOrEmpty(this.getQuery())&&!this._isTypeInList){this.get_domXButton().title=this.XBUTTON_CLOSE_TOOLTIP;}else{this.get_domXButton().title=this.XBUTTON_CLEAR_TOOLTIP;}},formatTuple:function(tuple){return tableau.format.formatTupleDisplayName(tuple,true,this.get_qf().get_oFilter().role);},isSingleSelect:function(){return this.get_qf().isSingleSelect();},makeUniqueSearchItemIdPrefix:function(){var $0='SI_'+this.get_qf().get_oFilter().name;if(!!this.get_qf().get_session()){$0+=this.get_qf().get_session().get_viewId();}return $0;},currentDomain:function(){var $0=tableau.types.QFDomain.QFD_ALL;if(!!this.get_qf().get_attributes()){$0=this.get_qf().get_attributes()['values'];}return $0;},doAjaxRemoteSearch:function(query,maxRows,shouldGetIndex,handleResults,handleResultsError){return this.get_qf().get_session().searchFilter(this.get_qf().get_field(),query,maxRows,shouldGetIndex,this.currentDomain(),handleResults,handleResultsError);}}
tab.SearchWidget=function(props,dom){this.templateString="<div class='Search'>"+"<div class='SearchBox tab-ctrl-formatted-border' dojoAttachPoint='domQuerySection'>"+"<textarea rows='1' class='QueryBox' spellcheck='false'"+"dojoAttachPoint='domQueryBox'"+"dojoAttachEvent='onkeydown:onQueryBoxKeyDown,onpaste:onQueryBoxPaste'></textarea>"+"<span class='wcSearchX' title='${XBUTTON_CLOSE_TOOLTIP}'"+"dojoAttachPoint='domXButton'"+"dojoAttachEvent='onclick:onXButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span>"+"<img class='searchBusyImg' title='${CANCEL_SEARCH_TOOLTIP}' src='${busy_gif_url}'"+"dojoAttachPoint='domSearchBusyImg'"+"dojoAttachEvent='onclick:onSearchBusyImgClick'></img>"+"<span class='wcIconSearch' title='${SEARCH_TOOLTIP}'"+"dojoAttachPoint='domSearchButton'"+"dojoAttachEvent='onclick:onSearchButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span>"+"<span class='wcIconSearchAdd' title='${ADD_ITEM_CTRL_ENTER}'"+"dojoAttachPoint='domSearchAddButton'"+"dojoAttachEvent='onclick:onSearchAddButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span>"+'</div>'+"<div class='SearchResults' dojoAttachPoint='domResults' dojoAttachEvent='onclick:onListItemClick'></div>"+'</div>';tab.SearchWidget.initializeBase(this);}
tab.SearchWidget.prototype={domQuerySection:null,domQueryBox:null,domSearchAddButton:null,domSearchButton:null,domSearchBusyImg:null,domResults:null,applyDelay:500,$1_1:100,_bSearching:false,_queryBoxPasteTimeout:null,_searchTimer:null,_isFilterSearchable:false,_initializedSearchResults:false,_domResultsPBExtents:null,_lastRemoteSearch:null,get_asMixin:function(){return this;},get_applyDelay:function(){return this.applyDelay;},postCreate:function(){this.inherited(arguments);if(this._isTypeInList){this.showUI(true);}this._isFilterSearchable=true;if(!!this.get_qf()&&this._isTypeInList){this._isFilterSearchable=this.get_qf().get_oFilter().is_searchable;}if(this._isFilterSearchable){this.domSearchAddButton.title=this.ADD_ITEM_CTRL_ENTER;}else{this.domSearchAddButton.title=this.ADD_ITEM_ENTER;}this.setQueryIconsVisibility(true);tableau.util.disableTextSelection(this.domResults);},destroy:function($p0){if(ss.isValue(this.domResults)){this.domResults.innerHTML='';}this.inherited(arguments);},onQueryBoxPaste:function($p0){if(!!this._queryBoxPasteTimeout){window.clearTimeout(this._queryBoxPasteTimeout);this._queryBoxPasteTimeout=null;}this._queryBoxPasteTimeout=window.setTimeout(ss.Delegate.create(this,this._handleQueryBoxPaste),10);},_handleQueryBoxPaste:function(){var $0;var $1;$1=this.getQuery();$1=$1.replace('/\r\n/g','\n');$0=$1.split('\n');if($0.length>1){this.addManualSearchItems($0);}},getOnQueryBoxKeyDownBehavior:function(keyEvent){var $0;$0=this.inherited(arguments);switch(keyEvent.keyCode){case dojo.keys.ESCAPE:if(dojo.isFF){$0.functionToCall=ss.Delegate.create(this,this.onXButtonClick);}break;case dojo.keys.ENTER:if(this._isTypeInList){$0.stopEvent=true;$0.functionToCall=this._getEnterKeyDownBehaviorOnTypeInList(keyEvent);}break;}return $0;},_getEnterKeyDownBehaviorOnTypeInList:function($p0){if($p0.ctrlKey){return ss.Delegate.create(this,this.onSearchAddButtonClick);}if(this._isFilterSearchable){return ss.Delegate.create(this,this.onSearchButtonClick);}return ss.Delegate.create(this,this.onSearchAddButtonClick);},handleNonCommandKeyDown:function(evt){this.inherited(arguments);if(this._isTypeInList){this.clearSearch(true);}if(!this._isTypeInList){this.$1_5();}},onSearchAddButtonClick:function(evt){this.addManualSearchItems(null);},onSearchButtonClick:function(evt){this.doSearch();},onSearchBusyImgClick:function(evt){this.$1_6();},focusQueryBox:function(){this.domQueryBox.focus();},blurQueryBox:function(){this.domQueryBox.blur();},getQuery:function(){return this.domQueryBox.value;},setQuery:function(value){this.domQueryBox.value=value;},showUI:function(noLayout){if(this.get_isVisible()){return;}if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.CategoricalFilter'&&!this.get_qf().get_oFilter().table.tuples.length&&!this._isTypeInList){return;}this.inherited(arguments);},clearSearch:function(preserveQueryBoxText,noFocus){this.inherited(arguments);dojo.style(this.domResults,'display','none');this.domResults.innerHTML='';this.get_asMixin().clearRangeAnchorAndSelection();this.$1_6();},setQueryIconsVisibility:function(initialLoad){var $0=this._isTypeInList;var $1=(!!initialLoad&&initialLoad)?false:tableau.util.isElementVisible(this.domResults);var $2=(!String.isNullOrEmpty(this.getQuery())&&$0&&!$1);var $3=$2;var $4=($2&&this._isFilterSearchable);dojo.style(this.domSearchBusyImg,'display',($4&&this._bSearching)?'block':'none');dojo.style(this.domSearchButton,'display',($4&&!this._bSearching)?'block':'none');dojo.style(this.domSearchAddButton,'display',($3)?'block':'none');var $5=($0&&!$1)?'none':'block';dojo.style(this.get_domXButton(),'display',$5);this.fixQueryWidth();},fetchChildNodeByIndex:function(index){var $0=this.domResults.childNodes;for(var $1=0,$2=$0.length;$1<$2;$1++){if(tableau.FilterItem.getIndex($0[$1])===index){return $0[$1];}}return null;},layout:function(listHeight){this.setQueryIconsVisibility();var $0=this.$1_4();if(this._isTypeInList||this.get_qf().get_mode()==='checkdropdown'){this.$1_2($0);}else if(!!$0){this.$1_3(listHeight/$0,$0);}},fixQueryWidth:function(){var $0=tableau.util.isElementVisible(this.get_domXButton());var $1=tableau.util.isElementVisible(this.domSearchAddButton);var $2=tableau.util.isElementVisible(this.domSearchButton);var $3=tableau.util.isElementVisible(this.domSearchBusyImg);var $4=0;if($0){$4+=dojo.marginBox(this.get_domXButton()).w;}if($1){$4+=dojo.marginBox(this.domSearchAddButton).w;}if($2){$4+=dojo.marginBox(this.domSearchButton).w;}if($3){$4+=dojo.marginBox(this.domSearchBusyImg).w;}dojo.marginBox(this.domQueryBox,{w:dojo.contentBox(this.domQuerySection).w-$4});},$1_2:function($p0){var $0=dojo.query('.wcVizDisplay')[0];if(!this._initializedSearchResults){this._initializedSearchResults=true;$0.appendChild(this.domResults);dojo.style(this.domResults,{position:'absolute',zIndex:'987'});this._domResultsPBExtents=dojo._getPadBorderExtents(this.domResults);}var $1=dojo.coords(this.domQuerySection);var $2=$(this.domQuerySection).offset();var $3=$($0).offset();var $4=$2.top-$3.top;var $5=$4+$1.h;var $6=dojo.coords($0);var $7=$6.t+$6.h;var $8=$p0+this._domResultsPBExtents.h;var $9=(this.domResults.childNodes.length*$p0)+this._domResultsPBExtents.h;var $A=$7-$5;var $B=$4-$6.t;var $C=true;var $D=Math.min($9,$A);if($D<$8&&$B>$A){$D=Math.min($9,$B);$C=false;}$D=Math.max($D,$8);dojo.marginBox(this.domResults,{w:$1.w,h:$D});var $E=($C)?$5:$4-$D;var $F=$2.left-$3.left;dojo.style(this.domResults,{top:$E.toString()+'px',left:$F.toString()+'px',borderTopWidth:($C)?'0':'1px',borderBottomWidth:($C)?'1px':'0'});},$1_3:function($p0,$p1){var $0=Math.max(this.domResults.childNodes.length,1);var $1=Math.min($0,Math.floor($p0/2));dojo.style(this.domResults,'height',($1*$p1).toString()+'px');},$1_4:function(){if(!!this.domResults.firstChild){if(!!this.domResults.firstChild.offsetHeight&&!!this.domResults.firstChild.offsetHeight){return this.domResults.firstChild.offsetHeight;}else{return 15;}}return 0;},$1_5:function(){if(!!this._searchTimer){window.clearTimeout(this._searchTimer);this._searchTimer=null;}this._searchTimer=window.setTimeout(ss.Delegate.create(this,this.doSearch),this.searchDelay);},showSearchSpinner:function(show){this._bSearching=show;this.setQueryIconsVisibility();},addManualSearchItems:function(items){if(this.get_qf().get_dijitDeclaredClass()!=='tableau.base.widget.CategoricalFilter'){return;}if(tab.MiscUtil.isNullOrUndefined(items)){items=this.getQuery().split('\n');}if(tab.MiscUtil.isNullOrEmpty(items)){return;}var $0=[];for(var $2=0,$3=items.length;$2<$3;$2++){var $4=items[$2];if(!tab.MiscUtil.isNullOrEmpty($4)){$0.push(tab.$create_TupleStruct($4,true,[tab.$create_DataValueStruct('s',$4)]));}}var $1={};$1.schema=this.get_qf().get_oFilter().table.schema;$1.tuples=$0;this.notifyParentFilterOfChanged($1,true);this.clearSearch();},doSearch:function(){this.searchWithQuery(this.getQuery());},updateSearch:function(){if(this.get_isVisible()&&this.resultCount>0){this.searchWithQuery(this.getQuery());}},searchWithQuery:function(query){if(query.length<=0){this.clearSearch();}else if(this.get_qf().get_dijitDeclaredClass().indexOf('CategoricalFilter')>-1&&!this._isTypeInList){if(this.get_qf().get_oFilter().isTiled&&this.get_qf().get_dijitDeclaredClass().indexOf('CategoricalFilterMobile')<0){this.doRemoteSearch(query,true);}else{this.handleSearchResults(this.doCategoricalSearch(query));}}else{this.doRemoteSearch(query,false);}},doCategoricalSearch:function(query){var $0=this.get_qf().get_oFilter();var $1=this.isSingleSelect();var $2=this.makeUniqueSearchItemIdPrefix();var $3=($1)?([]).concat(tableau.FilterItem.radioArray):([]).concat(tableau.FilterItem.checkboxArray);return tab.LocalSearch.findMatches(query,$0,ss.Delegate.create(this,this.formatTuple),$2,ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
return tableau.FilterItem.getSearchResultHTML(this.get_qf().get_mode(),$3,$p1_2,($1)?$2:$p1_2,$p1_1,$p1_0.s,$0.all);}));},doRemoteSearch:function(query,shouldGetIndex){this.showSearchSpinner(this._isTypeInList);this._lastRemoteSearch=this.doAjaxRemoteSearch(query,this.$1_1,shouldGetIndex,ss.Delegate.create(this,this.handleSearchResults),ss.Delegate.create(this,this.handleSearchResultsError));},$1_6:function(){if(!!this._lastRemoteSearch){this._lastRemoteSearch.abort();this._lastRemoteSearch=null;}this.showSearchSpinner(false);},$1_7:function($p0,$p1,$p2){var $0=tableau.format.escapeHTML;if(!ss.isNullOrUndefined($p2)&&$p1<$p2){var $1=$p2-$p1;$p0.push('<div class="searchResultsRemaining">');if(!$1){$p0.push($0(tab.Strings.QuickFilterSearchResultsNotShownZero));}else if($1===1){$p0.push($0(tab.Strings.QuickFilterSearchResultsNotShownSingular));}else{var $2=tableau.format.formatIntAuto($1,'t',',','3;0');$p0.push($0(tab.Strings.QuickFilterSearchResultsNotShownPlural($2)));}$p0.push('</div>');}},$1_8:function($p0){if($p0.length<=0){return ([]);}this.set_oResults($p0);var $0=this.get_oResults().tuples;var $1=this.get_oResults().indices;var $2=[];var $3=this.isSingleSelect();var $4=this.get_qf().get_oFilter();var $5='SI_'+$4.name;if(!!this.get_qf().get_session()){$5+=this.get_qf().get_session().get_viewId();}var $6=($3)?([]).concat(tableau.FilterItem.radioArray):([]).concat(tableau.FilterItem.checkboxArray);for(var $7=0,$8=$0.length;$7<$8;$7++){var $9=(!!$1)?$1[$7]:$7;var $A=$5+'_'+$9;var $B=this.formatTuple($0[$7]);var $C=tableau.FilterItem.getSearchResultHTML(this.get_qf().get_mode(),$6,$A,($3)?$5:$A,$B,$0[$7].s,$4.all&&!this._isTypeInList);$2.push($C);}this.$1_7($2,$0.length,$p0.actual_size);return $2;},handleSearchResults:function(data){var $0=tableau.format.escapeHTML;var $1=tab.Strings.QuickFilterSearchNoMatches;this.showSearchSpinner(false);if(!!data&&data.dojoType==='cancel'){return;}this.domResults.innerHTML='';if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.HierarchicalFilter'||this._isTypeInList||this.get_qf().get_oFilter().isTiled){if(!!data.schema[0].collation&&!data.schema[0].collation.f){$1='<div>'+$0($1)+'<br/>'+$0(tab.Strings.QuickFilterSearchDataIsCaseSensitive)+'</div>';}data=this.$1_8(data);}this.resultCount=data.length;this.domResults.innerHTML=(this.resultCount>0)?data.join(''):$1;dojo.style(this.domResults,'display',(this.domResults.innerHTML.length>0)?'block':'none');this.setQueryIconsVisibility();this.get_qf().layout();this.get_asMixin().refreshRangeAnchorAndSelection();},handleSearchResultsError:function(response){this.showSearchSpinner(false);this.domResults.innerHTML='';this.resultCount=0;},applyChanges:function(){var $0=null;if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.CategoricalFilter'&&!this._isTypeInList){$0=this.applyChangesCat();}else{$0=this.applyChangesHierOrTypeIn();}this.notifyParentFilterOfChanged($0);},applyChangesByChangelist:function(changelist){if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.CategoricalFilter'&&!this._isTypeInList){this.get_qf().applyChangesByChangelist(changelist);}else{this.applyChanges();}},notifyParentFilterOfChanged:function(changed,manualAdd,noServerCall){if(!changed.tuples.length){return;}this.get_qf().updateStateFromSearch(changed);if(noServerCall){return;}this.get_qf().set_stateId(this.get_qf().get_stateId()+1);if(manualAdd){var $0=ss.Delegate.create(this,this.onManualAddSuccess);this.get_qf().get_session().addManualFilterItems(changed,this.get_qf(),$0);}else{var $1=this.isTypeInAll();if($1||this.get_qf().isSingleSelect()){this.doSetCategoricalFilter($1,changed);}else{if(this.get_qf().get_dijitDeclaredClass()==='tableau.base.widget.HierarchicalFilter'){this._doModifyHierarchialFilter(changed);}else{this.doModifyCategoricalFilter(changed);}}}},doSetCategoricalFilter:function(isTypeInAll,changed){var $0;var $1=[];var $2=changed.tuples.length;if(isTypeInAll){for(var $3=0;$3<$2;$3++){$0=(changed.tuples[$3].d||changed.tuples[$3].t[0].v);if(changed.tuples[$3].s){$1.push($0);}}}else{$0=(changed.tuples[0].d||changed.tuples[0].t[0].v);$1.push($0);}tab.FilterClientCommands.setCategoricalFilterValues(this.get_qf().get_session().get_sheetName(),this.get_qf().get_field(),'filter-replace',$1);},doModifyCategoricalFilter:function(changed){var $0=[];var $1=[];var $2=changed.tuples.length;for(var $3=0;$3<$2;$3++){var $4=(changed.tuples[$3].d||changed.tuples[$3].t[0].v);if(changed.tuples[$3].s){$0.push($4);}else{$1.push($4);}}tab.FilterClientCommands.modifyCategoricalFilterValues(this.get_qf().get_session().get_sheetName(),this.get_qf().get_field(),$0,$1);},_doModifyHierarchialFilter:function($p0){var $0=[];var $1=[];var $2='filter-delta';var $3=$p0.tuples.length;var $4=$p0.tuples;for(var $5=0;$5<$3;$5++){var $6=$4[$5].t.length;var $7='';for(var $8=0;$8<$6;++$8){var $9=$4[$5].t[$8];if(!!$9.v){$7=$9.v;}}if($4[$5].s){$0.push($7);}else{$1.push($7);}}tab.FilterClientCommands.doMemberHierarchialFilter(this.get_qf().get_session().get_sheetName(),this.get_qf().get_field(),$0,$1,$2);},isTypeInAll:function(){return this._isTypeInList&&this.get_qf().get_modeContents().isAll;},applyChangesCat:function(){var $0={};$0.schema=this.get_qf().get_oFilter().table.schema;$0.tuples=[];var $1=this.domResults.firstChild;var $2=this.domResults.childNodes.length;var $3;var $4=this.get_qf().get_oFilter().table.tuples;if(this.get_qf().isSingleSelect()){for(var $5=0;$5<$2;$5++,$1=$1.nextSibling){if(tableau.FilterItem.isChecked($1)){$3=tableau.FilterItem.getIndex($1);this.get_asMixin().recordCheckedChanges($0,$1,$4[$3]);for(var $6=0;$6<$4.length;++$6){if($6!==$3){$4[$6].s=false;}}break;}}}else{var $7=[];for(var $9=0;$9<$2;$9++,$1=$1.nextSibling){$3=tableau.FilterItem.getIndex($1);this.get_asMixin().recordCheckedChanges($0,$1,$4[$3]);$7[$3]=1;}$1=this.get_qf().get_domContent().firstChild;if(tableau.FilterItem.isAllItem($1)){$1=$1.nextSibling;}var $8=$4.length;for(var $A=0;$A<$8;$A++,$1=$1.nextSibling){if(!$7[$A]){this.get_asMixin().recordCheckedChanges($0,$1,$4[$A]);}}}return $0;},applyChangesHierOrTypeIn:function(){var $0={};$0.schema=this.get_oResults().schema;$0.tuples=[];var $1=this.domResults.firstChild;var $2=this.get_oResults().tuples;for(var $3=0,$4=$2.length;$3<$4;$3++,$1=$1.nextSibling){this.get_asMixin().recordCheckedChanges($0,$1,$2[$3]);}return $0;},onManualAddSuccess:function(response){var $0=tableau.format.escapeHTML;var $1=response.invalidTuples;var $2=$1.length;if(ss.isNullOrUndefined(response)||ss.isNullOrUndefined(response.invalidTuples)||ss.isNullOrUndefined(response.totalTuples)){return false;}if($2>0){var $3=[];if($2===1){$3.push($0(tab.Strings.QuickFilterSearchInvalidDataMemberSingular($1[0].t[0].v)));$3.push('<br/>');}else{$3.push($0(tab.Strings.QuickFilterSearchInvalidDataMembersPlural));$3.push('<br/>');for(var $6=0;$6<$2;$6++){$3.push('&nbsp;&nbsp;&nbsp;&nbsp;&bull;&nbsp;');$3.push($1[$6].t[0].v);$3.push('<br/>');}}tableau.util.showAlertDialog($3.join(''),tab.Strings.QuickFilterSearchInvalidDataMembersDialogTitle);var $4=[];for(var $7=0;$7<$2;$7++){var $8=$1[$7].t[0].v;$4.push(tab.$create_TupleStruct($8,false,$1[$7].t));}var $5={};$5.schema=this.get_qf().get_oFilter().table.schema;$5.tuples=$4;this.notifyParentFilterOfChanged($5,true,true);}return response.totalTuples>$2;}}
tab.ShareDialog=function(dialogParams){this.templateString="<div class='dijitDialog dijitContentPane'>"+"<div dojoAttachPoint='titleBar' class='dijitDialogTitleBar'>"+"<span dojoAttachPoint='titleNode' class='dijitDialogTitle' id='${id}_title'></span>"+"<span dojoAttachPoint='closeButtonNode' class='dijitDialogCloseIcon' dojoAttachEvent='onclick: onCancel' title='${buttonCancel}'>"+"<span dojoAttachPoint='closeText' class='closeText' title='${buttonCancel}'>x</span>"+'</span>'+'</div>'+"<div dojoattachpoint='containerNode' class='dijitDialogPaneContent'>"+"<div class='shareVizTable'>"+"<div class='shareVizHeader'>"+"<span class='shareVizTitle'>${_locDialogTitle}</span>"+"<a class='shareVizHeaderLink' href='/' id='share_header_link' tabindex='-1' "+"target='_blank'><img id='share_header_logo'/> </a>"+'</div>'+"<table class='shareInnerTable'>"+'<tr>'+"<td align='right'>"+"<div class='displayOptions'>"+"<span id='displayOptionsHeader' class='closed' href='/' onclick='tab.ShareDialogUtil.showPopup(); return false;'  onfocus='blur();' tabindex='-1'></span>"+"<span id='superimposedText' class='closed' href='/' onclick='tab.ShareDialogUtil.showPopup(); return false;'>${_locDisplayOptions}</span>"+"<div id='optionsPopup'>"+"<form action='' id='optionsPopupForm' class='selectShareVizOptions'><fieldset style='border:none; margin:0; padding:5px;'><table width='135' border='0' cellspacing='0' cellpadding='0'>"+'<tr>'+"<td><label for='share_width'>${_locWidth}</label></td>"+"<td><input id='share_width' size='5' "+"class='' type='text' name='share_width' title='width' value='425' alt='width' "+"constraints=\"{min:1,max:9999,places:0,pattern:'###0.##'}\" "+"promptMessage= '${_locEnterValueBetween}' "+"required= 'true' "+"tooltipPosition = ['TL':'BL'] "+"invalidMessage= '${_locInvalidWidth}' "+"onkeyup=\"tab.ShareDialogUtil.validateReasonableDimension('share_width', false);\" "+"onblur=\"tab.ShareDialogUtil.validateReasonableDimension('share_width', true);\" "+'/>'+'</td>'+'</tr>'+'<tr>'+"<td><label for='share_height'>${_locHeight}</label></td>"+"<td><input id='share_height' size='5' "+"class='' type='height' name='share_height' title='height' value='350' alt='height' "+"constraints=\"{min:1,max:9999,places:0,pattern:'###0.##'}\" "+"promptMessage= '${_locEnterValueBetween}' "+"required= 'true' "+"tooltipPosition = ['TL':'BL'] "+"invalidMessage= '${_locInvalidHeight}' "+"onkeyup=\"tab.ShareDialogUtil.validateReasonableDimension('share_height', false);\" "+"onblur=\"tab.ShareDialogUtil.validateReasonableDimension('share_height', true);\" "+'/></td>'+'</tr>'+"<tr id='shareShowToolbar'>"+"<td colspan='2'>"+"<label for='share_toolbar' id='share_toolbar_label' class=''>${_locShowToolbar}</label>"+"<input type='checkbox' id='share_toolbar' "+"name='share_toolbar' class='' value='' alt='${_locShowToolbar}' "+"onclick='tab.ShareDialogUtil.doUpdateGenerated();'"+'/></td>'+'</tr>'+"<tr id='shareShowTabs'>"+"<td colspan='2' style='padding-bottom:10px;'>"+"<label id='show_tabs_label' for='show_tabs' class=''>${_locShowTabs}</label>"+"<input type='checkbox' id='show_tabs' "+"name='show_tabs' class='' value='' alt='${_locShowTabs}' "+"onclick='tab.ShareDialogUtil.doUpdateGenerated();'"+'/></td>'+'</tr>'+"<tr id='share_rss_blog_row'>"+"<td colspan='2'>"+"<label style='font-family:Arial, Helvetica, sans-serif; font-weight:normal;' for='share_blog'>${_locUrlForRssLinks}</label><br"+"/><input style='outline:none; margin-bottom:0; width:119px;  font-weight:normal;' id='share_blog' class='' type='text' name='share_blog' title='${_locUrlForRssLinks}' value='' alt='${_locUrlForRssLinks}' promptMessage= '${_locEnterUriForBlogEntry}' required= 'optional' maxLength='255' maxlength='255' onblur='tab.ShareDialogUtil.doUpdateGenerated();'"+'/></td>'+'</tr>'+'</table>'+'</fieldset>'+'</form>'+'</div>'+'</div>'+'</td>'+'</tr>'+"<tr class='share_mobile_only' style='display:none'>"+'<td>'+"<div class='shareVizOption'>${_locLink}</div>"+"<table class='shareVizHelpText'>"+'<tr>'+'<td>'+"<a href='mailto:' id='share_mailto_a' class='tableau wcIconMail'></a>"+'</td><td>'+'${_locShareMobileEmailText}'+'</td>'+'</tr><tr>'+'<td>'+"<a target='_blank' id='share_link_a' class='tableau wcIconLink'></a>"+'</td><td>'+'${_locShareMobileLinkText}'+'</td>'+'</tr>'+'</table>'+'</td>'+'</tr>'+"<tr class='share_web_only'>"+'<td>'+"<span class='shareVizOption'>${_locEmail}</span>"+"<br /><span class='shareVizHelpText'>${_locEmailHelp}</span>"+"<br/><input id='share_link_textbox' class='emailVizURL' readonly='readonly' onclick='this.focus();this.select();return false;'/>"+'</td>'+'</tr>'+'<tr>'+'<td>'+"<span class='shareVizOption'>${_locEmbed}</span>"+"<br /><span class='shareVizHelpText'>${_locEmbedHelp}</span>"+"<br/><input id='share_embed_textbox' class='embedViz' readonly='readonly' onclick='this.focus();this.select();return false;'/>"+'</td>'+'</tr>'+'<tr>'+'<td>'+"<div style='white-space: nowrap;'>"+"<button class='tab-styledButton' onclick='tab.ShareDialogUtil.hideShareDialog(); return false;'>"+"<span class='tab-styledButtonLeft'></span>"+"<span class='tab-styledButtonMiddle'>${_locDone}</span>"+"<span class='tab-styledButtonRight'></span>"+'</button>'+"<span id='dimension_warning' style='font-family:Arial, Helvetica, sans-serif; font-size:10px; font-weight:normal; visibility:hidden; color:red; margin-left:10px;'>${_locPleaseEnterIntegerBetween}</span>"+'</div>'+'</td>'+'</tr>'+'</table>'+'</div><!-- end shareVizTable -->'+'</div>'+'</div>';tab.ShareDialog.initializeBase(this);this._loadLocalizedStrings();}
tab.ShareDialog.prototype={_locDialogTitle:null,_locDisplayOptions:null,_locWidth:null,_locHeight:null,_locInvalidWidth:null,_locInvalidHeight:null,_locEnterValueBetween:null,_locShowToolbar:null,_locShowTabs:null,_locUrlForRssLinks:null,_locEnterUriForBlogEntry:null,_locShareMobileLinkText:null,_locShareMobileEmailText:null,_locLink:null,_locEmail:null,_locEmailHelp:null,_locEmbed:null,_locEmbedHelp:null,_locDone:null,_locPleaseEnterIntegerBetween:null,_position:function(){var $0=$('.wcShareButton');if(!$('body').hasClass('Dojo.Ove')&&$0.length>0){dijit.placeOnScreenAroundElement(this.domNode,$0.get(0),{TL:'BL',BL:'TL'});}},_loadLocalizedStrings:function(){var $0=tableau.format.escapeHTML;this._locDialogTitle=$0(tab.Strings.ShareDialogTitle);this._locDisplayOptions=$0(tab.Strings.ShareDialogDisplayOptions);this._locWidth=$0(tab.Strings.ShareDialogWidth);this._locHeight=$0(tab.Strings.ShareDialogHeight);this._locInvalidWidth=$0(tab.Strings.ShareDialogInvalidWidth);this._locInvalidHeight=$0(tab.Strings.ShareDialogInvalidHeight);this._locEnterValueBetween=$0(tab.Strings.ShareDialogEnterValueBetween(1,10000));this._locShowToolbar=$0(tab.Strings.ShareDialogShowToolbar);this._locShowTabs=$0(tab.Strings.ShareDialogShowTabs);this._locUrlForRssLinks=$0(tab.Strings.ShareDialogUrlForRssLinks);this._locEnterUriForBlogEntry=$0(tab.Strings.ShareDialogEnterUriForBlogEntry);if(tab.BrowserSupport.get_isAndroid()){this._locShareMobileLinkText=$0(tab.Strings.ShareDialogAndroidLinkText);}else{this._locShareMobileLinkText=$0(tab.Strings.ShareDialogMobileLinkText);}this._locShareMobileEmailText=$0(tab.Strings.ShareDialogMobileEmailText);this._locLink=$0(tab.Strings.ShareDialogLink);this._locEmail=$0(tab.Strings.ShareDialogEmail);this._locEmailHelp=$0(tab.Strings.ShareDialogEmailHelp);this._locEmbed=$0(tab.Strings.ShareDialogEmbed);this._locEmbedHelp=$0(tab.Strings.ShareDialogEmbedHelp);this._locDone=$0(tab.Strings.ShareDialogDoneButton);this._locPleaseEnterIntegerBetween=$0(tab.Strings.ShareDialogPleaseEnterIntegerBetween(1,10000));}}
tab.ShareDialogUtil=function(){}
tab.ShareDialogUtil.get_$3=function(){return (!!tsConfig.single_frame)?window.location:window.parent.location;}
tab.ShareDialogUtil.$4=function($p0){if(!!window.parent&&tab.BrowserSupport.get_postMessage()){var $0={tableau:{shareUrl:$p0}};window.parent.postMessage(dojo.toJson($0),'*');}}
tab.ShareDialogUtil.$5=function($p0,$p1,$p2,$p3,$p4){var $0;var $1=$p0;$0=($p1!==$p2);var $2=new RegExp($p3);if(!!$1.match($2)){if($0){$1=$1.replace($2,$p4);}else{$1=$1.replace($2,'');$1=$1.replace(new RegExp('&&'),'&');$1=$1.replace(new RegExp('\\?&'),'?');$1=$1.replace(new RegExp('&$'),'');$1=$1.replace(new RegExp('\\?$'),'');}}else{if($0){if(!!$1.match(new RegExp('[?]'))){$1=$1+'&'+$p4;}else{$1=$1+'?'+$p4;}}}return $1;}
tab.ShareDialogUtil.getShareUrl=function(uri,vizParameterInfo){var $0=vizParameterInfo;var $1=':tabs='+(($0.show_tabs)?'yes':'no');var $2=':tabs=[^&]+';var $3=':display_count='+(($0.show_view_count)?'yes':'no');var $4=':display_count=[^&]+';var $5=':toolbar='+(($0.toolbar)?'yes':'no');var $6=':toolbar=[^&]+';uri=tab.ShareDialogUtil.$5(uri,$0.toolbar,$0.toolbar_default,$6,$5);uri=tab.ShareDialogUtil.$5(uri,$0.show_tabs,$0.show_tabs_default,$2,$1);uri=tab.ShareDialogUtil.$5(uri,$0.show_view_count,$0.show_view_count_default,$4,$3);return uri;}
tab.ShareDialogUtil.doUpdateGeneratedInner=function(){var $0;var $1;var $2=tableau.format.escapeHTML;var $3=tab.$create_LinkBlurbPair();var $4=tab.ShareDialogUtil.share_settings;var $5=$4.share_blog.value;var $6=$4.requestURI;var $7=$4.share_width.value;var $8=$4.share_height.value;var $9=$4.title;var $A=$4.static_image;var $B=$4.beaker;var $C=$4.search;var $D=$4.controller_id;var $E=$4.is_stateful_url;var $F=$4.api_url;var $10=$4.site_root;var $11=$6;var $12=$4.vizParameterInfo;$12.toolbar=$4.share_toolbar.checked;$12.show_tabs=$4.show_tabs.checked;$3.http_link=tab.ShareDialogUtil.getShareUrl($11,$4.vizParameterInfo);$1=parseInt($7,10);$0=parseInt($8,10);$1+=4;$0+=4;if($12.toolbar||$B){$0+=32;}if($12.show_tabs){$0+=26;}if($B){$0+=33;}if($F.indexOf('http://')===-1&&$F.indexOf('https://')===-1){$F=tab.ShareDialogUtil.get_$3().protocol+'//'+tab.ShareDialogUtil.get_$3().host+$F;}var $13="width='"+$1+"' height='"+$0+"'";var $14="<script type='text/javascript' src='"+$F+"'></script>";var $15="<object class='tableauViz' "+$13+" style='display:none;'>";var $16={};$16['embed']=1;$16['toolbar']=1;$16['preview']=1;$16['show_tabs']=1;$16['tabs']=1;$16['host_url']=1;$16['loadOrderID']=1;$15+="<param name='host_url' value='"+$2(encodeURIComponent((tab.ShareDialogUtil.get_$3().protocol+'//'+tab.ShareDialogUtil.get_$3().host+'/')))+"' /> ";if(!$E){$15+="<param name='site_root' value='"+$2($10)+"' />";$16['site_root']=1;$15+="<param name='name' value='"+$2($D)+"' />";$16['name']=1;}if($E){var $1C=$3.http_link.split('?')[0];$15+="<param name='path' value='"+$2($1C.replaceAll(tab.ShareDialogUtil.get_$3().protocol+'//'+tab.ShareDialogUtil.get_$3().host+'/',''))+"' / > ";$16['path']=1;}if(!$E){$15+="<param name='tabs' value='"+(($12.show_tabs)?'yes':'no')+"' />";}$15+="<param name='toolbar' value='"+(($12.toolbar)?'yes':'no')+"' />";if($B){if(!tab.MiscUtil.isNullOrEmpty($A)){var $1D=$A.replaceAll('_rss.png','.png');$15+="<param name='static_image' value='"+$2($1D)+"' / > ";}$15+="<param name='animate_transition' value='yes' />";$15+="<param name='display_static_image' value='yes' />";$15+="<param name='display_spinner' value='yes' />";$15+="<param name='display_overlay' value='yes' />";$15+="<param name='display_count' value='yes' />";$16['animate_transition']=1;$16['display_static_image']=1;$16['display_spinner']=1;$16['display_overlay']=1;$16['display_count']=1;}if($C.length>0){var $1E=$C.substr(1).split('&');for(var $1F=0;$1F<$1E.length;$1F++){var $20=$1E[$1F].match(new RegExp('^:([^=]+)=(.+)'));var $21;var $22;if(!!$20&&$20.length===3){$21=$20[1];$22=$20[2];}else{$21='filter';$22=$1E[$1F];}if(!tab.MiscUtil.isNullOrEmpty($21)&&$16[$21]!==1){$15+="<param name='"+$2($21)+"' value='"+$2($22)+"' />";}}}$15+='</object>';var $17=$5||'#';var $18='';if(!tab.MiscUtil.isNullOrEmpty($A)){$18="<noscript><a href='"+$2($17)+"'>"+"<img alt='"+$2($9)+" ' src='"+$2($A)+"' style='border: none' /></a></noscript>";}var $19=$6.split('?')[0];var $1A=String.format("<div class='tableauPlaceholder' style='width: {0}px; height: {1}px;'>{2}{3}</div>",$1,$0,$18,$15);var $1B=String.format("<div style='width:{0}px;height:22px;padding:0px 10px 0px 0px;"+"color:black;font:normal 8pt verdana,helvetica,arial,sans-serif;'>"+"<div style='float:right; padding-right:8px;'>"+"<a href='{1}?ref={2}' target='_blank'>{3}</a></div></div>",$1,tsConfig.embedCodeTableauLink,$19,$2(tab.Strings.ShareDialogEmbedCodeTableauText));$3.html_blurb=$14+$1A;if($B){$3.html_blurb+=$1B;}if($E&&(0===$6.length)){$3.http_link=tab.ShareDialogUtil.$0;$3.html_blurb=tab.ShareDialogUtil.$1;}if($E&&$6.length>0&&tab.ShareDialogUtil.share_settings.lastShareUrl!==$3.http_link){tab.ShareDialogUtil.share_settings.lastShareUrl=$3.http_link;tab.ShareDialogUtil.$4($3.http_link);}return $3;}
tab.ShareDialogUtil.doUpdateGenerated=function(){var $0=tab.ShareDialogUtil.share_settings;var $1=tab.ShareDialogUtil.doUpdateGeneratedInner();$0.share_mailto_a.href='mailto:?body='+encodeURIComponent($1.http_link);$0.share_link_a.href=$1.http_link;$0.share_link_textbox.value=$1.http_link;$0.share_embed_textbox.value=$1.html_blurb;if(tsConfig.is_mobile){$0.share_mobile_only.style('display','');$0.share_web_only.style('display','none');$0.share_embed_textbox.removeAttribute('readonly');}$0.width=$0.share_width.value;$0.height=$0.share_height.value;$0.blog=$0.share_blog.value;}
tab.ShareDialogUtil.setupShareDialogCommon=function(opts){var $0=tab.ShareDialogUtil.share_settings;$0.share_width.value=opts.width;$0.share_height.value=opts.height;$0.requestURI=opts.request;$0.share_blog.value=(!ss.isUndefined(opts.blog))?opts.blog:'';$0.title=opts.title;$0.beaker=opts.beaker;$0.search=opts.search;$0.static_image=opts.static_image;$0.controller_id=opts.controller_id;$0.watermark_link=opts.watermark_link;$0.toolbar_bottom=opts.toolbar_bottom;$0.watermark_image=opts.watermark_image;$0.share_header_link.title=opts.server_name;$0.share_header_logo.src=opts.server_logo;$0.is_stateful_url=opts.is_stateful_url;$0.api_url=opts.api_url;$0.site_root=opts.site_root;$0.vizParameterInfo=opts.vizParameterInfo;$0.share_toolbar.checked=$0.vizParameterInfo.toolbar;$0.show_tabs.checked=$0.vizParameterInfo.show_tabs;if(!opts.tabs_allowed){$0.show_tabs_label.style.visibility='hidden';$0.show_tabs.style.visibility='hidden';}if(!!!opts.static_image||String.isNullOrEmpty(opts.static_image)){$0.share_rss_blog_row.style.display='none';}if(opts.is_stateful_url){$0.show_tabs_label.style.display='none';$0.show_tabs.style.display='none';}tab.ShareDialogUtil.doUpdateGenerated();}
tab.ShareDialogUtil.$6=function($p0){if(!$p0.length){return false;}for(var $0=0;$0<$p0.length;$0++){var $1=$p0.charAt($0);if(($1>'9')||($1<'0')){return false;}}return true;}
tab.ShareDialogUtil.$7=function($p0){while(!!$p0.parentNode){if($p0===tab.ShareDialogUtil._popup){return false;}$p0=$p0.parentNode;}return true;}
tab.ShareDialogUtil.pushShareFieldsToParent=function(){try{if(!!window.parent&&('beaker' in window.parent)&&(typeof(window.parent.beaker.setupShareFields)==='function')){window.parent.beaker.setupShareFields({embed:tab.ShareDialogUtil.share_settings.share_embed_textbox.value,link:tab.ShareDialogUtil.share_settings.share_link_textbox.value});}}catch($0){}}
tab.ShareDialogUtil.setupShareDialog=function(options){var $0=tab.ShareDialogUtil.share_settings;var $1=dojo.byId('share_dialog');$0.share_width=dojo.byId('share_width');$0.share_height=dojo.byId('share_height');$0.share_toolbar=dojo.byId('share_toolbar');$0.share_mailto_a=dojo.byId('share_mailto_a');$0.share_mobile_only=dojo.query('.share_mobile_only',$1);$0.share_web_only=dojo.query('.share_web_only',$1);$0.share_link_textbox=dojo.byId('share_link_textbox');$0.share_link_a=dojo.byId('share_link_a');$0.share_embed_textbox=dojo.byId('share_embed_textbox');$0.share_blog=dojo.byId('share_blog');$0.dimension_warning=dojo.byId('dimension_warning');$0.share_header_link=dojo.byId('share_header_link');$0.share_header_logo=dojo.byId('share_header_logo');$0.share_rss_blog_row=dojo.byId('share_rss_blog_row');$0.show_tabs=dojo.byId('show_tabs');$0.show_tabs_label=dojo.byId('show_tabs_label');$0.show_toolbar=dojo.byId('share_toolbar');$0.show_toolbar_label=dojo.byId('share_toolbar_label');tab.ShareDialogUtil.setupShareDialogCommon(options);tab.ShareDialogUtil.pushShareFieldsToParent();}
tab.ShareDialogUtil.validateReasonableDimension=function(elementName,doupdate){var $0=false;var $1=((tab.ShareDialogUtil.share_settings)[elementName]).value;if(tab.ShareDialogUtil.$6($1)){var $2=parseInt($1,10);if($2<10000&&$2>0){((tab.ShareDialogUtil.share_settings)[elementName]).style.color='black';tab.ShareDialogUtil.share_settings.dimension_warning.style.visibility='hidden';if(doupdate){tab.ShareDialogUtil.doUpdateGenerated();}return;}else{$0=true;}}else{$0=true;}if($0){((tab.ShareDialogUtil.share_settings)[elementName]).style.color='red';tab.ShareDialogUtil.share_settings.dimension_warning.style.visibility='';}}
tab.ShareDialogUtil.toggleMobileClientVizDisplay=function(show){dojo.query("[id^='tableau_mobile_MobileClient']",dojo.doc).forEach(function($p1_0,$p1_1){
var $1_0=dijit.byNode($p1_0);if(!!$1_0){if(show){$1_0.enableBodyTouchHandler();}else{$1_0.disableBodyTouchHandler();}dojo.style($1_0.domScroll,'display',(show)?'':'none');}});}
tab.ShareDialogUtil.hideShareDialog=function(){tab.ShareDialogUtil.toggleMobileClientVizDisplay(true);(dijit.byId('share_dialog')).hide();}
tab.ShareDialogUtil.showPopup=function(){if(!!tab.ShareDialogUtil._popup){tab.ShareDialogUtil._popup.style.visibility='hidden';document.getElementById('displayOptionsHeader').className='closed';tab.ShareDialogUtil._popup=null;return;}var $0=document.getElementById('optionsPopup');$0.style.visibility='visible';document.getElementById('displayOptionsHeader').className='open';tab.ShareDialogUtil._popup=$0;tab.ShareDialogUtil.$2='true';}
tab.ShareDialogUtil.hideActivePopup=function(e){var $0;var $1=(!!e&&!!e.target)?e.target:(event && event.srcElement);if(!!!tab.ShareDialogUtil._popup){return;}if(tab.ShareDialogUtil.$2==='true'){tab.ShareDialogUtil.$2='false';return;}$0=tab.ShareDialogUtil.$7($1);if($0){tab.ShareDialogUtil._popup.style.visibility='hidden';document.getElementById('displayOptionsHeader').className='closed';tab.ShareDialogUtil._popup=null;}}
tab.ShownEventArgs=function(){tab.ShownEventArgs.initializeBase(this);}
tab.ShownEventArgs.prototype={shownX:0,shownY:0,origX:0,origY:0,position:null}
tab.Slider=function(targetDiv,attrs,isAll,doUpdateFunc,getTitleOffsetFunc,getCurrentTextFunc,onIntermediateChangeFunc,getCurrentFacetFunc,showFacets){this.$3=-1;this.$4=['show-readout','hide-readout'];this.$5=['show-slider','hide-slider'];this.$6=['show-step-btns','hide-buttons'];this.$7=['show-ticks','hide-ticks'];this.div=targetDiv;this.$8=attrs;this.$16=isAll;this.$17=doUpdateFunc;this.$12=getTitleOffsetFunc;this.$15=getCurrentTextFunc;this.$18=onIntermediateChangeFunc;this.$1B=getCurrentFacetFunc;this.$1A=showFacets;dojo.addClass(this.div,'tableauWidgetUiSlider');this.$1=new tab.DisposableHolder();this.currentlySelected=-1;}
tab.Slider.prototype={dojoOrient:null,$1:null,styleid:0,$2:null,div:null,$8:null,currentlySelected:0,numValues:0,$9:null,$A:null,slider:null,readout:null,$B:false,$C:null,$D:null,$E:null,$F:null,$10:null,$11:false,$12:null,$13:null,$14:false,$15:null,$16:false,$17:null,$18:null,$19:0,$1A:false,$1B:null,$1C:null,$1D:function($p0){return (this.$8[$p0[0]]!=='false'&&this.$8[$p0[1]]!=='true');},calculateStyleid:function(){this.styleid=0;if(!this.$1D(this.$4)){this.styleid+=4;}if(!this.$1D(this.$5)){this.styleid+=2;}if(!this.$1D(this.$6)){this.styleid+=1;}if(this.styleid>5){this.styleid=3;}},dispose:function(){this.$1.dispose();},destroy:function(){dojo.unsubscribe(this.$9);dojo.unsubscribe(this.$A);this.$28();this.dispose();if(ss.isValue(this.$1C)){this.$1C.domNode.parentNode.removeChild(this.$1C.domNode);this.$1C=null;}if(ss.isValue(this.slider)&&(typeof(this.slider.destroy)==='function')){this.slider.destroy();}if(ss.isValue(this.$2)&&(typeof(this.$2.destroy)==='function')){this.$2.destroy();}},instantiateFromDomain:function(domain,current){var $0=[];var $1=domain.length;for(var $2=0;$2<$1;$2++){$0[$2]=tab.$create_TupleStruct(domain[$2],current===domain[$2],new Array(0));}this.instantiateFromTuples($0,null);},instantiateFromTuples:function(t,text){var $0=-1;var $1=tab.Strings.QuickFilterUnknown;var $2=null;if(t.length>0){var $3=t.length;for(var $4=0;$4<$3;$4++){if(!!t[$4].s&&!this.$16){if($0>-1){$1=tab.Strings.QuickFilterMultipleValues;}else{$0=$4;$1=this.$15($4);}}}}if($0<0){$0=0;if(ss.isValue(text)){$1=text;}}if(this.$1A){$2=this.$1B($0);}this.instantiate(t.length,$0,$1,$2);},instantiate:function(numValues,currentlySelectedArg,initialText,facet){var $0=null;this.currentlySelected=currentlySelectedArg;this.calculateStyleid();if(this.$1D(this.$4)){this.readout=document.createElement('div');dojo.addClass(this.readout,'sliderTextReadout');dojo.addClass(this.readout,'tab-ctrl-formatted-widget');dojo.addClass(this.readout,'tab-ctrl-formatted-fixedsize');this.$C=document.createElement('div');dojo.addClass(this.$C,'sliderText');this.$C.innerHTML=tableau.format.escapeHTML(initialText);if(this.$1A){this.$D=document.createElement('div');dojo.addClass(this.$D,'facet');this.$D.innerHTML=tableau.format.escapeHTML(facet);this.readout.appendChild(this.$D);}this.readout.appendChild(this.$C);this.div.appendChild(this.readout);}if(this.styleid===3){return;}var $1=document.createElement('div');if(this.$1D(this.$5)){$0=document.createElement('div');$1.appendChild($0);}this.div.appendChild($1);if(numValues<1){numValues=1;}this.$B=(!isFinite(numValues));if(this.$1D(this.$5)&&numValues<1200&&this.$1D(this.$7)){var $3={count:numValues};this.$2=new dijit.form.HorizontalRule($3,$0);}var $2=tab.$create_SliderParams();$2.templateString=tab.Slider.tableauSliderTemplate;$2.onChange=ss.Delegate.create(this,this.$25);$2.value=this.currentlySelected;$2.slideDuration=0;$2.intermediateChanges=true;$2.showButtons=this.$1D(this.$6);$2.pageIncrement=1;if(isFinite(numValues)){$2.minimum=0;$2.maximum=numValues-1;$2.discreteValues=numValues;}this.slider=new dijit.form.HorizontalSlider($2,$1);this.$9=dojo.subscribe('/dnd/move/start',ss.Delegate.create(this,this.startDrag));this.$A=dojo.subscribe('/dnd/move/stop',ss.Delegate.create(this,this.stopDrag));this.slider.startup();if(ss.isValue(this.$2)){this.$2.startup();}this.$14=false;if(!this.$1D(this.$4)){this.$E=document.createElement('div');this.slider.sliderHandle.appendChild(this.$E);var $4=(dijit._MasterTooltip).prototype;$4['templateString']=tab.Slider.$0;this.$1C=new dijit._MasterTooltip();this.$1C.DOJO_orient=this.$1C.orient;this.$1C.orient=ss.Delegate.create(this,function(){
this.dojoOrient(this.$1C,arguments);dojo.addClass(this.$1C.domNode,'sliderThumbTooltip');});var $5=$(this.slider.sliderHandle);this.$1.add(tab.EventUtil.bindWithDispose($5,'mouseenter',ss.Delegate.create(this,this.$20)));this.$1.add(tab.EventUtil.bindWithDispose($5,'mouseleave',ss.Delegate.create(this,this.$21)));}this.$F=this.slider.decrementButton.childNodes[0];this.$10=this.slider.incrementButton.childNodes[0];this.$1E();this.$26();},$1E:function(){this.$1F(this.$F,'Left',!this.currentlySelected);this.$1F(this.$10,'Right',this.currentlySelected===this.slider.maximum);},$1F:function($p0,$p1,$p2){dojo.removeClass($p0,'cp'+$p1+'Arrow'+(($p2)?'Black':'Grey'));dojo.addClass($p0,'cp'+$p1+'Arrow'+(($p2)?'Grey':'Black'));},refreshSliderMarksForIE:function(){if(dojo.isIE<=7){if(ss.isValue(this.$2)){this.$2.domNode.className=this.$2.domNode.className+' ';}}},setNewState:function(newSelected){this.currentlySelected=newSelected;this.slider._setValueAttr(this.currentlySelected);this.refreshSliderMarksForIE();},startDrag:function($p0){if(ss.isValue($p0)&&$p0.node===this.slider.sliderHandle){this.$11=true;if(this.$3>0){this.$28();}}},stopDrag:function($p0){if(ss.isValue($p0)&&$p0.node===this.slider.sliderHandle){this.$11=false;if(this.$3>0){this.$28();}this.$27();this.$22();}},$20:function($p0){if(!this.$1D(this.$4)){if(ss.isValue(this.$13)){window.clearTimeout(this.$13);this.$13=null;}this.$14=true;this.$13=window.setTimeout(ss.Delegate.create(this,this.$22),50);}},$21:function($p0){if(ss.isValue(this.$13)){window.clearTimeout(this.$13);this.$13=null;}if(ss.isValue(this.$1C)){this.$1C.hide(this.$E);}this.$14=false;},$22:function(){if(!this.$1D(this.$4)){this.$1C.hide(this.$E);if(this.$14||this.$11){var $0=(ss.isValue(this.$19))?this.$19:parseInt(this.currentlySelected);var $1=this.$15($0);this.$1C.show($1,this.$E,['above','below']);}}},$23:function($p0){var $0;if(ss.isUndefined($p0)||isNaN($p0)){return 0;}if(this.$B){$0=$p0;}else{$0=parseInt($p0.toString(),10);}if($0<0){$0=0;}return $0;},$24:function(){if(ss.isNullOrUndefined(this.$19)||ss.isNullOrUndefined(this.currentlySelected)||this.$19===this.currentlySelected){return;}var $0=this.$23(this.$19);if(ss.isValue(this.$17)){this.$17($0);}this.currentlySelected=this.$19=$0;this.$1E();},updateReadout:function(text,facet){if(this.styleid<4){this.$C.innerHTML=text;if(this.$1A){this.$D.innerHTML=facet;}}},$25:function($p0){if(isNaN($p0)){return;}var $0=(this.$1A)?this.$1B($p0):null;this.updateReadout(this.$15($p0),$0);this.$19=$p0;if(ss.isValue(this.$18)){this.$18();}if(!this.$11){if(this.$3>0){this.$28();}this.$27();}else{if(this.$3>0){this.$28();}}this.$22();},$26:function(){if(!this.$1D(this.$6)){dojo.addClass(this.div,'HideArrows');}if(!this.$1D(this.$5)){dojo.addClass(this.div,'HideSlider');}if(this.styleid>3){dojo.style(this.div,'height','15px');}},$27:function(){this.$3=window.setTimeout(ss.Delegate.create(this,this.$29),500);},$28:function(){if(this.$3>0){window.clearTimeout(this.$3);this.$3=-1;}},$29:function(){this.$24();},layout:function(){var $0=0;var $1=34;var $2=false;dojo.style(this.div,'overflow','hidden');var $3=dojo.marginBox(this.div).h;var $4=parseInt(dojo.style(this.div,'width'))-4;dojo.style(this.div,'overflow','');if($4<$1){return;}if(ss.isValue(this.readout)){dojo.style(this.readout,'width','');dojo.style(this.readout,'float','none');}if(ss.isValue(this.slider)){dojo.style(this.slider.tableauSlider,'width','');dojo.style(this.slider.tableauSlider,'float','none');}if(ss.isValue(this.$2)&&(this.$2.count*4>$4)){dojo.style(this.$2.domNode,'display','none');}if($3<38&&this.styleid<=1){var $5=(!this.styleid)?($4-$1):$4;$5=Math.floor(($5-14)/2);dojo.style(this.readout,'width',$5+'px');dojo.style(this.slider.tableauSlider,'width',$5+'px');dojo.style(this.readout,'float','left');dojo.style(this.slider.tableauSlider,'float','left');$2=true;}else if(!this.styleid||this.styleid===4){dojo.style(this.slider.tableauSlider,'width',$4-$1+'px');}else if(this.styleid===1||this.styleid===5){dojo.style(this.slider.tableauSlider,'width',$4+'px');}else if(this.styleid===2){dojo.style(this.readout,'width',$4-$1-4+'px');}if(this.$1D(this.$6)){if(this.styleid===2||this.styleid===4){$0=2;}if(!this.styleid){$0=($2)?2:21;}$0+=this.$12();dojo.style(this.slider.incrementButton,'top',$0+'px');dojo.style(this.slider.decrementButton,'top',$0+'px');}}}
tab.SmallSearchWidget=function(r,dom){this.templateString="<div class='SmallSearch'>"+"<div class='SmallSearchBox' dojoAttachPoint='domSearchBox'>"+"<div class='Autocompleter' dojoAttachPoint='domAutocompleter'></div>"+"<div class='wcSearchX dijitInlineTable' title='${XBUTTON_CLOSE_TOOLTIP}'"+"dojoAttachPoint='domXButton'"+"dojoAttachEvent='onclick:onXButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></div>"+'</div>'+'</div>';tab.SmallSearchWidget.initializeBase(this);}
tab.SmallSearchWidget.prototype={domSearchBox:null,domAutocompleter:null,autocompleter:null,get_applyDelay:function(){alert(tab.Strings.noLoc('Bad call of ApplyDelay on SmallSearchWidget'));return 0;},startup:function(){this.inherited(arguments);var $0={};$0.store=null;$0.autoComplete=false;$0.hasDownArrow=false;$0.highlightMatch='none';$0.searchDelay=this.searchDelay;$0.onChange=ss.Delegate.create(this,this.applyChanges);$0.onKeyDown=ss.Delegate.create(this,this.onQueryBoxKeyDown);this.autocompleter=new dijit.form.ComboBox($0,this.domAutocompleter);this.autocompleter.startup();this.autocompleter._getQueryString=function($p1_0){
var $1_0=$p1_0.length;if($1_0<1){return '';}if($p1_0.charAt(0)==='"'&&$p1_0.charAt($1_0-1)==='"'){return $p1_0.substr(1,$1_0-2);}var $1_1=$p1_0;if($1_1.length>1&&$1_1.charAt(0)==='\\'&&$1_1.charAt(1)==='*'){$1_1='*'+$1_1.substr(2);}if($1_1.length>1&&$1_1.charAt($1_1.length-2)==='\\'&&$1_1.charAt($1_1.length-1)==='*'){$1_1=$1_1.substr(0,$1_1.length-2)+'*';}if($1_1.charAt(0)!=='*'&&$1_1.charAt($1_1.length-1)!=='*'){$1_1='*'+$1_1+'*';}return $1_1;};var $1=this.NO_MATCHES;this.autocompleter.DOJO_openResultList=this.autocompleter._openResultList;this.autocompleter._openResultList=ss.Delegate.create(this,function($p1_0,$p1_1){
this.resultCount=$p1_0.length;this.autocompleter.DOJO_openResultList($p1_0,$p1_1);if(!!!$p1_0.length){this.autocompleter.tooltipPosition=['above','below'];this.autocompleter.displayMessage($1);}else{dijit.hideTooltip(this.autocompleter.domNode);}});},getDataStore:function(){var $0;var $1=[];var $2;var $3=this.get_qf().get_oFilter().table.tuples;for($0=0,$2=$3.length;$0<$2;$0++){$1.add({name:this.formatTuple($3[$0])});}return new dojo.data.ItemFileWriteStore({data:{items:$1}});},destroy:function(preserveDom){this.domSearchBox.innerHTML='';this.autocompleter=null;this.inherited(arguments);},focusQueryBox:function(){this.autocompleter.focus();},blurQueryBox:function(){this.autocompleter._onBlur();},getQuery:function(){return this.autocompleter.attr('value');},setQuery:function(value){this.autocompleter.attr('value',value);},fixQueryWidth:function(){var $0=dojo.marginBox(this.domNode).w;if($0>25){var $1={w:$0-25};dojo.marginBox(this.autocompleter.comboNode,$1);dojo.marginBox(this.autocompleter.comboNode.firstChild,$1);dojo.marginBox(this.autocompleter.textbox,$1);}dojo.style(this.autocompleter.comboNode,'float','left');},showUI:function(noLayout){if(this.get_isVisible()){return;}tab.SmallSearchWidget.callBaseMethod(this, 'showUI',[noLayout]);this.get_qf().get_modeContents().onSmallSearchUI(true,this.domNode);},hideUI:function(){if(!this.get_isVisible()){return;}tab.SmallSearchWidget.callBaseMethod(this, 'hideUI');this.get_qf().get_modeContents().onSmallSearchUI(false,this.domNode);},layout:function(){this.fixQueryWidth();},updateSearch:function(){this.autocompleter.store=this.getDataStore();this.get_qf().get_modeContents().onSmallSearchUI(this.get_isVisible(),this.domNode);},applyChanges:function($p0){if(!!!$p0){return;}var $0=[];var $1=this.get_qf().get_oFilter().table.tuples;for(var $2=0,$3=$1.length;$2<$3;$2++){if($p0===this.formatTuple($1[$2])){$0.add($1[$2]);$1[$2].s=true;}else if($1[$2].s){delete $1[$2].s;}}if(!!$0.length){this.get_qf().updateStateFromSearch(null);var $4=($0[0].d||$0[0].t[0].v);var $5=[$4];tab.FilterClientCommands.setCategoricalFilterValues(this.get_qf().get_session().get_sheetName(),this.get_qf().get_field(),'filter-replace',$5);this.clearSearch(false,true);this.onXButtonClick(null);}}}
tab.Social=function(){}
tab.Social.twitterPopup=function(vizLink,tweetText){var $0=$('#twitter_creator');var $1=(ss.isValue($0))?$0.attr('content'):null;if(!String.isNullOrEmpty($1)){$1=' '+$1;}tweetText+=$1;var $2={};$2['url']=vizLink;$2['via']='tableau';$2['text']=tweetText;$2['related']='tableau';var $3='https://twitter.com/share?'+dojo.objectToQuery($2);var $4=null;var $5='scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=680,height=350';window.open($3,$4,$5);}
tab.Social.facebookPopup=function(appid,vizLink,thumbnailUrl,name,description,redirectUri){var $0={};$0['app_id']=appid;$0['link']=vizLink;$0['picture']=thumbnailUrl;$0['name']=name;$0['description']=description;if(!!redirectUri&&redirectUri.length>0){$0['redirect_uri']=redirectUri;}var $1='http://www.facebook.com/dialog/feed?'+dojo.objectToQuery($0);var $2=null;var $3='scrollbars=yes,resizable=yes,toolbar=no,location=no,width=1000,height=565';var $4=window.open($1,$2,$3);if((typeof($4.focus)==='function')){$4.focus();}}
tab.Social.mailTo=function(shareUrl,description){var $0={body:shareUrl};if(!!description){$0['subject']=description;}var $1='mailto:?'+dojo.objectToQuery($0);window.location.href=$1;}
tab.StepperControlView=function(viewModel,template){tab.StepperControlView.initializeBase(this,[viewModel,template]);this.dom=template;this.set_stepperViewModel(viewModel);this.dom.valueText.addClass(this.get_stepperViewModel().textClass);this.dom.valueText.val(viewModel.get_value().toString());this.dom.valueText.keydown(tableau.util.preventNonNumericInput);this.dom.valueText.keyup(ss.Delegate.create(this,this.$2_3)).mouseup(ss.Delegate.create(this,this.$2_3));this.disposables.add(tab.ClickHandler.targetAndClick(this.dom.incrementButton,ss.Delegate.create(this,function($p1_0){
this.$2_2(this.get_stepperViewModel().get_step());})));this.disposables.add(tab.ClickHandler.targetAndClick(this.dom.decrementButton,ss.Delegate.create(this,function($p1_0){
this.$2_2(-this.get_stepperViewModel().get_step());})));this.$2_0=_.debounce(ss.Delegate.create(this,function($p1_0){
this.$2_1.set_value($p1_0);}),1000);this.$2_4();}
tab.StepperControlView.prototype={$2_0:null,$2_1:null,dom:null,get_stepperViewModel:function(){return this.$2_1;},set_stepperViewModel:function(value){this.$2_1=value;return value;},$2_2:function($p0){if(!this.get_stepperViewModel().get_isEnabled()){return;}var $0=parseInt(this.dom.valueText.val());if(ss.isValue($0)&&!isNaN($0)){var $1=$0+$p0;if(this.get_stepperViewModel().isValueWithinRange($1)){this.dom.valueText.val($1.toString());this.$2_0($1);}}},$2_3:function($p0){if(!this.get_stepperViewModel().get_isEnabled()){return;}var $0=parseInt($($p0.target).val());if(ss.isValue($0)&&!isNaN($0)){this.$2_0($0);}},$2_4:function(){if(this.get_stepperViewModel().get_isEnabled()){this.dom.valueText.removeAttr('disabled');}else{this.dom.valueText.attr('disabled','disabled');}},onViewModelPropertyChanged:function(sender,e){tab.StepperControlView.callBaseMethod(this, 'onViewModelPropertyChanged',[sender,e]);if(e.get_propertyName()==='Value'){this.dom.valueText.val(this.get_stepperViewModel().get_value().toString());}else if(e.get_propertyName()==='IsEnabled'){this.$2_4();}else if(e.get_propertyName()==='IsIncrementEnabled'){this.dom.incrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isIncrementEnabled());}else if(e.get_propertyName()==='IsDecrementEnabled'){this.dom.decrementButton.toggleClass('tabDisabled',!this.get_stepperViewModel().get_isDecrementEnabled());}}}
tab.StepperControlTemplate=function(template){tab.StepperControlTemplate.initializeBase(this,[$(template)]);}
tab.StepperControlTemplate.prototype={decrementButton:null,incrementButton:null,valueText:null}
tab.StyledButton=function(){}
tab.StyledButton.createStyledButton=function(clickHandler,name,buttonClass,tabIndex){return tab.ClickHandler.targetAndClick($('<span>').attr('tabindex',tabIndex.toString()).addClass('tabStyledButton').addClass(buttonClass).focusin(tab.StyledButton.$2).focusout(tab.StyledButton.$1).keydown(tab.StyledButton.$0).append($('<span>').addClass('tabStyledButton-left')).append($('<span>').addClass('tabStyledButton-middle').text(name)).append($('<span>').addClass('tabStyledButton-right')),clickHandler).get_target();}
tab.StyledButton.$0=function($p0){switch($p0.which){case 32:case 13:$p0.preventDefault();$p0.stopPropagation();$($p0.target).click();break;}}
tab.StyledButton.$1=function($p0){$($p0.target).parent().find('.tab-focus').removeClass('tab-focus');}
tab.StyledButton.$2=function($p0){$($p0.target).addClass('tab-focus');}
tab.TabbedNavigation=function(paramaters,srcNodeRef){this.templateString="<div style='width:${innerWidth};' class='tabbedNavigationOuterWrapper'>"+"<div id='container' dojoType='dijit.layout.LayoutContainer' style='width:100%; height:100%;' dojoAttachPoint='_innerWrapper'>"+"<button dojoType='dijit.form.Button' class='tabsMenuBtn' layoutAlign='left' id='menuBtn' dojoAttachPoint='_menuBtn' style='display:none;'></button>"+"<button dojoType='dijit.form.Button' class='tabsLeftBtn' layoutAlign='left' dojoAttachPoint='_leftBtn' style='display:none;'></button>"+"<button dojoType='dijit.form.Button' class='tabsRightBtn' layoutAlign='right' dojoAttachPoint='_rightBtn' style='display:none;'></button>"+"<div dojoType='dijit.layout.LayoutContainer' layoutAlign='client' dojoAttachPoint='_containerNode'>"+"<div class='dijitTabContainerTop-tabs' dojoAttachPoint='_scrollNode'></div>"+'</div>'+'</div>'+"<div dojoType='tableau.base.MaxHeightMenu' dojoAttachPoint='_tabsMenu' style='display: none;' class='tabbedNavigationMenu' targetNodeIds='menuBtn' leftClickToOpen='true' refocus='false'></div>"+'</div>';tab.TabbedNavigation.initializeBase(this);this.$2_0=[];this.$2_1=[];this.$2_2=[];this.$2_0=tsConfig.visible_sheets||this.$2_0;var $0=this._indexOf(this.$2_0,tsConfig.current_sheet_name);this.currentTabIndex=(!!$0)?$0:this.currentTabIndex;this.innerWidth=(paramaters['innerWidth']||this.innerWidth);}
tab.TabbedNavigation.prototype={baseClass:'tableauTabbedNavigation',widgetsInTemplate:true,innerWidth:'100%',currentTabIndex:0,$2_0:null,$2_1:null,$2_2:null,currentTab:null,_scrollNode:null,_leftBtn:null,_rightBtn:null,_menuBtn:null,_containerNode:null,_innerWrapper:null,_tabsMenu:null,_anim:null,_buttons:null,startup:function(){dojo.query('button',this._leftBtn.domNode).addClass('tnLeftButton');dojo.query('button',this._rightBtn.domNode).addClass('tnRightButton');dojo.query('button',this._menuBtn.domNode).addClass('tnMenuButton');this.containerNode=this.domNode;this.inherited(arguments);},destroy:function(){dojo.forEach(this.$2_2,dojo.unsubscribe);},layout:function(){if(!this.$2_0.length){return;}var $0=dojo.contentBox(this._containerNode.domNode);var $1=this.$2_6($0.w);this._buttons.style('display',($1)?'':'none');this._innerWrapper.layout();dojo.style(this._containerNode.domNode,'top','-1px');if(!$1){this._containerNode.domNode.scrollLeft=0;}this.$2_B(this.currentTab);this.$2_12();if(tabBootstrap.ViewerBootstrap.get_instance().shouldShowTabs()){$('.tabbedNavigationWrapper').css('visibility','visible');$('.tabbedNavigationOuterWrapper').css('display','');}else{$('.tabbedNavigationOuterWrapper').css('display','none');}},redimMenu:function(data){this._tabsMenu.domNode.style.maxHeight=Math.floor(data.h*0.7)+'px';},postCreate:function(){this.$2_2.push(dojo.subscribe(tab.EventMap.refreshLayoutModel,ss.Delegate.create(this,this.$2_9)));this.$2_2.push(dojo.subscribe(tab.EventMap.onBootstrapSuccess,ss.Delegate.create(this,this.$2_A)));this.$2_2.push(dojo.subscribe(tab.EventMap.onTabSelect,ss.Delegate.create(this,this.$2_3)));this.$2_2.push(dojo.subscribe(tab.EventMap.newLayoutId,ss.Delegate.create(this,this.$2_3)));this.inherited(arguments);this.$2_E();for(var $0=0;$0<this.$2_0.length;$0++){var $1=this.$2_0[$0];this.addTab($1,$0,tsConfig.repository_urls[$0]);}this._buttons=dojo.query('.dijitButton',this.domNode);this.layout();},chooseTabByName:function(str){if(ss.isNullOrUndefined(str)){return;}var $0=this.$2_4(str);if(ss.isValue($0)){this.chooseTab($0);}},chooseTab:function(selected){if(ss.isNullOrUndefined(selected)){return;}this.$2_8(selected);},addTab:function(tabElement,index,repo){var $0=dojo.doc.createElement('span');this._scrollNode.appendChild($0);var $1=this.baseClass+'_tab_'+index;var $2={};$2.id=$1;$2.label=tableau.format.escapeHTML(tabElement);$2.value=tabElement;$2.showLabel=true;$2.repository_url=repo;$2.onClick=ss.Delegate.create(this,function(){
var $1_0=dijit.byId($1);this.chooseTab($1_0);});var $3=new dijit.layout._TabButton($2,$0);this.$2_1.push($3);var $4={};$4.label=$3.label;$4.onClick=ss.Delegate.create(this,function(){
var $1_0=dijit.byId($1);this.chooseTab($1_0);});var $5=new tableau.base.NoFocusMenuItem($4);this._tabsMenu.addChild($5);},$2_3:function($p0){var $0=this.$2_4($p0.sheetName);this.$2_B($0);},$2_4:function($p0){for(var $0=0;$0<this.$2_1.length;$0++){if(this.$2_1[$0].value===$p0){return this.$2_1[$0];}}return null;},$2_5:function(){var $0=dojo.query('.dijitTab',this._scrollNode);if(!!$0.length){var $1=$0[0];var $2=$0[$0.length-1];return $2.offsetLeft+dojo.style($2,'width')-$1.offsetLeft;}else{return 0;}},$2_6:function($p0){var $0=this.$2_5();return $0>0&&$p0<$0;},_indexOf:function($p0,$p1){for(var $0=0;$0<$p0.length;$0++){if($p0[$0]===$p1){return $0;}}return -1;},$2_7:function(){var $0=dojo.query('.dijitTab',this._scrollNode);var $1=Math.floor(this._containerNode.domNode.offsetWidth);var $2=this.$2_5();var $3=tab.$create_ScrollBound();if(!!$0.length&&$2>$1){$3.min=0;$3.max=($0[$0.length-1].offsetLeft+dojo.style($0[$0.length-1],'width'))+2-$1;}else{$3.min=0;$3.max=0;}return $3;},getCurrentSheetInfo:function(){return {sheetName:this.currentTab.value,repositoryUrl:this.currentTab.repository_url};},$2_8:function($p0){if(this.currentTab.value!==$p0.value){var $0={};$0.sheetName=$p0.value;$0.repositoryUrl=$p0.repository_url;$0.oldRepositoryUrl=this.currentTab.repository_url;dojo.publish(tab.EventMap.onTabSelect,[$0]);}},$2_9:function($p0){this.redimMenu($p0);},$2_A:function($p0){this.currentTabIndex=this._indexOf(this.$2_0,$p0);this.$2_B(this.currentTab);},$2_B:function($p0){if(ss.isValue(this.currentTab)){this.currentTab.attr('checked',false);}else{$p0=this.currentTab=this.$2_1[this.currentTabIndex];}if(ss.isNullOrUndefined($p0)){return;}$p0.attr('checked',true);this.currentTab=$p0;this.$2_C($p0);},$2_C:function($p0){var $0=$p0.domNode;var $1=this._getScroll();if($1>$0.offsetLeft||$1+dojo.style(this._containerNode.domNode,'width')<$0.offsetLeft+dojo.style($0,'width')){this._createSmoothScroll($p0).play();}},$2_D:function($p0){var $0=$p0.domNode;var $1=dojo.style(this._containerNode.domNode,'width');var $2=this.$2_7();var $3;$3=($0.offsetLeft+(dojo.style($0,'width')/2))-($1/2);$3=Math.min(Math.max($3,$2.min),$2.max);return $3;},$2_E:function(){this.connect(this._rightBtn,'onClick',ss.Delegate.create(this,function(){
this.$2_10(this._rightBtn);}));this.connect(this._leftBtn,'onClick',ss.Delegate.create(this,function(){
this.$2_10(this._leftBtn);}));this.connect(this._tabsMenu,'onFocus',ss.Delegate.create(this,this.$2_F));this.connect(window,'onresize',ss.Delegate.create(this,this.$2_F));},$2_F:function(){var $0=this._tabsMenu.domNode;if($0.style.display!=='none'){var $1=$0.parentNode;var $2=this._menuBtn.domNode;var $3=$($2).offset();$1.style.top=($3.top+$2.offsetHeight)+'px';$1.style.left=$3.left+'px';}},$2_10:function($p0){if($p0.dojoAttachPoint==='_leftBtn'){this.$2_11(-1);}else{this.$2_11(1);}},$2_11:function($p0){var $0=dojo.style(this._containerNode.domNode,'width');var $1=($0*0.5)*$p0;var $2=this._getScroll()+$1;this._createSmoothScroll(null,$2).play();},_getScroll:function(){return this._containerNode.domNode.scrollLeft;},_createSmoothScroll:function($p0,$p1){if(ss.isValue($p0)){$p1=this.$2_D($p0);}else{var $2=this.$2_7();$p1=Math.min(Math.max($p1,$2.min),$2.max);}if(ss.isValue(this._anim)&&this._anim.status()==='playing'){this._anim.stop();}var $0=null;var $1={};$1.duration=100;$1.beforeBegin=ss.Delegate.create(this,function(){
var $1_0=this._containerNode.domNode.scrollLeft;$0.curve=new dojo._Line($1_0,$p1);});$1.onAnimate=ss.Delegate.create(this,function($p1_0){
this._containerNode.domNode.scrollLeft=$p1_0;});$1.onEnd=ss.Delegate.create(this,function(){
this.$2_12();});$0=new dojo._Animation($1);this._anim=$0;return $0;},$2_12:function(){var $0=this._getScroll();var $1=this.$2_7();var $2;var $3;if($0>$1.max){this._containerNode.domNode.scrollLeft=$1.max;}$3=$0>=$1.max;$2=$0<=$1.min;this._rightBtn.setAttribute('disabled',$3);this._leftBtn.setAttribute('disabled',$2);dojo.query('button',this._rightBtn.domNode).toggleClass('tnRightButtonDisabled',$3);dojo.query('button',this._leftBtn.domNode).toggleClass('tnLeftButtonDisabled',$2);}}
tab.NoFocusMenuItem=function(parameters){this.templateString="<tr class='dijitReset dijitMenuItem' dojoAttachPoint='focusNode' waiRole='menuitemcheckbox' "+"tabIndex='-1' dojoAttachEvent='onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick'>"+"<td class='dijitReset dijitMenuItemLabel' dojoAttachPoint='containerNode,labelNode' "+"style='padding:2px 25px 2px 8px;'></td></tr>";tab.NoFocusMenuItem.initializeBase(this,[parameters]);}
tab.NoFocusMenuItem.prototype={isFocusable:function(){return true;}}
tab.MaxHeightMenu=function(){this.templateString="<div style='max-height:${maxHeight}; overflow-x: hidden; overflow-y: auto; "+"border: 1px solid #7EABCD; background-color:white;'>"+"<table class='dijit dijitMenu dijitReset dijitMenuTable' waiRole='menu' "+"dojoAttachEvent='onkeypress:_onKeyPress' style='border:none;'>"+"<tbody class='dijitReset' dojoAttachPoint='containerNode'></tbody>"+'</table></div>';tab.MaxHeightMenu.initializeBase(this);}
tab.MaxHeightMenu.prototype={maxHeight:'500px'}
tab.MaxHeightMenuDojo=function(){tab.MaxHeightMenuDojo.initializeBase(this);}
tab.TabEventArgs=function(tabLabelElement,tabContentElement,tabIndex){tab.TabEventArgs.initializeBase(this);this.tabLabelElement=tabLabelElement;this.tabContentElement=tabContentElement;this.tabIndex=tabIndex;}
tab.TabEventArgs.prototype={tabLabelElement:null,tabContentElement:null,tabIndex:0}
tab.TabView=function(){this.$1_A=[];this.$1_B=[];tab.TabView.initializeBase(this,[$("<div class='tab-tabView'><ul class='tab-tabLabels'></ul><div class='tab-tabContent'></div></div>")]);this.get_element().delegate('.tab-tabLabel',this.createNamespacedEventName('click'),ss.Delegate.create(this,this.$1_15));this.$1_C=$("<div class='tab-tabViewLoading'>&nbsp;</div>");this.$1_D=tab.HoverAddClassBehavior.attach(this,'hover','.tab-tabLabel');}
tab.TabView.prototype={$1_C:null,$1_D:null,$1_E:null,add_tabShown:function(value){this.$1_F=ss.Delegate.combine(this.$1_F,value);},remove_tabShown:function(value){this.$1_F=ss.Delegate.remove(this.$1_F,value);},$1_F:null,add_tabSelected:function(value){this.$1_10=ss.Delegate.combine(this.$1_10,value);},remove_tabSelected:function(value){this.$1_10=ss.Delegate.remove(this.$1_10,value);},$1_10:null,add_tabContentLoaded:function(value){this.$1_11=ss.Delegate.combine(this.$1_11,value);},remove_tabContentLoaded:function(value){this.$1_11=ss.Delegate.remove(this.$1_11,value);},$1_11:null,add_tabContentFailed:function(value){this.$1_12=ss.Delegate.combine(this.$1_12,value);},remove_tabContentFailed:function(value){this.$1_12=ss.Delegate.remove(this.$1_12,value);},$1_12:null,get_selectedIndex:function(){return this.$1_E;},addUrlTab:function(tabLabelContent,tabPaneContentUrl){var $0=this.$1_A.length;var $1=$("<li class='tab-tabLabel'></li>");$1.append(tabLabelContent);$1.data('tabIndex',$0);this.$1_A.add($1);var $2=$('<div></div>');$2.data('tabContentUrl',tabPaneContentUrl);this.$1_B.add($2);this.get_element().find('.tab-tabLabels').append($1);return $0;},selectTab:function(index){if(ss.isNullOrUndefined(index)||index<0||index>=this.$1_B.length){return;}if(ss.isValue(this.$1_E)&&this.$1_E===index){return;}this.get_element().find('.tab-tabContent').children().detach();if(ss.isValue(this.$1_E)){this.$1_A[this.$1_E].removeClass('selected');}this.$1_E=index;this.$1_A[index].addClass('selected');this.get_element().find('.tab-tabContent').append(this.$1_B[index]);this.$1_13(index);this.onTabSelected(new tab.TabEventArgs(this.$1_A[index],this.$1_B[index],index));},dispose:function(){this.$1_D.dispose();tab.TabView.callBaseMethod(this, 'dispose');},onTabShown:function(args){if(ss.isValue(this.$1_F)){this.$1_F(this,args);}},onTabSelected:function(args){if(ss.isValue(this.$1_10)){this.$1_10(this,args);}},onTabContentLoaded:function(args){if(ss.isValue(this.$1_11)){this.$1_11(this,args);}},onTabContentFailed:function(args){if(ss.isValue(this.$1_12)){this.$1_12(this,args);}},$1_13:function($p0){var $0=this.$1_B[$p0];var $1=$0.data('tabContentUrl');if(ss.isNullOrUndefined($1)){return;}$0.removeData('tabContentUrl');$0.append(this.$1_C);$0.load($1,null,ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.$1_14($p0,$p1_1,$p1_0);}));this.onTabShown(new tab.TabEventArgs(this.$1_A[$p0],$0,$p0));},$1_14:function($p0,$p1,$p2){if($p1==='error'){this.$1_B[$p0].html($("<div class='tab-tabViewError'></div>").html($p2));this.onTabContentFailed(new tab.TabEventArgs(this.$1_A[$p0],this.$1_B[$p0],$p0));}else{this.onTabContentLoaded(new tab.TabEventArgs(this.$1_A[$p0],this.$1_B[$p0],$p0));}},$1_15:function($p0){var $0=$($p0.target);this.selectTab($0.data('tabIndex'));}}
tab.TiledViewerRegion=function(regionPart,domNode,allowPanZoom,sheetID,viewModel){this.disposables=new tab.DisposableHolder();this.$0=regionPart;this.connectNode=$(domNode);this.domRectangle=tab.$create_DomRectangle();this.$1=sheetID;this.allowPanZoom=allowPanZoom;this.paneTableViewModel=viewModel;}
tab.TiledViewerRegion.prototype={allowPanZoom:null,connectNode:null,domRectangle:null,domDragImage:null,domDragMask:null,regionContent:null,scroller:null,isScrolling:false,wasScrolling:false,$0:null,$1:null,$2:null,$3:null,paneTableViewModel:null,get_name:function(){return this.get_regionPart();},get_regionPart:function(){return this.$0;},get_sheetid:function(){return this.$1;},get_contentProvider:function(){return this.regionContent;},set_contentProvider:function(value){if(ss.isValue(this.regionContent)){this.regionContent.remove_loadComplete(ss.Delegate.create(this,this.onRegionContentLoadComplete));}this.regionContent=value;if(ss.isValue(this.regionContent)){this.regionContent.add_loadComplete(ss.Delegate.create(this,this.onRegionContentLoadComplete));}return value;},get_sceneInfo:function(){if(this.$0!=='viz'){return null;}var $0=Type.safeCast(this.regionContent,tab.PaneTableCanvasView);if(ss.isNullOrUndefined($0)){return null;}var $1=$0.get_viewModel();return $1.get_scene();},turnOnWindowLogging:function(){if(!ss.isValue(tab.TiledViewerRegion.windowLog)){tab.TiledViewerRegion.windowLog=tab.Logger.getLoggerWithName('WindowAppender');}},reset:function(){},destroy:function(){this.disposables.dispose();this.allowPanZoom=null;if(ss.isValue(this.regionContent)){this.regionContent.remove_loadComplete(ss.Delegate.create(this,this.onRegionContentLoadComplete));this.regionContent.destroy();}},setGeometry:function(regionGeometry,viewSize,tileSize){if(this.regionContent!=null){this.regionContent.set_actualViewSize(tab.$create_Size(viewSize.w,viewSize.h));this.regionContent.reset(regionGeometry,tileSize);}},refreshImages:function(cacheInfo){if(this.regionContent!=null){this.regionContent.refreshImages(cacheInfo);}},onMarqueeMouseMove:function(e){var $0,$1,$2,$3;e.preventDefault();var $4=this.getIsMoveLeft(e);if($4){$0=e.get_gestureInfo().pageX;$3=this.getDragStartX(e);}else{$0=this.getDragStartX(e);$3=e.get_gestureInfo().pageX;}var $5=this.getIsMoveUp(e);if($5){$1=e.get_gestureInfo().pageY;$2=this.getDragStartY(e);}else{$1=this.getDragStartY(e);$2=e.get_gestureInfo().pageY;}var $6=tab.RecordCast.dojoCoordsAsRectXY(this.getLocalOffset());var $7=this.scroller.get_scrollPos();if(Type.canCast(this.regionContent,tab.VisualRegionCanvasView)){$6.x+=this.regionContent.get_scrollPos().x;$6.y+=this.regionContent.get_scrollPos().y;$7.x=0;$7.y=0;}$1-=$6.y;$2-=$6.y;$0-=$6.x;$3-=$6.x;var $8=$7.y;var $9=$7.x;var $A=$7.y+$6.h;var $B=$7.x+$6.w-1;var $C=0;var $D=0;var $E='slow';var $F=function($p1_0,$p1_1){
$E=(Math.abs($p1_0-$p1_1)>15)?'fast':'slow';};if($5){if($8>$1){$F($1,$8);$1=$8;$D=-1;}else if($1>=$A){$F($1,$A);$1=$A-1;$D=1;}}else{if($A<$2){$F($2,$A);$2=$A;$D=1;}else if($8>=$2){$F($2,$8);$2=$8+1;$D=-1;}}if($4){if($9>$0){$F($0,$9);$0=$9;$C=-1;}else if($0>=$B){$F($0,$B);$0=$B-1;$C=1;}}else{if($B<$3){$F($3,$B);$3=$B;$C=1;}else if($9>=$3){$F($3,$9);$3=$9+1;$C=-1;}}if(!!$C||!!$D){this.startScrolling($C,$D,$E);}else{this.stopScrolling();}var $10=tab.$create_Rect($0,$1,($3-$0),($2-$1));if(!this.isScrolling){tab.DomUtil.setMarginBoxJQ(this.domRectangle.dom,$10);this.domRectangle.dom.css('display','');}return $10;},debugWindowLog:function(a){if(ss.isValue(tab.TiledViewerRegion.windowLog)){}},toLocalCoords:function(position,doNotIncludeScroll){var $0=tab.RecordCast.dojoCoordsAsPoint(this.getLocalOffset(doNotIncludeScroll));var $1=tab.$create_Point(position.x-$0.x,position.y-$0.y);return $1;},toLocalCoordsRect:function(rect,doNotIncludeScroll){var $0=tab.RecordCast.dojoCoordsAsPoint(this.getLocalOffset(doNotIncludeScroll));var $1=tab.$create_RectXY(rect.x-$0.x,rect.y-$0.y,rect.w,rect.h);return $1;},toLocalCoordsEvent:function(ev,doNotIncludeScroll){var $0=tab.$create_Point(ev.get_gestureInfo().pageX,ev.get_gestureInfo().pageY);return this.toLocalCoords($0,doNotIncludeScroll);},getLocalOffset:function(doNotIncludeScroll){var $0=tab.DomUtil.getDojoCoordsJQ(this.connectNode);if((ss.isValue(doNotIncludeScroll)&&doNotIncludeScroll)||ss.isNullOrUndefined(this.regionContent)){return $0;}$0.x-=this.regionContent.get_scrollPos().x;$0.y-=this.regionContent.get_scrollPos().y;return $0;},getPaneDescriptorFromSelectionAnchor:function(selectionAnchor){this.ensureHitTestStructure();var $0=new tab.HitTester(this.$2);var $1=tab.$create_RectXY(selectionAnchor.x,selectionAnchor.y,1,1);var $2=$0.hitTestPanes($1);if(!$2.length){return '';}var $3=$2[0];var $4=this.get_sceneInfo().getPaneDrawInfoFromKey($3);return $4.get_paneDescriptorKey();},hitTestVisualParts:function(rect){var $0=tab.MetricsLogger.get_instance().createContext('TiledViewerRegion::HitTestVisualParts');var $1=false;var $2=this.get_contentProvider();var $3=$2.get_viewModel();var $4=$3.get_refLineVisualLists();if(ss.isValue($4)){var $enum1=ss.IEnumerator.getEnumerator($4);while($enum1.moveNext()){var $5=$enum1.current;if(!$1&&tab.VisualPartsHitTest.hitTestRefLine($5.drawItems,rect)){$1=true;break;}}}this.ensureTrendLineHitTestStructure();if(!$1&&tab.VisualPartsHitTest.hitTestTrendLines(this.$3,rect)){$1=true;}$0.close();return $1;},hitTestMarks:function(selRect,isSingleSelect){var $0=tab.MetricsLogger.get_instance().createContext('TiledViewerRegion::HitTestMarks');this.ensureHitTestStructure();var $1=new tab.HitTester(this.$2);var $2=$1.hitTest(selRect,isSingleSelect,this.get_sceneInfo());$0.close();if($2.length>0){}var $3=[];$2.forEach(function($p1_0){
$3.add(parseInt($p1_0));});return $3;},doSelectNodeFromPoint:function(coords,action){var $0=this.get_contentProvider();var $1=$0.get_viewModel();var $2=this.hitTestNodes(coords,$1);var $3=ss.isValue($2);if($3){$1.selectNode(coords,$2,action);}return $3;},hitTestNodes:function(coords,vlvm){var $0=_.find(vlvm.get_groupItemNodes(),function($p1_0){
var $1_0=tab.RecordCast.rectJsonAsRectXY($p1_0.pixelExtents);return tab.RectXYUtil.inRect($1_0,coords);});return $0;},doSelectMarkFromPoint:function(coords,action){var $0=tab.$create_RectXY(coords.x,coords.y,1,1);var $1=this.doSelectMarkFromRect($0,true,action);return $1;},doSelectMarkFromRect:function(rect,isSingleSelect,action){var $0=this.hitTestMarks(rect,isSingleSelect);tab.SelectionClientCommands.selectMarksLocal($0,this.get_sheetid(),action,!isSingleSelect);return $0;},doSelectMarkAndUbertipFromRect:function(rect,isSingleSelect,action,ubertipParams){var $0=this.hitTestMarks(rect,isSingleSelect);tab.SelectionClientCommands.selectMarksLocal($0,this.get_sheetid(),action,!isSingleSelect,ubertipParams);return $0;},$4:function($p0,$p1){if($p1.get_propertyName()==='scene'||$p1.get_propertyName()==='vizdata'){this.$2=null;this.$3=null;}},ensureHitTestStructure:function(){if(ss.isNullOrUndefined(this.$2)){this.$2=tab.HitTestStructureBuilder.buildLinearHitTestStructure(this.get_sceneInfo());}},ensureTrendLineHitTestStructure:function(){if(ss.isNullOrUndefined(this.$3)){this.$3=[];var $0=this.get_contentProvider();var $1=$0.get_viewModel();var $2=$1.get_trendLineVisualLists();if(ss.isValue($2)){var $enum1=ss.IEnumerator.getEnumerator($2);while($enum1.moveNext()){var $3=$enum1.current;var $4=$3.drawItems;var $5=1;var $enum2=ss.IEnumerator.getEnumerator($4);while($enum2.moveNext()){var $6=$enum2.current;if($6.type==='draw-group'){var $7=$6;var $enum3=ss.IEnumerator.getEnumerator($7.drawItems);while($enum3.moveNext()){var $8=$enum3.current;switch($8.type){case 'draw-pen':var $9=$8;if(ss.isValue($9.strokeWidth)){$5=$9.strokeWidth;}break;case 'draw-path':var $A=$8;var $B=tab.HitTestStructureBuilder.buildTrendLineHitTestStructure($A,$5);this.$3.add($B);break;default:break;}}}}}}}},onRegionContentLoadComplete:function(sender,e){}}
tab.ChecklistContentFormatter=function(itemName,hideSel,showFacets,isAll,pendingManager){this.$0=['<div class="','','" id="','','"><div class="facet">','','</div><div class="facetOverflow"><input type="checkbox" class="FICheckRadio" name="','','" ','','/><a title="','','">','','</a></div></div>'];this.$1=itemName;this.$2=hideSel;this.$3=showFacets;this.$4=isAll;this.$5=pendingManager;}
tab.ChecklistContentFormatter.$6=function($p0,$p1,$p2,$p3,$p4,$p5,$p6,$p7){var $0=($p7)?'FIItem FIPending':'FIItem';$p0[1]=$0;$p0[3]=$p0[7]=$p1;$p0[9]='';$p0[11]=$p0[13]=$p2;$p0[5]=($p6)?$p3:'';if((($p5||$p4)&&!$p7)||(!($p5||$p4)&&$p7)){$p0[1]+=' FIChecked';$p0[9]+=' checked ="checked" ';}return $p0.join('');}
tab.ChecklistContentFormatter.prototype={$1:null,$2:false,$3:false,$4:false,$5:null,destroy:function(){},format:function(data,role,pos,range){var $0='';var $1=Type.safeCast(data,Array);if(ss.isNullOrUndefined(pos)){return $0;}if(ss.isNullOrUndefined(range)){return $0;}if(!this.isValid($1)){return $0;}$0+='<div class="tile tab-ctrl-formatted-text" style="top: '+pos.y.toString()+'px; left: 0; right: 0; position: absolute;">';for(var $2=0,$3=range.get_from();$2<$1.length;++$2,++$3){var $4=tableau.format.escapeHTML(this.$1+'_'+$3);var $5=tableau.format.formatTupleDisplayName($1[$2],false,role);var $6=tableau.format.formatTupleDisplayFacet($1[$2],false,role);$0+=tab.ChecklistContentFormatter.$6(this.$0,$4,$5,$6,$1[$2].s&&!this.$2,this.$4&&!this.$2,this.$3,ss.isValue(this.$5)&&this.$5.isPending($1[$2],$3));}$0+='</div>';return $0;},isValid:function(data){var $0=Type.safeCast(data,Array);return ss.isValue($0)&&!!$0.length;}}
tab.ContentFetchedEventArgs=function(tileIndex,itemRange,data){tab.ContentFetchedEventArgs.initializeBase(this);this.$1_0=tileIndex;this.$1_1=itemRange;this.$1_2=data;}
tab.ContentFetchedEventArgs.prototype={$1_0:0,$1_1:null,$1_2:null,get_data:function(){return this.$1_2;},get_tileIndex:function(){return this.$1_0;},get_itemRange:function(){return this.$1_1;}}
tab.FetchInfo=function(tileIndex,range,rangeType){this.$0=tileIndex;this.$1=range;this.$2=rangeType;}
tab.FetchInfo.prototype={$0:0,$1:null,$2:null,get_tileIndex:function(){return this.$0;},get_range:function(){return this.$1;},get_rangeType:function(){return this.$2;}}
tab.FilterContentFetcher=function(sheetSessionRef,filterName,domain){this.$0=filterName;this.$1=sheetSessionRef;this.$2=domain;this.$3=[];this.$4=[];}
tab.FilterContentFetcher.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:5,$6:false,add_contentFetched:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_contentFetched:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,destroy:function(){},fetch:function(fetchList){for(var $0=0;$0<fetchList.length;++$0){var $1=fetchList[$0];if(this.$3.contains($1.get_tileIndex())){continue;}this.$3.add($1.get_tileIndex());this.$4.add($1);}while(this.$4.length>this.$5){var $2=this.$4[0];this.$3.remove($2.get_tileIndex());this.$4.remove($2);}this.$A();},isTilePending:function(tileIndex){return this.$3.contains(tileIndex);},$8:function($p0){var $0=ss.Delegate.create(this,function(){
this.$9($p0);});return $0;},$9:function($p0){var $0=ss.Delegate.create(this,function($p1_0){
this.$6=false;this.$3.remove($p0.get_tileIndex());var $1_0=new tab.ContentFetchedEventArgs($p0.get_tileIndex(),$p0.get_range(),$p1_0);this.$7(this,$1_0);this.$A();});var $1=ss.Delegate.create(this,function($p1_0){
this.$6=false;this.$3.remove($p0.get_tileIndex());this.$A();});this.$1.getFilterItems(this.$0,this.$2,$p0.get_range(),$0,$1);},$A:function(){if(this.$4.length>0&&!this.$6){this.$6=true;var $0=this.$4.length-1;var $1=this.$4[$0];this.$4.removeAt($0);var $2=this.$8($1);window.setTimeout($2,0);}}}
tab.FilterListUI=function(windowEl,totalHeight,tileCount){this.$1=$(windowEl);this.$1.addClass('tiledContent');var $0=document.createElement('div');this.$2=$($0);this.$2.css('left','0px');this.$2.css('position','relative');this.$2.css('height',totalHeight+'px');this.$2.css('width',this.$1.css('width')+'px');this.$2.addClass('tileContainer');this.$1.append(this.$2);this.$1.scroll(ss.Delegate.create(this,this.$8));this.$3=new Array(tileCount);}
tab.FilterListUI.prototype={$1:null,$2:null,$3:null,$4:null,$5:0,$6:0,add_scrolled:function(value){this.$7=ss.Delegate.combine(this.$7,value);},remove_scrolled:function(value){this.$7=ss.Delegate.remove(this.$7,value);},$7:null,get_windowNode:function(){return this.$1;},get_tileContainerNode:function(){return this.$2;},destroy:function(){this.$1.unbind('scroll');this.$2.remove();},setContent:function(tileIndex,htmlContent){var $0=$(htmlContent);this.$2.append($0);this.$3[tileIndex]=$0;},getTileElement:function(index){if(index<0||index>=this.$3.length){return null;}return this.$3[index].get(0);},getItemElement:function(tileIndex,itemIndex){var $0=this.getTileElement(tileIndex);if($0==null){return null;}var $1=$0.children;if($1.length<itemIndex||itemIndex<0){return null;}return $1[itemIndex];},$8:function($p0){var $0=Date.get_now().getMilliseconds();var $1=this.$1.scrollTop();var $2=0;if(this.$4!=null){var $5=Math.abs(this.$6-$1);var $6=$0-this.$5;$2=$5/$6;}var $3=new tab.ScrolledEventArgs(tab.$create_Point(0,$1));this.$6=$1;this.$5=$0;this.$4=$3;var $4=ss.Delegate.create(this,function(){
if($3===this.$4){this.$7(this,$3);}});if($2>tab.FilterListUI.$0){window.setTimeout($4,100);}else{$4();}}}
tab.ListGridModel=function(itemCount,itemHeight,tileSize,viewportHeight){this.$0=itemCount;this.$1=itemHeight;this.$2=tileSize;this.$3=viewportHeight;this.$4=this.$0*this.$1;this.$5=Math.ceil(itemCount/tileSize);this.$6={};var $0=0;var $1=tileSize*itemHeight;var $2=this.$4;for(var $3=0;$3<this.$5;++$3){if($2<$1){$1=$2;}var $4=new tab.IntegerRange($0,$0+$1-1);var $5=tab.IntegerRange.pixelToItemRange($4,itemHeight);var $6=new tab.vqlui$A($3,false,tab.$create_Point(0,$0),$5,'item');this.$6[$3]=$6;$2-=$1;$0+=$1;}}
tab.ListGridModel.prototype={$0:0,$1:0,$2:0,$3:0,$4:0,$5:0,$6:null,get_totalHeight:function(){return this.$4;},get_itemHeight:function(){return this.$1;},get_tileCount:function(){return this.$5;},get_viewportHeight:function(){return this.$3;},destroy:function(){},updateViewport:function(width,height){this.$3=height;},getTileStatus:function(index){var $0=this.$6[index];if(ss.isUndefined($0)){return false;}return $0.get_$6();},updateTileStatus:function(index,hasLoaded){var $0=this.$6[index];if(ss.isUndefined($0)){return;}this.$6[index].set_$6(hasLoaded);},getTilePosition:function(index){var $0=this.$6[index];if(ss.isUndefined($0)){return null;}return tab.$create_Point($0.get_$7().x,$0.get_$7().y);},getTileRange:function(index){var $0=this.$6[index];if(ss.isUndefined($0)){return null;}return new tab.IntegerRange($0.get_$8().get_from(),$0.get_$8().get_to());},getTileRangeType:function(index){var $0=this.$6[index];if(ss.isUndefined($0)){return 'unknown';}return $0.get_$9();},pixelToTileRange:function(pixelRange){return tab.IntegerRange.pixelToTileRange(pixelRange,this.$1,this.$2);},itemToTileIndex:function(itemIndex){var $0=Math.floor(itemIndex/this.$2);return $0;},globalToLocalItemIndex:function(globalItemIndex){return globalItemIndex%this.$2;}}
tab.RadiolistContentFormatter=function(itemName,showFacets,isAll){this.$0=['<div class="','','" id="','','"><div class="facet">','','</div><div class="facetOverflow"><input type="radio" class="FICheckRadio" name="','','" ','','/><a title="','','">','','</a></div></div>'];this.$1=itemName;this.$2=showFacets;this.$3=isAll;}
tab.RadiolistContentFormatter.$4=function($p0,$p1,$p2,$p3,$p4,$p5,$p6,$p7){$p0[1]='FIItem';$p0[3]=$p1;$p0[7]=$p2;$p0[9]='';$p0[11]=$p0[13]=$p3;if($p7){$p0[5]=$p4;}if($p5&&!$p6){$p0[1]+=' FIChecked';$p0[9]+=' checked ="checked" ';}return $p0.join('');}
tab.RadiolistContentFormatter.prototype={$1:null,$2:false,$3:false,destroy:function(){},format:function(data,role,pos,range){var $0='';var $1=Type.safeCast(data,Array);if(ss.isNullOrUndefined(pos)){return $0;}if(ss.isNullOrUndefined(range)){return $0;}if(!this.isValid($1)){return $0;}$0+='<div class="tile tab-ctrl-formatted-text" style="top: '+pos.y.toString()+'px; position: absolute;">';for(var $2=0,$3=range.get_from();$2<$1.length;++$2,++$3){var $4=tableau.format.escapeHTML(this.$1+'_'+$3);var $5=tableau.format.formatTupleDisplayName($1[$2],false,role);var $6=tableau.format.formatTupleDisplayFacet($1[$2],false,role);$0+=tab.RadiolistContentFormatter.$4(this.$0,$4,this.$1,$5,$6,(this.$3)?false:$1[$2].s,this.$3,this.$2);}$0+='</div>';return $0;},isValid:function(data){var $0=Type.safeCast(data,Array);return ss.isValue($0)&&!!$0.length;}}
tab.ScrolledEventArgs=function(newPos){tab.ScrolledEventArgs.initializeBase(this);this.$1_0=newPos;}
tab.ScrolledEventArgs.prototype={$1_0:null,get_newPos:function(){return this.$1_0;}}
tab.SimpleListContentFormatter=function(itemName,showFacets){this.$0=itemName;this.$1=showFacets;}
tab.SimpleListContentFormatter.getter=function(template,id,dname,facet,showFacets,isDropdown){template[1]='FIItem';if(isDropdown){template[1]+=' FISimpleDropdownItem';}template[3]=id;template[7]=template[9]=dname;template[5]=(showFacets)?facet:'';return template.join('');}
tab.SimpleListContentFormatter.prototype={$0:null,$1:false,destroy:function(){},format:function(data,role,pos,range){var $0='';var $1=Type.safeCast(data,Array);if(ss.isNullOrUndefined(pos)){return $0;}if(ss.isNullOrUndefined(range)){return $0;}if(!this.isValid($1)){return $0;}$0+='<div class="tile tab-ctrl-formatted-text" style="top: '+pos.y.toString()+'px; left: 0; right: 0; position: absolute;">';for(var $2=0,$3=range.get_from();$2<$1.length;++$2,++$3){var $4=tableau.format.escapeHTML(this.$0+'_'+$3);var $5=tableau.format.formatTupleDisplayName($1[$2],false,role);var $6=tableau.format.formatTupleDisplayFacet($1[$2],false,role);$0+=tab.SimpleListContentFormatter.getter(tab.SimpleListContentFormatter.simpleListTemplate,$4,$5,$6,this.$1,true);}$0+='</div>';return $0;},isValid:function(data){return true;}}
tab.TiledWidget=function(fetcher,gridModel,ui,formatter,firstTileData,preloadEverything,role){this.$1=fetcher;this.$2=gridModel;this.$3=formatter;this.$4=role;this.ui=ui;if(this.$3.isValid(firstTileData)){this.$6(0,firstTileData,this.$4);}this.$1.add_contentFetched(ss.Delegate.create(this,this.$A));if(preloadEverything){this.$8();}else{this.ui.add_scrolled(ss.Delegate.create(this,this.$9));}}
tab.TiledWidget.prototype={$1:null,$2:null,$3:null,$4:null,ui:null,$5:100,destroy:function(){this.ui.remove_scrolled(ss.Delegate.create(this,this.$9));this.ui.destroy();this.ui=null;this.$4=null;this.$1.remove_contentFetched(ss.Delegate.create(this,this.$A));this.$1.destroy();this.$1=null;this.$2.destroy();this.$2=null;this.$3.destroy();this.$3=null;},updateViewport:function(width,height){this.$2.updateViewport(width,height);},getElement:function(globalItemIndex){var $0=this.$2.itemToTileIndex(globalItemIndex);if(!this.$2.getTileStatus($0)){return null;}else{var $1=this.$2.globalToLocalItemIndex(globalItemIndex);return this.ui.getItemElement($0,$1);}},$6:function($p0,$p1,$p2){var $0=this.$3.format($p1,$p2,this.$2.getTilePosition($p0),this.$2.getTileRange($p0));if(!$0.length){return;}this.ui.setContent($p0,$0);this.$2.updateTileStatus($p0,true);},$7:function($p0){var $0=this.$2.getTileRangeType($p0);var $1=this.$2.getTileRange($p0);var $2=new tab.FetchInfo($p0,$1,$0);return $2;},$8:function(){var $0=[];var $1=this.$2.get_tileCount();for(var $2=1;$2<$1;++$2){var $3=this.$7($2);$0.add($3);}this.$1.fetch($0);},$9:function($p0,$p1){var $0=this.$5*this.$2.get_itemHeight();var $1=$p1.get_newPos().y-$0;if($1<0){$1=0;}var $2=$p1.get_newPos().y+$0+this.$2.get_viewportHeight();if($2>this.$2.get_totalHeight()-1){$2=this.$2.get_totalHeight()-1;}var $3=new tab.IntegerRange($1,$2);var $4=this.$2.pixelToTileRange($3);var $5=[];var $6=$4.get_from();var $7=$4.get_to();for(var $8=$6;$8<=$7;++$8){if(this.$2.getTileStatus($8)||this.$1.isTilePending($8)){continue;}var $9=this.$7($8);$5.add($9);}this.$1.fetch($5);},$A:function($p0,$p1){var $0=$p1.get_tileIndex();var $1=$p1.get_data();this.$6($0,$1,this.$4);}}
tab.TiledWidgetFactory=function(){}
tab.TiledWidgetFactory.createChecklist=function(widgetParams){var $0=new tab.ChecklistContentFormatter(widgetParams.filterName,widgetParams.hideSel,widgetParams.showFacets,widgetParams.isAll,widgetParams.pendingManager);return tab.TiledWidgetFactory.$0(widgetParams.tuples,widgetParams.div,$0,widgetParams.domain,widgetParams.field,widgetParams.isTiled,widgetParams.session,widgetParams.fieldRole,widgetParams.actualTupleCount,widgetParams.lineHeight);}
tab.TiledWidgetFactory.createRadiolist=function(widgetParams){var $0=new tab.RadiolistContentFormatter(widgetParams.filterName,widgetParams.showFacets,widgetParams.isAll);return tab.TiledWidgetFactory.$0(widgetParams.tuples,widgetParams.div,$0,widgetParams.domain,widgetParams.field,widgetParams.isTiled,widgetParams.session,widgetParams.fieldRole,widgetParams.actualTupleCount,widgetParams.lineHeight);}
tab.TiledWidgetFactory.createSimpleList=function(widgetParams){var $0=new tab.SimpleListContentFormatter(widgetParams.filterName,widgetParams.showFacets);return tab.TiledWidgetFactory.$0(widgetParams.tuples,widgetParams.div,$0,widgetParams.domain,widgetParams.field,widgetParams.isTiled,widgetParams.session,widgetParams.fieldRole,widgetParams.actualTupleCount,widgetParams.lineHeight);}
tab.TiledWidgetFactory.$0=function($p0,$p1,$p2,$p3,$p4,$p5,$p6,$p7,$p8,$p9){var $0=($p5)?tsConfig.filterTileSize:$p8;dojo.style($p1,'position','relative');var $1=$p8*$p9;var $2=(!!$0)?Math.ceil($p8/$0):0;var $3=new tab.FilterListUI($p1,$1,$2);var $4=dojo.marginBox($p1);var $5=new tab.ListGridModel($p8,$p9,$0,$4.h);var $6=new tab.FilterContentFetcher($p6,$p4,$p3);var $7=$p0.slice(0,$0);var $8=new tab.TiledWidget($6,$5,$3,$p2,$7,false,$p7);return $8;}
tab.TiledWidgetParams=function(tuples,actualTupleCount,isTiled,div,filterName,hideSel,showFacets,isAll,session,domain,field,fieldRole,pendingManager,lineHeight){this.tuples=tuples;this.actualTupleCount=actualTupleCount;this.isTiled=isTiled;this.div=div;this.filterName=filterName;this.hideSel=hideSel;this.showFacets=showFacets;this.isAll=isAll;this.session=session;this.domain=domain;this.field=field;this.fieldRole=fieldRole;this.pendingManager=pendingManager;this.lineHeight=lineHeight;}
tab.TiledWidgetParams.prototype={tuples:null,actualTupleCount:0,isTiled:false,div:null,filterName:null,hideSel:false,showFacets:false,isAll:false,session:null,domain:null,field:null,fieldRole:null,pendingManager:null,lineHeight:0}
tab.vqlui$A=function(tileIndex,hasLoaded,pos,range,rangeType){this.$1=tileIndex;this.$0=hasLoaded;this.$2=pos;this.$3=range;this.$4=rangeType;}
tab.vqlui$A.prototype={$0:false,$1:0,$2:null,$3:null,$4:null,get_$5:function(){return this.$1;},get_$6:function(){return this.$0;},set_$6:function($p0){this.$0=$p0;return $p0;},get_$7:function(){return this.$2;},get_$8:function(){return this.$3;},get_$9:function(){return this.$4;}}
tab.TiledWindow=function(domNode,session,controller,getRequestID,shouldScrollDomNode){this.$B=getRequestID;this.$0=domNode;this.$3=session;this.$C=controller;this.$F=shouldScrollDomNode;this.$2=tab.$create_RegionRect(0,0,0,0,'');this.$8=tab.$create_Size(0,0);this.$1=new tab.DownloadQueue();this.$1.add_imageLoaded(ss.Delegate.create(this,this.$14));this.$1.add_imageTimedOut(ss.Delegate.create(this,this.$15));this.$1.add_complete(ss.Delegate.create(this,this.$16));this.$5=[];this.$4=$('.tvimagesContainer',this.$0);}
tab.TiledWindow.prototype={$0:null,$1:null,$2:null,$3:null,$4:null,$5:null,$6:0,$7:0,$8:null,$9:null,$A:0,$B:null,$C:null,$D:0,$E:0,$F:false,add_loadComplete:function(value){this.$10=ss.Delegate.combine(this.$10,value);},remove_loadComplete:function(value){this.$10=ss.Delegate.remove(this.$10,value);},$10:null,get_actualViewSize:function(){return tab.$create_Size(this.$0.clientWidth,this.$0.clientHeight);},set_actualViewSize:function(value){return value;},get_effectiveViewSize:function(){return this.get_actualViewSize();},get_scrollPos:function(){return tab.$create_Point(this.get_left(),this.get_top());},set_scrollPos:function(value){this.set_left(value.x);this.set_top(value.y);this.$11(false);return value;},get_canScrollX:function(){return this.get_docSize().w>this.get_effectiveViewSize().w;},get_canScrollY:function(){return this.get_docSize().h>this.get_effectiveViewSize().h;},get_docSize:function(){return tab.$create_Size(this.$2.w,this.$2.h);},get_left:function(){return this.$E;},set_left:function(value){this.$E=value;if(this.$F){this.$0.scrollLeft=value;}return value;},get_top:function(){return this.$D;},set_top:function(value){this.$D=value;if(this.$F){this.$0.scrollTop=value;}return value;},destroy:function(){this.$1.destroy();while(this.$A>0){this.$A--;this.$3.decrementWait();}this.$B=null;this.$C=null;},refreshImages:function(newCacheInfo){if(!ss.isValue(this.$2)||tab.SizeUtil.isEmpty(tab.RecordCast.regionRectAsSize(this.$2))){return;}if(ss.isNullOrUndefined(newCacheInfo)){return;}this.$9=newCacheInfo;this.$12();this.$11(true);},reset:function(newGeometry,newTileSize){var $0=this.$2;var $1=this.$8;this.$2=newGeometry;this.$8=newTileSize;if(ss.isNullOrUndefined(this.$2)||tab.SizeUtil.isEmpty(tab.RecordCast.regionRectAsSize(this.$2))){return;}if(ss.isValue($0)&&$0.w===this.$2.w&&$0.h===this.$2.h&&$1.w===this.$8.w&&$1.h===this.$8.h){return;}var $2=this.get_top();var $3=this.get_left();this.$6=Math.ceil(this.$2.w/this.$8.w);this.$7=Math.ceil(this.$2.h/this.$8.h);this.$4.width(this.$2.w);this.$4.height(this.$2.h);this.set_top(Math.min($2,Math.max(0,this.$2.h-this.$0.offsetHeight)));this.set_left(Math.min($3,Math.max(0,this.$2.w-this.$0.offsetWidth)));},setXPos:function(xPos){this.set_scrollPos(tab.$create_Point(xPos,this.get_scrollPos().y));},setYPos:function(yPos){this.set_scrollPos(tab.$create_Point(this.get_scrollPos().x,yPos));},$11:function($p0){if(!ss.isValue($p0)){$p0=false;}if(!ss.isValue(this.$2)||tab.SizeUtil.isEmpty(tab.RecordCast.regionRectAsSize(this.$2))){return;}if(!ss.isValue(this.$9)){return;}var $0=this.get_left();var $1=$0+this.$0.clientWidth;var $2=this.get_top();var $3=$2+this.$0.clientHeight;var $4=Math.max(Math.floor($0/this.$8.w),0);var $5=Math.min(Math.ceil($1/this.$8.w),this.$6);var $6=Math.max(Math.floor($2/this.$8.h),0);var $7=Math.min(Math.ceil($3/this.$8.h),this.$7);this.$1.clear();if(!ss.isValue(this.$3)){return;}if(!!$p0){var $A=this.$A;this.$A=Math.max((($5-$4)*($7-$6)),0);if($A<=0&&this.$A>0){this.$3.incrementWait(false);}}var $8='';var $9=0;if(ss.isValue(this.$B)){$8=this.$B();}if(ss.isValue(this.$C)){$9=this.$C.get_cacheVersion();}for(var $B=$4;$B<$5;$B++){var $C=Math.min(this.$8.w,this.$2.w-($B*this.$8.w));for(var $D=$6;$D<$7;++$D){var $E=Math.min(this.$8.h,this.$2.h-($D*this.$8.h));var $F=($D*this.$6)+$B;var $10=tab.$create_Rect(($B*this.$8.w),($D*this.$8.h),$C,$E);var $11=this.$3.formatTileURL(this.$9,this.$2.r,$B,$D,$8);var $12=new tab.ImageDownloaderImageData(this.$5[$F],$F,$11,$10,$9);this.$1.addImage($12);}}},$12:function(){this.$5=new Array(this.$6*this.$7);this.$4.prop('_deferredClear',true);},$13:function(){this.$A--;if(!this.$A){this.$3.decrementWait();}},$14:function($p0,$p1){this.$13();if(ss.isValue($p1.get_image().get_imageNode())){var $0=$p1.get_image().get_imageNode();var $1=tab.RenderUtil.calculatePixelRatio(false);if(tab.FloatUtil.isGreaterThan($1,1)){var $4=$($0);$4.css('width',$p1.get_image().get_bounds().w.toString()+'px');$4.css('height',$p1.get_image().get_bounds().h.toString()+'px');}var $2=$p1.get_image().get_index();var $3=this.$C.get_cacheVersion();if((!ss.isValue(this.$5[$2])||$(this.$5[$2]).attr('src')!==$($0).attr('src'))&&$p1.get_image().get_version()===$3){this.$5[$2]=$0;var $5=$0;var $6=0;var $7=this.$4.length;this.$4.each(function($p1_0,$p1_1){
var $1_0=$($p1_1);if($1_0.prop('_deferredClear')){$1_0.prop('_deferredClear',null);$1_0.empty();}$p1_1.appendChild($5);if($6<$7-1){$5=$5.cloneNode(false);}$6++;});}}},$15:function($p0,$p1){this.$13();},$16:function($p0,$p1){if(ss.isValue(this.$10)){this.$10(this,ss.EventArgs.Empty);}}}
tab.ToggleSwitch=function(){}
tab.ToggleSwitch.createToggleControl=function(changeHandler,labelClass,isChecked){var $0=$(String.format("<label class='tabToggleSwitchLabel'>\n            <input type='checkbox' />\n            <span class='tabSwitch'>\n                <span class='tabSwitchOn'>{0}</span>\n                <span class='tabSwitchOff'>{1}</span>\n                <span class='tabSwitchBlock'></span>\n            </span>\n        </label>",tab.Strings.AuthOnLabel,tab.Strings.AuthOffLabel));var $1=$0.find('.tabSwitch');$0.addClass(labelClass);var $2=$0.find('input');if(isChecked){$2.prop('checked',true);$1.css('left','0');}tab.ClickHandler.targetAndPress($0,function($p1_0){
var $1_0=$2.prop('checked');$1.css('left',($1_0)?'-50px':'0');$2.prop('checked',!$1_0);changeHandler(!$1_0);});return $0;}
tab.ToolbarButton=function(clickAction){tab.ToolbarButton.initializeBase(this,[$('<a>').addClass('tab-toolbar-button')]);this.$1_0=clickAction;this.$1_1=new tab.ClickHandler().onClick(ss.Delegate.create(this,this.$1_2));this.buttonElement=this.get_element();this.setEnabled(true);}
tab.ToolbarButton.prototype={buttonElement:null,$1_0:null,$1_1:null,get_clickHandler:function(){return this.$1_1;},setEnabled:function(enabled){if(enabled){this.buttonElement.removeClass('tab-disabled');this.buttonElement.addClass('tab-enabled');}else{this.buttonElement.removeClass('tab-enabled');this.buttonElement.addClass('tab-disabled');}return this;},setTooltip:function(tooltip){this.buttonElement.prop('title',tooltip);return this;},bindEvents:function(){this.$1_1.setTarget(this.buttonElement);},$1_2:function(){if(this.buttonElement.hasClass('tab-enabled')){this.$1_0();}}}
tab.ToolbarIconButton=function(clickAction){tab.ToolbarIconButton.initializeBase(this,[clickAction]);}
tab.ToolbarIconButton.prototype={iconElement:null,setIcon:function(iconClass){if(!ss.isValue(this.iconElement)){this.iconElement=$('<span>');this.iconElement.appendTo(this.buttonElement);}this.iconElement.removeClass().addClass('tab-toolbar-button-icon').addClass(iconClass);return this;}}
tab.ToolbarTextButton=function(clickAction){tab.ToolbarTextButton.initializeBase(this,[clickAction]);this.buttonElement.addClass('tab-toolbar-text-button');}
tab.ToolbarTextButton.prototype={leftIcon:null,textElement:null,rightIcon:null,get_textWidth:function(){return this.textElement.width();},set_textWidth:function(value){this.textElement.width(value);return value;},removeTextWidth:function(){this.textElement.width('auto');},setText:function(text){if(!ss.isValue(this.textElement)){this.textElement=$('<span>').addClass('tab-toolbar-button-text');if(ss.isValue(this.leftIcon)){this.textElement.insertAfter(this.leftIcon);}else{this.textElement.prependTo(this.buttonElement);}}this.textElement.text(text);return this;},setLeftIcon:function(iconClass){if(!ss.isValue(this.leftIcon)){this.leftIcon=$('<span>');this.leftIcon.prependTo(this.buttonElement);}this.leftIcon.removeClass().addClass('tab-toolbar-button-left-icon').addClass(iconClass);return this;},setRightIcon:function(iconClass){if(!ss.isValue(this.rightIcon)){this.rightIcon=$('<span>');this.rightIcon.appendTo(this.buttonElement);}this.rightIcon.removeClass().addClass('tab-toolbar-button-right-icon').addClass(iconClass);return this;}}
tab.Tooltip=function(){this.$1_8=16;this.$1_9=0;tab.Tooltip.initializeBase(this,[tab.Tooltip.$1_E()]);this.$1_3=new tab.Button(false);this.$1_3.set_label('close');this.$1_3.add_clicked(ss.Delegate.create(this,this.$1_F));tab.HoverAddClassBehavior.attach(this.$1_3);}
tab.Tooltip.$1_E=function(){return tab.Tooltip.$1_4||(tab.Tooltip.$1_4=$("\n<div class='tab-tooltip'>\n  <div class='tab-tooltipContainer'>\n    <div class='tab-tooltipX'></div>\n    <div class='tab-tooltipContent' waiRole='alert'></div>\n  </div>\n  <div class='tab-tooltipConnector'></div>\n</div>"));}
tab.Tooltip.prototype={tupleId:null,interactedTupleId:null,$1_3:null,$1_5:false,$1_6:false,$1_7:null,add_closed:function(value){this.$1_A=ss.Delegate.combine(this.$1_A,value);},remove_closed:function(value){this.$1_A=ss.Delegate.remove(this.$1_A,value);},$1_A:null,add_showing:function(value){this.$1_B=ss.Delegate.combine(this.$1_B,value);},remove_showing:function(value){this.$1_B=ss.Delegate.remove(this.$1_B,value);},$1_B:null,add_showed:function(value){this.$1_C=ss.Delegate.combine(this.$1_C,value);},remove_showed:function(value){this.$1_C=ss.Delegate.remove(this.$1_C,value);},$1_C:null,add_moved:function(value){this.$1_D=ss.Delegate.combine(this.$1_D,value);},remove_moved:function(value){this.$1_D=ss.Delegate.remove(this.$1_D,value);},$1_D:null,get_defaultShowCloseButton:function(){return this.$1_6;},set_defaultShowCloseButton:function(value){this.$1_6=value;return value;},get_isShown:function(){return this.$1_5;},get_closeButton:function(){return this.$1_3;},get_body:function(){return this.get_element().find('.tab-tooltipContent');},set_body:function(value){this.get_element().find('.tab-tooltipContent').empty().append(value);return value;},get_location:function(){return this.$1_7;},set_location:function(value){this.move(value);return value;},get_horizontalOffset:function(){return this.$1_9;},set_horizontalOffset:function(value){this.$1_9=value;return value;},get_verticalOffset:function(){return this.$1_8;},set_verticalOffset:function(value){this.$1_8=value;return value;},show:function(body,position,showClose){this.close();this.set_body(body);var $0=(ss.isValue(showClose))?showClose:this.$1_6;this.ensureAttachedAndSized($0);tab.BrowserViewport.getViewport(ss.Delegate.create(this,function($p1_0){
var $1_0=this.positionTooltip(position,$p1_0);if($0){this.get_element().find('.tab-tooltipX').html('').append(this.$1_3.get_element());this.$1_3.set_disabled(false);}else{this.$1_3.get_element().remove();this.$1_3.set_disabled(true);}this.onShowing($1_0);this.get_element().show();this.$1_5=true;this.onShowed($1_0);}));},move:function(position){if(!this.$1_5||(this.$1_7.x===position.x&&this.$1_7.y===position.y)){return;}tab.BrowserViewport.getViewport(ss.Delegate.create(this,function($p1_0){
var $1_0=this.positionTooltip(position,$p1_0);this.onMoved($1_0);}));},close:function(){if(!this.$1_5){return;}this.detach();this.$1_5=false;this.onClosed(ss.EventArgs.Empty);},dispose:function(){this.close();this.$1_3.remove_clicked(ss.Delegate.create(this,this.$1_F));this.$1_3.dispose();tab.Tooltip.callBaseMethod(this, 'dispose');},onShowed:function(args){if(ss.isValue(this.$1_C)){this.$1_C(this,args);}},onMoved:function(args){if(ss.isValue(this.$1_D)){this.$1_D(this,args);}},onShowing:function(args){if(ss.isValue(this.$1_B)){this.$1_B(this,args);}},onClosed:function(args){if(ss.isValue(this.$1_A)){this.$1_A(this,args);}},ensureAttachedAndSized:function(showCloseButton){var $0=$('body');if(this.get_element().parent()===$0){return;}this.get_element().appendTo($0);},detach:function(){this.get_element().hide();this.get_element().detach();this.get_element().unbind(this.get_eventNamespace());this.get_element().find('*').unbind(this.get_eventNamespace()).removeClass('hover');},positionTooltip:function(position,viewportRect){this.$1_7=position;this.get_element().css({top:'0',left:'0'});var $0=this.get_element().width();var $1=$0+this.$1_9;var $2=viewportRect.getVisibleRoom(position,1);var $3;var $4;if($2.roomRight>=$1){$3=true;$4=position.x+this.$1_9;}else if($2.roomLeft>=$1){$3=false;$4=position.x-$1;}else{$3=true;$4=Math.max(0,position.x-$1+$2.roomRight);}var $5=this.get_element().height();var $6=$5+this.$1_8;var $7;var $8;if($2.roomAbove>=$6){$7=true;$8=position.y-$6;}else if($2.roomBelow>=$6){$7=false;$8=position.y+16;}else{$7=true;$8=Math.max(0,position.y-$2.roomAbove);}var $9=new tab.ShownEventArgs();var $A;if($7){if($3){$A='tab-tooltipAR';$9.position='AR';}else{$A='tab-tooltipAL';$9.position='AL';}}else{if($3){$A='tab-tooltipBR';$9.position='BR';}else{$A='tab-tooltipBL';$9.position='BL';}}if(!this.get_element().hasClass($A)){this.get_element().removeClass(tab.Tooltip.$1_0);this.get_element().addClass($A);}this.get_element().css({left:$4+'px',top:$8+'px'});$9.shownX=$4;$9.shownY=$8;$9.origX=position.x;$9.origY=position.y;return $9;},$1_F:function($p0,$p1){this.close();}}
tab.TreeSupport=function(session,field,levels,isSingleSelect){this.session=session;this.field=field;this.levels=levels;this.isSingleSelect=isSingleSelect;this.root={};this.root.schema=null;this.root.tuple=tab.$create_TupleStruct(null,false,null);this.root.label='$ROOT$';this.root.level=-1;this.root.children=null;}
tab.TreeSupport.prototype={root:null,session:null,field:null,levels:0,isSingleSelect:false,$0:function($p0){var $0=$p0.t;if(tab.MiscUtil.isNullOrEmpty($0)){return false;}var $1=$0[$0.length-1];var $2=$1.s;var $3=tableau.types.DataSpecial.DS_RAGGED;var $4=tableau.types.DataSpecial.DS_SKIPPED;return ($2===$3||$2===$4);},itemsFromTable:function(data,level){var $0=[];var $1=(ss.isValue(data.table))?data.table.tuples:null;if(ss.isNullOrUndefined(data.table)){return $0;}for(var $2=0;$2<$1.length;$2++){var $3=tableau.format.formatTupleDisplayName($1[$2]);var $4=null;if(!!data.children){$4=this.itemsFromTable(data.children[$2],level+1);}var $5={};$5.id=tableau.format.formatTupleUniqueName($1[$2]);$5.schema=data.table.schema;$5.tuple=$1[$2];$5.label=$3;$5.level=level;$5.children=$4;$5.isRaggedOrSkipped=this.$0($1[$2]);$0.push($5);}return $0;},$1:function($p0){var $0=$p0.node;$0.updateCheckState();if(ss.isValue($p0.node2)){$p0.node2.updateCheckState();}},onChildrenChange:function(parent,newChildrenList){parent.children=newChildrenList;},getIdentity:function($p0){return $p0.id;},getLabel:function($p0){return $p0.label;},isChecked:function(item){return item.tuple.s;},mayHaveChildren:function(item){return item.level+1<this.levels;},getRoot:function(onComplete,onError){onComplete(this.root);},getChildren:function(parent,onComplete,onError){if(ss.isValue(parent.children)||parent===this.root){onComplete(parent.children);}else{var $0=ss.Delegate.create(this,function($p1_0){
if(!!!$p1_0[0].table){parent.children=null;}else{parent.children=this.itemsFromTable($p1_0[0],parent.level+1);}onComplete(parent.children);});var $1={};$1.schema=parent.schema;$1.tuples=[parent.tuple];this.session.requestHSMChildren(this.field,$1,$0,onError);}},refresh:function(table){this.$2(this.root,table);},$2:function($p0,$p1){if(tab.MiscUtil.isNullOrEmpty($p0.children)){return;}this.$3($p0.children,$p1[0].table);_.each($p0.children,ss.Delegate.create(this,function($p1_0,$p1_1){
if(!!$p1_0.children){if(ss.isValue($p1[0].children)&&$p1_1<$p1[0].children.length){this.$2($p1_0,[$p1[0].children[$p1_1]]);}else{var $1_0=ss.Delegate.create(this,function($p2_0){
this.$2($p1_0,$p2_0);});var $1_1={};$1_1.schema=$p1_0.schema;$1_1.tuples=[$p1_0.tuple];this.session.requestHSMChildren(this.field,$1_1,$1_0,null);}}}));},$3:function($p0,$p1){var $0=$p1.tuples;for(var $1=0;$1<$0.length;$1++){if($p0[$1].tuple.s!==$0[$1].s){$p0[$1].tuple.s=$0[$1].s;this.$1($p0[$1]);}}return $p0;}}
tab.TreeNode=function(param){tab.TreeNode.initializeBase(this);}
tab.TreeNode.prototype={isChecked:false,$2_0:null,tree:null,item:null,dispose:function(){this.$2_0.dispose();this.$2_0=null;},destroy:function(preserveDom){this.dispose();this.inherited(arguments);},updateCheckState:function(){this.isChecked=this.tree.model.isChecked(this.item);var $0=$(this.labelNode).find('input');if(this.isChecked){$0.attr('checked','checked');}else{$0.removeAttr('checked');}},setLabelNode:function(label){this.isChecked=this.tree.model.isChecked(this.item);var $0=(this.isChecked)?" checked='checked'":'';var $1='<input type=';if(this.tree.model.isSingleSelect){var $2=this.tree.model.field;if(ss.isValue(this.tree.model.session)){$2+=this.tree.model.session.get_viewId();}$1+="'radio' name='FI_"+$2+"'";}else{$1+="'checkbox'";}$1+=$0+"/><a title='"+label+"'>"+label+'</a>';this.labelNode.innerHTML=$1;if(ss.isValue(this.$2_0)){this.$2_0.dispose();}this.$2_0=new tab.DisposableHolder();this.$2_0.add(tab.EventUtil.bindWithDispose($(this.labelNode.firstChild),'click',ss.Delegate.create(this,this.$2_1)));},$2_1:function($p0){this.isChecked=(this.labelNode.firstChild).checked;this.tree.notifyChange($p0);$p0.stopPropagation();}}
tab.Tree=function(param){tab.Tree.initializeBase(this);}
tab.Tree.prototype={model:null,anchor:null,prev_anchor:null,anchorIsStart:false,add_notifyChangeCalled:function(value){this.$2_0=ss.Delegate.combine(this.$2_0,value);},remove_notifyChangeCalled:function(value){this.$2_0=ss.Delegate.remove(this.$2_0,value);},$2_0:null,_createTreeNode:function($p0){$p0['isChecked']=this.model.isChecked($p0['item']);var $0=new tableau.base.widget.hsm._TreeNode($p0);($p0['item']).node=$0;return $0;},$2_1:function($p0){return this.model.mayHaveChildren($p0);},getIconClass:function(item,opened){return 'HFTreeNodeIcon';},getLabelClass:function(item,opened){var $0=(this.model.isSingleSelect)?'HFTreeNodeLabelSS':'HFTreeNodeLabel';$0+=(item.isRaggedOrSkipped)?' HFTreeNodeRaggedOrSkipped':'';return $0;},focusNode:function(node){var $0=dojo.attr(node.labelNode,'tabindex');if(!!$0){dojo.removeAttr(node.labelNode,'tabindex');}this.inherited(arguments);if(!!$0){dojo.attr(node.labelNode,'tabindex',$0);}},notifyChange:function(e){if(ss.isValue(this.$2_0)){this.$2_0(e);}},getDepth:function(node){var $0=0;while(node!==this.rootNode){$0+=1;node=node.getParent();}return $0;},findEarlierNode:function(node1,node2,level){return this.rEarlierContained(this.rootNode,0,node1,node2,level);},rEarlierContained:function(searchNode,searchLevel,n1,n2,targetLevel){if(searchLevel>targetLevel){return null;}else if(searchLevel<targetLevel){var $0=searchNode.getChildren();var $1=$0.length;for(var $2=0;$2<$1;$2++){var $3=this.rEarlierContained($0[$2],searchLevel+1,n1,n2,targetLevel);if(ss.isValue($3)){return $3;}}}else{if(searchNode===n1){return n1;}if(searchNode===n2){return n2;}return null;}return null;}}
tab.TypeIn=function(targetDiv,doUpdateFunc,style){this.div=targetDiv;this.$D=doUpdateFunc;this.$A=style;dojo.addClass(this.div,'tableauWidgetUiTypeIn');this.$0=new tab.DisposableHolder();}
tab.TypeIn.prototype={queryBox:null,div:null,outerDiv:null,querySpan:null,$0:null,$1:null,goButton:null,$2:null,$3:null,$4:false,$5:null,$6:null,$7:false,$8:null,$9:false,$A:null,$B:false,$C:0,$D:null,$E:null,instantiate:function(pattern,fieldnameArg,dataValue,minValue,maxValue,dateFormat,editingFormat,firstDayOfWeek){this.$2=pattern;this.$1=fieldnameArg;this.$3=dataValue;if(ss.isNullOrUndefined(this.$2)){this.$2='';}this.div.innerHTML="<div id='typein_"+tableau.format.escapeHTML(fieldnameArg)+"' class='TypeInDiv tab-ctrl-formatted-border'>"+"<span class='TypeInQuerySpan'><input type='text' class='QueryBox' value='"+tableau.format.escapeHTML(this.$2)+"'/></span>"+"<span class='goButton' style='display:none'></span></div>";this.outerDiv=this.div.firstChild;this.querySpan=this.outerDiv.childNodes[0];this.queryBox=this.querySpan.childNodes[0];this.goButton=this.outerDiv.childNodes[1];var $0=function($p1_0){
$p1_0.stopPropagation();};var $1=$(this.queryBox);this.$0.add(tab.EventUtil.bindWithDispose($1,'keydown',ss.Delegate.create(this,this.$1D)));this.$0.add(tab.EventUtil.bindWithDispose($1,'keyup',ss.Delegate.create(this,this.$1E)));this.$0.add(tab.EventUtil.bindWithDispose($1,'blur',ss.Delegate.create(this,this.onInputBlur)));this.$0.add(tab.EventUtil.bindWithDispose($1,'focus',ss.Delegate.create(this,this.onQueryBoxFocus)));this.$0.add(tab.EventUtil.bindWithDispose($1,'click',ss.Delegate.create(this,this.$13)));this.$0.add(tab.EventUtil.bindWithDispose($1,'mousedown',$0));this.$0.add(tab.EventUtil.bindWithDispose($1,'mousemove',$0));var $2=$(this.goButton);this.$0.add(tab.EventUtil.bindWithDispose($2,'mousedown',ss.Delegate.create(this,this.$1A)));this.$0.add(tab.EventUtil.bindWithDispose($2,'click',ss.Delegate.create(this,this.$1B)));this.$0.add(tab.EventUtil.bindWithDispose($2,'mouseenter',ss.Delegate.create(this,this.$14)));this.$0.add(tab.EventUtil.bindWithDispose($2,'mouseleave',ss.Delegate.create(this,this.$15)));var $3=ss.Delegate.create(this,function($p1_0,$p1_1){
if(!this.isInsideWidget($p1_0)){this.setNewPattern();this.queryBox.blur();}});this.$0.add(tab.EventUtil.subscribeWithDispose('globalFirstTouch',$3));this.$4=false;this.$17();},isInsideWidget:function(e){return this.outerDiv===e.target||tab.DomUtil.isAncestorOf(this.outerDiv,e.target);},destroy:function(){this.dispose();},dispose:function(){this.$0.dispose();},layout:function(){},setNewState:function(pattern,domainArg,dataValue,minValue,maxValue){this.$2=pattern;this.queryBox.value=pattern;this.$3=dataValue;this.$19();this.$5=(domainArg||new Array(0));this.$6='';},$F:function(){return (ss.isValue(this.$3)&&!this.$7);},$10:function($p0,$p1){this.$6='';this.$7=true;this.$5=($p0||new Array(0));this.$E=$p1;},$11:function($p0){this.clearTimeout();this.$8=window.setTimeout($p0,500);},clearTimeout:function(){if(ss.isValue(this.$8)){window.clearTimeout(this.$8);this.$8=null;}},$12:function(){if(!this.$7){return;}if(tab.MiscUtil.isNullOrEmpty(this.queryBox.value)){return;}if(!this.$6.toLowerCase().indexOf(this.queryBox.value.toLowerCase())){this.onAutocompleteDone(this.$6);return;}if(this.$5.length>0){var $0=this.queryBox.value.toLowerCase();var $1=this.$5.length;for(var $2=0;$2<$1;$2++){if(!this.$5[$2].toLowerCase().indexOf($0)){this.onAutocompleteDone(this.$5[$2]);return;}}}else if(ss.isValue(this.$E)){this.$11(ss.Delegate.create(this,function(){
this.$E(this.queryBox.value,ss.Delegate.create(this,this.onAutocompleteDone),this.$1);}));}},onAutocompleteDone:function($p0){var $0=$p0;if(tab.MiscUtil.isNullOrEmpty($0)){return;}this.$6=$0;var $1=this.queryBox.value;this.queryBox.value=$0;tableau.util.selectText(this.queryBox,$1.length,$0.length);},onQueryBoxFocus:function(e){this.queryBox.isFocused=true;if(this.$F()){this.queryBox.value=tableau.format.formatDataValue(this.$3);this.$B=true;}},$13:function($p0){if(this.queryBox.isFocused){this.queryBox.select();}this.queryBox.isFocused=false;},$14:function($p0){dojo.addClass(this.goButton,'Hover');},$15:function($p0){dojo.removeClass(this.goButton,'Hover');},$16:function(){if(this.$B&&this.$F()){return tableau.format.formatDataValue(this.$3)!==this.queryBox.value;}else{return this.$2!==this.queryBox.value;}},$17:function(){var $0=(this.$A==='TypeIn')?this.$16():!String.isNullOrEmpty(this.queryBox.value);if($0){this.$18();}else{this.$19();}},$18:function(){dojo.style(this.goButton,'display','');dojo.addClass(this.goButton,this.$A+'Active');dojo.addClass(this.querySpan,'ShortQuerySpan');},$19:function(){dojo.removeClass(this.querySpan,'ShortQuerySpan');dojo.removeClass(this.goButton,this.$A+'Active');dojo.style(this.goButton,'display','none');},onInputBlur:function(e){this.queryBox.isFocused=false;if(!this.$4&&!this.$9){this.setNewPattern();}this.$9=false;},$1A:function($p0){this.$4=true;},$1B:function($p0){this.$20();this.$4=false;},$1C:function($p0){this.$1F();if(dojo.isFF){window.setTimeout(ss.Delegate.create(this,this.$1F),10);}this.$17();$p0.stopPropagation();$p0.preventDefault();},$1D:function($p0){if($p0.which===27){this.$1C($p0);}this.$C=$p0.which;},$1E:function($p0){switch($p0.which){case 13:this.clearTimeout();this.setNewPattern();this.queryBox.blur();$p0.stopPropagation();$p0.preventDefault();break;case 27:this.clearTimeout();this.$1C($p0);this.$9=true;this.queryBox.blur();break;case 8:case 46:this.clearTimeout();this.$17();break;case 16:this.$17();break;default:if(this.$C===$p0.which){this.$12();this.$17();}break;}},setPattern:function(newPattern){this.queryBox.value=newPattern;this.clearTimeout();this.setNewPattern();this.queryBox.blur();},setNewPattern:function(){if(this.$16()){this.$D(this.queryBox.value);if(!this.$F()){this.setNewState(this.queryBox.value);}}else if(this.$F()){this.queryBox.value=this.$2;}this.$B=false;},$1F:function(){this.queryBox.value=this.$2;},$20:function(){if(this.$A==='TypeIn'){this.$1F();this.queryBox.blur();}else{this.queryBox.value='';this.setNewPattern();}this.$17();}}
tab.TypeInDateField=function(targetDiv,doUpdateFunc,style,createDatePickerFunc){tab.TypeInDateField.initializeBase(this,[targetDiv,doUpdateFunc,style]);this.$21=createDatePickerFunc;if(ss.isNullOrUndefined(this.$21)){this.$21=function($p1_0){
return new tab.DatePicker($p1_0);};}}
tab.TypeInDateField.prototype={$21:null,$22:null,dispose:function(){tab.TypeInDateField.callBaseMethod(this, 'dispose');this.$22.dispose();},instantiate:function(pattern,fieldnameArg,dataValue,minValue,maxValue,dateFormat,editingFormat,firstDayOfWeek){tab.TypeInDateField.callBaseMethod(this, 'instantiate',[pattern,fieldnameArg,dataValue,minValue,maxValue,dateFormat,editingFormat,firstDayOfWeek]);var $0=dateFormat.locale_formatting_strings;var $1=$0.narrowDay;$1.shift();var $2=this.$23(this.$3);if(ss.isValue(firstDayOfWeek)){firstDayOfWeek=firstDayOfWeek-1;}var $3=new tab.DatePickerSettings($2,$2,this.$23(minValue),this.$23(maxValue),firstDayOfWeek,$1,$0.todayFormatTemplate,function($p1_0){
return tableau.format.formatCustomJSDateTime($p1_0,tableau.format.mapIcuToOleFormat(dateFormat.yearMonthFormat),false,tableau.types.DataType.DT_DATE,dateFormat.locale,null,null,$0,0,1);},function($p1_0){
return tableau.format.formatCustomJSDateTime($p1_0,editingFormat.format,false,tableau.types.DataType.DT_DATE,editingFormat.locale,null,null,$0,0,1);});this.$22=this.$21($3);this.$22.get_element().on('dateSelected',ss.Delegate.create(this,this.$24)).appendTo(document.body);},$23:function($p0){return (ss.isValue($p0)&&ss.isValue($p0.v))?new Date(tableau.types.JsDateFromOleDate($p0.v)):null;},setNewState:function(pattern,domainArg,dataValue,minValue,maxValue){tab.TypeInDateField.callBaseMethod(this, 'setNewState',[pattern,domainArg,dataValue,minValue,maxValue]);this.$22.setDateRange(this.$23(minValue),this.$23(maxValue));},isInsideWidget:function(e){var $0=this.$22.get_element().get(0);return tab.TypeInDateField.callBaseMethod(this, 'isInsideWidget',[e])||$0===e.target||tab.DomUtil.isAncestorOf($0,e.target);},onQueryBoxFocus:function(e){tab.TypeInDateField.callBaseMethod(this, 'onQueryBoxFocus',[e]);if(this.$22.get_element().is(':hidden')){var $0=new Date(tableau.types.JsDateFromOleDate(this.$3.v));this.$22.show($0);this.$22.positionCalendarByElement($(this.queryBox).closest('.TypeInDiv'));}},$24:function($p0,$p1){this.$22.hide();this.setPattern(($p1.getUTCMonth()+1)+'/'+$p1.getUTCDate()+'/'+$p1.getUTCFullYear());},onInputBlur:function(e){this.$22.hide();tab.TypeInDateField.callBaseMethod(this, 'onInputBlur',[e]);}}
tab.TypeInFilterContents=function(){this.templateString="<div class='TypeInFilter'>"+"<div class='TIFItemsList tab-ctrl-formatted-text' dojoAttachPoint='domItemsList'"+"dojoAttachEvent='onclick:_onItemsListClick,onmouseover:_onItemsListMouseOver,onmouseout:_onItemsListMouseOut,onkeydown:_onItemsKeyDown'>"+"<div class='wcIconSearchRemove' dojoAttachPoint='domXButton'"+"dojoAttachEvent='onclick:_onXButtonClick,onmouseover:_onXButtonMouseOver,onmouseout:_onXButtonMouseOut'></div>"+'</div>'+"<div class='TIFButtonDiv' dojoAttachPoint='domClearListButtonDiv'>"+"<button class='TIFButton'"+"dojoAttachEvent='onclick:_onClearListButtonClick'>Clear List</button>"+'</div>'+'</div>';tab.TypeInFilterContents.initializeBase(this);}
tab.TypeInFilterContents.prototype={isContainer:false,parentFilter:null,tuples:null,itemName:'',role:null,domItemsList:null,domXButton:null,domClearListButtonDiv:null,$1_0:null,postCreate:function(){var $0=tableau.FilterItem.typeInListArray;var $1=tableau.format.formatTupleDisplayName;var $2=tableau.FilterItem.getTypeInListHTML;var $3=[];var $4=0;for(var $5=0;$5<this.tuples.length;$5++){var $6=this.tuples[$5];if($6.s){var $7=this.itemName+'_'+$5;var $8=$2($0,$7,$1($6,true,this.role));$3.add($8);$4++;}}this.domItemsList.innerHTML=$3.join('');dojo.style(this.domClearListButtonDiv,'display',($4>3)?'block':'none');},_onItemsListClick:function($p0){this.parentFilter.get_asMixin().onListItemClick($p0);},_onItemsListMouseOver:function($p0){if(!ss.isValue($p0.target)||!dojo.hasClass($p0.target,'FITypeInItem')){return;}dojo.addClass($p0.target,'Hover');var $0=this.$1_0=tableau.FilterItem.getNodeFromEvent($p0);$0.appendChild(this.domXButton);dojo.style(this.domXButton,'top','2px');dojo.style(this.domXButton,'display','block');},_onItemsListMouseOut:function($p0){if(!ss.isValue($p0.relatedTarget)||$p0.relatedTarget!==this.domXButton){if(ss.isValue(this.$1_0)){dojo.removeClass(this.$1_0,'Hover');}this.$1_0=null;dojo.style(this.domXButton,'display','none');}},_onItemsKeyDown:function($p0){if($p0.keyCode===dojo.keys.DELETE){this._removeSelectedItemsFromFilter();dojo.stopEvent($p0);}},_onXButtonClick:function($p0){var $0=null;$p0.stopPropagation();$p0.preventDefault();var $1=tableau.FilterItem.getNodeFromEvent($p0);if(!ss.isValue($1)){return;}tableau.FilterItem.setChecked($1,false);if(ss.isValue(this.parentFilter.get_oFilter())){$0=this.parentFilter.get_oFilter().table;}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(ss.isValue($0)&&$0.actual_size===$0.tuples.length){var $3=new tab.CategoricalFilterData(this.parentFilter.get_oFilter().targetSheets,this.parentFilter.get_field(),this.parentFilter.get_oFilter().exclude,this.getCheckedAliases(this.getUIState()));tab.FilterClientCommands.updateCategoricalFilter($3);}}this.parentFilter.get_asMixin().clearRangeAnchorAndSelection();var $2=ss.Delegate.create(this.parentFilter,this.parentFilter.applyChanges);this.parentFilter.get_asMixin().notifyChange($2);},_onXButtonMouseOver:function($p0){dojo.addClass(this.domXButton,'Hover');},_onXButtonMouseOut:function($p0){dojo.removeClass(this.domXButton,'Hover');},_onClearListButtonClick:function($p0){var $0;var $1=null;this.parentFilter.get_searchWidget().clearSearch(true,false);for($0=this.domItemsList.firstChild;ss.isValue($0);$0=$0.nextSibling){tableau.FilterItem.setChecked($0,false);}this.parentFilter.set_stateId(this.parentFilter.get_stateId()+1);if(ss.isValue(this.parentFilter.get_oFilter())){$1=this.parentFilter.get_oFilter().table;}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if(ss.isValue($1)&&$1.actual_size===$1.tuples.length){var $3=new tab.CategoricalFilterData(this.parentFilter.get_oFilter().targetSheets,this.parentFilter.get_field(),this.parentFilter.get_oFilter().exclude,this.getCheckedAliases(this.getUIState()));tab.FilterClientCommands.updateCategoricalFilter($3);}}this.parentFilter.get_asMixin().clearRangeAnchorAndSelection();var $2=ss.Delegate.create(this.parentFilter,this.parentFilter.applyChanges);this.parentFilter.get_asMixin().notifyChange($2);dojo.style(this.domClearListButtonDiv,'display','none');},layout:function(contentSize,horizontalLayout){if(tableau.util.isElementVisible(this.domClearListButtonDiv)){var $0=dojo.marginBox(this.domClearListButtonDiv);contentSize['h']=Math.max(0,contentSize['h']-$0['h']);}if(dojo.isIE<8){if(contentSize['h']<=12){dojo.style(this.domItemsList,'overflow','hidden');}else{dojo.style(this.domItemsList,'overflow','');}}dojo.marginBox(this.domItemsList,contentSize);},_removeSelectedItemsFromFilter:function(){this.parentFilter.get_asMixin().forEachSelected(function($p1_0,$p1_1){
tableau.FilterItem.setChecked($p1_1,false);});this.parentFilter.get_asMixin().clearRangeAnchorAndSelection();this.parentFilter.get_asMixin().notifyChange(null);},getUIState:function(){var $0=this.domItemsList.firstChild,$1;var $2={};for($1=$0;ss.isValue($1);$1=$1.nextSibling){var $3=this.getFormattedAlias(this.tuples[tableau.FilterItem.getIndex($1)]);$2[$3]=tableau.FilterItem.isChecked($1);}return $2;},getCheckedAliases:function($p0){var $0=[];var $enum1=ss.IEnumerator.getEnumerator(Object.keys($p0));while($enum1.moveNext()){var $1=$enum1.current;if(tab.MiscUtil.hasOwnProperty($p0,$1)){if($p0[$1]){$0.add($1);}}}return $0;},getFormattedAlias:function(tuple){return tableau.format.formatTupleDisplayName(tuple,true,this.role);}}
tab.Ubertip=function(tooltip){tab.Ubertip.initializeBase(this,[$("\n<div class='tab-ubertip'>\n  <div class='tab-ubertipContent'>\n    <div class='tab-ubertipTooltip'></div>\n    <div class='tab-ubertipActions'></div>\n  </div>\n  <div class='tab-ubertipCommandArea'>\n    <div class='tab-ubertipSelected'></div>\n    <div class='tab-ubertipCommands'></div>\n    <div class='tab-clear'></div>\n  </div>\n</div>")]);this.$1_C=tooltip;this.$1_C.add_showing(ss.Delegate.create(this,this.handleTooltipShowing));this.$1_C.add_showed(ss.Delegate.create(this,this.handleTooltipShowed));this.$1_C.add_moved(ss.Delegate.create(this,this.handleTooltipShowing));this.$1_C.add_closed(ss.Delegate.create(this,this.$1_18));this.$1_D=[];}
tab.Ubertip.$1_15=function($p0){var $0='';if(String.isNullOrEmpty($p0.imageRes)){$0='Command'+$p0.commandType;}else{if($p0.imageRes.toString().endsWith('png')){$0=tab.TabResources.getResourceName($p0.imageRes);}else{$0=tab.TabResources.lookupFullResourceAlias($p0.imageRes);}}return $0;}
tab.Ubertip.$1_16=function($p0){var $0=new tab.Button(false);if(tsConfig.is_mobile){var $2=tab.Ubertip.$1_15($p0);$0.set_label(tab.Strings.getString(String.format('Ubertip{0}Mobile',$2)));}else{$0.set_label($p0.name);$0.set_tooltip($p0.description);}$0.set_disabled(true);var $1=new ss.StringBuilder('tab-command');$1.append(tab.Ubertip.$1_15($p0));$0.get_element().addClass($1.toString());$0.get_element().css('visibility','hidden');return $0;}
tab.Ubertip.prototype={$1_C:null,$1_D:null,$1_F:null,$1_10:null,$1_11:false,$1_12:null,add_commandExecuted:function(value){this.$1_13=ss.Delegate.combine(this.$1_13,value);},remove_commandExecuted:function(value){this.$1_13=ss.Delegate.remove(this.$1_13,value);},$1_13:null,add_actionExecuted:function(value){this.$1_14=ss.Delegate.combine(this.$1_14,value);},remove_actionExecuted:function(value){this.$1_14=ss.Delegate.remove(this.$1_14,value);},$1_14:null,get_model:function(){return this.$1_F;},set_model:function(value){this.$1_F=value;this.$1_19();return value;},dispose:function(){this.$1_17();tab.Ubertip.callBaseMethod(this, 'dispose');},handleRemoteFailure:function(){if(this.$1_11){this.$1_11=false;if(tab.CommandController.get().get_legacySession().get_waitHandler().isBusy()){tab.CommandController.get().get_legacySession().get_waitHandler().reset();}}},hideSpinner:function(){if(tab.CommandController.get().get_legacySession().get_waitHandler().isBusy()){tab.CommandController.get().get_legacySession().get_waitHandler().reset();}},handleTooltipShowing:function(sender,e){if(ss.isValue(this.$1_10)&&this.$1_10===e.position){return;}switch(e.position){case 'AL':case 'AR':this.get_element().find('.tab-ubertipContent').after(this.get_element().find('.tab-ubertipCommandArea'));this.get_element().find('.tab-ubertipCommands').before(this.get_element().find('.tab-ubertipSelected'));break;case 'BL':case 'BR':this.get_element().find('.tab-ubertipContent').before(this.get_element().find('.tab-ubertipCommandArea'));this.get_element().find('.tab-clear').after(this.get_element().find('.tab-ubertipSelected'));break;}this.$1_10=e.position;},handleTooltipShowed:function(sender,e){this.get_element().width(Math.min(this.get_element().width()+1,$(document.body).width()-2));},updateFromRemote:function(remoteModel){var $0=this.$1_F;this.$1_F=remoteModel;if(this.$1_11){var $enum1=ss.IEnumerator.getEnumerator(this.$1_F.actions);while($enum1.moveNext()){var $3=$enum1.current;if($3.name===this.$1_12){this.$1_11=false;var $4=new tab.ActionExecutedEventArgs();$4.action=$3;this.onActionExecuted($4);}}}var $1=[];var $2=null;if(ss.isValue($0)){$2=_.find($0.placeHolders,function($p1_0){
return $p1_0.commandType===10;});}if(ss.isValue($2)){var $5=_.find(this.$1_F.commands,function($p1_0){
return $p1_0.commandType===10;});if(ss.isValue($5)){this.$1_F.commands.remove($5);this.$1_F.commands.add($5);$1.add(this.$1_F.commands.length-1);}else{this.$1_F.placeHolders=[];this.$1_F.placeHolders.add($2);}}this.$1_19($1,true);},onCommandExecuted:function(args){if(ss.isValue(this.$1_13)){this.$1_13(this,args);}},onActionExecuted:function(args){if(ss.isValue(this.$1_14)){this.$1_14(this,args);}},$1_17:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$1_D);while($enum1.moveNext()){var $0=$enum1.current;$0.dispose();}this.$1_D.clear();},$1_18:function($p0,$p1){this.get_element().detach();},$1_19:function($p0,$p1){var $0=false;var $1=this.$1_C.get_isShown();var $2=this.get_element().width();var $3=this.get_element().find('.tab-ubertipContent').height();var $4=this.get_element().find('.tab-ubertipCommandArea').height();this.$1_17();this.get_element().show();this.$1_1A();this.$1_20();this.$1_1C($p0);this.$1_1B();if(ss.isValue($p1)&&$p1&&$1){this.get_element().width($2);if(!$3||this.get_element().find('.tab-ubertipContent').hasClass('hide')){$0=true;}else{var $5=$3;var $6=this.get_element().find('.tab-ubertipCommandArea').height();if(!$6){$5+=$4;}this.get_element().find('.tab-ubertipContent').height($5);}}else{this.get_element().css('width','');this.get_element().find('.tab-ubertipContent').css('height','');this.get_element().find('.tab-ubertipCommandArea').css('height','');}$0=$0||((ss.isNullOrUndefined(this.$1_F.actions)||!this.$1_F.actions.length)&&String.isNullOrEmpty(this.$1_F.tooltipHtml));if($0){this.get_element().find('.tab-ubertipContent').addClass('hide');}else{this.get_element().find('.tab-ubertipContent').removeClass('hide');}},$1_1A:function(){var $0=$(this.$1_F.tooltipHtml);this.get_element().find('.tab-ubertipTooltip').html('').append($0);},$1_1B:function(){if(ss.isNullOrUndefined(this.$1_F.selectionHtml)){this.get_element().find('.tab-ubertipSelected').html('').addClass('hide');}else{this.get_element().find('.tab-ubertipSelected').html('').append(this.$1_F.selectionHtml).removeClass('hide');}},$1_1C:function($p0){var $0=0;var $1=null;if(ss.isValue(this.$1_F.commands)){$1=$('<ul></ul>');for(var $2=0;$2<this.$1_F.commands.length;++$2){var $3=this.$1_F.commands[$2];if($3.status==='hidden'){continue;}var $4=new tab.Button(false);if(tsConfig.is_mobile){var $7=tab.Strings.getString(String.format('Ubertip{0}Mobile',tab.Ubertip.$1_15($3)));var $8=$('<div>'+$7+'</div>');$4.setLabelContents($8);}else{$4.set_label($3.name);$4.set_tooltip($3.description);}var $5=new ss.StringBuilder('tab-command');if(String.isNullOrEmpty($3.imageRes)){$5.append($3.commandType);}else{$5.append(tab.Ubertip.$1_15($3));}$5.append(' ').append($3.status);$4.get_element().addClass($5.toString());$4.set_context($3);$4.add_clicked(ss.Delegate.create(this,this.$1_1D));if($3.status==='disabled'){$4.set_disabled(true);}if(Object.keyExists(tab.Ubertip.$1_E,$3.commandType)){$4.get_element().width(tab.Ubertip.$1_E[$3.commandType]);}this.$1_D.add($4);tab.HoverAddClassBehavior.attach($4);if(ss.isValue($p0)&&$p0.contains($2)){$4.get_element().fadeIn();}if($0>0){$1.append($("<li><div class='tab-separator'>&nbsp;</div></li>"));}var $6=$('<li></li>');$6.append($4.get_element());$1.append($6);$0++;}}if(ss.isValue(this.get_model().placeHolders)){var $enum1=ss.IEnumerator.getEnumerator(this.get_model().placeHolders);while($enum1.moveNext()){var $9=$enum1.current;if($0>0){$1.append($("<li><div class='tab-separator'>&nbsp;</div></li>"));}var $A=tab.Ubertip.$1_16($9);var $B=$('<li></li>');$B.append($A.get_element());$1.append($B);document.documentElement.appendChild($1.first().get(0));tab.Ubertip.$1_E[$9.commandType]=$A.get_element().innerWidth();$A.get_element().width(tab.Ubertip.$1_E[$9.commandType]);document.documentElement.removeChild($1.first().get(0));}}if($0>0){this.get_element().find('.tab-ubertipCommands').html('').append($1).removeClass('hide');}else{this.get_element().find('.tab-ubertipCommands').html('').addClass('hide');}},$1_1D:function($p0,$p1){var $0=$p0;var $1=new tab.CommandExecutedEventArgs();$1.command=$0.get_context();this.onCommandExecuted($1);},$1_1E:function($p0,$p1){var $0=$p0;var $1=new tab.ActionExecutedEventArgs();$1.action=$0.get_context();this.onActionExecuted($1);},$1_1F:function($p0,$p1){var $0=$p0;var $1=$0.get_context();if(tab.ActionUtils.isFilterAction($1)||(tab.ActionUtils.isHighlightAction($1)&&!tab.ActionUtils.isTargetOfActionLocal($1))){tab.CommandController.get().get_legacySession().get_waitHandler().showAndLock();this.$1_11=true;this.$1_12=$0.get_labelElement().text();}else{var $2=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),this.$1_F.sheetId);var $3=[this.$1_F.tupleId];tab.UberTipClientCommands.executeUbertipAction($1,$3,$2);}},$1_20:function(){if((ss.isNullOrUndefined(this.$1_F.actions)||!this.$1_F.actions.length)&&(ss.isNullOrUndefined(this.$1_F.actionPMs)||!this.$1_F.actionPMs.length)){this.get_element().find('.tab-ubertipActions').html('').removeClass('invisible').addClass('hide');}else if(ss.isValue(this.$1_F.actions)){var $0=$('<ul></ul>');var $enum1=ss.IEnumerator.getEnumerator(this.$1_F.actions);while($enum1.moveNext()){var $1=$enum1.current;this.$1_21($0,$1.name,$1,ss.Delegate.create(this,this.$1_1E));}this.get_element().find('.tab-ubertipActions').html('').append($0).removeClass('hide invisible');}else{var $2=$('<ul></ul>');var $3=tab.ModelUtils.getVisualModel(tab.ApplicationModel.get_instance(),this.$1_F.sheetId);var $4=false;var $5=true;var $enum2=ss.IEnumerator.getEnumerator(this.$1_F.actionPMs);while($enum2.moveNext()){var $7=$enum2.current;var $8=$3.get_vizDataModel();var $9=[this.$1_F.tupleId];var $A=tab.ApplicationModel.get_instance().get_dataDictionary();var $B=tab.VizDataUtils.constructUrlFromString($A,$7.name,$8,$9,$3.get_worksheetName());this.$1_21($2,$B,$7,ss.Delegate.create(this,this.$1_1F));var $C=tab.ActionUtils.getActionType($7);if($C==='filter'||$C==='url'){$4=true;}if($C==='url'){var $D=tab.ActionUtils.getUrlActionPm($7,$3,$9);if($D==null||String.isNullOrEmpty($B)){$5=false;}}}var $6=-1;if(ss.isValue($3.get_sceneModel())){$6=$3.get_sceneModel().get_paneDescriptorCount();}else{}if(($6>1&&$4)||!$5){this.get_element().find('.tab-ubertipActions').html('').append($2).removeClass('hide').addClass('invisible');}else{this.get_element().find('.tab-ubertipActions').html('').append($2).removeClass('hide invisible');}}},$1_21:function($p0,$p1,$p2,$p3){var $0=new tab.Button(true);$0.set_label($p1);$0.get_element().addClass('tab-action');$0.set_context($p2);$0.add_clicked($p3);this.$1_D.add($0);var $1=$('<li></li>');$1.append($0.get_element());$p0.append($1);}}
tab.IMenuItem=function(parameters){tab.IMenuItem.initializeBase(this);}
tab.OnClickOverride=function(){this.$2_2=tsConfig.is_mobile;tab.OnClickOverride.initializeBase(this);}
tab.OnClickOverride.prototype={$2_0:75,$2_1:null,postCreate:function(){this.inherited(arguments);if(this.$2_2){var $0=new tableau.util.NoClickDelay(this.domNode);}},$2_3:function(){this.getParent().focusChild(this);},$2_4:function($p0){if(ss.isValue(this.$2_1)){window.clearTimeout(this.$2_1);this.$2_1=null;}this.$2_1=window.setTimeout($p0,this.$2_0);},_onClick:function(evt){if(this.$2_2){if(!this._isReasonableEvent(evt)){return;}var $0=ss.Delegate.create(this,function(){
this.getParent().onItemClick(this,evt);dojo.stopEvent(evt);});this.$2_3();this.$2_4($0);}else{this.inherited(arguments);}},_onHover:function(evt){if(this.$2_2){this._onClick(evt);}else{this.inherited(arguments);}}}
tab.UIMenuItem=function(){tab.UIMenuItem.initializeBase(this);}
tab.UICheckedMenuItem=function(){tab.UICheckedMenuItem.initializeBase(this);}
tab.ViewingToolbar=function(app,isTop){this.disposables=new tab.DisposableHolder();this.app=app;this.isTop=isTop;this.subscriptions=[];}
tab.ViewingToolbar.prototype={app:null,isTop:false,subscriptions:null,toolbarElement:null,leftElement:null,centerElement:null,rightElement:null,customViewsButton:null,editButton:null,viewMetricsDataButton:null,shareButtons:null,exportButton:null,revertButton:null,autoUpdateButton:null,refreshButton:null,subscribeButton:null,downloadButton:null,guestBrandWatermark:null,customViewsViewModel:null,customViewsPanel:null,activeSheet:null,exportMenuView:null,exportMenuViewModel:null,exportImageEnabled:false,exportDataEnabled:false,exportCrosstabEnabled:false,exportPdfEnabled:false,subscribeViewModel:null,subscribeView:null,$0:null,get_element:function(){return this.toolbarElement;},get_$1:function(){return this.customViewsViewModel;},createItems:function(){this.toolbarElement=$('<div>').addClass('tab-fill').addClass('tab-toolbar');this.leftElement=$('<span>').addClass('tab-fill-left');this.centerElement=$('<span>').addClass('tab-inline-block');this.rightElement=$('<span>').addClass('tab-fill-right');this.toolbarElement.append(this.leftElement);this.toolbarElement.append(this.centerElement);this.toolbarElement.append(this.rightElement);if(tsConfig.showShareOptions){this.shareButtons=this.makeShareButtons();}if(tsConfig.allow_custom_views){this.customViewsButton=new tab.ToolbarTextButton(ss.Delegate.create(this,this.customViewsButtonClicked));this.customViewsButton.setLeftIcon('tab-width-10').setText(tab.Strings.CustomViewsOriginalView).setRightIcon('tab-icon-cv-toolbar-button');}if(this.isEditAllowed()){this.editButton=new tab.ToolbarTextButton(ss.Delegate.create(this,this.editButtonClicked));this.editButton.setText(tab.Strings.ToolbarEdit);this.editButton.setEnabled(true);if(tsConfig.is_mobile_app||tsConfig.isPublic){this.editButton.get_element().css('display','none');}}if(tsConfig.is_metrics_enabled){this.viewMetricsDataButton=new tab.ToolbarTextButton(ss.Delegate.create(this,this.viewMetricsDataButtonClicked));this.viewMetricsDataButton.setText(tab.Strings.ToolbarShowPerformanceRecording);}if(tsConfig.toolbarvis){this.exportButton=new tab.ToolbarIconButton(ss.Delegate.create(this,this.exportButtonClicked));this.exportButton.setIcon('tab-icon-export').setTooltip(tab.Strings.ToolbarExport);this.revertButton=new tab.ToolbarIconButton(ss.Delegate.create(this,this.revertButtonClicked));this.revertButton.setIcon('tab-icon-revert').setTooltip(tab.Strings.ToolbarRevertAll);this.autoUpdateButton=new tab.ToolbarIconButton(ss.Delegate.create(this,this.autoUpdateButtonClicked));this.autoUpdateButton.setIcon('tab-icon-autoupdate-on').setTooltip(tab.Strings.ToolbarPauseAutomaticUpdates);this.refreshButton=new tab.ToolbarIconButton(ss.Delegate.create(this,this.refreshButtonClicked));this.refreshButton.setIcon('tab-icon-refresh').setTooltip(tab.Strings.ToolbarRefreshData);}if(this.isDownloadAllowed()){this.downloadButton=new tab.ToolbarTextButton(ss.Delegate.create(this,this.downloadButtonClicked));this.downloadButton.setLeftIcon('tab-icon-download').setText(tab.Strings.ToolbarDownload);if(tsConfig.is_mobile_app){this.downloadButton.get_element().css('display','none');}}if(tsConfig.showShareOptions){var $enum1=ss.IEnumerator.getEnumerator(this.shareButtons);while($enum1.moveNext()){var $0=$enum1.current;this.leftElement.append($0.get_element());}}if(tsConfig.allow_custom_views){this.leftElement.append(this.customViewsButton.get_element());}if(this.isEditAllowed()){this.leftElement.append(this.editButton.get_element());}if(tsConfig.is_metrics_enabled){this.leftElement.append(this.viewMetricsDataButton.get_element());}if(tsConfig.toolbarvis){this.centerElement.append(this.exportButton.get_element());this.centerElement.append(this.revertButton.get_element());this.centerElement.append(this.autoUpdateButton.get_element());this.centerElement.append(this.refreshButton.get_element());}if(tsConfig.gbrand){var $1=$('<img>');$1.attr('src',tsConfig.watermarklogo);$1.css('border','0');this.guestBrandWatermark=$('<a>');this.guestBrandWatermark.attr('href',tsConfig.serverGuestURI);this.guestBrandWatermark.attr('target','_blank');this.guestBrandWatermark.append($1);this.rightElement.append(this.guestBrandWatermark);}else{if(tsConfig.allow_subscriptions&&!tsConfig.is_guest){this.subscribeButton=new tab.ToolbarIconButton(ss.Delegate.create(this,this.subscribeButtonClicked));this.subscribeButton.setIcon('tab-toolbar-button-subscribe').setTooltip(tab.Strings.SubscribeButtonTooltip);this.subscribeViewModel=new tab.SubscribeViewModel(this.isTop);this.subscribeView=new tab.SubscribeView(this.subscribeViewModel,this.subscribeButton.get_element());this.rightElement.append(this.subscribeButton.get_element());if(!tsConfig.workbook_allow_subscriptions){this.subscribeButton.get_element().hide();}}if(this.isDownloadAllowed()){this.rightElement.append(this.downloadButton.get_element());}}if(tsConfig.allow_custom_views){this.customViewsViewModel=new tab.CustomViewsViewModel(new tab.CustomizedViewSession(this.app.get_session()),this.isTop);this.customViewsPanel=this.makeCustomViewsPanel(this.customViewsViewModel,this.customViewsButton.get_element());this.updateCustomViewsButton();}if(tsConfig.is_metrics_enabled){this.viewMetricsDataButton.setEnabled(true);}if(tsConfig.toolbarvis){this.revertButton.setEnabled(false);}this.exportMenuViewModel=new tab.MenuViewModel();this.exportMenuViewModel.add_menuItemClicked(ss.Delegate.create(this,this.menuItemClicked));this.exportImageEnabled=false;this.exportDataEnabled=false;this.exportCrosstabEnabled=false;this.exportPdfEnabled=false;this.createExportMenu();this.exportMenuView=this.makeMenuView(this.exportMenuViewModel);},bindEvents:function(){if(tsConfig.showShareOptions){var $enum1=ss.IEnumerator.getEnumerator(this.shareButtons);while($enum1.moveNext()){var $0=$enum1.current;$0.bindEvents();}}if(tsConfig.allow_custom_views){this.customViewsButton.bindEvents();}if(this.isEditAllowed()){this.editButton.bindEvents();}if(tsConfig.is_metrics_enabled){this.viewMetricsDataButton.bindEvents();}if(tsConfig.toolbarvis){this.exportButton.bindEvents();this.revertButton.bindEvents();this.autoUpdateButton.bindEvents();this.refreshButton.bindEvents();}if(this.isDownloadAllowed()){this.downloadButton.bindEvents();}if(ss.isValue(this.subscribeButton)){this.subscribeButton.bindEvents();}if(tsConfig.allow_custom_views){this.customViewsViewModel.add_dirtyChanged(ss.Delegate.create(this,this.handleCustomViewsChange));this.customViewsViewModel.add_customViewListChanged(ss.Delegate.create(this,this.handleCustomViewsChange));}if(tsConfig.allow_authoring){this.subscriptions.add(dojo.subscribe('activeViewChanged',ss.Delegate.create(this,this.onActiveViewChanged)));}this.subscriptions.add(dojo.subscribe('modifiedSheetsChanged',ss.Delegate.create(this,this.onModifiedSheetsChanged)));},updateActiveView:function(view){if(ss.isValue(view)){if(ss.isValue(this.$0)){dojo.unsubscribe(this.$0);}this.$0=view.registerEventListener('selectionChanged',ss.Delegate.create(this,this.updateViewMenuState));}else if(tsConfig.toolbarvis){this.updateMenus(this.app.getLegacyMenus());}},updateMenus:function(menus){if(ss.isValue(menus)){var $enum1=ss.IEnumerator.getEnumerator(menus);while($enum1.moveNext()){var $0=$enum1.current;var $1=$0.legacyMenuName;var $2=$0.legacyMenuStates;if(ss.isValue($1)&&ss.isValue($2)){var $enum2=ss.IEnumerator.getEnumerator($2);while($enum2.moveNext()){var $3=$enum2.current;switch($1){case 'export':this.exportButton.setEnabled($3!=='grayed');break;case 'exportimage':this.exportImageEnabled=$3!=='grayed';break;case 'exportdata':this.exportDataEnabled=$3!=='grayed'&&!tsConfig.previewMode;break;case 'exportcrosstab':this.exportCrosstabEnabled=$3!=='grayed';break;case 'print':this.exportPdfEnabled=$3!=='grayed';break;case 'refreshdata':this.refreshButton.setEnabled($3!=='grayed');break;}}}}this.createExportMenu();}},setStyle:function(name,value){this.toolbarElement.css(name,value);},setStyles:function(styles){this.toolbarElement.css(styles);},setAutoUpdate:function(autoUpdate){this.setAutoUpdateStatusText(autoUpdate);},hideRefreshButtons:function(){this.autoUpdateButton.get_element().css('display','none');this.refreshButton.get_element().css('display','none');},showSubscribeButton:function(){if(ss.isNullOrUndefined(this.subscribeButton)){return;}this.subscribeButton.get_element().css('display','');},layout:function(){if(tsConfig.allow_custom_views){this.customViewsButton.removeTextWidth();var $1=this.get_element().width()-(this.leftElement.width()+10+this.centerElement.width()+10+this.rightElement.width());if($1<0){this.customViewsButton.set_textWidth(Math.max(this.customViewsButton.get_textWidth()+$1,30));}}var $0=(this.get_element().width()-this.centerElement.width())/2;if($0<this.leftElement.width()){$0=this.leftElement.width()+10;this.centerElement.css({position:'absolute',left:$0+'px'});}else{this.centerElement.css('position','static');}},dispose:function(){this.disposables.dispose();var $enum1=ss.IEnumerator.getEnumerator(this.subscriptions);while($enum1.moveNext()){var $0=$enum1.current;dojo.unsubscribe($0);}if(ss.isValue(this.customViewsButton)){this.customViewsButton.dispose();}if(ss.isValue(this.editButton)){this.editButton.dispose();}if(ss.isValue(this.viewMetricsDataButton)){this.viewMetricsDataButton.dispose();}if(ss.isValue(this.exportButton)){this.exportButton.dispose();}if(ss.isValue(this.revertButton)){this.revertButton.dispose();}if(ss.isValue(this.autoUpdateButton)){this.autoUpdateButton.dispose();}if(ss.isValue(this.refreshButton)){this.refreshButton.dispose();}if(ss.isValue(this.subscribeButton)){this.subscribeButton.dispose();}if(ss.isValue(this.downloadButton)){this.downloadButton.dispose();}if(ss.isValue(this.subscribeViewModel)){this.subscribeViewModel.dispose();}if(ss.isValue(this.subscribeView)){this.subscribeView.dispose();}if(ss.isValue(this.$0)){dojo.unsubscribe(this.$0);}this.get_element().remove();if(tsConfig.allow_custom_views){this.customViewsPanel.dispose();this.customViewsViewModel.dispose();}this.exportMenuView.dispose();this.exportMenuViewModel.dispose();},areAnySheetModified:function(modifiedSheets){return modifiedSheets.length>0;},menuItemClicked:function(arg){if($.isFunction(arg.get_data())){(arg.get_data())();}},updateViewMenuState:function(selectionInfoObject){if(ss.isValue(selectionInfoObject)){var $0=selectionInfoObject;var $1=$0['menus'];if(ss.isValue($1)&&$1.length>0){if(('legacyMenuName' in $1[0])&&tsConfig.toolbarvis){this.updateMenus($1);}else{}}}},toggleMenu:function(menuButtomElement,menu){if(menu.get_visible()){menu.hide();}else{menu.show(tab.ShowMenuOptions.create(menuButtomElement,!this.isTop));}},shareButtonClicked:function(){this.app.showShareDialog();this.app.saveSharedView('link');},facebookButtonClicked:function(){this.app.saveSharedView('facebook');},twitterButtonClicked:function(){this.app.saveSharedView('twitter');},mailButtonClicked:function(){this.app.saveSharedView('mail');},linkButtonClicked:function(){this.app.showShareDialog();this.app.saveSharedView('link');},customViewsButtonClicked:function(){this.customViewsViewModel.show();},handleCustomViewsChange:function(sender,e){this.updateCustomViewsButton();},updateCustomViewsButton:function(){if(this.customViewsViewModel.get_myCustomViews().length>0||this.customViewsViewModel.get_otherCustomViews().length>0){var $0=this.customViewsViewModel.get_currentCustomView();if(ss.isValue($0)){this.showCustomViewsButton($0.name);}else{if(ss.isValue(tsConfig.current_custom_view_id)){this.showCustomViewsButton(tab.Strings.CustomViewsUnlistedCustomView);}else{this.showCustomViewsButton(tab.Strings.CustomViewsOriginalView);}}}else{if(tsConfig.allow_custom_view_save){this.showCustomViewsButton(tab.Strings.CustomViewsRememberMyChanges);}else{this.customViewsButton.get_element().css('display','none');}}},showCustomViewsButton:function(text){this.customViewsButton.setText(text);this.customViewsButton.get_element().css('display','');if(this.customViewsViewModel.get_dirty()){this.customViewsButton.setLeftIcon('tab-icon-cv-toolbar-button-dirty');}else{this.customViewsButton.setLeftIcon('tab-width-10');}},isEditAllowed:function(){return (tsConfig.allow_authoring&&(!tsConfig.previewMode));},editButtonClicked:function(){this.app.get_toolbarCommands().$3(this.activeSheet);},viewMetricsDataButtonClicked:function(){this.app.get_toolbarCommands().$D();},onActiveViewChanged:function(dataObject){var $0=dataObject;this.activeSheet=(ss.isValue($0)&&ss.isValue($0.newActive))?$0.newActive.get_sheetid():null;},createExportMenu:function(){this.exportMenuViewModel.set_menu(new tab.Menu([tab.MenuItem.newActionItem(tab.Strings.ToolbarExportImage,(this.exportImageEnabled)?ss.Delegate.create(this,this.exportImage):null),tab.MenuItem.newActionItem(tab.Strings.ToolbarExportData,(this.exportDataEnabled)?ss.Delegate.create(this,this.exportData):null),tab.MenuItem.newActionItem(tab.Strings.ToolbarExportCrosstab,(this.exportCrosstabEnabled)?ss.Delegate.create(this,this.exportCrosstab):null),tab.MenuItem.newActionItem(tab.Strings.ToolbarPrintToPdf,(this.exportPdfEnabled)?ss.Delegate.create(this,this.exportPdf):null)]));},exportButtonClicked:function(){this.toggleMenu(this.exportButton.get_element(),this.exportMenuViewModel);},exportImage:function(){this.app.get_toolbarCommands().exportImage();},exportData:function(){this.app.get_toolbarCommands().exportData();},exportCrosstab:function(){this.app.get_toolbarCommands().exportCrosstab();},exportPdf:function(){this.app.get_toolbarCommands().exportPdf();},revertButtonClicked:function(){this.app.get_toolbarCommands().$4();},onModifiedSheetsChanged:function(eventData){var $0=eventData;if(ss.isValue(this.revertButton)){this.revertButton.setEnabled($0.length>0);}},autoUpdateButtonClicked:function(){this.app.get_toolbarCommands().$8();},setAutoUpdateStatusText:function(status){if(tsConfig.allow_filter&&!tsConfig.isPublic){if(status){this.autoUpdateButton.setIcon('tab-icon-autoupdate-on').setTooltip(tab.Strings.ToolbarPauseAutomaticUpdates);}else{this.autoUpdateButton.setIcon('tab-icon-autoupdate-off').setTooltip(tab.Strings.ToolbarResumeAutomaticUpdates);}}},refreshButtonClicked:function(){this.app.get_toolbarCommands().$C();},subscribeButtonClicked:function(){this.subscribeViewModel.show();},isDownloadAllowed:function(){return (!tsConfig.previewMode&&!String.isNullOrEmpty(tsConfig.downloadURI))||tsConfig.is_metrics_view;},downloadButtonClicked:function(){this.app.get_toolbarCommands().$A();}}
tab.WidgetStyle=function(){}
tab.WidgetStyle.applyFormatting=function(domNode,textStyleModel,backgroundColor,lineHeight){var $0=tab.FormattingConverters.$1(textStyleModel);if(ss.isValue(lineHeight)){$0['line-height']=lineHeight+'px';}tab.StyleUtil.appendCSSRule(tab.WidgetStyle.$0(domNode.id,'tab-ctrl-formatted-text'),$0);delete $0['font-size'];delete $0['line-height'];tab.StyleUtil.appendCSSRule(tab.WidgetStyle.$0(domNode.id,'tab-ctrl-formatted-fixedsize'),$0);if(ss.isValue(textStyleModel.color)){var $2={color:textStyleModel.color};tab.StyleUtil.appendCSSRule(tab.WidgetStyle.$0(domNode.id,'tab-ctrl-formatted-coloronly'),$2);}var $1={};if(ss.isValue(textStyleModel.color)){$1['border-color']=tab.ColorModel.fromColorModelPlusAlpha(tab.ColorModel.fromColorCode(textStyleModel.color),(105/255));tab.StyleUtil.appendCSSRule(tab.WidgetStyle.$0(domNode.id,'tab-ctrl-formatted-border'),$1);tab.StyleUtil.appendCSSRule(tab.WidgetStyle.$0(domNode.id,'tab-ctrl-formatted-border-hover:hover'),$1);}if(ss.isValue(backgroundColor)){var $3=tab.ColorModel.fromColorModelPlusAlpha(tab.ColorModel.fromColorCode(backgroundColor),(140/255));var $4=tab.ColorModel.alphaCompositeSolidDest($3,new tab.ColorModel(255,255,255,1));$1['background-color']=$4.toRgb();}tab.StyleUtil.appendCSSRule(tab.WidgetStyle.$0(domNode.id,'tab-ctrl-formatted-widget'),$1);}
tab.WidgetStyle.$0=function($p0,$p1){return '#'+$p0+'.'+$p1+','+'#'+$p0+' .'+$p1;}
tab.StepperControlViewModel=function(min,max,stepValue,initValue){tab.StepperControlViewModel.initializeBase(this);this.$1_0=min;this.$1_1=max;this.$1_2=stepValue;this.$1_4=initValue;this.$1_3=initValue;this.$1_5=true;this.$1_6=true;this.$1_7=true;}
tab.StepperControlViewModel.prototype={$1_0:0,$1_1:0,$1_2:0,$1_3:0,$1_4:0,$1_5:false,textClass:null,$1_6:false,$1_7:false,get_isEnabled:function(){return this.$1_5;},set_isEnabled:function(value){if(this.$1_5!==value){this.$1_5=value;if(!this.$1_5){this.set_isIncrementEnabled(false);this.set_isDecrementEnabled(false);}else{this.set_value((ss.isValue(this.get_value()))?this.get_value():this.get_initValue());}this.notifyPropertyChanged('IsEnabled');}return value;},get_isIncrementEnabled:function(){return this.$1_6;},set_isIncrementEnabled:function(value){if(this.$1_6!==value){this.$1_6=value;this.notifyPropertyChanged('IsIncrementEnabled');}return value;},get_isDecrementEnabled:function(){return this.$1_7;},set_isDecrementEnabled:function(value){if(this.$1_7!==value){this.$1_7=value;this.notifyPropertyChanged('IsDecrementEnabled');}return value;},get_min:function(){return this.$1_0;},get_max:function(){return this.$1_1;},get_initValue:function(){return this.$1_3;},get_step:function(){return this.$1_2;},get_value:function(){return this.$1_4;},set_value:function(value){if(ss.isNullOrUndefined(value)||isNaN(value)){return;}if(this.isValueWithinRange(value)){this.$1_4=value;this.set_isIncrementEnabled(this.$1_4!==this.get_max());this.set_isDecrementEnabled(this.$1_4!==this.get_min());}this.notifyPropertyChanged('Value');return value;},isValueWithinRange:function(value){return value>=this.$1_0&&value<=this.$1_1;},increment:function(){this.set_value(this.get_value()+this.get_step());},decrement:function(){this.set_value(this.get_value()-this.get_step());},update:function(newValue){this.set_isEnabled(newValue>=this.get_min()&&newValue<=this.get_max());this.set_value(newValue);}}
tab._ApiCommand.registerClass('tab._ApiCommand');tab._apiServerResultParser.registerClass('tab._apiServerResultParser');tab.vqlui$4.registerClass('tab.vqlui$4');tab.FormattingConverters.registerClass('tab.FormattingConverters');tab.ApiEventHandler.registerClass('tab.ApiEventHandler');tab.vqlui$6.registerClass('tab.vqlui$6');tab.vqlui$7.registerClass('tab.vqlui$7');tab.vqlui$5.registerClass('tab.vqlui$5');tab.vqlui$9.registerClass('tab.vqlui$9');tab.Application.registerClass('tab.Application',null,ss.IDisposable);tab.CategoricalSelectionMixin.registerClass('tab.CategoricalSelectionMixin',Object);tab.Dialog.registerClass('tab.Dialog',tab.Widget);tab.ExportPdfDialog.registerClass('tab.ExportPdfDialog',tab.Dialog);tab.SheetThumbnailTemplate.registerClass('tab.SheetThumbnailTemplate',tab.Template);tab.ExportPdfDialogTemplate.registerClass('tab.ExportPdfDialogTemplate',tab.Template);tab.DragDropManager.registerClass('tab.DragDropManager');tab.DragInstance.registerClass('tab.DragInstance');tab.ClickHandler.registerClass('tab.ClickHandler',null,ss.IDisposable);tab.vqlui$8.registerClass('tab.vqlui$8');tab.Gesture.registerClass('tab.Gesture');tab.Discrete.registerClass('tab.Discrete',tab.Gesture);tab.Drag.registerClass('tab.Drag',tab.Gesture);tab.Hover.registerClass('tab.Hover',tab.Gesture);tab.NormalizedEvent.registerClass('tab.NormalizedEvent');tab.Pinch.registerClass('tab.Pinch',tab.Gesture);tab.TableauEventHandler.registerClass('tab.TableauEventHandler',null,ss.IDisposable);tab.CanvasRenderer.registerClass('tab.CanvasRenderer');tab.MarksRenderer.registerClass('tab.MarksRenderer',tab.CanvasRenderer);tab.BrowserViewport.registerClass('tab.BrowserViewport');tab.ImageUtil.registerClass('tab.ImageUtil');tab.CanvasUtil.registerClass('tab.CanvasUtil');tab.Metrics.registerClass('tab.Metrics');tab.LocalSearch.registerClass('tab.LocalSearch');tab.DisplayList2DUtils.registerClass('tab.DisplayList2DUtils');tab.GeometryUtil.registerClass('tab.GeometryUtil');tab.HitTestDebugger.registerClass('tab.HitTestDebugger');tab.VisualPartsHitTest.registerClass('tab.VisualPartsHitTest');tab.LineMarkDrawState.registerClass('tab.LineMarkDrawState');tab.LineAttribute.registerClass('tab.LineAttribute');tab.EventUtil.registerClass('tab.EventUtil');tab.HitTargetColliders.registerClass('tab.HitTargetColliders');tab.HitTargetNode.registerClass('tab.HitTargetNode');tab.HitTester.registerClass('tab.HitTester');tab.HitTestStructureBuilder.registerClass('tab.HitTestStructureBuilder');tab.RectangleGeom.registerClass('tab.RectangleGeom',null,tab.IHitTargetGeom);tab.ModifierKeyState.registerClass('tab.ModifierKeyState',null,ss.IDisposable);tab.MouseEventUtil.registerClass('tab.MouseEventUtil');tab.PaneDrawInfo.registerClass('tab.PaneDrawInfo');tab.vqlui$B.registerClass('tab.vqlui$B');tab.DisplayList2DRenderer.registerClass('tab.DisplayList2DRenderer',tab.CanvasRenderer);tab.vqlui$C.registerClass('tab.vqlui$C');tab.FontNormalizer.registerClass('tab.FontNormalizer');tab.PaneTable2DRenderer.registerClass('tab.PaneTable2DRenderer',tab.CanvasRenderer);tab.RenderUtil.registerClass('tab.RenderUtil');tab.TabRenderContext2D.registerClass('tab.TabRenderContext2D');tab.vqlui$D.registerClass('tab.vqlui$D');tab.WKTParser.registerClass('tab.WKTParser');tab.SceneInfo.registerClass('tab.SceneInfo');tab.ResolveSelectAction.registerClass('tab.ResolveSelectAction');tableau.util.registerClass('tableau.util');tableau.util.NoClickDelay.registerClass('tableau.util.NoClickDelay');tab.URIUtil.registerClass('tab.URIUtil');tab.ViewState2.registerClass('tab.ViewState2');tab.ViewController.registerClass('tab.ViewController',null,ss.IDisposable);tab.ApplicationViewModel.registerClass('tab.ApplicationViewModel',tab.Widget,tab.IClient);tab.vqlui$0.registerClass('tab.vqlui$0');tab.ApplicationViewModelReal.registerClass('tab.ApplicationViewModelReal',tab.BaseViewModel);tab.ConfirmationViewModel.registerClass('tab.ConfirmationViewModel',tab.BaseViewModel);tab.FlipboardNavigatorViewModel.registerClass('tab.FlipboardNavigatorViewModel',tab.BaseViewModel);tab.FlipboardViewModel.registerClass('tab.FlipboardViewModel',tab.BaseViewModel);tab.ParameterControlViewModel.registerClass('tab.ParameterControlViewModel',tab.BaseViewModel);tab.QuickFilterViewModel.registerClass('tab.QuickFilterViewModel',tab.BaseViewModel);tab.LegendBaseViewModel.registerClass('tab.LegendBaseViewModel',tab.BaseViewModel);tab.QuantitativeColorLegendViewModel.registerClass('tab.QuantitativeColorLegendViewModel',tab.LegendBaseViewModel);tab.ImageZoneViewModel.registerClass('tab.ImageZoneViewModel',tab.BaseViewModel);tab.WebZoneViewModel.registerClass('tab.WebZoneViewModel',tab.BaseViewModel);tab.CategoricalLegendViewModel.registerClass('tab.CategoricalLegendViewModel',tab.LegendBaseViewModel);tab.TextRegionViewModel.registerClass('tab.TextRegionViewModel',tab.BaseViewModel);tab.PageViewModel.registerClass('tab.PageViewModel',tab.BaseViewModel);tab.LegacyLegendViewModel.registerClass('tab.LegacyLegendViewModel',tab.LegendBaseViewModel);tab.DashboardViewModel.registerClass('tab.DashboardViewModel',tab.BaseViewModel);tab.LogOnViewModel.registerClass('tab.LogOnViewModel',tab.BaseViewModel);tab.NotificationViewModel.registerClass('tab.NotificationViewModel',tab.BaseViewModel);tab.PaneTableViewModel.registerClass('tab.PaneTableViewModel',tab.BaseViewModel);tab.SubscribeViewModel.registerClass('tab.SubscribeViewModel',tab.BaseViewModel);tab.UberPopupViewModel.registerClass('tab.UberPopupViewModel',tab.BaseViewModel);tab.UberPopupShowOptions.registerClass('tab.UberPopupShowOptions');tab.ViewingToolbarCommands.registerClass('tab.ViewingToolbarCommands',null,ss.IDisposable);tab.VisualListViewModel.registerClass('tab.VisualListViewModel',tab.BaseViewModel);tab.WorkbookViewModel.registerClass('tab.WorkbookViewModel',tab.BaseViewModel);tab.ZoneViewModel.registerClass('tab.ZoneViewModel',tab.BaseViewModel);tab.ContinuousSliderViewModel.registerClass('tab.ContinuousSliderViewModel',tab.BaseViewModel);tab.AccordionView.registerClass('tab.AccordionView',tab.BaseView);tab.AccordionTemplate.registerClass('tab.AccordionTemplate',tab.Template);tab.AccordionItemTemplate.registerClass('tab.AccordionItemTemplate',tab.Template);tab.AccordionViewModel.registerClass('tab.AccordionViewModel',tab.BaseViewModel);tab.AccordionItem.registerClass('tab.AccordionItem');tab.vqlui$1.registerClass('tab.vqlui$1',null,tab.IDropTarget);tab.CanvasView.registerClass('tab.CanvasView',tab.BaseView,tab.IScrollable);tab.CanvasTemplate.registerClass('tab.CanvasTemplate',tab.Template);tab.ConfirmationView.registerClass('tab.ConfirmationView',tab.BaseView);tab.ApplicationView.registerClass('tab.ApplicationView',tab.BaseView);tab.ApplicationTemplate.registerClass('tab.ApplicationTemplate',tab.Template);tab.DashboardView.registerClass('tab.DashboardView',tab.BaseView);tab.DashboardTemplate.registerClass('tab.DashboardTemplate',tab.Template);tab.FlipboardNavigatorView.registerClass('tab.FlipboardNavigatorView',tab.BaseView);tab.FlipboardNavigatorTemplate.registerClass('tab.FlipboardNavigatorTemplate',tab.Template);tab.FlipboardView.registerClass('tab.FlipboardView',tab.BaseView);tab.FlipboardTemplate.registerClass('tab.FlipboardTemplate',tab.Template);tab.PaneTableView.registerClass('tab.PaneTableView',tab.BaseView);tab.PaneTableTemplate.registerClass('tab.PaneTableTemplate',tab.Template);tab.ParameterControlView.registerClass('tab.ParameterControlView',tab.BaseView);tab.ParameterControlTemplate.registerClass('tab.ParameterControlTemplate',tab.Template);tab.QuickFilterView.registerClass('tab.QuickFilterView',tab.BaseView);tab.QuickFilterTemplate.registerClass('tab.QuickFilterTemplate',tab.Template);tab.QuantitativeColorLegendView.registerClass('tab.QuantitativeColorLegendView',tab.BaseView);tab.QuantitativeColorLegendTemplate.registerClass('tab.QuantitativeColorLegendTemplate',tab.Template);tab.ImageZoneView.registerClass('tab.ImageZoneView',tab.BaseView);tab.ImageZoneTemplate.registerClass('tab.ImageZoneTemplate',tab.Template);tab.LegendPanel.registerClass('tab.LegendPanel',dijit._Widget);tab.QuantitativeFilter.registerClass('tab.QuantitativeFilter',dijit._Widget);tab.QuantitativeDateFilter.registerClass('tab.QuantitativeDateFilter',tab.QuantitativeFilter);tab.WebZoneView.registerClass('tab.WebZoneView',tab.BaseView);tab.WebZoneTemplate.registerClass('tab.WebZoneTemplate',tab.Template);tab.CategoricalLegendView.registerClass('tab.CategoricalLegendView',tab.BaseView);tab.CategoricalLegendColumnHtmlTemplate.registerClass('tab.CategoricalLegendColumnHtmlTemplate',tab.Template);tab.CategoricalLegendItemHtmlTemplate.registerClass('tab.CategoricalLegendItemHtmlTemplate',tab.Template);tab.CategoricalLegendTemplate.registerClass('tab.CategoricalLegendTemplate',tab.Template);tab.vqlui$F.registerClass('tab.vqlui$F',tab.MarksRenderer);tab.LegacyLegendView.registerClass('tab.LegacyLegendView',tab.BaseView);tab.LegacyLegendTemplate.registerClass('tab.LegacyLegendTemplate',tab.Template);tab.PageView.registerClass('tab.PageView',tab.BaseView);tab.PageTemplate.registerClass('tab.PageTemplate',tab.Template);tab.VisualRegionCanvasView.registerClass('tab.VisualRegionCanvasView',tab.CanvasView,tab.IRegionContentProvider);tab.SimpleRegionCanvasView.registerClass('tab.SimpleRegionCanvasView',tab.VisualRegionCanvasView);tab.LogOnView.registerClass('tab.LogOnView',tab.BaseView);tab.NotificationView.registerClass('tab.NotificationView',tab.BaseView);tab.PaneTableCanvasView.registerClass('tab.PaneTableCanvasView',tab.VisualRegionCanvasView);tab.SubscribeView.registerClass('tab.SubscribeView',tab.BaseView);tab.UberPopupView.registerClass('tab.UberPopupView',tab.BaseView);tab.UberPopupTemplate.registerClass('tab.UberPopupTemplate',tab.Template);tab.ZoneView.registerClass('tab.ZoneView',tab.BaseView);tab.ZoneTemplate.registerClass('tab.ZoneTemplate',tab.Template);tab.ActionExecutedEventArgs.registerClass('tab.ActionExecutedEventArgs',ss.EventArgs);tab.TextRegionView.registerClass('tab.TextRegionView',tab.BaseView);tab.TextRegionTemplate.registerClass('tab.TextRegionTemplate',tab.Template);tab.Button.registerClass('tab.Button',tab.Widget);tab.TiledImageViewModel.registerClass('tab.TiledImageViewModel',tab.BaseViewModel);tab.TiledImageView.registerClass('tab.TiledImageView',tab.BaseView,tab.IScrollable);tab.TiledImageTemplate.registerClass('tab.TiledImageTemplate',tab.Template);tab.ComboBoxView.registerClass('tab.ComboBoxView',tab.BaseView);tab.ComboBoxTemplate.registerClass('tab.ComboBoxTemplate',tab.Template);tab.ComboBoxViewModel.registerClass('tab.ComboBoxViewModel',tab.BaseViewModel);tab.ComboBoxItem.registerClass('tab.ComboBoxItem');tab.CustomComboBoxItem.registerClass('tab.CustomComboBoxItem',tab.ComboBoxItem);tab.MenuViewTheme.registerClass('tab.MenuViewTheme');tab.ComboBoxMenuTheme.registerClass('tab.ComboBoxMenuTheme',tab.MenuViewTheme);tab.ComboBoxDropdownMenuTheme.registerClass('tab.ComboBoxDropdownMenuTheme',tab.MenuViewTheme);tab.MenuView.registerClass('tab.MenuView',tab.BaseView);tab.MenuTemplate.registerClass('tab.MenuTemplate',tab.Template);tab.MenuItemTemplate.registerClass('tab.MenuItemTemplate',tab.Template);tab.MenuItemTextInputTemplate.registerClass('tab.MenuItemTextInputTemplate',tab.Template);tab.MenuItemDividerTemplate.registerClass('tab.MenuItemDividerTemplate',tab.Template);tab.MenuViewModel.registerClass('tab.MenuViewModel',tab.BaseViewModel);tab.ShowMenuOptions.registerClass('tab.ShowMenuOptions');tab.Menu.registerClass('tab.Menu');tab.MenuItem.registerClass('tab.MenuItem');tab.CustomMenuItem.registerClass('tab.CustomMenuItem',tab.MenuItem);tab.AuthorByline.registerClass('tab.AuthorByline',null,ss.IDisposable);tab.CategoricalFilter.registerClass('tab.CategoricalFilter',dijit._Widget,tab.IQuickfilterOfSearchWidget);tab.BaseMode.registerClass('tab.BaseMode',Object,ss.IDisposable);tab.BaseDropdown.registerClass('tab.BaseDropdown',tab.BaseMode);tab.CheckDropdown.registerClass('tab.CheckDropdown',tab.BaseDropdown);tab.Checklist.registerClass('tab.Checklist',tab.BaseMode);tab.HierarchicalFilter.registerClass('tab.HierarchicalFilter',dijit._Widget,tab.IQuickfilterOfSearchWidget);tab.Pattern.registerClass('tab.Pattern',tab.BaseMode);tab.SimpleDropdown.registerClass('tab.SimpleDropdown',tab.BaseDropdown);tab.SimpleListUtil.registerClass('tab.SimpleListUtil');tab.SliderCatmode.registerClass('tab.SliderCatmode',tab.BaseMode);tab.TypeInCatmode.registerClass('tab.TypeInCatmode',tab.BaseMode);tab.Radiolist.registerClass('tab.Radiolist',tab.BaseMode);tab.CommandExecutedEventArgs.registerClass('tab.CommandExecutedEventArgs',ss.EventArgs);tab.ConditionalsWidget.registerClass('tab.ConditionalsWidget',dijit._Widget);tab.ContinuousSlider.registerClass('tab.ContinuousSlider',tab.BaseView);tab.vqlui$E.registerClass('tab.vqlui$E',tab.Template);tab.CurrentPagePanel.registerClass('tab.CurrentPagePanel',dijit._Widget);tab.CustomViewsPanel.registerClass('tab.CustomViewsPanel',tab.Widget);tab.CustomViewsViewModel.registerClass('tab.CustomViewsViewModel');tab.CustomizedViewChange.registerClass('tab.CustomizedViewChange');tab.DatePicker.registerClass('tab.DatePicker',tab.Widget);tab.DatePickerSettings.registerClass('tab.DatePickerSettings');tab.DojoWidgets.registerClass('tab.DojoWidgets');tableau.FilterItem.registerClass('tableau.FilterItem');tab.FilterPanel.registerClass('tab.FilterPanel',dijit._Widget,ss.IDisposable);tab.FloatingZoomToolbar.registerClass('tab.FloatingZoomToolbar',null,ss.IDisposable);tab.IteratorButtons.registerClass('tab.IteratorButtons',null,ss.IDisposable);tab.IteratorButtonTemplate.registerClass('tab.IteratorButtonTemplate',tab.Template);tab.HorizontalIteratorButtonTemplate.registerClass('tab.HorizontalIteratorButtonTemplate',tab.IteratorButtonTemplate);tab.VerticalIteratorButtonTemplate.registerClass('tab.VerticalIteratorButtonTemplate',tab.IteratorButtonTemplate);tab.HoverAddClassBehavior.registerClass('tab.HoverAddClassBehavior');tab.HoverBehavior.registerClass('tab.HoverBehavior',null,ss.IDisposable);tab.IDropDownSelect.registerClass('tab.IDropDownSelect',Object);tab.DownloadQueue.registerClass('tab.DownloadQueue');tab.vqlui$3.registerClass('tab.vqlui$3');tab.ImageDownloaderImageData.registerClass('tab.ImageDownloaderImageData');tab.ImageLoadedEventArgs.registerClass('tab.ImageLoadedEventArgs',ss.EventArgs);tab.WorkerDoneEventArgs.registerClass('tab.WorkerDoneEventArgs',ss.EventArgs);tab.WorkerTimeoutEventArgs.registerClass('tab.WorkerTimeoutEventArgs',ss.EventArgs);tab.DialogUnderlay.registerClass('tab.DialogUnderlay',dijit.DialogUnderlay);tab.LegacyDialog.registerClass('tab.LegacyDialog',dijit.Dialog);tab.SearchWidgetBase.registerClass('tab.SearchWidgetBase',dijit._Widget,tab.ISearchWidget);tab.FilteringSearchWidget.registerClass('tab.FilteringSearchWidget',tab.SearchWidgetBase);tab.OverlayImage.registerClass('tab.OverlayImage',tab.Widget,tab.IMovable);tab.OverlayPanel.registerClass('tab.OverlayPanel',tab.Widget);tab.ParameterControl.registerClass('tab.ParameterControl',dijit._Widget);tab.ParamUIBase.registerClass('tab.ParamUIBase',Object,ss.IDisposable);tab.ParamUITypeIn.registerClass('tab.ParamUITypeIn',tab.ParamUIBase);tab.ParamUITypeInDateField.registerClass('tab.ParamUITypeInDateField',tab.ParamUITypeIn);tab.ParamUICompact.registerClass('tab.ParamUICompact',tab.ParamUIBase);tab.ParamUIList.registerClass('tab.ParamUIList',tab.ParamUIBase);tab.ParamUISlider.registerClass('tab.ParamUISlider',tab.ParamUIBase);tab.PendingChangesManager.registerClass('tab.PendingChangesManager');tab.RelativeDateFilter.registerClass('tab.RelativeDateFilter',dijit._Widget,ss.IDisposable);tab.RelativeDatePickFilter.registerClass('tab.RelativeDatePickFilter',dijit._Widget,ss.IDisposable);tab.SearchWidget.registerClass('tab.SearchWidget',tab.SearchWidgetBase);tab.ShareDialog.registerClass('tab.ShareDialog',tab.LegacyDialog);tab.ShareDialogUtil.registerClass('tab.ShareDialogUtil');tab.ShownEventArgs.registerClass('tab.ShownEventArgs',ss.EventArgs);tab.Slider.registerClass('tab.Slider',null,tab.ISlider,ss.IDisposable);tab.SmallSearchWidget.registerClass('tab.SmallSearchWidget',tab.SearchWidgetBase);tab.Social.registerClass('tab.Social');tab.StepperControlView.registerClass('tab.StepperControlView',tab.BaseView);tab.StepperControlTemplate.registerClass('tab.StepperControlTemplate',tab.Template);tab.StyledButton.registerClass('tab.StyledButton');tab.TabbedNavigation.registerClass('tab.TabbedNavigation',dijit._Widget);tab.OnClickOverride.registerClass('tab.OnClickOverride',dijit.MenuItem);tab.UIMenuItem.registerClass('tab.UIMenuItem',tab.OnClickOverride);tab.IMenuItem.registerClass('tab.IMenuItem',tab.UIMenuItem);tab.NoFocusMenuItem.registerClass('tab.NoFocusMenuItem',tab.IMenuItem);tab.MaxHeightMenu.registerClass('tab.MaxHeightMenu',dijit.Menu);tab.MaxHeightMenuDojo.registerClass('tab.MaxHeightMenuDojo',tab.MaxHeightMenu);tab.TabEventArgs.registerClass('tab.TabEventArgs',ss.EventArgs);tab.TabView.registerClass('tab.TabView',tab.Widget);tab.TiledViewerRegion.registerClass('tab.TiledViewerRegion');tab.ChecklistContentFormatter.registerClass('tab.ChecklistContentFormatter',null,tab.IContentFormatter);tab.ContentFetchedEventArgs.registerClass('tab.ContentFetchedEventArgs',ss.EventArgs);tab.FetchInfo.registerClass('tab.FetchInfo');tab.FilterContentFetcher.registerClass('tab.FilterContentFetcher',null,tab.IContentFetcher);tab.FilterListUI.registerClass('tab.FilterListUI',null,tab.ITiledWidgetUI);tab.ListGridModel.registerClass('tab.ListGridModel',null,tab.ITiledGridModel);tab.RadiolistContentFormatter.registerClass('tab.RadiolistContentFormatter',null,tab.IContentFormatter);tab.ScrolledEventArgs.registerClass('tab.ScrolledEventArgs',ss.EventArgs);tab.SimpleListContentFormatter.registerClass('tab.SimpleListContentFormatter',null,tab.IContentFormatter);tab.TiledWidget.registerClass('tab.TiledWidget');tab.TiledWidgetFactory.registerClass('tab.TiledWidgetFactory');tab.TiledWidgetParams.registerClass('tab.TiledWidgetParams');tab.vqlui$A.registerClass('tab.vqlui$A');tab.TiledWindow.registerClass('tab.TiledWindow',null,tab.IRegionContentProvider,tab.IScrollable);tab.ToggleSwitch.registerClass('tab.ToggleSwitch');tab.ToolbarButton.registerClass('tab.ToolbarButton',tab.Widget);tab.ToolbarIconButton.registerClass('tab.ToolbarIconButton',tab.ToolbarButton);tab.ToolbarTextButton.registerClass('tab.ToolbarTextButton',tab.ToolbarButton);tab.Tooltip.registerClass('tab.Tooltip',tab.Widget,tab.IMovable);tab.TreeSupport.registerClass('tab.TreeSupport');tab.TreeNode.registerClass('tab.TreeNode',dijit._TreeNode,ss.IDisposable);tab.Tree.registerClass('tab.Tree',dijit.Tree);tab.TypeIn.registerClass('tab.TypeIn',null,ss.IDisposable);tab.TypeInDateField.registerClass('tab.TypeInDateField',tab.TypeIn);tab.TypeInFilterContents.registerClass('tab.TypeInFilterContents',dijit._Widget);tab.Ubertip.registerClass('tab.Ubertip',tab.Widget);tab.UICheckedMenuItem.registerClass('tab.UICheckedMenuItem',tab.OnClickOverride);tab.ViewingToolbar.registerClass('tab.ViewingToolbar',null,ss.IDisposable);tab.WidgetStyle.registerClass('tab.WidgetStyle');tab.StepperControlViewModel.registerClass('tab.StepperControlViewModel',tab.BaseViewModel);tab._ApiCommand.$0='xdomainSourceId';tab.Application.$0=null;tab.Application.$1=false;tab.Application.$8=null;tab.Application.$9=null;tab.ExportPdfDialog.$1_14=null;(function(){tab.ObjectRegistry.registerType(tab.ExportPdfDialog,tab.ExportPdfDialog);})();
tab.SheetThumbnailTemplate.template="\n<li class='tab-pdfdlg-sheet'>\n    <button class='tab-pdfdlg-thumbnail-button'>\n        <span class='tab-pdfdlg-button-icon tab-pdfdlg-thumbnail'></span>\n        <div class='tab-pdfdlg-note'></div>\n    </button>\n</li>";tab.ExportPdfDialogTemplate.template="\n<div class='tab-pdfdlg-body'>\n    <div class='tab-pdfdlg-select-group'>\n        <div class='pdf-only tab-pdfdlg-selector'>\n            <label for='pdfdlgPageSize'>{0}:</label><br />\n            <select id='pdfdlgPageSize' name='pageSize'></select>\n        </div>\n        <div class='png-only tab-pdfdlg-selector'>\n            <label for='pdfdlgImageSize'>{1}:</label><br />\n            <input name='imageHeight'></input>\n            <input name='imageWidth'></input>\n        </div>\n        <div class='tab-pdfdlg-selector'>\n            <label for='pdfdlgScaling'>{2}:</label><br />\n            <select id='pdfdlgScaling' name='scaling'></select>\n        </div>\n    </div>\n    <h3 class='pdf-only'>{3}:</h3>\n    <div class='tab-pdfdlg-button-group tab-pdfdlg-group-orientation'>\n        <button class='left pdf-only' name='orientation' value='portrait'>\n            <span class='tab-pdfdlg-portrait-icon tab-pdfdlg-button-icon'></span>\n            <div class='tab-pdfdlg-note'>{4}</div>\n        </button><button class='right pdf-only' name='orientation' value='landscape'>\n            <span class='tab-pdfdlg-landscape-icon tab-pdfdlg-button-icon'></span>\n            <div class='tab-pdfdlg-note'>{5}</div>\n        </button>\n    </div>\n    <h3>{6}:</h3>\n    <div>\n        <div class='tab-pdfdlg-button-group tab-pdfdlg-dashboard-content-mode'>\n            <button class='selected left' name='dashboard-content' value='dashboard'>\n                <span class='tab-pdfdlg-dashboard-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{8}</div>\n            </button><button class='' name='dashboard-content' value='all-dashboard'>\n                <span class='tab-pdfdlg-dash-sheets-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{7}</div>\n            </button><button class='right' name='dashboard-content' value='all'>\n                <span class='tab-pdfdlg-workbook-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{9}</div>\n            </button>\n        </div>\n        <div class='tab-pdfdlg-button-group tab-pdfdlg-worksheet-content-mode'>\n            <button class='left selected' name='worksheet-content' value='this-sheet'>\n                <span class='tab-pdfdlg-worksheet-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{10}</div>\n            </button><button class='right' name='worksheet-content' value='all'>\n                <span class='tab-pdfdlg-workbook-icon tab-pdfdlg-button-icon'></span>\n                <div class='tab-pdfdlg-note'>{9}</div>\n            </button>\n        </div>\n    </div>\n    <h3>{11}:</h3>\n    <div class='tab-pdfdlg-sheets-container'>\n        <ul class='tab-pdfdlg-sheet-list'></ul>\n    </div>\n    <div class='tab-dialog-footer'>\n        <div class='tab-pdfdlg-status'>\n            <img class='tab-pdfdlg-spinner' src='/images/30x30REV.gif' />\n            <span class='tab-dialog-status-msg'></span>\n        </div>\n        <div class='tab-dialog-actions'>\n            <button name='export' class='tab-styledButton export'>\n                <span class='tab-styledButtonLeft'></span>\n                <span class='tab-styledButtonMiddle'>{12}</span>\n                <span class='tab-styledButtonRight'></span>\n            </button><button name='cancel' class='tab-styledButton cancel'>\n                <span class='tab-styledButtonLeft'></span>\n                <span class='tab-styledButtonMiddle'>{13}</span>\n                <span class='tab-styledButtonRight'></span>\n            </button>\n        </div>\n    </div>\n</div>";tab.DragDropManager.$6=null;tab.DragDropManager.$7=null;tab.DragDropManager.$8=null;tab.DragDropManager.$9=null;tab.DragDropManager.$A=null;tab.DragDropManager.$B=0;tab.DragDropManager.$C=null;tab.DragDropManager.$D=null;tab.DragDropManager.$E=null;tab.DragDropManager.$F=null;(function(){tab.DragDropManager.$D=tab.$create_EventHandleSpec();tab.DragDropManager.$D.dragStart=tab.DragDropManager.dragStart;tab.DragDropManager.$D.dragMove=tab.DragDropManager.dragMove;tab.DragDropManager.$D.dragEnd=tab.DragDropManager.dragEnd;tab.DragDropManager.$D.firstTouch=tab.DragDropManager.firstTouch;tab.Application.add_started(function(){
tab.EventUtil.createEventHandler(document.body,tab.DragDropManager.$D);});})();
tab.ClickHandler.$2=0;tab.vqlui$8.$1=null;tab.Hover.hoverTime=150;tab.Hover.fastHoverTime=120;tab.TableauEventHandler.$0='none';tab.BrowserViewport.$0=[];tab.BrowserViewport.$2=null;(function(){if(tab.DomUtil.isEmbeddedCrossDomain()){if(ss.isValue(window.addEventListener)){window.self.addEventListener('message',tab.BrowserViewport.$7,false);}else{window.self.attachEvent('onmessage', tab.BrowserViewport.$7);}}})();
tab.GeometryUtil.halfPI=0.5*Math.PI;tab.GeometryUtil.onePI=Math.PI;tab.GeometryUtil.oneAndHalfPI=1.5*Math.PI;tab.GeometryUtil.twoPI=2*Math.PI;tab.HitTestDebugger.$0=null;tab.HitTestDebugger.$1=0;tab.EventUtil.$0=0;tab.HitTargetColliders.simpleRectangleCollider=null;(function(){tab.HitTargetColliders.simpleRectangleCollider=function($p1_0,$p1_1){
var $1_0=$p1_0.get_geom().x;var $1_1=$p1_0.get_geom().x+$p1_0.get_geom().w;var $1_2=$p1_0.get_geom().y;var $1_3=$p1_0.get_geom().y+$p1_0.get_geom().h;var $1_4=$p1_1.x;var $1_5=$p1_1.x+$p1_1.w;var $1_6=$p1_1.y;var $1_7=$p1_1.y+$p1_1.h;if($1_3<$1_6){return false;}if($1_2>$1_7){return false;}if($1_1<$1_4){return false;}if($1_0>$1_5){return false;}return true;};})();
tab.MouseEventUtil.$0=null;tab.MouseEventUtil.$1=null;tab.MouseEventUtil.$2=false;tab.PaneDrawInfo.renderPassOrder=['normalUnderPass','normalOnPass','highlightedUnderPass','highlightedOnPass','selectedUnderPass','selectedOnPass'];tab.PaneDrawInfo.drawRoleOrder=['background','marks','underLabel','label','foreground'];tab.PaneDrawInfo.shapeMapping={'0':'shapeIDCircle','1':'shapeIDSquare','2':'shapeIDPlus','3':'shapeIDTimes','4':'shapeIDAsterisk','5':'shapeIDDiamond','6':'shapeIDTriangle','7':'shapeIDDownTriangle','8':'shapeIDLeftTriangle','9':'shapeIDRightTriangle','4194304':'shapeIDFilledCircle','4194305':'shapeIDFilledSquare','4194306':'shapeIDFilledPlus','4194307':'shapeIDFilledTimes','4194308':'shapeIDFilledStar','4194309':'shapeIDFilledDiamond','4194310':'shapeIDFilledTriangle','4194311':'shapeIDFilledDownTriangle','4194312':'shapeIDFilledLeftTriangle','4194313':'shapeIDFilledRightTriangle','-4194304':'shapeIDUnscaledFilledCircle'};tab.PaneDrawInfo.$B='color'+'_idx';tab.PaneDrawInfo.$12=['font','font_size','font_style','font_weight'];tab.PaneDrawInfo.$13=['color','border_color','halo_color','selected_halo_color','highlighted_halo_color','selected_multi_prim_halo_color','text_style_color','background_color'];tab.PaneDrawInfo.$14=['x','x1','x_prev','x_next','cell_x'];tab.PaneDrawInfo.$15=['clip_width'];tab.PaneDrawInfo.$16=['y','y1','y_prev','y_next','cell_y'];tab.PaneDrawInfo.$17=['clip_height'];tab.PaneDrawInfo.$18=null;tab.PaneDrawInfo.$19=null;tab.PaneDrawInfo.$1A={theta:tab.$create_PointF(0,1),theta1:tab.$create_PointF(0,1),size:tab.$create_PointF(0,4096),text_run_x:tab.$create_PointF(0,4096),text_run_direction_x:tab.$create_PointF(0,4096),text_run_y:tab.$create_PointF(0,4096),text_run_direction_y:tab.$create_PointF(0,4096)};(function(){tab.PaneDrawInfo.$18={};tab.PaneDrawInfo.$18['enable-pan-x']=1<<0;tab.PaneDrawInfo.$18['enable-pan-y']=1<<1;tab.PaneDrawInfo.$18['enable-zoom-x']=1<<2;tab.PaneDrawInfo.$18['enable-zoom-y']=1<<3;tab.PaneDrawInfo.$18['enable-scale-x']=1<<4;tab.PaneDrawInfo.$18['enable-scale-y']=1<<5;tab.PaneDrawInfo.$18['clip-to-cell-x']=1<<6;tab.PaneDrawInfo.$18['clip-to-cell-y']=1<<7;tab.PaneDrawInfo.$18['clip-to-cell-for-selection']=1<<8;tab.PaneDrawInfo.$18['x-axis-on-top']=1<<9;tab.PaneDrawInfo.$18['y-axis-on-right']=1<<10;tab.PaneDrawInfo.$19={};tab.PaneDrawInfo.$19['end']=1<<0;tab.PaneDrawInfo.$19['endprimitive']=1<<1;tab.PaneDrawInfo.$19['closedprimitive']=1<<2;tab.PaneDrawInfo.$19['marked']=1<<3;tab.PaneDrawInfo.$19['markediflabel']=1<<4;tab.PaneDrawInfo.$19['debug']=1<<7;tab.PaneDrawInfo.$19['user']=1<<16;var $enum1=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.$14);while($enum1.moveNext()){var $0=$enum1.current;tab.PaneDrawInfo.$1A[$0]=tab.$create_PointF(0,0);}var $enum2=ss.IEnumerator.getEnumerator(tab.PaneDrawInfo.$16);while($enum2.moveNext()){var $1=$enum2.current;tab.PaneDrawInfo.$1A[$1]=tab.$create_PointF(0,0);}})();
tab.CanvasRenderer.halfPI=0.5*Math.PI;tab.CanvasRenderer.onePI=Math.PI;tab.CanvasRenderer.oneAndHalfPI=1.5*Math.PI;tab.CanvasRenderer.twoPI=2*Math.PI;tab.DisplayList2DRenderer.$F=['x-labels','bottom-axis','top-axis'];tab.DisplayList2DRenderer.$10=['y-labels','left-axis','right-axis'];tab.FontNormalizer.$0=null;tab.FontNormalizer.$1=null;tab.TabRenderContext2D.defaultColor='rgb(0,0,0)';tab.TabRenderContext2D.defaultLinePattern='solid';tab.TabRenderContext2D.defaultLineDashDashed=[3,1];tab.TabRenderContext2D.defaultLineDashDotted=[1,1];tab.TabRenderContext2D.defaultLineWidth=1;tab.TabRenderContext2D.defaultLineJoin='bevel';tab.TabRenderContext2D.defaultLineCap='butt';tab.TabRenderContext2D.defaultTextColor='rgb(0,0,0)';tab.TabRenderContext2D.defaultTextBaseline='alphabetic';tab.TabRenderContext2D.defaultTextAlign='start';tab.TabRenderContext2D.defaultTextAngle=0;tab.TabRenderContext2D.defaultFontName='Arial';tab.TabRenderContext2D.defaultFontSize=8;tab.TabRenderContext2D.defaultTextUnderline=false;tab.WKTParser.$0=new RegExp('[\\n\\r]','g');tab.WKTParser.$1=new RegExp('^\\s*(\\w+)\\s*\\(\\s*(.*)\\s*\\)\\s*$');tab.WKTParser.$2=new RegExp('\\s+');tab.WKTParser.$3=new RegExp('\\)\\s*,\\s*\\(');tab.WKTParser.$4=new RegExp('\\)\\s*\\)\\s*,\\s*\\(\\s*\\(');tab.WKTParser.$5=new RegExp('^\\s*\\(?(.*?)\\)?\\s*$');tableau.util.$0=[];tableau.util.bIsAnimationShown=false;tableau.util.isMac=(window.navigator.appVersion.indexOf('Macintosh')!==-1);tableau.util.has3D=window.WebKitCSSMatrix !== undefined && new WebKitCSSMatrix().m11 !== undefined;(function(){if(tableau.util.isMac){dojo.addClass(document.documentElement,'tb_mac');}})();
tab.QuantitativeColorLegendViewModel.modelChangedProperty='ModelChanged';tab.LegendBaseViewModel.horizontalIteratorButtonSize=12;tab.LegendBaseViewModel.horizontalIteratorButtonHolderWidth=2*(12+2);tab.LegendBaseViewModel.parentZoneSizeChangedKey='ParentZoneSizeChanged';tab.LegendBaseViewModel.newZoneParentKey='newZoneParent';tab.CategoricalLegendViewModel.$1_9=new tab.ColorModel(0,0,0,1);tab.PaneTableViewModel.blackListVisualParts=['left-axis','right-axis','y-labels','x-labels','top-axis','bottom-axis','title','caption'];tab.SubscribeViewModel.modeEmail=0;tab.SubscribeViewModel.modeSubscribe=1;tab.UberPopupViewModel.modeProperty='mode';tab.ViewingToolbarCommands.$0=new RegExp('^https?://[^/]+(.*)$');tab.ZoneViewModel.isActiveZonePropertyName='isActiveZone';tab.AccordionViewModel.propertyActiveItem='ActiveItem';tab.AccordionViewModel.propertyAllItems='AllItems';(function(){tab.ObjectRegistry.registerType(tab.ConfirmationView,tab.ConfirmationView);})();
(function(){tab.ObjectRegistry.registerType(tab.ApplicationView,tab.ApplicationView);})();
(function(){tab.ObjectRegistry.registerType(tab.DashboardView,tab.DashboardView);})();
(function(){tab.ObjectRegistry.registerType(tab.FlipboardNavigatorView,tab.FlipboardNavigatorView);})();
(function(){tab.ObjectRegistry.registerType(tab.FlipboardView,tab.FlipboardView);})();
tab.PaneTableView.scrollableXRegions=['xheader','bottomaxis','topaxis','viz'];tab.PaneTableView.scrollableYRegions=['yheader','leftaxis','rightaxis','viz'];(function(){tab.ObjectRegistry.registerType(tab.ParameterControlView,tab.ParameterControlView);})();
(function(){tab.ObjectRegistry.registerType(tab.QuickFilterView,tab.QuickFilterView);})();
tab.CategoricalLegendView.$2_4=new tab.ColorModel(216,216,216,1);tab.CategoricalLegendView.$2_5=new tab.ColorModel(178,178,178,1);tab.CategoricalLegendTemplate.legendHighlighterSelector='.tabLegendHighlighter';(function(){tab.ObjectRegistry.registerType(tab.PageView,tab.PageView);})();
tab.LogOnView.$2_0=null;(function(){tab.ObjectRegistry.registerType(tab.LogOnView,tab.LogOnView);})();
(function(){tab.ObjectRegistry.registerType(tab.NotificationView,tab.NotificationView);})();
tab.SubscribeView.minPanelDistanceFromEdge=10;(function(){tab.ObjectRegistry.registerType(tab.SubscribeView,tab.SubscribeView);})();
tab.ZoneView.$2_1=['bitmap','text','layout-free-form','empty','map','color','size','shape'];(function(){tab.ObjectRegistry.registerType(tab.ZoneView,tab.ZoneView);})();
tab.ZoneTemplate.$1_0="<div class='tab-zone'>"+"<div class='wcHighlight wcHighlightTop'/>"+"<div class='wcHighlight wcHighlightBottom'/>"+"<div class='wcHighlight wcHighlightLeft'/>"+"<div class='wcHighlight wcHighlightRight'/>"+'</div>';tab.MenuTemplate.htmlTemplate="<div class='tabMenu'><div class='tabMenuContent'/></div>";(function(){tab.ObjectRegistry.registerType(tab.ContinuousSlider,tab.ContinuousSlider);})();
tab.vqlui$E.$1_0="<div class='tabHorizontalSlider'>\n</div>'";tab.CustomViewsPanel.minPanelWidth=200;tab.CustomViewsPanel.minPanelHeight=200;tab.CustomViewsPanel.minPanelDistanceFromEdge=10;tab.CustomViewsPanel.spacing=7;tab.CustomViewsPanel.log=tab.Logger.getLogger(tab.CustomViewsPanel);tab.CustomViewsViewModel.modeSelect=0;tab.CustomViewsViewModel.modeManage=1;tab.CustomViewsViewModel.$0=tab.Logger.getLogger(tab.CustomViewsViewModel);tab.DojoWidgets.$0="<div class='CategoricalFilter'>"+"<div class='CategoricalFilterBox' dojoAttachPoint='domBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='FilterTitle' dojoAttachPoint='domTitleBar'></div>"+"<div dojoType='dijit.form.Button' class='CFButton CFSearchButton' showlabel='false'"+"dojoAttachPoint='searchButton' dojoAttachEvent='onClick:toggleSearchUI'"+"iconClass='wcIconSearch'>Search</div>"+"<div dojoType='dijit.form.Button' class='CFButton CFDomainButton' showlabel='false'"+"dojoAttachPoint='domainButton' dojoAttachEvent='onClick:toggleDomain'"+"iconClass='wcIconDomainAll'>Show Fewer Values</div>"+"<div dojoType='dijit.form.Button' dojoAttachEvent='onClick:doMenu' iconClass='wcIconContextMenu'"+"class='CFButton CFMenuButton' dojoAttachPoint='menuButton' name='type'></div>"+'</div>'+"<div dojoAttachPoint='searchDiv'></div>"+"<div class='CFContent' dojoAttachPoint='domContent'></div>"+"<div class='CFHorizScroll' dojoAttachPoint='domHorizScroll' dojoAttachEvent='onscroll:doscrollHoriz'>"+"<div dojoAttachPoint='domHorizScrollContent'></div>"+'</div>'+"<div dojoType='tableau.base.widget.ConditionalsWidget' dojoAttachPoint='conditionals'></div>"+'</div>'+'</div>';tab.DojoWidgets.$1="<div class='ParameterControl'>"+"<div class='ParameterControlBox' dojoAttachPoint='domBox'>"+"<div class='TitleAndControls' dojoAttachPoint='domControls'>"+"<div class='ParamTitle' dojoAttachPoint='domTitleBar'></div>"+'</div>'+"<div class='PCContent' dojoAttachPoint='domContent'></div>"+'</div>'+'</div>';tab.DojoWidgets.$2="<div class='Search'>"+"<div class='SearchBox' dojoAttachPoint='domQuerySection'>"+"<textarea rows='1' class='QueryBox' spellcheck='false'"+"dojoAttachPoint='domQueryBox'"+"dojoAttachEvent='onkeydown:onQueryBoxKeyDown,onpaste:onQueryBoxPaste'></textarea>"+"<span class='wcSearchX' title='${XBUTTON_CLOSE_TOOLTIP}'"+"dojoAttachPoint='domXButton'"+"dojoAttachEvent='onclick:onXButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span>"+"<img class='searchBusyImg' title='${CANCEL_SEARCH_TOOLTIP}' src='${busy_gif_url}'"+"dojoAttachPoint='domSearchBusyImg'"+"dojoAttachEvent='onclick:onSearchBusyImgClick'></img>"+"<span class='wcIconSearch' title='${SEARCH_TOOLTIP}'"+"dojoAttachPoint='domSearchButton'"+"dojoAttachEvent='onclick:onSearchButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span>"+"<span class='wcIconSearchAdd' title='${ADD_ITEM_CTRL_ENTER}'"+"dojoAttachPoint='domSearchAddButton'"+"dojoAttachEvent='onclick:onSearchAddButtonClick,onmouseover:onButtonHover,onmouseout:onButtonUnhover'></span>"+'</div>'+"<div class='SearchResults' dojoAttachPoint='domResults' dojoAttachEvent='onclick:onListItemClick'></div>"+'</div>';(function(){dojo.require('tableau.base.BaseClient');var $0=null;$0=[dijit._Widget,dijit._Contained,dijit._Templated,tab.CategoricalSelectionMixin];(tab.CategoricalFilter).prototype.templateString=tab.DojoWidgets.$0;dojo.declare('tableau.base.widget.CategoricalFilter',$0,(tab.CategoricalFilter).prototype);$0=[dijit._Widget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.ConditionalsWidget',$0,(tab.ConditionalsWidget).prototype);$0=[dijit.layout._LayoutWidget,dijit._Templated];dojo.declare('tableau.base.widget.TabbedNavigation',$0,(tab.TabbedNavigation).prototype);$0=[dijit.layout._LayoutWidget,dijit._Templated];dojo.declare('tableau.base.widget.CurrentPagePanel',$0,(tab.CurrentPagePanel).prototype);$0=[dijit._Widget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.LegendPanel',$0,(tab.LegendPanel).prototype);$0=[dijit._Widget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.QuantitativeFilter',$0,(tab.QuantitativeFilter).prototype);$0=[tableau.base.widget.QuantitativeFilter];dojo.declare('tableau.base.widget.QuantitativeDateFilter',$0,(tab.QuantitativeDateFilter).prototype);$0=[dijit._Widget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.RelativeDateFilter',$0,(tab.RelativeDateFilter).prototype);$0=[dijit._Widget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.RelativeDatePickFilter',$0,(tab.RelativeDatePickFilter).prototype);dojo.declare('tableau.base.widget.catmode.BaseMode',[dijit._Contained],(tab.BaseMode).prototype);dojo.declare('tableau.base.widget.catmode.Checklist',[tableau.base.widget.catmode.BaseMode],(tab.Checklist).prototype);dojo.declare('tableau.base.widget.catmode.BaseDropdown',[tableau.base.widget.catmode.BaseMode],(tab.BaseDropdown).prototype);dojo.declare('tableau.base.widget.catmode.SimpleDropdown',[tableau.base.widget.catmode.BaseDropdown],(tab.SimpleDropdown).prototype);dojo.declare('tableau.base.widget.catmode.CheckDropdown',[tableau.base.widget.catmode.BaseDropdown],(tab.CheckDropdown).prototype);dojo.declare('tableau.base.widget.catmode.Pattern',[tableau.base.widget.catmode.BaseMode],(tab.Pattern).prototype);dojo.declare('tableau.base.widget.catmode.Slider',[tableau.base.widget.catmode.BaseMode],(tab.SliderCatmode).prototype);dojo.declare('tableau.base.widget.catmode.TypeIn',[tableau.base.widget.catmode.BaseMode],(tab.TypeInCatmode).prototype);dojo.declare('tableau.base.widget.catmode.Radiolist',[tableau.base.widget.catmode.BaseMode],(tab.Radiolist).prototype);dojo.declare('tableau.base.widget.ui.iDropDownSelect',[dojox.form.DropDownSelect],(tab.IDropDownSelect).prototype);dojo.declare('tableau.base.widget.ui.Slider',new Array(0),(tab.Slider).prototype);dojo.declare('tableau.base.widget.ui.TypeIn',new Array(0),(tab.TypeIn).prototype);dojo.declare('tableau.base.widget.ui.TypeInDateField',[tab.TypeIn],(tab.TypeInDateField).prototype);dojo.declare('tableau.base.widget.ui.onClickOverride',null,(tab.OnClickOverride).prototype);dojo.declare('tableau.base.widget.ui.iMenuItem',[dijit.MenuItem,tab.OnClickOverride],(tab.UIMenuItem).prototype);dojo.declare('tableau.base.widget.ui.iCheckedMenuItem',[dijit.CheckedMenuItem,tab.OnClickOverride],(tab.UICheckedMenuItem).prototype);dojo.declare('tableau.base.NoFocusMenuItem',[tableau.base.widget.ui.iMenuItem],(tab.NoFocusMenuItem).prototype);dojo.declare('tableau.base.MaxHeightMenu',[dijit.Menu],(tab.MaxHeightMenu).prototype);dojo.declare('tableau.base.widget.hsm.TreeModel',null,(tab.TreeSupport).prototype);dojo.declare('tableau.base.widget.hsm.Tree',[dijit.Tree],(tab.Tree).prototype);dojo.declare('tableau.base.widget.hsm._TreeNode',[dijit._TreeNode],(tab.TreeNode).prototype);$0=[dijit._Widget,dijit._Contained,dijit._Templated];dojo.declare('tableau.base.widget.HierarchicalFilter',$0,(tab.HierarchicalFilter).prototype);$0=[dijit._Widget,dijit._Templated];(tab.ParameterControl).prototype.templateString=tab.DojoWidgets.$1;dojo.declare('tableau.base.widget.ParameterControl',$0,(tab.ParameterControl).prototype);dojo.declare('tableau.base.widget.paramui.Base',[dijit._Contained],(tab.ParamUIBase).prototype);dojo.declare('tableau.base.widget.paramui.TypeIn',[tableau.base.widget.paramui.Base],(tab.ParamUITypeIn).prototype);dojo.declare('tableau.base.widget.paramui.TypeInDateField',[tab.ParamUITypeIn],(tab.ParamUITypeInDateField).prototype);dojo.declare('tableau.base.widget.paramui.Compact',[tableau.base.widget.paramui.Base],(tab.ParamUICompact).prototype);dojo.declare('tableau.base.widget.paramui.List',[tableau.base.widget.paramui.Base],(tab.ParamUIList).prototype);dojo.declare('tableau.base.widget.paramui.Slider',[tableau.base.widget.paramui.Base],(tab.ParamUISlider).prototype);$0=[dijit._Widget,dijit._Templated,dijit._Contained];dojo.declare('tableau.base.widget.SearchWidgetBase',$0,(tab.SearchWidgetBase).prototype);$0=[tableau.base.widget.SearchWidgetBase,tab.CategoricalSelectionMixin];(tab.SearchWidget).prototype.templateString=tab.DojoWidgets.$2;dojo.declare('tableau.base.widget.SearchWidget',$0,(tab.SearchWidget).prototype);dojo.declare('tableau.base.widget.SmallSearchWidget',[tableau.base.widget.SearchWidgetBase],(tab.SmallSearchWidget).prototype);dojo.declare('tableau.base.widget.FilteringSearchWidget',[tableau.base.widget.SearchWidgetBase],(tab.FilteringSearchWidget).prototype);$0=[dijit._Widget,dijit._Templated,dijit._Contained];dojo.declare('tableau.base.widget.TypeInFilterContents',$0,(tab.TypeInFilterContents).prototype);$0=[dijit.layout._LayoutWidget,dijit._Templated];dojo.declare('tableau.base.widget.FilterPanel',$0,(tab.FilterPanel).prototype);$0=[dijit.DialogUnderlay];dojo.declare('tableau.base.widget.DialogUnderlay',$0,(tab.DialogUnderlay).prototype);$0=[dijit.Dialog];dojo.declare('tableau.base.widget.Dialog',$0,(tab.LegacyDialog).prototype);$0=[tableau.base.widget.Dialog];dojo.declare('tableau.base.widget.ShareDialog',$0,(tab.ShareDialog).prototype);})();
tableau.FilterItem.ALL=tab.Strings.QuickFilterAll;tableau.FilterItem.checkboxArray=['<div class="','','" id="','','"><div class="facet">','','</div><div class="facetOverflow"><input type="checkbox" class="FICheckRadio" name="','','" ','','><a title="','','">','','</a></div></div>'];tableau.FilterItem.radioArray=['<div class="','','" id="','','"><div class="facet">','','</div><div class="facetOverflow"><input type="radio" class="FICheckRadio" name="','','" ','','><a title="','','">','','</a></div></div>'];tableau.FilterItem.selectArray=['<option value="','','" ','','>','','</option>'];tableau.FilterItem.typeInListArray=['<div tabindex="0" class="FIItem FITypeInItem FIChecked" id="','','" title="','','">','','</div>'];tab.HorizontalIteratorButtonTemplate.$1_1="<div class='tabCatLegendScrollButtonHolder'>"+"<span class='tabCatLegendScrollPrev'/>"+"<span class='tabCatLegendScrollNext'/>"+'</div>';tab.VerticalIteratorButtonTemplate.$1_1="<div class='tabCatLegendScrollButtonHolder'>"+"<span class='tabCatLegendScrollPrev'/>"+'<br>'+"<span class='tabCatLegendScrollNext'/>"+'</div>';tab.FilteringSearchWidget.minimumDomainSize=5;tab.PendingChangesManager.allItemIndex=-1;tab.RelativeDateFilter.$1_E=null;tab.RelativeDateFilter.$1_F=null;tab.RelativeDatePickFilter.pickerDurationsInteger=[1,7,30,90,365,1825];tab.RelativeDatePickFilter.pickerDurations=['0d','-7d','-30d','-90d','-365d','-1825d'];tab.RelativeDatePickFilter.pickerStrings=[tab.Strings.RelDatePickerOneDayAbbrev,tab.Strings.RelDatePickerOneWeekAbbrev,tab.Strings.RelDatePickerOneMonthAbbrev,tab.Strings.RelDatePickerThreeMonthsAbbrev,tab.Strings.RelDatePickerOneYearAbbrev,tab.Strings.RelDatePickerFiveYearsAbbrev];tab.SearchWidgetBase.noSearchPerformed=-1;tab.ShareDialogUtil.$0=tab.Strings.ShareDialogWaitingLinkMessage;tab.ShareDialogUtil.$1=tab.Strings.ShareDialogWaitingEmbedMessage;tab.ShareDialogUtil.share_settings=tab.$create_ShareSettings();tab.ShareDialogUtil._popup=null;tab.ShareDialogUtil.$2=null;(function(){if(tab.BrowserSupport.get_addEventListener()){document.addEventListener('click',tab.ShareDialogUtil.hideActivePopup,false);}else if((typeof(document.attachEvent)==='function')){document.attachEvent('onclick',function(){
tab.ShareDialogUtil.hideActivePopup(null);});}else{document.onclick=tab.ShareDialogUtil.hideActivePopup;}})();
tab.Slider.tableauSliderTemplate="<div class='dijit dijitReset'>"+"<div class='dijitReset tableauSlider' dojoAttachPoint='tableauSlider'>"+"<table class='dijit dijitReset' cellspacing='0' cellpadding='0' border='0' rules='none' dojoAttachEvent='onkeypress:_onKeyPress'>"+"<tr class='dijitReset'>"+"<td class='dijitReset'></td>"+"<td dojoAttachPoint='containerNode,topDecoration' class='dijitReset' style='text-align:center;width:100%;'></td>"+"<td class='dijitReset'></td>"+'</tr>'+"<tr class='dijitReset'>"+"<td class='dijitReset'>"+"<div class='dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper dijitSliderLeftBumper' dojoAttachEvent='onclick:_onClkDecBumper'></div>"+'</td>'+"<td class='dijitReset'>"+"<input dojoAttachPoint='valueNode' type='hidden' name='${name}'>"+"<div class='dijitReset dijitSliderBarContainerH' waiRole='presentation' dojoAttachPoint='sliderBarContainer'>"+"<div waiRole='presentation' dojoAttachPoint='progressBar' class='dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH' dojoAttachEvent='onclick:_onBarClick'>"+"<div class='dijitSliderMoveable dijitSliderMoveableH'>"+"<div dojoAttachPoint='sliderHandle,focusNode' class='dijitSliderImageHandle dijitSliderImageHandleH' dojoAttachEvent='onmousedown:_onHandleClick' waiRole='slider' valuemin='${minimum}' valuemax='${maximum}'></div>"+'</div>'+'</div>'+"<div waiRole='presentation' dojoAttachPoint='remainingBar' class='dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH' dojoAttachEvent='onclick:_onBarClick'></div>"+'</div>'+'</td>'+"<td class='dijitReset'>"+"<div class='dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper dijitSliderRightBumper' dojoAttachEvent='onclick:_onClkIncBumper'></div>"+'</td>'+'</tr>'+"<tr class='dijitReset'>"+"<td class='dijitReset'></td>"+"<td dojoAttachPoint='containerNode,bottomDecoration' class='dijitReset'></td>"+"<td class='dijitReset'></td>"+'</tr>'+'</table>'+'</div>'+"<div class='dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowDec' style='display:none' dojoAttachPoint='decrementButton'>"+"<div class='dijitSliderDecrementIconH' tabIndex='-1'>"+"<span class='dijitSliderButtonInner'>-</span>"+'</div>'+'</div>'+"<div class='dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowInc' style='display:none' dojoAttachPoint='incrementButton'>"+"<div class='dijitSliderIncrementIconH' tabIndex='-1'>"+"<span class='dijitSliderButtonInner'>+</span>"+'</div>'+'</div>'+'</div>';tab.Slider.$0="<div class='dijitTooltip dijitTooltipLeft' id='dojoTooltip'>"+"<div class='dijitTooltipContainer' dojoAttachpoint='coreArea'>"+"<div class='dijitTooltipContents' dojoAttachPoint='containerNode' waiRole='alert'></div></div>"+"<div class='dijitTooltipConnector'></div>"+'</div>';(function(){tab.ObjectRegistry.registerType(tab.StepperControlView,tab.StepperControlView);})();
tab.TiledViewerRegion.windowLog=null;tab.FilterListUI.$0=100;tab.SimpleListContentFormatter.simpleListTemplate=['<div class="','','" id="','','"><div class="facet">','','</div><div class="facetOverflow"><a title="','','">','','</a></div></div>'];tab.TiledWidget.$0=tab.Logger.getLogger(tab.TiledWidget);tab.Tooltip.defaultVerticalOffset=16;tab.Tooltip.bodySelector='.tab-tooltipContent';tab.Tooltip.defaultHorizonalOffset=0;tab.Tooltip.belowRightClass='tab-tooltipBR';tab.Tooltip.belowLeftClass='tab-tooltipBL';tab.Tooltip.aboveRightClass='tab-tooltipAR';tab.Tooltip.aboveLeftClass='tab-tooltipAL';tab.Tooltip.$1_0='tab-tooltipAR'+' '+'tab-tooltipAL'+' '+'tab-tooltipBL'+' '+'tab-tooltipBR';tab.Tooltip.$1_4=null;tab.Ubertip.$1_E=null;(function(){tab.Ubertip.$1_E={};})();
tab.StepperControlViewModel.valueProperty='Value';tab.StepperControlViewModel.enabledProperty='IsEnabled';tab.StepperControlViewModel.incrementEnabledProperty='IsIncrementEnabled';tab.StepperControlViewModel.decrementEnabledProperty='IsDecrementEnabled';});// This script was generated using Script# v0.7.4.0
// vqluiweb.js
dojo.addOnLoad(function(){
Type.registerNamespace('tab');tab.CategoricalLegendViewWeb=function(viewModel){tab.CategoricalLegendViewWeb.initializeBase(this,[viewModel,new tab.CategoricalLegendTemplateWeb()]);this.$3_1=this.$3_8();this.get_$3_6().domRoot.css('cursor','default');this.$3_2=new tab.IteratorButtons(this.get_catLegendTemplate().columnsHolder,true,tab.LegendBaseViewModel.horizontalIteratorButtonSize);this.get_$3_6().scroller.append(this.$3_2.get_domRoot());}
tab.CategoricalLegendViewWeb.prototype={$3_1:null,$3_2:null,$3_3:null,get_$3_4:function(){return this.get_$3_6().columnsHolder.width();},get_$3_5:function(){return (this.get_catLegendViewModel().get_categoricalLegendPM().catLegendLayout.colCount*this.get_catLegendViewModel().get_categoricalLegendPM().catLegendLayout.colWidth);},get_$3_6:function(){return this.get_template();},dispose:function(){this.$3_1.dispose();this.$3_3.dispose();this.$3_2.dispose();tab.CategoricalLegendViewWeb.callBaseMethod(this, 'dispose');},drawLegend:function(){tab.CategoricalLegendViewWeb.callBaseMethod(this, 'drawLegend');var $0=this.get_catLegendViewModel().get_categoricalLegendPM();var $1=$0.catLegendLayout;var $2=this.get_$3_6().titleArea.height();var $3=2;var $4=2;var $5=!this.$3_7();if($5&&!this.get_catLegendViewModel().get_titleInline()){$3+=$2;}var $6=false;var $7=false;if(this.$3_D()){this.get_catLegendTemplate().columnsHolder.css('overflow-x','hidden');this.get_catLegendTemplate().columnsHolder.css('overflow-y','hidden');var $8=this.get_catLegendViewModel().get_categoricalLegendPM().catLegendLayout.colWidth;this.$3_2.set_scrollIncrement($8);this.$3_2.reset();this.viewportWidth-=tab.LegendBaseViewModel.horizontalIteratorButtonHolderWidth;if($5){$4+=tab.LegendBaseViewModel.horizontalIteratorButtonHolderWidth+2;}if(this.get_catLegendViewModel().get_titleInline()){this.get_$3_6().scroller.css('top','0px');}else{this.get_$3_6().scroller.css('top',$2+'px');}}else{if($1.legendLayout==='horizontal'||$1.legendLayout==='grid'){$6=true;}else{$7=true;}}if($5&&$7){var $9=$1.rowCount*$1.rowHeight;if(this.viewportHeight<$9){var $A=tab.Metrics.get_scrollW();$4+=$A;}}this.get_catLegendTemplate().columnsHolder.css('overflow-x',($6)?'auto':'hidden');this.get_catLegendTemplate().columnsHolder.css('overflow-y',($7)?'auto':'hidden');this.get_$3_6().legendHighlighter.css('top',$3+'px');this.get_$3_6().legendHighlighter.css('right',$4+'px');this.setContentSize(this.viewportHeight,this.viewportWidth);this.$3_E();},makeTooltip:function(){return tab.TooltipBehavior.createTooltip();},$3_7:function(){var $0=this.get_$3_6().titleArea.height();var $1=!this.get_catLegendViewModel().get_titleInline();if($0>0&&$1){return true;}return false;},$3_8:function(){this.$3_3=new tab.HoverBehavior(this,null,ss.Delegate.create(this,this.$3_9),ss.Delegate.create(this,this.$3_A));var $0=tab.$create_EventHandleSpec();$0.tap=ss.Delegate.create(this,this.$3_C);$0.hover=ss.Delegate.create(this,this.$3_B);$0.hoverDelay=tab.Hover.hoverTime;var $1=new tab.MouseHandler(this.get_$3_6().domRoot.get(0),$0);return $1;},$3_9:function($p0){this.setHighlightButtonVisibility(true);},$3_A:function($p0){this.setHighlightButtonVisibility(false);},$3_B:function($p0){if(tab.DragDropManager.get_isDragging()){return;}var $0=this.getLegendItemFromEvent($p0);if(ss.isValue($0)){var $1=this.getViewportPosition($p0);var $2=this.getDocumentPosition($1);var $3=tab.$create_RectXY($2.x,$2.y,0,0);this.performHoverOnItem($1,$3);}$p0.preventDefault();},$3_C:function($p0){if($p0.target===this.get_$3_6().legendHighlighter.get(0)){this.onLegendHighlighterTapped();}else{var $0=this.getLegendItemFromEvent($p0);var $1=tab.ResolveSelectAction.fromNormalizedEvent($p0);if(ss.isValue($0)){var $2=this.getViewportPosition($p0);var $3=this.getDocumentPosition($2);var $4=tab.$create_RectXY($3.x,$3.y,0,0);this.performSelectOnItem($0,$1,$2,$4);}else{this.get_catLegendViewModel().selectNone($1);}}$p0.preventDefault();},$3_D:function(){var $0=this.get_catLegendViewModel().get_categoricalLegendPM().catLegendLayout;if($0.legendLayout==='vertical'){return false;}var $1=($0.rowHeight+tab.Metrics.get_scrollH());return (this.get_$3_4()<this.get_$3_5()&&$1>=this.get_$3_6().columnsHolder.height());},$3_E:function(){if(this.$3_D()){this.get_$3_6().scroller.show();}else{this.get_$3_6().scroller.hide();}}}
tab.CategoricalLegendTemplateWeb=function(){tab.CategoricalLegendTemplateWeb.initializeBase(this,[$("\n            <div class='tabLegendPanel'>\n                <div class='tabLegendBox'>\n                    <div class='tabLegendTitle'></div>\n                    <div class='tabLegendContentHolder' style='overflow:auto'>\n                        <div class='tabLegendColumnHolder' style='white-space:nowrap'></div>\n                    </div>\n                    <div class='tabCatLegendScroll'></div>\n                </div>\n            </div>")]);this.scroller=this.getElementBySelector('.tabCatLegendScroll');}
tab.CategoricalLegendTemplateWeb.prototype={scroller:null}
tab.MouseHandler=function(domElement,config){tab.MouseHandler.initializeBase(this,[domElement,config]);}
tab.MouseHandler.prototype={get_usingHover:function(){return tab.TableauEventHandler.isHandling(this.config,'hover')||tab.TableauEventHandler.isHandling(this.config,'moving');},suppressHover:function(){if(this.get_usingHover()){this.recognizers.hover.suppressHover();}},unsuppressHover:function(){if(this.get_usingHover()){this.recognizers.hover.unsuppressHover();}},cancelHover:function(){if(this.get_usingHover()){this.recognizers.hover.cancel();}},makeRecognizers:function(spec){tab.MouseHandler.callBaseMethod(this, 'makeRecognizers',[spec]);if(this.get_usingHover()){this.recognizers.hover=new tab.Hover(spec);}},setupEventNames:function(){this.isTouch=false;this.startEvent='mousedown';this.moveEvent='mousemove';this.endEvent='mouseup';this.outEvent='mouseout';this.scrollEvent='scroll';},additionalEvents:function(){if(this.get_usingHover()){this.addEvent(this.outEvent);}this.addEvent(this.scrollEvent);},configureDomElem:function(domElem){domElem.style['-webkit-tap-highlight-color']='transparent';}}
tab.ApplicationViewModelWeb=function(skipInit,layoutSession){tab.ApplicationViewModelWeb.initializeBase(this,[skipInit,layoutSession]);$(window).bind(this.createNamespacedEventName('resize'),ss.Delegate.create(this,function(){
this.resize(false);}));}
tab.ApplicationViewModelWeb.prototype={destroy:function(preserveDom){$(window).unbind(this.createNamespacedEventName('resize'));tab.ApplicationViewModelWeb.callBaseMethod(this, 'destroy',[preserveDom]);},makeExportPdfDialog:function(session){return new tab.ExportPdfDialog(session,false);},makeViewingToolbar:function(isTop){return new tab.ViewingToolbarWeb(this,isTop);}}
tab.LegacyLegendViewWeb=function(viewModel){tab.LegacyLegendViewWeb.initializeBase(this,[viewModel]);}
tab.LegacyLegendViewWeb.prototype={instantiateLegendPanel:function(props){return new tableau.web.widget.LegendPanelWeb(props);}}
tab.PaneTableViewWeb=function(paneTableVM){this.$3_0={};tab.PaneTableViewWeb.initializeBase(this,[paneTableVM,new tab.PaneTableTemplateWeb()]);this.$3_1=this.dom;var $0=tab.$create_EventHandleSpec();$0.tap=ss.Delegate.create(this,function($p1_0){
if($p1_0.currentTarget===$p1_0.target){this.clearSelection();}});this.disposables.add(new tab.MouseHandler(this.get_dom().enclosingDiv.get(0),$0));this.init();}
tab.PaneTableViewWeb.$3_C=function($p0,$p1){var $0=2;var $1=tab.$create_Point($p0.x,$p0.y);if($p1.w>$0*2){$1=tab.RectXYUtil.horizontalShiftCoordsTowardsCenter($1,$p1,$0);}else{$1=tab.$create_Point($p1.x+($p1.w/2),$1.y);}if($p1.h>$0*2){$1=tab.RectXYUtil.verticalShiftCoordsTowardsCenter($1,$p1,$0);}else{$1=tab.$create_Point($1.x,$p1.y+($p1.h/2));}return $1;}
tab.PaneTableViewWeb.prototype={$3_1:null,$3_2:false,$3_3:false,$3_4:0,$3_5:null,$3_6:null,$3_7:null,$3_8:null,$3_9:null,$3_A:null,$3_B:null,get_inputHandlers:function(){return this.$3_0;},get_domWeb:function(){return this.$3_1;},zoomInOnCenter:function(){var $0=this.resolvePane(tab.$create_Point(1,1));this.$3_24('viz').$1_1E($0);},zoomOutOnCenter:function(){var $0=this.resolvePane(tab.$create_Point(1,1));this.$3_24('viz').$1_1F($0);},setZoomMode:function(state){this.$3_24('viz').$1_24((state)?'zoom':'select');},unsuppressAllHovers:function(){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$3_0));while($enum1.moveNext()){var $0=$enum1.current;var $1=this.$3_0[$0];$1.unsuppressHover();}},getDomNodeForContentRegion:function(domNode){return domNode.get(0);},makeFloatingZoomToolbar:function(viewNode){var $0=new tab.FZTOpsWeb(this);return new tab.FloatingZoomToolbarWeb(viewNode.get(0),$0,this.shouldUseFullFloatingZoomToolbar());},shouldUseFullFloatingZoomToolbar:function(){return (this.ftv==='show'||(this.ftv==='auto'&&this.isMap));},makeConnections:function(){this.$3_1.scrollX.scroll(ss.Delegate.create(this,function($p1_0){
this.$3_11();}));this.$3_1.scrollY.scroll(ss.Delegate.create(this,function($p1_0){
this.$3_E();}));var $0=(!$.browser.mozilla)?'mousewheel':'MozMousePixelScroll';this.dom.domRoot.bind($0,ss.Delegate.create(this,function($p1_0){
this.$3_D($p1_0);}));this.dom.domRoot.mouseout(ss.Delegate.create(this,function($p1_0){
this.onMouseOut($p1_0);}));this.dom.view.mouseover(ss.Delegate.create(this,function($p1_0){
this.onViewMouseOver($p1_0);}));this.dom.view.mouseout(ss.Delegate.create(this,function($p1_0){
this.onViewMouseOut($p1_0);}));},makeRegions:function(){var $0=this.listNonVizRegions();var $1=this.makeHoverAPI();Object.clearKeys(this.regions);var $2=function(){
return false;};var $enum1=ss.IEnumerator.getEnumerator(Object.keys($0));while($enum1.moveNext()){var $4=$enum1.current;var $5=$0[$4];this.regions[$4]=new tab.TiledViewerRegionWeb($4,$5.get(0),this.get_session(),$1,this.$3_1.scrollX,this.$3_1.scrollY,$2,this.get_sheetid(),this.paneTableVM);}var $3=ss.Delegate.create(this,this.allowPanZoom);this.regions['viz']=new tab.TiledViewerRegionWeb('viz',this.dom.view.children().first().get(0),this.get_session(),$1,this.$3_1.scrollX,this.$3_1.scrollY,$3,this.get_sheetid(),this.paneTableVM);},makeTooltip:function(element,layoutSessionRef){return tab.TooltipBehavior.createTooltip();},cancelHover:function(){},makeInputHandlers:function(){var $0;Object.clearKeys(this.$3_0);var $1=this.listNonVizRegions();var $enum1=ss.IEnumerator.getEnumerator(Object.keys($1));while($enum1.moveNext()){var $2=$enum1.current;var $3=$1[$2];$0=this.makeMouseSpec(this.$3_24($2));this.$3_0[$2]=new tab.MouseHandler($3.get(0),$0);}$0=this.makeMouseSpec(this.$3_24('viz'));this.$3_0['viz']=new tab.MouseHandler(this.dom.view.children().first().get(0),$0);this.dom.view.children().first().addClass('tvmodeSelect');},makeHoverAPI:function(){if(ss.isNullOrUndefined(this.$3_B)){this.$3_B=new tab.HoverApi(this);this.disposables.add(this.$3_B);}return this.$3_B;},makeMouseSpec:function(region){var $0=tab.$create_EventHandleSpec();$0.hover=ss.Delegate.create(this,function($p1_0){
this.$3_13(region,$p1_0);});$0.hoverDelay=(tab.ApplicationModel.get_instance().get_isLocalRenderMode())?tab.Hover.fastHoverTime:tab.Hover.hoverTime;$0.firstTouch=ss.Delegate.create(this,function($p1_0){
this.$3_15(region,$p1_0);});$0.tap=ss.Delegate.create(this,function($p1_0){
this.$3_16(region,$p1_0);});$0.doubleTap=ss.Delegate.create(this,function($p1_0){
this.$3_17(region,$p1_0);});$0.dragStart=ss.Delegate.create(this,function($p1_0){
this.$3_18(region,$p1_0);});$0.lastTouch=ss.Delegate.create(this,function($p1_0){
this.$3_20(region,$p1_0);});var $1=tab.$create_EventHandleSpec();tab.TableauEventHandler.setHandler($1,'dragStart',function(){
});this.$3_5=tab.EventUtil.createEventHandler(document.body,$1);if(region.get_regionPart()==='viz'&&tsConfig.allow_filter){$0.press=ss.Delegate.create(this,function($p1_0){
this.$3_1C(region,$p1_0);});$0.potentialTap=ss.Delegate.create(this,function($p1_0){
this.$3_1E(region,$p1_0);});$0.cancelPotentialTap=ss.Delegate.create(this,function($p1_0){
this.$3_1F(region,$p1_0);});$0.pressDragStart=ss.Delegate.create(this,function($p1_0){
this.$3_1D(region,$p1_0);});}return $0;},makeRegionContentProviders:function(){var $0=ss.Delegate.create(this,function($p1_0,$p1_1){
this.regions['viz'].reset();});this.makeRegionContentProvidersHelper(this.dom.view.children().first(),$0);this.$3_A=this.makeTiledWindow(this.$3_1.scrollY,null,null,null,null);this.$3_9=this.makeTiledWindow(this.$3_1.scrollX,null,null,null,null);},makeTiledWindow:function(domNode,sessionRef,controllerRef,getRID,optionalCallback){return this.makeTiledWindowHelper(domNode,sessionRef,controllerRef,getRID,optionalCallback,true);},refreshScrollingAndDrilling:function(){var $0=this.$3_6;this.$3_6=null;if(typeof($0)==='function'){$0();}if(ss.isValue(this.zoomToolbar)&&this.shouldUseFullFloatingZoomToolbar()){this.zoomToolbar.exitZoomMode();}this.$3_7.onUpdate();this.$3_8.onUpdate();},destroyRegions:function(){tab.PaneTableViewWeb.callBaseMethod(this, 'destroyRegions');this.tooltip.dispose();this.$3_A.destroy();this.$3_9.destroy();},destroyInputHandlers:function(){var $enum1=ss.IEnumerator.getEnumerator(Object.keys(this.$3_0));while($enum1.moveNext()){var $0=$enum1.current;this.$3_0[$0].dispose();this.$3_0[$0]=null;}Object.clearKeys(this.$3_0);this.$3_22();},refreshImages:function(cacheInfo){tab.PaneTableViewWeb.callBaseMethod(this, 'refreshImages',[cacheInfo]);this.$3_A.refreshImages(cacheInfo);this.$3_9.refreshImages(cacheInfo);},onViewMouseOver:function(e){if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.setActiveState(true);}},onMouseOut:function(e){var $0=tab.DomUtil.getDojoCoordsJQ(this.dom.domRoot);if($0.x>e.pageX||($0.x+$0.w)<=e.pageX||$0.y>e.pageY||($0.y+$0.h)<=e.pageY){this.$3_8.hideSortIndicator();}tab.UberTipClientCommands.getUberTip('viz',this.get_sheetid(),tab.$create_RectXY(-1,-1,0,0),new tab.LocalUbertipInfo(null,null,null,false),null,null);},onViewMouseOut:function(e){var $0=tab.DomUtil.getDojoCoordsJQ(this.dom.view);if($0.x>e.pageX||($0.x+$0.w)<=e.pageX||$0.y>e.pageY||($0.y+$0.h)<=e.pageY){if(ss.isValue(this.zoomToolbar)){this.zoomToolbar.setActiveState(false);}}},setupSortIndicators:function(){this.$3_8=new tab.Sorting(this,this.get_dom().domRoot.get(0));this.disposables.add(this.$3_8);},setupDrilling:function(){this.$3_7=new tab.Drilling(this,this.get_dom().domRoot.get(0));this.disposables.add(this.$3_7);},setRegionGeometry:function(rect,domNode,boxFunc){if(ss.isValue(rect)){var $0=boxFunc();tab.DomUtil.setMarginBoxJQ(domNode,$0);if(ss.isValue(domNode)&&domNode.children().first().hasClass('tvScrollContainer')){tab.DomUtil.setMarginBoxJQ(domNode.children().first(),tab.$create_Rect(0,0,$0.w,$0.h));}domNode.show();return tab.DomUtil.getMarginBoxJQ(domNode);}else{domNode.hide();return null;}},setGeometryForWebScrollbars:function(viewHeight,viewWidth,scrollWidth,scrollHeight,scrollYTop,overallWidth,scrollXTop,scrollXLeft,scrollableHeight,scrollableWidth){var $0=null,$1=null;if(ss.isValue(scrollWidth)&&scrollWidth>0){var $2=Math.max(tab.Metrics.get_minScrollHeight(),viewHeight);tab.DomUtil.setMarginBoxJQ(this.$3_1.scrollY,tab.$create_Rect(overallWidth,scrollYTop,scrollWidth,$2));this.$3_1.scrollY.css('display','');}else{this.$3_1.scrollY.css('display','none');}if(ss.isValue(scrollHeight)&&scrollHeight>0){var $3=Math.max(tab.Metrics.get_minScrollWidth(),viewWidth);tab.DomUtil.setMarginBoxJQ(this.$3_1.scrollX,tab.$create_Rect(scrollXLeft,scrollXTop,$3,scrollHeight));this.$3_1.scrollX.css('display','');}else{this.$3_1.scrollX.css('display','none');}if(this.$3_1.scrollY.css('display')!=='none'){$0=tab.$create_RegionRect(0,0,1,scrollableHeight,null);}this.$3_A.reset($0,this.geometry.ts);if(this.$3_1.scrollX.css('display')!=='none'){$1=tab.$create_RegionRect(0,0,scrollableWidth,1,null);}this.$3_9.reset($1,this.geometry.ts);},maybeShowOverlayImages:function(ubertipModel,overlayImageSource){if(overlayImageSource==='remote'){var $0=null;if(ss.isValue(ubertipModel)&&tab.BrowserSupport.get_dataUri()&&ss.isValue(ubertipModel.overlayImage)){$0=this.createOverlayImageFromDataUri(ubertipModel.overlayImage);}else if(ss.isValue(ubertipModel.overlayImageKey)){$0=this.createOverlayImageFromFile(ubertipModel.overlayImageKey);}this.showOverlayImages($0,ubertipModel.overlayAnchors);}},$3_D:function($p0){var $0,$1;if(ss.isValue($p0.originalEvent)){$p0=$p0.originalEvent;}if(ss.isValue($p0.detail)&&!!$p0.detail){$1=($p0.axis===$p0.HORIZONTAL_AXIS)?0:$p0.detail;$0=($p0.axis===$p0.HORIZONTAL_AXIS)?$p0.detail:0;}else if((ss.isValue($p0.wheelDeltaY)&&!!$p0.wheelDeltaY)||(ss.isValue($p0.wheelDeltaX)&&!!$p0.wheelDeltaX)){$1=-$p0.wheelDeltaY;$0=-$p0.wheelDeltaX;}else{$1=-$p0.wheelDelta;$0=0;}var $2=this.$3_1.scrollY.scrollTop();var $3=this.$3_1.scrollX.scrollLeft();this.$3_1.scrollY.scrollTop($2+$1);this.$3_1.scrollX.scrollLeft($3+$0);var $4=this.$3_1.scrollY.scrollTop();var $5=this.$3_1.scrollX.scrollLeft();if($2!==$4){this.$3_F($4);$p0.preventDefault();}if($3!==$5){this.$3_10($5);$p0.preventDefault();}this.hideTooltip();},$3_E:function(){this.scrollPosY=this.$3_1.scrollY.scrollTop();this.$3_F(this.$3_1.scrollY.scrollTop());},$3_F:function($p0){var $enum1=ss.IEnumerator.getEnumerator(tab.PaneTableView.scrollableYRegions);while($enum1.moveNext()){var $0=$enum1.current;this.$3_24($0).setYPos($p0);}},$3_10:function($p0){var $enum1=ss.IEnumerator.getEnumerator(tab.PaneTableView.scrollableXRegions);while($enum1.moveNext()){var $0=$enum1.current;this.$3_24($0).setXPos($p0);}},$3_11:function(){this.scrollPosX=this.$3_1.scrollX.scrollLeft();this.$3_10(this.$3_1.scrollX.scrollLeft());},$3_12:function($p0){var $0=ss.isValue(this.tooltip)&&this.tooltip.get_isShown()&&ss.isValue(this.tooltip.tupleId)&&ss.isValue($p0)&&$p0.length===1&&$p0[0]===this.tooltip.interactedTupleId;return $0;},$3_13:function($p0,$p1){if(tab.DragDropManager.get_isDragging()){return;}if(this.tooltip.get_isShown()){return;}var $0=$p0.toLocalCoordsEvent($p1);var $1=null;var $2=false;if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if($p0.get_regionPart()==='viz'){var $3=tab.$create_RectXY($0.x,$0.y,1,1);$2=$p0.hitTestVisualParts($3);$1=$p0.hitTestMarks($3,true);if(ss.isValue($1)&&$1.length===1){var $4=this.paneTableVM.get_scene().getMarkBoundingBox($1[0]);$0=tab.PaneTableViewWeb.$3_C($0,$4);var $5=tab.PaneTable2DRenderer.getOverlayImageInfo($1[0],this.paneTableVM.get_scene());if(ss.isValue($5)){var $6=this.createOverlayImageFromDataUri($5.image);var $enum1=ss.IEnumerator.getEnumerator($5.coords);while($enum1.moveNext()){var $7=$enum1.current;$7.x-=$p0.get_contentProvider().get_scrollPos().x;$7.y-=$p0.get_contentProvider().get_scrollPos().y;}this.showOverlayImages($6,$5.coords);}}}else if(ss.isValue($p0.get_contentProvider())){var $8=$p0.get_contentProvider();var $9=$8.get_viewModel();var $A=$p0.hitTestNodes($0,$9);if(ss.isValue($A)){var $B={};$B.columnIndices=$A.columnIndices;$B.aliasIndices=$A.aliasIndices;$1=tab.BrushingComputer.getTuplesAssociatedWithSelectedNodes(this.paneTableVM.get_visualModel(),[$B]);$2=true;}}}if(!this.$3_12($1)){this.tooltipRID+=1;var $C=this.tooltipRID;var $D=ss.Delegate.create(this,function($p1_0,$p1_1){
this.showTooltipCallback($C.toString(),$0,$p0,$p1_0,$p1_1);});var $E=ss.Delegate.create(this,function(){
this.tooltipFailureCallback();});var $F=null;var $10=null;if(ss.isValue($1)&&$1.length>0){var $12=this.paneTableVM.get_selectionsModel();var $13=$12.get_tupleSelection().get_ids();if($13.contains($1[0])){$F=$13;}else{$F=$1;}if(ss.isValue(this.paneTableVM)&&ss.isValue(this.paneTableVM.get_scene())){$10=tab.SceneUtils.getPaneDescriptorKeyFromTupleId($1[0],this.paneTableVM.get_scene().get_scene());}}var $11=new tab.LocalUbertipInfo($1,$F,$10,$2);tab.UberTipClientCommands.getUberTip($p0.get_regionPart(),this.get_sheetid(),tab.$create_RectXY($0.x,$0.y,0,0),$11,$D,$E);}},$3_14:function($p0,$p1){window.setTimeout(ss.Delegate.create(this,this.hideTooltip),50);this.hideTooltip();},$3_15:function($p0,$p1){},$3_16:function($p0,$p1){var $0=$p0.toLocalCoordsEvent($p1);var $1=this.resolvePane($0);var $2;this.hideTooltip();this.$3_2=false;if($p0.$1_2A($p1)){$p0.$1_24('zoom');}this.tooltipRID+=1;var $3=this.tooltipRID;$p0.$1_2C($p1,$1,ss.Delegate.create(this,function($p1_0,$p1_1){
$2=ss.Delegate.create(this,function($p2_0){
this.showTooltipCallback($3.toString(),$0,$p0,$p2_0,$p1_1);});if(ss.isValue($p1_0)){$2($p1_0);}else{}}));},$3_17:function($p0,$p1){this.$3_2=false;if(!tsConfig.allow_filter){return;}if($p0.get_regionPart()==='viz'&&this.allowPanZoom()){this.get_controller().incrementCacheVersion();var $0=tab.DeferLayoutImpl.get_instance();$0.setDeferLayoutUpdates(true);var $1=this.resolvePane($p0.toLocalCoordsEvent($p1));var $2=($p0.$1_2B($p1))?0.5:2;$p0.$1_1B($1,$p0.toLocalCoordsEvent($p1),$2,true,$0);}else{return;}},$3_18:function($p0,$p1){var $0=this.resolvePane($p0.toLocalCoordsEvent($p1));this.$3_23();this.$3_19();if($p0.$1_29($p1)){this.$3_3=true;$p0.$1_24('pan');}else if($p0.$1_2A($p1)){$p0.$1_24('zoom');}$p0.$1_15($p1,$0);},$3_19:function(){if(!this.isMap||this.$3_3){return;}if(!this.$3_4){var $0=tab.DomUtil.getMarginBoxJQ(this.dom.view);var $1=tab.$create_Point(Math.floor($0.w/2),Math.floor($0.h));var $2=this.regions['viz'].getLocalOffset();$1.y+=$2.y;$1.x+=$2.x;var $3=new tab.Tooltip();$3.show($('<div>'+tab.Strings.TooltipPanZoomMessage+'</div>'),$1,false);window.setTimeout(function(){
$3.close();},5000);}this.$3_4+=1;this.$3_4%=5;},$3_1A:function($p0){this.$3_24('viz').$1_18($p0);},$3_1B:function($p0){this.hideTooltip();this.tooltipRID+=1;var $0=this.tooltipRID;var $1=ss.Delegate.create(this,function($p1_0,$p1_1,$p1_2){
this.showTooltipCallback($0.toString(),$p1_1,this.$3_24('viz'),$p1_0,$p1_2);});this.$3_24('viz').$1_19($p0,$1);this.$3_22();},$3_1C:function($p0,$p1){$p0.$1_24('pan');this.hideTooltip();},$3_1D:function($p0,$p1){var $0=this.resolvePane($p0.toLocalCoordsEvent($p1));this.$3_23();$p0.$1_15($p1,$0);this.$3_3=true;},$3_1E:function($p0,$p1){this.$3_2=true;},$3_1F:function($p0,$p1){this.$3_2=false;this.$3_24('viz').$1_26();},$3_20:function($p0,$p1){if(!this.$3_2){this.$3_24('viz').$1_26();}},$3_21:function($p0,$p1,$p2){if(!ss.isUndefined(this.$3_0[$p1])){this.$3_24($p1).$1_2C($p2,null,null);}else{}},$3_22:function(){var $0=tab.$create_EventHandleSpec();tab.TableauEventHandler.setHandler($0,'dragMove',null);tab.TableauEventHandler.setHandler($0,'dragEnd',null);this.$3_5.update($0);},$3_23:function(){var $0=tab.$create_EventHandleSpec();tab.TableauEventHandler.setHandler($0,'dragMove',ss.Delegate.create(this,this.$3_1A));tab.TableauEventHandler.setHandler($0,'dragEnd',ss.Delegate.create(this,this.$3_1B));this.$3_5.update($0);},$3_24:function($p0){return Type.safeCast(this.regions[$p0],tab.TiledViewerRegionWeb);}}
tab.FZTOpsWeb=function(tv){this.tv=tv;}
tab.FZTOpsWeb.prototype={tv:null,zoomHome:function(){this.tv.zoomHome();},zoomIn:function(){this.tv.zoomInOnCenter();},zoomOut:function(){this.tv.zoomOutOnCenter();},setZoomMode:function(state){this.tv.setZoomMode(state);}}
tab.HoverApi=function(tv){this.tv=tv;}
tab.HoverApi.prototype={tv:null,dispose:function(){this.tv=null;},unsuppressHover:function(region){var $0=this.tv.get_inputHandlers()[region.get_regionPart()];$0.unsuppressHover();},suppressHover:function(region){var $0=this.tv.get_inputHandlers()[region.get_regionPart()];$0.suppressHover();}}
tab.PaneTableTemplateWeb=function(){tab.PaneTableTemplateWeb.initializeBase(this,[$("\n<div class='tab-tiledViewer placeholder'>\n   <div class='tab-clip'>\n     <div class='tab-tvTLSpacer tvimagesNS'><img></img></div>\n     <div class='tab-tvTRSpacer tvimagesNS'><img></img></div>\n     <div class='tab-tvBLSpacer tvimagesNS'><img></img></div>\n     <div class='tab-tvBRSpacer tvimagesNS'><img></img></div>\n     <div class='tab-tvYLabel tvimagesNS'><div class='tvimagesContainer'></div></div>\n     <div class='tab-tvLeftAxis tvimagesNS'><div class='tvimagesContainer'></div></div>\n     <div class='tab-tvRightAxis tvimagesNS'><div class='tvimagesContainer'></div></div>\n     <div class='tab-tvXLabel tvimagesNS'><div class='tvimagesContainer'></div></div>\n     <div class='tab-tvBottomAxis tvimagesNS'><div class='tvimagesContainer'></div></div>\n     <div class='tab-tvTopAxis tvimagesNS'><div class='tvimagesContainer'></div></div>\n     <div class='tab-tvView tvimagesNS'><div class='tvScrollContainer'><div class='tvimagesContainer'></div></div></div>\n     <div class='tab-tvTitle tvimagesNS'></div>\n     <div class='tab-tvCaption tvimagesNS'></div>\n     <div class='tab-tvScrollX tvimages'><div class='tvimagesContainer'></div></div>\n     <div class='tab-tvScrollY tvimages'><div class='tvimagesContainer'></div></div>\n   </div>\n</div>")]);var $0=ss.Delegate.create(this,this.getElementBySelector);this.scrollX=$0('.tab-tvScrollX');this.scrollY=$0('.tab-tvScrollY');}
tab.PaneTableTemplateWeb.prototype={scrollX:null,scrollY:null}
tab.UberPopupViewWeb=function(viewModel){tab.UberPopupViewWeb.initializeBase(this,[viewModel,new tab.UberPopupTemplate()]);}
tab.UberPopupViewWeb.prototype={get_uberPopupShadowHeight:function(){return 2;}}
tab.AccordionViewWeb=function(viewModel){tab.AccordionViewWeb.initializeBase(this,[viewModel,new tab.AccordionTemplate()]);}
tab.ComboBoxViewWeb=function(viewModel){tab.ComboBoxViewWeb.initializeBase(this,[viewModel,new tab.ComboBoxTemplate()]);}
tab.CustomViewsPanelWeb=function(viewModel,toolbarButton){tab.CustomViewsPanelWeb.initializeBase(this,[viewModel,toolbarButton]);this.resizeHandle.addClass((this.viewModel.get_isTop())?'tab-cv-resize-handle-se':'tab-cv-resize-handle-ne');this.resizeHandle.find('.tab-cv-resize-handle-icon').addClass((this.viewModel.get_isTop())?'tab-icon-cv-resize-se':'tab-icon-cv-resize-ne');}
tab.CustomViewsPanelWeb.prototype={get_defaultPanelWidth:function(){return 300;},get_defaultPanelHeight:function(){return 380;},get_panelBorder:function(){return 1;},get_clickEventName:function(){return 'click';},show:function(){tab.CustomViewsPanelWeb.callBaseMethod(this, 'show');this.rememberNameInput.focus();},updateRememberControls:function(){tab.CustomViewsPanelWeb.callBaseMethod(this, 'updateRememberControls');this.rememberNameInput.select();},bindControls:function(){tab.CustomViewsPanelWeb.callBaseMethod(this, 'bindControls');this.resizeHandle.unbind('mousedown');this.resizeHandle.mousedown(ss.Delegate.create(this,this.startResize));},startDrag:function(){$(document).mousemove(ss.Delegate.create(this,this.continueResize));$(document).mouseup(ss.Delegate.create(this,this.endResize));},endDrag:function(){$(document).unbind('mousemove');$(document).unbind('mouseup');},appendSelectListItemNameAndAuthorHtml:function(sb,customViewName,ownerName,isDefault){sb.append('<span unselectable="on" class="tab-cv-select-list-item-name">').append(customViewName);if(isDefault){sb.append(' (').append(tab.Strings.CustomViewsDefault).append(')');}if(ss.isValue(ownerName)){sb.append(' <span unselectable="on" class="tab-cv-select-list-item-name-owner">(').append(ownerName).append(')</span>');}sb.append('</span>');}}
tab.DojoWidgetsWeb=function(){}
tab.Drilling=function(tiledViewer,domNode){tab.Drilling.initializeBase(this,[$(document.createElement('div'))]);this.$1_8=tiledViewer;this.$1_3=this.$1_8.get_inputHandlers();this.get_element().addClass('tab-tiledViewerDrill');this.$1_4=new tab.Button(false);this.$1_4.get_element().addClass('tab-tvLevelDrillDown');this.$1_4.get_element().addClass('tab-levelDrillingIcon');this.$1_4.get_element().addClass('tvDrillDown');this.$1_4.get_element().attr('iconClass','tvDrillDown');this.$1_4.get_element().css('border','0');this.get_element().append(this.$1_4.get_element());this.$1_6=this.$1_4.get_element();this.$1_5=new tab.Button(false);this.$1_5.get_element().addClass('tab-tvLevelDrillUp');this.$1_5.get_element().addClass('tab-levelDrillingIcon');this.$1_5.get_element().addClass('tvDrillUp');this.$1_5.get_element().attr('iconClass','tvDrillUp');this.$1_5.get_element().css('border','0');this.get_element().append(this.$1_5.get_element());this.$1_7=this.$1_5.get_element();domNode.appendChild(this.get_element().get(0));this.$1_10();this.$1_11(domNode);this.$1_F();}
tab.Drilling.prototype={$1_3:null,$1_4:null,$1_5:null,$1_6:null,$1_7:null,$1_8:null,$1_9:false,$1_A:null,$1_B:null,$1_C:null,$1_D:null,$1_E:null,dispose:function(){this.$1_8=null;this.$1_4.dispose();this.$1_5.dispose();tab.Drilling.callBaseMethod(this, 'dispose');},onUpdate:function(){if(this.$1_E!=null){this.$1_E();this.$1_E=null;}this.$1_9=false;this.$1_C=this.$1_8.get_geometry();this.$1_D=this.$1_8.get_visibleGeometry();},isActiveInRect:function(rect){if($(this.$1_6.get(0)).css('display')!=='none'||$(this.$1_7.get(0)).css('display')!=='none'){if(ss.isValue(this.$1_B)&&tab.RectXYUtil.intersectsWith(this.$1_B,rect)){return true;}}return false;},$1_F:function(){this.$1_3['bottomaxis'].unsuppressHover();this.$1_3['xheader'].unsuppressHover();this.$1_3['yheader'].unsuppressHover();this.hideNode(this.$1_6.get(0));this.hideNode(this.$1_7.get(0));this.$1_A=new tab.vqluiweb$2();},$1_10:function(){this.$1_6.mousedown(ss.Delegate.create(this,function($p1_0){
this.$1_13($p1_0);}));this.$1_7.mousedown(ss.Delegate.create(this,function($p1_0){
this.$1_14($p1_0);}));this.$1_6.mouseout(ss.Delegate.create(this,function($p1_0){
this.$1_19();}));this.$1_6.mouseover(ss.Delegate.create(this,function($p1_0){
this.$1_1A();}));this.$1_7.mouseout(ss.Delegate.create(this,function($p1_0){
this.$1_17();}));this.$1_7.mouseover(ss.Delegate.create(this,function($p1_0){
this.$1_18();}));},$1_11:function($p0){if(tsConfig.allow_filter){$($p0).mousemove(ss.Delegate.create(this,function($p1_0){
this.$1_12($p1_0);}));}},$1_12:function($p0){var $0={};var $1=false;var $2=false;var $3=false;var $4=false;var $5=false;var $6=false;var $7=false;var $8=true;if(this.$1_9){return;}if($p0.button>0){return;}if(ss.isNullOrUndefined(this.$1_C)||ss.isNullOrUndefined(this.$1_C.di)||this.$1_C.di===$0||!tsConfig.allow_filter){return;}var $9=tab.$create_Point($p0.pageX-this.$1_8.get_posTVx(),$p0.pageY-this.$1_8.get_posTVy());if(ss.isValue(this.$1_D.xheaderArea)){$1=tab.RectUtil.inRect(this.$1_D.xheaderArea,$9);}var $A=this.$1_8.get_tlspacerAreaX();var $B=this.$1_8.get_tlspacerAreaY();if($1&&ss.isValue($A)&&ss.isValue($B)&&ss.isValue(this.$1_D.uleftArea)){$B.w=$A.l;$8=false;}if(ss.isValue(this.$1_D.bottomaxisArea)&&!this.$1_C.pi.hasXQAxis&&!$1){$2=tab.RectUtil.inRect(this.$1_D.bottomaxisArea,$9);}if(ss.isValue(this.$1_D.yheaderArea)&&!$1&&!$2){$3=tab.RectUtil.inRect(this.$1_D.yheaderArea,$9);}if(ss.isValue($B)&&!$1&&!$2&&ss.isValue(this.$1_D.yheaderArea)){$5=tab.RectUtil.inRect($B,$9);}if(ss.isValue($A)&&!$5&&!$3&&!$2&&ss.isValue(this.$1_D.xheaderArea)){$6=tab.RectUtil.inRect($A,$9);}var $C=this.$1_8.get_blspacerArea();if(ss.isValue($C)&&!$5&&!$6){$7=tab.RectUtil.inRect($C,$9);}if(!$1&&!$3&&!$2&&!$4&&!$5&&!$6&&!$7){this.$1_F();}else if($6){$8=false;if(this.$1_A.$0==='yheader'){this.$1_A.$1=null;}this.$1_1C($p0,$9,$4,$6);}else if($5){if(this.$1_A.$0==='xheader'){this.$1_A.$1=null;}this.$1_1D($p0,$9,$4,$5);}else if($1||($4&&this.$1_A.$0==='xheader')){$8=false;this.$1_1C($p0,$9,$4,$1);}else if($3||($4&&this.$1_A.$0==='yheader')){this.$1_1D($p0,$9,$4,$3);}else if($2||($4&&this.$1_A.$0==='bottomaxis')){this.$1_1E($p0,$4);}else if($7){this.$1_1E($p0,$4);}if($8&&ss.isValue($B)&&ss.isValue(this.$1_D.uleftArea)){$B.w=this.$1_D.uleftArea.w;}},$1_13:function($p0){this.$1_15($p0,this.$1_A.$2,'down');},$1_14:function($p0){this.$1_15($p0,this.$1_A.$2,'up');},$1_15:function($p0,$p1,$p2){this.$1_9=true;var $0=this.$1_8.get_session();$0.levelDrill($p1,$p2,this.$1_A.$0);this.$1_F();$p0.stopPropagation();},$1_16:function($p0,$p1){$p0.removeClass($p0.attr('iconClass'));$p0.addClass($p1);$p0.attr('iconClass',$p1);},$1_17:function(){this.$1_16(this.$1_7,'tvDrillUp');},$1_18:function(){this.$1_16(this.$1_7,'tvDrillUpHover');},$1_19:function(){this.$1_16(this.$1_6,'tvDrillDown');},$1_1A:function(){this.$1_16(this.$1_6,'tvDrillDownHover');},$1_1B:function($p0,$p1){var $0=this.getWidgetPos('label',$p0,$p1);var $1=tab.$create_Rect($0.x,$0.y,15,15);return $1;},$1_1C:function($p0,$p1,$p2,$p3){var $0=this.$1_C.di.xs+this.$1_8.get_titleHeight();if(ss.isNullOrUndefined(this.$1_A.$1)||!$p2){var $1=this.$1_22($p1.y,$0,this.$1_C.di.xy);if($1.$2>=0&&$1.$2<this.$1_C.di.xy.length&&$p3){this.$1_1F('x',$1,this.$1_C.di.xy);}else{this.$1_F();}}},$1_1D:function($p0,$p1,$p2,$p3){if(ss.isNullOrUndefined(this.$1_A.$1)||!$p2){var $0=this.$1_22($p1.x,this.$1_C.di.ys,this.$1_C.di.yx);var $1=$0.$2;if($1>=0&&$1<this.$1_C.di.yx.length&&$p3){this.$1_1F('y',$0,this.$1_C.di.yx);}}},$1_1E:function($p0,$p1){var $0=this.$1_C.di.xy.length-1;if(!$p1){var $1=Math.min(this.$1_D.bottomaxisArea.l,20);var $2=tab.$create_Rect(this.$1_D.bottomaxisArea.l-$1,this.$1_D.bottomaxisArea.t,this.$1_D.bottomaxisArea.w+$1,this.$1_D.bottomaxisArea.h);this.$1_21($2,this.$1_C.di.xy[$0][1],'x');this.$1_A.$2=$0;this.$1_A.$0='bottomaxis';}},$1_1F:function($p0,$p1,$p2){var $0;var $1=0;if($p0==='x'){if(ss.isValue(this.$1_D.uleftArea)){$1=Math.min(this.$1_D.xheaderArea.l,20);}$0=tab.$create_Rect(this.$1_D.xheaderArea.l-$1,$p1.$0,this.$1_D.xheaderArea.w+$1,$p1.$1-$p1.$0);}else{if(ss.isValue(this.$1_D.uleftArea)){$1=Math.min(this.$1_D.yheaderArea.t,20);}$0=tab.$create_Rect($p1.$0,this.$1_D.yheaderArea.t-$1,$p1.$1-$p1.$0,this.$1_D.yheaderArea.h+$1);}this.$1_21($0,$p2[$p1.$2][1],$p0);this.$1_A.$2=$p1.$2;this.$1_A.$0=$p0+'header';},$1_20:function($p0,$p1,$p2){var $0=this.getWidgetPos('level',$p1,$p2);var $1=this.$1_6.outerHeight();var $2=this.$1_6.outerWidth();this.$1_B=tab.$create_RectXY($0.x,$0.y,$2,$1);if(this.isOtherActiveInRect(this.$1_B)){return;}this.showNodeAt($p0,$0.y,$0.x);},$1_21:function($p0,$p1,$p2){this.$1_A.$1=$p0;switch($p1){case 0:this.hideNode(this.$1_6.get(0));this.hideNode(this.$1_7.get(0));break;case 1:this.$1_20(this.$1_6.get(0),$p0,$p2);this.hideNode(this.$1_7.get(0));break;case 2:this.$1_20(this.$1_7.get(0),$p0,$p2);this.hideNode(this.$1_6.get(0));break;case 3:break;}},$1_22:function($p0,$p1,$p2){var $0=-1;var $1=$p1-1;var $2=-1;if(ss.isNullOrUndefined($p2)){return new tab._PxLevel(-1,-1,-1);}while($1<$p0&&$2<$p2.length-1){$2+=1;$0=$1;$1+=$p2[$2][0];}if($1<$p0){return new tab._PxLevel(-1,-1,-1);}return new tab._PxLevel($0,$1,$2);}}
tab.vqluiweb$2=function(){}
tab.vqluiweb$2.prototype={$0:null,$1:null,$2:0}
tab.vqluiweb$1=function(region,item,itemIdx,direction,status,isActive){this.$0=region;this.$1=item;this.$2=itemIdx;this.$3=direction;this.$4=status;this.$5=isActive;}
tab.vqluiweb$1.prototype={$0:null,$1:null,$2:0,$3:null,$4:null,$5:false}
tab._PxLevel=function(lowerPx,upperPx,levelNum){this.$0=lowerPx;this.$1=upperPx;this.$2=levelNum;}
tab._PxLevel.prototype={$0:0,$1:0,$2:0}
tab.FloatingZoomToolbarWeb=function(containerDiv,zoomFuncs,useAllButtons){tab.FloatingZoomToolbarWeb.initializeBase(this,[containerDiv,zoomFuncs,useAllButtons]);this.setupWebEventHandling();}
tab.FloatingZoomToolbarWeb.prototype={setupWebEventHandling:function(){var $0,$1;var $2=this.buttonNodes;for($0=0,$1=$2.length;$0<$1;$0++){$2[$0].mouseover(ss.Delegate.create(this,this.onMouseOver));$2[$0].mouseout(ss.Delegate.create(this,this.onMouseOut));}if(this.fullToolbar){this.zoomInNode.click(ss.Delegate.create(this,function($p1_0){
this.api.zoomIn();}));this.zoomOutNode.click(ss.Delegate.create(this,function($p1_0){
this.api.zoomOut();}));this.zoomModeNode.click(ss.Delegate.create(this,function($p1_0){
this.toggleZoomMode();}));}this.zoomHomeNode.click(ss.Delegate.create(this,function($p1_0){
this.clickZoomHome();}));}}
tab.LegendPanelWeb=function(props){this.templateString="<div class='LegendPanel'>"+"<div class='LegendBox' dojoAttachPoint='domBox'>"+"<div class='LegendTitle' dojoAttachPoint='domTitleBar'>"+"<img dojoAttachPoint='domTitleImage' dojoAttachEvent='onload:setTitleSize'/></div>"+"<div class='LegendContent' dojoAttachPoint='domContent'>"+"<div class='LegendContentImageWrapper' dojoAttachPoint='domContentImageWrapper'>"+"<img dojoAttachPoint='domImageBody' dojoAttachEvent='onload:setBodySize'/></div></div>"+"<div class='tabCatLegendScroll' dojoAttachPoint='domHorizScrollButtonHolder'></div>"+'</div>'+"<div dojoType='dijit.form.Button' class='LegendHighlighter' showlabel='false'"+"dojoAttachPoint='domHighlighter' dojoAttachEvent='onClick:toggleHighlight'"+"title='Highlight Selected Items' iconClass='lpIconHighlighter'></div>"+'</div>';tab.LegendPanelWeb.initializeBase(this,[props]);}
tab.LegendPanelWeb.prototype={makeViewerInputHandler:function(viewSession,element){var $0=tab.$create_EventHandleSpec();$0.tap=ss.Delegate.create(this,this.onTap);$0.hover=ss.Delegate.create(this,this.onHover);return new tab.MouseHandler(element,$0);},makeTooltip:function(element,layoutSessionRef){return tab.TooltipBehavior.createTooltip();},doConnections:function(){var $0=$(this.domNode);this.disposables.add(tab.EventUtil.bindWithDispose($0,'mouseenter',ss.Delegate.create(this,this.$2_0)));this.disposables.add(tab.EventUtil.bindWithDispose($0,'mouseleave',ss.Delegate.create(this,this.$2_1)));},$2_0:function($p0){if(!tsConfig.allow_highlight){return;}if(this.categorical==='true'){if(this.highlight_enabled){dojo.style(this.domHighlighter.domNode,'visibility','');}dojo.addClass(this.domNode,'tvmodeSelect');}},$2_1:function($p0){var $0=dojo.coords(this.domNode,true);if($0.x>$p0.pageX||($0.x+$0.w)<=$p0.pageX||$0.y>$p0.pageY||($0.y+$0.h)<=$p0.pageY){this.hideControls();}},onTap:function(pseudoEvent){if(pseudoEvent.originalEvent.button>1){return;}this.disallowHover();var $0=this.getDocumentPoint(pseudoEvent);var $1=this.documentPointToContentPoint($0);var $2=tab.$create_RectXY($1.x,$1.y,0,0);var $3=tableau.util.getSelectAction(pseudoEvent);if(this.region!=='map'){tab.SelectionClientCommands.selectRegion(this.region,$2,$3,this.sheetid,this.getFieldNameVec());}this.tooltipRID+=1;var $4=this.tooltipRID;window.setTimeout(ss.Delegate.create(this,function(){
var $1_0=ss.Delegate.create(this,function(){
if(this.tooltipRID===$4){this.showTooltip($0,arguments[0]);}});var $1_1=tab.$create_RectXY($2.x,$2.y,0,0);var $1_2=new tab.LocalUbertipInfo(null,null,null,true);tab.UberTipClientCommands.getUberTip(this.region,this.sheetid,$1_1,$1_2,$1_0,null);}),15);},allowHover:function(){(this.eventHandler).unsuppressHover();},disallowHover:function(){(this.eventHandler).suppressHover();}}
tab.MenuViewWeb=function(viewModel){tab.MenuViewWeb.initializeBase(this,[viewModel,new tab.MenuViewWebTemplate()]);this.updateMenu();}
tab.MenuViewWeb.prototype={showSubmenu:function(parent,realtiveObj,menuTemplate){$('body').append(menuTemplate.domRoot);tab.BrowserViewport.getViewport(ss.Delegate.create(this,function($p1_0){
this.$3_0($p1_0,realtiveObj,menuTemplate);menuTemplate.domRoot.show();}));},buildMenu:function(root,m){tab.MenuViewWeb.callBaseMethod(this, 'buildMenu',[root,m]);root.domRoot.delegate('.tabMenuItem','mouseenter'+this.get_eventNamespace(),ss.Delegate.create(this,this.$3_3));root.domRoot.delegate('.tabMenuItem','mouseleave'+this.get_eventNamespace(),ss.Delegate.create(this,this.$3_2));},$3_0:function($p0,$p1,$p2){var $0=this.getContentMaxWith($p2);var $1=$p2.domRoot.outerWidth(false)-$p2.domRoot.width();var $2=$0+$1;var $3=$p2.domRoot.outerHeight(false);var $4=$p1.outerHeight(true);var $5=$p1.outerWidth(true);var $6=2;var $7=tab.$create_Point($5-$6,0);$7.x+=$p1.offset().left;$7.y+=$p1.offset().top;var $8=$p0.getVisibleRoom($7);var $9=-1;if($8.roomBelow>=$3){}else if($8.roomAbove>($3-$4)){$7.y-=($3-$4);}else{var $B=5;if($8.roomBelow>=$8.roomAbove){$9=$8.roomBelow-$B;}else{$7.y-=$4;$9=$8.roomAbove-$B+$4;}}if($8.roomRight<$2){$7.x-=($2+$5-$6);}var $A={};$A['top']=$7.y+'px';$A['left']=$7.x+'px';if($9!==-1){$A['max-height']=$9+'px';}$A['z-index']=tab.DomUtil.getComputedZIndex($p1[0]);$p2.domRoot.css($A).css('width',$0+'px');},$3_1:function($p0){var $0=$p0;var $1=false;var $enum1=ss.IEnumerator.getEnumerator(this.menuStack);while($enum1.moveNext()){var $2=$enum1.current;if($2.domRoot[0]===$0.target||tab.DomUtil.isAncestorOf($2.domRoot[0],$0.target)){$1=true;break;}}if(!$1){this.menuViewModel.hide();}},$3_2:function($p0){var $0=$($p0.currentTarget);$0.removeClass('tabMenuItemHover');},$3_3:function($p0){var $0=$($p0.currentTarget);var $1=tab.MenuView.getMenuItem($0);var $2=tab.MenuView.getMenuItemLevel($0);for(var $3=this.menuStack.length-1;$3>=$2;$3--){var $4=this.menuStack[$3];$4.domRoot.hide();$4.domRoot.detach();this.menuStack.removeAt($3);}if(ss.isValue($1)&&ss.isValue($1.get_subMenu())){this.activateSubmenu($1,$0);}}}
tab.MenuViewWebTemplate=function(){tab.MenuViewWebTemplate.initializeBase(this,[tab.MenuTemplate.htmlTemplate]);}
tab.SortDrillBase=function(node){tab.SortDrillBase.initializeBase(this,[node]);this.$1_1=tab.SortDrillBase.$1_0.length;tab.SortDrillBase.$1_0.add(this);}
tab.SortDrillBase.prototype={$1_1:0,dispose:function(){tab.SortDrillBase.$1_0.remove(this);this.get_element().remove();tab.SortDrillBase.callBaseMethod(this, 'dispose');},isOtherActiveInRect:function(rect){for(var $0=0;$0<tab.SortDrillBase.$1_0.length;$0++){if($0!==this.$1_1){var $1=tab.SortDrillBase.$1_0[$0];if($1.isActiveInRect(rect)){return true;}}}return false;},isActiveInRect:function(rect){return false;},getSIRegionFromName:function(parentViewer,areaName){var $0,$1;var $2=areaName.replaceAll('Area','');var $3=parentViewer.get_sortIndicators();var $4=$3.sortIndicatorRegions;for($0=0,$1=$4.length;$0<$1;$0++){if($4[$0].sortRegion===$2){return $4[$0];}}return null;},showNodeAt:function(domNode,top,left){$(domNode).css('top',top+'px');$(domNode).css('left',left+'px');$(domNode).css('display','');},getWidgetPos:function(type,rect,dimension){if(type==='level'){if(dimension==='y'){return tab.$create_Point(rect.l+(rect.w/2)-4,rect.t+2);}else{return tab.$create_Point(rect.l+2,rect.t+(rect.h/2)-4);}}else{return tab.$create_Point(rect.x+2,rect.y+2);}},hideNode:function(domNode){$(domNode).css('display','none');},regionHitTest:function(regions,point){var $0=regions;var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};if(ss.isValue($1.value)&&tab.RectUtil.inRect($1.value,point)){return $1.key;}}return null;},clone:function(src){if(ss.isNullOrUndefined(src)){return src;}return this.mixin({},src);},mixin:function(src,other){var $0=other;var $dict1=$0;for(var $key2 in $dict1){var $1={key:$key2,value:$dict1[$key2]};var $2=src[$1.key];if(ss.isNullOrUndefined($2)||$2!==$0[$1.key]){src[$1.key]=$0[$1.key];}}return src;}}
tab.TiledViewerModel=function(){}
tab.TiledViewerModel.prototype={geometry:null,visibleGeometry:null,sortIndicators:null,posTVx:0,posTVy:0,dom:null,sheetid:null,layoutSession:null,session:null,inputHandlers:null,tlspacerAreaX:null,tlspacerAreaY:null,blspacerArea:null,regions:null,titleHeight:0}
tab.Sorting=function(tiledViewer,domNode){tab.Sorting.initializeBase(this,[$(document.createElement('div'))]);this.$1_4=tiledViewer;this.get_element().addClass('tab-tiledViewerSort');this.$1_2=new tab.Button(false);this.$1_2.get_element().addClass('tab-tvSortIndicator');this.$1_2.get_element().css('border','0');this.$1_2.get_element().css('position','absolute');this.$1_2.get_element().css('padding','0px');this.get_element().append(this.$1_2.get_element());this.$1_3=this.$1_2.get_element();domNode.appendChild(this.get_element().get(0));this.$1_B();this.$1_A(domNode);this.$1_3.css('display','none');}
tab.Sorting.prototype={$1_2:null,$1_3:null,$1_4:null,$1_5:null,$1_6:null,$1_7:null,$1_8:null,$1_9:null,dispose:function(){this.$1_4=null;this.$1_2.get_element().remove();this.$1_2.dispose();tab.Sorting.callBaseMethod(this, 'dispose');},onUpdate:function(){if(this.$1_9!=null){this.$1_9();this.$1_9=null;}this.$1_8=this.$1_4.get_visibleGeometry();this.$1_7=this.$1_4.get_sortIndicators();},hideSortIndicator:function(){if(!this.$1_14()){return;}var $0=new RegExp('(sortInd\\w+)?','g');this.$1_3.get(0).className=this.$1_3.get(0).className.replace($0,'');this.$1_3.css('display','none');this.$1_5=null;},isActiveInRect:function(rect){if(ss.isValue(this.$1_5)&&this.$1_5.$5&&tab.RectXYUtil.intersectsWith(rect,this.$1_6)){return true;}return false;},$1_A:function($p0){this.$1_7=this.$1_4.get_sortIndicators();if(ss.isValue(this.$1_7)&&tsConfig.allow_filter){$($p0).mousemove(ss.Delegate.create(this,function($p1_0){
this.$1_C($p1_0);}));}},$1_B:function(){this.$1_3.click(ss.Delegate.create(this,function($p1_0){
this.$1_12($p1_0);}));this.$1_3.mouseover(ss.Delegate.create(this,function($p1_0){
this.$1_10($p1_0);}));this.$1_3.mouseout(ss.Delegate.create(this,function($p1_0){
this.$1_11($p1_0);}));},$1_C:function($p0){if($p0.button>0){return;}if(ss.isNullOrUndefined(this.$1_7)||!tsConfig.allow_filter){return;}var $0=tab.$create_Point($p0.pageX-this.$1_4.get_posTVx(),$p0.pageY-this.$1_4.get_posTVy());var $1=this.$1_4.get_domWeb().scrollX.get(0);var $2=this.$1_4.get_domWeb().scrollY.get(0);var $3=tab.$create_Point($1.scrollLeft,$2.scrollTop);var $4=this.$1_8;var $5=this.regionHitTest(this.$1_8,$0);if(ss.isValue($5)){this.$1_15(this.getSIRegionFromName(this.$1_4,$5),$4[$5],$0,$3);}else{this.hideSortIndicator();}},$1_D:function($p0,$p1,$p2){var $0;var $1=$p0.sortIndicatorItems[$p1];var $2=this.$1_5;if(!$p0.isHorizontal){$0=($1.sortOrder==='asc')?'Left':'Right';}else{$0=($1.sortOrder==='asc')?'Up':'Down';}var $3=($1.isSorted)?'Solid':'Hollow';this.$1_5=new tab.vqluiweb$1($p0,$1,$p1,$0,$3,$p2);if(ss.isNullOrUndefined($2)||$2.$3!==$0||$2.$4!==$3||$2.$5!==$p2){this.$1_E();}},$1_E:function(){if(ss.isNullOrUndefined(this.$1_5)){return;}var $0='sortInd'+this.$1_5.$4+this.$1_5.$3+((this.$1_5.$5)?'Active':'');var $1=new RegExp('(sortInd\\w+)?','g');this.$1_3.get(0).className=this.$1_3.get(0).className.replace($1,'');this.$1_3.addClass($0);},$1_F:function(){if(!this.$1_14()){return;}var $0=this.$1_5.$1;var $1=this.$1_5.$0;if(!$0.isSorted){$0.isSorted=true;$0.sortOrder=$1.defSortOrder;}else{if($0.sortOrder===$1.defSortOrder){$0.sortOrder=($1.defSortOrder==='asc')?'desc':'asc';}else{$0.sortOrder=$1.defSortOrder;$0.isSorted=false;}}this.$1_D($1,this.$1_5.$2,this.$1_5.$5);},$1_10:function($p0){if(this.isOtherActiveInRect(this.$1_6)){return;}if(this.$1_14()&&!this.$1_5.$5){this.$1_5.$5=true;this.$1_E();}$p0.stopPropagation();},$1_11:function($p0){if(!this.$1_14()){return;}var $0=$(this.$1_3.get(0)).offset();var $1=$(this.$1_3.get(0)).outerHeight();var $2=$(this.$1_3.get(0)).outerWidth();if($0.left>$p0.pageX||($0.left+$2)<=$p0.pageX||$0.top>$p0.pageY||($0.top+$1)<=$p0.pageY){this.$1_5.$5=false;this.$1_E();$p0.stopPropagation();}},$1_12:function($p0){$p0.stopPropagation();$p0.preventDefault();var $0=this.$1_4.get_posTVx();var $1=this.$1_4.get_posTVy();var $2=tab.$create_Point($p0.pageX-$0,$p0.pageY-$1);var $3=this.$1_4.get_domWeb().scrollX.get(0);var $4=this.$1_4.get_domWeb().scrollY.get(0);var $5=tab.$create_Point($3.scrollLeft,$4.scrollTop);var $6=this.regionHitTest(this.$1_8,$2);if(ss.isNullOrUndefined($6)){return;}var $7=this.getSIRegionFromName(this.$1_4,$6);var $8=$7.regionRect;var $9=this.$1_8;$2.y+=($8.y-$9[$6].t);$2.x+=($8.x-$9[$6].l);this.$1_F();this.$1_3.addClass('clicked');this.$1_9=ss.Delegate.create(this,function(){
this.$1_3.removeClass('clicked');});tab.SortServerCommands.sortFromIndicator($2,$5,this.$1_4.get_sheetid());},$1_13:function($p0,$p1,$p2,$p3){if(this.isOtherActiveInRect($p2)){return;}this.$1_6=$p2;this.$1_D($p0,$p1,$p3);this.showNodeAt(this.$1_3.get(0),$p2.y,$p2.x);},$1_14:function(){return ss.isValue(this.$1_5);},$1_15:function($p0,$p1,$p2,$p3){if(ss.isNullOrUndefined($p0)){this.hideSortIndicator();return false;}if(ss.isValue(this.$1_5)&&ss.isValue(this.$1_5.$0)&&$p0.sortRegion!==this.$1_5.$0.sortRegion){this.hideSortIndicator();}var $0=tab.$create_Point($p2.x,$p2.y);var $1=$p0.regionRect;$0.y+=($1.y-$p1.t);$0.x+=($1.x-$p1.l);if($p0.canScrollY){$0.y+=$p3.y;}if($p0.canScrollX){$0.x+=$p3.x;}var $2=$p0.sortIndicatorItems;for(var $3=0,$4=$2.length;$3<$4;$3++){var $5=$2[$3].itemRect;if(tab.RectXYUtil.inRect($5,$0)){var $6=$2[$3].buttonRect;var $7=this.clone($6);$7.y-=($0.y-$p2.y);$7.x-=($0.x-$p2.x);var $8=tab.$create_Point($7.x+2,$7.y+2);var $9=tab.$create_Point($7.x+$7.w-2,$7.y+$7.h-2);if(tab.RectUtil.inRect($p1,$8)&&tab.RectUtil.inRect($p1,$9)){this.$1_13($p0,$3,$7,tab.RectXYUtil.inRect($7,$0));return true;}}}return false;}}
tab.TiledViewerRegionWeb=function(regionPart,domNode,sess,hoverApi,scrollHNode,scrollVNode,allowPanZoom,sheetID,viewModel){tab.TiledViewerRegionWeb.initializeBase(this,[regionPart,domNode,allowPanZoom,sheetID,viewModel]);this.$1_A=hoverApi;this.$1_5=$(domNode.firstChild);this.$1_31();this.$1_6=true;this.$1_26();this.disposables.add(new tab.SubscriptionDisposable(dojo.subscribe('modifierKeysChanged',ss.Delegate.create(this,function($p1_0){
this.modifierKeysChanged($p1_0);}))));this.$1_7=sess;this.scroller=new tab.WebScroller(scrollHNode,scrollVNode);}
tab.TiledViewerRegionWeb.prototype={$1_5:null,$1_6:false,$1_7:null,$1_9:null,$1_A:null,$1_B:null,$1_C:null,$1_D:null,$1_E:null,$1_F:null,$1_10:null,$1_11:false,$1_12:false,$1_13:false,$1_14:null,destroy:function(){this.$1_27();this.$1_A=null;tab.TiledViewerRegionWeb.callBaseMethod(this, 'destroy');},setXPos:function(xPos){if(this.regionContent!=null){this.regionContent.setXPos(xPos);}},setYPos:function(yPos){if(this.regionContent!=null){this.regionContent.setYPos(yPos);}},getIsMoveLeft:function(e){return (e.get_gestureInfo().pageX<this.domRectangle.origin.x);},getIsMoveUp:function(e){return (e.get_gestureInfo().pageY<this.domRectangle.origin.y);},getDragStartX:function(e){return this.domRectangle.origin.x;},getDragStartY:function(e){return this.domRectangle.origin.y;},reset:function(){if(this.$1_12){this.$1_13=false;return;}tab.TiledViewerRegionWeb.callBaseMethod(this, 'reset');this.$1_26();if(this.isScrolling){this.wasScrolling=false;return;}if(!this.$1_6){return;}if(this.allowPanZoom()){this.connectNode.addClass('allowPanZoom');}},$1_15:function($p0,$p1){this.$1_C($p0,$p1);},$1_16:function($p0,$p1){this.$1_23();this.$1_30($p0);this.domRectangle.pi=null;},$1_17:function($p0,$p1){this.$1_23();this.$1_30($p0);this.domRectangle.pi=$p1;},$1_18:function($p0){if(this.$1_11){this.$1_F($p0);}},$1_19:function($p0,$p1){if(this.$1_11){this.$1_10($p0,$p1);}},$1_1A:function($p0,$p1,$p2){var $0=this.toLocalCoordsEvent($p0);var $1=(this.$1_3E($p0))?0.5:2;this.$1_1B($p1,$0,$1,false,null);},$1_1B:function($p0,$p1,$p2,$p3,$p4){if(this.$1_12){return;}var $0=($p0.canDragH)?$p2:1;var $1=($p0.canDragV)?$p2:1;var $2=$p1;if($p3){this.$1_7.zoomDoubleClick(this.get_regionPart(),$p1,$2,($p2>1),$p4);}else if($p2>1){this.$1_7.zoomIn(this.get_regionPart(),$p1,$2);}else{this.$1_7.zoomOut(this.get_regionPart(),$p1,$2);}if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()||this.paneTableViewModel.get_visualModel().get_cacheUrlInfo().useUrl){this.$1_3C($p0,$p1,$0,$1);}this.$1_A.unsuppressHover(this);},$1_1C:function($p0){var $0=Math.floor($p0.w/2)+$p0.x;var $1=Math.floor($p0.h/2)+$p0.y;return tab.$create_Point($0,$1);},$1_1D:function($p0){var $0=Math.floor($p0.w/2)+$p0.x;var $1=Math.floor($p0.h/2)+$p0.y;return tab.$create_Point($0,$1);},$1_1E:function($p0){this.$1_1B($p0,this.$1_1C($p0),2,false,null);},$1_1F:function($p0){this.$1_1B($p0,this.$1_1C($p0),0.5,false,null);},$1_20:function(){},$1_21:function(){return null;},$1_22:function(){if(ss.isValue(this.domRectangle)){this.domRectangle.dom.removeClass('tvdrag_marquee');}},$1_23:function(){if(ss.isValue(this.domRectangle)){this.domRectangle.dom.addClass('tvdrag_marquee');}},$1_24:function($p0){this.$1_14=$p0;this.$1_25($p0);switch($p0){case 'silent':this.$1_E=ss.Delegate.create(this,this.$1_20);this.$1_F=ss.Delegate.create(this,this.$1_21);this.$1_10=ss.Delegate.create(this,this.$1_20);this.$1_C=ss.Delegate.create(this,this.$1_20);this.$1_D=ss.Delegate.create(this,this.$1_20);break;case 'select':this.$1_E=ss.Delegate.create(this,this.$1_39);this.$1_F=ss.Delegate.create(this,this.onMarqueeMouseMove);this.$1_10=ss.Delegate.create(this,this.$1_34);this.$1_C=ss.Delegate.create(this,this.$1_16);this.$1_D=ss.Delegate.create(this,this.$1_3A);break;case 'pan':if(!this.allowPanZoom()){this.$1_24('select');break;}this.$1_E=ss.Delegate.create(this,this.$1_39);this.$1_F=ss.Delegate.create(this,this.$1_35);this.$1_10=ss.Delegate.create(this,this.$1_36);this.$1_C=ss.Delegate.create(this,this.$1_37);this.$1_D=ss.Delegate.create(this,this.$1_20);break;case 'zoom':if(!this.allowPanZoom()){this.$1_24('select');break;}this.$1_E=ss.Delegate.create(this,this.$1_1A);this.$1_F=ss.Delegate.create(this,this.onMarqueeMouseMove);this.$1_10=ss.Delegate.create(this,this.$1_34);this.$1_C=ss.Delegate.create(this,this.$1_17);this.$1_D=ss.Delegate.create(this,this.$1_3B);break;}},$1_25:function($p0){$p0=($p0==='silent')?'select':$p0;var $0=$p0;var $1='tvmode'+$0.charAt(0).toString().toUpperCase()+$0.substr(1);this.connectNode.attr('class',this.connectNode.attr('class').replace(new RegExp('tvmode\\S*'),$1));this.$1_2F($p0);},$1_26:function(){if(!this.$1_11){this.$1_24('select');}},$1_27:function(){if(!$.browser.msie){return;}if(!ss.isValue(this.$1_B)){this.$1_B=[];}this.$1_B.forEach(function($p1_0){
$p1_0.stop(true);});this.$1_B.clear();},$1_28:function($p0,$p1,$p2){var $0=ss.Delegate.create(this,function(){
this.reset();});this.$1_7.pan(this.get_regionPart(),$p1,$p2,$0);this.$1_A.unsuppressHover(this);},$1_29:function($p0){return $p0.shiftKey&&!tableau.util.isCtrlKey($p0);},$1_2A:function($p0){return $p0.shiftKey&&tableau.util.isCtrlKey($p0);},$1_2B:function($p0){return $p0.shiftKey;},$1_2C:function($p0,$p1,$p2){if($p0.originalEvent.button>1){return;}this.$1_E($p0,$p1,$p2);},onRegionContentLoadComplete:function(sender,e){tab.TiledViewerRegionWeb.callBaseMethod(this, 'onRegionContentLoadComplete',[sender,e]);if(!this.isScrolling){this.domDragMask.css('display','none');this.domDragImage.css('display','none');this.domRectangle.dom.css('display','none');this.domDragImage.html('');}tableau.util.transform(this.domDragImage.get(0));},modifierKeysChanged:function(pseudoEvent){if(!this.allowPanZoom()||this.$1_11){return;}if(this.$1_29(pseudoEvent)){this.connectNode.css('cursor',tab.TiledViewerRegionWeb.$1_8['Pan']);}else if(this.$1_3E(pseudoEvent)){this.connectNode.css('cursor',tab.TiledViewerRegionWeb.$1_8['ZoomOut']);}else if(this.$1_2A(pseudoEvent)){this.connectNode.css('cursor',tab.TiledViewerRegionWeb.$1_8['ZoomIn']);}else{this.$1_2F(this.$1_14);}},startScrolling:function(scrollX,scrollY,scrollSpeed){this.stopScrolling();if(!((!!scrollX&&this.scroller.get_canScrollX())||(!!scrollY&&this.scroller.get_canScrollY()))){return;}var $0=(scrollSpeed==='fast')?15:200;this.$1_9=window.setInterval(ss.Delegate.create(this,function(){
this.$1_2D(scrollX,scrollY,scrollSpeed);}),$0);this.isScrolling=true;},stopScrolling:function(){if(ss.isValue(this.$1_9)){window.clearInterval(this.$1_9);}this.$1_9=null;this.wasScrolling=this.isScrolling;this.isScrolling=false;},$1_2D:function($p0,$p1,$p2){var $0=tab.$create_ScrollData();$0.scrollAmount=0;var $1=tab.$create_ScrollData();$1.scrollAmount=0;if(!!$p0){$0=this.$1_2E(0,$p0);this.scroller.scrollX($0.scrollAmount);}if(!!$p1){$1=this.$1_2E(1,$p1);this.scroller.scrollY($1.scrollAmount);}this.domRectangle.origin.x-=$0.scrollAmount;this.domRectangle.origin.y-=$1.scrollAmount;var $2=tab.DomUtil.getMarginBoxJQ(this.domRectangle.dom);$2.l+=$0.upperDelta;$2.w+=$0.sizeDelta;$2.t+=$1.upperDelta;$2.h+=$1.sizeDelta;tab.DomUtil.setMarginBoxJQ(this.domRectangle.dom,$2);this.domRectangle.dom.css('display','');if((!$0.scrollAmount&&!!$p0)||(!$1.scrollAmount&&!!$p1)){var $3=(!$0.scrollAmount)?0:$p0;var $4=(!$1.scrollAmount)?0:$p1;this.startScrolling($3,$4,$p2);}},$1_2E:function($p0,$p1){var $0=tab.$create_ScrollData();var $1=$p1*15;var $2=(!$p0)?this.scroller.get_scrollPos().x:this.scroller.get_scrollPos().y;var $3=(!$p0)?this.scroller.get_maxScroll().x:this.scroller.get_maxScroll().y;var $4=Math.max(0,Math.min($2+$1,$3));$0.scrollAmount=$4-$2;if($4!==$2){var $5=tab.DomUtil.getMarginBoxJQ(this.domRectangle.dom);var $6;var $7;var $8;if(!$p0){$7=$5.l;$8=$5.w;$6=this.scroller.get_visibleArea().w;}else{$7=$5.t;$8=$5.h;$6=this.scroller.get_visibleArea().h;}var $9=true;if($p1===-1){if($7<0){$9=false;$0.upperDelta=-$1;}}else{if($7<$6-$1||$8<$1){$0.upperDelta=-$1;}else{$9=false;}}var $A=Math.abs($1);$0.sizeDelta=($9)?$A:-$A;}return $0;},$1_2F:function($p0){switch($p0){case 'pan':this.connectNode.css('cursor',tab.TiledViewerRegionWeb.$1_8['Pan']);break;case 'zoom':this.connectNode.css('cursor',tab.TiledViewerRegionWeb.$1_8['ZoomIn']);break;default:this.connectNode.css('cursor',tab.TiledViewerRegionWeb.$1_8['Select']);break;}},$1_30:function($p0){if($p0.originalEvent.button>1){return;}if(this.$1_11){return;}this.$1_11=true;dojo.publish('close-menus-all');$p0.preventDefault();this.connectNode.parent().addClass('tableauDrag');this.$1_A.suppressHover(this);var $0=$p0.get_gestureInfo();this.domRectangle.origin=tab.$create_Point($0.startX,$0.startY);this.domRectangle.pi=null;},$1_31:function(){this.domRectangle.dom=$('<div></div>');this.domDragImage=$('<div></div>');this.domDragMask=$('<div></div>');this.$1_32(this.domRectangle.dom,'tvdrag',this.connectNode);this.$1_32(this.domDragImage,'tvdrag_image',this.domRectangle.dom);this.$1_32(this.domDragMask,'tvdrag_mask',this.domRectangle.dom);},$1_32:function($p0,$p1,$p2){$p0.addClass($p1);$p0.css('display','none');$p2.append($p0);},$1_33:function($p0){if(!this.$1_11){return;}this.$1_11=false;this.connectNode.parent().removeClass('tableauDrag');this.$1_22();this.stopScrolling();},$1_34:function($p0,$p1){if(!this.$1_11){return;}var $0=$p0.originalEvent;if($0.button>1){return;}this.$1_33($p0);var $1=$p0.get_gestureInfo();if(this.domRectangle.origin.x===$1.pageX&&this.domRectangle.origin.y===$1.pageY){this.$1_2C($p0,null,null);return;}this.$1_A.suppressHover(this);var $2=tab.DomUtil.getDojoCoordsJQ(this.domRectangle.dom);var $3=tab.RecordCast.dojoCoordsAsRectXY($2);var $4=this.toLocalCoordsRect($3);var $5=this.toLocalCoords(this.domRectangle.origin);this.$1_D($p0,$4,$5,$p1);},$1_35:function($p0){$p0.preventDefault();$p0.stopPropagation();var $0=$p0.get_gestureInfo();var $1=$0.pageX-this.domRectangle.origin.x;var $2=$0.pageY-this.domRectangle.origin.y;if(!this.domRectangle.pi.canDragH){$1=0;}if(!this.domRectangle.pi.canDragV){$2=0;}this.connectNode.css('cursor',tab.TiledViewerRegionWeb.$1_8['Panning']);tab.DomUtil.setMarginBoxJQ(this.domDragImage,tab.$create_Rect($1,$2,this.domDragImage.width(),this.domDragImage.height()));return null;},$1_36:function($p0,$p1){if(!this.$1_11){return;}if($p0.originalEvent.button>1){return;}$p0.preventDefault();$p0.stopPropagation();this.$1_33($p0);var $0=$p0.get_gestureInfo();if(this.domRectangle.origin.x===$0.pageX&&this.domRectangle.origin.y===$0.pageY){this.$1_2C($p0,null,null);return;}this.$1_A.suppressHover(this);var $1=this.toLocalCoords(this.domRectangle.origin);var $2=tab.$create_Point($0.pageX-this.domRectangle.origin.x,$0.pageY-this.domRectangle.origin.y);if(!this.domRectangle.pi.canDragH){$2.x=0;}if(!this.domRectangle.pi.canDragV){$2.y=0;}this.$1_28($p0,$1,$2);this.$1_26();},$1_37:function($p0,$p1){this.$1_30($p0);this.domRectangle.pi=$p1;this.$1_38($p1);},$1_38:function($p0){var $0=tab.$create_Rect($p0.x,$p0.y,$p0.w+1,$p0.h+1);var $1=this.$1_5.clone();if(Type.canCast(this.regionContent,tab.VisualRegionCanvasView)){var $2=$1.get(0).firstChild;var $3=new tab.TabRenderContext2D($2.getContext('2d'));(this.regionContent).copyContent($3);}$1.removeClass();$1.addClass('tvdrag_imageContainer');this.domDragImage.append($1);this.domDragImage.css('display','');tab.DomUtil.setMarginBoxJQ($1,tab.$create_Rect(-$0.l-1,-$0.t-1,$1.width(),$1.height()));tab.DomUtil.setMarginBoxJQ(this.domDragImage,tab.$create_Rect(0,0,$p0.w-2,$p0.h-2));this.domDragMask.css('display','');tab.DomUtil.setMarginBoxJQ(this.domRectangle.dom,$0);this.domRectangle.dom.css('display','');},$1_39:function($p0,$p1,$p2){var $0=this.toLocalCoordsEvent($p0);var $1=tab.$create_RectXY($0.x,$0.y,0,0);var $2=tab.ResolveSelectAction.fromNormalizedEvent($p0);var $3=null;var $4=null;var $5=false;if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){if($2==='simple'||!this.$1_3F()){if(this.get_regionPart()==='viz'){$3=this.doSelectMarkFromPoint($0,$2);if(ss.isValue(this.get_sceneInfo())&&!tab.MiscUtil.isNullOrEmpty($3)){$4=tab.SceneUtils.getPaneDescriptorKeyFromTupleId($3[0],this.get_sceneInfo().get_scene());}}else if(ss.isValue(this.get_contentProvider())){var $9=this.doSelectNodeFromPoint($0,$2);if(!$9){tab.SelectionClientCommands.clearAllSelections(this.get_sheetid());}$5=$9;}}}else{tab.SelectionClientCommands.selectRegion(this.get_regionPart(),$1,$2,this.get_sheetid());if(!tsConfig.allow_select){this.$1_A.unsuppressHover(this);}}var $6=this.paneTableViewModel.get_selectionsModel();var $7=$6.get_tupleSelection().get_ids();var $8=new tab.LocalUbertipInfo($3,$7,$4,$5);tab.UberTipClientCommands.getUberTip(this.get_regionPart(),this.get_sheetid(),$1,$8,$p2,null);},$1_3A:function($p0,$p1,$p2,$p3){var $0=tab.$create_Point($p1.x,$p1.y);if($p2.x===$p1.x&&ss.isValue($p1.w)&&!!$p1.w){$0.x+=$p1.w;}if($p2.y===$p1.y&&ss.isValue($p1.h)&&!!$p1.h){$0.y+=$p1.h;}var $1=this.get_regionPart();var $2=ss.Delegate.create(this,function($p1_0,$p1_1){
$p3($p1_0,$0,$p1_1);this.$1_A.unsuppressHover(this);});var $3=ss.Delegate.create(this,function(){
this.$1_A.unsuppressHover(this);});var $4=tab.ResolveSelectAction.fromNormalizedEvent($p0,true);var $5=new tab.LocalUbertipInfo(null,null,null,true);var $6=new tab.UbertipParams($1,this.get_sheetid(),$p1,$5,$2,$3);if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()){this.doSelectMarkAndUbertipFromRect($p1,false,$4,$6);}else{tab.SelectionClientCommands.selectRegionAndDoUbertip($1,$p1,$4,this.get_sheetid(),$6);if(!tsConfig.allow_select){this.$1_A.unsuppressHover(this);}}},$1_3B:function($p0,$p1,$p2,$p3){var $0=this.domRectangle.pi;if($p1.w<4&&$p1.h<4){this.$1_1A($p0,$0,null);}var $1=this.$1_1C($0);if(this.$1_3E($p0)){this.$1_1F($0);return;}else{this.$1_7.zoomIn(this.get_regionPart(),$p1,$1);}var $2=this.$1_1D($p1);var $3=(this.$1_3E($p0))?$p1.w/$0.w:$0.w/$p1.w;var $4=(this.$1_3E($p0))?$p1.h/$0.h:$0.h/$p1.h;if($0.canDragH&&$0.canDragV){$3=$4=Math.min($3,$4);}else if(!$0.canDragV){$4=1;$2.y=$1.y;}else if(!$0.canDragH){$3=1;$2.x=$1.x;}else{return;}this.$1_26();if(tab.ApplicationModel.get_instance().get_isLocalRenderMode()||this.paneTableViewModel.get_visualModel().get_cacheUrlInfo().useUrl){this.$1_3C($0,$2,$3,$4);}this.$1_A.unsuppressHover(this);},$1_3C:function($p0,$p1,$p2,$p3){var $0=($p2<1)?-1:($p2>1)?1:0;var $1=($p3<1)?-1:($p3>1)?1:0;var $2=tab.$create_Point($0,$1);var $3=this.$1_1C($p0);var $4=Math.floor(($3.x-$p1.x)*$2.x*$p2);var $5=Math.floor(($3.y-$p1.y)*$2.y*$p3);var $6=tab.$create_TransformSpec();$6.translateX=$4;$6.translateY=$5;$6.scaleX=$p2;$6.scaleY=$p3;$6.time=777;this.$1_38($p0);if($.browser.msie){this.$1_3D($p0,$6);return;}var $7=this.domDragImage.get(0);this.$1_13=true;this.$1_12=true;window.setTimeout(ss.Delegate.create(this,function(){
tableau.util.transform($7,$6);var $1_0=500;window.setTimeout(ss.Delegate.create(this,function(){
this.$1_12=false;if(!this.$1_13){this.reset();}}),$1_0);}),50);},$1_3D:function($p0,$p1){var $0;var $1=$p1.scaleX;var $2=$p1.scaleY;if(!$.browser.msie){return;}this.$1_27();var $3=tab.DomUtil.getMarginBoxJQ(this.domDragImage);$0={};var $4=Math.floor($3.w*$1);var $5=Math.floor($3.h*$2);var $6=$p1.translateX+Math.floor(($3.w/2)-($4/2));var $7=$p1.translateY+Math.floor(($3.h/2)-($5/2));$0['left']=$6;$0['top']=$7;$0['width']=$4;$0['height']=$5;this.$1_B.add(new tab.ControlledAnimation(this.domDragImage,$0,777));var $8=this.domDragImage.children().first();$3=tab.DomUtil.getMarginBoxJQ($8);$0={};$0['width']=Math.floor($3.w*$1)+$p0.x;$0['height']=Math.floor($3.h*$2)+$p0.y;this.$1_B.add(new tab.ControlledAnimation($8,$0,777));var $9=($p0.x*(1-$1));var $A=($p0.y*(1-$2));var $B=tab.$create_Point($9,$A);$8.children().each(ss.Delegate.create(this,function($p1_0,$p1_1){
var $1_0=$($p1_1);$3=tab.DomUtil.getMarginBoxJQ($1_0);$0={};$0['left']=(($3.l*$1)+$B.x);$0['top']=(($3.t*$2)+$B.y);$0['width']=Math.floor($3.w*$1);$0['height']=Math.floor($3.h*$2);this.$1_B.add(new tab.ControlledAnimation($1_0,$0,777));}));this.$1_B.forEach(function($p1_0){
$p1_0.play();});},$1_3E:function($p0){return (this.$1_14==='zoom'&&$p0.altKey)||($p0.shiftKey&&tableau.util.isCtrlKey($p0)&&$p0.altKey);},$1_3F:function(){var $enum1=ss.IEnumerator.getEnumerator(this.paneTableViewModel.get_selectionsModel().get_allLegendSelections());while($enum1.moveNext()){var $0=$enum1.current;if(!$0.get_isEmpty()){return true;}}return false;}}
tab.ControlledAnimation=function(element,animationTargets,duration){this.$0=element;this.$1=animationTargets;this.$2=duration;}
tab.ControlledAnimation.prototype={$0:null,$1:null,$2:0,play:function(){this.$0.animate(this.$1,this.$2);},stop:function(clearQueue){this.$0.stop(clearQueue);}}
tab.TooltipBehavior=function(tooltip){tab.Param.verifyValue(tooltip,'tooltip');this.$3=tooltip;this.$3.add_showed(ss.Delegate.create(this,this.$15));this.$3.add_closed(ss.Delegate.create(this,this.$14));this.$3.add_disposed(ss.Delegate.create(this,this.$1F));this.$5=[];var $0=tab.$create_EventHandleSpec();tab.TableauEventHandler.setHandler($0,'hover',ss.Delegate.create(this,this.$13));tab.TableauEventHandler.setHandler($0,'mouseleave',ss.Delegate.create(this,this.$1E));tab.TableauEventHandler.setHandler($0,'potentialTap',ss.Delegate.create(this,this.$18));this.$4=tab.EventUtil.createEventHandler(this.$3.get_element()[0],$0);this.$6=tab.TooltipBehavior.$12();$(window.document.documentElement).bind(this.$6,ss.Delegate.create(this,this.$17));}
tab.TooltipBehavior.createTooltip=function(){var $0=new tab.Tooltip();tab.TooltipBehavior.attach($0);return $0;}
tab.TooltipBehavior.attach=function(tooltip){return new tab.TooltipBehavior(tooltip);}
tab.TooltipBehavior.$12=function(){tab.TooltipBehavior.$7++;return 'mousemove.TooltipBehavior'+tab.TooltipBehavior.$7.toString();}
tab.TooltipBehavior.prototype={$3:null,$4:null,$5:null,$6:null,$8:10000,$9:800,$A:400,$B:false,$C:null,$D:null,$E:null,$F:false,$10:null,$11:null,get_timeoutInitialShown:function(){return this.$8;},set_timeoutInitialShown:function(value){this.$8=value;return value;},get_timeoutMove:function(){return this.$9;},set_timeoutMove:function(value){this.$9=value;return value;},get_timeoutLeaveTooltip:function(){return this.$A;},set_timeoutLeaveTooltip:function(value){this.$A=value;return value;},dispose:function(){if(this.$4!=null){this.$4.dispose();}if(ss.isValue(this.$3)){this.$3.remove_showed(ss.Delegate.create(this,this.$15));this.$3.remove_closed(ss.Delegate.create(this,this.$14));this.$3.remove_disposed(ss.Delegate.create(this,this.$1F));}this.$19();},$13:function($p0){if(this.$B){return;}this.$1A();this.$B=true;},$14:function($p0,$p1){this.$3.get_element().unbind('.TooltipBehavior');this.$C=null;this.$1A();this.$11=null;},$15:function($p0,$p1){this.$1A();this.$B=false;this.$F=false;this.$11=Date.get_now();this.$C=tab.$create_Point($p1.origX,$p1.origY);var $0=tab.$create_Rect($p1.origX-10,$p1.origY-10,20,20);this.$10=tab.RectUtil.union($0,this.$1C());this.$1D(this.get_timeoutInitialShown());},$16:function(){if(ss.isValue(this.$E)){window.clearTimeout(this.$E);this.$E=null;}this.$E=window.setTimeout(ss.Delegate.create(this,function(){
if(ss.isNullOrUndefined(this.$D)){this.$D=this.$1D(this.get_timeoutMove());}}),250);},$17:function($p0){var $0=this.$C;this.$C=tab.$create_Point($p0.pageX,$p0.pageY);if(!this.$3.get_isShown()||this.$B){return;}if(!tab.RectUtil.inRect(this.$10,this.$C)){this.$3.close();return;}var $1=tab.PointUtil.distance($0,this.$C);var $2=Date.get_now()-this.$11;if($1>10&&$2>500){this.$F=true;if(ss.isValue(this.$D)){window.clearTimeout(this.$D);this.$5.remove(this.$D);this.$D=null;}this.$16();}else if(this.$F){if(ss.isNullOrUndefined(this.$D)){this.$D=this.$1D(this.get_timeoutMove());}}},$18:function($p0){$p0.preventDefault();$p0.stopPropagation();this.$3.close();},$19:function(){$(window.document.documentElement).unbind(this.$6);},$1A:function(){var $enum1=ss.IEnumerator.getEnumerator(this.$5);while($enum1.moveNext()){var $0=$enum1.current;window.clearTimeout($0);}this.$5.clear();if(ss.isValue(this.$D)){window.clearTimeout(this.$D);this.$D=null;}if(ss.isValue(this.$E)){window.clearTimeout(this.$E);this.$E=null;}},$1B:function($p0){if(ss.isNullOrUndefined($p0)){return false;}var $0=this.$1C();return tab.RectUtil.inRect($0,$p0);},$1C:function(){var $0=this.$3.get_element().position();var $1=tab.$create_Rect($0.left,$0.top,this.$3.get_element().width(),this.$3.get_element().height());return $1;},$1D:function($p0){var $0=window.setTimeout(ss.Delegate.create(this,function(){
if(this.$B){return;}if(this.$1B(this.$C)){this.$B=true;return;}this.$3.close();}),$p0);this.$5.add($0);return $0;},$1E:function($p0){this.$B=false;this.$1D(this.get_timeoutLeaveTooltip());},$1F:function($p0,$p1){this.dispose();}}
tab.ViewingToolbarWeb=function(app,isTop){tab.ViewingToolbarWeb.initializeBase(this,[app,isTop]);}
tab.ViewingToolbarWeb.prototype={makeCustomViewsPanel:function(viewModel,toolbarButton){return new tab.CustomViewsPanelWeb(viewModel,toolbarButton);},makeMenuView:function(viewModel){return new tab.MenuViewWeb(viewModel);},makeShareButtons:function(){var $0=[];var $1=new tab.ToolbarTextButton(ss.Delegate.create(this,this.shareButtonClicked));$1.setLeftIcon('tab-icon-share').setText(tab.Strings.ToolbarShare);$1.get_element().addClass('wcShareButton');if(tsConfig.isPublic){$1.get_element().addClass('tab-toolbar-share-text-button-public');}$0.add($1);if(tsConfig.isPublic){var $2=new tab.ToolbarIconButton(ss.Delegate.create(this,this.facebookButtonClicked));$2.setIcon('tab-icon-facebook');$2.get_element().addClass('tab-icon-public');$0.add($2);var $3=new tab.ToolbarIconButton(ss.Delegate.create(this,this.twitterButtonClicked));$3.setIcon('tab-icon-twitter');$3.get_element().addClass('tab-icon-public');$0.add($3);var $4=new tab.ToolbarIconButton(ss.Delegate.create(this,this.mailButtonClicked));$4.setIcon('tab-icon-mail');$4.get_element().addClass('tab-icon-public');$0.add($4);var $5=new tab.ToolbarIconButton(ss.Delegate.create(this,this.linkButtonClicked));$5.setIcon('tab-icon-link');$5.get_element().addClass('wcShareButton');$5.get_element().addClass('tab-icon-public');$0.add($5);}$0.forEach(ss.Delegate.create(this.disposables,this.disposables.add));return $0;}}
tab.WebScroller=function(domHNodeToScroll,domVNodeToScroll){this.$0=domHNodeToScroll.get(0);this.$1=domVNodeToScroll.get(0);}
tab.WebScroller.prototype={$0:null,$1:null,get_canScrollX:function(){return this.get_maxScroll().x>0;},get_canScrollY:function(){return this.get_maxScroll().y>0;},get_scrollPos:function(){var $0=(ss.isNullOrUndefined(this.$0))?0:$(this.$0).scrollLeft();var $1=(ss.isNullOrUndefined(this.$1))?0:$(this.$1).scrollTop();return tab.$create_Point($0,$1);},get_maxScroll:function(){return tab.$create_Point((ss.isNullOrUndefined(this.$0))?0:(this.$0.scrollWidth-this.$0.offsetWidth),(ss.isNullOrUndefined(this.$1))?0:(this.$1.scrollHeight-this.$1.offsetHeight));},get_visibleArea:function(){return tab.$create_Size((ss.isNullOrUndefined(this.$0))?0:this.$0.offsetWidth,(ss.isNullOrUndefined(this.$1))?0:this.$1.offsetHeight);},scrollX:function(amount){if(this.get_canScrollX()){this.$0.scrollLeft+=amount;}},scrollY:function(amount){if(this.get_canScrollY()){this.$1.scrollTop+=amount;}},refresh:function(){}}
tab.ContinuousSliderWeb=function(viewModel){tab.ContinuousSliderWeb.initializeBase(this,[viewModel]);this.viewModel=viewModel;var $0=tab.$create_ContinuousSliderParams();$0.templateString=tab.ContinuousSliderWeb.tableauSliderTemplate;$0.onChange=ss.Delegate.create(this,this.$3_8);$0.value=viewModel.get_sliderCurrentValue();$0.minimum=viewModel.get_sliderMinimumValue();$0.maximum=viewModel.get_sliderMaximumValue();$0.slideDuration=0;$0.intermediateChanges=true;$0.style='width:'+viewModel.get_pixelWidth()+'px;';$0.showButtons=false;this.$3_0=new dijit.form.HorizontalSlider($0,this.get_template().domRoot.get(0));this.$3_3=dojo.subscribe('/dnd/move/start',ss.Delegate.create(this,this.$3_6));this.$3_4=dojo.subscribe('/dnd/move/stop',ss.Delegate.create(this,this.$3_7));this.viewModel.add_sliderValueChange(ss.Delegate.create(this,this.$3_5));this.get_template().domRoot.append(this.$3_0.domNode);if(this.viewModel.get_ruleTickCount()>0){var $1=$("<div class='tabSliderRule'>");var $2={count:this.viewModel.get_ruleTickCount()};this.$3_1=new dijit.form.HorizontalRule($2,$1.get(0));$1.append(this.$3_1.domNode);this.$3_1.startup();this.get_template().domRoot.append($1);}this.$3_2=false;}
tab.ContinuousSliderWeb.prototype={$3_0:null,$3_1:null,$3_2:false,$3_3:null,$3_4:null,$3_5:function($p0){this.$3_0._setValueAttr(this.viewModel.get_sliderCurrentValue());},$3_6:function($p0){if(ss.isValue($p0)&&$p0.node===this.$3_0.sliderHandle){this.$3_2=true;}},$3_7:function($p0){if(ss.isValue($p0)&&$p0.node===this.$3_0.sliderHandle){this.$3_2=false;this.applyChanges(this.viewModel.get_sliderCurrentValue());}},$3_8:function($p0){this.viewModel.applyIntermediateChange($p0);if(!this.$3_2){this.applyChanges(this.viewModel.get_sliderCurrentValue());}},dispose:function(){dojo.unsubscribe(this.$3_3);dojo.unsubscribe(this.$3_4);tab.ContinuousSliderWeb.callBaseMethod(this, 'dispose');}}
tab.StepperControlViewWeb=function(viewModel){tab.StepperControlViewWeb.initializeBase(this,[viewModel,new tab.WebStepperControlTemplate()]);}
tab.WebStepperControlTemplate=function(){tab.WebStepperControlTemplate.initializeBase(this,["<span class='tabStepperControl'>\n            <div class='tabButtonContainer'>\n                <div class='tabIncrementButton'>&#x25B2;</div>\n                <div class='tabDecrementButton'>&#x25BC;</div>\n            </div>\n            <input class='tabStepCountValue' type='text'></input>\n        </span>"]);this.decrementButton=this.getElementBySelector('.tabDecrementButton');this.incrementButton=this.getElementBySelector('.tabIncrementButton');this.valueText=this.getElementBySelector('.tabStepCountValue');}
tab.CategoricalLegendViewWeb.registerClass('tab.CategoricalLegendViewWeb',tab.CategoricalLegendView);tab.CategoricalLegendTemplateWeb.registerClass('tab.CategoricalLegendTemplateWeb',tab.CategoricalLegendTemplate);tab.MouseHandler.registerClass('tab.MouseHandler',tab.TableauEventHandler);tab.ApplicationViewModelWeb.registerClass('tab.ApplicationViewModelWeb',tab.ApplicationViewModel);tab.LegacyLegendViewWeb.registerClass('tab.LegacyLegendViewWeb',tab.LegacyLegendView);tab.PaneTableViewWeb.registerClass('tab.PaneTableViewWeb',tab.PaneTableView);tab.FZTOpsWeb.registerClass('tab.FZTOpsWeb',null,tab.IFloatingZoomToolbarOps);tab.HoverApi.registerClass('tab.HoverApi',null,ss.IDisposable);tab.PaneTableTemplateWeb.registerClass('tab.PaneTableTemplateWeb',tab.PaneTableTemplate);tab.UberPopupViewWeb.registerClass('tab.UberPopupViewWeb',tab.UberPopupView);tab.AccordionViewWeb.registerClass('tab.AccordionViewWeb',tab.AccordionView);tab.ComboBoxViewWeb.registerClass('tab.ComboBoxViewWeb',tab.ComboBoxView);tab.CustomViewsPanelWeb.registerClass('tab.CustomViewsPanelWeb',tab.CustomViewsPanel);tab.DojoWidgetsWeb.registerClass('tab.DojoWidgetsWeb');tab.SortDrillBase.registerClass('tab.SortDrillBase',tab.Widget);tab.Drilling.registerClass('tab.Drilling',tab.SortDrillBase);tab.vqluiweb$2.registerClass('tab.vqluiweb$2');tab.vqluiweb$1.registerClass('tab.vqluiweb$1');tab._PxLevel.registerClass('tab._PxLevel');tab.FloatingZoomToolbarWeb.registerClass('tab.FloatingZoomToolbarWeb',tab.FloatingZoomToolbar);tab.LegendPanelWeb.registerClass('tab.LegendPanelWeb',tab.LegendPanel);tab.MenuViewWeb.registerClass('tab.MenuViewWeb',tab.MenuView);tab.MenuViewWebTemplate.registerClass('tab.MenuViewWebTemplate',tab.MenuTemplate);tab.TiledViewerModel.registerClass('tab.TiledViewerModel');tab.Sorting.registerClass('tab.Sorting',tab.SortDrillBase);tab.TiledViewerRegionWeb.registerClass('tab.TiledViewerRegionWeb',tab.TiledViewerRegion);tab.ControlledAnimation.registerClass('tab.ControlledAnimation');tab.TooltipBehavior.registerClass('tab.TooltipBehavior',null,ss.IDisposable);tab.ViewingToolbarWeb.registerClass('tab.ViewingToolbarWeb',tab.ViewingToolbar);tab.WebScroller.registerClass('tab.WebScroller',null,tab.IScroller);tab.ContinuousSliderWeb.registerClass('tab.ContinuousSliderWeb',tab.ContinuousSlider);tab.StepperControlViewWeb.registerClass('tab.StepperControlViewWeb',tab.StepperControlView);tab.WebStepperControlTemplate.registerClass('tab.WebStepperControlTemplate',tab.StepperControlTemplate);(function(){tab.ObjectRegistry.registerType(tab.CategoricalLegendView,tab.CategoricalLegendViewWeb);})();
(function(){tab.ObjectRegistry.registerType(tab.LegacyLegendView,tab.LegacyLegendViewWeb);})();
(function(){tab.ObjectRegistry.registerType(tab.PaneTableView,tab.PaneTableViewWeb);})();
tab.PaneTableTemplateWeb.htmlTemplate="\n<div class='tab-tiledViewer placeholder'>\n   <div class='tab-clip'>\n     <div class='tab-tvTLSpacer tvimagesNS'><img></img></div>\n     <div class='tab-tvTRSpacer tvimagesNS'><img></img></div>\n     <div class='tab-tvBLSpacer tvimagesNS'><img></img></div>\n     <div class='tab-tvBRSpacer tvimagesNS'><img></img></div>\n     <div class='tab-tvYLabel tvimagesNS'><div class='tvimagesContainer'></div></div>\n     <div class='tab-tvLeftAxis tvimagesNS'><div class='tvimagesContainer'></div></div>\n     <div class='tab-tvRightAxis tvimagesNS'><div class='tvimagesContainer'></div></div>\n     <div class='tab-tvXLabel tvimagesNS'><div class='tvimagesContainer'></div></div>\n     <div class='tab-tvBottomAxis tvimagesNS'><div class='tvimagesContainer'></div></div>\n     <div class='tab-tvTopAxis tvimagesNS'><div class='tvimagesContainer'></div></div>\n     <div class='tab-tvView tvimagesNS'><div class='tvScrollContainer'><div class='tvimagesContainer'></div></div></div>\n     <div class='tab-tvTitle tvimagesNS'></div>\n     <div class='tab-tvCaption tvimagesNS'></div>\n     <div class='tab-tvScrollX tvimages'><div class='tvimagesContainer'></div></div>\n     <div class='tab-tvScrollY tvimages'><div class='tvimagesContainer'></div></div>\n   </div>\n</div>";(function(){tab.ObjectRegistry.registerType(tab.UberPopupView,tab.UberPopupViewWeb);})();
(function(){tab.ObjectRegistry.registerType(tab.AccordionView,tab.AccordionViewWeb);})();
(function(){tab.ObjectRegistry.registerType(tab.ComboBoxView,tab.ComboBoxViewWeb);})();
(function(){dojo.require('tableau.web.WebClient');var $0=[tableau.base.widget.LegendPanel];dojo.declare('tableau.web.widget.LegendPanelWeb',$0,(tab.LegendPanelWeb).prototype);})();
(function(){tab.ObjectRegistry.registerType(tab.MenuView,tab.MenuViewWeb);})();
tab.SortDrillBase.$1_0=[];tab.TiledViewerRegionWeb.$1_8=null;(function(){tab.Application.add_started(function(){
tab.TiledViewerRegionWeb.$1_8={};tab.TiledViewerRegionWeb.$1_8['ZoomIn']=($.browser.msie)?'crosshair':'url('+tableau.util.assetUrl('cursors/zoomin.gif',true)+') 8 7, pointer';tab.TiledViewerRegionWeb.$1_8['ZoomOut']=($.browser.msie)?'crosshair':'url('+tableau.util.assetUrl('cursors/zoomout.gif',true)+') 8 7, pointer';tab.TiledViewerRegionWeb.$1_8['Pan']=($.browser.msie)?'move':'url('+tableau.util.assetUrl('cursors/pan.gif',true)+') 8 10, pointer';tab.TiledViewerRegionWeb.$1_8['Panning']=($.browser.msie)?'move':'url('+tableau.util.assetUrl('cursors/pandrag.gif',true)+') 8 10, pointer';tab.TiledViewerRegionWeb.$1_8['Select']='pointer';});})();
tab.TooltipBehavior.$7=0;tab.ContinuousSliderWeb.tableauSliderTemplate="<div class='dijit dijitReset'>"+"<div class='dijitReset tableauSlider' dojoAttachPoint='tableauSlider'>"+"<table class='dijit dijitReset' cellspacing='0' cellpadding='0' border='0' rules='none' dojoAttachEvent='onkeypress:_onKeyPress'>"+"<tr class='dijitReset'>"+"<td class='dijitReset'></td>"+"<td dojoAttachPoint='containerNode,topDecoration' class='dijitReset' style='text-align:center;width:100%;'></td>"+"<td class='dijitReset'></td>"+'</tr>'+"<tr class='dijitReset'>"+"<td class='dijitReset'>"+"<div class='dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper dijitSliderLeftBumper' dojoAttachEvent='onclick:_onClkDecBumper'></div>"+'</td>'+"<td class='dijitReset'>"+"<input dojoAttachPoint='valueNode' type='hidden' name='${name}'>"+"<div class='dijitReset dijitSliderBarContainerH' waiRole='presentation' dojoAttachPoint='sliderBarContainer'>"+"<div waiRole='presentation' dojoAttachPoint='progressBar' class='dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH' dojoAttachEvent='onclick:_onBarClick'>"+"<div class='dijitSliderMoveable dijitSliderMoveableH'>"+"<div dojoAttachPoint='sliderHandle,focusNode' class='dijitSliderImageHandle dijitSliderImageHandleH' dojoAttachEvent='onmousedown:_onHandleClick' waiRole='slider' valuemin='${minimum}' valuemax='${maximum}'></div>"+'</div>'+'</div>'+"<div waiRole='presentation' dojoAttachPoint='remainingBar' class='dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH' dojoAttachEvent='onclick:_onBarClick'></div>"+'</div>'+'</td>'+"<td class='dijitReset'>"+"<div class='dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper dijitSliderRightBumper' dojoAttachEvent='onclick:_onClkIncBumper'></div>"+'</td>'+'</tr>'+"<tr class='dijitReset'>"+"<td class='dijitReset'></td>"+"<td dojoAttachPoint='containerNode,bottomDecoration' class='dijitReset'></td>"+"<td class='dijitReset'></td>"+'</tr>'+'</table>'+'</div>'+"<div class='dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowDec' style='display:none' dojoAttachPoint='decrementButton'>"+"<div class='dijitSliderDecrementIconH' tabIndex='-1'>"+"<span class='dijitSliderButtonInner'>-</span>"+'</div>'+'</div>'+"<div class='dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH tableauArrowInc' style='display:none' dojoAttachPoint='incrementButton'>"+"<div class='dijitSliderIncrementIconH' tabIndex='-1'>"+"<span class='dijitSliderButtonInner'>+</span>"+'</div>'+'</div>'+'</div>';(function(){tab.ObjectRegistry.registerType(tab.ContinuousSlider,tab.ContinuousSliderWeb);})();
(function(){tab.ObjectRegistry.registerType(tab.StepperControlView,tab.StepperControlViewWeb);})();
tab.WebStepperControlTemplate.template="<span class='tabStepperControl'>\n            <div class='tabButtonContainer'>\n                <div class='tabIncrementButton'>&#x25B2;</div>\n                <div class='tabDecrementButton'>&#x25BC;</div>\n            </div>\n            <input class='tabStepCountValue' type='text'></input>\n        </span>";});// This script was generated using Script# v0.7.4.0
